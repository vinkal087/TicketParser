dojo.provide("srmdojoc.nls.srmdojoc_en-us");dojo.provide("dojo.cldr.nls.gregorian");dojo.cldr.nls.gregorian._built=true;dojo.provide("dojo.cldr.nls.gregorian.en_us");dojo.cldr.nls.gregorian.en_us={"quarters-format-abbreviated":["Q1","Q2","Q3","Q4"],"dateFormat-medium":"MMM d, yyyy",pm:"PM","timeFormat-full":"h:mm:ss a v",dateTimeFormat:"{1} {0}",dateTimeAvailableFormats:["HH:mm","HH:mm:ss","MMMM d","M/d","mm:ss","MM/yy","Q yy","QQQQ yy","MMM yyyy","yy MMM","yy Q","yyyy"],"months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],eraNames:["Before Christ","Anno Domini"],am:"AM","days-standAlone-narrow":["S","M","T","W","T","F","S"],"timeFormat-medium":"h:mm:ss a","dateFormat-long":"MMMM d, yyyy","field-dayperiod":"AM/PM","dateFormat-short":"M/d/yy","months-format-wide":["January","February","March","April","May","June","July","August","September","October","November","December"],"timeFormat-short":"h:mm a","months-format-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],eraAbbr:["BC","AD"],"days-format-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"timeFormat-long":"h:mm:ss a z","quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormat-full":"EEEE, MMMM d, yyyy","days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","field-minute":"Minute","field-weekday":"Day of the Week","dateTimeFormats-appendItem-Year":"{0} {1}","field-era":"Era","field-hour":"Hour","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","dateTimeFormats-appendItem-Timezone":"{0} {1}","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","field-zone":"Zone","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","field-year":"Year","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","field-week":"Week","field-month":"Month","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","field-second":"Second","field-day":"Day","dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","quarters-stand-alone-narrow":["1","2","3","4"],"dateTimeFormats-appendItem-Era":"{0} {1}",eraNarrow:["BCE","CE"]};dojo.provide("dijit.form.nls.validate");dijit.form.nls.validate._built=true;dojo.provide("dijit.form.nls.validate.en_us");dijit.form.nls.validate.en_us={rangeMessage:"This value is out of range.",invalidMessage:"The value entered is not valid.",missingMessage:"This value is required."};dojo.provide("dijit.form.nls.ComboBox");dijit.form.nls.ComboBox._built=true;dojo.provide("dijit.form.nls.ComboBox.en_us");dijit.form.nls.ComboBox.en_us={previousMessage:"Previous choices",nextMessage:"More choices"};dojo.provide("dojo.cldr.nls.number");dojo.cldr.nls.number._built=true;dojo.provide("dojo.cldr.nls.number.en_us");dojo.cldr.nls.number.en_us={currencyFormat:"¤#,##0.00;(¤#,##0.00)",group:",",decimal:".",scientificFormat:"#E0","currencySpacing-afterCurrency-currencyMatch":"[:letter:]",infinity:"∞",list:";",percentSign:"%",minusSign:"-","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","currencySpacing-afterCurrency-insertBetween":" ",nan:"NaN",nativeZeroDigit:"0",plusSign:"+","currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","currencySpacing-beforeCurrency-currencyMatch":"[:letter:]",perMille:"‰",percentFormat:"#,##0%",decimalFormat:"#,##0.###",patternDigit:"#","currencySpacing-beforeCurrency-insertBetween":" ",exponential:"E"};dojo.provide("dojo.cldr.nls.currency");dojo.cldr.nls.currency._built=true;dojo.provide("dojo.cldr.nls.currency.en_us");dojo.cldr.nls.currency.en_us={USD_symbol:"$",HKD_displayName:"Hong Kong Dollar",CHF_displayName:"Swiss Franc",CHF_symbol:"SwF",JPY_symbol:"¥",HKD_symbol:"HK$",CAD_displayName:"Canadian Dollar",CNY_displayName:"Chinese Yuan Renminbi",AUD_displayName:"Australian Dollar",JPY_displayName:"Japanese Yen",CAD_symbol:"Can$",USD_displayName:"US Dollar",CNY_symbol:"Y",GBP_displayName:"British Pound Sterling",GBP_symbol:"£",AUD_symbol:"$A",EUR_displayName:"Euro",EUR_symbol:"€"};dojo.provide("dijit.form.nls.Textarea");dijit.form.nls.Textarea._built=true;dojo.provide("dijit.form.nls.Textarea.en_us");dijit.form.nls.Textarea.en_us={iframeEditTitle:"edit area",iframeFocusTitle:"edit area frame"};dojo.provide("dijit._editor.nls.commands");dijit._editor.nls.commands._built=true;dojo.provide("dijit._editor.nls.commands.en_us");dijit._editor.nls.commands.en_us={removeFormat:"Remove Format",copy:"Copy",paste:"Paste",selectAll:"Select All",insertOrderedList:"Numbered List",insertTable:"Insert/Edit Table",underline:"Underline",foreColor:"Foreground Color",htmlToggle:"HTML Source",formatBlock:"Paragraph Style",insertHorizontalRule:"Horizontal Rule","delete":"Delete",appleKey:"⌘${0}",insertUnorderedList:"Bullet List",tableProp:"Table Property",insertImage:"Insert Image",superscript:"Superscript",subscript:"Subscript",createLink:"Create Link",undo:"Undo",italic:"Italic",fontName:"Font Name",justifyLeft:"Align Left",unlink:"Remove Link",toggleTableBorder:"Toggle Table Border",ctrlKey:"ctrl+${0}",fontSize:"Font Size",indent:"Indent",redo:"Redo",strikethrough:"Strikethrough",justifyFull:"Justify",justifyCenter:"Align Center",hiliteColor:"Background Color",deleteTable:"Delete Table",outdent:"Outdent",cut:"Cut",plainFormatBlock:"Paragraph Style",toggleDir:"Toggle Direction",bold:"Bold",systemShortcutFF:'The "${0}" action is only available in Mozilla Firefox using a keyboard shortcut. Use ${1}.',justifyRight:"Align Right"};dojo.provide("dijit.nls.loading");dijit.nls.loading._built=true;dojo.provide("dijit.nls.loading.en_us");dijit.nls.loading.en_us={loadingState:"Loading...",errorState:"Sorry, an error occurred"};dojo.provide("dijit.nls.common");dijit.nls.common._built=true;dojo.provide("dijit.nls.common.en_us");dijit.nls.common.en_us={buttonOk:"OK",buttonCancel:"Cancel",buttonSave:"Save",itemClose:"Close"};if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(g,b){var a="^";var h=null;for(var f=0;f<g.length;f++){h=g.charAt(f);switch(h){case"\\":a+=h;f++;a+=g.charAt(f);break;case"*":a+=".*";break;case"?":a+=".";break;case"$":case"^":case"/":case"+":case".":case"|":case"(":case")":case"{":case"}":case"[":case"]":a+="\\";default:a+=h}}a+="$";if(b){return new RegExp(a,"i")}else{return new RegExp(a)}}}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.data.util.sorter.basicComparator=function(g,f){var h=0;if(g>f||typeof g==="undefined"||g===null){h=1}else{if(g<f||typeof f==="undefined"||f===null){h=-1}}return h};dojo.data.util.sorter.createSortFunction=function(g,b){var l=[];function a(m,o){return function(v,u){var s=b.getValue(v,m);var p=b.getValue(u,m);var q=null;if(b.comparatorMap){if(typeof m!=="string"){m=b.getIdentity(m)}q=b.comparatorMap[m]||dojo.data.util.sorter.basicComparator}q=q||dojo.data.util.sorter.basicComparator;return o*q(s,p)}}for(var f=0;f<g.length;f++){sortAttribute=g[f];if(sortAttribute.attribute){var h=(sortAttribute.descending)?-1:1;l.push(a(sortAttribute.attribute,h))}}return function(o,m){var q=0;while(q<l.length){var p=l[q++](o,m);if(p!==0){return p}}return 0}}}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.data.util.simpleFetch.fetch=function(g){g=g||{};if(!g.store){g.store=this}var b=this;var f=function(m,h){if(h.onError){var l=h.scope||dojo.global;h.onError.call(l,m,h)}};var a=function(p,q){var v=q.abort||null;var h=false;var s=q.start?q.start:0;var o=q.count?(s+q.count):p.length;q.abort=function(){h=true;if(v){v.call(q)}};var w=q.scope||dojo.global;if(!q.store){q.store=b}if(q.onBegin){q.onBegin.call(w,p.length,q)}if(q.sort){p.sort(dojo.data.util.sorter.createSortFunction(q.sort,b))}if(q.onItem){for(var m=s;(m<p.length)&&(m<o);++m){var u=p[m];if(!h){q.onItem.call(w,u,q)}}}if(q.onComplete&&!h){var l=null;if(!q.onItem){l=p.slice(s,o)}q.onComplete.call(w,l,q)}};this._fetchItems(g,a,f);return g}}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(h,b){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/}var f=dojo.date.stamp._isoRegExp.exec(h);var a=null;if(f){f.shift();if(f[1]){f[1]--}if(f[6]){f[6]*=1000}if(b){b=new Date(b);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(m){return b["get"+m]()}).forEach(function(o,m){if(f[m]===undefined){f[m]=o}})}a=new Date(f[0]||1970,f[1]||0,f[2]||1,f[3]||0,f[4]||0,f[5]||0,f[6]||0);var l=0;var g=f[7]&&f[7].charAt(0);if(g!="Z"){l=((f[8]||0)*60)+(Number(f[9])||0);if(g!="-"){l*=-1}}if(g){l-=a.getTimezoneOffset()}if(l){a.setTime(a.getTime()+l*60000)}}return a};dojo.date.stamp.toISOString=function(l,s){var q=function(u){return(u<10)?"0"+u:u};s=s||{};var h=[];var o=s.zulu?"getUTC":"get";var f="";if(s.selector!="time"){var m=l[o+"FullYear"]();f=["0000".substr((m+"").length)+m,q(l[o+"Month"]()+1),q(l[o+"Date"]())].join("-")}h.push(f);if(s.selector!="date"){var b=[q(l[o+"Hours"]()),q(l[o+"Minutes"]()),q(l[o+"Seconds"]())].join(":");var a=l[o+"Milliseconds"]();if(s.milliseconds){b+="."+(a<100?"0":"")+q(a)}if(s.zulu){b+="Z"}else{if(s.selector!="time"){var p=l.getTimezoneOffset();var g=Math.abs(p);b+=(p>0?"-":"+")+q(Math.floor(g/60))+":"+q(g%60)}}h.push(b)}return h.join("T")}}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=a.url;this._jsonData=a.data;this._datatypeMap=a.typeMap||{};if(!this._datatypeMap.Date){this._datatypeMap.Date={type:Date,deserialize:function(b){return dojo.date.stamp.fromISOString(b)}}}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[]},url:"",_assertIsItem:function(a){if(!this.isItem(a)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.")}},_assertIsAttribute:function(a){if(typeof a!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.")}},getValue:function(g,f,a){var b=this.getValues(g,f);return(b.length>0)?b[0]:a},getValues:function(b,a){this._assertIsItem(b);this._assertIsAttribute(a);return b[a]||[]},getAttributes:function(f){this._assertIsItem(f);var a=[];for(var b in f){if((b!==this._storeRefPropName)&&(b!==this._itemNumPropName)&&(b!==this._rootItemPropName)&&(b!==this._reverseRefMap)){a.push(b)}}return a},hasAttribute:function(b,a){return this.getValues(b,a).length>0},containsValue:function(b,a,g){var f=undefined;if(typeof g==="string"){f=dojo.data.util.filter.patternToRegExp(g,false)}return this._containsValue(b,a,g,f)},_containsValue:function(b,a,g,f){return dojo.some(this.getValues(b,a),function(h){if(h!==null&&!dojo.isObject(h)&&f){if(h.toString().match(f)){return true}}else{if(g===h){return true}}})},isItem:function(a){if(a&&a[this._storeRefPropName]===this){if(this._arrayOfAllItems[a[this._itemNumPropName]]===a){return true}}return false},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a)){return this.getValue(a,this._labelAttr)}return undefined},getLabelAttributes:function(a){if(this._labelAttr){return[this._labelAttr]}return null},_fetchItems:function(f,o,b){var a=this;var g=function(u,x){var w=[];if(u.query){var v=u.queryOptions?u.queryOptions.ignoreCase:false;var z={};for(var A in u.query){var y=u.query[A];if(typeof y==="string"){z[A]=dojo.data.util.filter.patternToRegExp(y,v)}}for(var q=0;q<x.length;++q){var s=true;var p=x[q];if(p===null){s=false}else{for(var A in u.query){var y=u.query[A];if(!a._containsValue(p,A,y,z[A])){s=false}}}if(s){w.push(p)}}o(w,u)}else{for(var q=0;q<x.length;++q){var B=x[q];if(B!==null){w.push(B)}}o(w,u)}};if(this._loadFinished){g(f,this._getItemsArray(f.queryOptions))}else{if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:f,filter:g})}else{this._loadInProgress=true;var l={url:a._jsonFileUrl,handleAs:"json-comment-optional"};var h=dojo.xhrGet(l);h.addCallback(function(p){try{a._getItemsFromLoadedData(p);a._loadFinished=true;a._loadInProgress=false;g(f,a._getItemsArray(f.queryOptions));a._handleQueuedFetches()}catch(q){a._loadFinished=true;a._loadInProgress=false;b(q,f)}});h.addErrback(function(p){a._loadInProgress=false;b(p,f)})}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;g(f,this._getItemsArray(f.queryOptions))}catch(m){b(m,f)}}else{b(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),f)}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var f=0;f<this._queuedFetches.length;f++){var a=this._queuedFetches[f];var b=a.args;var g=a.filter;if(g){g(b,this._getItemsArray(b.queryOptions))}else{this.fetchItemByIdentity(b)}}this._queuedFetches=[]}},_getItemsArray:function(a){if(a&&a.deep){return this._arrayOfAllItems}return this._arrayOfTopLevelItems},close:function(a){},_getItemsFromLoadedData:function(h){function b(E){var F=((E!=null)&&(typeof E=="object")&&(!dojo.isArray(E))&&(!dojo.isFunction(E))&&(E.constructor==Object)&&(typeof E._reference=="undefined")&&(typeof E._type=="undefined")&&(typeof E._value=="undefined"));return F}var s=this;function B(J){s._arrayOfAllItems.push(J);for(var I in J){var H=J[I];if(H){if(dojo.isArray(H)){var G=H;for(var F=0;F<G.length;++F){var E=G[F];if(b(E)){B(E)}}}else{if(b(H)){B(H)}}}}}this._labelAttr=h.label;var y;var A;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=h.items;for(y=0;y<this._arrayOfTopLevelItems.length;++y){A=this._arrayOfTopLevelItems[y];B(A);A[this._rootItemPropName]=true}var v={};var C;for(y=0;y<this._arrayOfAllItems.length;++y){A=this._arrayOfAllItems[y];for(C in A){if(C!==this._rootItemPropName){var u=A[C];if(u!==null){if(!dojo.isArray(u)){A[C]=[u]}}else{A[C]=[null]}}v[C]=C}}while(v[this._storeRefPropName]){this._storeRefPropName+="_"}while(v[this._itemNumPropName]){this._itemNumPropName+="_"}while(v[this._reverseRefMap]){this._reverseRefMap+="_"}var o;var g=h.identifier;if(g){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=g;for(y=0;y<this._arrayOfAllItems.length;++y){A=this._arrayOfAllItems[y];o=A[g];var D=o[0];if(!this._itemsByIdentity[D]){this._itemsByIdentity[D]=A}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+g+"].  Value collided: ["+D+"]")}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+g+"].  Value collided: ["+D+"]")}}}}}else{this._features["dojo.data.api.Identity"]=Number}for(y=0;y<this._arrayOfAllItems.length;++y){A=this._arrayOfAllItems[y];A[this._storeRefPropName]=this;A[this._itemNumPropName]=y}for(y=0;y<this._arrayOfAllItems.length;++y){A=this._arrayOfAllItems[y];for(C in A){o=A[C];for(var x=0;x<o.length;++x){u=o[x];if(u!==null&&typeof u=="object"){if(u._type&&u._value){var l=u._type;var m=this._datatypeMap[l];if(!m){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+l+"'")}else{if(dojo.isFunction(m)){o[x]=new m(u._value)}else{if(dojo.isFunction(m.deserialize)){o[x]=m.deserialize(u._value)}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function")}}}}if(u._reference){var a=u._reference;if(!dojo.isObject(a)){o[x]=this._itemsByIdentity[a]}else{for(var w=0;w<this._arrayOfAllItems.length;++w){var f=this._arrayOfAllItems[w];var p=true;for(var z in a){if(f[z]!=a[z]){p=false}}if(p){o[x]=f}}}if(this.referenceIntegrity){var q=o[x];if(this.isItem(q)){this._addReferenceToMap(q,A,C)}}}else{if(this.isItem(u)){if(this.referenceIntegrity){this._addReferenceToMap(u,A,C)}}}}}}}},_addReferenceToMap:function(b,a,f){},getIdentity:function(b){var a=this._features["dojo.data.api.Identity"];if(a===Number){return b[this._itemNumPropName]}else{var f=b[a];if(f){return f[0]}}return null},fetchItemByIdentity:function(b){if(!this._loadFinished){var a=this;if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:b})}else{this._loadInProgress=true;var l={url:a._jsonFileUrl,handleAs:"json-comment-optional"};var h=dojo.xhrGet(l);h.addCallback(function(q){var o=b.scope?b.scope:dojo.global;try{a._getItemsFromLoadedData(q);a._loadFinished=true;a._loadInProgress=false;var p=a._getItemByIdentity(b.identity);if(b.onItem){b.onItem.call(o,p)}a._handleQueuedFetches()}catch(m){a._loadInProgress=false;if(b.onError){b.onError.call(o,m)}}});h.addErrback(function(m){a._loadInProgress=false;if(b.onError){var o=b.scope?b.scope:dojo.global;b.onError.call(o,m)}})}}else{if(this._jsonData){a._getItemsFromLoadedData(a._jsonData);a._jsonData=null;a._loadFinished=true;var g=a._getItemByIdentity(b.identity);if(b.onItem){var f=b.scope?b.scope:dojo.global;b.onItem.call(f,g)}}}}else{var g=this._getItemByIdentity(b.identity);if(b.onItem){var f=b.scope?b.scope:dojo.global;b.onItem.call(f,g)}}},_getItemByIdentity:function(a){var b=null;if(this._itemsByIdentity){b=this._itemsByIdentity[a]}else{b=this._arrayOfAllItems[a]}if(b===undefined){b=null}return b},getIdentityAttributes:function(b){var a=this._features["dojo.data.api.Identity"];if(a===Number){return null}else{return[a]}},_forceLoad:function(){var a=this;if(this._jsonFileUrl){var f={url:a._jsonFileUrl,handleAs:"json-comment-optional",sync:true};var b=dojo.xhrGet(f);b.addCallback(function(g){try{if(a._loadInProgress!==true&&!a._loadFinished){a._getItemsFromLoadedData(g);a._loadFinished=true}}catch(h){console.log(h);throw h}});b.addErrback(function(g){throw g})}else{if(this._jsonData){a._getItemsFromLoadedData(a._jsonData);a._jsonData=null;a._loadFinished=true}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch)}if(!dojo._hasResource["srmdojoc.data.LazyLoadItemFileReadStore"]){dojo._hasResource["srmdojoc.data.LazyLoadItemFileReadStore"]=true;dojo.provide("srmdojoc.data.LazyLoadItemFileReadStore");dojo.declare("srmdojoc.data.LazyLoadItemFileReadStore",dojo.data.ItemFileReadStore,{constructor:function(a){},_assertIsItem:function(a){if(!this.isItem(a)){console.error("dojo.data.ItemFileReadStore: Invalid item argument.",a)}},isItemLoaded:function(a){if(this.getValue(a,"type")==="stub"){return false}return true},loadItem:function(q){var m=q.item;this._assertIsItem(m);console.debug("loadItem:",q," item: ",m);var p=this.getValue(m,"groupId");var h=this.getValue(m,"parentGroupId");var o=this;var g=function(v){delete m.type;delete m.parent;console.debug("gotData data:",v," item:",m);m.children=v.items;for(var s=0;s<m.children.length;s++){var w=m.children[s];for(j in w){if(dojo.isArray(w[j])){m.children[s][j]=w[j]}else{m.children[s][j]=[w[j]]}}o._arrayOfAllItems.push(w);w[o._storeRefPropName]=o;w[o._itemNumPropName]=o._arrayOfAllItems.length-1}if(q.onItem){var u=q.scope?q.scope:dojo.global;console.debug("onItem.call:",u,m);q.onItem.call(u,m)}};var l=function(s){if(q.onError){var u=q.scope?q.scope:dojo.global;q.onError.call(u,s)}console.error("Error receiving node children:",s)};var f=[{lookupId:"orgId",lookupValue:m.parentGroupId[0]},{lookupId:"childName",lookupValue:m.groupName[0]}];var a={url:"../../../SRPickLovRequest",content:{source:"PLA_TREE_STRUCTURE",action:"getTreeModel",lookupParam:dojo.toJson(f)},preventCache:true,handleAs:"json"};var b=dojo.xhrGet(a);b.addCallback(g);b.addErrback(l)}})}if(!dojo._hasResource["dojox.grid._data.fields"]){dojo._hasResource["dojox.grid._data.fields"]=true;dojo.provide("dojox.grid._data.fields");dojo.declare("dojox.grid.data.Mixer",null,{constructor:function(){this.defaultValue={};this.values=[]},count:function(){return this.values.length},clear:function(){this.values=[]},build:function(b){var a=dojo.mixin({owner:this},this.defaultValue);a.key=b;this.values[b]=a;return a},getDefault:function(){return this.defaultValue},setDefault:function(g){for(var f=0,b;(b=arguments[f]);f++){dojo.mixin(this.defaultValue,b)}},get:function(a){return this.values[a]||this.build(a)},_set:function(g,f){var a=this.get(g);for(var b=1;b<arguments.length;b++){dojo.mixin(a,arguments[b])}this.values[g]=a},set:function(){if(arguments.length<1){return}var f=arguments[0];if(!dojo.isArray(f)){this._set.apply(this,arguments)}else{if(f.length&&f[0]["default"]){this.setDefault(f.shift())}for(var g=0,b=f.length;g<b;g++){this._set(g,f[g])}}},insert:function(b,a){if(b>=this.values.length){this.values[b]=a}else{this.values.splice(b,0,a)}},remove:function(a){this.values.splice(a,1)},swap:function(b,a){dojox.grid.arraySwap(this.values,b,a)},move:function(b,a){dojox.grid.arrayMove(this.values,b,a)}});dojox.grid.data.compare=function(g,f){return(g>f?1:(g==f?0:-1))};dojo.declare("dojox.grid.data.Field",null,{constructor:function(a){this.name=a;this.compare=dojox.grid.data.compare},na:dojox.grid.na});dojo.declare("dojox.grid.data.Fields",dojox.grid.data.Mixer,{constructor:function(b){var a=b?b:dojox.grid.data.Field;this.defaultValue=new a()},indexOf:function(b){for(var f=0;f<this.values.length;f++){var a=this.values[f];if(a&&a.key==b){return f}}return -1}})}if(!dojo._hasResource["dojox.grid._data.model"]){dojo._hasResource["dojox.grid._data.model"]=true;dojo.provide("dojox.grid._data.model");dojo.declare("dojox.grid.data.Model",null,{constructor:function(b,a){this.observers=[];this.fields=new dojox.grid.data.Fields();if(b){this.fields.set(b)}this.setData(a)},count:0,updating:0,observer:function(b,a){this.observers.push({o:b,p:a||"model"})},notObserver:function(b){for(var f=0,a,g;(g=this.observers[f]);f++){if(g.o==b){this.observers.splice(f,1);return}}},notify:function(l,h){var f=h||[];for(var g=0,b,p;(p=this.observers[g]);g++){b=p.p+l;p=p.o;(b in p)&&(p[b].apply(p,f))}},clear:function(){this.fields.clear();this.clearData()},beginUpdate:function(){this.notify("BeginUpdate",arguments)},endUpdate:function(){this.notify("EndUpdate",arguments)},clearData:function(){this.setData(null)},change:function(){this.notify("Change",arguments)},insertion:function(){this.notify("Insertion",arguments);this.notify("Change",arguments)},removal:function(){this.notify("Removal",arguments);this.notify("Change",arguments)},insert:function(a){if(!this._insert.apply(this,arguments)){return false}this.insertion.apply(this,dojo._toArray(arguments,1));return true},remove:function(a){if(!this._remove.apply(this,arguments)){return false}this.removal.apply(this,arguments);return true},canSort:function(){return this.sort!=null},generateComparator:function(b,f,a,g){return function(l,h){var m=b(l[f],h[f]);return m?(a?m:-m):g&&g(l,h)}},makeComparator:function(h){var b,f,l,a=null;for(var g=h.length-1;g>=0;g--){b=h[g];f=Math.abs(b)-1;if(f>=0){l=this.fields.get(f);a=this.generateComparator(l.compare,l.key,b>0,a)}}return a},sort:null,dummy:0});dojo.declare("dojox.grid.data.Rows",dojox.grid.data.Model,{allChange:function(){this.notify("AllChange",arguments);this.notify("Change",arguments)},rowChange:function(){this.notify("RowChange",arguments)},datumChange:function(){this.notify("DatumChange",arguments)},beginModifyRow:function(a){if(!this.cache[a]){this.cache[a]=this.copyRow(a)}},endModifyRow:function(f){var a=this.cache[f];if(a){var b=this.getRow(f);if(!dojox.grid.arrayCompare(a,b)){this.update(a,b,f)}delete this.cache[f]}},cancelModifyRow:function(b){var a=this.cache[b];if(a){this.setRow(a,b);delete this.cache[b]}}});dojo.declare("dojox.grid.data.Table",dojox.grid.data.Rows,{constructor:function(){this.cache=[]},colCount:0,data:null,cache:null,measure:function(){this.count=this.getRowCount();this.colCount=this.getColCount();this.allChange()},getRowCount:function(){return(this.data?this.data.length:0)},getColCount:function(){return(this.data&&this.data.length?this.data[0].length:this.fields.count())},badIndex:function(a,b){console.debug("dojox.grid.data.Table: badIndex")},isGoodIndex:function(b,a){return(b>=0&&b<this.count&&(arguments.length<2||(a>=0&&a<this.colCount)))},getRow:function(a){return this.data[a]},copyRow:function(a){return this.getRow(a).slice(0)},getDatum:function(b,a){return this.data[b][a]},get:function(){throw ('Plain "get" no longer supported. Use "getRow" or "getDatum".')},setData:function(a){this.data=(a||[]);this.allChange()},setRow:function(a,b){this.data[b]=a;this.rowChange(a,b);this.change()},setDatum:function(f,b,a){this.data[b][a]=f;this.datumChange(f,b,a)},set:function(){throw ('Plain "set" no longer supported. Use "setData", "setRow", or "setDatum".')},setRows:function(a,h){for(var f=0,b=a.length,g=h;f<b;f++,g++){this.setRow(a[f],g)}},update:function(b,a,f){return true},_insert:function(a,b){dojox.grid.arrayInsert(this.data,b,a);this.count++;return true},_remove:function(b){for(var a=b.length-1;a>=0;a--){dojox.grid.arrayRemove(this.data,b[a])}this.count-=b.length;return true},sort:function(){this.data.sort(this.makeComparator(arguments))},swap:function(b,a){dojox.grid.arraySwap(this.data,b,a);this.rowChange(this.getRow(b),b);this.rowChange(this.getRow(a),a);this.change()},dummy:0});dojo.declare("dojox.grid.data.Objects",dojox.grid.data.Table,{constructor:function(f,a,b){if(!f){this.autoAssignFields()}},allChange:function(){this.notify("FieldsChange");this.inherited(arguments)},autoAssignFields:function(){var h=this.data[0],a=0,g;for(var b in h){g=this.fields.get(a++);if(!dojo.isString(g.key)){g.key=b}}},setData:function(a){this.data=(a||[]);this.autoAssignFields();this.allChange()},getDatum:function(b,a){return this.data[b][this.fields.get(a).key]}});dojo.declare("dojox.grid.data.Dynamic",dojox.grid.data.Table,{constructor:function(){this.page=[];this.pages=[]},page:null,pages:null,rowsPerPage:100,requests:0,bop:-1,eop:-1,clearData:function(){this.pages=[];this.bop=this.eop=-1;this.setData([])},getRowCount:function(){return this.count},getColCount:function(){return this.fields.count()},setRowCount:function(a){this.count=a;this.change()},requestsPending:function(a){},rowToPage:function(a){return(this.rowsPerPage?Math.floor(a/this.rowsPerPage):a)},pageToRow:function(a){return(this.rowsPerPage?this.rowsPerPage*a:a)},requestRows:function(b,a){},rowsProvided:function(b,a){this.requests--;if(this.requests==0){this.requestsPending(false)}},requestPage:function(f){var b=this.pageToRow(f);var a=Math.min(this.rowsPerPage,this.count-b);if(a>0){this.requests++;this.requestsPending(true);setTimeout(dojo.hitch(this,"requestRows",b,a),1)}},needPage:function(a){if(!this.pages[a]){this.pages[a]=true;this.requestPage(a)}},preparePage:function(f,b){if(f<this.bop||f>=this.eop){var a=this.rowToPage(f);this.needPage(a);this.bop=a*this.rowsPerPage;this.eop=this.bop+(this.rowsPerPage||this.count)}},isRowLoaded:function(a){return Boolean(this.data[a])},removePages:function(f){for(var a=0,b;((b=f[a])!=undefined);a++){this.pages[this.rowToPage(b)]=false}this.bop=this.eop=-1},remove:function(a){this.removePages(a);dojox.grid.data.Table.prototype.remove.apply(this,arguments)},getRow:function(b){var a=this.data[b];if(!a){this.preparePage(b)}return a},getDatum:function(f,a){var b=this.getRow(f);return(b?b[a]:this.fields.get(a).na)},setDatum:function(g,f,a){var b=this.getRow(f);if(b){b[a]=g;this.datumChange(g,f,a)}else{console.debug("["+this.declaredClass+"] dojox.grid.data.dynamic.set: cannot set data on an non-loaded row")}},canSort:function(){return false}});dojox.grid.data.table=dojox.grid.data.Table;dojox.grid.data.dynamic=dojox.grid.data.Dynamic;dojo.declare("dojox.grid.data.DojoData",dojox.grid.data.Dynamic,{constructor:function(g,a,b){this.count=1;this._rowIdentities={};this._currentlyProcessing=[];if(b){dojo.mixin(this,b)}if(this.store){var h=this.store.getFeatures();this._canNotify=h["dojo.data.api.Notification"];this._canWrite=h["dojo.data.api.Write"];this._canIdentify=h["dojo.data.api.Identity"];if(this._canNotify){dojo.connect(this.store,"onSet",this,"_storeDatumChange");dojo.connect(this.store,"onDelete",this,"_storeDatumDelete");dojo.connect(this.store,"onNew",this,"_storeDatumNew")}if(this._canWrite){dojo.connect(this.store,"revert",this,"refresh")}}},markupFactory:function(a,b){return new dojox.grid.data.DojoData(null,null,a)},query:{name:"*"},store:null,_currentlyProcessing:null,_canNotify:false,_canWrite:false,_canIdentify:false,_rowIdentities:{},clientSort:false,sortFields:null,queryOptions:null,setData:function(a){this.store=a;this.data=[];this.allChange()},setRowCount:function(a){this.count=a;this.allChange()},beginReturn:function(a){if(this.count!=a){this.setRowCount(a)}},_setupFields:function(f){if(this.fields._nameMaps){return}var b={};var a=dojo.map(this.store.getAttributes(f),function(h,g){b[h]=g;b[g+".idx"]=h;return{name:h,key:h}},this);this.fields._nameMaps=b;this.fields.set(a);this.notify("FieldsChange")},_getRowFromItem:function(a){},_createRow:function(a){var b={};b.__dojo_data_item=a;dojo.forEach(this.fields.values,function(f){value=this.store.getValue(a,f.name);b[f.name]=(value===undefined||value===null)?"":value},this);return b},processRows:function(a,b){if(!a||a.length==0){this.endUpdate();return}this._setupFields(a[0]);dojo.forEach(a,function(g,f){var h=this._createRow(g);this._setRowId(g,b.start,f);this.setRow(h,b.start+f)},this);this.endUpdate()},requestRows:function(g,a){setTimeout(dojo.hitch(this,"beginUpdate"),1);var f=g||0;var b={start:f,count:this.rowsPerPage,query:this.query,sort:this.sortFields,queryOptions:this.queryOptions,onBegin:dojo.hitch(this,"beginReturn"),onComplete:dojo.hitch(this,"processRows"),onError:dojo.hitch(this,"processError")};this.store.fetch(b)},getDatum:function(g,a){var f=this.getRow(g);var b=this.fields.values[a];return f&&b?f[b.name]:b?b.na:"?"},setDatum:function(f,b,a){var g=this.fields._nameMaps[a+".idx"];if(g){this.data[b][g]=f;this.datumChange(f,b,a)}},copyRow:function(h){var g={};var b={};var f=this.getRow(h);for(var a in f){if(f[a]!=b[a]){g[a]=f[a]}}return g},_attrCompare:function(a,b){dojo.forEach(this.fields.values,function(f){if(a[f.name]!=b[f.name]){return false}},this);return true},endModifyRow:function(f){var a=this.cache[f];if(a){var b=this.getRow(f);if(!this._attrCompare(a,b)){this.update(a,b,f)}delete this.cache[f]}},cancelModifyRow:function(b){var a=this.cache[b];if(a){this.setRow(a,b);delete this.cache[b]}},_setRowId:function(f,g,a){if(this._canIdentify){this._rowIdentities[this.store.getIdentity(f)]={rowId:g+a,item:f}}else{var b=dojo.toJson(this.query)+":start:"+g+":idx:"+a+":sort:"+dojo.toJson(this.sortFields);this._rowIdentities[b]={rowId:g+a,item:f}}},_getRowId:function(b,a){var f=null;if(this._canIdentify&&!a){f=this._rowIdentities[this.store.getIdentity(b)].rowId}else{var g;for(g in this._rowIdentities){if(this._rowIdentities[g].item===b){f=this._rowIdentities[g].rowId;break}}}return f},_storeDatumChange:function(h,a,b,f){var l=this._getRowId(h);var m=this.getRow(l);if(m){m[a]=f;var g=this.fields._nameMaps[a];this.notify("DatumChange",[f,l,g])}},_storeDatumDelete:function(a){if(dojo.indexOf(this._currentlyProcessing,a)!=-1){return}var b=this._getRowId(a,true);if(b!=null){this._removeItems([b])}},_storeDatumNew:function(a){if(this._disableNew){return}this._insertItem(a,this.data.length)},insert:function(f,a){this._disableNew=true;var b=this.store.newItem(f);this._disableNew=false;this._insertItem(b,a)},_insertItem:function(f,a){if(!this.fields._nameMaps){this._setupFields(f)}var h=this._createRow(f);for(var b in this._rowIdentities){var g=this._rowIdentities[b];if(g.rowId>=a){g.rowId++}}this._setRowId(f,0,a);dojox.grid.data.Dynamic.prototype.insert.apply(this,[h,a])},datumChange:function(b,a,h){if(this._canWrite){var g=this.getRow(a);var f=this.fields._nameMaps[h+".idx"];this.store.setValue(g.__dojo_data_item,f,b)}else{this.notify("DatumChange",arguments)}},insertion:function(){console.debug("Insertion",arguments);this.notify("Insertion",arguments);this.notify("Change",arguments)},removal:function(){console.debug("Removal",arguments);this.notify("Removal",arguments);this.notify("Change",arguments)},remove:function(f){for(var a=f.length-1;a>=0;a--){var b=this.data[f[a]].__dojo_data_item;this._currentlyProcessing.push(b);this.store.deleteItem(b)}this._removeItems(f);this._currentlyProcessing=[]},_removeItems:function(b){dojox.grid.data.Dynamic.prototype.remove.apply(this,arguments);this._rowIdentities={};for(var a=0;a<this.data.length;a++){this._setRowId(this.data[a].__dojo_data_item,0,a)}},canSort:function(){return true},sort:function(b){var a=Math.abs(b)-1;this.sortFields=[{attribute:this.fields.values[a].name,descending:(b>0)}];this.refresh()},refresh:function(){this.clearData(true);this.requestRows()},clearData:function(a){this._rowIdentities={};this.pages=[];this.bop=this.eop=-1;this.count=0;this.setData((a?this.store:[]))},processError:function(a,b){console.log(a)}})}if(!dojo._hasResource["srmdojoc.data.SPHomeDojoData"]){dojo._hasResource["srmdojoc.data.SPHomeDojoData"]=true;dojo.provide("srmdojoc.data.SPHomeDojoData");dojo.declare("srmdojoc.data.SPHomeDojoData",[dojox.grid.data.DojoData],{constructor:function(a){dojo.mixin(this,a)},requestRows:function(b,a){this.spHomePreRequestRows();this.inherited(arguments)},spHomePreRequestRows:function(){}})}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.pad=function(h,f,g,a){var b=String(h);if(!g){g="0"}while(b.length<f){if(a){b+=g}else{b=g+b}}return b};dojo.string.substitute=function(f,g,b,a){return f.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(h,l,o){var m=dojo.getObject(l,false,g);if(o){m=dojo.getObject(o,false,a)(m)}if(b){m=b(m,l)}return m.toString()})};dojo.string.trim=function(b){b=b.replace(/^\s+/,"");for(var a=b.length-1;a>0;a--){if(/\S/.test(b.charAt(a))){b=b.substring(0,a+1);break}}return b}}if(!dojo._hasResource["dojox.data.QueryReadStore"]){dojo._hasResource["dojox.data.QueryReadStore"]=true;dojo.provide("dojox.data.QueryReadStore");dojo.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,lastRequestHash:null,doClientPaging:false,doClientSorting:false,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":true,"dojo.data.api.Identity":true},_labelAttr:"label",constructor:function(a){dojo.mixin(this,a)},getValue:function(f,b,a){this._assertIsItem(f);if(!dojo.isString(b)){throw new Error(this._className+".getValue(): Invalid attribute, string expected!")}if(!this.hasAttribute(f,b)){if(a){return a}console.log(this._className+".getValue(): Item does not have the attribute '"+b+"'.")}return f.i[b]},getValues:function(f,b){this._assertIsItem(f);var a=[];if(this.hasAttribute(f,b)){a.push(f.i[b])}return a},getAttributes:function(f){this._assertIsItem(f);var a=[];for(var b in f.i){a.push(b)}return a},hasAttribute:function(b,a){return this.isItem(b)&&typeof b.i[a]!="undefined"},containsValue:function(h,g,l){var b=this.getValues(h,g);var a=b.length;for(var f=0;f<a;f++){if(b[f]==l){return true}}return false},isItem:function(a){if(a){return typeof a.r!="undefined"&&a.r==this}return false},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){if(this.isItemLoaded(a.item)){return}},fetch:function(g){g=g||{};if(!g.store){g.store=this}var b=this;var f=function(m,h){if(h.onError){var l=h.scope||dojo.global;h.onError.call(l,m,h)}};var a=function(q,s,p){var w=s.abort||null;var h=false;var u=s.start?s.start:0;if(b.doClientPaging==false){u=0}var o=s.count?(u+s.count):q.length;s.abort=function(){h=true;if(w){w.call(s)}};var x=s.scope||dojo.global;if(!s.store){s.store=b}if(s.onBegin){s.onBegin.call(x,p,s)}if(s.sort&&this.doClientSorting){q.sort(dojo.data.util.sorter.createSortFunction(s.sort,b))}if(s.onItem){for(var m=u;(m<q.length)&&(m<o);++m){var v=q[m];if(!h){s.onItem.call(x,v,s)}}}if(s.onComplete&&!h){var l=null;if(!s.onItem){l=q.slice(u,o)}s.onComplete.call(x,l,s)}};this._fetchItems(g,a,f);return g},getFeatures:function(){return this._features},close:function(a){},getLabel:function(a){if(this._labelAttr&&this.isItem(a)){return this.getValue(a,this._labelAttr)}return undefined},getLabelAttributes:function(a){if(this._labelAttr){return[this._labelAttr]}return null},_fetchItems:function(h,o,f){var b=h.serverQuery||h.query||{};if(!this.doClientPaging){b.start=h.start||0;if(h.count){b.count=h.count}}if(!this.doClientSorting){if(h.sort){var g=h.sort[0];if(g&&g.attribute){var l=g.attribute;if(g.descending){l="-"+l}b.sort=l}}}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(b)==dojo.toJson(this._lastServerQuery)){o(this._items,h)}else{var a=this.requestMethod.toLowerCase()=="post"?dojo.xhrPost:dojo.xhrGet;var m=a({url:this.url,handleAs:"json-comment-optional",content:b});m.addCallback(dojo.hitch(this,function(u){u=this._filterResponse(u);if(u.label){this._labelAttr=u.label}var v=u.numRows||-1;this._items=[];dojo.forEach(u.items,function(w){this._items.push({i:w,r:this})},this);var q=u.identifier;this._itemsByIdentity={};if(q){this._identifier=q;for(i=0;i<this._items.length;++i){var s=this._items[i].i;var p=s[q];if(!this._itemsByIdentity[p]){this._itemsByIdentity[p]=s}else{throw new Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+q+"].  Value collided: ["+p+"]")}}}else{this._identifier=Number;for(i=0;i<this._items.length;++i){this._items[i].n=i}}v=(v===-1)?this._items.length:v;o(this._items,h,v)}));m.addErrback(function(p){f(p,h)});this.lastRequestHash=new Date().getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},b)}},_filterResponse:function(a){return a},_assertIsItem:function(a){if(!this.isItem(a)){throw new Error(this._className+": Invalid item argument.")}},_assertIsAttribute:function(a){if(typeof a!=="string"){throw new Error(this._className+": Invalid attribute argument ('"+a+"').")}},fetchItemByIdentity:function(b){if(this._itemsByIdentity){var l=this._itemsByIdentity[b.identity];if(!(l===undefined)){if(b.onItem){var g=b.scope?b.scope:dojo.global;b.onItem.call(g,{i:l,r:this})}return}}var f=function(p,m){var o=b.scope?b.scope:dojo.global;if(b.onError){b.onError.call(o,error)}};var a=function(o,m){var q=b.scope?b.scope:dojo.global;try{var s=null;if(o&&o.length==1){s=o[0]}if(b.onItem){b.onItem.call(q,s)}}catch(p){if(b.onError){b.onError.call(q,p)}}};var h={serverQuery:{id:b.identity}};this._fetchItems(h,a,f)},getIdentity:function(b){var a=null;if(this._identifier===Number){a=b.n}else{a=b.i[this._identifier]}return a},getIdentityAttributes:function(a){return[this._identifier]}})}if(!dojo._hasResource["srmdojoc.data.SPHomeQueryReadStore"]){dojo._hasResource["srmdojoc.data.SPHomeQueryReadStore"]=true;dojo.provide("srmdojoc.data.SPHomeQueryReadStore");dojo.declare("srmdojoc.data.SPHomeQueryReadStore",[dojox.data.QueryReadStore],{fakeRowCount:null,numRowEstimate:null,errorMsg:null,errorStack:null,realRowCount:null,constructor:function(a){dojo.mixin(this,a)},_filterResponse:function(a){if(a.numRowEstimate!=null){this.numRowEstimate=a.numRowEstimate}else{this.numRowEstimate=null}if(a.numRows!=null){this.fakeRowCount=a.numRows}else{this.fakeRowCount=-1;this.errorMsg=a.errorMsg;this.errorStack=a.errorStack}this.realRowCount=a.realRowCount;return this.inherited(arguments)},getServerRowCount:function(){var a=null;if(this.numRowEstimate!=null){a=this.numRowEstimate.count;if(this.numRowEstimate.isExact!=null&&this.numRowEstimate.isExact==false&&this.numRowEstimate.count>0){a=a+" +"}}else{a=this.fakeRowCount}return a},getFakeRowCount:function(){return this.fakeRowCount},getRealRowCount:function(){return this.realRowCount},getErrorMsg:function(){return this.errorMsg},getErrorStack:function(){return this.errorStack},fetch:function(a){a.onError=this.errorHandler;return this.inherited("fetch",arguments)},errorHandler:function(a,b){return a}})}if(!dojo._hasResource["dojox.grid._grid.lib"]){dojo._hasResource["dojox.grid._grid.lib"]=true;dojo.provide("dojox.grid._grid.lib");dojo.mixin(dojox.grid,{na:"...",nop:function(){},getTdIndex:function(a){return a.cellIndex>=0?a.cellIndex:dojo.indexOf(a.parentNode.cells,a)},getTrIndex:function(a){return a.rowIndex>=0?a.rowIndex:dojo.indexOf(a.parentNode.childNodes,a)},getTr:function(b,a){return b&&((b.rows||0)[a]||b.childNodes[a])},getTd:function(b,f,a){return(dojox.grid.getTr(inTable,f)||0)[a]},findTable:function(a){for(var b=a;b&&b.tagName!="TABLE";b=b.parentNode){}return b},ascendDom:function(f,a){for(var b=f;b&&a(b);b=b.parentNode){}return b},makeNotTagName:function(b){var a=b.toUpperCase();return function(f){return f.tagName!=a}},fire:function(a,g,b){var f=a&&g&&a[g];return f&&(b?f.apply(a,b):a[g]())},setStyleText:function(b,a){if(b.style.cssText==undefined){b.setAttribute("style",a)}else{b.style.cssText=a}},getStyleText:function(b,a){return(b.style.cssText==undefined?b.getAttribute("style"):b.style.cssText)},setStyle:function(f,a,b){if(f&&f.style[a]!=b){f.style[a]=b}},setStyleHeightPx:function(b,a){if(a>=0){dojox.grid.setStyle(b,"height",a+"px")}},mouseEvents:["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"],keyEvents:["keyup","keydown","keypress"],funnelEvents:function(o,h,g,m){var b=(m?m:dojox.grid.mouseEvents.concat(dojox.grid.keyEvents));for(var f=0,a=b.length;f<a;f++){dojo.connect(o,"on"+b[f],h,g)}},removeNode:function(a){a=dojo.byId(a);a&&a.parentNode&&a.parentNode.removeChild(a);return a},getScrollbarWidth:function(){if(this._scrollBarWidth){return this._scrollBarWidth}this._scrollBarWidth=18;try{var b=document.createElement("div");b.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";document.body.appendChild(b);this._scrollBarWidth=b.offsetWidth-b.clientWidth;document.body.removeChild(b);delete b}catch(a){}return this._scrollBarWidth},getRef:function(a,g,f){var m=f||dojo.global,l=a.split("."),o=l.pop();for(var b=0,h;m&&(h=l[b]);b++){m=(h in m?m[h]:(g?m[h]={}:undefined))}return{obj:m,prop:o}},getProp:function(name,create,context){with(dojox.grid.getRef(name,create,context)){return(obj)&&(prop)&&(prop in obj?obj[prop]:(create?obj[prop]={}:undefined))}},indexInParent:function(g){var a=0,f,b=g.parentNode;while((f=b.childNodes[a++])){if(f==g){return a-1}}return -1},cleanNode:function(h){if(!h){return}var g=function(l){return l.domNode&&dojo.isDescendant(l.domNode,h,true)};var b=dijit.registry.filter(g);for(var f=0,a;(a=b[f]);f++){a.destroy()}delete b},getTagName:function(a){var b=dojo.byId(a);return(b&&b.tagName?b.tagName.toLowerCase():"")},nodeKids:function(h,g){var a=[];var b=0,f;while((f=h.childNodes[b++])){if(dojox.grid.getTagName(f)==g){a.push(f)}}return a},divkids:function(a){return dojox.grid.nodeKids(a,"div")},focusSelectNode:function(b){try{dojox.grid.fire(b,"focus");dojox.grid.fire(b,"select")}catch(a){}},whenIdle:function(){setTimeout(dojo.hitch.apply(dojo,arguments),0)},arrayCompare:function(g,f){for(var b=0,a=g.length;b<a;b++){if(g[b]!=f[b]){return false}}return(g.length==f.length)},arrayInsert:function(b,f,a){if(b.length<=f){b[f]=a}else{b.splice(f,0,a)}},arrayRemove:function(a,b){a.splice(b,1)},arraySwap:function(g,b,a){var f=g[b];g[b]=g[a];g[a]=f},initTextSizePoll:function(inInterval){var f=document.createElement("div");with(f.style){top="0px";left="0px";position="absolute";visibility="hidden"}f.innerHTML="TheQuickBrownFoxJumpedOverTheLazyDog";document.body.appendChild(f);var fw=f.offsetWidth;var job=function(){if(f.offsetWidth!=fw){fw=f.offsetWidth;dojox.grid.textSizeChanged()}};window.setInterval(job,inInterval||200);dojox.grid.initTextSizePoll=dojox.grid.nop},textSizeChanged:function(){}});dojox.grid.jobs={cancel:function(a){if(a){window.clearTimeout(a)}},jobs:[],job:function(f,g,a){dojox.grid.jobs.cancelJob(f);var b=function(){delete dojox.grid.jobs.jobs[f];a()};dojox.grid.jobs.jobs[f]=setTimeout(b,g)},cancelJob:function(a){dojox.grid.jobs.cancel(dojox.grid.jobs.jobs[a])}}}if(!dojo._hasResource["dojox.grid._grid.scroller"]){dojo._hasResource["dojox.grid._grid.scroller"]=true;dojo.provide("dojox.grid._grid.scroller");dojo.declare("dojox.grid.scroller.base",null,{constructor:function(){this.pageHeights=[];this.stack=[]},rowCount:0,defaultRowHeight:10,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,page:0,pageTop:0,init:function(a,f,b){switch(arguments.length){case 3:this.rowsPerPage=b;case 2:this.keepRows=f;case 1:this.rowCount=a}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=Math.ceil(this.rowCount/this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll")}},setKeepInfo:function(a){this.keepRows=a;this.keepPages=!this.keepRows?this.keepRows:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2)},invalidate:function(){this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize()},updateRowCount:function(a){this.invalidateNodes();this.rowCount=a;oldPageCount=this.pageCount;this.pageCount=Math.ceil(this.rowCount/this.rowsPerPage);if(this.pageCount<oldPageCount){for(var b=oldPageCount-1;b>=this.pageCount;b--){this.height-=this.getPageHeight(b);delete this.pageHeights[b]}}else{if(this.pageCount>oldPageCount){this.height+=this.defaultPageHeight*(this.pageCount-oldPageCount-1)+this.calcLastPageHeight()}}this.resize()},pageExists:function(a){},measurePage:function(a){},positionPage:function(b,a){},repositionPages:function(a){},installPage:function(a){},preparePage:function(f,b,a){},renderPage:function(a){},removePage:function(a){},pacify:function(a){},pacifying:false,pacifyTicks:200,setPacifying:function(a){if(this.pacifying!=a){this.pacifying=a;this.pacify(this.pacifying)}},startPacify:function(){this.startPacifyTicks=new Date().getTime()},doPacify:function(){var a=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return a},endPacify:function(){this.setPacifying(false)},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight}dojox.grid.setStyleHeightPx(this.contentNode,this.height)},calcLastPageHeight:function(){if(!this.pageCount){return 0}var b=this.pageCount-1;var a=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[b]=a;return a},updateContentHeight:function(a){this.height+=a;this.resize()},updatePageHeight:function(f){if(this.pageExists(f)){var b=this.getPageHeight(f);var a=(this.measurePage(f))||(b);this.pageHeights[f]=a;if((a)&&(b!=a)){this.updateContentHeight(a-b);this.repositionPages(f)}}},rowHeightChanged:function(a){this.updatePageHeight(Math.floor(a/this.rowsPerPage))},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage())}},createPageNode:function(){var a=document.createElement("div");a.style.position="absolute";a.style[dojo._isBodyLtr()?"left":"right"]="0";return a},getPageHeight:function(b){var a=this.pageHeights[b];return(a!==undefined?a:this.defaultPageHeight)},pushPage:function(a){return this.stack.push(a)},popPage:function(){return this.stack.shift()},findPage:function(f){var a=0,b=0;for(var g=0;a<this.pageCount;a++,b+=g){g=this.getPageHeight(a);if(b+g>=f){break}}this.page=a;this.pageTop=b},buildPage:function(f,a,b){this.preparePage(f,a);this.positionPage(f,b);this.installPage(f);this.renderPage(f);this.pushPage(f)},needPage:function(g,f){var a=this.getPageHeight(g),b=a;if(!this.pageExists(g)){this.buildPage(g,this.keepPages&&(this.stack.length>=this.keepPages),f);a=this.measurePage(g)||a;this.pageHeights[g]=a;if(a&&(b!=a)){this.updateContentHeight(a-b)}}else{this.positionPage(g,f)}return a},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(g){this.startPacify();this.findPage(g);var f=this.height;var a=this.getScrollBottom(g);for(var l=this.page,m=this.pageTop;(l<this.pageCount)&&((a<0)||(m<a));l++){m+=this.needPage(l,m)}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,g);this.lastVisibleRow=this.getLastVisibleRow(l-1,m,a);if(f!=this.height){this.repositionPages(l-1)}this.endPacify()},getScrollBottom:function(a){return(this.windowHeight>=0?a+this.windowHeight:-1)},processNodeEvent:function(f,g){var a=f.target;while(a&&(a!=g)&&a.parentNode&&(a.parentNode.parentNode!=g)){a=a.parentNode}if(!a||!a.parentNode||(a.parentNode.parentNode!=g)){return false}var b=a.parentNode;f.topRowIndex=b.pageIndex*this.rowsPerPage;f.rowIndex=f.topRowIndex+dojox.grid.indexInParent(a);f.rowTarget=a;return true},processEvent:function(a){return this.processNodeEvent(a,this.contentNode)},dummy:0});dojo.declare("dojox.grid.scroller",dojox.grid.scroller.base,{constructor:function(){this.pageNodes=[]},renderRow:function(b,a){},removeRow:function(a){},getDefaultNodes:function(){return this.pageNodes},getDefaultPageNode:function(a){return this.getDefaultNodes()[a]},positionPageNode:function(b,a){b.style.top=a+"px"},getPageNodePosition:function(a){return a.offsetTop},repositionPageNodes:function(m,g){var b=0;for(var a=0;a<this.stack.length;a++){b=Math.max(this.stack[a],b)}var l=g[m];var h=(l?this.getPageNodePosition(l)+this.getPageHeight(m):0);for(var f=m+1;f<=b;f++){l=g[f];if(l){if(this.getPageNodePosition(l)==h){return}this.positionPage(f,h)}h+=this.getPageHeight(f)}},invalidatePageNode:function(f,b){var a=b[f];if(a){delete b[f];this.removePage(f,a);dojox.grid.cleanNode(a);a.innerHTML=""}return a},preparePageNode:function(g,a,f){var b=(a===null?this.createPageNode():this.invalidatePageNode(a,f));b.pageIndex=g;b.id=(this._pageIdPrefix||"")+"page-"+g;f[g]=b},pageExists:function(a){return Boolean(this.getDefaultPageNode(a))},measurePage:function(a){return this.getDefaultPageNode(a).offsetHeight},positionPage:function(b,a){this.positionPageNode(this.getDefaultPageNode(b),a)},repositionPages:function(a){this.repositionPageNodes(a,this.getDefaultNodes())},preparePage:function(b,a){this.preparePageNode(b,(a?this.popPage():null),this.getDefaultNodes())},installPage:function(a){this.contentNode.appendChild(this.getDefaultPageNode(a))},destroyPage:function(b){var a=this.invalidatePageNode(b,this.getDefaultNodes());dojox.grid.removeNode(a)},renderPage:function(g){var f=this.pageNodes[g];for(var b=0,a=g*this.rowsPerPage;(b<this.rowsPerPage)&&(a<this.rowCount);b++,a++){this.renderRow(a,f)}},removePage:function(f){for(var b=0,a=f*this.rowsPerPage;b<this.rowsPerPage;b++,a++){this.removeRow(a)}},getPageRow:function(a){return a*this.rowsPerPage},getLastPageRow:function(a){return Math.min(this.rowCount,this.getPageRow(a+1))-1},getFirstVisibleRowNodes:function(a,m,h,p){var o=this.getPageRow(a);var g=dojox.grid.divkids(p[a]);for(var f=0,b=g.length;f<b&&m<h;f++,o++){m+=g[f].offsetHeight}return(o?o-1:o)},getFirstVisibleRow:function(a,f,b){if(!this.pageExists(a)){return 0}return this.getFirstVisibleRowNodes(a,f,b,this.getDefaultNodes())},getLastVisibleRowNodes:function(a,h,f,m){var l=this.getLastPageRow(a);var g=dojox.grid.divkids(m[a]);for(var b=g.length-1;b>=0&&h>f;b--,l--){h-=g[b].offsetHeight}return l+1},getLastVisibleRow:function(a,f,b){if(!this.pageExists(a)){return 0}return this.getLastVisibleRowNodes(a,f,b,this.getDefaultNodes())},findTopRowForNodes:function(o,p){var m=dojox.grid.divkids(p[this.page]);for(var f=0,a=m.length,b=this.pageTop,g;f<a;f++){g=m[f].offsetHeight;b+=g;if(b>=o){this.offset=g-(b-o);return f+this.page*this.rowsPerPage}}return -1},findScrollTopForNodes:function(o,p){var m=Math.floor(o/this.rowsPerPage);var f=0;for(var b=0;b<m;b++){f+=this.getPageHeight(b)}this.pageTop=f;this.needPage(m,this.pageTop);var h=dojox.grid.divkids(p[m]);var g=o-this.rowsPerPage*m;for(var b=0,a=h.length;b<a&&b<g;b++){f+=h[b].offsetHeight}return f},findTopRow:function(a){return this.findTopRowForNodes(a,this.getDefaultNodes())},findScrollTop:function(a){return this.findScrollTopForNodes(a,this.getDefaultNodes())},dummy:0});dojo.declare("dojox.grid.scroller.columns",dojox.grid.scroller,{constructor:function(a){this.setContentNodes(a)},setContentNodes:function(b){this.contentNodes=b;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var a=0;a<this.colCount;a++){this.pageNodes[a]=[]}},getDefaultNodes:function(){return this.pageNodes[0]||[]},scroll:function(a){if(this.colCount){dojox.grid.scroller.prototype.scroll.call(this,a)}},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight}for(var a=0;a<this.colCount;a++){dojox.grid.setStyleHeightPx(this.contentNodes[a],this.height)}},positionPage:function(f,b){for(var a=0;a<this.colCount;a++){this.positionPageNode(this.pageNodes[a][f],b)}},preparePage:function(g,b){var f=(b?this.popPage():null);for(var a=0;a<this.colCount;a++){this.preparePageNode(g,f,this.pageNodes[a])}},installPage:function(b){for(var a=0;a<this.colCount;a++){this.contentNodes[a].appendChild(this.pageNodes[a][b])}},destroyPage:function(b){for(var a=0;a<this.colCount;a++){dojox.grid.removeNode(this.invalidatePageNode(b,this.pageNodes[a]))}},renderPage:function(g){var a=[];for(var f=0;f<this.colCount;f++){a[f]=this.pageNodes[f][g]}for(var f=0,b=g*this.rowsPerPage;(f<this.rowsPerPage)&&(b<this.rowCount);f++,b++){this.renderRow(b,a)}}})}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){var f=dojo.global;var a=dojo.doc;if(a.selection){return !a.selection.createRange().text}else{var b=f.getSelection();if(dojo.isString(b)){return !b}else{return b.isCollapsed||!b.toString()}}},getBookmark:function(){var h,g=dojo.doc.selection;if(g){var b=g.createRange();if(g.type.toUpperCase()=="CONTROL"){if(b.length){h=[];var f=0,a=b.length;while(f<a){h.push(b.item(f++))}}else{h=null}}else{h=b.getBookmark()}}else{if(window.getSelection){g=dojo.global.getSelection();if(g){b=g.getRangeAt(0);h=b.cloneRange()}}else{console.warn("No idea how to store the current selection for this browser!")}}return h},moveToBookmark:function(g){var a=dojo.doc;if(a.selection){var b;if(dojo.isArray(g)){b=a.body.createControlRange();dojo.forEach(g,"range.addElement(item)")}else{b=a.selection.createRange();b.moveToBookmark(g)}b.select()}else{var f=dojo.global.getSelection&&dojo.global.getSelection();if(f&&f.removeAllRanges){f.removeAllRanges();f.addRange(g)}else{console.warn("No idea how to restore selection for this browser!")}}},getFocus:function(b,a){return{node:b&&dojo.isDescendant(dijit._curFocus,b.domNode)?dijit._prevFocus:dijit._curFocus,bookmark:!dojo.withGlobal(a||dojo.global,dijit.isCollapsed)?dojo.withGlobal(a||dojo.global,dijit.getBookmark):null,openedForWindow:a}},focus:function(g){if(!g){return}var f="node" in g?g.node:g,b=g.bookmark,a=g.openedForWindow;if(f){var l=(f.tagName.toLowerCase()=="iframe")?f.contentWindow:f;if(l&&l.focus){try{l.focus()}catch(h){}}dijit._onFocusNode(f)}if(b&&dojo.withGlobal(a||dojo.global,dijit.isCollapsed)){if(a){a.focus()}try{dojo.withGlobal(a||dojo.global,dijit.moveToBookmark,null,[b])}catch(h){}}},_activeStack:[],registerWin:function(b){if(!b){b=window}dojo.connect(b.document,"onmousedown",function(f){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false},0);dijit._onTouchNode(f.target||f.srcElement)});var a=b.document.body||b.document.getElementsByTagName("body")[0];if(a){if(dojo.isIE){a.attachEvent("onactivate",function(f){if(f.srcElement.tagName.toLowerCase()!="body"){dijit._onFocusNode(f.srcElement)}});a.attachEvent("ondeactivate",function(f){dijit._onBlurNode(f.srcElement)})}else{a.addEventListener("focus",function(f){dijit._onFocusNode(f.target)},true);a.addEventListener("blur",function(f){dijit._onBlurNode(f.target)},true)}}a=null},_onBlurNode:function(a){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer)}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null},100)},_onTouchNode:function(b){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer}var a=[];try{while(b){if(b.dijitPopupParent){b=dijit.byId(b.dijitPopupParent).domNode}else{if(b.tagName&&b.tagName.toLowerCase()=="body"){if(b===dojo.body()){break}b=dijit.getDocumentWindow(b.ownerDocument).frameElement}else{var g=b.getAttribute&&b.getAttribute("widgetId");if(g){a.unshift(g)}b=b.parentNode}}}}catch(f){}dijit._setStack(a)},_onFocusNode:function(a){if(a&&a.tagName&&a.tagName.toLowerCase()=="body"){return}dijit._onTouchNode(a);if(a==dijit._curFocus){return}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus}dijit._curFocus=a;dojo.publish("focusNode",[a])},_setStack:function(a){var h=dijit._activeStack;dijit._activeStack=a;for(var f=0;f<Math.min(h.length,a.length);f++){if(h[f]!=a[f]){break}}for(var b=h.length-1;b>=f;b--){var g=dijit.byId(h[b]);if(g){g._focused=false;g._hasBeenBlurred=true;if(g._onBlur){g._onBlur()}if(g._setStateClass){g._setStateClass()}dojo.publish("widgetBlur",[g])}}for(b=f;b<a.length;b++){g=dijit.byId(a[b]);if(g){g._focused=true;if(g._onFocus){g._onFocus()}if(g._setStateClass){g._setStateClass()}dojo.publish("widgetFocus",[g])}}}});dojo.addOnLoad(dijit.registerWin)}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={}},add:function(a){if(this._hash[a.id]){throw new Error("Tried to register widget with id=="+a.id+" but that id is already registered")}this._hash[a.id]=a},remove:function(a){delete this._hash[a]},forEach:function(a){for(var b in this._hash){a(this._hash[b])}},filter:function(b){var a=new dijit.WidgetSet();this.forEach(function(f){if(b(f)){a.add(f)}});return a},byId:function(a){return this._hash[a]},byClass:function(a){return this.filter(function(b){return b.declaredClass==a})}});dijit.registry=new dijit.WidgetSet();dijit._widgetTypeCtr={};dijit.getUniqueId=function(a){var b;do{b=a+"_"+(a in dijit._widgetTypeCtr?++dijit._widgetTypeCtr[a]:dijit._widgetTypeCtr[a]=0)}while(dijit.byId(b));return b};if(dojo.isIE){dojo.addOnUnload(function(){dijit.registry.forEach(function(a){if(a!=null){a.destroyRecursive()}})})}dijit.byId=function(a){return(dojo.isString(a))?dijit.registry.byId(a):a};dijit.byNode=function(a){return dijit.registry.byId(a.getAttribute("widgetId"))};dijit.getEnclosingWidget=function(a){while(a){if(a.getAttribute&&a.getAttribute("widgetId")){return dijit.registry.byId(a.getAttribute("widgetId"))}a=a.parentNode}return null};dijit._tabElements={area:true,button:true,input:true,object:true,select:true,textarea:true};dijit._isElementShown=function(b){var a=dojo.style(b);return(a.visibility!="hidden")&&(a.visibility!="collapsed")&&(a.display!="none")};dijit.isTabNavigable=function(g){if(dojo.hasAttr(g,"disabled")){return false}var a=dojo.hasAttr(g,"tabindex");var f=dojo.attr(g,"tabindex");if(a&&f>=0){return true}var b=g.nodeName.toLowerCase();if(((b=="a"&&dojo.hasAttr(g,"href"))||dijit._tabElements[b])&&(!a||f>=0)){return true}return false};dijit._getTabNavigable=function(b){var m,h,a,f,l,o;var g=function(p){dojo.query("> *",p).forEach(function(u){var s=dijit._isElementShown(u);if(s&&dijit.isTabNavigable(u)){var q=dojo.attr(u,"tabindex");if(!dojo.hasAttr(u,"tabindex")||q==0){if(!m){m=u}h=u}else{if(q>0){if(!a||q<f){f=q;a=u}if(!l||q>=o){o=q;l=u}}}}if(s){g(u)}})};if(dijit._isElementShown(b)){g(b)}return{first:m,last:h,lowest:a,highest:l}};dijit.getFirstInTabbingOrder=function(a){var b=dijit._getTabNavigable(dojo.byId(a));return b.lowest?b.lowest:b.first};dijit.getLastInTabbingOrder=function(a){var b=dijit._getTabNavigable(dojo.byId(a));return b.last?b.last:b.highest}}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){var a=dojo.global;var u=dojo.doc;var x=0,o=0;var v=u.documentElement;var l=v.clientWidth,b=v.clientHeight;if(dojo.isMozilla){var y,p,q,g;var m=u.body.clientWidth;if(m>l){y=l;q=m}else{q=l;y=m}var f=u.body.clientHeight;if(f>b){p=b;g=f}else{g=b;p=f}x=(q>a.innerWidth)?y:q;o=(g>a.innerHeight)?p:g}else{if(!dojo.isOpera&&a.innerWidth){x=a.innerWidth;o=a.innerHeight}else{if(dojo.isIE&&v&&b){x=l;o=b}else{if(dojo.body().clientWidth){x=dojo.body().clientWidth;o=dojo.body().clientHeight}}}}var s=dojo._docScroll();return{w:x,h:o,l:s.x,t:s.y}};dijit.placeOnScreen=function(b,h,a,f){var g=dojo.map(a,function(l){return{corner:l,pos:h}});return dijit._place(b,g)};dijit._place=function(f,h,b){var a=dijit.getViewport();if(!f.parentNode||String(f.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(f)}var g=null;dojo.some(h,function(p){var y=p.corner;var v=p.pos;if(b){b(f,p.aroundCorner,y)}var l=f.style;var u=l.display;var w=l.visibility;l.visibility="hidden";l.display="";var x=dojo.marginBox(f);l.display=u;l.visibility=w;var s=(y.charAt(1)=="L"?v.x:Math.max(a.l,v.x-x.w)),q=(y.charAt(0)=="T"?v.y:Math.max(a.t,v.y-x.h)),B=(y.charAt(1)=="L"?Math.min(a.l+a.w,s+x.w):v.x),A=(y.charAt(0)=="T"?Math.min(a.t+a.h,q+x.h):v.y),m=B-s,z=A-q,o=(x.w-m)+(x.h-z);if(g==null||o<g.overflow){g={corner:y,aroundCorner:p.aroundCorner,x:s,y:q,w:m,h:z,overflow:o}}return !o});f.style.left=g.x+"px";f.style.top=g.y+"px";if(g.overflow&&b){b(f,g.aroundCorner,g.corner)}return g};dijit.placeOnScreenAroundElement=function(b,h,l,f){h=dojo.byId(h);var o=h.style.display;h.style.display="";var p=h.offsetWidth;var g=h.offsetHeight;var m=dojo.coords(h,true);h.style.display=o;var q=[];for(var a in l){q.push({aroundCorner:a,corner:l[a],pos:{x:m.x+(a.charAt(1)=="L"?0:p),y:m.y+(a.charAt(0)=="T"?0:g)}})}return dijit._place(b,q,f)}}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(f){if(dojo.isSafari&&!f._parentWindow){var a=function(h){h.document._parentWindow=h;for(var g=0;g<h.frames.length;g++){a(h.frames[g])}};a(window.top)}if(dojo.isIE&&window!==document.parentWindow&&!f._parentWindow){f.parentWindow.execScript("document._parentWindow = window;","Javascript");var b=f._parentWindow;f._parentWindow=null;return b}return f._parentWindow||f.parentWindow||f.defaultView}}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup=new function(){var a=[],b=1000,f=1;this.prepare=function(h){dojo.body().appendChild(h);var g=h.style;if(g.display=="none"){g.display=""}g.visibility="hidden";g.position="absolute";g.top="-9999px"};this.open=function(v){var u=v.popup,q=v.orient||{BL:"TL",TL:"BL"},w=v.around,l=(v.around&&v.around.id)?(v.around.id+"_dropdown"):("popup_"+f++);var h=dojo.doc.createElement("div");dijit.setWaiRole(h,"presentation");h.id=l;h.className="dijitPopup";h.style.zIndex=b+a.length;h.style.left=h.style.top="1px";h.style.visibility="hidden";if(v.parent){h.dijitPopupParent=v.parent.id}dojo.body().appendChild(h);var x=u.domNode.style;x.display="block";x.visibility="";x.position="";h.appendChild(u.domNode);var p=new dijit.BackgroundIframe(h);var o=w?dijit.placeOnScreenAroundElement(h,w,q,u.orient?dojo.hitch(u,"orient"):null):dijit.placeOnScreen(h,v,q=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"]);h.style.visibility="visible";var m=[];var g=function(){for(var s=a.length-1;s>0&&a[s].parent===a[s-1].widget;s--){}return a[s]};m.push(dojo.connect(h,"onkeypress",this,function(s){if(s.keyCode==dojo.keys.ESCAPE&&v.onCancel){dojo.stopEvent(s);v.onCancel()}else{if(s.keyCode==dojo.keys.TAB){dojo.stopEvent(s);var y=g();if(y&&y.onCancel){y.onCancel()}}}}));if(u.onCancel){m.push(dojo.connect(u,"onCancel",null,v.onCancel))}m.push(dojo.connect(u,u.onExecute?"onExecute":"onChange",null,function(){var s=g();if(s&&s.onExecute){s.onExecute()}}));a.push({wrapper:h,iframe:p,widget:u,parent:v.parent,onExecute:v.onExecute,onCancel:v.onCancel,onClose:v.onClose,handlers:m});if(u.onOpen){u.onOpen(o)}return o};this.close=function(h){while(dojo.some(a,function(q){return q.widget==h})){var o=a.pop(),p=o.wrapper,l=o.iframe,m=o.widget,g=o.onClose;if(m.onClose){m.onClose()}dojo.forEach(o.handlers,dojo.disconnect);if(!m||!m.domNode){return}this.prepare(m.domNode);l.destroy();dojo._destroyElement(p);if(g){g()}}}}();dijit._frames=new function(){var a=[];this.pop=function(){var f;if(a.length){f=a.pop();f.style.display=""}else{if(dojo.isIE){var b="<iframe src='javascript:\"\"' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";f=dojo.doc.createElement(b)}else{f=dojo.doc.createElement("iframe");f.src='javascript:""';f.className="dijitBackgroundIframe"}f.tabIndex=-1;dojo.body().appendChild(f)}return f};this.push=function(b){b.style.display="";if(dojo.isIE){b.style.removeExpression("width");b.style.removeExpression("height")}a.push(b)}}();if(dojo.isIE&&dojo.isIE<7){dojo.addOnLoad(function(){var a=dijit._frames;dojo.forEach([a.pop()],a.push)})}dijit.BackgroundIframe=function(b){if(!b.id){throw new Error("no id")}if((dojo.isIE&&dojo.isIE<7)||(dojo.isFF&&dojo.isFF<3&&dojo.hasClass(dojo.body(),"dijit_a11y"))){var a=dijit._frames.pop();b.appendChild(a);if(dojo.isIE){a.style.setExpression("width",dojo._scopeName+".doc.getElementById('"+b.id+"').offsetWidth");a.style.setExpression("height",dojo._scopeName+".doc.getElementById('"+b.id+"').offsetHeight")}this.iframe=a}};dojo.extend(dijit.BackgroundIframe,{destroy:function(){if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe}}})}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(f){var a=f.parentNode;var b=a.scrollTop+dojo.marginBox(a).h;var g=f.offsetTop+dojo.marginBox(f).h;if(b<g){a.scrollTop+=(g-b)}else{if(a.scrollTop>f.offsetTop){a.scrollTop-=(a.scrollTop-f.offsetTop)}}}}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");(function(){var o=dojo;var m=o.isIE;var a=o.isOpera;var f=Math.floor;var b=o.isFF;var h={dj_ie:m,dj_ie6:f(m)==6,dj_ie7:f(m)==7,dj_iequirks:m&&o.isQuirks,dj_opera:a,dj_opera8:f(a)==8,dj_opera9:f(a)==9,dj_khtml:o.isKhtml,dj_safari:o.isSafari,dj_gecko:o.isMozilla,dj_ff2:f(b)==2};for(var l in h){if(h[l]){var g=dojo.doc.documentElement;if(g.className){g.className+=" "+l}else{g.className=l}}}})()}if(!dojo._hasResource["dijit._base.bidi"]){dojo._hasResource["dijit._base.bidi"]=true;dojo.provide("dijit._base.bidi");dojo.addOnLoad(function(){if(!dojo._isBodyLtr()){dojo.addClass(dojo.body(),"dijitRtl")}})}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=(this._currentTimeout<0)?this._initialDelay:((this._subsequentDelay>1)?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay));this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,m,f,l,h,b,g){if(h!=this._obj){this.stop();this._initialDelay=g||500;this._subsequentDelay=b||0.9;this._obj=h;this._evt=a;this._node=f;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(m,l);this._fireEventAndReload()}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null}},addKeyListener:function(f,a,l,h,b,g){return[dojo.connect(f,"onkeypress",this,function(m){if(m.keyCode==a.keyCode&&(!a.charCode||a.charCode==m.charCode)&&(a.ctrlKey===undefined||a.ctrlKey==m.ctrlKey)&&(a.altKey===undefined||a.altKey==m.ctrlKey)&&(a.shiftKey===undefined||a.shiftKey==m.ctrlKey)){dojo.stopEvent(m);dijit.typematic.trigger(a,l,f,h,a,b,g)}else{if(dijit.typematic._obj==a){dijit.typematic.stop()}}}),dojo.connect(f,"onkeyup",this,function(m){if(dijit.typematic._obj==a){dijit.typematic.stop()}})]},addMouseListener:function(f,l,h,b,g){var a=dojo.connect;return[a(f,"mousedown",this,function(m){dojo.stopEvent(m);dijit.typematic.trigger(m,l,f,h,f,b,g)}),a(f,"mouseup",this,function(m){dojo.stopEvent(m);dijit.typematic.stop()}),a(f,"mouseout",this,function(m){dojo.stopEvent(m);dijit.typematic.stop()}),a(f,"mousemove",this,function(m){dojo.stopEvent(m)}),a(f,"dblclick",this,function(m){dojo.stopEvent(m);if(dojo.isIE){dijit.typematic.trigger(m,l,f,h,f,b,g);setTimeout(dojo.hitch(this,dijit.typematic.stop),50)}})]},addListener:function(g,h,a,m,l,b,f){return this.addKeyListener(h,a,m,l,b,f).concat(this.addMouseListener(g,m,l,b,f))}}}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var g=dojo.doc.createElement("div");g.id="a11yTestNode";g.style.cssText='border: 1px solid;border-color:red green;position: absolute;height: 5px;top: -999px;background-image: url("'+dojo.moduleUrl("dojo","resources/blank.gif")+'");';dojo.body().appendChild(g);var b=dojo.getComputedStyle(g);if(b){var a=b.backgroundImage;var f=(b.borderTopColor==b.borderRightColor)||(a!=null&&(a=="none"||a=="url(invalid-url:)"));dojo[f?"addClass":"removeClass"](dojo.body(),"dijit_a11y");dojo.body().removeChild(g)}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload)}dojo.mixin(dijit,{hasWaiRole:function(a){return a.hasAttribute?a.hasAttribute("role"):!!a.getAttribute("role")},getWaiRole:function(b){var f=b.getAttribute("role");if(f){var a=f.indexOf(":");return a==-1?f:f.substring(a+1)}else{return""}},setWaiRole:function(a,b){a.setAttribute("role",(dojo.isFF&&dojo.isFF<3)?"wairole:"+b:b)},removeWaiRole:function(a){a.removeAttribute("role")},hasWaiState:function(a,b){if(dojo.isFF&&dojo.isFF<3){return a.hasAttributeNS("http://www.w3.org/2005/07/aaa",b)}else{return a.hasAttribute?a.hasAttribute("aria-"+b):!!a.getAttribute("aria-"+b)}},getWaiState:function(a,f){if(dojo.isFF&&dojo.isFF<3){return a.getAttributeNS("http://www.w3.org/2005/07/aaa",f)}else{var b=a.getAttribute("aria-"+f);return b?b:""}},setWaiState:function(a,f,b){if(dojo.isFF&&dojo.isFF<3){a.setAttributeNS("http://www.w3.org/2005/07/aaa","aaa:"+f,b)}else{a.setAttribute("aria-"+f,b)}},removeWaiState:function(a,b){if(dojo.isFF&&dojo.isFF<3){a.removeAttributeNS("http://www.w3.org/2005/07/aaa",b)}else{a.removeAttribute("aria-"+b)}}})}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");if(dojo.isSafari){dojo.connect(window,"load",function(){window.resizeBy(1,0);setTimeout(function(){window.resizeBy(-1,0)},10)})}}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.require("dijit._base");dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",srcNodeRef:null,domNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},postscript:function(b,a){this.create(b,a)},create:function(g,b){this.srcNodeRef=dojo.byId(b);this._connects=[];this._attaches=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id}if(g){this.params=g;dojo.mixin(this,g)}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"))}dijit.registry.add(this);this.buildRendering();if(this.domNode){for(var a in this.attributeMap){var f=this[a];if(typeof f!="object"&&((f!==""&&f!==false)||(g&&g[a]))){this.setAttribute(a,f)}}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id)}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef}},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.doc.createElement("div")},postCreate:function(){},startup:function(){this._started=true},destroyRecursive:function(a){this.destroyDescendants();this.destroy()},destroy:function(a){this.uninitialize();dojo.forEach(this._connects,function(b){dojo.forEach(b,dojo.disconnect)});dojo.forEach(this._supportingWidgets||[],function(b){b.destroy()});this.destroyRendering(a);dijit.registry.remove(this.id)},destroyRendering:function(a){if(this.bgIframe){this.bgIframe.destroy();delete this.bgIframe}if(this.domNode){dojo._destroyElement(this.domNode);delete this.domNode}if(this.srcNodeRef){dojo._destroyElement(this.srcNodeRef);delete this.srcNodeRef}},destroyDescendants:function(){dojo.forEach(this.getDescendants(),function(a){a.destroy()})},uninitialize:function(){return false},onFocus:function(){},onBlur:function(){},_onFocus:function(a){this.onFocus()},_onBlur:function(){this.onBlur()},setAttribute:function(a,b){var f=this[this.attributeMap[a]||"domNode"];this[a]=b;switch(a){case"class":dojo.addClass(f,b);break;case"style":if(f.style.cssText){f.style.cssText+="; "+b}else{f.style.cssText=b}break;default:if(/^on[A-Z]/.test(a)){a=a.toLowerCase()}if(typeof b=="function"){b=dojo.hitch(this,b)}dojo.attr(f,a,b)}},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getDescendants:function(){if(this.containerNode){var a=dojo.query("[widgetId]",this.containerNode);return a.map(dijit.byNode)}else{return[]}},nodesWithKeyClick:["input","button"],connect:function(f,b,g){var a=[];if(b=="ondijitclick"){if(!this.nodesWithKeyClick[f.nodeName]){a.push(dojo.connect(f,"onkeydown",this,function(h){if(h.keyCode==dojo.keys.ENTER){return(dojo.isString(g))?this[g](h):g.call(this,h)}else{if(h.keyCode==dojo.keys.SPACE){dojo.stopEvent(h)}}}));a.push(dojo.connect(f,"onkeyup",this,function(h){if(h.keyCode==dojo.keys.SPACE){return dojo.isString(g)?this[g](h):g.call(this,h)}}))}b="onclick"}a.push(dojo.connect(f,b,this,g));this._connects.push(a);return a},disconnect:function(b){for(var a=0;a<this._connects.length;a++){if(this._connects[a]==b){dojo.forEach(b,dojo.disconnect);this._connects.splice(a,1);return}}},isLeftToRight:function(){if(!("_ltr" in this)){this._ltr=dojo.getComputedStyle(this.domNode).direction!="rtl"}return this._ltr},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none")}})}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new function(){var m=dojo;var b=m._scopeName+"Type";var g="["+b+"]";function a(o){if(m.isString(o)){return"string"}if(typeof o=="number"){return"number"}if(typeof o=="boolean"){return"boolean"}if(m.isFunction(o)){return"function"}if(m.isArray(o)){return"array"}if(o instanceof Date){return"date"}if(o instanceof m._Url){return"url"}return"object"}function f(p,o){switch(o){case"string":return p;case"number":return p.length?Number(p):NaN;case"boolean":return typeof p=="boolean"?p:!(p.toLowerCase()=="false");case"function":if(m.isFunction(p)){p=p.toString();p=m.trim(p.substring(p.indexOf("{")+1,p.length-1))}try{if(p.search(/[^\w\.]+/i)!=-1){p=m.parser._nameAnonFunc(new Function(p),this)}return m.getObject(p,false)}catch(q){return new Function()}case"array":return p.split(/\s*,\s*/);case"date":switch(p){case"":return new Date("");case"now":return new Date();default:return m.date.stamp.fromISOString(p)}case"url":return m.baseUrl+p;default:return m.fromJson(p)}}var l={};function h(q){if(!l[q]){var o=m.getObject(q);if(!m.isFunction(o)){throw new Error("Could not load class '"+q+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?")}var s=o.prototype;var v={};for(var p in s){if(p.charAt(0)=="_"){continue}var u=s[p];v[p]=a(u)}l[q]={cls:o,params:v}}return l[q]}this._functionFromScript=function(p){var q="";var u="";var o=p.getAttribute("args");if(o){m.forEach(o.split(/\s*,\s*/),function(w,v){q+="var "+w+" = arguments["+v+"]; "})}var s=p.getAttribute("with");if(s&&s.length){m.forEach(s.split(/\s*,\s*/),function(v){q+="with("+v+"){";u+="}"})}return new Function(q+p.innerHTML+u)};this.instantiate=function(o){var p=[];m.forEach(o,function(u){if(!u){return}var C=u.getAttribute(b);if((!C)||(!C.length)){return}var z=h(C);var A=z.cls;var q=A._noScript||A.prototype._noScript;var v={};var x=u.attributes;for(var s in z.params){var G=x.getNamedItem(s);if(!G||(!G.specified&&(!dojo.isIE||s.toLowerCase()!="value"))){continue}var E=G.value;switch(s){case"class":E=u.className;break;case"style":E=u.style&&u.style.cssText}var y=z.params[s];v[s]=f(E,y)}if(!q){var w=[],H=[];m.query("> script[type^='dojo/']",u).orphan().forEach(function(I){var K=I.getAttribute("event"),J=I.getAttribute("type"),L=m.parser._functionFromScript(I);if(K){if(J=="dojo/connect"){w.push({event:K,func:L})}else{v[K]=L}}else{H.push(L)}})}var D=A.markupFactory;if(!D&&A.prototype){D=A.prototype.markupFactory}var F=D?D(v,u,A):new A(v,u);p.push(F);var B=u.getAttribute("jsId");if(B){m.setObject(B,F)}if(!q){m.forEach(w,function(I){m.connect(F,I.event,null,I.func)});m.forEach(H,function(I){I.call(F)})}});m.forEach(p,function(q){if(q&&q.startup&&!q._started&&(!q.getParent||!q.getParent())){q.startup()}});return p};this.parse=function(o){var p=m.query(g,o);var q=this.instantiate(p);return q}}();(function(){var a=function(){if(dojo.config.parseOnLoad==true){dojo.parser.parse()}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,a)}else{dojo._loaders.unshift(a)}})();dojo.parser._anonCtr=0;dojo.parser._anon={};dojo.parser._nameAnonFunc=function(a,h){var g="$joinpoint";var f=(h||dojo.parser._anon);if(dojo.isIE){var l=a.__dojoNameCache;if(l&&f[l]===a){return a.__dojoNameCache}}var b="__"+dojo.parser._anonCtr++;while(typeof f[b]!="undefined"){b="__"+dojo.parser._anonCtr++}f[b]=a;return b}}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateNode:null,templateString:null,templatePath:null,widgetsInTemplate:false,containerNode:null,_skipNodeCache:false,_stringRepl:function(a){var b=this.declaredClass,f=this;return dojo.string.substitute(a,this,function(h,g){if(g.charAt(0)=="!"){h=f[g.substr(1)]}if(typeof h=="undefined"){throw new Error(b+" template:"+g)}if(!h){return""}return g.charAt(0)=="!"?h:h.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){var b=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var f;if(dojo.isString(b)){f=dijit._Templated._createNodesFromText(this._stringRepl(b))[0]}else{f=b.cloneNode(true)}this._attachTemplateNodes(f);var g=this.srcNodeRef;if(g&&g.parentNode){g.parentNode.replaceChild(f,g)}this.domNode=f;if(this.widgetsInTemplate){var a=this._supportingWidgets=dojo.parser.parse(f);this._attachTemplateNodes(a,function(l,h){return l[h]})}this._fillContent(g)},_fillContent:function(b){var a=this.containerNode;if(b&&a){while(b.hasChildNodes()){a.appendChild(b.firstChild)}}},_attachTemplateNodes:function(g,m){m=m||function(A,x){return A.getAttribute(x)};var b=dojo.isArray(g)?g:(g.all||g.getElementsByTagName("*"));var s=dojo.isArray(g)?0:-1;for(;s<b.length;s++){var f=(s==-1)?g:b[s];if(this.widgetsInTemplate&&m(f,"dojoType")){continue}var h=m(f,"dojoAttachPoint");if(h){var u,w=h.split(/\s*,\s*/);while((u=w.shift())){if(dojo.isArray(this[u])){this[u].push(f)}else{this[u]=f}}}var q=m(f,"dojoAttachEvent");if(q){var a,y=q.split(/\s*,\s*/);var l=dojo.trim;while((a=y.shift())){if(a){var o=null;if(a.indexOf(":")!=-1){var z=a.split(":");a=l(z[0]);o=l(z[1])}else{a=l(a)}if(!o){o=a}this.connect(f,a,o)}}}var p=m(f,"waiRole");if(p){dijit.setWaiRole(f,p)}var v=m(f,"waiState");if(v){dojo.forEach(v.split(/\s*,\s*/),function(A){if(A.indexOf("-")!=-1){var x=A.split("-");dijit.setWaiState(f,x[0],x[1])}})}}}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(f,g,l){var h=dijit._Templated._templateCache;var a=g||f;var b=h[a];if(b){return b}if(!g){g=dijit._Templated._sanitizeTemplateString(dojo._getText(f))}g=dojo.string.trim(g);if(l||g.match(/\$\{([^\}]+)\}/g)){return(h[a]=g)}else{return(h[a]=dijit._Templated._createNodesFromText(g)[0])}};dijit._Templated._sanitizeTemplateString=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(b){a=b[1]}}else{a=""}return a};if(dojo.isIE){dojo.addOnUnload(function(){var a=dijit._Templated._templateCache;for(var b in a){var f=a[b];if(!isNaN(f.nodeType)){dojo._destroyElement(f)}delete a[b]}})}(function(){var b={cell:{re:/^<t[dh][\s\r\n>]/i,pre:"<table><tbody><tr>",post:"</tr></tbody></table>"},row:{re:/^<tr[\s\r\n>]/i,pre:"<table><tbody>",post:"</tbody></table>"},section:{re:/^<(thead|tbody|tfoot)[\s\r\n>]/i,pre:"<table>",post:"</table>"}};var a;dijit._Templated._createNodesFromText=function(q){if(!a){a=dojo.doc.createElement("div");a.style.display="none";dojo.body().appendChild(a)}var l="none";var g=q.replace(/^\s+/,"");for(var m in b){var o=b[m];if(o.re.test(g)){l=m;q=o.pre+q+o.post;break}}a.innerHTML=q;if(a.normalize){a.normalize()}var f={cell:"tr",row:"tbody",section:"table"}[l];var p=(typeof f!="undefined")?a.getElementsByTagName(f)[0]:a;var h=[];while(p.firstChild){h.push(p.removeChild(p.firstChild))}a.innerHTML="";return h}})();dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""})}if(!dojo._hasResource["dojox.grid._grid.drag"]){dojo._hasResource["dojox.grid._grid.drag"]=true;dojo.provide("dojox.grid._grid.drag");(function(){var a=dojox.grid.drag={};a.dragging=false;a.hysteresis=2;a.capture=function(b){if(b.setCapture){b.setCapture()}else{document.addEventListener("mousemove",b.onmousemove,true);document.addEventListener("mouseup",b.onmouseup,true);document.addEventListener("click",b.onclick,true)}};a.release=function(b){if(b.releaseCapture){b.releaseCapture()}else{document.removeEventListener("click",b.onclick,true);document.removeEventListener("mouseup",b.onmouseup,true);document.removeEventListener("mousemove",b.onmousemove,true)}};a.start=function(h,g,l,b,f){if(!h||a.dragging){console.debug("failed to start drag: bad input node or already dragging");return}a.dragging=true;a.elt=h;a.events={drag:g||dojox.grid.nop,end:l||dojox.grid.nop,start:f||dojox.grid.nop,oldmove:h.onmousemove,oldup:h.onmouseup,oldclick:h.onclick};a.positionX=(b&&("screenX" in b)?b.screenX:false);a.positionY=(b&&("screenY" in b)?b.screenY:false);a.started=(a.position===false);h.onmousemove=a.mousemove;h.onmouseup=a.mouseup;h.onclick=a.click;a.capture(a.elt)};a.end=function(){a.release(a.elt);a.elt.onmousemove=a.events.oldmove;a.elt.onmouseup=a.events.oldup;a.elt.onclick=a.events.oldclick;a.elt=null;try{if(a.started){a.events.end()}}finally{a.dragging=false}};a.calcDelta=function(b){b.deltaX=b.screenX-a.positionX;b.deltaY=b.screenY-a.positionY};a.hasMoved=function(b){return Math.abs(b.deltaX)+Math.abs(b.deltaY)>a.hysteresis};a.mousemove=function(b){b=dojo.fixEvent(b);dojo.stopEvent(b);a.calcDelta(b);if((!a.started)&&(a.hasMoved(b))){a.events.start(b);a.started=true}if(a.started){a.events.drag(b)}};a.mouseup=function(b){dojo.stopEvent(dojo.fixEvent(b));a.end()};a.click=function(b){dojo.stopEvent(dojo.fixEvent(b))}})()}if(!dojo._hasResource["dojox.grid._grid.builder"]){dojo._hasResource["dojox.grid._grid.builder"]=true;dojo.provide("dojox.grid._grid.builder");dojo.declare("dojox.grid.Builder",null,{constructor:function(a){this.view=a;this.grid=a.grid},view:null,_table:'<table class="dojoxGrid-row-table" border="0" cellspacing="0" cellpadding="0" role="wairole:presentation">',generateCellMarkup:function(f,l,g,h){var a=[],b;if(h){b=['<th tabIndex="-1" role="wairole:columnheader"']}else{b=['<td tabIndex="-1" role="wairole:gridcell"']}f.colSpan&&b.push(' colspan="',f.colSpan,'"');f.rowSpan&&b.push(' rowspan="',f.rowSpan,'"');b.push(' class="dojoxGrid-cell ');f.classes&&b.push(f.classes," ");g&&b.push(g," ");a.push(b.join(""));a.push("");b=['" idx="',f.index,'" style="'];b.push(f.styles,l||"");f.unitWidth&&b.push("width:",f.unitWidth,";");a.push(b.join(""));a.push("");b=['"'];f.attrs&&b.push(" ",f.attrs);b.push(">");a.push(b.join(""));a.push("");a.push("</td>");return a},isCellNode:function(a){return Boolean(a&&a.getAttribute&&a.getAttribute("idx"))},getCellNodeIndex:function(a){return a?Number(a.getAttribute("idx")):-1},getCellNode:function(b,f){for(var h=0,l;l=dojox.grid.getTr(b.firstChild,h);h++){for(var g=0,a;a=l.cells[g];g++){if(this.getCellNodeIndex(a)==f){return a}}}},findCellTarget:function(a,b){var f=a;while(f&&(!this.isCellNode(f)||(dojox.grid.gridViewTag in f.offsetParent.parentNode&&f.offsetParent.parentNode[dojox.grid.gridViewTag]!=this.view.id))&&(f!=b)){f=f.parentNode}return f!=b?f:null},baseDecorateEvent:function(a){a.dispatch="do"+a.type;a.grid=this.grid;a.sourceView=this.view;a.cellNode=this.findCellTarget(a.target,a.rowNode);a.cellIndex=this.getCellNodeIndex(a.cellNode);a.cell=(a.cellIndex>=0?this.grid.getCell(a.cellIndex):null)},findTarget:function(a,f){var b=a;while(b&&(b!=this.domNode)&&(!(f in b)||(dojox.grid.gridViewTag in b&&b[dojox.grid.gridViewTag]!=this.view.id))){b=b.parentNode}return(b!=this.domNode)?b:null},findRowTarget:function(a){return this.findTarget(a,dojox.grid.rowIndexTag)},isIntraNodeEvent:function(b){try{return(b.cellNode&&b.relatedTarget&&dojo.isDescendant(b.relatedTarget,b.cellNode))}catch(a){return false}},isIntraRowEvent:function(b){try{var f=b.relatedTarget&&this.findRowTarget(b.relatedTarget);return !f&&(b.rowIndex==-1)||f&&(b.rowIndex==f.gridRowIndex)}catch(a){return false}},dispatchEvent:function(a){if(a.dispatch in this){return this[a.dispatch](a)}},domouseover:function(a){if(a.cellNode&&(a.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=a.cellNode;this.grid.onMouseOver(a)}this.grid.onMouseOverRow(a)},domouseout:function(a){if(a.cellNode&&(a.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(a,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(a);if(!this.isIntraRowEvent(a)){this.grid.onMouseOutRow(a)}}},domousedown:function(a){if(a.cellNode){this.grid.onMouseDown(a)}this.grid.onMouseDownRow(a)}});dojo.declare("dojox.grid.contentBuilder",dojox.grid.Builder,{update:function(){this.prepareHtml()},prepareHtml:function(){var g=this.grid.get,h=this.view.structure.rows;for(var b=0,l;(l=h[b]);b++){for(var f=0,a;(a=l[f]);f++){a.get=a.get||(a.value==undefined)&&g;a.markup=this.generateCellMarkup(a,a.cellStyles,a.cellClasses,false)}}},generateHtml:function(p,u){var l=[this._table],s=this.view,a=s.onBeforeRow,x=s.structure.rows;a&&a(u,x);for(var g=0,w;(w=x[g]);g++){if(w.hidden||w.header){continue}l.push(!w.invisible?"<tr>":'<tr class="dojoxGrid-invisible">');for(var h=0,q,f,b,o;(q=w[h]);h++){f=q.markup,b=q.customClasses=[],o=q.customStyles=[];f[5]=q.format(p);f[1]=b.join(" ");f[3]=o.join(";");l.push.apply(l,f)}l.push("</tr>")}l.push("</table>");return l.join("")},decorateEvent:function(a){a.rowNode=this.findRowTarget(a.target);if(!a.rowNode){return false}a.rowIndex=a.rowNode[dojox.grid.rowIndexTag];this.baseDecorateEvent(a);a.cell=this.grid.getCell(a.cellIndex);return true}});dojo.declare("dojox.grid.headerBuilder",dojox.grid.Builder,{bogusClickTime:0,overResizeWidth:4,minColWidth:1,_table:'<table class="dojoxGrid-row-table" border="0" cellspacing="0" cellpadding="0" role="wairole:presentation"',update:function(){this.tableMap=new dojox.grid.tableMap(this.view.structure.rows)},generateHtml:function(l,a){var g=[this._table],p=this.view.structure.rows;if(this.view.viewWidth){g.push([' style="width:',this.view.viewWidth,';"'].join(""))}g.push(">");dojox.grid.fire(this.view,"onBeforeRow",[-1,p]);for(var b=0,o;(o=p[b]);b++){if(o.hidden){continue}g.push(!o.invisible?"<tr>":'<tr class="dojoxGrid-invisible">');for(var f=0,h,m;(h=o[f]);f++){h.customClasses=[];h.customStyles=[];m=this.generateCellMarkup(h,h.headerStyles,h.headerClasses,true);m[5]=(a!=undefined?a:l(h));m[3]=h.customStyles.join(";");m[1]=h.customClasses.join(" ");g.push(m.join(""))}g.push("</tr>")}g.push("</table>");return g.join("")},getCellX:function(f){var a=f.layerX;if(dojo.isMoz){var g=dojox.grid.ascendDom(f.target,dojox.grid.makeNotTagName("th"));a-=(g&&g.offsetLeft)||0;var b=f.sourceView.getScrollbarWidth();if(!dojo._isBodyLtr()&&f.sourceView.headerNode.scrollLeft<b){a-=b}}var g=dojox.grid.ascendDom(f.target,function(){if(!g||g==f.cellNode){return false}a+=(g.offsetLeft<0?0:g.offsetLeft);return true});return a},decorateEvent:function(a){this.baseDecorateEvent(a);a.rowIndex=-1;a.cellX=this.getCellX(a);return true},prepareResize:function(f,b){var a=dojox.grid.getTdIndex(f.cellNode);f.cellNode=(a?f.cellNode.parentNode.cells[a+b]:null);f.cellIndex=(f.cellNode?this.getCellNodeIndex(f.cellNode):-1);return Boolean(f.cellNode)},canResize:function(b){if(!b.cellNode||b.cellNode.colSpan>1){return false}var a=this.grid.getCell(b.cellIndex);return !a.noresize&&!a.isFlex()},overLeftResizeArea:function(a){if(dojo._isBodyLtr()){return(a.cellIndex>0)&&(a.cellX<this.overResizeWidth)&&this.prepareResize(a,-1)}return t=a.cellNode&&(a.cellX<this.overResizeWidth)},overRightResizeArea:function(a){if(dojo._isBodyLtr()){return a.cellNode&&(a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth)}return(a.cellIndex>0)&&(a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(a,-1)},domousemove:function(a){var b=(this.overRightResizeArea(a)?"e-resize":(this.overLeftResizeArea(a)?"w-resize":""));if(b&&!this.canResize(a)){b="not-allowed"}a.sourceView.headerNode.style.cursor=b||"";if(b){dojo.stopEvent(a)}},domousedown:function(a){if(!dojox.grid.drag.dragging){if((this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)){this.beginColumnResize(a)}else{this.grid.onMouseDown(a);this.grid.onMouseOverRow(a)}}},doclick:function(a){if(new Date().getTime()<this.bogusClickTime){dojo.stopEvent(a);return true}},beginColumnResize:function(l){dojo.stopEvent(l);var h=[],b=this.tableMap.findOverlappingNodes(l.cellNode);for(var f=0,a;(a=b[f]);f++){h.push({node:a,index:this.getCellNodeIndex(a),width:a.offsetWidth})}var g={scrollLeft:l.sourceView.headerNode.scrollLeft,view:l.sourceView,node:l.cellNode,index:l.cellIndex,w:l.cellNode.clientWidth,spanners:h};dojox.grid.drag.start(l.cellNode,dojo.hitch(this,"doResizeColumn",g),dojo.hitch(this,"endResizeColumn",g),l)},doResizeColumn:function(m,f){var o=dojo._isBodyLtr();if(o){var b=m.w+f.deltaX}else{var b=m.w-f.deltaX}if(b>=this.minColWidth){for(var h=0,l,a;(l=m.spanners[h]);h++){if(o){a=l.width+f.deltaX}else{a=l.width-f.deltaX}l.node.style.width=a+"px";m.view.setColWidth(l.index,a)}m.node.style.width=b+"px";m.view.setColWidth(m.index,b);if(!o){m.view.headerNode.scrollLeft=(m.scrollLeft-f.deltaX)}}if(m.view.flexCells&&!m.view.testFlexCells()){var g=dojox.grid.findTable(m.node);g&&(g.style.width="")}},endResizeColumn:function(a){this.bogusClickTime=new Date().getTime()+30;setTimeout(dojo.hitch(a.view,"update"),50)}});dojo.declare("dojox.grid.tableMap",null,{constructor:function(a){this.mapRows(a)},map:null,mapRows:function(u){var l=u.length;if(!l){return}this.map=[];for(var a=0,q;(q=u[a]);a++){this.map[a]=[]}for(var a=0,q;(q=u[a]);a++){for(var b=0,m=0,o,f,g;(o=q[b]);b++){while(this.map[a][m]){m++}this.map[a][m]={c:b,r:a};g=o.rowSpan||1;f=o.colSpan||1;for(var h=0;h<g;h++){for(var p=0;p<f;p++){this.map[a+h][m+p]=this.map[a][m]}}m+=f}}},dumpMap:function(){for(var b=0,l,g="";(l=this.map[b]);b++,g=""){for(var f=0,a;(a=l[f]);f++){g+=a.r+","+a.c+"   "}console.log(g)}},getMapCoords:function(h,b){for(var f=0,l;(l=this.map[f]);f++){for(var g=0,a;(a=l[g]);g++){if(a.c==b&&a.r==h){return{j:f,i:g}}}}return{j:-1,i:-1}},getNode:function(b,f,a){var g=b&&b.rows[f];return g&&g.cells[a]},_findOverlappingNodes:function(inTable,inRow,inCol){var nodes=[];var m=this.getMapCoords(inRow,inCol);var row=this.map[m.j];for(var j=0,row;(row=this.map[j]);j++){if(j==m.j){continue}with(row[m.i]){var n=this.getNode(inTable,r,c);if(n){nodes.push(n)}}}return nodes},findOverlappingNodes:function(a){return this._findOverlappingNodes(dojox.grid.findTable(a),dojox.grid.getTrIndex(a.parentNode),dojox.grid.getTdIndex(a))}});dojox.grid.rowIndexTag="gridRowIndex";dojox.grid.gridViewTag="gridView"}if(!dojo._hasResource["dojox.grid._grid.view"]){dojo._hasResource["dojox.grid._grid.view"]=true;dojo.provide("dojox.grid._grid.view");dojo.declare("dojox.GridView",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:'<div class="dojoxGrid-view">\n\t<div class="dojoxGrid-header" dojoAttachPoint="headerNode">\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em">\n\t\t\t<div dojoAttachPoint="headerContentNode"></div>\n\t\t</div>\n\t</div>\n\t<input type="checkbox" class="dojoxGrid-hidden-focus" dojoAttachPoint="hiddenFocusNode" />\n\t<input type="checkbox" class="dojoxGrid-hidden-focus" />\n\t<div class="dojoxGrid-scrollbox" dojoAttachPoint="scrollboxNode">\n\t\t<div class="dojoxGrid-content" dojoAttachPoint="contentNode" hidefocus="hidefocus"></div>\n\t</div>\n</div>\n',themeable:false,classTag:"dojoxGrid",marginBottom:0,rowPad:2,postMixInProperties:function(){this.rowNodes=[]},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new dojox.grid.contentBuilder(this);this.header=new dojox.grid.headerBuilder(this);if(!dojo._isBodyLtr()){this.headerNodeContainer.style.width=""}},destroy:function(){dojox.grid.removeNode(this.headerNode);this.inherited("destroy",arguments)},focus:function(){if(dojo.isSafari||dojo.isOpera){this.hiddenFocusNode.focus()}else{this.scrollboxNode.focus()}},setStructure:function(a){var b=this.structure=a;if(b.width&&!isNaN(b.width)){this.viewWidth=b.width+"em"}else{this.viewWidth=b.width||this.viewWidth}this.onBeforeRow=b.onBeforeRow;this.noscroll=b.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden"}this.testFlexCells();this.updateStructure()},testFlexCells:function(){this.flexCells=false;for(var b=0,g;(g=this.structure.rows[b]);b++){for(var f=0,a;(a=g[f]);f++){a.view=this;this.flexCells=this.flexCells||a.isFlex()}}return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){return(this.noscroll?0:dojox.grid.getScrollbarWidth())},getColumnsWidth:function(){return this.headerContentNode.firstChild.offsetWidth},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px"},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader()},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent)},_getHeaderContent:function(a){var b=a.name||a.grid.getCellName(a);if(a.index!=a.grid.getSortIndex()){return b}return['<div class="',a.grid.sortInfo>0?"dojoxGrid-sort-down":"dojoxGrid-sort-up",'"><div class="gridArrowButtonChar">',a.grid.sortInfo>0?"&#9660;":"&#9650;","</div>",b,"</div>"].join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasScrollbar:function(){return(this.scrollboxNode.clientHeight!=this.scrollboxNode.offsetHeight)},adaptHeight:function(){if(!this.grid.autoHeight){var a=this.domNode.clientHeight;if(!this.hasScrollbar()){a-=dojox.grid.getScrollbarWidth()}dojox.grid.setStyleHeightPx(this.scrollboxNode,a)}},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();w=Math.max(w,this.getColumnsWidth())+"px";with(this.contentNode){style.width="";offsetWidth;style.width=w}},setSize:function(w,h){with(this.domNode.style){if(w){width=w}height=(h>=0?h+"px":"")}with(this.headerNode.style){if(w){width=w}}},renderRow:function(f,a){var b=this.createRowNode(f);this.buildRow(f,b,a);this.grid.edit.restore(this,f);return b},createRowNode:function(b){var a=document.createElement("div");a.className=this.classTag+"-row";a[dojox.grid.gridViewTag]=this.id;a[dojox.grid.rowIndexTag]=b;this.rowNodes[b]=a;return a},buildRow:function(b,a){this.buildRowContent(b,a);this.styleRow(b,a)},buildRowContent:function(b,a){a.innerHTML=this.content.generateHtml(b,b);if(this.flexCells){a.firstChild.style.width=this.contentWidth}},rowRemoved:function(a){this.grid.edit.save(this,a);delete this.rowNodes[a]},getRowNode:function(a){return this.rowNodes[a]},getCellNode:function(f,a){var b=this.getRowNode(f);if(b){return this.content.getCellNode(b,a)}},styleRow:function(b,a){a._style=dojox.grid.getStyleText(a);this.styleRowNode(b,a)},styleRowNode:function(b,a){if(a){this.doStyleRowNode(b,a)}},doStyleRowNode:function(b,a){this.grid.styleRowNode(b,a)},updateRow:function(g,a,b){var f=this.getRowNode(g);if(f){f.style.height="";this.buildRow(g,f)}return f},updateRowStyles:function(a){this.styleRowNode(a,this.getRowNode(a))},lastTop:0,firstScroll:0,doscroll:function(a){var g=dojo._isBodyLtr();if(this.firstScroll<2){if((!g&&this.firstScroll==1)||(g&&this.firstScroll==0)){var b=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE){this.headerNodeContainer.style.width=b.w+this.getScrollbarWidth()+"px"}else{if(dojo.isMoz){this.headerNodeContainer.style.width=b.w-this.getScrollbarWidth()+"px";if(g){this.scrollboxNode.scrollLeft=this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth}else{this.scrollboxNode.scrollLeft=this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth}}}}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var f=this.scrollboxNode.scrollTop;if(f!=this.lastTop){this.grid.scrollTo(f)}},setScrollTop:function(a){this.lastTop=a;this.scrollboxNode.scrollTop=a;return this.scrollboxNode.scrollTop},doContentEvent:function(a){if(this.content.decorateEvent(a)){this.grid.onContentEvent(a)}},doHeaderEvent:function(a){if(this.header.decorateEvent(a)){this.grid.onHeaderEvent(a)}},dispatchContentEvent:function(a){return this.content.dispatchEvent(a)},dispatchHeaderEvent:function(a){return this.header.dispatchEvent(a)},setColWidth:function(b,a){this.grid.setCellWidth(b,a+"px")},update:function(){var a=this.scrollboxNode.scrollLeft;this.content.update();this.grid.update();this.scrollboxNode.scrollLeft=a;this.headerNode.scrollLeft=a}})}if(!dojo._hasResource["dojox.grid._grid.views"]){dojo._hasResource["dojox.grid._grid.views"]=true;dojo.provide("dojox.grid._grid.views");dojo.declare("dojox.grid.views",null,{constructor:function(a){this.grid=a},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(a){a.idx=this.views.length;this.views.push(a)},destroyViews:function(){for(var b=0,a;a=this.views[b];b++){a.destroy()}this.views=[]},getContentNodes:function(){var b=[];for(var f=0,a;a=this.views[f];f++){b.push(a.contentNode)}return b},forEach:function(a){for(var f=0,b;b=this.views[f];f++){a(b,f)}},onEach:function(f,g){g=g||[];for(var b=0,a;a=this.views[b];b++){if(f in a){a[f].apply(a,g)}}},normalizeHeaderNodeHeight:function(){var f=[];for(var b=0,a;(a=this.views[b]);b++){if(a.headerContentNode.firstChild){f.push(a.headerContentNode)}}this.normalizeRowNodeHeights(f)},normalizeRowNodeHeights:function(f){var b=0;for(var a=0,l,g;(l=f[a]);a++){b=Math.max(b,dojo.marginBox(l.firstChild).h)}b=(b>=0?b:0);for(var a=0,l;(l=f[a]);a++){dojo.marginBox(l.firstChild,{h:b})}if(f&&f[0]){f[0].parentNode.offsetHeight}},resetHeaderNodeHeight:function(){for(var b=0,a,f;(a=this.views[b]);b++){f=a.headerContentNode.firstChild;if(f){f.style.height=""}}},renormalizeRow:function(g){var f=[];for(var b=0,a,h;(a=this.views[b])&&(h=a.getRowNode(g));b++){h.firstChild.style.height="";f.push(h)}this.normalizeRowNodeHeights(f)},getViewWidth:function(a){return this.views[a].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(b){b.headerContentNode.style.height=""});var a=0;this.forEach(function(b){a=Math.max(b.headerNode.offsetHeight,a)});return a},measureContent:function(){var a=0;this.forEach(function(b){a=Math.max(b.domNode.offsetHeight,a)});return a},findClient:function(f){var g=this.grid.elasticView||-1;if(g<0){for(var b=1,a;(a=this.views[b]);b++){if(a.viewWidth){for(b=1;(a=this.views[b]);b++){if(!a.viewWidth){g=b;break}}break}}}if(g<0){g=Math.floor(this.views.length/2)}return g},arrange:function(l,w){var i,v,vw,len=this.views.length;var c=(w<=0?len:this.findClient());var setPosition=function(v,l){with(v.domNode.style){if(!dojo._isBodyLtr()){right=l+"px"}else{left=l+"px"}top=0+"px"}with(v.headerNode.style){if(!dojo._isBodyLtr()){right=l+"px"}else{left=l+"px"}top=0}};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);setPosition(v,l);vw=v.domNode.offsetWidth;l+=vw}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;setPosition(v,r)}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);setPosition(v,l)}return l},renderRow:function(l,h){var g=[];for(var b=0,a,m,f;(a=this.views[b])&&(m=h[b]);b++){f=a.renderRow(l);m.appendChild(f);g.push(f)}this.normalizeRowNodeHeights(g)},rowRemoved:function(a){this.onEach("rowRemoved",[a])},updateRow:function(g,f){for(var b=0,a;a=this.views[b];b++){a.updateRow(g,f)}this.renormalizeRow(g)},updateRowStyles:function(a){this.onEach("updateRowStyles",[a])},setScrollTop:function(f){var g=f;for(var b=0,a;a=this.views[b];b++){g=a.setScrollTop(f)}return g},getFirstScrollingView:function(){for(var b=0,a;(a=this.views[b]);b++){if(a.hasScrollbar()){return a}}}})}if(!dojo._hasResource["dojox.grid._grid.cell"]){dojo._hasResource["dojox.grid._grid.cell"]=true;dojo.provide("dojox.grid._grid.cell");dojo.declare("dojox.grid.cell",null,{styles:"",constructor:function(a){dojo.mixin(this,a);if(this.editor){this.editor=new this.editor(this)}},format:function(h){var b,a=this.grid.edit.info,g=this.get?this.get(h):this.value;if(this.editor&&(this.editor.alwaysOn||(a.rowIndex==h&&a.cell==this))){return this.editor.format(g,h)}else{return(b=this.formatter)?b.call(this,g,h):g}},getNode:function(a){return this.view.getCellNode(a,this.index)},isFlex:function(){var a=this.unitWidth;return a&&(a=="auto"||a.slice(-1)=="%")},applyEdit:function(a,b){this.grid.edit.applyCellEdit(a,this,b)},cancelEdit:function(a){this.grid.doCancelEdit(a)},_onEditBlur:function(a){if(this.grid.edit.isEditCell(a,this.index)){this.grid.edit.apply()}},registerOnBlur:function(b,a){if(this.commitOnBlur){dojo.connect(b,"onblur",function(f){setTimeout(dojo.hitch(this,"_onEditBlur",a),250)})}}})}if(!dojo._hasResource["dojox.grid._grid.layout"]){dojo._hasResource["dojox.grid._grid.layout"]=true;dojo.provide("dojox.grid._grid.layout");dojo.declare("dojox.grid.layout",null,{constructor:function(a){this.grid=a},cells:[],structure:null,defaultWidth:"6em",setStructure:function(a){this.fieldIndex=0;this.cells=[];var f=this.structure=[];for(var b=0,h,g;(h=a[b]);b++){f.push(this.addViewDef(h))}this.cellCount=this.cells.length},addViewDef:function(a){this._defaultCellProps=a.defaultCell||{};return dojo.mixin({},a,{rows:this.addRowsDef(a.rows||a.cells)})},addRowsDef:function(f){var a=[];for(var b=0,g;f&&(g=f[b]);b++){a.push(this.addRowDef(b,g))}return a},addRowDef:function(l,g){var b=[];for(var f=0,h,a;(h=g[f]);f++){a=this.addCellDef(l,f,h);b.push(a);this.cells.push(a)}return b},addCellDef:function(h,b,g){var a=0;if(g.colSpan>1){a=0}else{if(!isNaN(g.width)){a=g.width+"em"}else{a=g.width||this.defaultWidth}}var f=g.field!=undefined?g.field:(g.get?-1:this.fieldIndex);if((g.field!=undefined)||!g.get){this.fieldIndex=(g.field>-1?g.field:this.fieldIndex)+1}return new dojox.grid.cell(dojo.mixin({},this._defaultCellProps,g,{grid:this.grid,subrow:h,layoutIndex:b,index:this.cells.length,fieldIndex:f,unitWidth:a}))}})}if(!dojo._hasResource["dojox.grid._grid.rows"]){dojo._hasResource["dojox.grid._grid.rows"]=true;dojo.provide("dojox.grid._grid.rows");dojo.declare("dojox.grid.rows",null,{constructor:function(a){this.grid=a},linesToEms:2,defaultRowHeight:1,overRow:-2,getHeight:function(a){return""},getDefaultHeightPx:function(){return 32},prepareStylingRow:function(b,a){return{index:b,node:a,odd:Boolean(b&1),selected:this.grid.selection.isSelected(b),over:this.isOver(b),customStyles:"",customClasses:"dojoxGrid-row"}},styleRowNode:function(f,a){var b=this.prepareStylingRow(f,a);this.grid.onStyleRow(b);this.applyStyles(b)},applyStyles:function(inRow){with(inRow){node.className=customClasses;var h=node.style.height;dojox.grid.setStyleText(node,customStyles+";"+(node._style||""));node.style.height=h}},updateStyles:function(a){this.grid.updateRowStyles(a)},setOverRow:function(b){var a=this.overRow;this.overRow=b;if((a!=this.overRow)&&(a>=0)){this.updateStyles(a)}this.updateStyles(this.overRow)},isOver:function(a){return(this.overRow==a)}})}if(!dojo._hasResource["dojox.grid._grid.focus"]){dojo._hasResource["dojox.grid._grid.focus"]=true;dojo.provide("dojox.grid._grid.focus");dojo.declare("dojox.grid.focus",null,{constructor:function(a){this.grid=a;this.cell=null;this.rowIndex=-1;dojo.connect(this.grid.domNode,"onfocus",this,"doFocus")},tabbingOut:false,focusClass:"dojoxGrid-cell-focus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()},isFocusCell:function(a,b){return(this.cell==a)&&(this.rowIndex==b)},isLastFocusCell:function(){return(this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1)},isFirstFocusCell:function(){return(this.rowIndex==0)&&(this.cell.index==0)},isNoFocusCell:function(){return(this.rowIndex<0)||!this.cell},_focusifyCellNode:function(a){var f=this.cell&&this.cell.getNode(this.rowIndex);if(f){dojo.toggleClass(f,this.focusClass,a);if(a){this.scrollIntoView();try{if(!this.grid.edit.isEditing()){dojox.grid.fire(f,"focus")}}catch(b){}}}},scrollIntoView:function(){if(!this.cell){return}var l=this.cell,f=l.view.scrollboxNode,b={w:f.clientWidth,l:f.scrollLeft,t:f.scrollTop,h:f.clientHeight},h=l.getNode(this.rowIndex),g=l.view.getRowNode(this.rowIndex),a=this.grid.scroller.findScrollTop(this.rowIndex);if(h.offsetLeft+h.offsetWidth>b.l+b.w){f.scrollLeft=h.offsetLeft+h.offsetWidth-b.w}else{if(h.offsetLeft<b.l){f.scrollLeft=h.offsetLeft}}if(a+g.offsetHeight>b.t+b.h){this.grid.setScrollTop(a+g.offsetHeight-b.h)}else{if(a<b.t){this.grid.setScrollTop(a)}}},styleRow:function(a){return},setFocusIndex:function(b,a){this.setFocusCell(this.grid.getCell(a),b)},setFocusCell:function(a,b){if(a&&!this.isFocusCell(a,b)){this.tabbingOut=false;this.focusGridView();this._focusifyCellNode(false);this.cell=a;this.rowIndex=b;this._focusifyCellNode(true)}if(dojo.isOpera){setTimeout(dojo.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1)}else{this.grid.onCellFocus(this.cell,this.rowIndex)}},next:function(){var f=this.rowIndex,a=this.cell.index+1,g=this.grid.layout.cellCount-1,b=this.grid.rowCount-1;if(a>g){a=0;f++}if(f>b){a=g;f=b}this.setFocusIndex(f,a)},previous:function(){var b=(this.rowIndex||0),a=(this.cell.index||0)-1;if(a<0){a=this.grid.layout.cellCount-1;b--}if(b<0){b=0;a=0}this.setFocusIndex(b,a)},move:function(g,a){var l=this.grid.rowCount-1,o=this.grid.layout.cellCount-1,h=this.rowIndex,f=this.cell.index,m=Math.min(l,Math.max(0,h+g)),b=Math.min(o,Math.max(0,f+a));this.setFocusIndex(m,b);if(g){this.grid.updateRow(h)}},previousKey:function(a){if(this.isFirstFocusCell()){this.tabOut(this.grid.domNode)}else{dojo.stopEvent(a);this.previous()}},nextKey:function(a){if(this.isLastFocusCell()){this.tabOut(this.grid.lastFocusNode)}else{dojo.stopEvent(a);this.next()}},tabOut:function(a){this.tabbingOut=true;a.focus()},focusGridView:function(){dojox.grid.fire(this.focusView,"focus")},focusGrid:function(a){this.focusGridView();this._focusifyCellNode(true)},doFocus:function(a){if(a&&a.target!=a.currentTarget){return}if(!this.tabbingOut&&this.isNoFocusCell()){this.setFocusIndex(0,0)}this.tabbingOut=false}})}if(!dojo._hasResource["dojox.grid._grid.selection"]){dojo._hasResource["dojox.grid._grid.selection"]=true;dojo.provide("dojox.grid._grid.selection");dojo.declare("dojox.grid.selection",null,{constructor:function(a){this.grid=a;this.selected=[]},multiSelect:true,selected:null,updating:0,selectedIndex:-1,onCanSelect:function(a){return this.grid.onCanSelect(a)},onCanDeselect:function(a){return this.grid.onCanDeselect(a)},onSelected:function(a){return this.grid.onSelected(a)},onDeselected:function(a){return this.grid.onDeselected(a)},onChanging:function(){},onChanged:function(){return this.grid.onSelectionChanged()},isSelected:function(a){return this.selected[a]},getFirstSelected:function(){for(var b=0,a=this.selected.length;b<a;b++){if(this.selected[b]){return b}}return -1},getNextSelected:function(f){for(var b=f+1,a=this.selected.length;b<a;b++){if(this.selected[b]){return b}}return -1},getSelected:function(){var a=[];for(var f=0,b=this.selected.length;f<b;f++){if(this.selected[f]){a.push(f)}}return a},getSelectedCount:function(){var b=0;for(var a=0;a<this.selected.length;a++){if(this.selected[a]){b++}}return b},beginUpdate:function(){if(this.updating==0){this.onChanging()}this.updating++},endUpdate:function(){this.updating--;if(this.updating==0){this.onChanged()}},select:function(a){this.unselectAll(a);this.addToSelection(a)},addToSelection:function(a){a=Number(a);if(this.selected[a]){this.selectedIndex=a}else{if(this.onCanSelect(a)!==false){this.selectedIndex=a;this.beginUpdate();this.selected[a]=true;this.grid.onSelected(a);this.endUpdate()}}},deselect:function(a){a=Number(a);if(this.selectedIndex==a){this.selectedIndex=-1}if(this.selected[a]){if(this.onCanDeselect(a)===false){return}this.beginUpdate();delete this.selected[a];this.grid.onDeselected(a);this.endUpdate()}},setSelected:function(b,a){this[(a?"addToSelection":"deselect")](b)},toggleSelect:function(a){this.setSelected(a,!this.selected[a])},insert:function(a){this.selected.splice(a,0,false);if(this.selectedIndex>=a){this.selectedIndex++}},remove:function(a){this.selected.splice(a,1);if(this.selectedIndex>=a){this.selectedIndex--}},unselectAll:function(b){for(var a in this.selected){if((a!=b)&&(this.selected[a]===true)){this.deselect(a)}}},shiftSelect:function(a,g){var f=(a>=0?a:g),h=g;if(f>h){h=f;f=g}for(var b=f;b<=h;b++){this.addToSelection(b)}},clickSelect:function(g,a,b){this.beginUpdate();if(!this.multiSelect){this.select(g)}else{var f=this.selectedIndex;if(!a){this.unselectAll(g)}if(b){this.shiftSelect(f,g)}else{if(a){this.toggleSelect(g)}else{this.addToSelection(g)}}}this.endUpdate()},clickSelectEvent:function(a){this.clickSelect(a.rowIndex,a.ctrlKey,a.shiftKey)},clear:function(){this.beginUpdate();this.unselectAll();this.endUpdate()}})}if(!dojo._hasResource["dojox.grid._grid.edit"]){dojo._hasResource["dojox.grid._grid.edit"]=true;dojo.provide("dojox.grid._grid.edit");dojo.declare("dojox.grid.edit",null,{constructor:function(a){this.grid=a;this.connections=[];if(dojo.isIE){this.connections.push(dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus")))}},info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect)},cellFocus:function(a,b){if(this.grid.singleClickEdit||this.isEditRow(b)){this.setEditCell(a,b)}else{this.apply()}if(this.isEditing()||(a&&(a.editor||0).alwaysOn)){this._focusEditor(a,b)}},rowClick:function(a){if(this.isEditing()&&!this.isEditRow(a.rowIndex)){this.apply()}},styleRow:function(a){if(a.index==this.info.rowIndex){a.customClasses+=" dojoxGrid-row-editing"}},dispatchEvent:function(b){var f=b.cell,a=f&&f.editor;return a&&a.dispatchEvent(b.dispatch,b)},isEditing:function(){return this.info.rowIndex!==undefined},isEditCell:function(b,a){return(this.info.rowIndex===b)&&(this.info.cell.index==a)},isEditRow:function(a){return this.info.rowIndex===a},setEditCell:function(a,b){if(!this.isEditCell(b,a.index)&&this.grid.canEdit(a,b)){this.start(a,b,this.isEditRow(b)||a.editor)}},_focusEditor:function(a,b){dojox.grid.fire(a.editor,"focus",[b])},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex)}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime()},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0}},_doCatchBoomerang:function(){if(dojo.isIE){this._catchBoomerang=new Date().getTime()+this._boomerangWindow}},start:function(a,f,b){this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(f)){this.applyRowEdit();this.grid.updateRow(f)}if(b){this.info={cell:a,rowIndex:f};this.grid.doStartEdit(a,f);this.grid.updateRow(f)}else{this.info={}}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(a,f);this._doCatchBoomerang()},_editorDo:function(a){var b=this.info.cell;b&&b.editor&&b.editor[a](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(a,b,f){if(this.grid.canEdit(b,f)){this.grid.doApplyCellEdit(a,f,b.fieldIndex)}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex)},apply:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang()}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang()}},save:function(b,a){var f=this.info.cell;if(this.isEditRow(b)&&(!a||f.view==a)&&f.editor){f.editor.save(f,this.info.rowIndex)}},restore:function(a,b){var f=this.info.cell;if(this.isEditRow(b)&&f.view==a&&f.editor){f.editor.restore(f,this.info.rowIndex)}}})}if(!dojo._hasResource["dojox.grid._grid.rowbar"]){dojo._hasResource["dojox.grid._grid.rowbar"]=true;dojo.provide("dojox.grid._grid.rowbar");dojo.declare("dojox.GridRowView",dojox.GridView,{defaultWidth:"3em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(f,b){var a=this.contentNode.offsetWidth-this.padBorderWidth;b.innerHTML='<table class="dojoxGrid-rowbar-table" style="width:'+a+'px;" border="0" cellspacing="0" cellpadding="0" role="wairole:presentation"><tr><td class="dojoxGrid-rowbar-inner">&nbsp;</td></tr></table>'},renderHeader:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){},doStyleRowNode:function(b,a){var f=["dojoxGrid-rowbar"];if(this.grid.rows.isOver(b)){f.push("dojoxGrid-rowbar-over")}if(this.grid.selection.isSelected(b)){f.push("dojoxGrid-rowbar-selected")}a.className=f.join(" ")},domouseover:function(a){this.grid.onMouseOverRow(a)},domouseout:function(a){if(!this.isIntraRowEvent(a)){this.grid.onMouseOutRow(a)}}})}if(!dojo._hasResource["dojox.grid._grid.publicEvents"]){dojo._hasResource["dojox.grid._grid.publicEvents"]=true;dojo.provide("dojox.grid._grid.publicEvents");dojox.grid.publicEvents={cellOverClass:"dojoxGrid-cell-over",onKeyEvent:function(a){this.dispatchKeyEvent(a)},onContentEvent:function(a){this.dispatchContentEvent(a)},onHeaderEvent:function(a){this.dispatchHeaderEvent(a)},onStyleRow:function(inRow){with(inRow){customClasses+=(odd?" dojoxGrid-row-odd":"")+(selected?" dojoxGrid-row-selected":"")+(over?" dojoxGrid-row-over":"")}this.focus.styleRow(inRow);this.edit.styleRow(inRow)},onKeyDown:function(f){if(f.altKey||f.ctrlKey||f.metaKey){return}var b=dojo.keys;switch(f.keyCode){case b.ESCAPE:this.edit.cancel();break;case b.ENTER:if(!f.shiftKey){var a=this.edit.isEditing();this.edit.apply();if(!a){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);f.rowIndex=dojo.clone(this.focus.rowIndex);f.cellIndex=dojo.clone(this.focus.cell.fieldIndex);this._click[0]=this._click[1];this._click[1]=f;this.onRowClick(f)}}break;case b.TAB:this.focus[f.shiftKey?"previousKey":"nextKey"](f);break;case b.LEFT_ARROW:case b.RIGHT_ARROW:if(!this.edit.isEditing()){dojo.stopEvent(f);var g=(f.keyCode==b.LEFT_ARROW)?1:-1;if(dojo._isBodyLtr()){g*=-1}this.focus.move(0,g)}break;case b.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!=0){dojo.stopEvent(f);this.focus.move(-1,0)}break;case b.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.model.count){dojo.stopEvent(f);this.focus.move(1,0)}break;case b.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!=0){dojo.stopEvent(f);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0)}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)}}break;case b.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.model.count){dojo.stopEvent(f);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0)}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0)}}break}},onMouseOver:function(a){a.rowIndex==-1?this.onHeaderCellMouseOver(a):this.onCellMouseOver(a)},onMouseOut:function(a){a.rowIndex==-1?this.onHeaderCellMouseOut(a):this.onCellMouseOut(a)},onMouseDown:function(a){a.rowIndex==-1?this.onHeaderCellMouseDown(a):this.onCellMouseDown(a)},onMouseOverRow:function(a){if(!this.rows.isOver(a.rowIndex)){this.rows.setOverRow(a.rowIndex);a.rowIndex==-1?this.onHeaderMouseOver(a):this.onRowMouseOver(a)}},onMouseOutRow:function(a){if(this.rows.isOver(-1)){this.onHeaderMouseOut(a)}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(a)}}},onMouseDownRow:function(a){if(a.rowIndex!=-1){this.onRowMouseDown(a)}},onCellMouseOver:function(a){dojo.addClass(a.cellNode,this.cellOverClass)},onCellMouseOut:function(a){dojo.removeClass(a.cellNode,this.cellOverClass)},onCellMouseDown:function(a){},onCellClick:function(a){this._click[0]=this._click[1];this._click[1]=a;if(!this.edit.isEditCell(a.rowIndex,a.cellIndex)){this.focus.setFocusCell(a.cell,a.rowIndex)}this.onRowClick(a)},onCellDblClick:function(a){if(dojo.isIE){this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex)}else{if(this._click[0].rowIndex!=this._click[1].rowIndex){this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex)}else{this.edit.setEditCell(a.cell,a.rowIndex)}}this.onRowDblClick(a)},onCellContextMenu:function(a){this.onRowContextMenu(a)},onCellFocus:function(a,b){this.edit.cellFocus(a,b)},onRowClick:function(a){this.edit.rowClick(a);this.selection.clickSelectEvent(a)},onRowDblClick:function(a){},onRowMouseOver:function(a){},onRowMouseOut:function(a){},onRowMouseDown:function(a){},onRowContextMenu:function(a){dojo.stopEvent(a)},onHeaderMouseOver:function(a){},onHeaderMouseOut:function(a){},onHeaderCellMouseOver:function(a){dojo.addClass(a.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(a){dojo.removeClass(a.cellNode,this.cellOverClass)},onHeaderCellMouseDown:function(a){},onHeaderClick:function(a){},onHeaderCellClick:function(a){this.setSortIndex(a.cell.index);this.onHeaderClick(a)},onHeaderDblClick:function(a){},onHeaderCellDblClick:function(a){this.onHeaderDblClick(a)},onHeaderCellContextMenu:function(a){this.onHeaderContextMenu(a)},onHeaderContextMenu:function(a){dojo.stopEvent(a)},onStartEdit:function(a,b){},onApplyCellEdit:function(a,f,b){},onCancelEdit:function(a){},onApplyEdit:function(a){},onCanSelect:function(a){return true},onCanDeselect:function(a){return true},onSelected:function(a){this.updateRowStyles(a)},onDeselected:function(a){this.updateRowStyles(a)},onSelectionChanged:function(){}}}if(!dojo._hasResource["dojox.grid.VirtualGrid"]){dojo._hasResource["dojox.grid.VirtualGrid"]=true;dojo.provide("dojox.grid.VirtualGrid");dojo.declare("dojox.VirtualGrid",[dijit._Widget,dijit._Templated],{templateString:'<div class="dojoxGrid" hidefocus="hidefocus" role="wairole:grid">\n\t<div class="dojoxGrid-master-header" dojoAttachPoint="viewsHeaderNode"></div>\n\t<div class="dojoxGrid-master-view" dojoAttachPoint="viewsNode"></div>\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\n</div>\n',classTag:"dojoxGrid",get:function(a){},rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,autoHeight:false,autoRender:true,defaultHeight:"15em",structure:"",elasticView:-1,singleClickEdit:false,_click:null,sortInfo:0,themeable:true,buildRendering:function(){this.inherited(arguments);if(this.get==dojox.VirtualGrid.prototype.get){this.get=null}if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0"}this.createScroller();this.createLayout();this.createViews();this.createManagers();dojox.grid.initTextSizePoll();this.connect(dojox.grid,"textSizeChanged","textSizeChanged");dojox.grid.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.keyEvents);this.connect(this,"onShow","renderOnIdle")},postCreate:function(){this.styleChanged=this._styleChanged;this.setStructure(this.structure);this._click=[]},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.edit.destroy();this.views.destroyViews();this.inherited(arguments)},styleChanged:function(){this.setStyledClass(this.domNode,"")},_styleChanged:function(){this.styleChanged();this.update()},textSizeChanged:function(){setTimeout(dojo.hitch(this,"_textSizeChanged"),1)},_textSizeChanged:function(){if(this.domNode){this.views.forEach(function(a){a.content.update()});this.render()}},sizeChange:function(){dojox.grid.jobs.job(this.id+"SizeChange",50,dojo.hitch(this,"update"))},renderOnIdle:function(){setTimeout(dojo.hitch(this,"render"),1)},createManagers:function(){this.rows=new dojox.grid.rows(this);this.focus=new dojox.grid.focus(this);this.selection=new dojox.grid.selection(this);this.edit=new dojox.grid.edit(this)},createScroller:function(){this.scroller=new dojox.grid.scroller.columns();this.scroller._pageIdPrefix=this.id+"-";this.scroller.renderRow=dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved")},createLayout:function(){this.layout=new dojox.grid.layout(this)},createViews:function(){this.views=new dojox.grid.views(this);this.views.createView=dojo.hitch(this,"createView")},createView:function(inClass){if(dojo.isAIR){var obj=window;var names=inClass.split(".");for(var i=0;i<names.length;i++){if(typeof obj[names[i]]=="undefined"){var undefstring=names[0];for(var j=1;j<=i;j++){undefstring+="."+names[j]}throw new Error(undefstring+" is undefined")}obj=obj[names[i]]}var c=obj}else{var c=eval(inClass)}var view=new c({grid:this});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);return view},buildViews:function(){for(var a=0,b;(b=this.layout.structure[a]);a++){this.createView(b.type||dojox._scopeName+".GridView").setStructure(b)}this.scroller.setContentNodes(this.views.getContentNodes())},setStructure:function(a){this.views.destroyViews();this.structure=a;if((this.structure)&&(dojo.isString(this.structure))){this.structure=dojox.grid.getProp(this.structure)}if(!this.structure){this.structure=window.layout}if(!this.structure){return}this.layout.setStructure(this.structure);this._structureChanged()},_structureChanged:function(){this.buildViews();if(this.autoRender){this.render()}},hasLayout:function(){return this.layout.cells.length},resize:function(a){this._sizeBox=a;this._resize();this.sizeChange()},_getPadBorder:function(){this._padBorder=this._padBorder||dojo._getPadBorderExtents(this.domNode);return this._padBorder},_resize:function(){if(this.domNode==null){return}if(!this.domNode.parentNode||this.domNode.parentNode.nodeType!=1||!this.hasLayout()){return}var b=this._getPadBorder();if(this.autoHeight){this.domNode.style.height="auto";this.viewsNode.style.height=""}else{if(this.flex>0){}else{if(this.domNode.clientHeight<=b.h){if(this.domNode.parentNode==document.body){this.domNode.style.height=this.defaultHeight}else{this.fitTo="parent"}}}}if(this._sizeBox){dojo.contentBox(this.domNode,this._sizeBox)}else{if(this.fitTo=="parent"){var a=dojo._getContentBox(this.domNode.parentNode).h;dojo.marginBox(this.domNode,{h:Math.max(0,a)})}}var a=dojo._getContentBox(this.domNode).h;if(a==0&&!this.autoHeight){this.viewsHeaderNode.style.display="none"}else{this.viewsHeaderNode.style.display="block"}this.adaptWidth();this.adaptHeight();this.scroller.defaultRowHeight=this.rows.getDefaultHeightPx()+1;this.postresize()},adaptWidth:function(){var a=this.autoWidth?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w);vw=this.views.arrange(1,a);this.views.onEach("adaptWidth");if(this.autoWidth){this.domNode.style.width=vw+"px"}},adaptHeight:function(){var f=this.viewsHeaderNode.style,a=f.display=="none"?0:this.views.measureHeader();f.height=a+"px";this.views.normalizeHeaderNodeHeight();var b=(this.autoHeight?-1:Math.max(this.domNode.clientHeight-a,0)||0);this.views.onEach("setSize",[0,b]);this.views.onEach("adaptHeight");this.scroller.windowHeight=b},render:function(){if(!this.domNode){return}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return}this.update=this.defaultUpdate;this.scroller.init(this.rowCount,this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this.autoHeight?0:this.constructor.prototype.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,false)},postresize:function(){if(this.autoHeight){this.viewsNode.style.height=this.views.measureContent()+"px"}},renderRow:function(b,a){this.views.renderRow(b,a)},rowRemoved:function(a){this.views.rowRemoved(a)},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true},endUpdate:function(){this.updating=false;var a=this.invalidated;if(a==null){return}if(a.all){this.update()}else{if(a.rowCount!=undefined){this.updateRowCount(a.rowCount)}else{for(r in a){this.updateRow(Number(r))}}}this.invalidated=null},defaultUpdate:function(){if(!this.domNode){return}if(this.updating){this.invalidated.all=true;return}this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.scrollTop);this.postrender()},update:function(){this.render()},updateRow:function(a){a=Number(a);if(this.updating){this.invalidated[a]=true}else{this.views.updateRow(a,this.rows.getHeight(a));this.scroller.rowHeightChanged(a)}},updateRowCount:function(a){if(this.updating){this.invalidated.rowCount=a}else{this.rowCount=a;if(this.layout.cells.length){this.scroller.updateRowCount(a);this.setScrollTop(this.scrollTop)}this._resize()}},updateRowStyles:function(a){this.views.updateRowStyles(a)},rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(dojo.isIE?100:50),scrollTo:function(a){if(!this.fastScroll){this.setScrollTop(a);return}var b=Math.abs(this.lastScrollTop-a);this.lastScrollTop=a;if(b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=a;this.views.setScrollTop(a);dojox.grid.jobs.job("dojoxGrid-scroll",200,dojo.hitch(this,"finishScrollJob"))}else{this.setScrollTop(a)}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scrollTop=this.views.setScrollTop(a);this.scroller.scroll(this.scrollTop)},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(b,a){if(a){this.rows.styleRowNode(b,a)}},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(b,a){this.getCell(b).unitWidth=a},getCellName:function(a){return"Cell "+a.index},canSort:function(a){},sort:function(){},getSortAsc:function(a){a=a==undefined?this.sortInfo:a;return Boolean(a>0)},getSortIndex:function(a){a=a==undefined?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(f,b){var a=f+1;if(b!=undefined){a*=(b?1:-1)}else{if(this.getSortIndex()==f){a=-this.sortInfo}}this.setSortInfo(a)},setSortInfo:function(a){if(this.canSort(a)){this.sortInfo=a;this.sort();this.update()}},doKeyEvent:function(a){a.dispatch="do"+a.type;this.onKeyEvent(a)},_dispatch:function(a,b){if(a in this){return this[a](b)}},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){if(a.cellNode){this.onCellClick(a)}else{this.onRowClick(a)}},dodblclick:function(a){if(a.cellNode){this.onCellDblClick(a)}else{this.onRowDblClick(a)}},docontextmenu:function(a){if(a.cellNode){this.onCellContextMenu(a)}else{this.onRowContextMenu(a)}},doheaderclick:function(a){if(a.cellNode){this.onHeaderCellClick(a)}else{this.onHeaderClick(a)}},doheaderdblclick:function(a){if(a.cellNode){this.onHeaderCellDblClick(a)}else{this.onHeaderDblClick(a)}},doheadercontextmenu:function(a){if(a.cellNode){this.onHeaderCellContextMenu(a)}else{this.onHeaderContextMenu(a)}},doStartEdit:function(a,b){this.onStartEdit(a,b)},doApplyCellEdit:function(a,f,b){this.onApplyCellEdit(a,f,b)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},addRow:function(){this.updateRowCount(this.rowCount+1)},removeSelectedRows:function(){this.updateRowCount(Math.max(0,this.rowCount-this.selection.getSelected().length));this.selection.clear()}});dojo.mixin(dojox.VirtualGrid.prototype,dojox.grid.publicEvents)}if(!dojo._hasResource["dojox.grid._data.editors"]){dojo._hasResource["dojox.grid._data.editors"]=true;dojo.provide("dojox.grid._data.editors");dojo.provide("dojox.grid.editors");dojo.declare("dojox.grid.editors.Base",null,{constructor:function(a){this.cell=a},_valueProp:"value",_formatPending:false,format:function(b,a){},needFormatNode:function(b,a){this._formatPending=true;dojox.grid.whenIdle(this,"_formatNode",b,a)},cancelFormatNode:function(){this._formatPending=false},_formatNode:function(b,a){if(this._formatPending){this._formatPending=false;dojo.setSelectable(this.cell.grid.domNode,true);this.formatNode(this.getNode(a),b,a)}},getNode:function(a){return(this.cell.getNode(a)||0).firstChild||0},formatNode:function(f,b,a){if(dojo.isIE){dojox.grid.whenIdle(this,"focus",a,f)}else{this.focus(a,f)}},dispatchEvent:function(a,b){if(a in this){return this[a](b)}},getValue:function(a){return this.getNode(a)[this._valueProp]},setValue:function(b,a){var f=this.getNode(b);if(f){f[this._valueProp]=a}},focus:function(a,b){dojox.grid.focusSelectNode(b||this.getNode(a))},save:function(a){this.value=this.value||this.getValue(a)},restore:function(a){this.setValue(a,this.value)},_finish:function(a){dojo.setSelectable(this.cell.grid.domNode,false);this.cancelFormatNode(this.cell)},apply:function(a){this.cell.applyEdit(this.getValue(a),a);this._finish(a)},cancel:function(a){this.cell.cancelEdit(a);this._finish(a)}});dojox.grid.editors.base=dojox.grid.editors.Base;dojo.declare("dojox.grid.editors.Input",dojox.grid.editors.Base,{constructor:function(a){this.keyFilter=this.keyFilter||this.cell.keyFilter},keyFilter:null,format:function(b,a){this.needFormatNode(b,a);return'<input class="dojoxGrid-input" type="text" value="'+b+'">'},formatNode:function(f,b,a){this.inherited(arguments);this.cell.registerOnBlur(f,a)},doKey:function(b){if(this.keyFilter){var a=String.fromCharCode(b.charCode);if(a.search(this.keyFilter)==-1){dojo.stopEvent(b)}}},_finish:function(b){this.inherited(arguments);var f=this.getNode(b);try{dojox.grid.fire(f,"blur")}catch(a){}}});dojox.grid.editors.input=dojox.grid.editors.Input;dojo.declare("dojox.grid.editors.Select",dojox.grid.editors.Input,{constructor:function(a){this.options=this.options||this.cell.options;this.values=this.values||this.cell.values||this.options},format:function(m,l){this.needFormatNode(m,l);var f=['<select class="dojoxGrid-select">'];for(var b=0,g,a;((g=this.options[b])!==undefined)&&((a=this.values[b])!==undefined);b++){f.push("<option",(m==a?" selected":""),' value="'+a+'"',">",g,"</option>")}f.push("</select>");return f.join("")},getValue:function(f){var g=this.getNode(f);if(g){var a=g.selectedIndex,b=g.options[a];return this.cell.returnIndex?a:b.value||b.innerHTML}},doclick:function(b){try{var f=b.rowIndex;if(dojo.isIE){if(b.target.tagName=="SELECT"){var a=this.cell.grid.model;a.data[b.rowIndex][this.cell.field]=this.getValue(f)}}else{if(b.target.tagName=="OPTION"){var a=this.cell.grid.model;a.data[b.rowIndex][this.cell.field]=this.getValue(f)}}}catch(b){console.error("exception in editors.Select doclick",b)}}});dojox.grid.editors.select=dojox.grid.editors.Select;dojo.declare("dojox.grid.editors.AlwaysOn",dojox.grid.editors.Input,{alwaysOn:true,_formatNode:function(b,a){this.formatNode(this.getNode(a),b,a)},applyStaticValue:function(b){var a=this.cell.grid.edit;a.applyCellEdit(this.getValue(b),this.cell,b);a.start(this.cell,b,true)}});dojox.grid.editors.alwaysOn=dojox.grid.editors.AlwaysOn;dojo.declare("dojox.grid.editors.Bool",dojox.grid.editors.AlwaysOn,{_valueProp:"checked",format:function(b,a){return'<input class="dojoxGrid-input" type="checkbox"'+(b?' checked="checked"':"")+' style="width: auto" />'},doclick:function(a){if(a.target.tagName=="INPUT"){this.applyStaticValue(a.rowIndex)}}});dojox.grid.editors.bool=dojox.grid.editors.Bool}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(b,f,o){o=dojo.i18n.normalizeLocale(o);var a=o.split("-");var g=[b,"nls",f].join(".");var q=dojo._loadedModules[g];if(q){var p;for(var h=a.length;h>0;h--){var m=a.slice(0,h).join("_");if(q[m]){p=q[m];break}}if(!p){p=q.ROOT}if(p){var l=function(){};l.prototype=p;return new l()}}throw new Error("Bundle not found: "+f+" in "+b+" , locale="+o)};dojo.i18n.normalizeLocale=function(b){var a=b?b.toLowerCase():dojo.locale;if(a=="root"){a="ROOT"}return a};dojo.i18n._requireLocalization=function(a,b,x,s){var o=dojo.i18n.normalizeLocale(x);var h=[a,"nls",b].join(".");var g="";if(s){var w=s.split(",");for(var p=0;p<w.length;p++){if(o.indexOf(w[p])==0){if(w[p].length>g.length){g=w[p]}}}if(!g){g="ROOT"}}var u=s?g:o;var z=dojo._loadedModules[h];var f=null;if(z){if(dojo.config.localizationComplete&&z._built){return}var m=u.replace(/-/g,"_");var v=h+"."+m;f=dojo._loadedModules[v]}if(!f){z=dojo.provide(h);var l=dojo._getModuleSymbols(a);var q=l.concat("nls").join("/");var y;dojo.i18n._searchLocalePath(u,s,function(E){var F=E.replace(/-/g,"_");var D=h+"."+F;var B=false;if(!dojo._loadedModules[D]){dojo.provide(D);var C=[q];if(E!="ROOT"){C.push(E)}C.push(b);var A=C.join("/")+".js";B=dojo._loadPath(A,null,function(I){var H=function(){};H.prototype=y;z[F]=new H();for(var G in I){z[F][G]=I[G]}})}else{B=true}if(B&&z[F]){y=z[F]}else{z[F]=y}if(s){return true}})}if(s&&o!=g){z[o.replace(/-/g,"_")]=z[g.replace(/-/g,"_")]}};(function(){var a=dojo.config.extraLocale;if(a){if(!a instanceof Array){a=[a]}var b=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(h,g,f,o){b(h,g,f,o);if(f){return}for(var l=0;l<a.length;l++){b(h,g,a[l],o)}}}})();dojo.i18n._searchLocalePath=function(o,p,f){o=dojo.i18n.normalizeLocale(o);var a=o.split("-");var b=[];for(var h=a.length;h>0;h--){b.push(a.slice(0,h).join("-"))}b.push(false);if(p){b.reverse()}for(var g=b.length-1;g>=0;g--){var l=b[g]||"ROOT";var m=f(l);if(m){break}}};dojo.i18n._preloadLocalizations=function(h,b){function f(l){l=dojo.i18n.normalizeLocale(l);dojo.i18n._searchLocalePath(l,true,function(o){for(var m=0;m<b.length;m++){if(b[m]==o){dojo.require(h+"_"+o);return true}}return false})}f();var a=dojo.config.extraLocale||[];for(var g=0;g<a.length;g++){f(a[g])}}}if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.cldr.supplemental.getFirstDayOfWeek=function(a){var b={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,lb:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,tn:6,ye:6,as:0,au:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,ie:0,il:0,is:0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,za:0,zw:0,et:0,mw:0,ng:0,tj:0,sy:4};var f=dojo.cldr.supplemental._region(a);var g=b[f];return(g===undefined)?1:g};dojo.cldr.supplemental._region=function(a){a=dojo.i18n.normalizeLocale(a);var b=a.split("-");var f=b[1];if(!f){f={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[b[0]]}else{if(f.length==4){f=b[2]}}return f};dojo.cldr.supplemental.getWeekend=function(b){var g={eg:5,il:5,sy:5,"in":0,ae:4,bh:4,dz:4,iq:4,jo:4,kw:4,lb:4,ly:4,ma:4,om:4,qa:4,sa:4,sd:4,tn:4,ye:4};var a={ae:5,bh:5,dz:5,iq:5,jo:5,kw:5,lb:5,ly:5,ma:5,om:5,qa:5,sa:5,sd:5,tn:5,ye:5,af:5,ir:5,eg:6,il:6,sy:6};var h=dojo.cldr.supplemental._region(b);var l=g[h];var f=a[h];if(l===undefined){l=6}if(f===undefined){f=0}return{start:l,end:f}}}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(a){var b=a.getMonth();var f=[31,28,31,30,31,30,31,31,30,31,30,31];if(b==1&&dojo.date.isLeapYear(a)){return 29}return f[b]};dojo.date.isLeapYear=function(b){var a=b.getFullYear();return !(a%400)||(!(a%4)&&!!(a%100))};dojo.date.getTimezoneName=function(f){var g=f.toString();var l="";var b;var h=g.indexOf("(");if(h>-1){l=g.substring(++h,g.indexOf(")"))}else{var a=/([A-Z\/]+) \d{4}$/;if((b=g.match(a))){l=b[1]}else{g=f.toLocaleString();a=/ ([A-Z\/]+)$/;if((b=g.match(a))){l=b[1]}}}return(l=="AM"||l=="PM")?"":l};dojo.date.compare=function(f,b,a){f=new Date(Number(f));b=new Date(Number(b||new Date()));if(a!=="undefined"){if(a=="date"){f.setHours(0,0,0,0);b.setHours(0,0,0,0)}else{if(a=="time"){f.setFullYear(0,0,0);b.setFullYear(0,0,0)}}}if(f>b){return 1}if(f<b){return -1}return 0};dojo.date.add=function(g,f,h){var m=new Date(Number(g));var b=false;var s="Date";switch(f){case"day":break;case"weekday":var u,a;var q=h%5;if(!q){u=(h>0)?5:-5;a=(h>0)?((h-5)/5):((h+5)/5)}else{u=q;a=parseInt(h/5)}var l=g.getDay();var p=0;if(l==6&&h>0){p=1}else{if(l==0&&h<0){p=-1}}var o=l+u;if(o==0||o==6){p=(h>0)?2:-2}h=(7*a)+u+p;break;case"year":s="FullYear";b=true;break;case"week":h*=7;break;case"quarter":h*=3;case"month":b=true;s="Month";break;case"hour":case"minute":case"second":case"millisecond":s="UTC"+f.charAt(0).toUpperCase()+f.substring(1)+"s"}if(s){m["set"+s](m["get"+s]()+h)}if(b&&(m.getDate()<g.getDate())){m.setDate(0)}return m};dojo.date.difference=function(y,w,g){w=w||new Date();g=g||"day";var f=w.getFullYear()-y.getFullYear();var u=1;switch(g){case"quarter":var z=y.getMonth();var x=w.getMonth();var p=Math.floor(z/3)+1;var o=Math.floor(x/3)+1;o+=(f*4);u=o-p;break;case"weekday":var v=Math.round(dojo.date.difference(y,w,"day"));var a=parseInt(dojo.date.difference(y,w,"week"));var s=v%7;if(s==0){v=a*5}else{var q=0;var m=y.getDay();var h=w.getDay();a=parseInt(v/7);s=v%7;var l=new Date(y);l.setDate(l.getDate()+(a*7));var b=l.getDay();if(v>0){switch(true){case m==6:q=-1;break;case m==0:q=0;break;case h==6:q=-1;break;case h==0:q=-2;break;case (b+s)>5:q=-2}}else{if(v<0){switch(true){case m==6:q=0;break;case m==0:q=1;break;case h==6:q=2;break;case h==0:q=1;break;case (b+s)<0:q=2}}}v+=q;v-=(a*2)}u=v;break;case"year":u=f;break;case"month":u=(w.getMonth()-y.getMonth())+(f*12);break;case"week":u=parseInt(dojo.date.difference(y,w,"day")/7);break;case"day":u/=24;case"hour":u/=60;case"minute":u/=60;case"second":u/=1000;case"millisecond":u*=w.getTime()-y.getTime()}return Math.round(u)}}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(b,a){return b.replace(/([\.$?*!=:|{}\(\)\[\]\\\/^])/g,function(f){if(a&&a.indexOf(f)!=-1){return f}return"\\"+f})};dojo.regexp.buildGroupRE=function(f,l,h){if(!(f instanceof Array)){return l(f)}var a=[];for(var g=0;g<f.length;g++){a.push(l(f[g]))}return dojo.regexp.group(a.join("|"),h)};dojo.regexp.group=function(b,a){return"("+(a?"?:":"")+b+")"}}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");(function(){function b(l,h,g,m){return m.replace(/([a-z])\1*/ig,function(x){var B,G;var J=x.charAt(0);var D=x.length;var E=["abbr","wide","narrow"];switch(J){case"G":B=h[(D<4)?"eraAbbr":"eraNames"][l.getFullYear()<0?0:1];break;case"y":B=l.getFullYear();switch(D){case 1:break;case 2:if(!g){B=String(B);B=B.substr(B.length-2);break}default:G=true}break;case"Q":case"q":B=Math.ceil((l.getMonth()+1)/3);G=true;break;case"M":case"L":var C=l.getMonth();var q;switch(D){case 1:case 2:B=C+1;G=true;break;case 3:case 4:case 5:q=E[D-3];break}if(q){var v=(J=="L")?"standalone":"format";var K=["months",v,q].join("-");B=h[K][C]}break;case"w":var z=0;B=dojo.date.locale._getWeekOfYear(l,z);G=true;break;case"d":B=l.getDate();G=true;break;case"D":B=dojo.date.locale._getDayOfYear(l);G=true;break;case"E":case"e":case"c":var H=l.getDay();var y;switch(D){case 1:case 2:if(J=="e"){var w=dojo.cldr.supplemental.getFirstDayOfWeek(options.locale);H=(H-w+7)%7}if(J!="c"){B=H+1;G=true;break}case 3:case 4:case 5:y=E[D-3];break}if(y){var A=(J=="c")?"standalone":"format";var p=["days",A,y].join("-");B=h[p][H]}break;case"a":var o=(l.getHours()<12)?"am":"pm";B=h[o];break;case"h":case"H":case"K":case"k":var F=l.getHours();switch(J){case"h":B=(F%12)||12;break;case"H":B=F;break;case"K":B=(F%12);break;case"k":B=F||24;break}G=true;break;case"m":B=l.getMinutes();G=true;break;case"s":B=l.getSeconds();G=true;break;case"S":B=Math.round(l.getMilliseconds()*Math.pow(10,D-3));G=true;break;case"v":case"z":B=dojo.date.getTimezoneName(l);if(dojo.isFF>0&&(D>0&&D<4)){if(B.match(/^([A-Z])\w+\s+([A-Z])\w+\s+([A-Z])\w+$/)){B=RegExp.$1+RegExp.$2+RegExp.$3}}if(B){break}D=4;case"Z":var u=l.getTimezoneOffset();var I=[(u<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(u)/60),2),dojo.string.pad(Math.abs(u)%60,2)];if(D==4){I.splice(0,0,"GMT");I.splice(3,0,":")}B=I.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+m)}if(G){B=dojo.string.pad(B,D)}return B})}dojo.date.locale.format=function(l,u){u=u||{};var p=dojo.i18n.normalizeLocale(u.locale);var v=u.formatLength||"short";var w=dojo.date.locale._getGregorianBundle(p);var m=[];var h=dojo.hitch(this,b,l,w,u.fullYear);if(u.selector=="year"){var o=l.getFullYear();if(p.match(/^zh|^ja/)){o+="\u5E74"}return o}if(u.selector!="time"){var g=u.datePattern||w["dateFormat-"+v];if(g){m.push(f(g,h))}}if(u.selector!="date"){var s=u.timePattern||w["timeFormat-"+v];if(s){m.push(f(s,h))}}var q=m.join(" ");return q};dojo.date.locale.regexp=function(g){return dojo.date.locale._parseInfo(g).regexp};dojo.date.locale._parseInfo=function(p){p=p||{};var m=dojo.i18n.normalizeLocale(p.locale);var s=dojo.date.locale._getGregorianBundle(m);var q=p.formatLength||"short";var g=p.datePattern||s["dateFormat-"+q];var u=p.timePattern||s["timeFormat-"+q];var h;if(p.selector=="date"){h=g}else{if(p.selector=="time"){h=u}else{h=g+" "+u}}var l=[];var o=f(h,dojo.hitch(this,a,l,s,p));return{regexp:o,tokens:l,bundle:s}};dojo.date.locale.parse=function(u,y){var h=dojo.date.locale._parseInfo(y);var p=h.tokens,z=h.bundle;var w=new RegExp("^"+h.regexp+"$");var m=w.exec(u);if(!m){return null}var l=["abbr","wide","narrow"];var x=[1970,0,1,0,0,0,0];var s="";var g=dojo.every(m,function(L,G){if(!G){return true}var D=p[G-1];var E=D.length;switch(D.charAt(0)){case"y":if(E!=2&&y.strict){x[0]=L}else{if(L<100){L=Number(L);var K=""+new Date().getFullYear();var F=K.substring(0,2)*100;var B=Math.min(Number(K.substring(2,4))+20,99);var H=(L<B)?F+L:F-100+L;x[0]=H}else{if(y.strict){return false}x[0]=L}}break;case"M":if(E>2){var A=z["months-format-"+l[E-3]].concat();if(!y.strict){L=L.replace(".","").toLowerCase();A=dojo.map(A,function(N){return N.replace(".","").toLowerCase()})}L=dojo.indexOf(A,L);if(L==-1){return false}}else{L--}x[1]=L;break;case"E":case"e":var M=z["days-format-"+l[E-3]].concat();if(!y.strict){L=L.toLowerCase();M=dojo.map(M,function(N){return N.toLowerCase()})}L=dojo.indexOf(M,L);if(L==-1){return false}break;case"D":x[1]=0;case"d":x[2]=L;break;case"a":var I=y.am||z.am;var C=y.pm||z.pm;if(!y.strict){var J=/\./g;L=L.replace(J,"").toLowerCase();I=I.replace(J,"").toLowerCase();C=C.replace(J,"").toLowerCase()}if(y.strict&&L!=I&&L!=C){return false}s=(L==C)?"p":(L==I)?"a":"";break;case"K":if(L==24){L=0}case"h":case"H":case"k":if(L>23){return false}x[3]=L;break;case"m":x[4]=L;break;case"s":x[5]=L;break;case"S":x[6]=L}return true});var q=+x[3];if(s==="p"&&q<12){x[3]=q+12}else{if(s==="a"&&q==12){x[3]=0}}var o=new Date(x[0],x[1],x[2],x[3],x[4],x[5],x[6]);if(y.strict){o.setFullYear(x[0])}var v=p.join("");if(!g||(v.indexOf("M")!=-1&&o.getMonth()!=x[1])||(v.indexOf("d")!=-1&&o.getDate()!=x[2])){return null}return o};function f(o,g,q,m){var h=function(s){return s};g=g||h;q=q||h;m=m||h;var p=o.match(/(''|[^'])+/g);var l=false;dojo.forEach(p,function(s,u){if(!s){p[u]=""}else{p[u]=(l?q:g)(s);l=!l}});return m(p.join(""))}function a(m,g,h,l){l=dojo.regexp.escapeString(l);if(!h.strict){l=l.replace(" a"," ?a")}return l.replace(/([a-z])\1*/ig,function(p){var u;var y=p.charAt(0);var o=p.length;var x="",w="";if(h.strict){if(o>1){x="0{"+(o-1)+"}"}if(o>2){w="0{"+(o-2)+"}"}}else{x="0?";w="0{0,2}"}switch(y){case"y":u="\\d{2,4}";break;case"M":u=(o>2)?"\\S+":x+"[1-9]|1[0-2]";break;case"D":u=x+"[1-9]|"+w+"[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6]";break;case"d":u=x+"[1-9]|[12]\\d|3[01]";break;case"w":u=x+"[1-9]|[1-4][0-9]|5[0-3]";break;case"E":u="\\S+";break;case"h":u=x+"[1-9]|1[0-2]";break;case"k":u=x+"\\d|1[01]";break;case"H":u=x+"\\d|1\\d|2[0-3]";break;case"K":u=x+"[1-9]|1\\d|2[0-4]";break;case"m":case"s":u="[0-5]\\d";break;case"S":u="\\d{"+o+"}";break;case"a":var v=h.am||g.am||"AM";var q=h.pm||g.pm||"PM";if(h.strict){u=v+"|"+q}else{u=v+"|"+q;if(v!=v.toLowerCase()){u+="|"+v.toLowerCase()}if(q!=q.toLowerCase()){u+="|"+q.toLowerCase()}}break;default:u=".*"}if(m){m.push(p)}return"("+u+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}})();(function(){var a=[];dojo.date.locale.addCustomFormats=function(b,f){a.push({pkg:b,name:f})};dojo.date.locale._getGregorianBundle=function(b){var f={};dojo.forEach(a,function(h){var g=dojo.i18n.getLocalization(h.pkg,h.name,b);f=dojo.mixin(f,g)},this);return f}})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(l,h,b,a){var f;var m=dojo.date.locale._getGregorianBundle(a);var g=[l,b,h];if(b=="standAlone"){f=m[g.join("-")]}g[1]="format";return(f||m[g.join("-")]).concat()};dojo.date.locale.isWeekend=function(g,a){var f=dojo.cldr.supplemental.getWeekend(a);var b=(g||new Date()).getDay();if(f.end<f.start){f.end+=7;if(b<f.start){b+=7}}return b>=f.start&&b<=f.end};dojo.date.locale._getDayOfYear=function(a){return dojo.date.difference(new Date(a.getFullYear(),0,1),a)+1};dojo.date.locale._getWeekOfYear=function(h,b){if(arguments.length==1){b=0}var f=new Date(h.getFullYear(),0,1).getDay();var a=(f-b+7)%7;var g=Math.floor((dojo.date.locale._getDayOfYear(h)+a-1)/7);if(f==b){g++}return g}}if(!dojo._hasResource["dijit._Calendar"]){dojo._hasResource["dijit._Calendar"]=true;dojo.provide("dijit._Calendar");dojo.declare("dijit._Calendar",[dijit._Widget,dijit._Templated],{templateString:'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset\' dojoAttachPoint="decrementMonth">\n\t\t\t\t<div class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease"><span dojoAttachPoint="decreaseArrowNode" class="dijitA11ySideArrow dijitCalendarIncrementControl dijitCalendarDecreaseInner">-</span></div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5">\n\t\t\t\t<div dojoAttachPoint="monthLabelSpacer" class="dijitCalendarMonthLabelSpacer"></div>\n\t\t\t\t<div dojoAttachPoint="monthLabelNode" class="dijitCalendarMonthLabel"></div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' dojoAttachPoint="incrementMonth">\n\t\t\t\t<div class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease"><span dojoAttachPoint="increaseArrowNode" class="dijitA11ySideArrow dijitCalendarIncrementControl dijitCalendarIncreaseInner">+</span></div>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class="dijitReset dijitCalendarDayLabelTemplate"><span class="dijitCalendarDayLabel"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent="onclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n\t\t<tr class="dijitReset dijitCalendarWeekTemplate">\n\t\t\t<td class="dijitReset dijitCalendarDateTemplate"><span class="dijitCalendarDateLabel"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7">\n\t\t\t\t<h3 class="dijitCalendarYearLabel">\n\t\t\t\t\t<span dojoAttachPoint="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear"></span>\n\t\t\t\t\t<span dojoAttachPoint="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear"></span>\n\t\t\t\t\t<span dojoAttachPoint="nextYearLabelNode" class="dijitInline dijitCalendarNextYear"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\t\n',value:new Date(),dayWidth:"narrow",setValue:function(a){if(!this.value||dojo.date.compare(a,this.value)){a=new Date(a);this.displayMonth=new Date(a);if(!this.isDisabledDate(a,this.lang)){this.value=a;this.value.setHours(0,0,0,0);this.onChange(this.value)}this._populateGrid()}},_setText:function(a,b){while(a.firstChild){a.removeChild(a.firstChild)}a.appendChild(dojo.doc.createTextNode(b))},_populateGrid:function(){var l=this.displayMonth;l.setDate(1);var a=l.getDay();var b=dojo.date.getDaysInMonth(l);var q=dojo.date.getDaysInMonth(dojo.date.add(l,"month",-1));var o=new Date();var f=this.value;var u=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(u>a){u-=7}dojo.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(A,z){z+=u;var y=new Date(l);var B,x="dijitCalendar",v=0;if(z<a){B=q-a+z+1;v=-1;x+="Previous"}else{if(z>=(a+b)){B=z-a-b+1;v=1;x+="Next"}else{B=z-a+1;x+="Current"}}if(v){y=dojo.date.add(y,"month",v)}y.setDate(B);if(!dojo.date.compare(y,o,"date")){x="dijitCalendarCurrentDate "+x}if(!dojo.date.compare(y,f,"date")){x="dijitCalendarSelectedDate "+x}if(this.isDisabledDate(y,this.lang)){x="dijitCalendarDisabledDate "+x}var C=this.getClassForDate(y,this.lang);if(C){x+=C+" "+x}A.className=x+"Month dijitCalendarDateTemplate";A.dijitDateValue=y.valueOf();var w=dojo.query(".dijitCalendarDateLabel",A)[0];this._setText(w,y.getDate())},this);var g=dojo.date.locale.getNames("months","wide","standAlone",this.lang);this._setText(this.monthLabelNode,g[l.getMonth()]);var p=l.getFullYear()-1;var m=new Date();dojo.forEach(["previous","current","next"],function(v){m.setFullYear(p++);this._setText(this[v+"YearLabelNode"],dojo.date.locale.format(m,{selector:"year",locale:this.lang}))},this);var h=this;var s=function(w,x,v){dijit.typematic.addMouseListener(h[w],h,function(y){if(y>=0){h._adjustDisplay(x,v)}},0.8,500)};s("incrementMonth","month",1);s("decrementMonth","month",-1);s("nextYearLabelNode","year",1);s("previousYearLabelNode","year",-1)},goToToday:function(){this.setValue(new Date())},postCreate:function(){this.inherited(arguments);var b=dojo.hitch(this,function(h,o){var m=dojo.query(h,this.domNode)[0];for(var l=0;l<o;l++){m.parentNode.appendChild(m.cloneNode(true))}});b(".dijitCalendarDayLabelTemplate",6);b(".dijitCalendarDateTemplate",6);b(".dijitCalendarWeekTemplate",5);var g=dojo.date.locale.getNames("days",this.dayWidth,"standAlone",this.lang);var a=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);dojo.query(".dijitCalendarDayLabel",this.domNode).forEach(function(h,l){this._setText(h,g[(l+a)%7])},this);var f=dojo.date.locale.getNames("months","wide","standAlone",this.lang);dojo.forEach(f,function(l){var h=dojo.doc.createElement("div");this._setText(h,l);this.monthLabelSpacer.appendChild(h)},this);this.value=null;this.setValue(new Date())},_adjustDisplay:function(a,b){this.displayMonth=dojo.date.add(this.displayMonth,a,b);this._populateGrid()},_onDayClick:function(a){var b=a.target;dojo.stopEvent(a);while(!b.dijitDateValue){b=b.parentNode}if(!dojo.hasClass(b,"dijitCalendarDisabledDate")){this.setValue(b.dijitDateValue);this.onValueSelected(this.value)}},onValueSelected:function(a){},onChange:function(a){},isDisabledDate:function(b,a){},getClassForDate:function(b,a){}})}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated],{baseClass:"",name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,readOnly:false,intermediateChanges:false,attributeMap:dojo.mixin(dojo.clone(dijit._Widget.prototype.attributeMap),{value:"focusNode",disabled:"focusNode",readOnly:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode"}),setAttribute:function(a,f){this.inherited(arguments);switch(a){case"disabled":var b=this[this.attributeMap.tabIndex||"domNode"];if(f){this._hovering=false;this._active=false;b.removeAttribute("tabIndex")}else{b.setAttribute("tabIndex",this.tabIndex)}dijit.setWaiState(this[this.attributeMap.disabled||"domNode"],"disabled",f);this._setStateClass()}},setDisabled:function(a){dojo.deprecated("setDisabled("+a+") is deprecated. Use setAttribute('disabled',"+a+") instead.","","2.0");this.setAttribute("disabled",a)},_onMouse:function(b){var f=b.currentTarget;if(f&&f.getAttribute){this.stateModifier=f.getAttribute("stateModifier")||""}if(!this.disabled){switch(b.type){case"mouseenter":case"mouseover":this._hovering=true;this._active=this._mouseDown;break;case"mouseout":case"mouseleave":this._hovering=false;this._active=false;break;case"mousedown":this._active=true;this._mouseDown=true;var a=this.connect(dojo.body(),"onmouseup",function(){this._active=false;this._mouseDown=false;this._setStateClass();this.disconnect(a)});if(this.isFocusable()){this.focus()}break}this._setStateClass()}},isFocusable:function(){return !this.disabled&&!this.readOnly&&this.focusNode&&(dojo.style(this.domNode,"display")!="none")},focus:function(){setTimeout(dojo.hitch(this,dijit.focus,this.focusNode),0)},_setStateClass:function(){if(!("staticClass" in this)){this.staticClass=(this.stateNode||this.domNode).className}var b=[this.baseClass];function a(f){b=b.concat(dojo.map(b,function(g){return g+f}),"dijit"+f)}if(this.checked){a("Checked")}if(this.state){a(this.state)}if(this.selected){a("Selected")}if(this.disabled){a("Disabled")}else{if(this.readOnly){a("ReadOnly")}else{if(this._active){a(this.stateModifier+"Active")}else{if(this._focused){a("Focused")}if(this._hovering){a(this.stateModifier+"Hover")}}}}(this.stateNode||this.domNode).className=this.staticClass+" "+b.join(" ")},onChange:function(a){},_onChangeMonitor:"value",_onChangeActive:false,_handleOnChange:function(b,a){this._lastValue=b;if(this._lastValueReported==undefined&&(a===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=b}if((this.intermediateChanges||a||a===undefined)&&((b&&b.toString)?b.toString():b)!==((this._lastValueReported&&this._lastValueReported.toString)?this._lastValueReported.toString():this._lastValueReported)){this._lastValueReported=b;if(this._onChangeActive){this.onChange(b)}}},reset:function(){this._hasBeenBlurred=false;if(this.setValue&&!this._getValueDeprecated){this.setValue(this._resetValue,true)}else{if(this._onChangeMonitor){this.setAttribute(this._onChangeMonitor,(this._resetValue!==undefined&&this._resetValue!==null)?this._resetValue:"")}}},create:function(){this.inherited(arguments);this._onChangeActive=true;this._setStateClass()},destroy:function(){if(this._layoutHackHandle){clearTimeout(this._layoutHackHandle)}this.inherited(arguments)},setValue:function(a){dojo.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use setAttribute('value',"+a+") instead.","","2.0");this.setAttribute("value",a)},_getValueDeprecated:true,getValue:function(){dojo.deprecated("dijit.form._FormWidget:getValue() is deprecated.  Use widget.value instead.","","2.0");return this.value},_layoutHack:function(){if(dojo.isFF==2){var b=this.domNode;var a=b.style.opacity;b.style.opacity="0.999";this._layoutHackHandle=setTimeout(dojo.hitch(this,function(){this._layoutHackHandle=null;b.style.opacity=a}),0)}}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{attributeMap:dojo.mixin(dojo.clone(dijit.form._FormWidget.prototype.attributeMap),{value:""}),postCreate:function(){this.setValue(this.value,null)},setValue:function(b,a){this.value=b;this._handleOnChange(b,a)},_getValueDeprecated:false,getValue:function(){return this._lastValue},undo:function(){this.setValue(this._lastValueReported,false)},_valueChanged:function(){var a=this.getValue();var b=this._lastValueReported;return((a!==null&&(a!==undefined)&&a.toString)?a.toString():"")!==((b!==null&&(b!==undefined)&&b.toString)?b.toString():"")},_onKeyPress:function(a){if(a.keyCode==dojo.keys.ESCAPE&&!a.shiftKey&&!a.ctrlKey&&!a.altKey){if(this._valueChanged()){this.undo();dojo.stopEvent(a);return false}}return true}})}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",templateString:'<input class="dijit dijitReset dijitLeft" dojoAttachPoint=\'textbox,focusNode\' name="${name}"\n\tdojoAttachEvent=\'onmouseenter:_onMouse,onmouseleave:_onMouse,onfocus:_onMouse,onblur:_onMouse,onkeypress:_onKeyPress,onkeyup\'\n\tautocomplete="off" type="${type}"\n\t/>\n',baseClass:"dijitTextBox",attributeMap:dojo.mixin(dojo.clone(dijit.form._FormValueWidget.prototype.attributeMap),{maxLength:"focusNode"}),getDisplayedValue:function(){return this.filter(this.textbox.value)},getValue:function(){return this.parse(this.getDisplayedValue(),this.constraints)},setValue:function(g,f,b){var a=this.filter(g);if((((typeof a==typeof g)&&(g!==undefined))||(g===null))&&(b==null||b==undefined)){b=this.format(a,this.constraints)}if(b!=null&&b!=undefined){this.textbox.value=b}dijit.form.TextBox.superclass.setValue.call(this,a,f)},setDisplayedValue:function(b,a){this.textbox.value=b;this.setValue(this.getValue(),a)},format:function(a,b){return((a==null||a==undefined)?"":(a.toString?a.toString():a))},parse:function(a,b){return a},postCreate:function(){this.textbox.setAttribute("value",this.getDisplayedValue());this.inherited(arguments);this._layoutHack()},filter:function(a){if(a===null||a===undefined){return""}else{if(typeof a!="string"){return a}}if(this.trim){a=dojo.trim(a)}if(this.uppercase){a=a.toUpperCase()}if(this.lowercase){a=a.toLowerCase()}if(this.propercase){a=a.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)})}return a},_setBlurValue:function(){this.setValue(this.getValue(),(this.isValid?this.isValid():true))},_onBlur:function(){this._setBlurValue();this.inherited(arguments)},onkeyup:function(){}});dijit.selectInputText=function(element,start,stop){var _window=dojo.global;var _document=dojo.doc;element=dojo.byId(element);if(isNaN(start)){start=0}if(isNaN(stop)){stop=element.value?element.value.length:0}element.focus();if(_document.selection&&dojo.body()["createTextRange"]){if(element.createTextRange){var range=element.createTextRange();with(range){collapse(true);moveStart("character",start);moveEnd("character",stop);select()}}}else{if(_window.getSelection){var selection=_window.getSelection();if(element.setSelectionRange){element.setSelectionRange(start,stop)}}}}}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:200,templateString:'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip">\n\t<div class="dijitTooltipContainer dijitTooltipContents" dojoAttachPoint="containerNode" waiRole=\'alert\'></div>\n\t<div class="dijitTooltipConnector"></div>\n</div>\n',postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")})},show:function(l,f,a){if(this.aroundNode&&this.aroundNode===f){return}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return}this.containerNode.innerHTML=l;this.domNode.style.top=(this.domNode.offsetTop+1)+"px";var h={};var b=this.isLeftToRight();dojo.forEach((a&&a.length)?a:dijit.Tooltip.defaultPosition,function(m){switch(m){case"after":h[b?"BR":"BL"]=b?"BL":"BR";break;case"before":h[b?"BL":"BR"]=b?"BR":"BL";break;case"below":h[b?"BL":"BR"]=b?"TL":"TR";h[b?"BR":"BL"]=b?"TR":"TL";break;case"above":default:h[b?"TL":"TR"]=b?"BL":"BR";h[b?"TR":"TL"]=b?"BR":"BL";break}});var g=dijit.placeOnScreenAroundElement(this.domNode,f,h,dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=f},orient:function(f,a,b){f.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[a+"-"+b]},_onShow:function(){if(dojo.isIE){this.domNode.style.filter=""}},hide:function(a){if(!this.aroundNode||this.aroundNode!==a){return}if(this._onDeck){this._onDeck=null;return}this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play()},_onHide:function(){this.domNode.style.cssText="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null}}});dijit.showTooltip=function(f,b,a){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip()}return dijit._masterTT.show(f,b,a)};dijit.hideTooltip=function(a){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip()}return dijit._masterTT.hide(a)};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],postCreate:function(){if(this.srcNodeRef){this.srcNodeRef.style.display="none"}this._connectNodes=[];dojo.forEach(this.connectId,function(b){var a=dojo.byId(b);if(a){this._connectNodes.push(a);dojo.forEach(["onMouseOver","onMouseOut","onFocus","onBlur","onHover","onUnHover"],function(f){this.connect(a,f.toLowerCase(),"_"+f)},this);if(dojo.isIE){a.style.zoom=1}}},this)},_onMouseOver:function(a){this._onHover(a)},_onMouseOut:function(a){if(dojo.isDescendant(a.relatedTarget,a.target)){return}this._onUnHover(a)},_onFocus:function(a){this._focus=true;this._onHover(a);this.inherited(arguments)},_onBlur:function(a){this._focus=false;this._onUnHover(a);this.inherited(arguments)},_onHover:function(b){if(!this._showTimer){var a=b.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(a)}),this.showDelay)}},_onUnHover:function(a){if(this._focus){return}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}this.close()},open:function(a){a=a||this._connectNodes[0];if(!a){return}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}dijit.showTooltip(this.label||this.domNode.innerHTML,a,this.position);this._connectNode=a},close:function(){dijit.hideTooltip(this._connectNode);delete this._connectNode;if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}},uninitialize:function(){this.close()}});dijit.Tooltip.defaultPosition=["after","before"]}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse" waiRole="presentation"\n\t><div style="overflow:hidden;"\n\t\t><div class="dijitReset dijitValidationIcon"><br></div\n\t\t><div class="dijitReset dijitValidationIconText">&Chi;</div\n\t\t><div class="dijitReset dijitInputField"\n\t\t\t><input class="dijitReset" dojoAttachPoint=\'textbox,focusNode\' dojoAttachEvent=\'onfocus:_update,onkeyup:_onkeyup,onblur:_onMouse,onkeypress:_onKeyPress\' autocomplete="off"\n\t\t\ttype=\'${type}\' name=\'${name}\'\n\t\t/></div\n\t></div\n></div>\n',baseClass:"dijitTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(a){return this.regExp},state:"",tooltipPosition:[],setValue:function(){this.inherited(arguments);this.validate(this._focused)},validator:function(a,b){return(new RegExp("^("+this.regExpGen(b)+")"+(this.required?"":"?")+"$")).test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||this.parse(a,b)!==undefined)},isValid:function(a){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(a){return/^\s*$/.test(a)},getErrorMessage:function(a){return this.invalidMessage},getPromptMessage:function(a){return this.promptMessage},validate:function(a){var b="";var f=this.isValid(a);var g=this._isEmpty(this.textbox.value);this.state=(f||(!this._hasBeenBlurred&&g)||(g&&!this.required))?"":"Error";this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",f?"false":"true");if(a){if(g){b=this.getPromptMessage(true)}if(!b&&this.state=="Error"){b=this.getErrorMessage(true)}}this.displayMessage(b);return f},_message:"",displayMessage:function(a){if(this._message==a){return}this._message=a;dijit.hideTooltip(this.domNode);if(a){dijit.showTooltip(a,this.domNode,this.tooltipPosition)}},_refreshState:function(){this.validate(this._focused)},_update:function(a){this._refreshState();this._onMouse(a)},_onkeyup:function(a){this._update(a);this.onkeyup(a)},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);this.constraints.locale=this.lang;this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage}var a=this.regExpGen(this.constraints);this.regExp=a}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{serialize:function(b,a){return b.toString?b.toString():""},toString:function(){var a=this.filter(this.getValue());return a!=null?(typeof a=="string"?a:this.serialize(a,this.constraints)):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},setAttribute:function(a,b){this.inherited(arguments);switch(a){case"disabled":if(this.valueNode){this.valueNode.disabled=this.disabled}}},postCreate:function(){var b=this.textbox;var a=(this.valueNode=dojo.doc.createElement("input"));a.setAttribute("type",b.type);a.setAttribute("value",this.toString());dojo.style(a,"display","none");a.name=this.textbox.name;a.disabled=this.textbox.disabled;this.textbox.name=this.textbox.name+"_displayed_";this.textbox.removeAttribute("name");dojo.place(a,b,"after");this.inherited(arguments)}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",compare:function(b,a){return b-a},rangeCheck:function(a,g){var f="min" in g;var b="max" in g;if(f||b){return(!f||this.compare(a,g.min)>=0)&&(!b||this.compare(a,g.max)<=0)}return true},isInRange:function(a){return this.rangeCheck(this.getValue(),this.constraints)},isValid:function(a){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(a))},getErrorMessage:function(a){if(dijit.form.RangeBoundTextBox.superclass.isValid.call(this,false)&&!this.isInRange(a)){return this.rangeMessage}return this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage}},postCreate:function(){this.inherited(arguments);if(this.constraints.min!==undefined){dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min)}if(this.constraints.max!==undefined){dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max)}},setValue:function(b,a){dijit.setWaiState(this.focusNode,"valuenow",b);this.inherited("setValue",arguments)}})}if(!dojo._hasResource["dijit.form._DateTimeTextBox"]){dojo._hasResource["dijit.form._DateTimeTextBox"]=true;dojo.provide("dijit.form._DateTimeTextBox");dojo.declare("dijit.form._DateTimeTextBox",dijit.form.RangeBoundTextBox,{regExpGen:dojo.date.locale.regexp,compare:dojo.date.compare,format:function(a,b){if(!a){return""}return dojo.date.locale.format(a,b)},parse:function(a,b){return dojo.date.locale.parse(a,b)||undefined},serialize:dojo.date.stamp.toISOString,value:new Date(""),popupClass:"",_selector:"",postMixInProperties:function(){this.inherited(arguments);if(!this.value||this.value.toString()==dijit.form._DateTimeTextBox.prototype.value.toString()){this.value=undefined}var b=this.constraints;b.selector=this._selector;b.fullYear=true;var a=dojo.date.stamp.fromISOString;if(typeof b.min=="string"){b.min=a(b.min)}if(typeof b.max=="string"){b.max=a(b.max)}},_onFocus:function(a){this._open()},setValue:function(f,b,a){this.inherited(arguments);if(this._picker){if(!f){f=new Date()}this._picker.setValue(f)}},_open:function(){if(this.disabled||this.readOnly||!this.popupClass){return}var b=this;if(!this._picker){var a=dojo.getObject(this.popupClass,false);this._picker=new a({onValueSelected:function(f){b.focus();setTimeout(dojo.hitch(b,"_close"),1);dijit.form._DateTimeTextBox.superclass.setValue.call(b,f,true)},lang:b.lang,constraints:b.constraints,isDisabledDate:function(f){var g=dojo.date.compare;var h=b.constraints;return h&&(h.min&&(g(h.min,f,"date")>0)||(h.max&&g(h.max,f,"date")<0))}});this._picker.setValue(this.getValue()||new Date())}if(!this._opened){dijit.popup.open({parent:this,popup:this._picker,around:this.domNode,onCancel:dojo.hitch(this,this._close),onClose:function(){b._opened=false}});this._opened=true}dojo.marginBox(this._picker.domNode,{w:this.domNode.offsetWidth})},_close:function(){if(this._opened){dijit.popup.close(this._picker);this._opened=false}},_onBlur:function(){this._close();if(this._picker){this._picker.destroy();delete this._picker}this.inherited(arguments)},getDisplayedValue:function(){return this.textbox.value},setDisplayedValue:function(b,a){this.setValue(this.parse(b,this.constraints),a,b)},destroy:function(){if(this._picker){this._picker.destroy();delete this._picker}this.inherited(arguments)},_onKeyPress:function(a){if(dijit.form._DateTimeTextBox.superclass._onKeyPress.apply(this,arguments)){if(this._opened&&a.keyCode==dojo.keys.ESCAPE&&!a.shiftKey&&!a.ctrlKey&&!a.altKey){this._close();dojo.stopEvent(a)}}}})}if(!dojo._hasResource["dijit.form.DateTextBox"]){dojo._hasResource["dijit.form.DateTextBox"]=true;dojo.provide("dijit.form.DateTextBox");dojo.declare("dijit.form.DateTextBox",dijit.form._DateTimeTextBox,{popupClass:"dijit._Calendar",_selector:"date"})}if(!dojo._hasResource["dijit._TimePicker"]){dojo._hasResource["dijit._TimePicker"]=true;dojo.provide("dijit._TimePicker");dojo.declare("dijit._TimePicker",[dijit._Widget,dijit._Templated],{templateString:'<div id="widget_${id}" class="dijitMenu"\n    ><div dojoAttachPoint="upArrow" class="dijitButtonNode"><span class="dijitTimePickerA11yText">&#9650;</span></div\n    ><div dojoAttachPoint="timeMenu,focusNode" dojoAttachEvent="onclick:_onOptionSelected,onmouseover,onmouseout"></div\n    ><div dojoAttachPoint="downArrow" class="dijitButtonNode"><span class="dijitTimePickerA11yText">&#9660;</span></div\n></div>\n',baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date(),_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:dojo.date.stamp.toISOString,setValue:function(a,b){this.value=a;this._showText()},isDisabledDate:function(b,a){return false},_showText:function(){this.timeMenu.innerHTML="";var a=dojo.date.stamp.fromISOString;this._clickableIncrementDate=a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);this._visibleRangeDate=a(this.visibleRange);var h=function(o){return o.getHours()*60*60+o.getMinutes()*60+o.getSeconds()};var g=h(this._clickableIncrementDate);var m=h(this._visibleIncrementDate);var f=h(this._visibleRangeDate);var l=this.value.getTime();this._refDate=new Date(l-l%(m*1000));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=f/g;this._visibleIncrement=m/g;for(var b=-(this._totalIncrements>>1);b<(this._totalIncrements>>1);b+=this._clickableIncrement){this.timeMenu.appendChild(this._createOption(b))}},postCreate:function(){if(this.constraints===dijit._TimePicker.prototype.constraints){this.constraints={}}dojo.mixin(this,this.constraints);if(!this.constraints.locale){this.constraints.locale=this.lang}this.connect(this.timeMenu,dojo.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var a=dijit.typematic.addMouseListener;a(this.upArrow,this,this._onArrowUp,0.8,500);a(this.downArrow,this,this._onArrowDown,0.8,500);this.inherited(arguments);this.setValue(this.value)},_createOption:function(f){var h=dojo.doc.createElement("div");var b=(h.date=new Date(this._refDate));h.index=f;var a=this._clickableIncrementDate;b.setHours(b.getHours()+a.getHours()*f,b.getMinutes()+a.getMinutes()*f,b.getSeconds()+a.getSeconds()*f);var g=dojo.doc.createElement("div");dojo.addClass(h,this.baseClass+"Item");dojo.addClass(g,this.baseClass+"ItemInner");g.innerHTML=dojo.date.locale.format(b,this.constraints);h.appendChild(g);if(f%this._visibleIncrement<1&&f%this._visibleIncrement>-1){dojo.addClass(h,this.baseClass+"Marker")}else{if(!(f%this._clickableIncrement)){dojo.addClass(h,this.baseClass+"Tick")}}if(this.isDisabledDate(b)){dojo.addClass(h,this.baseClass+"ItemDisabled")}if(!dojo.date.compare(this.value,b,this.constraints.selector)){h.selected=true;dojo.addClass(h,this.baseClass+"ItemSelected")}return h},_onOptionSelected:function(b){var a=b.target.date||b.target.parentNode.date;if(!a||this.isDisabledDate(a)){return}this.setValue(a);this.onValueSelected(a)},onValueSelected:function(a){},onmouseover:function(b){var a=(b.target.parentNode===this.timeMenu)?b.target:b.target.parentNode;this._highlighted_option=a;dojo.addClass(a,this.baseClass+"ItemHover")},onmouseout:function(b){var a=(b.target.parentNode===this.timeMenu)?b.target:b.target.parentNode;if(this._highlighted_option===a){dojo.removeClass(a,this.baseClass+"ItemHover")}},_mouseWheeled:function(a){dojo.stopEvent(a);var b=(dojo.isIE?a.wheelDelta:-a.detail);this[(b>0?"_onArrowUp":"_onArrowDown")]()},_onArrowUp:function(){var a=this.timeMenu.childNodes[0].index-1;var b=this._createOption(a);this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);this.timeMenu.insertBefore(b,this.timeMenu.childNodes[0])},_onArrowDown:function(){var a=this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].index+1;var b=this._createOption(a);this.timeMenu.removeChild(this.timeMenu.childNodes[0]);this.timeMenu.appendChild(b)}})}if(!dojo._hasResource["dijit.form.TimeTextBox"]){dojo._hasResource["dijit.form.TimeTextBox"]=true;dojo.provide("dijit.form.TimeTextBox");dojo.declare("dijit.form.TimeTextBox",dijit.form._DateTimeTextBox,{popupClass:"dijit._TimePicker",_selector:"time"})}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",null,{item:null,pageSize:Infinity,store:null,query:{},autoComplete:true,searchDelay:100,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse" dojoAttachPoint="comboNode" waiRole="combobox" tabIndex="-1"\n\t><div style="overflow:hidden;"\n\t\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton\'\n\t\t\tdojoAttachPoint="downArrowNode" waiRole="presentation"\n\t\t\tdojoAttachEvent="onmousedown:_onArrowMouseDown,onmouseup:_onMouse,onmouseenter:_onMouse,onmouseleave:_onMouse"\n\t\t\t><div class="dijitArrowButtonInner">&thinsp;</div\n\t\t\t><div class="dijitArrowButtonChar">&#9660;</div\n\t\t></div\n\t\t><div class="dijitReset dijitValidationIcon"><br></div\n\t\t><div class="dijitReset dijitValidationIconText">&Chi;</div\n\t\t><div class="dijitReset dijitInputField"\n\t\t\t><input type="text" autocomplete="off" name="${name}" class=\'dijitReset\'\n\t\t\tdojoAttachEvent="onkeypress:_onKeyPress, onfocus:_update, compositionend,onkeyup"\n\t\t\tdojoAttachPoint="textbox,focusNode" waiRole="textbox" waiState="haspopup-true,autocomplete-list"\n\t\t/></div\n\t></div\n></div>\n',baseClass:"dijitComboBox",_getCaretPos:function(a){var h=0;if(typeof(a.selectionStart)=="number"){h=a.selectionStart}else{if(dojo.isIE){var f=dojo.doc.selection.createRange().duplicate();var b=a.createTextRange();f.move("character",0);b.move("character",0);try{b.setEndPoint("EndToEnd",f);h=String(b.text).replace(/\r/g,"").length}catch(g){}}}return h},_setCaretPos:function(b,a){a=parseInt(a);dijit.selectInputText(b,a,a)},_setAttribute:function(a,b){if(a=="disabled"){dijit.setWaiState(this.comboNode,"disabled",b)}},_onKeyPress:function(a){if(a.altKey||(a.ctrlKey&&a.charCode!=118)){return}var g=false;var h=this._popupWidget;var f=dojo.keys;if(this._isShowingNow){h.handleKey(a)}switch(a.keyCode){case f.PAGE_DOWN:case f.DOWN_ARROW:if(!this._isShowingNow||this._prev_key_esc){this._arrowPressed();g=true}else{this._announceOption(h.getHighlightedOption())}dojo.stopEvent(a);this._prev_key_backspace=false;this._prev_key_esc=false;break;case f.PAGE_UP:case f.UP_ARROW:if(this._isShowingNow){this._announceOption(h.getHighlightedOption())}dojo.stopEvent(a);this._prev_key_backspace=false;this._prev_key_esc=false;break;case f.ENTER:var l;if(this._isShowingNow&&(l=h.getHighlightedOption())){if(l==h.nextButton){this._nextSearch(1);dojo.stopEvent(a);break}else{if(l==h.previousButton){this._nextSearch(-1);dojo.stopEvent(a);break}}}else{this.setDisplayedValue(this.getDisplayedValue())}a.preventDefault();case f.TAB:var b=this.getDisplayedValue();if(h&&(b==h._messages.previousMessage||b==h._messages.nextMessage)){break}if(this._isShowingNow){this._prev_key_backspace=false;this._prev_key_esc=false;if(h.getHighlightedOption()){h.setValue({target:h.getHighlightedOption()},true)}this._hideResultList()}break;case f.SPACE:this._prev_key_backspace=false;this._prev_key_esc=false;if(this._isShowingNow&&h.getHighlightedOption()){dojo.stopEvent(a);this._selectOption();this._hideResultList()}else{g=true}break;case f.ESCAPE:this._prev_key_backspace=false;this._prev_key_esc=true;if(this._isShowingNow){dojo.stopEvent(a);this._hideResultList()}this.inherited(arguments);break;case f.DELETE:case f.BACKSPACE:this._prev_key_esc=false;this._prev_key_backspace=true;g=true;break;case f.RIGHT_ARROW:case f.LEFT_ARROW:this._prev_key_backspace=false;this._prev_key_esc=false;break;default:this._prev_key_backspace=false;this._prev_key_esc=false;if(dojo.isIE||a.charCode!=0){g=true}}if(this.searchTimer){clearTimeout(this.searchTimer)}if(g){setTimeout(dojo.hitch(this,"_startSearchFromInput"),1)}},_autoCompleteText:function(f){var a=this.focusNode;dijit.selectInputText(a,a.value.length);var b=this.ignoreCase?"toLowerCase":"substr";if(f[b](0).indexOf(this.focusNode.value[b](0))==0){var g=this._getCaretPos(a);if((g+1)>a.value.length){a.value=f;dijit.selectInputText(a,g)}}else{a.value=f;dijit.selectInputText(a)}},_openResultList:function(a,b){if(this.disabled||this.readOnly||(b.query[this.searchAttr]!=this._lastQuery)){return}this._popupWidget.clearResultList();if(!a.length){this._hideResultList();return}var f=new String(this.store.getValue(a[0],this.searchAttr));if(f&&this.autoComplete&&!this._prev_key_backspace&&(b.query[this.searchAttr]!="*")){this._autoCompleteText(f)}this._popupWidget.createOptions(a,b,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(b.direction){if(1==b.direction){this._popupWidget.highlightFirstOption()}else{if(-1==b.direction){this._popupWidget.highlightLastOption()}}this._announceOption(this._popupWidget.getHighlightedOption())}},_showResultList:function(){this._hideResultList();var items=this._popupWidget.getItems(),visibleCount=Math.min(items.length,this.maxListLength);this._arrowPressed();this.displayMessage("");with(this._popupWidget.domNode.style){width="";height=""}var best=this.open();var popupbox=dojo.marginBox(this._popupWidget.domNode);this._popupWidget.domNode.style.overflow=((best.h==popupbox.h)&&(best.w==popupbox.w))?"hidden":"auto";var newwidth=best.w;if(best.h<this._popupWidget.domNode.scrollHeight){newwidth+=16}dojo.marginBox(this._popupWidget.domNode,{h:best.h,w:Math.max(newwidth,this.domNode.offsetWidth)});dijit.setWaiState(this.comboNode,"expanded","true")},_hideResultList:function(){if(this._isShowingNow){dijit.popup.close(this._popupWidget);this._arrowIdle();this._isShowingNow=false;dijit.setWaiState(this.comboNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant")}},_setBlurValue:function(){var a=this.getDisplayedValue();var b=this._popupWidget;if(b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)){this.setValue(this._lastValueReported,true)}else{this.setDisplayedValue(a)}},_onBlur:function(){this._hideResultList();this._arrowIdle();this.inherited(arguments)},_announceOption:function(a){if(a==null){return}var b;if(a==this._popupWidget.nextButton||a==this._popupWidget.previousButton){b=a.innerHTML}else{b=this.store.getValue(a.item,this.searchAttr)}this.focusNode.value=this.focusNode.value.substring(0,this._getCaretPos(this.focusNode));dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(a,"id"));this._autoCompleteText(b)},_selectOption:function(a){var b=null;if(!a){a={target:this._popupWidget.getHighlightedOption()}}if(!a.target){this.setDisplayedValue(this.getDisplayedValue());return}else{b=a.target}if(!a.noHide){this._hideResultList();this._setCaretPos(this.focusNode,this.store.getValue(b.item,this.searchAttr).length)}this._doSelect(b)},_doSelect:function(a){this.item=a.item;this.setValue(this.store.getValue(a.item,this.searchAttr),true)},_onArrowMouseDown:function(a){if(this.disabled||this.readOnly){return}dojo.stopEvent(a);this.focus();if(this._isShowingNow){this._hideResultList()}else{this._startSearch("")}},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_getQueryString:function(a){return dojo.string.substitute(this.queryExpr,[a])},_startSearch:function(b){if(!this._popupWidget){var a=this.id+"_popup";this._popupWidget=new dijit.form._ComboBoxMenu({onChange:dojo.hitch(this,this._selectOption),id:a});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",a)}this.item=null;var f=dojo.clone(this.query);this._lastQuery=f[this.searchAttr]=this._getQueryString(b);this.searchTimer=setTimeout(dojo.hitch(this,function(h,m){var g=this.store.fetch({queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:h,onComplete:dojo.hitch(this,"_openResultList"),onError:function(o){console.error("dijit.form.ComboBox: "+o);dojo.hitch(m,"_hideResultList")()},start:0,count:this.pageSize});var l=function(o,p){o.start+=o.count*p;o.direction=p;this.store.fetch(o)};this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,l,g)},f,this),this.searchDelay)},_getValueField:function(){return this.searchAttr},_arrowPressed:function(){if(!this.disabled&&!this.readOnly&&this.hasDownArrow){dojo.addClass(this.downArrowNode,"dijitArrowButtonActive")}},_arrowIdle:function(){if(!this.disabled&&!this.readOnly&&this.hasDownArrow){dojo.removeClass(this.downArrowNode,"dojoArrowButtonPushed")}},compositionend:function(a){this.onkeypress({charCode:-1})},constructor:function(){this.query={}},postMixInProperties:function(){if(!this.hasDownArrow){this.baseClass="dijitTextBox"}if(!this.store){var a=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(a);if(!this.value||((typeof a.selectedIndex=="number")&&a.selectedIndex.toString()===this.value)){var b=this.store.fetchSelectedItem();if(b){this.value=this.store.getValue(b,this._getValueField())}}}},_postCreate:function(){var a=dojo.query('label[for="'+this.id+'"]');if(a.length){a[0].id=(this.id+"_label");var b=this.comboNode;dijit.setWaiState(b,"labelledby",a[0].id);dijit.setWaiState(b,"disabled",this.disabled)}},uninitialize:function(){if(this._popupWidget){this._hideResultList();this._popupWidget.destroy()}},_getMenuLabelFromItem:function(a){return{html:false,label:this.store.getValue(a,this.searchAttr)}},open:function(){this._isShowingNow=true;return dijit.popup.open({popup:this._popupWidget,around:this.domNode,parent:this})},reset:function(){this.item=null;this.inherited(arguments)}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated],{templateString:"<ul class='dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' tabIndex='-1' style='overflow:\"auto\";'><li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton'></li><li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton'></li></ul>",_messages:null,postMixInProperties:function(){this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);this.inherited("postMixInProperties",arguments)},setValue:function(a){this.value=a;this.onChange(a)},onChange:function(a){},onPage:function(a){},postCreate:function(){this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage;this.inherited("postCreate",arguments)},onClose:function(){this._blurOptionNode()},_createOption:function(f,b){var a=b(f);var g=dojo.doc.createElement("li");dijit.setWaiRole(g,"option");if(a.html){g.innerHTML=a.label}else{g.appendChild(dojo.doc.createTextNode(a.label))}if(g.innerHTML==""){g.innerHTML="&nbsp;"}g.item=f;return g},createOptions:function(b,f,a){this.previousButton.style.display=(f.start==0)?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(b,function(h,g){var l=this._createOption(h,a);l.className="dijitMenuItem";dojo.attr(l,"id",this.id+g);this.domNode.insertBefore(l,this.nextButton)},this);this.nextButton.style.display=(f.count==b.length)?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next")},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2])}},getItems:function(){return this.domNode.childNodes},getListLength:function(){return this.domNode.childNodes.length-2},_onMouseDown:function(a){dojo.stopEvent(a)},_onMouseUp:function(a){if(a.target===this.domNode){return}else{if(a.target==this.previousButton){this.onPage(-1)}else{if(a.target==this.nextButton){this.onPage(1)}else{var b=a.target;while(!b.item){b=b.parentNode}this.setValue({target:b},true)}}}},_onMouseOver:function(a){if(a.target===this.domNode){return}var b=a.target;if(!(b==this.previousButton||b==this.nextButton)){while(!b.item){b=b.parentNode}}this._focusOptionNode(b)},_onMouseOut:function(a){if(a.target===this.domNode){return}this._blurOptionNode()},_focusOptionNode:function(a){if(this._highlighted_option!=a){this._blurOptionNode();this._highlighted_option=a;dojo.addClass(this._highlighted_option,"dijitMenuItemHover")}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemHover");this._highlighted_option=null}},_highlightNextOption:function(){var b=this.domNode.firstChild;if(!this.getHighlightedOption()){this._focusOptionNode(b.style.display=="none"?b.nextSibling:b)}else{var a=this._highlighted_option.nextSibling;if(a&&a.style.display!="none"){this._focusOptionNode(a)}}dijit.scrollIntoView(this._highlighted_option)},highlightFirstOption:function(){this._focusOptionNode(this.domNode.firstChild.nextSibling);dijit.scrollIntoView(this._highlighted_option)},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dijit.scrollIntoView(this._highlighted_option)},_highlightPrevOption:function(){var a=this.domNode.lastChild;if(!this.getHighlightedOption()){this._focusOptionNode(a.style.display=="none"?a.previousSibling:a)}else{var b=this._highlighted_option.previousSibling;if(b&&b.style.display!="none"){this._focusOptionNode(b)}}dijit.scrollIntoView(this._highlighted_option)},_page:function(b){var h=0;var f=this.domNode.scrollTop;var a=dojo.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption()}while(h<a){if(b){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break}this._highlightPrevOption()}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break}this._highlightNextOption()}var g=this.domNode.scrollTop;h+=(g-f)*(b?-1:1);f=g}},pageUp:function(){this._page(true)},pageDown:function(){this._page(false)},getHighlightedOption:function(){var a=this._highlighted_option;return(a&&a.parentNode)?a:null},handleKey:function(a){switch(a.keyCode){case dojo.keys.DOWN_ARROW:this._highlightNextOption();break;case dojo.keys.PAGE_DOWN:this.pageDown();break;case dojo.keys.UP_ARROW:this._highlightPrevOption();break;case dojo.keys.PAGE_UP:this.pageUp();break}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{postMixInProperties:function(){dijit.form.ComboBoxMixin.prototype.postMixInProperties.apply(this,arguments);dijit.form.ValidationTextBox.prototype.postMixInProperties.apply(this,arguments)},postCreate:function(){dijit.form.ComboBoxMixin.prototype._postCreate.apply(this,arguments);dijit.form.ValidationTextBox.prototype.postCreate.apply(this,arguments)},setAttribute:function(a,b){dijit.form.ValidationTextBox.prototype.setAttribute.apply(this,arguments);dijit.form.ComboBoxMixin.prototype._setAttribute.apply(this,arguments)}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(a){this.root=a},getValue:function(f,b,a){return(b=="value")?f.value:(f.innerText||f.textContent||"")},isItemLoaded:function(a){return true},fetch:function(f){var g="^"+f.query.name.replace(/([\\\|\(\)\[\{\^\$\+\?\.\<\>])/g,"\\$1").replace("*",".*")+"$",h=new RegExp(g,f.queryOptions.ignoreCase?"i":""),b=dojo.query("> option",this.root).filter(function(m){return(m.innerText||m.textContent||"").match(h)});var l=f.start||0,a=("count" in f&&f.count!=Infinity)?(l+f.count):b.length;f.onComplete(b.slice(l,a),f);return f},close:function(a){return},getLabel:function(a){return a.innerHTML},getIdentity:function(a){return dojo.attr(a,"value")},fetchItemByIdentity:function(a){var b=dojo.query("option[value='"+a.identity+"']",this.root)[0];a.onItem(b)},fetchSelectedItem:function(){var a=this.root,b=a.selectedIndex;return dojo.query("> option:nth-child("+(b!=-1?b+1:1)+")",a)[0]}})}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Contained",null,{getParent:function(){for(var b=this.domNode.parentNode;b;b=b.parentNode){var f=b.getAttribute&&b.getAttribute("widgetId");if(f){var a=dijit.byId(f);return a.isContainer?a:null}}return null},_getSibling:function(b){var a=this.domNode;do{a=a[b+"Sibling"]}while(a&&a.nodeType!=1);if(!a){return null}var f=a.getAttribute("widgetId");return dijit.byId(f)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")}});dojo.declare("dijit._Container",null,{isContainer:true,addChild:function(g,a){if(a===undefined){a="last"}var b=this.containerNode||this.domNode;if(a&&typeof a=="number"){var f=dojo.query("> [widgetid]",b);if(f&&f.length>=a){b=f[a-1];a="after"}}dojo.place(g.domNode,b,a);if(this._started&&!g._started){g.startup()}},removeChild:function(b){var a=b.domNode;a.parentNode.removeChild(a)},_nextElement:function(a){do{a=a.nextSibling}while(a&&a.nodeType!=1);return a},_firstElement:function(a){a=a.firstChild;if(a&&a.nodeType!=1){a=this._nextElement(a)}return a},getChildren:function(){return dojo.query("> [widgetId]",this.containerNode||this.domNode).map(dijit.byNode)},hasChildren:function(){var a=this.containerNode||this.domNode;return !!this._firstElement(a)},_getSiblingOfChild:function(g,a){var b=g.domNode;var f=(a>0?"nextSibling":"previousSibling");do{b=b[f]}while(b&&(b.nodeType!=1||!dijit.byNode(b)));return b?dijit.byNode(b):null}});dojo.declare("dijit._KeyNavContainer",[dijit._Container],{_keyNavCodes:{},connectKeyNavHandlers:function(a,h){var b=this._keyNavCodes={};var g=dojo.hitch(this,this.focusPrev);var f=dojo.hitch(this,this.focusNext);dojo.forEach(a,function(l){b[l]=g});dojo.forEach(h,function(l){b[l]=f});this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"))},addChild:function(b,a){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(b)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusNext:function(){if(this.focusedChild&&this.focusedChild.hasNextFocalNode&&this.focusedChild.hasNextFocalNode()){this.focusedChild.focusNext();return}var a=this._getNextFocusableChild(this.focusedChild,1);if(a.getFocalNodes){this.focusChild(a,a.getFocalNodes()[0])}else{this.focusChild(a)}},focusPrev:function(){if(this.focusedChild&&this.focusedChild.hasPrevFocalNode&&this.focusedChild.hasPrevFocalNode()){this.focusedChild.focusPrev();return}var b=this._getNextFocusableChild(this.focusedChild,-1);if(b.getFocalNodes){var a=b.getFocalNodes();this.focusChild(b,a[a.length-1])}else{this.focusChild(b)}},focusChild:function(b,a){if(b){if(this.focusedChild&&b!==this.focusedChild){this._onChildBlur(this.focusedChild)}this.focusedChild=b;if(a&&b.focusFocalNode){b.focusFocalNode(a)}else{b.focus()}}},_startupChild:function(b){if(b.getFocalNodes){dojo.forEach(b.getFocalNodes(),function(f){dojo.attr(f,"tabindex",-1);this._connectNode(f)},this)}else{var a=b.focusNode||b.domNode;if(b.isFocusable()){dojo.attr(a,"tabindex",-1)}this._connectNode(a)}},_connectNode:function(a){this.connect(a,"onfocus","_onNodeFocus");this.connect(a,"onblur","_onNodeBlur")},_onContainerFocus:function(a){if(a.target===this.domNode){this.focusFirstChild()}},_onContainerKeypress:function(a){if(a.ctrlKey||a.altKey){return}var b=this._keyNavCodes[a.keyCode];if(b){b();dojo.stopEvent(a)}},_onNodeFocus:function(a){dojo.attr(this.domNode,"tabindex",-1);var b=dijit.getEnclosingWidget(a.target);if(b&&b.isFocusable()){this.focusedChild=b}dojo.stopEvent(a)},_onNodeBlur:function(a){if(this.tabIndex){dojo.attr(this.domNode,"tabindex",this.tabIndex)}dojo.stopEvent(a)},_onChildBlur:function(a){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getNextFocusableChild:function(g,a){if(g){g=this._getSiblingOfChild(g,a)}var f=this.getChildren();for(var b=0;b<f.length;b++){if(!g){g=f[(a>0)?0:(f.length-1)]}if(g.isFocusable()){return g}g=this._getSiblingOfChild(g,a)}return null}})}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:'<div class="dijit dijitReset dijitLeft dijitInline"\n\tdojoAttachEvent="onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"\n\twaiRole="presentation"\n\t><button class="dijitReset dijitStretch dijitButtonNode dijitButtonContents" dojoAttachPoint="focusNode,titleNode"\n\t\ttype="${type}" waiRole="button" waiState="labelledby-${id}_label"\n\t\t><span class="dijitReset dijitInline ${iconClass}" dojoAttachPoint="iconNode" \n \t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#10003;</span \n\t\t></span\n\t\t><div class="dijitReset dijitInline"><center class="dijitReset dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode">${label}</center></div\n\t></button\n></div>\n',_onChangeMonitor:"",_onClick:function(a){if(this.disabled||this.readOnly){dojo.stopEvent(a);return false}this._clicked();return this.onClick(a)},_onButtonClick:function(f){if(this._onClick(f)===false){dojo.stopEvent(f)}else{if(this.type=="submit"&&!this.focusNode.form){for(var a=this.domNode;a.parentNode;a=a.parentNode){var b=dijit.byNode(a);if(b&&typeof b._onSubmit=="function"){b._onSubmit(f);break}}}}},postCreate:function(){if(this.showLabel==false){var a="";this.label=this.containerNode.innerHTML;a=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");this.titleNode.title=a;dojo.addClass(this.containerNode,"dijitDisplayNone")}dojo.setSelectable(this.focusNode,false);this.inherited(arguments)},onClick:function(a){return true},_clicked:function(a){},setLabel:function(a){this.containerNode.innerHTML=this.label=a;this._layoutHack();if(this.showLabel==false){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"")}}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container],{baseClass:"dijitDropDownButton",templateString:'<div class="dijit dijitReset dijitLeft dijitInline"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\n\twaiRole="presentation"\n\t><div class=\'dijitReset dijitRight\' waiRole="presentation"\n\t><button class="dijitReset dijitStretch dijitButtonNode dijitButtonContents" type="${type}"\n\t\tdojoAttachPoint="focusNode,titleNode" waiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t><div class="dijitReset dijitInline ${iconClass}" dojoAttachPoint="iconNode" waiRole="presentation"></div\n\t\t><div class="dijitReset dijitInline dijitButtonText"  dojoAttachPoint="containerNode,popupStateNode" waiRole="presentation"\n\t\t\tid="${id}_label">${label}</div\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" waiRole="presentation">&thinsp;</div\n\t\t><div class="dijitReset dijitInline dijitArrowButtonChar" waiRole="presentation">&#9660;</div\n\t></button\n></div></div>\n',_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started){return}if(!this.dropDown){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(a);delete this.dropDownContainer}dijit.popup.prepare(this.dropDown.domNode);this.inherited(arguments)},destroyDescendants:function(){if(this.dropDown){this.dropDown.destroyRecursive();delete this.dropDown}this.inherited(arguments)},_onArrowClick:function(a){if(this.disabled||this.readOnly){return}this._toggleDropDown()},_onDropDownClick:function(b){var a=dojo.isFF&&dojo.isFF<3&&navigator.appVersion.indexOf("Macintosh")!=-1;if(!a||b.detail!=0||this._seenKeydown){this._onArrowClick(b)}this._seenKeydown=false},_onDropDownKeydown:function(a){this._seenKeydown=true},_onDropDownBlur:function(a){this._seenKeydown=false},_onKey:function(a){if(this.disabled||this.readOnly){return}if(a.keyCode==dojo.keys.DOWN_ARROW){if(!this.dropDown||this.dropDown.domNode.style.visibility=="hidden"){dojo.stopEvent(a);this._toggleDropDown()}}},_onBlur:function(){this._closeDropDown();this.inherited(arguments)},_toggleDropDown:function(){if(this.disabled||this.readOnly){return}dijit.focus(this.popupStateNode);var f=this.dropDown;if(!f){return}if(!this._opened){if(f.href&&!f.isLoaded){var a=this;var b=dojo.connect(f,"onLoad",function(){dojo.disconnect(b);a._openDropDown()});f._loadCheck(true);return}else{this._openDropDown()}}else{this._closeDropDown()}},_openDropDown:function(){var h=this.dropDown;var b=h.domNode.style.width;var f=this;dijit.popup.open({parent:this,popup:h,around:this.domNode,orient:this.isLeftToRight()?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onExecute:function(){f._closeDropDown(true)},onCancel:function(){f._closeDropDown(true)},onClose:function(){h.domNode.style.width=b;f.popupStateNode.removeAttribute("popupActive");this._opened=false}});if(this.domNode.offsetWidth>h.domNode.offsetWidth){var g=null;if(!this.isLeftToRight()){g=h.domNode.parentNode;var a=g.offsetLeft+g.offsetWidth}dojo.marginBox(h.domNode,{w:this.domNode.offsetWidth});if(g){g.style.left=a-this.domNode.offsetWidth+"px"}}this.popupStateNode.setAttribute("popupActive","true");this._opened=true;if(h.focus){h.focus()}},_closeDropDown:function(a){if(this._opened){dijit.popup.close(this.dropDown);if(a){this.focus()}this._opened=false}}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:'<table class=\'dijit dijitReset dijitInline dijitLeft\'\n\tcellspacing=\'0\' cellpadding=\'0\' waiRole="presentation"\n\t><tbody waiRole="presentation"><tr waiRole="presentation"\n\t\t><td\tclass="dijitReset dijitStretch dijitButtonContents dijitButtonNode"\n\t\t\ttabIndex="${tabIndex}"\n\t\t\tdojoAttachEvent="ondijitclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"  dojoAttachPoint="titleNode"\n\t\t\twaiRole="button" waiState="labelledby-${id}_label"\n\t\t\t><div class="dijitReset dijitInline ${iconClass}" dojoAttachPoint="iconNode" waiRole="presentation"></div\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode" waiRole="presentation">${label}</div\n\t\t></td\n\t\t><td class=\'dijitReset dijitStretch dijitButtonNode dijitArrowButton dijitDownArrowButton\'\n\t\t\tdojoAttachPoint="popupStateNode,focusNode"\n\t\t\tdojoAttachEvent="ondijitclick:_onArrowClick, onkeypress:_onKey,onmouseenter:_onMouse,onmouseleave:_onMouse"\n\t\t\tstateModifier="DownArrow"\n\t\t\ttitle="${optionsTitle}" name="${name}"\n\t\t\twaiRole="button" waiState="haspopup-true"\n\t\t\t><div class="dijitReset dijitArrowButtonInner" waiRole="presentation">&thinsp;</div\n\t\t\t><div class="dijitReset dijitArrowButtonChar" waiRole="presentation">&#9660;</div\n\t\t></td\n\t></tr></tbody\n></table>\n',attributeMap:dojo.mixin(dojo.clone(dijit.form._FormWidget.prototype.attributeMap),{id:"",name:""}),optionsTitle:"",baseClass:"dijitComboButton",_focusedNode:null,postCreate:function(){this.inherited(arguments);this._focalNodes=[this.titleNode,this.popupStateNode];dojo.forEach(this._focalNodes,dojo.hitch(this,function(a){if(dojo.isIE){this.connect(a,"onactivate",this._onNodeFocus);this.connect(a,"ondeactivate",this._onNodeBlur)}else{this.connect(a,"onfocus",this._onNodeFocus);this.connect(a,"onblur",this._onNodeBlur)}}))},focusFocalNode:function(a){this._focusedNode=a;dijit.focus(a)},hasNextFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[1]},focusNext:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?1:0];dijit.focus(this._focusedNode)},hasPrevFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[0]},focusPrev:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?0:1];dijit.focus(this._focusedNode)},getFocalNodes:function(){return this._focalNodes},_onNodeFocus:function(a){this._focusedNode=a.currentTarget;var b=this._focusedNode==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.addClass(this._focusedNode,b)},_onNodeBlur:function(a){var b=a.currentTarget==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";dojo.removeClass(a.currentTarget,b)},_onBlur:function(){this.inherited(arguments);this._focusedNode=null}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,_onChangeMonitor:"checked",attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(a){this.setAttribute("checked",!this.checked)},setAttribute:function(a,b){this.inherited(arguments);switch(a){case"checked":dijit.setWaiState(this.focusNode||this.domNode,"pressed",this.checked);this._setStateClass();this._handleOnChange(this.checked,true)}},setChecked:function(a){dojo.deprecated("setChecked("+a+") is deprecated. Use setAttribute('checked',"+a+") instead.","","2.0");this.setAttribute("checked",a)},postCreate:function(){this.inherited(arguments);this.setAttribute("checked",this.checked)}})}if(!dojo._hasResource["dijit.form.CheckBox"]){dojo._hasResource["dijit.form.CheckBox"]=true;dojo.provide("dijit.form.CheckBox");dojo.declare("dijit.form.CheckBox",dijit.form.ToggleButton,{templateString:'<div class="dijitReset dijitInline" waiRole="presentation"\n\t><input\n\t \ttype="${type}" name="${name}"\n\t\tclass="dijitReset dijitCheckBoxInput"\n\t\tdojoAttachPoint="focusNode"\n\t \tdojoAttachEvent="onmouseover:_onMouse,onmouseout:_onMouse,onclick:_onClick"\n/></div>\n',baseClass:"dijitCheckBox",type:"checkbox",value:"on",setValue:function(a){if(typeof a=="string"){this.setAttribute("value",a);a=true}this.setAttribute("checked",a)},_getValueDeprecated:false,getValue:function(){return(this.checked?this.value:false)},reset:function(){this.inherited(arguments);this.setAttribute("value",this._resetValueAttr)},postCreate:function(){this.inherited(arguments);this._resetValueAttr=this.value}});dojo.declare("dijit.form.RadioButton",dijit.form.CheckBox,{type:"radio",baseClass:"dijitRadio",_groups:{},postCreate:function(){(this._groups[this.name]=this._groups[this.name]||[]).push(this);this.inherited(arguments)},uninitialize:function(){dojo.forEach(this._groups[this.name],function(f,b,a){if(f===this){a.splice(b,1);return}},this)},setAttribute:function(a,b){this.inherited(arguments);switch(a){case"checked":if(this.checked){dojo.forEach(this._groups[this.name],function(f){if(f!=this&&f.checked){f.setAttribute("checked",false)}},this)}}},_clicked:function(a){if(!this.checked){this.setAttribute("checked",true)}}})}if(!dojo._hasResource["dijit.form._Spinner"]){dojo._hasResource["dijit.form._Spinner"]=true;dojo.provide("dijit.form._Spinner");dojo.declare("dijit.form._Spinner",dijit.form.RangeBoundTextBox,{defaultTimeout:500,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:'<div class="dijit dijitReset dijitInlineTable dijitLeft"\n\tid="widget_${id}"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse" waiRole="presentation"\n\t><div class="dijitInputLayoutContainer"\n\t\t><div class="dijitReset dijitSpinnerButtonContainer"\n\t\t\t>&nbsp;<div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\t\tdojoAttachPoint="upArrowNode"\n\t\t\t\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse"\n\t\t\t\tstateModifier="UpArrow"\n\t\t\t\t><div class="dijitArrowButtonInner">&thinsp;</div\n\t\t\t\t><div class="dijitArrowButtonChar">&#9650;</div\n\t\t\t></div\n\t\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\t\tdojoAttachPoint="downArrowNode"\n\t\t\t\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse"\n\t\t\t\tstateModifier="DownArrow"\n\t\t\t\t><div class="dijitArrowButtonInner">&thinsp;</div\n\t\t\t\t><div class="dijitArrowButtonChar">&#9660;</div\n\t\t\t></div\n\t\t></div\n\t\t><div class="dijitReset dijitValidationIcon"><br></div\n\t\t><div class="dijitReset dijitValidationIconText">&Chi;</div\n\t\t><div class="dijitReset dijitInputField"\n\t\t\t><input class=\'dijitReset\' dojoAttachPoint="textbox,focusNode" type="${type}" dojoAttachEvent="onfocus:_update,onkeyup:_onkeyup,onkeypress:_onKeyPress"\n\t\t\t\twaiRole="spinbutton" autocomplete="off" name="${name}"\n\t\t/></div\n\t></div\n></div>\n',baseClass:"dijitSpinner",adjust:function(a,b){return a},_arrowState:function(a,b){this._active=b;this.stateModifier=a.getAttribute("stateModifier")||"";this._setStateClass()},_arrowPressed:function(a,b){if(this.disabled||this.readOnly){return}this._arrowState(a,true);this.setValue(this.adjust(this.getValue(),b*this.smallDelta),false);dijit.selectInputText(this.textbox,this.textbox.value.length)},_arrowReleased:function(a){this._wheelTimer=null;if(this.disabled||this.readOnly){return}this._arrowState(a,false)},_typematicCallback:function(f,b,a){if(b==this.textbox){b=(a.keyCode==dojo.keys.UP_ARROW)?this.upArrowNode:this.downArrowNode}if(f==-1){this._arrowReleased(b)}else{this._arrowPressed(b,(b==this.upArrowNode)?1:-1)}},_wheelTimer:null,_mouseWheeled:function(a){dojo.stopEvent(a);var g=0;if(typeof a.wheelDelta=="number"){g=a.wheelDelta}else{if(typeof a.detail=="number"){g=-a.detail}}var f,b;if(g>0){f=this.upArrowNode;b=+1}else{if(g<0){f=this.downArrowNode;b=-1}else{return}}this._arrowPressed(f,b);if(this._wheelTimer!=null){clearTimeout(this._wheelTimer)}var h=this;this._wheelTimer=setTimeout(function(){h._arrowReleased(f)},50)},postCreate:function(){this.inherited("postCreate",arguments);this.connect(this.textbox,dojo.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{keyCode:dojo.keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{keyCode:dojo.keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout));if(dojo.isIE){var a=this;this.connect(this.domNode,"onresize",function(){setTimeout(dojo.hitch(a,function(){this.upArrowNode.style.behavior="";this.downArrowNode.style.behavior="";this._setStateClass()}),0)})}}})}if(!dojo._hasResource["dojo.number"]){dojo._hasResource["dojo.number"]=true;dojo.provide("dojo.number");dojo.number.format=function(h,f){f=dojo.mixin({},f||{});var a=dojo.i18n.normalizeLocale(f.locale);var b=dojo.i18n.getLocalization("dojo.cldr","number",a);f.customs=b;var g=f.pattern||b[(f.type||"decimal")+"Format"];if(isNaN(h)){return null}return dojo.number._applyPattern(h,g,f)};dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;dojo.number._applyPattern=function(l,h,p){p=p||{};var m=p.customs.group;var b=p.customs.decimal;var a=h.split(";");var o=a[0];h=a[(l<0)?1:0]||("-"+o);if(h.indexOf("%")!=-1){l*=100}else{if(h.indexOf("\u2030")!=-1){l*=1000}else{if(h.indexOf("\u00a4")!=-1){m=p.customs.currencyGroup||m;b=p.customs.currencyDecimal||b;h=h.replace(/\u00a4{1,3}/,function(q){var s=["symbol","currency","displayName"][q.length-1];return p[s]||p.currency||""})}else{if(h.indexOf("E")!=-1){throw new Error("exponential notation not supported")}}}}var g=dojo.number._numberPatternRE;var f=o.match(g);if(!f){throw new Error("unable to find a number expression in pattern: "+h)}return h.replace(g,dojo.number._formatAbsolute(l,f[0],{decimal:b,group:m,places:p.places}))};dojo.number.round=function(l,b,a){var h=String(l).split(".");var g=(h[1]&&h[1].length)||0;if(g>b){var f=Math.pow(10,b);if(a>0){f*=10/a;b++}l=Math.round(l*f)/f;h=String(l).split(".");g=(h[1]&&h[1].length)||0;if(g>b){h[1]=h[1].substr(0,b);l=Number(h.join("."))}}return l};dojo.number._formatAbsolute=function(u,q,z){z=z||{};if(z.places===true){z.places=0}if(z.places===Infinity){z.places=6}var f=q.split(".");var y=(z.places>=0)?z.places:(f[1]&&f[1].length)||0;if(!(z.round<0)){u=dojo.number.round(u,y,z.round)}var p=String(Math.abs(u)).split(".");var m=p[1]||"";if(z.places){p[1]=dojo.string.pad(m.substr(0,z.places),z.places,"0",true)}else{if(f[1]&&z.places!==0){var l=f[1].lastIndexOf("0")+1;if(l>m.length){p[1]=dojo.string.pad(m,l,"0",true)}var a=f[1].length;if(a<m.length){p[1]=m.substr(0,a)}}else{if(p[1]){p.pop()}}}var w=f[0].replace(",","");l=w.indexOf("0");if(l!=-1){l=w.length-l;if(l>p[0].length){p[0]=dojo.string.pad(p[0],l)}if(w.indexOf("#")==-1){p[0]=p[0].substr(p[0].length-l)}}var o=f[0].lastIndexOf(",");var v,b;if(o!=-1){v=f[0].length-o-1;var x=f[0].substr(0,o);o=x.lastIndexOf(",");if(o!=-1){b=x.length-o-1}}var h=[];for(var s=p[0];s;){var g=s.length-v;h.push((g>0)?s.substr(g):s);s=(g>0)?s.slice(0,g):"";if(b){v=b;delete b}}p[0]=h.reverse().join(z.group||",");return p.join(z.decimal||".")};dojo.number.regexp=function(a){return dojo.number._parseInfo(a).regexp};dojo.number._parseInfo=function(p){p=p||{};var l=dojo.i18n.normalizeLocale(p.locale);var q=dojo.i18n.getLocalization("dojo.cldr","number",l);var g=p.pattern||q[(p.type||"decimal")+"Format"];var m=q.group;var f=q.decimal;var h=1;if(g.indexOf("%")!=-1){h/=100}else{if(g.indexOf("\u2030")!=-1){h/=1000}else{var b=g.indexOf("\u00a4")!=-1;if(b){m=q.currencyGroup||m;f=q.currencyDecimal||f}}}var a=g.split(";");if(a.length==1){a.push("-"+a[0])}var o=dojo.regexp.buildGroupRE(a,function(s){s="(?:"+dojo.regexp.escapeString(s,".")+")";return s.replace(dojo.number._numberPatternRE,function(y){var v={signed:false,separator:p.strict?m:[m,""],fractional:p.fractional,decimal:f,exponent:false};var x=y.split(".");var w=p.places;if(x.length==1||w===0){v.fractional=false}else{if(w===undefined){w=x[1].lastIndexOf("0")+1}if(w&&p.fractional==undefined){v.fractional=true}if(!p.places&&(w<x[1].length)){w+=","+x[1].length}v.places=w}var u=x[0].split(",");if(u.length>1){v.groupSize=u.pop().length;if(u.length>1){v.groupSize2=u.pop().length}}return"("+dojo.number._realNumberRegexp(v)+")"})},true);if(b){o=o.replace(/(\s*)(\u00a4{1,3})(\s*)/g,function(s,v,w,x){var y=["symbol","currency","displayName"][w.length-1];var u=dojo.regexp.escapeString(p[y]||p.currency||"");v=v?"\\s":"";x=x?"\\s":"";if(!p.strict){if(v){v+="*"}if(x){x+="*"}return"(?:"+v+u+x+")?"}return v+u+x})}return{regexp:o.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:m,decimal:f,factor:h}};dojo.number.parse=function(g,a){var f=dojo.number._parseInfo(a);var b=(new RegExp("^"+f.regexp+"$")).exec(g);if(!b){return NaN}var h=b[1];if(!b[1]){if(!b[2]){return NaN}h=b[2];f.factor*=-1}h=h.replace(new RegExp("["+f.group+"\\s\\xa0]","g"),"").replace(f.decimal,".");return Number(h)*f.factor};dojo.number._realNumberRegexp=function(a){a=a||{};if(!("places" in a)){a.places=Infinity}if(typeof a.decimal!="string"){a.decimal="."}if(!("fractional" in a)||/^0/.test(a.places)){a.fractional=[true,false]}if(!("exponent" in a)){a.exponent=[true,false]}if(!("eSigned" in a)){a.eSigned=[true,false]}var b=dojo.number._integerRegexp(a);var h=dojo.regexp.buildGroupRE(a.fractional,function(m){var l="";if(m&&(a.places!==0)){l="\\"+a.decimal;if(a.places==Infinity){l="(?:"+l+"\\d+)?"}else{l+="\\d{"+a.places+"}"}}return l},true);var f=dojo.regexp.buildGroupRE(a.exponent,function(l){if(l){return"([eE]"+dojo.number._integerRegexp({signed:a.eSigned})+")"}return""});var g=b+h;if(h){g="(?:(?:"+g+")|(?:"+h+"))"}return g+f};dojo.number._integerRegexp=function(a){a=a||{};if(!("signed" in a)){a.signed=[true,false]}if(!("separator" in a)){a.separator=""}else{if(!("groupSize" in a)){a.groupSize=3}}var b=dojo.regexp.buildGroupRE(a.signed,function(g){return g?"[-+]":""},true);var f=dojo.regexp.buildGroupRE(a.separator,function(l){if(!l){return"(?:0|[1-9]\\d*)"}l=dojo.regexp.escapeString(l);if(l==" "){l="\\s"}else{if(l=="\xa0"){l="\\s\\xa0"}}var g=a.groupSize,h=a.groupSize2;if(h){var m="(?:0|[1-9]\\d{0,"+(h-1)+"}(?:["+l+"]\\d{"+h+"})*["+l+"]\\d{"+g+"})";return((g-h)>0)?"(?:"+m+"|(?:0|[1-9]\\d{0,"+(g-1)+"}))":m}return"(?:0|[1-9]\\d{0,"+(g-1)+"}(?:["+l+"]\\d{"+g+"})*)"},true);return b+f}}if(!dojo._hasResource["dijit.form.NumberTextBox"]){dojo._hasResource["dijit.form.NumberTextBox"]=true;dojo.provide("dijit.form.NumberTextBox");dojo.declare("dijit.form.NumberTextBoxMixin",null,{regExpGen:dojo.number.regexp,editOptions:{pattern:"#.######"},_onFocus:function(){this.setValue(this.getValue(),false);this.inherited(arguments)},_formatter:dojo.number.format,format:function(a,b){if(typeof a=="string"){return a}if(isNaN(a)){return""}if(this.editOptions&&this._focused){b=dojo.mixin(dojo.mixin({},this.editOptions),this.constraints)}return this._formatter(a,b)},parse:dojo.number.parse,filter:function(a){if(typeof a=="string"){return this.inherited("filter",arguments)}return isNaN(a)?"":a},value:NaN});dojo.declare("dijit.form.NumberTextBox",[dijit.form.RangeBoundTextBox,dijit.form.NumberTextBoxMixin],{})}if(!dojo._hasResource["dijit.form.NumberSpinner"]){dojo._hasResource["dijit.form.NumberSpinner"]=true;dojo.provide("dijit.form.NumberSpinner");dojo.declare("dijit.form.NumberSpinner",[dijit.form._Spinner,dijit.form.NumberTextBoxMixin],{required:true,adjust:function(b,f){var a=b+f;if(isNaN(b)||isNaN(a)){return b}if((typeof this.constraints.max=="number")&&(a>this.constraints.max)){a=this.constraints.max}if((typeof this.constraints.min=="number")&&(a<this.constraints.min)){a=this.constraints.min}return a}})}if(!dojo._hasResource["dojo.cldr.monetary"]){dojo._hasResource["dojo.cldr.monetary"]=true;dojo.provide("dojo.cldr.monetary");dojo.cldr.monetary.getData=function(g){var h={ADP:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,DJF:0,ESP:0,GNF:0,IQD:3,ITL:0,JOD:3,JPY:0,KMF:0,KRW:0,KWD:3,LUF:0,LYD:3,MGA:0,MGF:0,OMR:3,PYG:0,RWF:0,TND:3,TRL:0,VUV:0,XAF:0,XOF:0,XPF:0};var f={CHF:5};var b=h[g],a=f[g];if(typeof b=="undefined"){b=2}if(typeof a=="undefined"){a=0}return{places:b,round:a}}}if(!dojo._hasResource["dojo.currency"]){dojo._hasResource["dojo.currency"]=true;dojo.provide("dojo.currency");dojo.currency._mixInDefaults=function(b){b=b||{};b.type="currency";var a=dojo.i18n.getLocalization("dojo.cldr","currency",b.locale)||{};var f=b.currency;var g=dojo.cldr.monetary.getData(f);dojo.forEach(["displayName","symbol","group","decimal"],function(h){g[h]=a[f+"_"+h]});g.fractional=[true,false];return dojo.mixin(g,b)};dojo.currency.format=function(b,a){return dojo.number.format(b,dojo.currency._mixInDefaults(a))};dojo.currency.regexp=function(a){return dojo.number.regexp(dojo.currency._mixInDefaults(a))};dojo.currency.parse=function(b,a){return dojo.number.parse(b,dojo.currency._mixInDefaults(a))}}if(!dojo._hasResource["dijit.form.CurrencyTextBox"]){dojo._hasResource["dijit.form.CurrencyTextBox"]=true;dojo.provide("dijit.form.CurrencyTextBox");dojo.declare("dijit.form.CurrencyTextBox",dijit.form.NumberTextBox,{currency:"",regExpGen:dojo.currency.regexp,_formatter:dojo.currency.format,parse:dojo.currency.parse,postMixInProperties:function(){if(this.constraints===dijit.form.ValidationTextBox.prototype.constraints){this.constraints={}}this.constraints.currency=this.currency;dijit.form.CurrencyTextBox.superclass.postMixInProperties.apply(this,arguments)}})}if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.dnd._copyKey=navigator.appVersion.indexOf("Macintosh")<0?"ctrlKey":"metaKey";dojo.dnd.getCopyKeyState=function(a){return a[dojo.dnd._copyKey]};dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var a;do{a=dojo._scopeName+"Unique"+(++dojo.dnd._uniqueId)}while(dojo.byId(a));return a};dojo.dnd._empty={};dojo.dnd.isFormElement=function(b){var a=b.target;if(a.nodeType==3){a=a.parentNode}return" button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")>=0}}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.dnd.getViewport=function(){var h=dojo.doc,f=h.documentElement,g=window,a=dojo.body();if(dojo.isMozilla){return{w:f.clientWidth,h:g.innerHeight}}else{if(!dojo.isOpera&&g.innerWidth){return{w:g.innerWidth,h:g.innerHeight}}else{if(!dojo.isOpera&&f&&f.clientWidth){return{w:f.clientWidth,h:f.clientHeight}}else{if(a.clientWidth){return{w:a.clientWidth,h:a.clientHeight}}}}}return null};dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(g){var f=dojo.dnd.getViewport(),b=0,a=0;if(g.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL){b=-dojo.dnd.H_AUTOSCROLL_VALUE}else{if(g.clientX>f.w-dojo.dnd.H_TRIGGER_AUTOSCROLL){b=dojo.dnd.H_AUTOSCROLL_VALUE}}if(g.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL){a=-dojo.dnd.V_AUTOSCROLL_VALUE}else{if(g.clientY>f.h-dojo.dnd.V_TRIGGER_AUTOSCROLL){a=dojo.dnd.V_AUTOSCROLL_VALUE}}window.scrollBy(b,a)};dojo.dnd._validNodes={div:1,p:1,td:1};dojo.dnd._validOverflow={auto:1,scroll:1};dojo.dnd.autoScrollNodes=function(p){for(var g=p.target;g;){if(g.nodeType==1&&(g.tagName.toLowerCase() in dojo.dnd._validNodes)){var B=dojo.getComputedStyle(g);if(B.overflow.toLowerCase() in dojo.dnd._validOverflow){var q=dojo._getContentBox(g,B),z=dojo._abs(g,true);q.l+=z.x+g.scrollLeft;q.t+=z.y+g.scrollTop;var v=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,q.w/2),o=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,q.h/2),f=p.pageX-q.l,a=p.pageY-q.t,A=0,y=0;if(f>0&&f<q.w){if(f<v){A=-dojo.dnd.H_AUTOSCROLL_VALUE}else{if(f>q.w-v){A=dojo.dnd.H_AUTOSCROLL_VALUE}}}if(a>0&&a<q.h){if(a<o){y=-dojo.dnd.V_AUTOSCROLL_VALUE}else{if(a>q.h-o){y=dojo.dnd.V_AUTOSCROLL_VALUE}}}var l=g.scrollLeft,m=g.scrollTop;g.scrollLeft=g.scrollLeft+A;g.scrollTop=g.scrollTop+y;if(l!=g.scrollLeft||m!=g.scrollTop){return}}}try{g=g.parentNode}catch(u){g=null}}dojo.dnd.autoScroll(p)}}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(g,l,f){this.node=dojo.byId(g);this.marginBox={l:l.pageX,t:l.pageY};this.mouseButton=l.button;var b=this.host=f,m=g.ownerDocument,a=dojo.connect(m,"onmousemove",this,"onFirstMove");this.events=[dojo.connect(m,"onmousemove",this,"onMouseMove"),dojo.connect(m,"onmouseup",this,"onMouseUp"),dojo.connect(m,"ondragstart",dojo,"stopEvent"),dojo.connect(m,"onselectstart",dojo,"stopEvent"),a];if(b&&b.onMoveStart){b.onMoveStart(this)}},onMouseMove:function(b){dojo.dnd.autoScroll(b);var a=this.marginBox;this.host.onMove(this,{l:a.l+b.pageX,t:a.t+b.pageY})},onMouseUp:function(a){if(this.mouseButton==a.button){this.destroy()}},onFirstMove:function(){var g=this.node.style,b,f;switch(g.position){case"relative":case"absolute":b=Math.round(parseFloat(g.left));f=Math.round(parseFloat(g.top));break;default:g.position="absolute";var a=dojo.marginBox(this.node);b=a.l;f=a.t;break}this.marginBox.l=b-this.marginBox.l;this.marginBox.t=f-this.marginBox.t;this.host.onFirstMove(this);dojo.disconnect(this.events.pop())},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var a=this.host;if(a&&a.onMoveStop){a.onMoveStop(this)}this.events=this.node=null}})}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(a,b){this.node=dojo.byId(a);if(!b){b={}}this.handle=b.handle?dojo.byId(b.handle):null;if(!this.handle){this.handle=this.node}this.delay=b.delay>0?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")]},markupFactory:function(b,a){return new dojo.dnd.Moveable(a,b)},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null},onMouseDown:function(a){if(this.skip&&dojo.dnd.isFormElement(a)){return}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"));this.events.push(dojo.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=a.pageX;this._lastY=a.pageY}else{new this.mover(this.node,a,this)}dojo.stopEvent(a)},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay){this.onMouseUp(a);new this.mover(this.node,a,this)}dojo.stopEvent(a)},onMouseUp:function(a){dojo.disconnect(this.events.pop());dojo.disconnect(this.events.pop())},onSelectStart:function(a){if(!this.skip||!dojo.dnd.isFormElement(a)){dojo.stopEvent(a)}},onMoveStart:function(a){dojo.publish("/dnd/move/start",[a]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem")},onMoveStop:function(a){dojo.publish("/dnd/move/stop",[a]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem")},onFirstMove:function(a){},onMove:function(b,a){this.onMoving(b,a);var f=b.node.style;f.left=a.l+"px";f.top=a.t+"px";this.onMoved(b,a)},onMoving:function(b,a){},onMoved:function(b,a){}})}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(b,a){return new dojo.dnd.move.constrainedMoveable(a,b)},constructor:function(a,b){if(!b){b={}}this.constraints=b.constraints;this.within=b.within},onFirstMove:function(a){var f=this.constraintBox=this.constraints.call(this,a);f.r=f.l+f.w;f.b=f.t+f.h;if(this.within){var b=dojo.marginBox(a.node);f.r-=b.w;f.b-=b.h}},onMove:function(b,a){var g=this.constraintBox,f=b.node.style;f.left=(a.l<g.l?g.l:g.r<a.l?g.r:a.l)+"px";f.top=(a.t<g.t?g.t:g.b<a.t?g.b:a.t)+"px"}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(b,a){return new dojo.dnd.move.boxConstrainedMoveable(a,b)},constructor:function(b,f){var a=f&&f.box;this.constraints=function(){return a}}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(b,a){return new dojo.dnd.move.parentConstrainedMoveable(a,b)},constructor:function(b,f){var a=f&&f.area;this.constraints=function(){var m=this.node.parentNode,h=dojo.getComputedStyle(m),l=dojo._getMarginBox(m,h);if(a=="margin"){return l}var g=dojo._getMarginExtents(m,h);l.l+=g.l,l.t+=g.t,l.w-=g.w,l.h-=g.h;if(a=="border"){return l}g=dojo._getBorderExtents(m,h);l.l+=g.l,l.t+=g.t,l.w-=g.w,l.h-=g.h;if(a=="padding"){return l}g=dojo._getPadExtents(m,h);l.l+=g.l,l.t+=g.t,l.w-=g.w,l.h-=g.h;return l}}});dojo.dnd.move.constrainedMover=function(a,f){dojo.deprecated("dojo.dnd.move.constrainedMover, use dojo.dnd.move.constrainedMoveable instead");var b=function(h,l,g){dojo.dnd.Mover.call(this,h,l,g)};dojo.extend(b,dojo.dnd.Mover.prototype);dojo.extend(b,{onMouseMove:function(p){dojo.dnd.autoScroll(p);var g=this.marginBox,q=this.constraintBox,h=g.l+p.pageX,o=g.t+p.pageY;h=h<q.l?q.l:q.r<h?q.r:h;o=o<q.t?q.t:q.b<o?q.b:o;this.host.onMove(this,{l:h,t:o})},onFirstMove:function(){dojo.dnd.Mover.prototype.onFirstMove.call(this);var h=this.constraintBox=a.call(this);h.r=h.l+h.w;h.b=h.t+h.h;if(f){var g=dojo.marginBox(this.node);h.r-=g.w;h.b-=g.h}}});return b};dojo.dnd.move.boxConstrainedMover=function(b,a){dojo.deprecated("dojo.dnd.move.boxConstrainedMover, use dojo.dnd.move.boxConstrainedMoveable instead");return dojo.dnd.move.constrainedMover(function(){return b},a)};dojo.dnd.move.parentConstrainedMover=function(f,b){dojo.deprecated("dojo.dnd.move.parentConstrainedMover, use dojo.dnd.move.parentConstrainedMoveable instead");var a=function(){var m=this.node.parentNode,h=dojo.getComputedStyle(m),l=dojo._getMarginBox(m,h);if(f=="margin"){return l}var g=dojo._getMarginExtents(m,h);l.l+=g.l,l.t+=g.t,l.w-=g.w,l.h-=g.h;if(f=="border"){return l}g=dojo._getBorderExtents(m,h);l.l+=g.l,l.t+=g.t,l.w-=g.w,l.h-=g.h;if(f=="padding"){return l}g=dojo._getPadExtents(m,h);l.l+=g.l,l.t+=g.t,l.w-=g.w,l.h-=g.h;return l};return dojo.dnd.move.constrainedMover(a,b)};dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover}if(!dojo._hasResource["dijit.form.Slider"]){dojo._hasResource["dijit.form.Slider"]=true;dojo.provide("dijit.form.Slider");dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormValueWidget,dijit._Container],{templateString:'<table class="dijit dijitReset dijitSlider" cellspacing="0" cellpadding="0" border="0" rules="none"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td dojoAttachPoint="containerNode,topDecoration" class="dijitReset" style="text-align:center;width:100%;"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderDecrementIconH" tabIndex="-1" style="display:none" dojoAttachPoint="decrementButton" dojoAttachEvent="onclick: decrement"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper" dojoAttachEvent="onclick:_onClkDecBumper"></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" name="${name}"\n\t\t\t/><div waiRole="presentation" style="position:relative;" dojoAttachPoint="sliderBarContainer"\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent="onclick:_onBarClick"\n\t\t\t\t\t><div dojoAttachPoint="sliderHandle,focusNode" class="dijitSliderMoveable dijitSliderMoveableH" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_onHandleClick" waiRole="slider" valuemin="${minimum}" valuemax="${maximum}"\n\t\t\t\t\t\t><div class="dijitSliderImageHandle dijitSliderImageHandleH"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent="onclick:_onBarClick"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper" dojoAttachEvent="onclick:_onClkIncBumper"></div\n\t\t></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH" style="right:0px;"\n\t\t\t><div class="dijitSliderIncrementIconH" tabIndex="-1" style="display:none" dojoAttachPoint="incrementButton" dojoAttachEvent="onclick: increment"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td dojoAttachPoint="containerNode,bottomDecoration" class="dijitReset" style="text-align:center;"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n></table>\n',value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:1000,widgetsInTemplate:true,attributeMap:dojo.mixin(dojo.clone(dijit.form._FormWidget.prototype.attributeMap),{id:"",name:"valueNode"}),baseClass:"dijitSlider",_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyPress:function(a){if(this.disabled||this.readOnly||a.altKey||a.ctrlKey){return}switch(a.keyCode){case dojo.keys.HOME:this.setValue(this.minimum,true);break;case dojo.keys.END:this.setValue(this.maximum,true);break;case ((this._descending||this.isLeftToRight())?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW):case (this._descending===false?dojo.keys.DOWN_ARROW:dojo.keys.UP_ARROW):case (this._descending===false?dojo.keys.PAGE_DOWN:dojo.keys.PAGE_UP):this.increment(a);break;case ((this._descending||this.isLeftToRight())?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW):case (this._descending===false?dojo.keys.UP_ARROW:dojo.keys.DOWN_ARROW):case (this._descending===false?dojo.keys.PAGE_UP:dojo.keys.PAGE_DOWN):this.decrement(a);break;default:this.inherited(arguments);return}dojo.stopEvent(a)},_onHandleClick:function(a){if(this.disabled||this.readOnly){return}if(!dojo.isIE){dijit.focus(this.sliderHandle)}dojo.stopEvent(a)},_isReversed:function(){return !this.isLeftToRight()},_onBarClick:function(f){if(this.disabled||this.readOnly||!this.clickSelect){return}dijit.focus(this.sliderHandle);dojo.stopEvent(f);var b=dojo.coords(this.sliderBarContainer,true);var a=f[this._mousePixelCoord]-b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(b[this._pixelCount]-a):a,b[this._pixelCount],true)},_setPixelValue:function(b,g,l){if(this.disabled||this.readOnly){return}b=b<0?0:g<b?g:b;var h=this.discreteValues;if(h<=1||h==Infinity){h=g}h--;var a=g/h;var f=Math.round(b/a);this.setValue((this.maximum-this.minimum)*f/h+this.minimum,l)},setValue:function(o,p){this.valueNode.value=this.value=o;dijit.setWaiState(this.focusNode,"valuenow",o);this.inherited(arguments);var l=(o-this.minimum)/(this.maximum-this.minimum);var g=(this._descending===false)?this.remainingBar:this.progressBar;var f=(this._descending===false)?this.progressBar:this.remainingBar;if(p&&this.slideDuration>0&&g.style[this._progressPixelSize]){var h=this;var m={};var a=parseFloat(g.style[this._progressPixelSize]);var b=this.slideDuration*(l-a/100);if(b==0){return}if(b<0){b=0-b}m[this._progressPixelSize]={start:a,end:l*100,units:"%"};dojo.animateProperty({node:g,duration:b,onAnimate:function(q){f.style[h._progressPixelSize]=(100-parseFloat(q[h._progressPixelSize]))+"%"},properties:m}).play()}else{g.style[this._progressPixelSize]=(l*100)+"%";f.style[this._progressPixelSize]=((1-l)*100)+"%"}},_bumpValue:function(g){if(this.disabled||this.readOnly){return}var a=dojo.getComputedStyle(this.sliderBarContainer);var h=dojo._getContentBox(this.sliderBarContainer,a);var b=this.discreteValues;if(b<=1||b==Infinity){b=h[this._pixelCount]}b--;var f=(this.value-this.minimum)*b/(this.maximum-this.minimum)+g;if(f<0){f=0}if(f>b){f=b}f=f*(this.maximum-this.minimum)/b+this.minimum;this.setValue(f,true)},_onClkIncBumper:function(){this.setValue(this._descending===false?this.minimum:this.maximum,true)},_onClkDecBumper:function(){this.setValue(this._descending===false?this.maximum:this.minimum,true)},decrement:function(a){this._bumpValue(a.keyCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1)},increment:function(a){this._bumpValue(a.keyCode==dojo.keys.PAGE_UP?this.pageIncrement:1)},_mouseWheeled:function(a){dojo.stopEvent(a);var b=0;if(typeof a.wheelDelta=="number"){b=a.wheelDelta}else{if(typeof a.detail=="number"){b=-a.detail}}if(b>0){this.increment(a)}else{if(b<0){this.decrement(a)}}},startup:function(){dojo.forEach(this.getChildren(),function(a){if(this[a.container]!=this.containerNode){this[a.container].appendChild(a.domNode)}},this)},postCreate:function(){if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display=""}this.connect(this.domNode,dojo.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var a=this;var b=function(){dijit.form._SliderMover.apply(this,arguments);this.widget=a};dojo.extend(b,dijit.form._SliderMover.prototype);this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:b});dijit.setWaiState(this.focusNode,"valuemin",this.minimum);dijit.setWaiState(this.focusNode,"valuemax",this.maximum);this.inherited(arguments)},destroy:function(){this._movable.destroy();this.inherited(arguments)}});dojo.declare("dijit.form.VerticalSlider",dijit.form.HorizontalSlider,{templateString:'<table class="dijitReset dijitSlider" cellspacing="0" cellpadding="0" border="0" rules="none"\n><tbody class="dijitReset"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\n\t\t\t><div class="dijitSliderIncrementIconV" tabIndex="-1" style="display:none" dojoAttachPoint="incrementButton" dojoAttachEvent="onclick:_topButtonClicked"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset"\n\t\t\t><center><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper dijitSliderTopBumper" dojoAttachEvent="onclick:_onClkIncBumper"></div></center\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td dojoAttachPoint="leftDecoration" class="dijitReset" style="text-align:center;height:100%;"></td\n\t\t><td class="dijitReset" style="height:100%;"\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" name="${name}"\n\t\t\t/><center waiRole="presentation" style="position:relative;height:100%;" dojoAttachPoint="sliderBarContainer"\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" dojoAttachEvent="onclick:_onBarClick"><!--#5629--></div\n\t\t\t\t><div waiRole="presentation" dojoAttachPoint="progressBar" class="dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" dojoAttachEvent="onclick:_onBarClick"\n\t\t\t\t\t><div dojoAttachPoint="sliderHandle,focusNode" class="dijitSliderMoveable" dojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_onHandleClick" style="vertical-align:top;" waiRole="slider" valuemin="${minimum}" valuemax="${maximum}"\n\t\t\t\t\t\t><div class="dijitSliderImageHandle dijitSliderImageHandleV"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t></center\n\t\t></td\n\t\t><td dojoAttachPoint="containerNode,rightDecoration" class="dijitReset" style="text-align:center;height:100%;"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset"\n\t\t\t><center><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper dijitSliderBottomBumper" dojoAttachEvent="onclick:_onClkDecBumper"></div></center\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset"></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\n\t\t\t><div class="dijitSliderDecrementIconV" tabIndex="-1" style="display:none" dojoAttachPoint="decrementButton" dojoAttachEvent="onclick:_bottomButtonClicked"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"></td\n\t></tr\n></tbody></table>\n',_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_startingPixelCount:"t",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:true,startup:function(){if(this._started){return}if(!this.isLeftToRight()&&dojo.isMoz){if(this.leftDecoration){this._rtlRectify(this.leftDecoration)}if(this.rightDecoration){this._rtlRectify(this.rightDecoration)}}this.inherited(arguments)},_isReversed:function(){return this._descending},_topButtonClicked:function(a){if(this._descending){this.increment(a)}else{this.decrement(a)}},_bottomButtonClicked:function(a){if(this._descending){this.decrement(a)}else{this.increment(a)}},_rtlRectify:function(f){var b=[];while(f.firstChild){b.push(f.firstChild);f.removeChild(f.firstChild)}for(var a=b.length-1;a>=0;a--){if(b[a]){f.appendChild(b[a])}}}});dojo.declare("dijit.form._SliderMover",dojo.dnd.Mover,{onMouseMove:function(g){var f=this.widget;var b=f._abspos;if(!b){b=f._abspos=dojo.coords(f.sliderBarContainer,true);f._setPixelValue_=dojo.hitch(f,"_setPixelValue");f._isReversed_=f._isReversed()}var a=g[f._mousePixelCoord]-b[f._startingPixelCoord];f._setPixelValue_(f._isReversed_?(b[f._pixelCount]-a):a,b[f._pixelCount],false)},destroy:function(b){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var a=this.widget;a.setValue(a.value,true)}});dojo.declare("dijit.form.HorizontalRule",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitRuleContainer dijitRuleContainerH"></div>',count:3,container:"containerNode",ruleStyle:"",_positionPrefix:'<div class="dijitRuleMark dijitRuleMarkH" style="left:',_positionSuffix:"%;",_suffix:'"></div>',_genHTML:function(b,a){return this._positionPrefix+b+this._positionSuffix+this.ruleStyle+this._suffix},_isHorizontal:true,postCreate:function(){var f;if(this.count==1){f=this._genHTML(50,0)}else{var b;var a=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){f=this._genHTML(0,0);for(b=1;b<this.count-1;b++){f+=this._genHTML(a*b,b)}f+=this._genHTML(100,this.count-1)}else{f=this._genHTML(100,0);for(b=1;b<this.count-1;b++){f+=this._genHTML(100-a*b,b)}f+=this._genHTML(0,this.count-1)}}this.domNode.innerHTML=f}});dojo.declare("dijit.form.VerticalRule",dijit.form.HorizontalRule,{templateString:'<div class="dijitRuleContainer dijitRuleContainerV"></div>',_positionPrefix:'<div class="dijitRuleMark dijitRuleMarkV" style="top:',_isHorizontal:false});dojo.declare("dijit.form.HorizontalRuleLabels",dijit.form.HorizontalRule,{templateString:'<div class="dijitRuleContainer dijitRuleContainerH"></div>',labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:'<div class="dijitRuleLabelContainer dijitRuleLabelContainerH" style="left:',_labelPrefix:'"><span class="dijitRuleLabel dijitRuleLabelH">',_suffix:"</span></div>",_calcPosition:function(a){return a},_genHTML:function(b,a){return this._positionPrefix+this._calcPosition(b)+this._positionSuffix+this.labelStyle+this._labelPrefix+this.labels[a]+this._suffix},getLabels:function(){var g=this.labels;if(!g.length){g=dojo.query("> li",this.srcNodeRef).map(function(h){return String(h.innerHTML)})}this.srcNodeRef.innerHTML="";if(!g.length&&this.count>1){var f=this.minimum;var b=(this.maximum-f)/(this.count-1);for(var a=0;a<this.count;a++){g.push((a<this.numericMargin||a>=(this.count-this.numericMargin))?"":dojo.number.format(f,this.constraints));f+=b}}return g},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length}});dojo.declare("dijit.form.VerticalRuleLabels",dijit.form.HorizontalRuleLabels,{templateString:'<div class="dijitRuleContainer dijitRuleContainerV"></div>',_positionPrefix:'<div class="dijitRuleLabelContainer dijitRuleLabelContainerV" style="top:',_labelPrefix:'"><span class="dijitRuleLabel dijitRuleLabelV">',_calcPosition:function(a){return 100-a},_isHorizontal:false})}if(!dojo._hasResource["dijit._editor.selection"]){dojo._hasResource["dijit._editor.selection"]=true;dojo.provide("dijit._editor.selection");dojo.mixin(dijit._editor.selection,{getType:function(){if(dojo.doc.selection){return dojo.doc.selection.type.toLowerCase()}else{var b="text";var a;try{a=dojo.global.getSelection()}catch(f){}if(a&&a.rangeCount==1){var g=a.getRangeAt(0);if((g.startContainer==g.endContainer)&&((g.endOffset-g.startOffset)==1)&&(g.startContainer.nodeType!=3)){b="control"}}return b}},getSelectedText:function(){if(dojo.doc.selection){if(dijit._editor.selection.getType()=="control"){return null}return dojo.doc.selection.createRange().text}else{var a=dojo.global.getSelection();if(a){return a.toString()}}return""},getSelectedHtml:function(){if(dojo.doc.selection){if(dijit._editor.selection.getType()=="control"){return null}return dojo.doc.selection.createRange().htmlText}else{var a=dojo.global.getSelection();if(a&&a.rangeCount){var f=a.getRangeAt(0).cloneContents();var b=dojo.doc.createElement("div");b.appendChild(f);return b.innerHTML}return null}},getSelectedElement:function(){if(this.getType()=="control"){if(dojo.doc.selection){var a=dojo.doc.selection.createRange();if(a&&a.item){return dojo.doc.selection.createRange().item(0)}}else{var b=dojo.global.getSelection();return b.anchorNode.childNodes[b.anchorOffset]}}return null},getParentElement:function(){if(this.getType()=="control"){var f=this.getSelectedElement();if(f){return f.parentNode}}else{if(dojo.doc.selection){return dojo.doc.selection.createRange().parentElement()}else{var a=dojo.global.getSelection();if(a){var b=a.anchorNode;while(b&&(b.nodeType!=1)){b=b.parentNode}return b}}}return null},hasAncestorElement:function(a){return this.getAncestorElement.apply(this,arguments)!=null},getAncestorElement:function(a){var b=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(b,arguments)},isTag:function(g,a){if(g&&g.tagName){var h=g.tagName.toLowerCase();for(var b=0;b<a.length;b++){var f=String(a[b]).toLowerCase();if(h==f){return f}}}return""},getParentOfType:function(b,a){while(b){if(this.isTag(b,a).length){return b}b=b.parentNode}return null},collapse:function(f){if(window.getSelection){var b=dojo.global.getSelection();if(b.removeAllRanges){if(f){b.collapseToStart()}else{b.collapseToEnd()}}else{b.collapse(f)}}else{if(dojo.doc.selection){var a=dojo.doc.selection.createRange();a.collapse(f);a.select()}}},remove:function(){var a=dojo.doc.selection;if(a){if(a.type.toLowerCase()!="none"){a.clear()}return a}else{a=dojo.global.getSelection();a.deleteFromDocument();return a}},selectElementChildren:function(g,f){var m=dojo.global;var a=dojo.doc;g=dojo.byId(g);if(a.selection&&dojo.body().createTextRange){var b=g.ownerDocument.body.createTextRange();b.moveToElementText(g);if(!f){try{b.select()}catch(l){}}}else{if(m.getSelection){var h=m.getSelection();if(h.setBaseAndExtent){h.setBaseAndExtent(g,0,g,g.innerText.length-1)}else{if(h.selectAllChildren){h.selectAllChildren(g)}}}}},selectElement:function(g,f){var b,a=dojo.doc;g=dojo.byId(g);if(a.selection&&dojo.body().createTextRange){try{b=dojo.body().createControlRange();b.addElement(g);if(!f){b.select()}}catch(l){this.selectElementChildren(g,f)}}else{if(dojo.global.getSelection){var h=dojo.global.getSelection();if(h.removeAllRanges){b=a.createRange();b.selectNode(g);h.removeAllRanges();h.addRange(b)}}}}})}if(!dojo._hasResource["dijit._editor.html"]){dojo._hasResource["dijit._editor.html"]=true;dojo.provide("dijit._editor.html");dijit._editor.escapeXml=function(a,b){a=a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!b){a=a.replace(/'/gm,"&#39;")}return a};dijit._editor.getNodeHtml=function(g){var f;switch(g.nodeType){case 1:f="<"+g.nodeName.toLowerCase();var p=[];if(dojo.isIE&&g.outerHTML){var x=g.outerHTML;x=x.substr(0,x.indexOf(">"));x=x.replace(/(['"])[^"']*\1/g,"");var a=/([^\s=]+)=/g;var h,w;while((h=a.exec(x))){w=h[1];if(w.substr(0,3)!="_dj"){if(w=="src"||w=="href"){if(g.getAttribute("_djrealurl")){p.push([w,g.getAttribute("_djrealurl")]);continue}}if(w=="style"){p.push([w,g.style.cssText.toLowerCase()])}else{p.push([w,w=="class"?g.className:g.getAttribute(w)])}}}}else{var o,l=0,u=g.attributes;while((o=u[l++])){var b=o.name;if(b.substr(0,3)!="_dj"){var q=o.value;if(b=="src"||b=="href"){if(g.getAttribute("_djrealurl")){q=g.getAttribute("_djrealurl")}}p.push([b,q])}}}p.sort(function(s,m){return s[0]<m[0]?-1:(s[0]==m[0]?0:1)});l=0;while((o=p[l++])){f+=" "+o[0]+'="'+(dojo.isString(o[1])?dijit._editor.escapeXml(o[1],true):o[1])+'"'}if(g.childNodes.length){f+=">"+dijit._editor.getChildrenHtml(g)+"</"+g.nodeName.toLowerCase()+">"}else{f+=" />"}break;case 3:f=dijit._editor.escapeXml(g.nodeValue,true);break;case 8:f="<!--"+dijit._editor.escapeXml(g.nodeValue,true)+"-->";break;default:f="Element not recognized - Type: "+g.nodeType+" Name: "+g.nodeName}return f};dijit._editor.getChildrenHtml=function(h){var b="";if(!h){return b}var a=h.childNodes||h;var f=0;var g;while((g=a[f++])){b+=dijit._editor.getNodeHtml(g)}return b}}if(!dojo._hasResource["dijit._editor.RichText"]){dojo._hasResource["dijit._editor.RichText"]=true;dojo.provide("dijit._editor.RichText");if(!dojo.config.useXDomain||dojo.config.allowXdRichTextSave){if(dojo._postLoad){(function(){var a=dojo.doc.createElement("textarea");a.id=dijit._scopeName+"._editor.RichText.savedContent";var b=a.style;b.display="none";b.position="absolute";b.top="-100px";b.left="-100px";b.height="3px";b.width="3px";dojo.body().appendChild(a)})()}else{try{dojo.doc.write('<textarea id="'+dijit._scopeName+'._editor.RichText.savedContent" style="display:none;position:absolute;top:-100px;left:-100px;height:3px;width:3px;overflow:hidden;"></textarea>')}catch(e){}}}dojo.declare("dijit._editor.RichText",dijit._Widget,{constructor:function(){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this._keyHandlers={};this.contentPreFilters.push(dojo.hitch(this,"_preFixUrlAttributes"));if(dojo.isMoz){this.contentPreFilters.push(this._fixContentForMoz);this.contentPostFilters.push(this._removeMozBogus)}else{if(dojo.isSafari){this.contentPostFilters.push(this._removeSafariBogus)}}this.onLoadDeferred=new dojo.Deferred()},inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",_content:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",onLoadDeferred:null,postCreate:function(){dojo.publish(dijit._scopeName+"._editor.RichText::init",[this]);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var a=function(h,g){return arguments.length==1?function(){this.execCommand(h)}:function(){this.execCommand(h,g)}};var f={b:a("bold"),i:a("italic"),u:a("underline"),a:a("selectall"),s:function(){this.save(true)},"1":a("formatblock","h1"),"2":a("formatblock","h2"),"3":a("formatblock","h3"),"4":a("formatblock","h4"),"\\":a("insertunorderedlist")};if(!dojo.isIE){f.Z=a("redo")}for(var b in f){this.addKeyHandler(b,this.KEY_CTRL,f[b])}},events:["onKeyPress","onKeyDown","onKeyUp","onClick"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(this._editorCommandsLocalized){return}this._editorCommandsLocalized=true;var b=["p","pre","address","h1","h2","h3","h4","h5","h6","ol","div","ul"];var h="",l,f=0;while((l=b[f++])){if(l.charAt(1)!="l"){h+="<"+l+"><span>content</span></"+l+">"}else{h+="<"+l+"><li>content</li></"+l+">"}}var m=dojo.doc.createElement("div");m.style.position="absolute";m.style.left="-2000px";m.style.top="-2000px";dojo.doc.body.appendChild(m);m.innerHTML=h;var g=m.firstChild;while(g){dijit._editor.selection.selectElement(g.firstChild);dojo.withGlobal(this.window,"selectElement",dijit._editor.selection,[g.firstChild]);var a=g.tagName.toLowerCase();this._local2NativeFormatNames[a]=dojo.doc.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[a]]=a;g=g.nextSibling}dojo.doc.body.removeChild(m)},open:function(element){if((!this.onLoadDeferred)||(this.onLoadDeferred.fired>=0)){this.onLoadDeferred=new dojo.Deferred()}if(!this.isClosed){this.close()}dojo.publish(dijit._scopeName+"._editor.RichText::open",[this]);this._content="";if((arguments.length==1)&&(element.nodeName)){this.domNode=element}var html;if((this.domNode.nodeName)&&(this.domNode.nodeName.toLowerCase()=="textarea")){this.textarea=this.domNode;this.name=this.textarea.name;html=this._preFilterContent(this.textarea.value);this.domNode=dojo.doc.createElement("div");this.domNode.setAttribute("widgetId",this.id);this.textarea.removeAttribute("widgetId");this.domNode.cssText=this.textarea.cssText;this.domNode.className+=" "+this.textarea.className;dojo.place(this.domNode,this.textarea,"before");var tmpFunc=dojo.hitch(this,function(){dojo.attr(this.textarea,"tabIndex","-1");with(this.textarea.style){display="block";position="absolute";left=top="-1000px";if(dojo.isIE){this.__overflow=overflow;overflow="hidden"}}});if(dojo.isIE){setTimeout(tmpFunc,10)}else{tmpFunc()}}else{html=this._preFilterContent(dijit._editor.getChildrenHtml(this.domNode));this.domNode.innerHTML=""}if(html==""){html="&nbsp;"}var content=dojo.contentBox(this.domNode);this._oldHeight=content.h;this._oldWidth=content.w;if((this.domNode.nodeName)&&(this.domNode.nodeName=="LI")){this.domNode.innerHTML=" <br>"}this.editingArea=dojo.doc.createElement("div");this.domNode.appendChild(this.editingArea);if(this.name!=""&&(!dojo.config.useXDomain||dojo.config.allowXdRichTextSave)){var saveTextarea=dojo.byId(dijit._scopeName+"._editor.RichText.savedContent");if(saveTextarea.value!=""){var datas=saveTextarea.value.split(this._SEPARATOR),i=0,dat;while((dat=datas[i++])){var data=dat.split(":");if(data[0]==this.name){html=data[1];datas.splice(i,1);break}}}this.connect(window,"onbeforeunload","_saveContent")}this.isClosed=false;if(dojo.isIE||dojo.isSafari||dojo.isOpera){if(dojo.config.useXDomain&&!dojo.config.dojoBlankHtmlUrl){console.debug("dijit._editor.RichText: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl to the path on your domain to blank.html")}var burl=dojo.config.dojoBlankHtmlUrl||(dojo.moduleUrl("dojo","resources/blank.html")+"");var ifr=this.editorObject=this.iframe=dojo.doc.createElement("iframe");ifr.id=this.id+"_iframe";ifr.src=burl;ifr.style.border="none";ifr.style.width="100%";ifr.frameBorder=0;this.editingArea.appendChild(ifr);var h=null;var loadFunc=dojo.hitch(this,function(){if(h){dojo.disconnect(h);h=null}this.window=ifr.contentWindow;var d=this.document=this.window.document;d.open();d.write(this._getIframeDocTxt(html));d.close();if(dojo.isIE>=7){if(this.height){ifr.style.height=this.height}if(this.minHeight){ifr.style.minHeight=this.minHeight}}else{ifr.style.height=this.height?this.height:this.minHeight}if(dojo.isIE){this._localizeEditorCommands()}this.onLoad();this.savedContent=this.getValue(true)});if(dojo.isIE&&dojo.isIE<7){var t=setInterval(function(){if(ifr.contentWindow.isLoaded){clearInterval(t);loadFunc()}},100)}else{h=dojo.connect(((dojo.isIE)?ifr.contentWindow:ifr),"onload",loadFunc)}}else{this._drawIframe(html);this.savedContent=this.getValue(true)}if(this.domNode.nodeName=="LI"){this.domNode.lastChild.style.marginTop="-1.2em"}this.domNode.className+=" RichTextEditable"},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_localizedIframeTitles:null,_getIframeDocTxt:function(b){var g=dojo.getComputedStyle(this.domNode);if(dojo.isIE||(!this.height&&!dojo.isMoz)){b="<div>"+b+"</div>"}var a=[g.fontWeight,g.fontSize,g.fontFamily].join(" ");var f=g.lineHeight;if(f.indexOf("px")>=0){f=parseFloat(f)/parseFloat(g.fontSize)}else{if(f.indexOf("em")>=0){f=parseFloat(f)}else{f="1.0"}}return[this.isLeftToRight()?"<html><head>":"<html dir='rtl'><head>",(dojo.isMoz?"<title>"+this._localizedIframeTitles.iframeEditTitle+"</title>":""),"<style>","body,html {","	background:transparent;","	font:",a,";","	padding: 1em 0 0 0;","	margin: -1em 0 0 0;","	height: 100%;","}","body{","	top:0px; left:0px; right:0px;",((this.height||dojo.isOpera)?"":"position: fixed;"),"	min-height:",this.minHeight,";","	line-height:",f,"}","p{ margin: 1em 0 !important; }",(this.height?"":"body,html{height:auto;overflow-y:hidden;/*for IE*/} body > div {overflow-x:auto;/*for FF to show vertical scrollbar*/}"),"li > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; } ","li{ min-height:1.2em; }","</style>",this._applyEditingAreaStyleSheets(),"</head><body>"+b+"</body></html>"].join("")},_drawIframe:function(l){if(!this.iframe){var o=this.iframe=dojo.doc.createElement("iframe");o.id=this.id;var m=o.style;m.border="none";m.lineHeight="0";m.verticalAlign="bottom";this.editorObject=this.iframe;this._localizedIframeTitles=dojo.i18n.getLocalization("dijit.form","Textarea");var h=dojo.query('label[for="'+this.id+'"]');if(h.length){this._localizedIframeTitles.iframeEditTitle=h[0].innerHTML+" "+this._localizedIframeTitles.iframeEditTitle}}this.iframe.style.width=this.inheritWidth?this._oldWidth:"100%";if(this.height){this.iframe.style.height=this.height}else{this.iframe.height=this._oldHeight}var g;if(this.textarea){g=this.srcNodeRef}else{g=dojo.doc.createElement("div");g.style.display="none";g.innerHTML=l;this.editingArea.appendChild(g)}this.editingArea.appendChild(this.iframe);var a=false;var f=this.iframe.contentDocument;f.open();if(dojo.isAIR){f.body.innerHTML=l}else{f.write(this._getIframeDocTxt(l))}f.close();var b=dojo.hitch(this,function(){if(!a){a=true}else{return}if(!this.editNode){try{if(this.iframe.contentWindow){this.window=this.iframe.contentWindow;this.document=this.iframe.contentWindow.document}else{if(this.iframe.contentDocument){this.window=this.iframe.contentDocument.window;this.document=this.iframe.contentDocument}}if(!this.document.body){throw"Error"}}catch(p){setTimeout(b,500);a=false;return}dojo._destroyElement(g);this.onLoad()}else{dojo._destroyElement(g);this.editNode.innerHTML=l;this.onDisplayChanged()}this._preDomFilterContent(this.editNode)});b()},_applyEditingAreaStyleSheets:function(){var g=[];if(this.styleSheets){g=this.styleSheets.split(";");this.styleSheets=""}g=g.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var h="",f=0,b;while((b=g[f++])){var a=(new dojo._Url(dojo.global.location,b)).toString();this.editingAreaStyleSheets.push(a);h+='<link rel="stylesheet" type="text/css" href="'+a+'"/>'}return h},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString()}if(dojo.indexOf(this.editingAreaStyleSheets,url)>-1){return}this.editingAreaStyleSheets.push(url);if(this.document.createStyleSheet){this.document.createStyleSheet(url)}else{var head=this.document.getElementsByTagName("head")[0];var stylesheet=this.document.createElement("link");with(stylesheet){rel="stylesheet";type="text/css";href=url}head.appendChild(stylesheet)}},removeStyleSheet:function(f){var b=f.toString();if(b.charAt(0)=="."||(b.charAt(0)!="/"&&!f.host)){b=(new dojo._Url(dojo.global.location,b)).toString()}var a=dojo.indexOf(this.editingAreaStyleSheets,b);if(a==-1){return}delete this.editingAreaStyleSheets[a];dojo.withGlobal(this.window,"query",dojo,['link:[href="'+b+'"]']).orphan()},disabled:true,_mozSettingProps:["styleWithCSS","insertBrOnReturn"],setDisabled:function(a){if(dojo.isIE||dojo.isSafari||dojo.isOpera){if(dojo.isIE){this.editNode.unselectable="on"}this.editNode.contentEditable=!a;if(dojo.isIE){var b=this;setTimeout(function(){b.editNode.unselectable="off"},0)}}else{if(a){this._mozSettings=[false,this.blockNodeForEnter==="BR"]}this.document.designMode=(a?"off":"on");if(!a&&this._mozSettings){dojo.forEach(this._mozSettingProps,function(g,f){this.document.execCommand(g,false,this._mozSettings[f])},this)}}this.disabled=a},_isResized:function(){return false},onLoad:function(m){this.isLoaded=true;if(!this.window.__registeredWindow){this.window.__registeredWindow=true;dijit.registerWin(this.window)}if(!dojo.isIE&&(this.height||dojo.isMoz)){this.editNode=this.document.body}else{this.editNode=this.document.body.firstChild;var o=this;if(dojo.isIE){var l=this.tabStop=dojo.doc.createElement("<div tabIndex=-1>");this.editingArea.appendChild(l);this.iframe.onfocus=function(){o.editNode.setActive()}}}try{this.setDisabled(false)}catch(m){var f=dojo.connect(this,"onClick",this,function(){this.setDisabled(false);dojo.disconnect(f)})}this._preDomFilterContent(this.editNode);var b=this.events.concat(this.captureEvents),a=0,h;while((h=b[a++])){this.connect(this.document,h.toLowerCase(),h)}if(!dojo.isIE){try{this.document.execCommand("styleWithCSS",false,false)}catch(g){}}else{this.connect(this.document,"onmousedown","_onMouseDown");this.editNode.style.zoom=1}if(this.focusOnLoad){setTimeout(dojo.hitch(this,"focus"),0)}this.onDisplayChanged(m);if(this.onLoadDeferred){this.onLoadDeferred.callback(true)}},onKeyDown:function(a){if(dojo.isIE){if(a.keyCode==dojo.keys.TAB&&a.shiftKey&&!a.ctrlKey&&!a.altKey){this.iframe.focus()}else{if(a.keyCode==dojo.keys.TAB&&!a.shiftKey&&!a.ctrlKey&&!a.altKey){this.tabStop.focus()}else{if(a.keyCode===dojo.keys.BACKSPACE&&this.document.selection.type==="Control"){dojo.stopEvent(a);this.execCommand("delete")}else{if((65<=a.keyCode&&a.keyCode<=90)||(a.keyCode>=37&&a.keyCode<=40)){a.charCode=a.keyCode;this.onKeyPress(a)}}}}}else{if(dojo.isMoz){if(a.keyCode==dojo.keys.TAB&&!a.shiftKey&&!a.ctrlKey&&!a.altKey&&this.iframe){this.iframe.contentDocument.title=this._localizedIframeTitles.iframeFocusTitle;this.iframe.focus();dojo.stopEvent(a)}else{if(a.keyCode==dojo.keys.TAB&&a.shiftKey){if(this.toolbar){this.toolbar.focus()}dojo.stopEvent(a)}}}}},onKeyUp:function(a){return},KEY_CTRL:1,KEY_SHIFT:2,onKeyPress:function(m){var b=(m.ctrlKey&&!m.altKey)?this.KEY_CTRL:0|m.shiftKey?this.KEY_SHIFT:0;var g=m.keyChar||m.keyCode;if(this._keyHandlers[g]){var a=this._keyHandlers[g],f=0,l;while((l=a[f++])){if(b==l.modifiers){if(!l.handler.apply(this,arguments)){m.preventDefault()}break}}}setTimeout(dojo.hitch(this,function(){this.onKeyPressed(m)}),1)},addKeyHandler:function(b,a,f){if(!dojo.isArray(this._keyHandlers[b])){this._keyHandlers[b]=[]}this._keyHandlers[b].push({modifiers:a||0,handler:f})},onKeyPressed:function(a){this.onDisplayChanged()},onClick:function(a){this.onDisplayChanged(a)},_onMouseDown:function(a){if(!this._focused&&!this.disabled){this.focus()}},_onBlur:function(b){this.inherited(arguments);var a=this.getValue(true);if(a!=this.savedContent){this.onChange(a);this.savedContent=a}if(dojo.isMoz&&this.iframe){this.iframe.contentDocument.title=this._localizedIframeTitles.iframeEditTitle}},_initialFocus:true,_onFocus:function(a){this.inherited(arguments);if(dojo.isMoz&&this._initialFocus){this._initialFocus=false;if(this.editNode.innerHTML.replace(/^\s+|\s+$/g,"")=="&nbsp;"){this.placeCursorAtStart()}}},blur:function(){if(!dojo.isIE&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus()}else{if(dojo.doc.body.focus){dojo.doc.body.focus()}}},focus:function(){if(!dojo.isIE){dijit.focus(this.iframe)}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject())}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(a){if(!this._updateTimer){if(this._updateTimer){clearTimeout(this._updateTimer)}this._updateTimer=setTimeout(dojo.hitch(this,this.onNormalizedDisplayChanged),this.updateInterval)}},onNormalizedDisplayChanged:function(){this._updateTimer=null},onChange:function(a){},_normalizeCommand:function(a){var b=a.toLowerCase();if(b=="hilitecolor"&&!dojo.isMoz){b="backcolor"}return b},queryCommandAvailable:function(h){var a=1;var o=1<<1;var b=1<<2;var f=1<<3;var p=1<<4;var l=dojo.isSafari;function g(q){return{ie:Boolean(q&a),mozilla:Boolean(q&o),safari:Boolean(q&b),safari420:Boolean(q&p),opera:Boolean(q&f)}}var m=null;switch(h.toLowerCase()){case"bold":case"italic":case"underline":case"subscript":case"superscript":case"fontname":case"fontsize":case"forecolor":case"hilitecolor":case"justifycenter":case"justifyfull":case"justifyleft":case"justifyright":case"delete":case"selectall":case"toggledir":m=g(o|a|b|f);break;case"createlink":case"unlink":case"removeformat":case"inserthorizontalrule":case"insertimage":case"insertorderedlist":case"insertunorderedlist":case"indent":case"outdent":case"formatblock":case"inserthtml":case"undo":case"redo":case"strikethrough":m=g(o|a|f|p);break;case"blockdirltr":case"blockdirrtl":case"dirltr":case"dirrtl":case"inlinedirltr":case"inlinedirrtl":m=g(a);break;case"cut":case"copy":case"paste":m=g(a|o|p);break;case"inserttable":m=g(o|a);break;case"insertcell":case"insertcol":case"insertrow":case"deletecells":case"deletecols":case"deleterows":case"mergecells":case"splitcell":m=g(a|o);break;default:return false}return(dojo.isIE&&m.ie)||(dojo.isMoz&&m.mozilla)||(dojo.isSafari&&m.safari)||(l&&m.safari420)||(dojo.isOpera&&m.opera)},execCommand:function(l,h){var g;this.focus();l=this._normalizeCommand(l);if(h!=undefined){if(l=="heading"){throw new Error("unimplemented")}else{if((l=="formatblock")&&dojo.isIE){h="<"+h+">"}}}if(l=="inserthtml"){h=this._preFilterContent(h);if(dojo.isIE){var o=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()=="CONTROL"){var m=o.item(0);while(o.length){o.remove(o.item(0))}m.outerHTML=h}else{o.pasteHTML(h)}o.select();g=true}else{if(dojo.isMoz&&!h.length){dojo.withGlobal(this.window,"remove",dijit._editor.selection);g=true}else{g=this.document.execCommand(l,false,h)}}}else{if((l=="unlink")&&(this.queryCommandEnabled("unlink"))&&(dojo.isMoz||dojo.isSafari)){var f=this.window.getSelection();var b=dojo.withGlobal(this.window,"getAncestorElement",dijit._editor.selection,["a"]);dojo.withGlobal(this.window,"selectElement",dijit._editor.selection,[b]);g=this.document.execCommand("unlink",false,null)}else{if((l=="hilitecolor")&&(dojo.isMoz)){this.document.execCommand("styleWithCSS",false,true);g=this.document.execCommand(l,false,h);this.document.execCommand("styleWithCSS",false,false)}else{if((dojo.isIE)&&((l=="backcolor")||(l=="forecolor"))){h=arguments.length>1?h:null;g=this.document.execCommand(l,false,h)}else{h=arguments.length>1?h:null;if(h||l!="createlink"){g=this.document.execCommand(l,false,h)}}}}}this.onDisplayChanged();return g},queryCommandEnabled:function(b){if(this.disabled){return false}b=this._normalizeCommand(b);if(dojo.isMoz||dojo.isSafari){if(b=="unlink"){return dojo.withGlobal(this.window,"hasAncestorElement",dijit._editor.selection,["a"])}else{if(b=="inserttable"){return true}}}if(dojo.isSafari){if(b=="copy"){b="cut"}else{if(b=="paste"){return true}}}var a=dojo.isIE?this.document.selection.createRange():this.document;return a.queryCommandEnabled(b)},queryCommandState:function(a){if(this.disabled){return false}a=this._normalizeCommand(a);return this.document.queryCommandState(a)},queryCommandValue:function(a){if(this.disabled){return false}a=this._normalizeCommand(a);if(dojo.isIE&&a=="formatblock"){return this._local2NativeFormatNames[this.document.queryCommandValue(a)]}return this.document.queryCommandValue(a)},placeCursorAtStart:function(){this.focus();var a=false;if(dojo.isMoz){var b=this.editNode.firstChild;while(b){if(b.nodeType==3){if(b.nodeValue.replace(/^\s+|\s+$/g,"").length>0){a=true;dojo.withGlobal(this.window,"selectElement",dijit._editor.selection,[b]);break}}else{if(b.nodeType==1){a=true;dojo.withGlobal(this.window,"selectElementChildren",dijit._editor.selection,[b]);break}}b=b.nextSibling}}else{a=true;dojo.withGlobal(this.window,"selectElementChildren",dijit._editor.selection,[this.editNode])}if(a){dojo.withGlobal(this.window,"collapse",dijit._editor.selection,[true])}},placeCursorAtEnd:function(){this.focus();var a=false;if(dojo.isMoz){var b=this.editNode.lastChild;while(b){if(b.nodeType==3){if(b.nodeValue.replace(/^\s+|\s+$/g,"").length>0){a=true;dojo.withGlobal(this.window,"selectElement",dijit._editor.selection,[b]);break}}else{if(b.nodeType==1){a=true;if(b.lastChild){dojo.withGlobal(this.window,"selectElement",dijit._editor.selection,[b.lastChild])}else{dojo.withGlobal(this.window,"selectElement",dijit._editor.selection,[b])}break}}b=b.previousSibling}}else{a=true;dojo.withGlobal(this.window,"selectElementChildren",dijit._editor.selection,[this.editNode])}if(a){dojo.withGlobal(this.window,"collapse",dijit._editor.selection,[false])}},getValue:function(a){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value}}return this._postFilterContent(null,a)},setValue:function(a){if(!this.isLoaded){this.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.setValue(a)}));return}if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=a}else{a=this._preFilterContent(a);var b=this.isClosed?this.domNode:this.editNode;b.innerHTML=a;this._preDomFilterContent(b)}this.onDisplayChanged()},replaceValue:function(a){if(this.isClosed){this.setValue(a)}else{if(this.window&&this.window.getSelection&&!dojo.isMoz){this.setValue(a)}else{if(this.window&&this.window.getSelection){a=this._preFilterContent(a);this.execCommand("selectall");if(dojo.isMoz&&!a){a="&nbsp;"}this.execCommand("inserthtml",a);this._preDomFilterContent(this.editNode)}else{if(this.document&&this.document.selection){this.setValue(a)}}}}},_preFilterContent:function(b){var a=b;dojo.forEach(this.contentPreFilters,function(f){if(f){a=f(a)}});return a},_preDomFilterContent:function(a){a=a||this.editNode;dojo.forEach(this.contentDomPreFilters,function(b){if(b&&dojo.isFunction(b)){b(a)}},this)},_postFilterContent:function(f,b){var a;if(!dojo.isString(f)){f=f||this.editNode;if(this.contentDomPostFilters.length){if(b&&f.cloneNode){f=f.cloneNode(true)}dojo.forEach(this.contentDomPostFilters,function(g){f=g(f)})}a=dijit._editor.getChildrenHtml(f)}else{a=f}if(!dojo.trim(a.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){a=""}dojo.forEach(this.contentPostFilters,function(g){a=g(a)});return a},_saveContent:function(b){var a=dojo.byId(dijit._scopeName+"._editor.RichText.savedContent");a.value+=this._SEPARATOR+this.name+":"+this.getValue()},escapeXml:function(a,b){dojo.deprecated("dijit.Editor::escapeXml is deprecated","use dijit._editor.escapeXml instead",2);return dijit._editor.escapeXml(a,b)},getNodeHtml:function(a){dojo.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit._editor.getNodeHtml instead",2);return dijit._editor.getNodeHtml(a)},getNodeChildrenHtml:function(a){dojo.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit._editor.getChildrenHtml instead",2);return dijit._editor.getChildrenHtml(a)},close:function(save,force){if(this.isClosed){return false}if(!arguments.length){save=true}this._content=this.getValue();var changed=(this.savedContent!=this._content);if(this.interval){clearInterval(this.interval)}if(dojo.isIE){this.iframe.onfocus=null}this.iframe._loadFunc=null;if(this.textarea){with(this.textarea.style){position="";left=top="";if(dojo.isIE){overflow=this.__overflow;this.__overflow=null}}this.textarea.value=save?this._content:this.savedContent;dojo._destroyElement(this.domNode);this.domNode=this.textarea}else{this.domNode.innerHTML=save?this._content:this.savedContent}delete this.iframe;dojo.removeClass(this.domNode,"RichTextEditable");this.isClosed=true;this.isLoaded=false;delete this.editNode;if(this.window&&this.window._frameElement){this.window._frameElement=null}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;return changed},destroyRendering:function(){this.inherited(arguments,[true])},destroy:function(){if(!this.isClosed){this.close(false)}this.inherited("destroy",arguments)},_removeMozBogus:function(a){return a.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"")},_removeSafariBogus:function(a){return a.replace(/\sclass="webkit-block-placeholder"/gi,"")},_fixContentForMoz:function(a){return a.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2")},_srcInImgRegex:/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,_hrefInARegex:/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,_preFixUrlAttributes:function(a){return a.replace(this._hrefInARegex,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(this._srcInImgRegex,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2")}})}if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:'<div class="dijit dijitToolbar" waiRole="toolbar" tabIndex="${tabIndex}" dojoAttachPoint="containerNode"></div>',tabIndex:"0",postCreate:function(){this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW])},startup:function(){if(this._started){return}this.startupKeyNavChildren();this.inherited(arguments)}});dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitToolbarSeparator dijitInline"></div>',postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}if(!dojo._hasResource["dijit._editor._Plugin"]){dojo._hasResource["dijit._editor._Plugin"]=true;dojo.provide("dijit._editor._Plugin");dojo.declare("dijit._editor._Plugin",null,{constructor:function(a,b){if(a){dojo.mixin(this,a)}this._connects=[]},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,queryCommand:null,command:"",commandArg:null,useDefaultCommand:true,buttonClass:dijit.form.Button,getLabel:function(a){return this.editor.commands[a]},_initButton:function(f){if(this.command.length){var a=this.getLabel(this.command);var b=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){f=dojo.mixin({label:a,showLabel:false,iconClass:b,dropDown:this.dropDown,tabIndex:"-1"},f||{});this.button=new this.buttonClass(f)}}},destroy:function(a){dojo.forEach(this._connects,dojo.disconnect)},connect:function(g,a,b){this._connects.push(dojo.connect(g,a,this,b))},updateState:function(){var a=this.editor;var b=this.command;if(!a){return}if(!a.isLoaded){return}if(!b.length){return}if(this.button){try{var f=a.queryCommandEnabled(b);this.button.setAttribute("disabled",!f);if(typeof this.button.checked=="boolean"){this.button.setAttribute("checked",a.queryCommandState(b))}}catch(g){console.debug(g)}}},setEditor:function(a){this.editor=a;this._initButton();if(this.command.length&&!this.editor.queryCommandAvailable(this.command)){if(this.button){this.button.domNode.style.display="none"}}if(this.button&&this.useDefaultCommand){this.connect(this.button,"onClick",dojo.hitch(this.editor,"execCommand",this.command,this.commandArg))}this.connect(this.editor,"onNormalizedDisplayChanged","updateState")},setToolbar:function(a){if(this.button){a.addChild(this.button)}}})}if(!dojo._hasResource["dijit.Editor"]){dojo._hasResource["dijit.Editor"]=true;dojo.provide("dijit.Editor");dojo.declare("dijit.Editor",dijit._editor.RichText,{plugins:null,extraPlugins:null,constructor:function(){if(!dojo.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull"]}this._plugins=[];this._editInterval=this.editActionInterval*1000},postCreate:function(){if(this.customUndo){dojo.require("dijit._editor.range");this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0)}if(dojo.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins)}this.inherited(arguments);this.commands=dojo.i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new dijit.Toolbar({});dojo.place(this.toolbar.domNode,this.editingArea,"before")}dojo.forEach(this.plugins,this.addPlugin,this);this.onNormalizedDisplayChanged()},destroy:function(){dojo.forEach(this._plugins,function(a){if(a&&a.destroy){a.destroy()}});this._plugins=[];this.toolbar.destroy();delete this.toolbar;this.inherited(arguments)},addPlugin:function(g,f){var b=dojo.isString(g)?{name:g}:g;if(!b.setEditor){var h={args:b,plugin:null,editor:this};dojo.publish(dijit._scopeName+".Editor.getPlugin",[h]);if(!h.plugin){var a=dojo.getObject(b.name);if(a){h.plugin=new a(b)}}if(!h.plugin){console.warn("Cannot find plugin",g);return}g=h.plugin}if(arguments.length>1){this._plugins[f]=g}else{this._plugins.push(g)}g.setEditor(this);if(dojo.isFunction(g.setToolbar)){g.setToolbar(this.toolbar)}},customUndo:dojo.isIE,editActionInterval:3,beginEditing:function(a){if(!this._inEditing){this._inEditing=true;this._beginEditing(a)}if(this.editActionInterval>0){if(this._editTimer){clearTimeout(this._editTimer)}this._editTimer=setTimeout(dojo.hitch(this,this.endEditing),this._editInterval)}},_steps:[],_undoedSteps:[],execCommand:function(h){if(this.customUndo&&(h=="undo"||h=="redo")){return this[h]()}else{try{if(this.customUndo){this.endEditing();this._beginEditing()}var g=this.inherited("execCommand",arguments);if(this.customUndo){this._endEditing()}return g}catch(l){if(dojo.isMoz&&/copy|cut|paste/.test(h)){var f=dojo.string.substitute,a={cut:"X",copy:"C",paste:"V"},b=navigator.userAgent.indexOf("Macintosh")!=-1;alert(f(this.commands.systemShortcutFF,[this.commands[h],f(this.commands[b?"appleKey":"ctrlKey"],[a[h]])]))}return false}}},queryCommandEnabled:function(a){if(this.customUndo&&(a=="undo"||a=="redo")){return a=="undo"?(this._steps.length>1):(this._undoedSteps.length>0)}else{return this.inherited("queryCommandEnabled",arguments)}},_moveToBookmark:function(a){var f=a;if(dojo.isIE){if(dojo.isArray(a)){f=[];dojo.forEach(a,function(b){f.push(dijit.range.getNode(b,this.editNode))},this)}}else{var g=dijit.range.create();g.setStart(dijit.range.getNode(a.startContainer,this.editNode),a.startOffset);g.setEnd(dijit.range.getNode(a.endContainer,this.editNode),a.endOffset);f=g}dojo.withGlobal(this.window,"moveToBookmark",dijit,[f])},_changeToStep:function(g,f){this.setValue(f.text);var a=f.bookmark;if(!a){return}this._moveToBookmark(a)},undo:function(){this.endEditing(true);var a=this._steps.pop();if(this._steps.length>0){this.focus();this._changeToStep(a,this._steps[this._steps.length-1]);this._undoedSteps.push(a);this.onDisplayChanged();return true}return false},redo:function(){this.endEditing(true);var a=this._undoedSteps.pop();if(a&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],a);this._steps.push(a);this.onDisplayChanged();return true}return false},endEditing:function(a){if(this._editTimer){clearTimeout(this._editTimer)}if(this._inEditing){this._endEditing(a);this._inEditing=false}},_getBookmark:function(){var a=dojo.withGlobal(this.window,dijit.getBookmark);var f=[];if(dojo.isIE){if(dojo.isArray(a)){dojo.forEach(a,function(b){f.push(dijit.range.getIndex(b,this.editNode).o)},this);a=f}}else{f=dijit.range.getIndex(a.startContainer,this.editNode).o;a={startContainer:f,startOffset:a.startOffset,endContainer:a.endContainer===a.startContainer?f:dijit.range.getIndex(a.endContainer,this.editNode).o,endOffset:a.endOffset}}return a},_beginEditing:function(a){if(this._steps.length===0){this._steps.push({text:this.savedContent,bookmark:this._getBookmark()})}},_endEditing:function(b){var a=this.getValue(true);this._undoedSteps=[];this._steps.push({text:a,bookmark:this._getBookmark()})},onKeyDown:function(b){if(!this.customUndo){this.inherited("onKeyDown",arguments);return}var a=b.keyCode,f=dojo.keys;if(b.ctrlKey&&!b.altKey){if(a==90||a==122){dojo.stopEvent(b);this.undo();return}else{if(a==89||a==121){dojo.stopEvent(b);this.redo();return}}}this.inherited("onKeyDown",arguments);switch(a){case f.ENTER:case f.BACKSPACE:case f.DELETE:this.beginEditing();break;case 88:case 86:if(b.ctrlKey&&!b.altKey&&!b.metaKey){this.endEditing();if(b.keyCode==88){this.beginEditing("cut");setTimeout(dojo.hitch(this,this.endEditing),1)}else{this.beginEditing("paste");setTimeout(dojo.hitch(this,this.endEditing),1)}break}default:if(!b.ctrlKey&&!b.altKey&&!b.metaKey&&(b.keyCode<dojo.keys.F1||b.keyCode>dojo.keys.F15)){this.beginEditing();break}case f.ALT:this.endEditing();break;case f.UP_ARROW:case f.DOWN_ARROW:case f.LEFT_ARROW:case f.RIGHT_ARROW:case f.HOME:case f.END:case f.PAGE_UP:case f.PAGE_DOWN:this.endEditing(true);break;case f.CTRL:case f.SHIFT:case f.TAB:break}},_onBlur:function(){this.inherited("_onBlur",arguments);this.endEditing(true)},onClick:function(){this.endEditing(true);this.inherited("onClick",arguments)}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(h){if(h.plugin){return}var f=h.args,g;var a=dijit._editor._Plugin;var b=f.name;switch(b){case"undo":case"redo":case"cut":case"copy":case"paste":case"insertOrderedList":case"insertUnorderedList":case"indent":case"outdent":case"justifyCenter":case"justifyFull":case"justifyLeft":case"justifyRight":case"delete":case"selectAll":case"removeFormat":case"insertHorizontalRule":g=new a({command:b});break;case"bold":case"italic":case"underline":case"strikethrough":case"subscript":case"superscript":g=new a({buttonClass:dijit.form.ToggleButton,command:b});break;case"|":g=new a({button:new dijit.ToolbarSeparator()})}h.plugin=g})}if(!dojo._hasResource["dojox.grid._data.dijitEditors"]){dojo._hasResource["dojox.grid._data.dijitEditors"]=true;dojo.provide("dojox.grid._data.dijitEditors");dojo.declare("dojox.grid.editors.Dijit",dojox.grid.editors.base,{editorClass:"dijit.form.TextBox",constructor:function(a){this.editor=null;this.editorClass=dojo.getObject(this.cell.editorClass||this.editorClass)},format:function(b,a){this.needFormatNode(b,a);return"<div></div>"},getValue:function(a){return this.editor.getValue()},setValue:function(b,a){if(this.editor&&this.editor.setValue){this.editor.setValue(a)}else{this.inherited(arguments)}},getEditorProps:function(a){return dojo.mixin({},this.cell.editorProps||{},{constraints:dojo.mixin({},this.cell.constraint)||{},value:a})},createEditor:function(f,b,a){return new this.editorClass(this.getEditorProps(b),f)},attachEditor:function(f,b,a){f.appendChild(this.editor.domNode);this.setValue(a,b)},formatNode:function(f,b,a){if(!this.editorClass){return b}if(!this.editor){this.editor=this.createEditor.apply(this,arguments)}else{this.attachEditor.apply(this,arguments)}this.sizeEditor.apply(this,arguments);this.cell.grid.rowHeightChanged(a);this.focus()},sizeEditor:function(h,g,f){var b=this.cell.getNode(f),a=dojo.contentBox(b);dojo.marginBox(this.editor.domNode,{w:a.w})},focus:function(a,b){if(this.editor){setTimeout(dojo.hitch(this.editor,function(){dojox.grid.fire(this,"focus")}),0)}},_finish:function(a){this.inherited(arguments);dojox.grid.removeNode(this.editor.domNode)}});dojo.declare("dojox.grid.editors.ComboBox",dojox.grid.editors.Dijit,{editorClass:"dijit.form.ComboBox",getEditorProps:function(f){var b=[];dojo.forEach(this.cell.options,function(g){b.push({name:g,value:g})});var a=new dojo.data.ItemFileReadStore({data:{identifier:"name",items:b}});return dojo.mixin({},this.cell.editorProps||{},{value:f,store:a})},getValue:function(){var a=this.editor;a.setDisplayedValue(a.getDisplayedValue());return a.getValue()}});dojo.declare("dojox.grid.editors.DateTextBox",dojox.grid.editors.Dijit,{editorClass:"dijit.form.DateTextBox",setValue:function(b,a){if(this.editor){this.editor.setValue(new Date(a))}else{this.inherited(arguments)}},getEditorProps:function(a){return dojo.mixin(this.inherited(arguments),{value:new Date(a)})}});dojo.declare("dojox.grid.editors.CheckBox",dojox.grid.editors.Dijit,{editorClass:"dijit.form.CheckBox",getValue:function(){return this.editor.checked},setValue:function(b,a){if(this.editor&&this.editor.setAttribute){this.editor.setAttribute("checked",a)}else{this.inherited(arguments)}},sizeEditor:function(f,b,a){return}});dojo.declare("dojox.grid.editors.Editor",dojox.grid.editors.Dijit,{editorClass:"dijit.Editor",getEditorProps:function(a){return dojo.mixin({},this.cell.editorProps||{},{height:this.cell.editorHeight||"100px"})},createEditor:function(g,f,b){var a=new this.editorClass(this.getEditorProps(f),g);dojo.connect(a,"onLoad",dojo.hitch(this,"populateEditor"));return a},formatNode:function(g,f,b){this.content=f;this.inherited(arguments);if(dojo.isMoz){var a=this.editor;a.open();if(this.cell.editorToolbar){dojo.place(a.toolbar.domNode,a.editingArea,"before")}}},populateEditor:function(){this.editor.setValue(this.content);this.editor.placeCursorAtEnd()}})}if(!dojo._hasResource["dojox.grid.Grid"]){dojo._hasResource["dojox.grid.Grid"]=true;dojo.provide("dojox.grid.Grid");dojo.declare("dojox.Grid",dojox.VirtualGrid,{model:"dojox.grid.data.Table",postCreate:function(){if(this.model){var a=this.model;if(dojo.isString(a)){a=dojo.getObject(a)}this.model=(dojo.isFunction(a))?new a():a;this._setModel(this.model)}this.inherited(arguments)},destroy:function(){this.setModel(null);this.inherited(arguments)},_structureChanged:function(){this.indexCellFields();this.inherited(arguments)},_setModel:function(a){this.model=a;if(this.model){this.model.observer(this);this.model.measure();this.indexCellFields()}},setModel:function(a){if(this.model){this.model.notObserver(this)}this._setModel(a)},get:function(a){return this.grid.model.getDatum(a,this.fieldIndex)},modelAllChange:function(){this.rowCount=(this.model?this.model.getRowCount():0);this.updateRowCount(this.rowCount)},modelBeginUpdate:function(){this.beginUpdate()},modelEndUpdate:function(){this.endUpdate()},modelRowChange:function(a,b){this.updateRow(b)},modelDatumChange:function(f,b,a){this.updateRow(b)},modelFieldsChange:function(){this.indexCellFields();this.render()},modelInsertion:function(a){this.updateRowCount(this.model.getRowCount())},modelRemoval:function(a){this.updateRowCount(this.model.getRowCount())},getCellName:function(f){var a=this.model.fields.values,b=f.fieldIndex;return b>=0&&b<a.length&&a[b].name||this.inherited(arguments)},indexCellFields:function(){var a=this.layout.cells;for(var b=0,f;a&&(f=a[b]);b++){if(dojo.isString(f.field)){f.fieldIndex=this.model.fields.indexOf(f.field)}}},refresh:function(){this.edit.cancel();this.model.measure()},canSort:function(a){var b=this.getSortField(a);return b&&this.model.canSort(b)},getSortField:function(a){var b=this.getCell(this.getSortIndex(a));return(b.fieldIndex+1)*(this.sortInfo>0?1:-1)},sort:function(){this.edit.apply();this.model.sort(this.getSortField())},addRow:function(a,h){this.edit.apply();var f=h||-1;if(f<0){f=this.selection.getFirstSelected()||0}if(f<0){f=0}this.model.insert(a,f);this.model.beginModifyRow(f);for(var b=0,g;((g=this.getCell(b))&&!g.editor);b++){}if(g&&g.editor){this.edit.setEditCell(g,f);this.focus.setFocusCell(g,f)}else{this.focus.setFocusCell(this.getCell(0),f)}},removeSelectedRows:function(){this.edit.apply();var a=this.selection.getSelected();if(a.length){this.model.remove(a);this.selection.clear()}},canEdit:function(a,b){return(this.model.canModify?this.model.canModify(b):true)},doStartEdit:function(a,b){this.model.beginModifyRow(b);this.onStartEdit(a,b)},doApplyCellEdit:function(a,f,b){this.model.setDatum(a,f,b);this.onApplyCellEdit(a,f,b)},doCancelEdit:function(a){this.model.cancelModifyRow(a);this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a){this.model.endModifyRow(a);this.onApplyEdit(a)},styleRowState:function(h){if(this.model.getState){var a=this.model.getState(h.index),l="";for(var f=0,b=["inflight","error","inserting"],g;g=b[f];f++){if(a[g]){l=" dojoxGrid-row-"+g;break}}h.customClasses+=l}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)}});dojox.Grid.markupFactory=function(a,f,b){var l=dojo;var g=function(o){var m=l.attr(o,"width")||"auto";if((m!="auto")&&(m.substr(-2)!="em")){m=parseInt(m)+"px"}return m};if(!a.model&&l.hasAttr(f,"store")){var h=f.cloneNode(false);l.attr(h,{jsId:null,dojoType:l.attr(f,"dataModelClass")||"dojox.grid.data.DojoData"});a.model=l.parser.instantiate([h])[0]}if(!a.structure&&f.nodeName.toLowerCase()=="table"){a.structure=l.query("> colgroup",f).map(function(p){var m=l.attr(p,"span");var o={noscroll:(l.attr(p,"noscroll")=="true")?true:false,__span:(!!m?parseInt(m):1),cells:[]};if(l.hasAttr(p,"width")){o.width=g(p)}return o});if(!a.structure.length){a.structure.push({__span:Infinity,cells:[]})}l.query("thead > tr",f).forEach(function(p,u){var o=0;var m=0;var s;var q=null;l.query("> th",p).map(function(w){if(!q){s=0;q=a.structure[0]}else{if(o>=(s+q.__span)){m++;s+=q.__span;lastView=q;q=a.structure[m]}}var v={name:l.trim(l.attr(w,"name")||w.innerHTML),field:l.trim(l.attr(w,"field")||""),colSpan:parseInt(l.attr(w,"colspan")||1)};o+=v.colSpan;v.field=v.field||v.name;v.width=g(w);if(!q.cells[u]){q.cells[u]=[]}q.cells[u].push(v)})})}return new dojox.Grid(a,f)};dojox.grid.Grid=dojox.Grid}if(!dojo._hasResource["srmdojoc.grid.SPGrid"]){dojo._hasResource["srmdojoc.grid.SPGrid"]=true;dojo.provide("srmdojoc.grid.SPGrid");dojo.declare("srmdojoc.grid.SPGrid",dojox.grid.Grid,{selectable:true,postrender:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,this.selectable)},setSelectable:function(a){this.selectable=a},onRowContextMenu:function(a){if(a.target.nodeName!="A"||(a.target.nodeName=="A"&&a.target.href.toLowerCase().indexOf("javascript:")==0)){dojo.stopEvent(a)}}})}if(!dojo._hasResource["srmdojoc.SRMDateTimeTextBox"]){dojo._hasResource["srmdojoc.SRMDateTimeTextBox"]=true;dojo.provide("srmdojoc.SRMDateTimeTextBox");dojo.declare("srmdojoc.SRMDateTimeTextBox",dijit.form.RangeBoundTextBox,{regExpGen:dojo.date.locale.regexp,compare:dojo.date.compare,format:function(a,b){if(!a){return""}return dojo.date.locale.format(a,b)},parse:function(a,b){return dojo.date.locale.parse(a,b)||undefined},serialize:dojo.date.stamp.toISOString,value:new Date(""),popupClass:"dijit._Calendar",_selector:"",postMixInProperties:function(){this.inherited(arguments);if(!this.value||this.value.toString()==srmdojoc.SRMDateTimeTextBox.prototype.value.toString()){this.value=undefined}var b=this.constraints;b.selector=this._selector;b.fullYear=true;var a=dojo.date.stamp.fromISOString;if(typeof b.min=="string"){b.min=a(b.min)}if(typeof b.max=="string"){b.max=a(b.max)}},_onFocus:function(a){this._open()},setValue:function(f,b,a){this.inherited(arguments);if(this._picker){if(!f){f=new Date()}this._picker.setValue(f)}},_open:function(){if(this.disabled||this.readOnly||!this.popupClass){return}var b=this;if(!this._picker){var a=dojo.getObject(this.popupClass,false);this._picker=new a({onValueSelected:function(f){b.focus();setTimeout(dojo.hitch(b,"_close"),1);srmdojoc.SRMDateTimeTextBox.superclass.setValue.call(b,f,true)},lang:b.lang,constraints:b.constraints,isDisabledDate:function(f){var g=dojo.date.compare;var h=b.constraints;return h&&(h.min&&(g(h.min,f,"date")>0)||(h.max&&g(h.max,f,"date")<0))}});this._picker.setValue(this.getValue()||new Date())}if(!this._opened){dijit.popup.open({parent:this,popup:this._picker,around:this.domNode,onCancel:dojo.hitch(this,this._close),onClose:function(){b._opened=false}});this._opened=true}dojo.marginBox(this._picker.domNode,{w:this.domNode.offsetWidth})},_close:function(){if(this._opened){dijit.popup.close(this._picker);this._opened=false}},_onBlur:function(){this._close();if(this._picker){this._picker.destroy();delete this._picker}this.inherited(arguments)},getDisplayedValue:function(){return this.textbox.value},setDisplayedValue:function(b,a){this.setValue(this.parse(b,this.constraints),a,b)},destroy:function(){if(this._picker){this._picker.destroy();delete this._picker}this.inherited(arguments)},_onKeyPress:function(a){if(srmdojoc.SRMDateTimeTextBox.superclass._onKeyPress.apply(this,arguments)){if(this._opened&&a.keyCode==dojo.keys.ESCAPE&&!a.shiftKey&&!a.ctrlKey&&!a.altKey){this._close();dojo.stopEvent(a)}}}})}if(!dojo._hasResource["srmdojoc.SRMDateTimeTextBox2"]){dojo._hasResource["srmdojoc.SRMDateTimeTextBox2"]=true;dojo.provide("srmdojoc.SRMDateTimeTextBox2");dojo.declare("srmdojoc.SRMDateTimeTextBox2",srmdojoc.SRMDateTimeTextBox,{format:function(a,b){if(!a||!this.isValidDate(a)){return""}return dojo.date.locale.format(a,b)},isValidDate:function(a){if(Object.prototype.toString.call(a)!=="[object Date]"){return false}return !isNaN(a.getTime())}})}if(!dojo._hasResource["srmdojoc.grid.editors.SRMDateTimeTextBox"]){dojo._hasResource["srmdojoc.grid.editors.SRMDateTimeTextBox"]=true;dojo.provide("srmdojoc.grid.editors.SRMDateTimeTextBox");dojo.declare("srmdojoc.grid.editors.SRMDateTimeTextBox",dojox.grid.editors.Dijit,{editorClass:"srmdojoc.SRMDateTimeTextBox2",setValue:function(b,a){console.log("in srmdojoc.grid.editors.SRMDateTimeTextBox; inValue-->"+a);if(this.editor){this.editor.setValue(new Date(a))}else{this.inherited(arguments)}},apply:function(a){console.log("in srmdojoc.grid.editors.SRMDateTimeTextBox  apply"+this.getValue(a));this.cell.applyEdit((this.getValue(a)||""),a);this._finish(a)},getEditorProps:function(a){return dojo.mixin(this.inherited(arguments),{value:new Date(a)})}})}if(!dojo._hasResource["srmdojoc.layout.CONFTree"]){dojo._hasResource["srmdojoc.layout.CONFTree"]=true;dojo.provide("srmdojoc.layout.CONFTree");dojo.declare("srmdojoc.layout._CONFTreeNode",dijit._TreeNode,{setLabelNode:function(q){if(q!="Config & Project Data"){var A=this.tree.model.store.getValue(this.item,"id");var N=this.tree.model.store.getValue(this.item,"name");var F=this.tree.model.store.getValue(this.item,"ocm");var M=this.tree.model.store.getValue(this.item,"val");var J=this.tree.model.store.getValue(this.item,"finalURL");var C=this.tree.model.store.getValue(this.item,"metrics");var o=this.tree.model.store.getValue(this.item,"hc");var v=this.tree.model.store.getValue(this.item,"categoryName");var m=this.tree.model.store.getValue(this.item,"severityId");var p=this.tree.model.store.getValue(this.item,"finding");var u=this.tree.model.store.getValue(this.item,"expandMetricTypes");var K=this.tree.model.store.getValue(this.item,"metricsName");var f=this.tree.model.store.getValue(this.item,"metricsType");var g=this.tree.model.store.getValue(this.item,"targetId");var L=this.tree.model.store.getValue(this.item,"expandHCDetails");var h=this.tree.model.store.getValue(this.item,"orgId");var E=this.tree.model.store.getValue(this.item,"csiNumber");var x=this.tree.model.store.getValue(this.item,"projectPopup");var H=this.tree.model.store.getValue(this.item,"configurationPopup");var B=this.tree.model.store.getValue(this.item,"targetPopup");var a=this.tree.model.store.getValue(this.item,"hostPopup");var z=true;var y=dijit.byId("configuration").getValue();var l=dijit.byId("hostId").getValue();if(A=="0"){if(N=="No project and configuration data exist for this SR!"){emptyCONFTree()}else{nonEmptyCONFTree()}}this.labelNode.innerHTML="";if(M!=null&&M!="undefined"){var I=new dijit.form.CheckBox();I.setAttribute("name","chk");I.setAttribute("id",A);I.setAttribute("value",M);I.setAttribute("ref","chk");I.setAttribute("comment","");this.labelNode.appendChild(I.domNode)}if(F!=null&&F!="undefined"){var G=new dijit.form.CheckBox();G.setAttribute("name","ocmchk");G.setAttribute("value","");G.setAttribute("disabled","true");G.checked=F;this.labelNode.appendChild(G.domNode)}else{if(J!=null&&J!="undefined"){if(L!=null&&L!="undefined"){this.labelNode.appendChild(dojo.doc.createTextNode(" ["));var s=dojo.doc.createElement("a");s.setAttribute("evtConn",dojo.connect(s,"onclick",function(O){expandHCDetails(v,g,m,M)}));s.setAttribute("href","#");s.setAttribute("class","link");s.appendChild(dojo.doc.createTextNode(" + "));this.labelNode.appendChild(s);this.labelNode.appendChild(dojo.doc.createTextNode("]"));this.labelNode.appendChild(dojo.doc.createTextNode(" "))}var g;if(C=="yes"){g=J;J="/oip/faces/secure/ml3/csm/detailedUI/metricDefaultDetail.jspx"}var w=dojo.doc.createElement("a");var D=getSrNumber();var b={};if(!isEmptyVal(D)){b.sr_number=D}if(C!="yes"){if(x=="yes"){w.setAttribute("evtConn",dojo.connect(w,"onclick",function(O){mos.viewProjectInPopup(J,E,h,b)}))}else{if(H=="yes"){w.setAttribute("evtConn",dojo.connect(w,"onclick",function(O){viewCSMConfig(E,h,y,N,D,z)}))}else{if(a=="yes"){w.setAttribute("evtConn",dojo.connect(w,"onclick",function(O){viewCSMHost(E,h,l,N,D,z)}))}else{w.setAttribute("evtConn",dojo.connect(w,"onclick",function(O){windowOpener(J)}))}}}}else{if(B=="yes"){w.setAttribute("evtConn",dojo.connect(w,"onclick",function(O){mos.viewTargetInPopup(g,E,h,b)}))}else{w.setAttribute("evtConn",dojo.connect(w,"onclick",function(O){displayMetrics(g)}))}}if(o=="yes"){g=J;J="/oip/faces/secure/ml3/csm/detailedUI/hc_summary.jspx";w.setAttribute("evtConn",dojo.connect(w,"onclick",function(O){displayHCsummary(g)}))}if((v==null||v=="undefined")&&m!=null&&m!="undefined"){g=J;J="/oip/faces/secure/srm/srview/HCFindings.jspx?finding=none&targetId="+g+"&categoryName=all&severityId="+m+"&"+buildThisSRDetailsURL();w.setAttribute("evtConn",dojo.connect(w,"onclick",function(O){windowOpener(J)}))}if(v!=null&&v!="undefined"){g=J;if(p=="yes"){J="/oip/faces/secure/srm/srview/HCFindings.jspx?finding="+N+"&targetId="+g+"&categoryName="+v+"&severityId="+m+"&"+buildThisSRDetailsURL()}else{J="/oip/faces/secure/srm/srview/HCFindings.jspx?finding=none&targetId="+g+"&categoryName="+v+"&severityId="+m+"&"+buildThisSRDetailsURL()}w.setAttribute("evtConn",dojo.connect(w,"onclick",function(O){windowOpener(J)}))}w.setAttribute("id",A);w.setAttribute("href","#");w.setAttribute("class","link");w.appendChild(dojo.doc.createTextNode(N));this.labelNode.appendChild(w)}else{if(u!=null&&u!="undefined"){this.labelNode.appendChild(dojo.doc.createTextNode(" ["));var s=dojo.doc.createElement("a");s.setAttribute("evtConn",dojo.connect(s,"onclick",function(O){expandMetricTypes(K,f,g,M)}));s.setAttribute("href","#");s.setAttribute("class","link");s.appendChild(dojo.doc.createTextNode(" + "));this.labelNode.appendChild(s);this.labelNode.appendChild(dojo.doc.createTextNode("]"));this.labelNode.appendChild(dojo.doc.createTextNode(" "))}this.labelNode.appendChild(dojo.doc.createTextNode(N))}}}else{this.labelNode.appendChild(dojo.doc.createTextNode(q))}},setChildItems:function(f){var a=this.tree,g=a.model;this.getChildren().forEach(function(l){dijit._Container.prototype.removeChild.call(this,l)},this);this.state="LOADED";if(f&&f.length>0){this.isExpandable=true;if(!this.containerNode){this.containerNode=this.tree.containerNodeTemplate.cloneNode(true);this.domNode.appendChild(this.containerNode)}dojo.forEach(f,function(o){var p=g.getIdentity(o),l=a._itemNodeMap[p],m=(l&&!l.getParent())?l:new srmdojoc.layout._CONFTreeNode({item:o,tree:a,isExpandable:g.mayHaveChildren(o),label:a.getLabel(o)});this.addChild(m);a._itemNodeMap[p]=m;if(this.tree.persist){if(a._openedItemIds[p]){a._expandNode(m)}}},this);dojo.forEach(this.getChildren(),function(m,l){m._updateLayout()})}else{this.isExpandable=false}if(this._setExpando){this._setExpando(false)}if(!this.parent){var h=this.tree.showRoot?this:this.getChildren()[0],b=h?h.labelNode:this.domNode;b.setAttribute("tabIndex","0")}if(this.containerNode&&!this._wipeIn){this._wipeIn=dojo.fx.wipeIn({node:this.containerNode,duration:150});this._wipeOut=dojo.fx.wipeOut({node:this.containerNode,duration:150})}}});dojo.declare("srmdojoc.layout.CONFTree",dijit.Tree,{_load:function(){this.model.getRoot(dojo.hitch(this,function(a){var b=this.rootNode=new srmdojoc.layout._CONFTreeNode({item:a,tree:this,isExpandable:true,label:this.label||this.getLabel(a)});if(!this.showRoot){b.rowNode.style.display="none"}this.domNode.appendChild(b.domNode);this._itemNodeMap[this.model.getIdentity(a)]=b;b._updateLayout();this._expandNode(b)}),function(a){console.error(this,": error loading root: ",a)})}})}if(!dojo._hasResource["srmdojoc.layout.CustomButton"]){dojo._hasResource["srmdojoc.layout.CustomButton"]=true;dojo.provide("srmdojoc.layout.CustomButton");dojo.declare("srmdojoc.layout.CustomButton",dijit.form.Button,{iconClass2:"",templateString:"",templateString:'<div class="dijit dijitReset dijitLeft dijitInline"\n\tdojoAttachEvent="ondijitclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"\n\twaiRole="presentation"\n\t><div class="dijitReset dijitStretch dijitButtonNode dijitButtonContents" dojoAttachPoint="focusNode,titleNode"\n\t\ttype="${type}" waiRole="button" waiState="labelledby-${id}_label"\n\t\t><span class="dijitReset dijitInline ${iconClass}" dojoAttachPoint="iconNode"\n \t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#10003;</span\n\t\t></span\n\t\t><div class="dijitReset dijitInline"><center class="dijitReset dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode">${label}<span class="dijitReset dijitInline ${iconClass2}" dojoAttachPoint="iconNode2"\n \t\t></span></center></div\n\t></div\n></div>\n'})}if(!dojo._hasResource["srmdojoc.layout.CustomDropDownButton"]){dojo._hasResource["srmdojoc.layout.CustomDropDownButton"]=true;dojo.provide("srmdojoc.layout.CustomDropDownButton");dojo.declare("srmdojoc.layout.CustomDropDownButton",dijit.form.DropDownButton,{templateString:"",templateString:'<div class="dijit dijitReset dijitLeft dijitInline"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\n\twaiRole="presentation"\n\t><div class=\'dijitReset dijitRight\' waiRole="presentation"\n\t><div class="dijitReset dijitStretch dijitButtonNode dijitButtonContents" type="${type}"\n\t\tdojoAttachPoint="focusNode,titleNode" waiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t><div class="dijitReset dijitInline ${iconClass}" dojoAttachPoint="iconNode" waiRole="presentation"></div\n\t\t><div class="dijitReset dijitInline dijitButtonText"  dojoAttachPoint="containerNode,popupStateNode" waiRole="presentation"\n\t\t\tid="${id}_label">${label}</div\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" waiRole="presentation">&thinsp;</div\n\t\t><div class="dijitReset dijitInline dijitArrowButtonChar" waiRole="presentation">&#9660;</div\n\t></div\n></div></div>\n'})}if(!dojo._hasResource["srmdojoc.layout.DACTree"]){dojo._hasResource["srmdojoc.layout.DACTree"]=true;dojo.provide("srmdojoc.layout.DACTree");dojo.declare("srmdojoc.layout._DACTreeNode",dijit._TreeNode,{setLabelNode:function(label){if(label!="Service Request"){var id=this.tree.model.store.getValue(this.item,"id");var attachId=this.tree.model.store.getValue(this.item,"attachId");var name=this.tree.model.store.getValue(this.item,"name");var val=this.tree.model.store.getValue(this.item,"val");var uploaddate=this.tree.model.store.getValue(this.item,"uploaddate");var filesize=this.tree.model.store.getValue(this.item,"filesize");var audience=this.tree.model.store.getValue(this.item,"audience");var fileUploadComment=this.tree.model.store.getValue(this.item,"fileUploadComment");var createdby=this.tree.model.store.getValue(this.item,"createdby");var finalUrl=this.tree.model.store.getValue(this.item,"finalUrl");var viewAttachmentInISSV=this.tree.model.store.getValue(this.item,"viewAttachmentInISSV");var drilldown=this.tree.model.store.getValue(this.item,"drilldown");var archiveChildCount=this.tree.model.store.getValue(this.item,"archiveChildCount");var notSelectable=this.tree.model.store.getValue(this.item,"notSelectable");var extras=this.tree.model.store.getValue(this.item,"extras");this.labelNode.innerHTML="";if(name!="File not found on the server!!!"&&name!="Drill down was not possible!!!"&&notSelectable!="true"){var chk=new dijit.form.CheckBox();chk.setAttribute("name","chk");chk.setAttribute("id",id);if(val!=null&&val!="undefined"){chk.setAttribute("value",val)}else{if(finalUrl!=null&&finalUrl!="undefined"){chk.setAttribute("value","key="+name+"val="+finalUrl+"~~~")}else{chk.setAttribute("value",name)}}chk.setAttribute("ref","chk");chk.setAttribute("comment","");this.labelNode.appendChild(chk.domNode)}if(viewAttachmentInISSV!=null){var img=dojo.doc.createElement("img");img.setAttribute("src","../images/filedownload_ena.png");img.setAttribute("style","vertical-align:middle");img.setAttribute("title","Checkout File");img.setAttribute("evtConn",dojo.connect(img,"onclick",function(evt){var ndx=viewAttachmentInISSV.search(/javascript:/ig);if(ndx!=-1){viewAttachmentInISSV=viewAttachmentInISSV.replace(/javascript:/ig,"");eval("("+viewAttachmentInISSV+")");return false}else{var win=window.open(viewAttachmentInISSV,"iss","height=800,width=850,resizable=no,scrollbars=yes,toolbar=no,menubar=no,status=no,dependant=yes");win.focus()}}));img.setAttribute("id",id);img.setAttribute("href","#");img.setAttribute("class","link");img.appendChild(dojo.doc.createTextNode(name));this.labelNode.appendChild(img)}if(drilldown!=null&&drilldown!="undefined"){this.labelNode.appendChild(dojo.doc.createTextNode(" ["));var drilldownLink=dojo.doc.createElement("a");drilldownLink.setAttribute("evtConn",dojo.connect(drilldownLink,"onclick",function(evt){drilldownArchive(name,finalUrl)}));drilldownLink.setAttribute("href","#");drilldownLink.setAttribute("class","link");drilldownLink.appendChild(dojo.doc.createTextNode(" + "));this.labelNode.appendChild(drilldownLink);this.labelNode.appendChild(dojo.doc.createTextNode("]"));this.labelNode.appendChild(dojo.doc.createTextNode(" "))}if(finalUrl!=null&&finalUrl!="undefined"){var newlink=dojo.doc.createElement("a");newlink.setAttribute("evtConn",dojo.connect(newlink,"onclick",function(evt){var ndx=finalUrl.search(/javascript:/ig);if(ndx!=-1){finalUrl=finalUrl.replace(/javascript:/ig,"");eval("("+finalUrl+")");return false}else{var win=window.open(finalUrl,"iss","height=800,width=850,resizable=no,scrollbars=yes,toolbar=no,menubar=no,status=no,dependant=yes");win.focus()}}));newlink.setAttribute("id",id);newlink.setAttribute("href","#");newlink.setAttribute("class","link");newlink.appendChild(dojo.doc.createTextNode(name));this.labelNode.appendChild(newlink)}else{this.labelNode.appendChild(dojo.doc.createTextNode(name))}var link;var url;var newlink;for(var i=0;extras!=null&&extras!="undefined"&&i<extras;i++){this.labelNode.appendChild(dojo.doc.createTextNode(" ("));link=this.tree.model.store.getValue(this.item,"link"+i);url=this.tree.model.store.getValue(this.item,"url"+i);if(link!=null&&link!="undefined"&&url!=null&&url!="undefined"){newlink=dojo.doc.createElement("a");newlink.setAttribute("evtConn",dojo.connect(newlink,"onclick",function(evt){var win=window.open(url,"iss","height=800,width=850,resizable=no,scrollbars=yes,toolbar=no,menubar=no,status=no,dependant=yes");win.focus()}));newlink.setAttribute("href","#");newlink.setAttribute("class","link");newlink.appendChild(dojo.doc.createTextNode(link));this.labelNode.appendChild(newlink)}else{if(link!=null&&link!="undefined"&&(url==null||url=="undefined")){this.labelNode.appendChild(dojo.doc.createTextNode(link))}}this.labelNode.appendChild(dojo.doc.createTextNode(")"))}if(uploaddate!=null&&uploaddate!="undefined"){this.labelNode.appendChild(dojo.doc.createTextNode(" ["));this.labelNode.appendChild(dojo.doc.createTextNode(uploaddate));this.labelNode.appendChild(dojo.doc.createTextNode("]"))}if(filesize!=null&&filesize!="undefined"){this.labelNode.appendChild(dojo.doc.createTextNode(" ["));this.labelNode.appendChild(dojo.doc.createTextNode(filesize));this.labelNode.appendChild(dojo.doc.createTextNode("]"))}if(createdby!=null&&createdby!="undefined"){this.labelNode.appendChild(dojo.doc.createTextNode(" ["));this.labelNode.appendChild(dojo.doc.createTextNode(createdby));this.labelNode.appendChild(dojo.doc.createTextNode("] "))}var audienceLink;if(audience!=null&&audience!="undefined"){this.labelNode.appendChild(dojo.doc.createTextNode(" ["));audienceLink=dojo.doc.createElement("a");audienceLink.setAttribute("evtConn",dojo.connect(audienceLink,"onclick",function(evt){audienceForSRAttachment(attachId,name,audience)}));audienceLink.setAttribute("href","#");audienceLink.setAttribute("class","link");audienceLink.appendChild(dojo.doc.createTextNode(audience));this.labelNode.appendChild(audienceLink);this.labelNode.appendChild(dojo.doc.createTextNode("] "))}var fileUploadCommentLink;if(fileUploadComment!=null&&fileUploadComment!="undefined"){this.labelNode.appendChild(dojo.doc.createTextNode("["));fileUploadCommentLink=dojo.doc.createElement("a");fileUploadCommentLink.setAttribute("evtConn",dojo.connect(fileUploadCommentLink,"onclick",function(evt){var win=window.open("../../../SRAttachmentsRequest?type=fileUploadComment&fileName="+name+"&"+buildThisSRDetailsURL(),"fileuploadcomment","height=200,width=850,resizable=no,scrollbars=yes,toolbar=no,menubar=no,status=no,dependant=yes");win.focus()}));fileUploadCommentLink.setAttribute("href","#");fileUploadCommentLink.setAttribute("class","link");fileUploadCommentLink.appendChild(dojo.doc.createTextNode("Note"));this.labelNode.appendChild(fileUploadCommentLink);this.labelNode.appendChild(dojo.doc.createTextNode("] "))}if(archiveChildCount!=null&&archiveChildCount!="undefined"){if(archiveChildCount>1000){showMsg("This archive contains more than 1000 files. Please download it to view the entire contents.")}}}else{var archiveFileName=getArchiveFileName();if(archiveFileName!="Service Request"){var newlink=dojo.doc.createElement("a");newlink.setAttribute("evtConn",dojo.connect(newlink,"onclick",function(evt){var win=window.open(getArchiveFileUrl(),"iss","height=800,width=850,resizable=no,scrollbars=yes,toolbar=no,menubar=no,status=no,dependant=yes");win.focus()}));newlink.setAttribute("id",id);newlink.setAttribute("href","#");newlink.setAttribute("class","link");newlink.appendChild(dojo.doc.createTextNode(archiveFileName));this.labelNode.appendChild(newlink)}else{this.labelNode.appendChild(dojo.doc.createTextNode(archiveFileName))}}},setChildItems:function(f){var a=this.tree,g=a.model;this.getChildren().forEach(function(l){dijit._Container.prototype.removeChild.call(this,l)},this);this.state="LOADED";if(f&&f.length>0){this.isExpandable=true;if(!this.containerNode){this.containerNode=this.tree.containerNodeTemplate.cloneNode(true);this.domNode.appendChild(this.containerNode)}dojo.forEach(f,function(o){var p=g.getIdentity(o),l=a._itemNodeMap[p],m=(l&&!l.getParent())?l:new srmdojoc.layout._DACTreeNode({item:o,tree:a,isExpandable:g.mayHaveChildren(o),label:a.getLabel(o)});this.addChild(m);a._itemNodeMap[p]=m;if(this.tree.persist){if(a._openedItemIds[p]){a._expandNode(m)}}},this);dojo.forEach(this.getChildren(),function(m,l){m._updateLayout()})}else{this.isExpandable=false}if(this._setExpando){this._setExpando(false)}if(!this.parent){var h=this.tree.showRoot?this:this.getChildren()[0],b=h?h.labelNode:this.domNode;b.setAttribute("tabIndex","0")}if(this.containerNode&&!this._wipeIn){this._wipeIn=dojo.fx.wipeIn({node:this.containerNode,duration:150});this._wipeOut=dojo.fx.wipeOut({node:this.containerNode,duration:150})}}});dojo.declare("srmdojoc.layout.DACTree",dijit.Tree,{_load:function(){this.model.getRoot(dojo.hitch(this,function(a){var b=this.rootNode=new srmdojoc.layout._DACTreeNode({item:a,tree:this,isExpandable:true,label:this.label||this.getLabel(a)});if(!this.showRoot){b.rowNode.style.display="none"}this.domNode.appendChild(b.domNode);this._itemNodeMap[this.model.getIdentity(a)]=b;b._updateLayout();this._expandNode(b)}),function(a){console.error(this,": error loading root: ",a)})}})}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");dojo.provide("dojo.fx.Toggler");(function(){var b={_fire:function(g,h){if(this[g]){this[g].apply(this,h||[])}return this}};var f=function(g){this._index=-1;this._animations=g||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;dojo.forEach(this._animations,function(h){this.duration+=h.duration;if(h.delay){this.duration+=h.delay}},this)};dojo.extend(f,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){dojo.disconnect(this._onAnimateCtx);dojo.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd")}else{this._current=this._animations[++this._index];this._onAnimateCtx=dojo.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=dojo.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true)}},play:function(l,g){if(!this._current){this._current=this._animations[this._index=0]}if(!g&&this._current.status()=="playing"){return this}var h=dojo.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin")}),o=dojo.connect(this._current,"onBegin",this,function(p){this._fire("onBegin",arguments)}),m=dojo.connect(this._current,"onPlay",this,function(p){this._fire("onPlay",arguments);dojo.disconnect(h);dojo.disconnect(o);dojo.disconnect(m)});if(this._onAnimateCtx){dojo.disconnect(this._onAnimateCtx)}this._onAnimateCtx=dojo.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){dojo.disconnect(this._onEndCtx)}this._onEndCtx=dojo.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var g=dojo.connect(this._current,"onPause",this,function(h){this._fire("onPause",arguments);dojo.disconnect(g)});this._current.pause()}return this},gotoPercent:function(h,g){this.pause();var l=this.duration*h;this._current=null;dojo.some(this._animations,function(m){if(m.duration<=l){this._current=m;return true}l-=m.duration;return false});if(this._current){this._current.gotoPercent(l/_current.duration,g)}return this},stop:function(g){if(this._current){if(g){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true)}this._current=this._animations[this._index]}var h=dojo.connect(this._current,"onStop",this,function(l){this._fire("onStop",arguments);dojo.disconnect(h)});this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){if(this._onAnimateCtx){dojo.disconnect(this._onAnimateCtx)}if(this._onEndCtx){dojo.disconnect(this._onEndCtx)}}});dojo.extend(f,b);dojo.fx.chain=function(g){return new f(g)};var a=function(g){this._animations=g||[];this._connects=[];this._finished=0;this.duration=0;dojo.forEach(g,function(h){var l=h.duration;if(h.delay){l+=h.delay}if(this.duration<l){this.duration=l}this._connects.push(dojo.connect(h,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=new dojo._Animation({curve:[0,1],duration:this.duration});dojo.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop"],function(h){this._connects.push(dojo.connect(this._pseudoAnimation,h,dojo.hitch(this,"_fire",h)))},this)};dojo.extend(a,{_doAction:function(h,g){dojo.forEach(this._animations,function(l){l[h].apply(l,g)});return this},_onEnd:function(){if(++this._finished==this._animations.length){this._fire("onEnd")}},_call:function(l,g){var h=this._pseudoAnimation;h[l].apply(h,g)},play:function(h,g){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(l,g){var h=this.duration*l;dojo.forEach(this._animations,function(m){m.gotoPercent(m.duration<h?1:(h/m.duration),g)});this._call("gotoProcent",arguments);return this},stop:function(g){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){dojo.forEach(this._connects,dojo.disconnect)}});dojo.extend(a,b);dojo.fx.combine=function(g){return new a(g)}})();dojo.declare("dojo.fx.Toggler",null,{constructor:function(a){var b=this;dojo.mixin(b,a);b.node=a.node;b._showArgs=dojo.mixin({},a);b._showArgs.node=b.node;b._showArgs.duration=b.showDuration;b.showAnim=b.showFunc(b._showArgs);b._hideArgs=dojo.mixin({},a);b._hideArgs.node=b.node;b._hideArgs.duration=b.hideDuration;b.hideAnim=b.hideFunc(b._hideArgs);dojo.connect(b.showAnim,"beforeBegin",dojo.hitch(b.hideAnim,"stop",true));dojo.connect(b.hideAnim,"beforeBegin",dojo.hitch(b.showAnim,"stop",true))},node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,show:function(a){return this.showAnim.play(a||0)},hide:function(a){return this.hideAnim.play(a||0)}});dojo.fx.wipeIn=function(a){a.node=dojo.byId(a.node);var f=a.node,b=f.style;var g=dojo.animateProperty(dojo.mixin({properties:{height:{start:function(){b.overflow="hidden";if(b.visibility=="hidden"||b.display=="none"){b.height="1px";b.display="";b.visibility="";return 1}else{var h=dojo.style(f,"height");return Math.max(h,1)}},end:function(){return f.scrollHeight}}}},a));dojo.connect(g,"onEnd",function(){b.height="auto"});return g};dojo.fx.wipeOut=function(a){var f=a.node=dojo.byId(a.node);var b=f.style;var g=dojo.animateProperty(dojo.mixin({properties:{height:{end:1}}},a));dojo.connect(g,"beforeBegin",function(){b.overflow="hidden";b.display=""});dojo.connect(g,"onEnd",function(){b.height="auto";b.display="none"});return g};dojo.fx.slideTo=function(a){var b=(a.node=dojo.byId(a.node));var h=null;var g=null;var l=(function(m){return function(){var p=dojo.getComputedStyle(m);var q=p.position;h=(q=="absolute"?m.offsetTop:parseInt(p.top)||0);g=(q=="absolute"?m.offsetLeft:parseInt(p.left)||0);if(q!="absolute"&&q!="relative"){var o=dojo.coords(m,true);h=o.y;g=o.x;m.style.position="absolute";m.style.top=h+"px";m.style.left=g+"px"}}})(b);l();var f=dojo.animateProperty(dojo.mixin({properties:{top:{end:a.top||0},left:{end:a.left||0}}},a));dojo.connect(f,"beforeBegin",f,l);return f}}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{isLayoutContainer:true,postCreate:function(){dojo.addClass(this.domNode,"dijitContainer")},startup:function(){if(this._started){return}dojo.forEach(this.getChildren(),function(a){a.startup()});if(!this.getParent||!this.getParent()){this.resize();this.connect(window,"onresize",function(){this.resize()})}this.inherited(arguments)},resize:function(a){var b=this.domNode;if(a){dojo.marginBox(b,a);if(a.t){b.style.top=a.t+"px"}if(a.l){b.style.left=a.l+"px"}}var f=dojo.mixin(dojo.marginBox(b),a||{});this._contentBox=dijit.layout.marginBox2contentBox(b,f);this.layout()},layout:function(){}});dijit.layout.marginBox2contentBox=function(g,h){var b=dojo.getComputedStyle(g);var f=dojo._getMarginExtents(g,b);var a=dojo._getPadBorderExtents(g,b);return{l:dojo._toPixelValue(g,b.paddingLeft),t:dojo._toPixelValue(g,b.paddingTop),w:h.w-(f.w+a.w),h:h.h-(f.h+a.h)}};(function(){var b=function(f){return f.substring(0,1).toUpperCase()+f.substring(1)};var a=function(f,g){f.resize?f.resize(g):dojo.marginBox(f.domNode,g);dojo.mixin(f,dojo.marginBox(f.domNode));dojo.mixin(f,g)};dijit.layout.layoutChildren=function(f,h,g){h=dojo.mixin({},h);dojo.addClass(f,"dijitLayoutContainer");g=dojo.filter(g,function(l){return l.layoutAlign!="client"}).concat(dojo.filter(g,function(l){return l.layoutAlign=="client"}));dojo.forEach(g,function(p){var o=p.domNode,m=p.layoutAlign;var l=o.style;l.left=h.l+"px";l.top=h.t+"px";l.bottom=l.right="auto";dojo.addClass(o,"dijitAlign"+b(m));if(m=="top"||m=="bottom"){a(p,{w:h.w});h.h-=p.h;if(m=="top"){h.t+=p.h}else{l.top=h.t+h.h+"px"}}else{if(m=="left"||m=="right"){a(p,{h:h.h});h.w-=p.w;if(m=="left"){h.l+=p.w}else{l.left=h.l+h.w+"px"}}else{if(m=="client"){a(p,h)}}}})}})()}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,"class":"dijitContentPane",doLayout:"auto",postCreate:function(){this.domNode.title="";if(!this.containerNode){this.containerNode=this.domNode}if(this.preload){this._loadCheck()}var a=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a);var b=dijit.getWaiRole(this.domNode);if(!b){dijit.setWaiRole(this.domNode,"group")}dojo.addClass(this.domNode,this["class"])},startup:function(){if(this._started){return}if(this.doLayout!="false"&&this.doLayout!==false){this._checkIfSingleChild();if(this._singleChild){this._singleChild.startup()}}this._loadCheck();this.inherited(arguments)},_checkIfSingleChild:function(){var b=dojo.query(">",this.containerNode||this.domNode),a=b.filter("[widgetId]");if(b.length==1&&a.length==1){this.isContainer=true;this._singleChild=dijit.byNode(a[0])}else{delete this.isContainer;delete this._singleChild}},refresh:function(){return this._prepareLoad(true)},setHref:function(a){this.href=a;return this._prepareLoad()},setContent:function(a){if(!this._isDownloaded){this.href="";this._onUnloadHandler()}this._setContent(a||"");this._isDownloaded=false;if(this.parseOnLoad){this._createSubWidgets()}if(this.doLayout!="false"&&this.doLayout!==false){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){this._singleChild.startup();this._singleChild.resize(this._contentBox||dojo.contentBox(this.containerNode||this.domNode))}}this._onLoadHandler()},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel()}delete this._xhrDfd},destroy:function(){if(this._beingDestroyed){return}this._onUnloadHandler();this._beingDestroyed=true;this.inherited("destroy",arguments)},resize:function(a){dojo.marginBox(this.domNode,a);var b=this.containerNode||this.domNode,f=dojo.mixin(dojo.marginBox(b),a||{});this._contentBox=dijit.layout.marginBox2contentBox(b,f);if(this._singleChild&&this._singleChild.resize){this._singleChild.resize(this._contentBox)}},_prepareLoad:function(a){this.cancel();this.isLoaded=false;this._loadCheck(a)},_isShown:function(){if("open" in this){return this.open}else{var a=this.domNode;return(a.style.display!="none")&&(a.style.visibility!="hidden")}},_loadCheck:function(b){var a=this._isShown();if(this.href&&(b||(this.preload&&!this._xhrDfd)||(this.refreshOnShow&&a&&!this._xhrDfd)||(!this.isLoaded&&a&&!this._xhrDfd))){this._downloadExternalContent()}},_downloadExternalContent:function(){this._onUnloadHandler();this._setContent(this.onDownloadStart.call(this));var b=this;var f={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(f,this.ioArgs)}var a=this._xhrDfd=(this.ioMethod||dojo.xhrGet)(f);a.addCallback(function(g){try{b.onDownloadEnd.call(b);b._isDownloaded=true;b.setContent.call(b,g)}catch(h){b._onError.call(b,"Content",h)}delete b._xhrDfd;return g});a.addErrback(function(g){if(!a.cancelled){b._onError.call(b,"Download",g)}delete b._xhrDfd;return g})},_onLoadHandler:function(){this.isLoaded=true;try{this.onLoad.call(this)}catch(a){console.error("Error "+this.widgetId+" running custom onLoad code")}},_onUnloadHandler:function(){this.isLoaded=false;this.cancel();try{this.onUnload.call(this)}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code")}},_setContent:function(a){this.destroyDescendants();try{var b=this.containerNode||this.domNode;while(b.firstChild){dojo._destroyElement(b.firstChild)}if(typeof a=="string"){if(this.extractContent){match=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(match){a=match[1]}}b.innerHTML=a}else{if(a.nodeType){b.appendChild(a)}else{dojo.forEach(a,function(h){b.appendChild(h.cloneNode(true))})}}}catch(g){var f=this.onContentError(g);try{b.innerHTML=f}catch(g){console.error("Fatal "+this.id+" could not change content due to "+g.message,g)}}},_onError:function(b,g,a){var f=this["on"+b+"Error"].call(this,g);if(a){console.error(a,g)}else{if(f){this._setContent.call(this,f)}}},_createSubWidgets:function(){var a=this.containerNode||this.domNode;try{dojo.parser.parse(a,true)}catch(b){this._onError("Content",b,"Couldn't create widgets in "+this.id+(this.href?" from "+this.href:""))}},onLoad:function(a){},onUnload:function(a){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(a){},onDownloadError:function(a){return this.errorMessage},onDownloadEnd:function(){}})}if(!dojo._hasResource["dijit.TitlePane"]){dojo._hasResource["dijit.TitlePane"]=true;dojo.provide("dijit.TitlePane");dojo.declare("dijit.TitlePane",[dijit.layout.ContentPane,dijit._Templated],{title:"",open:true,duration:250,baseClass:"dijitTitlePane",templateString:'<div class="${baseClass}">\n\t<div dojoAttachEvent="onclick:toggle,onkeypress: _onTitleKey,onfocus:_handleFocus,onblur:_handleFocus" tabindex="0"\n\t\t\twaiRole="button" class="dijitTitlePaneTitle" dojoAttachPoint="titleBarNode,focusNode">\n\t\t<div dojoAttachPoint="arrowNode" class="dijitInline dijitArrowNode"><span dojoAttachPoint="arrowNodeInner" class="dijitArrowNodeInner"></span></div>\n\t\t<div dojoAttachPoint="titleNode" class="dijitTitlePaneTextNode"></div>\n\t</div>\n\t<div class="dijitTitlePaneContentOuter" dojoAttachPoint="hideNode">\n\t\t<div class="dijitReset" dojoAttachPoint="wipeNode">\n\t\t\t<div class="dijitTitlePaneContentInner" dojoAttachPoint="containerNode" waiRole="region" tabindex="-1">\n\t\t\t\t<!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. -->\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n',postCreate:function(){this.setTitle(this.title);if(!this.open){this.hideNode.style.display=this.wipeNode.style.display="none"}this._setCss();dojo.setSelectable(this.titleNode,false);this.inherited(arguments);dijit.setWaiState(this.containerNode,"labelledby",this.titleNode.id);dijit.setWaiState(this.focusNode,"haspopup","true");var b=this.hideNode,a=this.wipeNode;this._wipeIn=dojo.fx.wipeIn({node:this.wipeNode,duration:this.duration,beforeBegin:function(){b.style.display=""}});this._wipeOut=dojo.fx.wipeOut({node:this.wipeNode,duration:this.duration,onEnd:function(){b.style.display="none"}})},setContent:function(a){if(!this.open||this._wipeOut.status()=="playing"){this.inherited(arguments)}else{if(this._wipeIn.status()=="playing"){this._wipeIn.stop()}dojo.marginBox(this.wipeNode,{h:dojo.marginBox(this.wipeNode).h});this.inherited(arguments);this._wipeIn.play()}},toggle:function(){dojo.forEach([this._wipeIn,this._wipeOut],function(a){if(a.status()=="playing"){a.stop()}});this[this.open?"_wipeOut":"_wipeIn"].play();this.open=!this.open;this._loadCheck();this._setCss()},_setCss:function(){var a=["dijitClosed","dijitOpen"];var f=this.open;var b=this.titleBarNode||this.focusNode;dojo.removeClass(b,a[!f+0]);b.className+=" "+a[f+0];this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(a){if(a.keyCode==dojo.keys.ENTER||a.charCode==dojo.keys.SPACE){this.toggle()}else{if(a.keyCode==dojo.keys.DOWN_ARROW&&this.open){this.containerNode.focus();a.preventDefault()}}},_handleFocus:function(a){dojo[(a.type=="focus"?"addClass":"removeClass")](this.focusNode,this.baseClass+"Focused")},setTitle:function(a){this.titleNode.innerHTML=a}})}if(!dojo._hasResource["srmdojoc.layout.DetachMoveTitlePane"]){dojo._hasResource["srmdojoc.layout.DetachMoveTitlePane"]=true;dojo.provide("srmdojoc.layout.DetachMoveTitlePane");dojo.declare("srmdojoc.layout.DetachMoveTitlePane",dijit.TitlePane,{templateString:"",templateString:'<div class="dijitTitlePane" >\n\n    <div class="dijitTitlePaneTitle" \n        dojoAttachPoint="titleBarNode" \n        style="cursor: default; width:100%; ">\n        <span  class="dijitInline" style="width:99%">\n            <!-- arrow to collapse pane -->\n            <span dojoAttachEvent="onclick:toggle,onkeypress: _onTitleKey,onfocus:_handleFocus,onblur:_handleFocus" \n                  tabindex="0"\n                  waiRole="button"\n                  dojoAttachPoint="focusNode,arrowNode"\n                  class="dijitInline dijitArrowNode" \n                  style="float:left; cursor: pointer;">\n                <span dojoAttachPoint="arrowNodeInner" \n                      class="dijitArrowNodeInner" \n                      style="float:left;" ></span>         \n            </span>\n            \n            <!-- Title-->\n            <span style="float:left;" >   \n                <span dojoAttachPoint="titleImgNode"  \n                      style="display:none;"> \n                    <img src="${titleImgSrc}" \n                         title="Global"\n                         alt="Global" ></img>\n                </span>\n        \n                <span dojoAttachPoint="titleNode" class="dijitTitlePaneTextNode" ></span>\n                <span style="display:none;" dojoAttachPoint="titleNode2" class="dijitTitlePaneTextNode" ></span> \n            </span>  \n         \n            <!--span class="dijitInline"   style="margin-right: 4px;float:right;"-->\n            <!-- IMAGE BUTTONS ON TOP RIGHT OF DASHBOARD WIDGETS CMS,EDP,GPAM\n            ... ODD ADMIN FIRST HERE IS LAST IN THE LIST                    -->\n\n            <span  style="float:right; margin-right: 4px; "> \n                <!-- Hideable checkbox (on admin page only) -->\n                <span dojoAttachpoint="globalHideWidgetNode"\n                      style="vertical-align:middle;"    >\n                    <input dojoAttachPoint="globalHideWidgetCheckboxNode" \n                           dojoAttachEvent="onclick:_hideWidgetCheckboxClick"  \n                           type="checkbox" \n                           name="hideWidget" \n                           tabindex="0"/>\n                    <span>Hideable</span>\n                </span>\n        \n                <!--Add New Section Icon -->\n                <span dojoAttachpoint="addPaneNode" \n                      style="display:inline">\n                    <img dojoAttachPoint="addPaneImgNode" \n                         src="${addPaneImgSrc}"\n                         title="${addPaneTitle}"\n                         alt="${addPaneTitle}"\n                         dojoAttachEvent="ondijitclick:_onAddPaneImgClick"             \n                         onmouseover="this.style.border=\'1px solid #585858\';"\n                         onmouseout="this.style.border=\'1px transparent\';"\n                         style="cursor: pointer; vertical-align:middle; "\n                         tabindex="0"></img>        \n                </span>\n        \n                <!--Detach Icon, was onclick="detach( dijit.byId(this.parentNode.parentNode.id));"  -->\n                <span>\n                    <img dojoAttachPoint="detachImgNode"\n                         src="${detachImgSrc}"  \n                         title="${detachImgTitle}"\n                         alt="${detachImgTitle}"\n                         onclick="detach(this);"              \n                         onmouseover="this.style.border=\'1px solid #585858\';"\n                         onmouseout="this.style.border=\'1px transparent\';"\n                         style="cursor: pointer; vertical-align:middle;" \n                         tabindex="0"></img>\n                </span>\n        \n                <!--Click and Drag Icon, was: onclick=""  -->\n                <span class="dojoDndHandle">\n                    <img dojoAttachPoint="moveImgNode"\n                         src="${moveImgSrc}"\n                         title="${moveImgTitle}"\n                         alt="${moveImgTitle}"\n                         onmouseover="this.style.border=\'1px solid #585858\';"\n                         onmouseout="this.style.border=\'1px transparent\';"\n                         onclick=""\n                         style="cursor: move; vertical-align:middle; " \n                        tabindex="0"></img>\n                </span>  \n        \n                <!--Delete Icon-->\n                <span>\n                    <img dojoAttachPoint="deleteImgNode" \n                         src="${deleteImgSrc}"\n                         title="${deleteImgTitle}"\n                         alt="${deleteImgTitle}"\n                         dojoAttachEvent="ondijitclick:_onDeleteImgClick"    \n                         onmouseover="this.style.border=\'1px solid #585858\';"\n                         onmouseout="this.style.border=\'1px transparent\';"\n                         style="cursor:pointer; vertical-align:middle;" \n                        tabindex="0"></img>    \n                </span>      \n       \n                <!--Admin Icon-->       \n                <span dojoAttachPoint="adminPaneNode">     \n                   <img dojoAttachPoint="adminImgNode"\n                        src="${adminImgSrc}"\n                        title="${adminImgTitle}"             \n                        alt="${adminImgTitle}"\n                        dojoAttachEvent="ondijitclick:_onAdminImgClick"    \n                        onmouseover="this.style.border=\'1px solid #585858\';"\n                        onmouseout="this.style.border=\'1px transparent\';"\n                        style="cursor:pointer;vertical-align:middle; " \n                        tabindex="0"></img>   \n                </span>\n            </span>\n        </span>\n    </div>\n    \n    <div class="dijitTitlePaneContentOuter" \n         dojoAttachPoint="hideNode"\n         style="cursor: default;" >\n        <div class="dijitReset" \n             dojoAttachPoint="wipeNode">\n            <div class="dijitTitlePaneContentInner"\n                 dojoAttachPoint="containerNode"\n                 waiRole="region"\n                 tabindex="-1"></div>\n        </div>\n    </div>\n    \n</div>\n',moveImgSrc:"",moveImgTitle:"",adminImgSrc:"",adminImgTitle:"",detachImgSrc:"",detachImgTitle:"",deleteImgSrc:"",deleteImgTitle:"",deleteFunction:"",adminFunction:null,addPaneImgSrc:null,addPaneTitle:null,addPaneFunction:null,dndNodeUniqueId:"",widgetModelId:"",isHideable:false,isHideControlActive:false,titleImgSrc:"../images/tree_globalsite_transparent.gif",titleNode2Name:"",multipleAdminArray:null,postCreate:function(){this.inherited(arguments);this.setTitleNode2(this.titleNode2Name);this.evaluateDisplayTitle2Node();if(this.addPaneFunction==null){}if(this.isHideControlActive!=null&&this.isHideControlActive){this.globalHideWidgetCheckboxNode.checked=this.isHideable}else{dojo.style(this.globalHideWidgetNode,{display:"none"});this.globalHideWidgetCheckboxNode.checked=false}var b=this.widgetModelId;if(this.adminFunction==null&&this.multipleAdminArray!=null){this._createAdminMenuWidget()}},_onDeleteImgClick:function(){var widgetTitle=dojo.query(".dijitTitlePaneTextNode",this.domNode);var title=widgetTitle[0].firstChild.nodeValue;if(widgetTitle[0].firstChild.nodeType!=3){title=widgetTitle[0].firstChild.firstChild.nodeValue}console.debug("widgetTitle  :"+title);var functionName=eval(this.deleteFunction);functionName(title,this.dndNodeUniqueId)},_onAdminImgClick:function(e){if(this.adminFunction!=null){var functionName=eval(this.adminFunction);functionName(this._getWidgetTitle(),this.widgetModelId)}else{return}},_onAddPaneImgClick:function(e){var functionName=eval(this.addPaneFunction);functionName(this.widgetModelId)},_hideWidgetCheckboxClick:function(a){this.isHideable=a.target.checked},getHideWidgetCheckboxValue:function(){return this.isHideable},getWidgetModelId:function(){return this.widgetModelId},setTitleNode2:function(a){this.titleNode2Name=a;this.titleNode2.innerHTML=" - "+this.titleNode2Name},clearTitleNode2:function(){this.setTitleNode2("")},toggle:function(){this.inherited(arguments);this.evaluateDisplayTitle2Node()},evaluateDisplayTitle2Node:function(){if(!this.open){dojo.style(this.titleNode2,{display:"inline"})}else{dojo.style(this.titleNode2,{display:"none"})}},_createAdminMenuWidget:function(){var tempWidgetModelId=this.widgetModelId;var widgetTitle=this._getWidgetTitle();var pMenu=new dijit.Menu({targetNodeIds:[this.adminPaneNode],leftClickToOpen:true});dojo.forEach(this.multipleAdminArray,function(adminObj,index){var menuItem=new dijit.MenuItem({label:adminObj.title,iconClass:(adminObj.iconClass!=undefined&&adminObj.iconClass!=null)?adminObj.iconClass:null,onClick:function(e){var functionName=eval(adminObj.adminFunc);functionName(widgetTitle,tempWidgetModelId)}});pMenu.addChild(menuItem)});pMenu.startup()},_getWidgetTitle:function(){var a=dojo.query(".dijitTitlePaneTextNode",this.domNode);var b=a[0].firstChild.nodeValue;if(a[0].firstChild.nodeType!=3){b=a[0].firstChild.firstChild.nodeValue}return b}});function detach(a){var b=a.parentNode.parentNode.parentNode.parentNode.parentNode;detachTitlePaneWidget(dijit.byNode(b))}function detachTitlePaneWidget(f){var h=f.domNode;var o=h.parentNode;f.moveImgNode.style.visibility="hidden";f.detachImgNode.style.visibility="hidden";f.deleteImgNode.style.visibility="hidden";f.adminImgNode.style.visibility="hidden";f.addPaneImgNode.style.visibility="hidden";var p=dojo.query(".dijitAccordionContainer",h);if(p!=null&&p.length>0){dojo.style(p[0],{height:""})}var a=new dijit.Dialog({refocus:false,title:"Detached "+f.title,style:"width: 98%; height: 99%"});a.setContent(h);var l=dijit.byNode(p[0]);var b=parseInt(window.screen.availHeight);var m=parseInt(b-350);if(dojo.isIE>0){m=parseInt(b-390)}var g=m+"px";if(m<10){g=WIDGET_DEFAULT_HEIGHT+"px"}resizeDijitNode(l,g);dojo.connect(a,"hide",function(){console.debug("detached dialog hide");var q=dojo.query(".dijitDropDownButton",this.containerNode.firstChild);dojo.forEach(q,function(s){var v=dijit.byNode(s);var u=v.dropDown;u.onClose()});o.appendChild(f.domNode);f.moveImgNode.style.visibility="visible";f.detachImgNode.style.visibility="visible";f.deleteImgNode.style.visibility="visible";f.adminImgNode.style.visibility="visible";f.addPaneImgNode.style.visibility="visible";resizeDijitNode(dijit.byNode(p[0]),WIDGET_DEFAULT_HEIGHT);dialogGridResize(h)});dojo.connect(a,"onOpen",dialogGridResize(h));a.show()}function dialogGridResize(g){var f=dojo.query(".dojoxGrid",g);if(f!=null&&f.length>0){for(i=0;i<2;i++){if(f.length>i){dijit.byNode(f[i]).resize();var b=dijit.byNode(f[i]);var a=b.views.views[1];dojo.connect(a,"renderHeader",function(){setSortArrows(b)})}}}}}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit.Menu",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{constructor:function(){this._bindings=[]},templateString:'<table class="dijit dijitMenu dijitReset dijitMenuTable" waiRole="menu" dojoAttachEvent="onkeypress:_onKeyPress"><tbody class="dijitReset" dojoAttachPoint="containerNode"></tbody></table>',targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,parentMenu:null,popupDelay:500,_contextMenuWithMouse:false,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body())}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this)}this.connectKeyNavHandlers([dojo.keys.UP_ARROW],[dojo.keys.DOWN_ARROW])},startup:function(){if(this._started){return}dojo.forEach(this.getChildren(),function(a){a.startup()});this.startupKeyNavChildren();this.inherited(arguments)},onExecute:function(){},onCancel:function(a){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(a)}},_onKeyPress:function(a){if(a.ctrlKey||a.altKey){return}switch(a.keyCode){case dojo.keys.RIGHT_ARROW:this._moveToPopup(a);dojo.stopEvent(a);break;case dojo.keys.LEFT_ARROW:if(this.parentMenu){this.onCancel(false)}else{dojo.stopEvent(a)}break}},onItemHover:function(a){this.focusChild(a);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay)}},_onChildBlur:function(a){dijit.popup.close(a.popup);a._blur();this._stopPopupTimer()},onItemUnhover:function(a){},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null}},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu){}return a},onItemClick:function(b,a){if(b.disabled){return false}if(b.popup){if(!this.is_open){this._openPopup()}}else{this.onExecute();b.onClick(a)}},_iframeContentWindow:function(a){var b=dijit.getDocumentWindow(dijit.Menu._iframeContentDocument(a))||dijit.Menu._iframeContentDocument(a)["__parent__"]||(a.name&&dojo.doc.frames[a.name])||null;return b},_iframeContentDocument:function(a){var b=a.contentDocument||(a.contentWindow&&a.contentWindow.document)||(a.name&&dojo.doc.frames[a.name]&&dojo.doc.frames[a.name].document)||null;return b},bindDomNode:function(a){a=dojo.byId(a);var b=dijit.getDocumentWindow(a.ownerDocument);if(a.tagName.toLowerCase()=="iframe"){b=this._iframeContentWindow(a);a=dojo.withGlobal(b,dojo.body)}var f=(a==dojo.body()?dojo.doc:a);a[this.id]=this._bindings.push([dojo.connect(f,(this.leftClickToOpen)?"onclick":"oncontextmenu",this,"_openMyself"),dojo.connect(f,"onkeydown",this,"_contextKey"),dojo.connect(f,"onmousedown",this,"_contextMouse")])},unBindDomNode:function(h){var g=dojo.byId(h);if(g){var f=g[this.id]-1,a=this._bindings[f];dojo.forEach(a,dojo.disconnect);delete this._bindings[f]}},_contextKey:function(b){this._contextMenuWithMouse=false;if(b.keyCode==dojo.keys.F10){dojo.stopEvent(b);if(b.shiftKey&&b.type=="keydown"){var a={target:b.target,pageX:b.pageX,pageY:b.pageY};a.preventDefault=a.stopPropagation=function(){};window.setTimeout(dojo.hitch(this,function(){this._openMyself(a)}),1)}}},_contextMouse:function(a){this._contextMenuWithMouse=true},_openMyself:function(l){if(this.leftClickToOpen&&l.button>0){return}dojo.stopEvent(l);var a,m;if(dojo.isSafari||this._contextMenuWithMouse){a=l.pageX;m=l.pageY}else{if(!l.target&&l.srcElement){l.target=l.srcElement}var h=dojo.coords(l.target,true);a=h.x+10;m=h.y+10}var f=this;var b=dijit.getFocus(this);function g(){dijit.focus(b);dijit.popup.close(f)}dijit.popup.open({popup:this,x:a,y:m,onExecute:g,onCancel:g,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this)}},onOpen:function(a){this.isShowingNow=true},onClose:function(){this._stopPopupTimer();this.parentMenu=null;this.isShowingNow=false;this.currentPopup=null;if(this.focusedChild){this._onChildBlur(this.focusedChild);this.focusedChild=null}},_openPopup:function(){this._stopPopupTimer();var from_item=this.focusedChild;var popup=from_item.popup;if(popup.isShowingNow){return}popup.parentMenu=this;var self=this;with(popup.domNode.style){width="";height=""}var best=dijit.popup.open({parent:this,popup:popup,around:from_item.arrowCell,orient:this.isLeftToRight()?{TR:"TL",TL:"TR"}:{TL:"TR",TR:"TL"},onCancel:function(){dijit.popup.close(popup);from_item.focus();self.currentPopup=null}});this.currentPopup=popup;var newwidth=best.w;if(best.h<popup.domNode.scrollHeight){newwidth+=16}if(dojo.isIE){popup.domNode.parentNode.style.height=best.h+"px";popup.domNode.parentNode.style.overflowY="auto";popup.domNode.parentNode.style.overflowX="hidden"}popup.domNode.style.overflow="auto";dojo.marginBox(popup.domNode,{h:best.h,w:Math.max(newwidth,this.domNode.offsetWidth)});if(popup.focus){popup.focus()}},uninitialize:function(){dojo.forEach(this.targetNodeIds,this.unBindDomNode,this);this.inherited(arguments)}});dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:'<tr class="dijitReset dijitMenuItem" dojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick"><td class="dijitReset"><div class="dijitMenuItemIcon ${iconClass}" dojoAttachPoint="iconNode"></div></td><td tabIndex="-1" class="dijitReset dijitMenuItemLabel" dojoAttachPoint="containerNode,focusNode" waiRole="menuitem"></td><td class="dijitReset" dojoAttachPoint="arrowCell"><div class="dijitMenuExpand" dojoAttachPoint="expand" style="display:none"><span class="dijitInline dijitArrowNode dijitMenuExpandInner">+</span></div></td></tr>',label:"",iconClass:"",disabled:false,postCreate:function(){dojo.setSelectable(this.domNode,false);this.setDisabled(this.disabled);if(this.label){this.setLabel(this.label)}},_onHover:function(){this.getParent().onItemHover(this)},_onUnhover:function(){this.getParent().onItemUnhover(this)},_onClick:function(a){this.getParent().onItemClick(this,a);dojo.stopEvent(a)},onClick:function(a){},focus:function(){dojo.addClass(this.domNode,"dijitMenuItemHover");try{dijit.focus(this.containerNode)}catch(a){}},_blur:function(){dojo.removeClass(this.domNode,"dijitMenuItemHover")},setLabel:function(a){this.containerNode.innerHTML=this.label=a},setDisabled:function(a){this.disabled=a;dojo[a?"addClass":"removeClass"](this.domNode,"dijitMenuItemDisabled");dijit.setWaiState(this.containerNode,"disabled",a?"true":"false")}});dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(this._started){return}this.inherited(arguments);if(!this.popup){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(a)}dojo.body().appendChild(this.popup.domNode);this.popup.domNode.style.display="none";dojo.addClass(this.expand,"dijitMenuExpandEnabled");dojo.style(this.expand,"display","");dijit.setWaiState(this.containerNode,"haspopup","true")},destroyDescendants:function(){if(this.popup){this.popup.destroyRecursive();delete this.popup}this.inherited(arguments)}});dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:'<tr class="dijitMenuSeparator"><td colspan=3><div class="dijitMenuSeparatorTop"></div><div class="dijitMenuSeparatorBottom"></div></td></tr>',postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,_started:false,postCreate:function(){dijit.setWaiRole((this.containerNode||this.domNode),"tabpanel");this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(this._started){return}var a=this.getChildren();dojo.forEach(a,this._setupChild,this);dojo.some(a,function(f){if(f.selected){this.selectedChildWidget=f}return f.selected},this);var b=this.selectedChildWidget;if(!b&&a[0]){b=this.selectedChildWidget=a[0];b.selected=true}if(b){this._showChild(b)}dojo.publish(this.id+"-startup",[{children:a,selected:b}]);this.inherited(arguments)},_setupChild:function(a){a.domNode.style.display="none";a.domNode.style.position="relative";return a},addChild:function(b,a){dijit._Container.prototype.addChild.apply(this,arguments);b=this._setupChild(b);if(this._started){this.layout();dojo.publish(this.id+"-addChild",[b,a]);if(!this.selectedChildWidget){this.selectChild(b)}}},removeChild:function(b){dijit._Container.prototype.removeChild.apply(this,arguments);if(this._beingDestroyed){return}if(this._started){dojo.publish(this.id+"-removeChild",[b]);this.layout()}if(this.selectedChildWidget===b){this.selectedChildWidget=undefined;if(this._started){var a=this.getChildren();if(a.length){this.selectChild(a[0])}}}},selectChild:function(a){a=dijit.byId(a);if(this.selectedChildWidget!=a){this._transition(a,this.selectedChildWidget);this.selectedChildWidget=a;dojo.publish(this.id+"-selectChild",[a])}},_transition:function(b,a){if(a){this._hideChild(a)}this._showChild(b);if(this.doLayout&&b.resize){b.resize(this._containerContentBox||this._contentBox)}},_adjacent:function(b){var f=this.getChildren();var a=dojo.indexOf(f,this.selectedChildWidget);a+=b?1:f.length-1;return f[a%f.length]},forward:function(){this.selectChild(this._adjacent(true))},back:function(){this.selectChild(this._adjacent(false))},_onKeyPress:function(a){dojo.publish(this.id+"-containerKeyPress",[{e:a,page:this}])},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._contentBox)}},_showChild:function(b){var a=this.getChildren();b.isFirstChild=(b==a[0]);b.isLastChild=(b==a[a.length-1]);b.selected=true;b.domNode.style.display="";if(b._loadCheck){b._loadCheck()}if(b.onShow){b.onShow()}},_hideChild:function(a){a.selected=false;a.domNode.style.display="none";if(a.onHide){a.onHide()}},closeChild:function(b){var a=b.onClose(this,b);if(a){this.removeChild(b);b.destroyRecursive()}},destroy:function(){this._beingDestroyed=true;this.inherited(arguments)}});dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){dijit.setWaiRole(this.domNode,"tablist");this.pane2button={};this.pane2menu={};this._subscriptions=[dojo.subscribe(this.containerId+"-startup",this,"onStartup"),dojo.subscribe(this.containerId+"-addChild",this,"onAddChild"),dojo.subscribe(this.containerId+"-removeChild",this,"onRemoveChild"),dojo.subscribe(this.containerId+"-selectChild",this,"onSelectChild"),dojo.subscribe(this.containerId+"-containerKeyPress",this,"onContainerKeyPress")]},onStartup:function(a){dojo.forEach(a.children,this.onAddChild,this);this.onSelectChild(a.selected)},destroy:function(){for(var a in this.pane2button){this.onRemoveChild(a)}dojo.forEach(this._subscriptions,dojo.unsubscribe);this.inherited(arguments)},onAddChild:function(m,b){var h=dojo.doc.createElement("span");this.domNode.appendChild(h);var g=dojo.getObject(this.buttonWidget);var l=new g({label:m.title,closeButton:m.closable},h);this.addChild(l,b);this.pane2button[m]=l;m.controlButton=l;dojo.connect(l,"onClick",dojo.hitch(this,"onButtonClick",m));if(m.closable){dojo.connect(l,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",m));var f=dojo.i18n.getLocalization("dijit","common");var a=new dijit.Menu({targetNodeIds:[l.id],id:l.id+"_Menu"});var o=new dijit.MenuItem({label:f.itemClose});dojo.connect(o,"onClick",dojo.hitch(this,"onCloseButtonClick",m));a.addChild(o);this.pane2menu[m]=a}if(!this._currentChild){l.focusNode.setAttribute("tabIndex","0");this._currentChild=m}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList()}},onRemoveChild:function(b){if(this._currentChild===b){this._currentChild=null}var a=this.pane2button[b];var f=this.pane2menu[b];if(f){f.destroy()}if(a){a.destroy()}this.pane2button[b]=null},onSelectChild:function(g){if(!g){return}if(this._currentChild){var b=this.pane2button[this._currentChild];b.setAttribute("checked",false);b.focusNode.setAttribute("tabIndex","-1")}var f=this.pane2button[g];f.setAttribute("checked",true);this._currentChild=g;f.focusNode.setAttribute("tabIndex","0");var a=dijit.byId(this.containerId);dijit.setWaiState(a.containerNode||a.domNode,"labelledby",f.id)},onButtonClick:function(b){var a=dijit.byId(this.containerId);a.selectChild(b)},onCloseButtonClick:function(g){var f=dijit.byId(this.containerId);f.closeChild(g);var a=this.pane2button[this._currentChild];if(a){dijit.focus(a.focusNode||a.domNode)}},adjacent:function(a){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){a=!a}var b=this.getChildren();var f=dojo.indexOf(b,this.pane2button[this._currentChild]);var g=a?1:b.length-1;return b[(f+g)%b.length]},onkeypress:function(f){if(this.disabled||f.altKey){return}var b=null;if(f.ctrlKey||!f._djpage){var a=dojo.keys;switch(f.keyCode){case a.LEFT_ARROW:case a.UP_ARROW:if(!f._djpage){b=false}break;case a.PAGE_UP:if(f.ctrlKey){b=false}break;case a.RIGHT_ARROW:case a.DOWN_ARROW:if(!f._djpage){b=true}break;case a.PAGE_DOWN:if(f.ctrlKey){b=true}break;case a.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild)}dojo.stopEvent(f);break;default:if(f.ctrlKey){if(f.keyCode==a.TAB){this.adjacent(!f.shiftKey).onClick();dojo.stopEvent(f)}else{if(f.keyChar=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild)}dojo.stopEvent(f)}}}}if(b!==null){this.adjacent(b).onClick();dojo.stopEvent(f)}}},onContainerKeyPress:function(a){a.e._djpage=a.page;this.onkeypress(a.e)}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",postCreate:function(a){dijit.setWaiRole((this.focusNode||this.domNode),"tab");this.inherited(arguments)},onClick:function(a){dijit.focus(this.focusNode)},onClickCloseButton:function(a){a.stopPropagation()}});dojo.extend(dijit._Widget,{title:"",selected:false,closable:false,onClose:function(){return true}})}if(!dojo._hasResource["dijit.layout.AccordionContainer"]){dojo._hasResource["dijit.layout.AccordionContainer"]=true;dojo.provide("dijit.layout.AccordionContainer");dojo.declare("dijit.layout.AccordionContainer",dijit.layout.StackContainer,{duration:250,_verticalSpace:0,postCreate:function(){this.domNode.style.overflow="hidden";this.inherited("postCreate",arguments);dijit.setWaiRole(this.domNode,"tablist");dojo.addClass(this.domNode,"dijitAccordionContainer")},startup:function(){if(this._started){return}this.inherited("startup",arguments);if(this.selectedChildWidget){var a=this.selectedChildWidget.containerNode.style;a.display="";a.overflow="auto";this.selectedChildWidget._setSelectedState(true)}},layout:function(){var f=0;var b=this.selectedChildWidget;dojo.forEach(this.getChildren(),function(g){f+=g.getTitleHeight()});var a=this._contentBox;this._verticalSpace=(a.h-f);if(b){if(this._verticalSpace<0&&dojo.isIE>0){this._verticalSpace=0}b.containerNode.style.height=this._verticalSpace+"px"}},_setupChild:function(a){return a},_transition:function(h,g){if(this._inTransition){return}this._inTransition=true;var l=[];var f=this._verticalSpace;if(h){h.setSelected(true);var b=h.containerNode;b.style.display="";l.push(dojo.animateProperty({node:b,duration:this.duration,properties:{height:{start:"1",end:f}},onEnd:function(){b.style.overflow="auto"}}))}if(g){g.setSelected(false);var a=g.containerNode;a.style.overflow="hidden";l.push(dojo.animateProperty({node:a,duration:this.duration,properties:{height:{start:f,end:"1"}},onEnd:function(){a.style.display="none"}}))}this._inTransition=false;dojo.fx.combine(l).play()},_onKeyPress:function(f){if(this.disabled||f.altKey||!(f._dijitWidget||f.ctrlKey)){return}var b=dojo.keys;var a=f._dijitWidget;switch(f.keyCode){case b.LEFT_ARROW:case b.UP_ARROW:if(a){this._adjacent(false)._onTitleClick();dojo.stopEvent(f)}break;case b.PAGE_UP:if(f.ctrlKey){this._adjacent(false)._onTitleClick();dojo.stopEvent(f)}break;case b.RIGHT_ARROW:case b.DOWN_ARROW:if(a){this._adjacent(true)._onTitleClick();dojo.stopEvent(f)}break;case b.PAGE_DOWN:if(f.ctrlKey){this._adjacent(true)._onTitleClick();dojo.stopEvent(f)}break;default:if(f.ctrlKey&&f.keyCode==b.TAB){this._adjacent(f._dijitWidget,!f.shiftKey)._onTitleClick();dojo.stopEvent(f)}}}});dojo.declare("dijit.layout.AccordionPane",[dijit.layout.ContentPane,dijit._Templated,dijit._Contained],{templateString:"<div class='dijitAccordionPane'\n\t><div dojoAttachPoint='titleNode,focusNode' dojoAttachEvent='ondijitclick:_onTitleClick,onkeypress:_onTitleKeyPress,onfocus:_handleFocus,onblur:_handleFocus'\n\t\tclass='dijitAccordionTitle' wairole=\"tab\"\n\t\t><div class='dijitAccordionArrow' waiRole=\"presentation\"></div\n\t\t><div class='arrowTextUp' waiRole=\"presentation\">&#9650;</div\n\t\t><div class='arrowTextDown' waiRole=\"presentation\">&#9660;</div\n\t\t><div waiRole=\"presentation\" dojoAttachPoint='titleTextNode' class='dijitAccordionText'>${title}</div></div\n\t><div><div dojoAttachPoint='containerNode' style='overflow: hidden; height: 1px; display: none'\n\t\tclass='dijitAccordionBody' wairole=\"tabpanel\"\n\t></div></div>\n</div>\n",postCreate:function(){this.inherited("postCreate",arguments);dojo.setSelectable(this.titleNode,false);this.setSelected(this.selected)},getTitleHeight:function(){return dojo.marginBox(this.titleNode).h},_onTitleClick:function(){var a=this.getParent();if(!a._inTransition){a.selectChild(this);dijit.focus(this.focusNode)}},_onTitleKeyPress:function(a){a._dijitWidget=this;return this.getParent()._onKeyPress(a)},_setSelectedState:function(a){this.selected=a;dojo[(a?"addClass":"removeClass")](this.titleNode,"dijitAccordionTitle-selected");this.focusNode.setAttribute("tabIndex",a?"0":"-1")},_handleFocus:function(a){dojo[(a.type=="focus"?"addClass":"removeClass")](this.focusNode,"dijitAccordionFocused")},setSelected:function(a){this._setSelectedState(a);if(a){this.onSelected();this._loadCheck(true)}},onSelected:function(){}})}if(!dojo._hasResource["srmdojoc.layout.ImageAccordion"]){dojo._hasResource["srmdojoc.layout.ImageAccordion"]=true;dojo.provide("srmdojoc.layout.ImageAccordion");dojo.declare("srmdojoc.layout.ImageAccordion",[dijit.layout.AccordionPane],{templateString:"",templateString:'<div class=\'dijitAccordionPane\'>\n    <div dojoAttachPoint=\'titleNode,focusNode\'\n         dojoAttachEvent = \'ondijitclick:_onTitleClick,onkeypress:_onTitleKeyPress,onfocus:_handleFocus,onblur:_handleFocus\'\n         class=\'dijitAccordionTitle\'\n         wairole="tab"\n         style="vertical-align:middle;">\n        \n        <div class=\'dijitAccordionArrow\'></div>\n                 \n        <span dojoAttachPoint="reorderControlNode" style="float:left;display:none;"> \n            <table border="0" cellpadding="0" cellspacing="1">\n                <tr >\n                    <td dojoAttachPoint="reorderControlNode_moveUp" >\n                        <!--div class=\'srmMoveUpArrow\'    src= "../js/dijit/themes/tundra/images/arrowUp.png"   src = "../js/dijit/themes/tundra/images/arrowDown.png"/-->\n                        <img src= "../images/spPaneUpArrow.gif"\n                             title="Move Up"                         \n                             alt="Move Up"\n                             dojoAttachEvent = "ondijitclick:_reorderControlMoveUp"></img>      \n                    </td>\n                    <td dojoAttachPoint="reorderControlNode_moveDown"  >\n                        <img src= "../images/spPaneDownArrow.gif" \n                             title="Move Down"\n                             alt="Move Down" \n                             dojoAttachEvent = "ondijitclick:_reorderControlMoveDown"></img>\n                    </td>\n                </tr>\n            </table>    \n        </span>\n                   \n        <span class=\'dijitImageAccordionConfigureNode\'>\n            <img dojoAttachPoint="configureNode" \n                 title="update ${title}"\n                 alt="update ${title}"\n                 dojoAttachEvent = "onclick:_onImgClick"\n                 onmouseover="this.style.border=\'1px solid #585858\';"\n                 onmouseout="this.style.border=\'1px solid transparent\';"  \n                 style="display:none;text-align: center;" ></img>\n        </span>\n                   \n        <span class=\'dijitImageAccordionDropDownMenu\'\n              dojoAttachPoint="dropDownMenuNode"\n              style="display:none;text-align: center;"  ></span>         \n                 \n        <span dojoAttachpoint="globalHidePaneNode" style="display:none"  >\n            <input dojoAttachPoint="globalHidePaneCheckboxNode"\n                   dojoAttachEvent = "onclick:_hidePaneCheckboxClick" \n                   type="checkbox" \n                   name="hidePane"></input>\n            <span>Hideable</span>\n            <!--img src="../js/dojo/resources/blank.gif" style="display:inline" width="4px"  ></img-->\n        </span>  \n             \n        <!--span dojoAttachPoint="paneTypeNode"  style="display:none;"> <img src="../images/tree_globalsite.gif" ></img></span-->\n        <span dojoAttachPoint="paneTypeNode" \n              style="display:none;">\n            <img src="${paneTypeNodeImgSrc}" \n                 title="Global"\n                 alt="Global" ></img>\n        </span>\n        \n        <span id=${titleSpanId} \n              class=\'dijitImageAccordionTitleText\'\n              dojoAttachPoint=\'titleTextNode\'>${title}</span>\n                \n        <!--img src="../js/dojo/resources/blank.gif" style="margin-right: 2px; float:right;" width="2px"  ></img-->\n        <span id=${rowCountSpanId} \n              class=\'dijitImageAccordionRowCount\'\n              dojoAttachPoint=\'titleRowCountNode\' >${rowCount}</span> \n        <!--  refine applied-->\n        <span id=${refineAppliedSpanId}>\n        <img dojoAttachPoint="refineAppliedImgNode" \n                 title="refine query applied" \n                 alt="refine query applied"\n                 src="${refineAppliedImgSrc}"\n                 style="display:none;visibility:hidden;vertical-align:middle;"></img>\n        </span>\n        <!--  -->\n        <img src="../js/dojo/resources/blank.gif" \n             alt=""\n             style="display:inline" \n             width="2px" ></img>\n        \n        <span>\n            <img dojoAttachPoint="loadingImgNode" \n                 title="Loading..." \n                 alt="Loading..."\n                 style="display:none;visibility:hidden;vertical-align:middle;"></img>\n        </span>\n        \n        <span>\n            <img dojoAttachPoint="refreshImgNode"\n                 src="${refreshImgSrc}" \n                 title="Re-Execute Query"\n                 alt="Re-Execute Query"\n                 dojoAttachEvent = "onclick:_onRefreshClick"     \n                 style="display:none; cursor:pointer; vertical-align:middle;"    \n                 onmouseover="this.style.border=\'1px solid #585858\';"\n                 onmouseout="this.style.border=\'1px transparent\';"></img>\n        </span>\n                       \n   </div>\n   \n   <div>\n       <div dojoAttachPoint=\'containerNode\'\n            style=\'overflow: hidden; height: 1px; display: none\'\n            class=\'dijitAccordionBody\'\n            waiRole="tabpanel" ></div>\n       </div>\n</div>\n',configureFunction:"",configureImgSrc:"",title:"",childId:"",rowCount:"&nbsp;",loadingImgSrc:"",useDropDownMenu:false,titleSpanId:null,rowCountSpanId:null,filterApplied:"",filterAction:"Filter Applied",queryMode:"",tagQuery:"",tagQueryMode:"",isViewEditable:false,tt:null,ttRowCount:null,errorStackContextPopup:null,errorStackPopUpOnContextMenu:false,refreshImgSrc:"../images/repeating_status.gif",refreshFunction:"refreshWorkingGrid",isHideable:false,isHideControlActive:false,paneTypeNodeImgSrc:"../images/tree_globalsite_transparent.gif",relatedViewId:null,errorMessage:"",reorderEnabled:false,refineAppliedImgSrc:"../images/datafilter.gif",refineApplied:"",refineAppliedSpanId:null,constructor:function(a){this.configureImgSrc=a.configureImgSrc||"";this.loadingImgSrc=a.loadingImgSrc||"";this.useDropDownMenu=a.useDropDownMenu||false;this.childId=a.childId;this.titleSpanId="titleSpanId_"+a.childId;this.rowCountSpanId="rowCountSpanId_"+a.childId;this.isViewEditable=a.isViewEditable||false;this.isHideControlActive=a.isHideControlActive||false;this.isHideable=a.isHideable||false;this.relatedViewId=a.relatedViewId||null;this.reorderEnabled=a.reorderEnabled||false;this.refineAppliedImgSrc=a.refineAppliedImgSrc||"";this.refineAppliedSpanId="refineAppliedSpanId_"+a.childId},postCreate:function(){this.inherited(arguments);this._setReorderControlNode();if(this.tt!=null){this.tt.destroyRecursive()}if(this.refineTT!=null){this.refineTT.destroyRecursive()}var a=this._getRelatedViewIdUsed()+("<b>"+this.filterAction+"</b>: "+this.filterApplied);var b=this.refineApplied;this.tt=new dijit.Tooltip({label:a,connectId:[this.titleSpanId]});this.refineTT=new dijit.Tooltip({label:b,connectId:[this.refineAppliedSpanId]});this.rowCountTooltip=this.tt.label;this.ttRowCount=new dijit.Tooltip({label:(this.rowCountTooltip),connectId:[this.rowCountSpanId]});this.errorStackContextPopup=new dijit.TooltipDialog({});dojo.connect(this.titleRowCountNode,"oncontextmenu",function(f){f.preventDefault()});dojo.connect(this.titleRowCountNode,"oncontextmenu",dojo.hitch(this,this._showErrorStack,this.errorStackContextPopup));if(this.isViewEditable!=null&&this.isViewEditable==false){dojo.forEach([this.titleRowCountNode,this.titleTextNode],function(f){dojo.removeClass(f,"spGreen");dojo.addClass(f,"spRed")})}else{dojo.forEach([this.titleRowCountNode,this.titleTextNode],function(f){dojo.removeClass(f,"spRed");dojo.addClass(f,"spGreen")})}if(this.isHideControlActive!=null&&this.isHideControlActive){dojo.style(this.globalHidePaneNode,{display:"","float":"right",visibility:"visible"});this.globalHidePaneCheckboxNode.checked=this.isHideable}else{dojo.style(this.globalHidePaneNode,{display:"none"});this.globalHidePaneCheckboxNode.checked=false}},updateFilterAndQueryModeApplied:function(b,g,f,l,a,h){this.filterAction=b;this.filterApplied=g;this.queryMode=f;this.tagQuery=a;this.tagQueryMode=h;this.refineApplied=l;this.getFilterAndQueryModeApplied();this.conditionRefineAppliedImg()},getFilterAndQueryModeApplied:function(){this.tt.label=this._getRelatedViewIdUsed()+"<b>"+this.filterAction+"</b>: "+this.filterApplied;if(this.queryMode!=null&&dojo.string.trim(this.queryMode)!=""){this.tt.label+="<br/><b>Query Mode</b>: "+this.queryMode}if(this.tagQuery!=null&&dojo.string.trim(this.tagQuery)!=""){this.tt.label+="<br/><b>Tag Query</b>: "+this.tagQuery}if(this.refineApplied!=null&&dojo.string.trim(this.refineApplied)!=""){this.tt.label+="<br/><b>Refine Query</b>: "+this.refineApplied}this.ttRowCount.label=this.tt.label;this.refineTT.label="<b>Refine Query</b>: "+this.refineApplied},conditionRefineAppliedImg:function(){if(this.refineApplied!=null&&dojo.string.trim(this.refineApplied)!=""){dojo.style(this.refineAppliedImgNode,{display:"",visibility:"visible"})}else{dojo.style(this.refineAppliedImgNode,{display:"none",visibility:"hidden"})}},updateRowCountTooltip:function(a){this.ttRowCount.label="<b>Error Message</b>: "+a+"<br/>"+this.ttRowCount.label},_onImgClick:function(){var functionName=eval(this.configureFunction);functionName(this.childId,"oper.apply")},setTitle:function(a){this.title=a;this.domNode.title=a;this.params.title=a;this.titleTextNode.firstChild.nodeValue=a},setRowCount:function(a){this.rowCount=a;this.params.rowCount=a;this.titleRowCountNode.firstChild.nodeValue="(Record Count: "+a+")"},setTitleRowCountNode:function(a){this.titleRowCountNode.firstChild.nodeValue=a},_setSelectedState:function(a){if(a){if(!this.configureImgSrc==""){dojo.attr(this.configureNode,"src",this.configureImgSrc);dojo.style(this.configureNode,{"float":"right",cursor:"pointer",display:"","margin-top":"2px","vertical-align":"middle",visibility:"visible"})}dojo.style(this.dropDownMenuNode,{"float":"right",cursor:"pointer","vertical-align":"middle",display:"",height:"8px",visibility:"visible"})}else{if(!this.configureImgSrc==""){dojo.style(this.configureNode,{visibility:"hidden",display:"none"})}dojo.style(this.dropDownMenuNode,{visibility:"hidden",display:"none"})}this.inherited(arguments)},setLoadingAnimationOn:function(){dojo.style(this.refreshImgNode,{display:"none",visibility:"hidden"});if(!this.loadingImgSrc==""){dojo.attr(this.loadingImgNode,"src",this.loadingImgSrc);dojo.style(this.loadingImgNode,{cursor:"pointer",display:"inline","vertical-align":"middle",visibility:"visible"})}},setLoadingAnimationOff:function(){if(!this.loadingImgSrc==""){dojo.style(this.loadingImgNode,{display:"none",visibility:"hidden"})}dojo.style(this.refreshImgNode,{cursor:"pointer",display:"inline","vertical-align":"middle",visibility:"visible"})},_onRefreshClick:function(){var functionName=eval(this.refreshFunction);var workingGrid=dijit.byId(this.childId);functionName(workingGrid)},_showErrorStack:function(a){if(this.errorStackpopUpContextMenu){var b=new dijit.layout.ContentPane();b.setContent(this._buildShowStackTracePane(a));a.setContent(b.domNode);dijit.popup.open({popup:a,around:this.titleRowCountNode});dojo.addClass(a.domNode,"dijitInline")}},_buildShowStackTracePane:function(a){var h=document.createElement("div");var f=new dijit.form.Button({label:"Close",onClick:function(m){m.preventDefault();dijit.popup.close(a)}});h.appendChild(f.domNode);var l=document.createElement("span");l.appendChild(document.createTextNode(this.errorMessage));var b=new dijit.layout.ContentPane();dojo.style(b.domNode,{width:"780px",height:"320px"});b.setContent(l);h.appendChild(b.domNode);var g=new dijit.form.Button({label:"Close",onClick:function(m){m.preventDefault();dijit.popup.close(a)}});h.appendChild(g.domNode);dojo.connect(a,"onBlur",this,dojo.hitch(this,function(m){dijit.popup.close(m)},a));f.focus();return h},setErrorStackMsg:function(a){this.errorMessage=a},setErrorStackPopUpOnContextMenu:function(a){this.errorStackpopUpContextMenu=a;if(false==a){this.errorMessage=""}},_hidePaneCheckboxClick:function(a){this.isHideable=a.target.checked},getHidePaneCheckboxValue:function(){return this.isHideable},_getRelatedViewIdUsed:function(){var a="";if(this.relatedViewId!=null){var b="<b>View</b>: "+this.title+(!this.isViewEditable?"(global)":"")+"_"+this.relatedViewId;a=b+"<br/>"}return a},_setReorderControlNode:function(){if(this.reorderControlNode!=undefined&&this.reorderControlNode!=null){if(this.reorderEnabled){dojo.style(this.reorderControlNode,{display:"inline"})}else{dojo.style(this.reorderControlNode,{display:"none"})}}},enableReorder:function(){this.reorderEnabled=true;this._setReorderControlNode(this.reorderEnabled)},disableReorder:function(){this.reorderEnabled=false;this._setReorderControlNode(this.reorderEnabled)},_setReorderMoveUp:function(a){if(this.reorderEnabled&&this.reorderControlNode_moveUp!=undefined&&this.reorderControlNode_moveUp!=null){if(true==a){dojo.style(this.reorderControlNode_moveUp,{display:"inline"})}else{dojo.style(this.reorderControlNode_moveUp,{display:"none"})}}},_setReorderMoveDown:function(a){if(this.reorderEnabled&&this.reorderControlNode_moveDown!=undefined&&this.reorderControlNode_moveDown!=null){if(true==a){dojo.style(this.reorderControlNode_moveDown,{display:"inline"})}else{dojo.style(this.reorderControlNode_moveDown,{display:"none"})}}},_reorderControlMoveUp:function(){},_reorderControlMoveDown:function(){},_getPanePosition:function(){var b=this.getParent().getChildren();var a=-1;var g=null;for(var f=0;f<b.length;f++){g=b[f];if(g===this){a=f;break}}return a}})}if(!dojo._hasResource["srmdojoc.layout.LazyLoadJSIStore"]){dojo._hasResource["srmdojoc.layout.LazyLoadJSIStore"]=true;dojo.provide("srmdojoc.layout.LazyLoadJSIStore");dojo.declare("srmdojoc.layout.LazyLoadJSIStore",dojo.data.ItemFileReadStore,{constructor:function(a){},isItemLoaded:function(a){if(this.getValue(a,"type")==="stub"){return false}return true},loadItem:function(w){var v=w.item;this._assertIsItem(v);var m=this.getValue(v,"type");var f=this.getValue(v,"parentName");var q=this.getValue(v,"srNo");var g=this.getValue(v,"parentId");var a=this.getValue(v,"id");var l;if(g=="undefined"){l="../../../SRAttachmentsRequest?type=expandnode&fullName="+f+"&currentNodeId="+g+"&srNo="+q+"&"+buildThisSRDetailsURL()}else{l="../../../SRAttachmentsRequest?type=expandnode&fullName="+f+"&currentNodeId="+a+"&srNo="+q+"&"+buildThisSRDetailsURL()}var u=this;var o=function(x){};var s=function(x){if(w.onError){var y=w.scope?w.scope:dojo.global;w.onError.call(y,x)}};function p(z){for(var y=1;y<z;y++){alert("x.."+y);var A={type:["stub"],id:[g+"-"+y],parent:[g]};u._arrayOfAllItems.push(A);A[u._storeRefPropName]=u;A[u._itemNumPropName]=(u._arrayOfAllItems.length-1)}}if(m==="stub"){var b={url:l,handleAs:"json-comment-optional"};var h=dojo.xhrGet(b);h.addCallback(o);h.addErrback(s);renderDAC("fromlazyload")}}})}if(!dojo._hasResource["srmdojoc.layout.SRTechTitlePane"]){dojo._hasResource["srmdojoc.layout.SRTechTitlePane"]=true;dojo.provide("srmdojoc.layout.SRTechTitlePane");dojo.declare("srmdojoc.layout.SRTechTitlePane",dijit.TitlePane,{baseClass:"dijitTitlePane",templateString:"",templateString:'<div class="${baseClass}">\n   <div class="dijitTitlePaneTitle" dojoAttachPoint="titleBarNode" style="vertical-align:middle;cursor:">\n        <div dojoAttachEvent="onclick:toggle,onkeypress: _onTitleKey,onfocus:_handleFocus,onblur:_handleFocus" tabindex="0"\n             waiRole="button" dojoAttachPoint="focusNode,arrowNode" class="dijitInline dijitArrowNode" \n             style="float:left; cursor: pointer;">\n          <span dojoAttachPoint="arrowNodeInner" class="dijitArrowNodeInner"></span>\n        </div>\n<table  cellpadding="0" cellspacing="0" border="0"  align="right"><tr>\n<td dojoAttachPoint="osnFrameRefreshButtonNode" nowrap="nowrap" align="right" valign="top" style="overflow:hidden;pdding-right:1px;margin-right:1px;"></td>\n<td dojoAttachPoint="osnFrameNode" nowrap="nowrap" align="right" valign="top" style="overflow:hidden;pdding-right:1px;margin-right:1px;"></td>\n<td nowrap="nowrap"  valign="top"><img dojoAttachPoint="osnImgNode" title="${img0title}" onclick="${img0onclick}" \n             onmouseout="this.style.border=\'1px solid transparent\';" width="25" height="16"  onmouseover="this.style.border=\'1px solid #585858\';"\n             src="${img0src}" style="${img0style}" align="right"></img></td>\n\n<td  dojoAttachPoint="reloadNode" nowrap="nowrap" align="right" valign="top">\n<span id="${messageSpanId}" dojoAttachPoint="messageNode" style="display:none;vertical-align:middle;pdding-right:1px;margin-right:1px;"></span>\n<img dojoAttachPoint="loadingImgNode" \n                 src="${loadingImgSrc}" \n                 title="Loading..." \n                 alt="Loading..."\n                 style="display:none;vertical-align:middle;pdding-right:1px;margin-right:1px;"></img>\n                  <img dojoAttachPoint="refreshImgNode"\n                 src="${refreshImgSrc}" \n                 title="Re-Execute Query"\n                 alt="Re-Execute Query"\n                 style="display:none; cursor:pointer; vertical-align:middle;pdding-right:1px;margin-right:1px;"    \n                 onmouseover="this.style.border=\'1px solid #585858\';"\n                 onmouseout="this.style.border=\'1px transparent\';"></img>\n</td>\n<td dojoAttachPoint="microsNode" nowrap="nowrap" align="right" valign="top"></td>\n<td dojoAttachPoint="addnNode" nowrap="nowrap" align="right" valign="top"></td>\n<td dojoAttachPoint="expansionNode" nowrap="nowrap" align="right" valign="top"></td>\n<td dojoAttachPoint="addn2Node" style="${addn2style}" nowrap="nowrap" align="right" valign="top"></td>\n<td dojoAttachPoint="addn3Node" nowrap="nowrap" align="right" valign="top"></td>\n<td nowrap="nowrap" valign="top"><img width="16" height="16" style="${img6style}" title="${img6title}"  onmouseover="this.style.border=\'1px solid #585858\';"\n             onmouseout="this.style.border=\'1px solid transparent\';"\n             dojoAttachPoint="customImg6Node" onclick="${img6onclick}"  src="${img6src}" align="right"></img></td>\n<td nowrap="nowrap"  valign="top"><img dojoAttachPoint="customImgNode" title="${img1title}" onclick="${img1onclick}" \n             onmouseout="this.style.border=\'1px solid transparent\';" width="16" height="16"  onmouseover="this.style.border=\'1px solid #585858\';"\n             src="${img1src}" style="${img1style}" align="right" ></img></td>\n<td nowrap="nowrap" valign="top"><img width="16" height="16" style="${img2style}"  title="${img2title}"   onmouseover="this.style.border=\'1px solid #585858\';"\n             onmouseout="this.style.border=\'1px solid transparent\';"\n             dojoAttachPoint="customImg2Node" onclick="${img2onclick}" src="${img2src}" align="right" ></img></td>\n<td nowrap="nowrap" valign="top"><img width="16" height="16" style="${img3style}" title="${img3title}"  onmouseover="this.style.border=\'1px solid #585858\';"\n             onmouseout="this.style.border=\'1px solid transparent\';"\n             dojoAttachPoint="customImg3Node" onclick="${img3onclick}"  src="${img3src}" align="right"></img></td>\n<td nowrap="nowrap" valign="top"><img width="16" height="16" style="${img5style}" title="${img5title}"  onmouseover="this.style.border=\'1px solid #585858\';"\n             onmouseout="this.style.border=\'1px solid transparent\';"\n              dojoAttachPoint="resizeImgNode" onclick="${img5onclick}"  src="${img5src}"  ></img>\n             </td> \n\n</tr></table>\n\n<!-- <div style="float:right;" dojoAttachEvent="onclick:toggle" dojoAttachPoint="arrowNode" class="dijitInline dijitArrowNode"><span dojoAttachPoint="arrowNodeInner" class="dijitArrowNodeInner"></span></div> -->\n<div dojoAttachPoint="titleNode" class="dijitTitlePaneTextNode"></div>\t\t\n                \n</div>\n\t<div class="dijitTitlePaneContentOuter" dojoAttachPoint="hideNode">\n\t\t<div class="dijitReset" dojoAttachPoint="wipeNode">\n\t\t\t<div class="dijitTitlePaneContentInner" dojoAttachPoint="containerNode" waiRole="region" tabindex="-1">\n\t\t\t\t<!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. -->\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n',img1onclick:"",img2onclick:"",img3onclick:"",img5onclick:"",img6onclick:"",img1style:"",img2style:"",img3style:"",img5style:"",img6style:"",img2src:"",img1src:"",img3src:"",img5src:"",img6src:"",img1title:"",img2title:"",img3title:"",img5title:"",img6title:"",img0src:"",img0title:"",img0onclick:"",img0style:"display:none",loadingImgSrc:"../images/ajax-loader.gif",refreshImgSrc:"../images/repeating_status.gif",errorStackContextPopup:null,errorStackPopUpOnContextMenu:false,tt:null,messageSpanId:null,errorMessage:"",addn2style:"display:none;",addn3style:"display:none;",constructor:function(a){this.messageSpanId="messageSpanId_"+a.id},postCreate:function(){this.setTitle(this.title);if(!this.open){this.hideNode.style.display=this.wipeNode.style.display="none"}this._setCss();dijit.setWaiState(this.containerNode,"labelledby",this.titleNode.id);dijit.setWaiState(this.focusNode,"haspopup","true");var b=this.hideNode,a=this.wipeNode;this._wipeIn=dojo.fx.wipeIn({node:this.wipeNode,duration:this.duration,beforeBegin:function(){b.style.display=""}});this._wipeOut=dojo.fx.wipeOut({node:this.wipeNode,duration:this.duration,onEnd:function(){b.style.display="none"}});this.tt=new dijit.Tooltip({label:this.title,connectId:[this.messageNode]});this.errorStackContextPopup=new dijit.TooltipDialog({});dojo.connect(this.messageNode,"oncontextmenu",function(f){f.preventDefault()});dojo.connect(this.messageNode,"oncontextmenu",dojo.hitch(this,this._showErrorStack,this.errorStackContextPopup))},setLoadingAnimationOn:function(){dojo.style(this.refreshImgNode,{display:"none"});if(!this.loadingImgSrc==""){dojo.attr(this.loadingImgNode,"src",this.loadingImgSrc);dojo.style(this.loadingImgNode,{cursor:"pointer",display:"inline","vertical-align":"middle"})}},setLoadingAnimationOff:function(){if(!this.loadingImgSrc==""){dojo.style(this.loadingImgNode,{display:"none"})}dojo.style(this.refreshImgNode,{cursor:"pointer",display:"inline","vertical-align":"middle"})},setErrorStackMsg:function(a){this.errorMessage=a;if(a!=undefined&&a!=""){this.tt.label="<b>Error Message</b>: "+a+"<br/>"}else{this.tt.label=this.title}},setMessage:function(a){if(a!=undefined){this.messageNode.innerHTML=a;dojo.style(this.messageNode,"display","")}else{this.messageNode.innerHTML="";dojo.style(this.messageNode,"display","none")}},setErrorStackPopUpOnContextMenu:function(a){this.errorStackpopUpContextMenu=a;if(false==a){this.errorMessage=""}},_showErrorStack:function(a){if(this.errorStackpopUpContextMenu){var b=new dijit.layout.ContentPane();b.setContent(this._buildShowStackTracePane(a));a.setContent(b.domNode);dijit.popup.open({popup:a,around:this.messageNode});dojo.addClass(a.domNode,"dijitInline")}},_buildShowStackTracePane:function(a){var h=document.createElement("div");var f=new dijit.form.Button({label:"Close",onClick:function(m){m.preventDefault();dijit.popup.close(a)}});h.appendChild(f.domNode);var l=document.createElement("span");l.appendChild(document.createTextNode(this.errorMessage));var b=new dijit.layout.ContentPane();dojo.style(b.domNode,{width:"200px",height:"200px"});b.setContent(l);h.appendChild(b.domNode);var g=new dijit.form.Button({label:"Close",onClick:function(m){m.preventDefault();dijit.popup.close(a)}});h.appendChild(g.domNode);dojo.connect(a,"onBlur",this,dojo.hitch(this,function(m){dijit.popup.close(m)},a));f.focus();return h}})}if(!dojo._hasResource["srmdojoc.layout.SRTechActionTitlePane"]){dojo._hasResource["srmdojoc.layout.SRTechActionTitlePane"]=true;dojo.provide("srmdojoc.layout.SRTechActionTitlePane");dojo.declare("srmdojoc.layout.SRTechActionTitlePane",dijit.TitlePane,{templateString:"",templateString:'<div class="${baseClass}">\n   <div class="dijitTitlePaneTitle" dojoAttachPoint="titleBarNode" style="vertical-align:middle;cursor: default;">\n        <div dojoAttachEvent="onclick:toggle,onkeypress: _onTitleKey,onfocus:_handleFocus,onblur:_handleFocus" tabindex="0"\n             waiRole="button" dojoAttachPoint="focusNode,arrowNode" class="dijitInline dijitArrowNode" \n             style="float:left; cursor: pointer;">\n          <span dojoAttachPoint="arrowNodeInner" class="dijitArrowNodeInner"></span>\n        </div>\n<table width="auto" cellpadding="0" cellspacing="0" border="0"  align="right"><tr valign="middle">\n<td nowrap="nowrap" valign="middle">\n          <span style="padding:1px;margin:1px;vertical-align:middle;" dojoAttachPoint="expansionNode" ></span>\n</td>\n<td nowrap="nowrap" valign="middle"><img  width="16" height="16" style="${img6style}" title="${img6title}"  onmouseover="this.style.border=\'1px solid #585858\';"\n             onmouseout="this.style.border=\'1px solid transparent\';"\n            dojoAttachPoint="customImg6Node" onclick="${img6onclick}"  src="${img6src}" align="right" tabindex="0"></img> </td>\n<td nowrap="nowrap"  valign="middle">\n<a dojoAttachPoint="customAnchorNode" title="${a1title}" onclick="${a1onclick}"           \n style="vertical-align:middle;float:right;font-size: 7pt;">Customer Visible</a>\n</td><td nowrap="nowrap" valign="middle"><input style="vertical-align:middle;float:right;" type="checkbox" dojoAttachPoint="customCheckBoxNode" onclick="${chkboxonclick}"   tabindex="0"></input>\n</td>\n<td nowrap="nowrap" valign="middle">\n          <img width="16" \n             height="16"  title="${img2title}" style="${img2style}"\n             onmouseover="this.style.border=\'1px solid #585858\';"\n             onmouseout="this.style.border=\'1px solid transparent\';"\n             dojoAttachPoint="customImg2Node" \n             onclick="${img2onclick}"\n             src="${img2src}"\n             align="right" \n             tabindex="0" ></img>\n</td>\n<td nowrap="nowrap" valign="middle"><img  width="16" height="16" style="${img3style}" title="${img3title}"  onmouseover="this.style.border=\'1px solid #585858\';"\n             onmouseout="this.style.border=\'1px solid transparent\';"\n            dojoAttachPoint="customImg3Node" onclick="${img3onclick}"  src="${img3src}" align="right" tabindex="0"></img> </td>\n<td nowrap="nowrap" valign="middle"><img width="16" height="16" style="${img4style}" title="${img4title}"    onmouseover="this.style.border=\'1px solid #585858\';"\n             onmouseout="this.style.border=\'1px solid transparent\';"\n             dojoAttachPoint="customImg4Node" onclick="${img4onclick}" src="${img4src}" align="right" tabindex="0"></img>\n             </td>\n<td nowrap="nowrap" valign="middle"><img width="16" height="16" style="${img5style}" title="${img5title}"  onmouseover="this.style.border=\'1px solid #585858\';"\n             onmouseout="this.style.border=\'1px solid transparent\';"\n            dojoAttachPoint="customImg5Node" onclick="${img5onclick}"  src="${img5src}" align="right" tabindex="0"></img>\n             </td>\n</tr></table>\n\n<!-- <div style="float:right;" dojoAttachEvent="onclick:toggle" dojoAttachPoint="arrowNode" class="dijitInline dijitArrowNode"><span dojoAttachPoint="arrowNodeInner" class="dijitArrowNodeInner"></span></div> -->\n<div  dojoAttachPoint="titleNode" class="dijitTitlePaneTextNode" tabindex="0"></div>\t\t\n                \n</div>\n\t<div class="dijitTitlePaneContentOuter" dojoAttachPoint="hideNode">\n\t\t<div class="dijitReset" dojoAttachPoint="wipeNode">\n\t\t\t<div class="dijitTitlePaneContentInner" dojoAttachPoint="containerNode" waiRole="region" tabindex="-1">\n\t\t\t\t<!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. -->\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n',a1onclick:"",a1title:"",img2onclick:"",img2title:"",img3onclick:"",img3title:"",img4onclick:"",img5onclick:"",img4title:"",img5title:"",chkboxonclick:"",chkId:"",checked:"",img2style:"",img3style:"",img4style:"",img5style:"",img2src:"",img3src:"",img4src:"",img5src:"",img6onclick:"",img6title:"",img6src:"",img6style:"display:none;",customCheckBoxNode:"",chkboxDisabled:"false",postCreate:function(){this.setTitle(this.title);if(!this.open){this.hideNode.style.display=this.wipeNode.style.display="none"}this._setCss();this.inherited(arguments);dijit.setWaiState(this.containerNode,"labelledby",this.titleNode.id);dijit.setWaiState(this.focusNode,"haspopup","true");var b=this.hideNode,a=this.wipeNode;this._wipeIn=dojo.fx.wipeIn({node:this.wipeNode,duration:this.duration,beforeBegin:function(){b.style.display=""}});this._wipeOut=dojo.fx.wipeOut({node:this.wipeNode,duration:this.duration,onEnd:function(){b.style.display="none"}});this._deleteUnusedImg();if(this.checked=="true"){this.customCheckBoxNode.checked=true}else{this.customCheckBoxNode.checked=false}if(this.customCheckBoxNode.id==""){this.customCheckBoxNode.id=this.chkId}if(this.chkboxDisabled!=null&&this.chkboxDisabled=="true"){dojo.attr(this.customCheckBoxNode,{disabled:true})}else{dojo.attr(this.customCheckBoxNode,{disabled:false})}},_deleteUnusedImg:function(){if(this.img2src!=undefined&&this.img2src==""){dojo._destroyElement(this.customImg2Node)}if(this.img3src!=undefined&&this.img3src==""){dojo._destroyElement(this.customImg3Node)}if(this.img4src!=undefined&&this.img4src==""){dojo._destroyElement(this.customImg4Node)}if(this.img5src!=undefined&&this.img5src==""){dojo._destroyElement(this.customImg5Node)}}})}if(!dojo._hasResource["srmdojoc.layout.AccordionPanePlus"]){dojo._hasResource["srmdojoc.layout.AccordionPanePlus"]=true;dojo.provide("srmdojoc.layout.AccordionPanePlus");dojo.declare("srmdojoc.layout.AccordionPanePlus",[dijit.layout.AccordionPane],{templateString:"",templateString:'<div class=\'dijitAccordionPane\'>\n<div dojoAttachPoint=\'titleNode,focusNode\' dojoAttachEvent=\'ondijitclick:_onTitleClick,onkeypress:_onTitleKeyPress,onfocus:_handleFocus,onblur:_handleFocus\'\n\t\tclass=\'dijitAccordionTitle\' wairole="tab">\n                <div style="float:right;display:none;" dojoAttachPoint="plusNode" waiRole="presentation"></div>\n                <div class=\'dijitAccordionArrow\' waiRole="presentation"></div>\n                \n                <!-- old code \n                <div class=\'arrowTextUp\' waiRole="presentation">&#9650;</div>\n                <div class=\'arrowTextDown\' waiRole="presentation">&#9660;</div>\n                <div waiRole="presentation" dojoAttachPoint=\'titleTextNode\' class=\'dijitAccordionText\'>${title}</div> -->\n       <span>\n            <img dojoAttachPoint="loadingImgNode" \n                 title="Loading..." \n                 alt="Loading..."\n                 style="display:none;visibility:hidden;vertical-align:middle;"></img>\n        </span>        \n        <span style="vertical-align:left;" width="16px">\n            <img dojoAttachPoint="refreshImgNode"\n                 src="${refreshImgSrc}" \n                 title="Re-Execute Query"\n                 alt="Re-Execute Query"\n                 dojoAttachEvent = "onclick:_onRefreshClick"     \n                 style="display:none; cursor:pointer; vertical-align:middle;"    \n                 onmouseover="this.style.border=\'1px solid #585858\';"\n                 onmouseout="this.style.border=\'1px transparent\';"></img>\n        </span>\n        <img src="../js/dojo/resources/blank.gif" \n             alt=""\n             style="display:inline;" \n             width="1px" ></img>\n  \n        <span id=${titleSpanId} \n              class=\'dijitImageAccordionTitleText\'\n              dojoAttachPoint=\'titleTextNode\'>${title}</span>\n        <span id=${rowCountSpanId} \n              class=\'dijitImageAccordionRowCount\'\n              dojoAttachPoint=\'titleRowCountNode\' >${rowCount}</span>                       \n\n                \n                </div>\n                <div><div dojoAttachPoint=\'containerNode\' style=\'overflow: hidden; height: 1px; display: none\'\n\t\tclass=\'dijitAccordionBody\' wairole="tabpanel"\n\t></div></div>\n</div>\n',title:"",refType:"",rowCount:"&nbsp;",titleSpanId:null,rowCountSpanId:null,loadingImgSrc:"../images/ajax-loader.gif",tt:null,ttRowCount:null,errorStackContextPopup:null,errorStackPopUpOnContextMenu:false,refreshImgSrc:"../images/repeating_status.gif",refreshFunction:"SRReferences.refreshReference",errorMessage:"",constructor:function(a){this.refType=a.refType;this.titleSpanId="titleSpanId_"+a.refType;this.rowCountSpanId="rowCountSpanId_"+a.refType},postCreate:function(){this.inherited(arguments);if(this.tt!=null){this.tt.destroyRecursive()}this.tt=new dijit.Tooltip({label:this.title,connectId:[this.titleSpanId]});this.rowCountTooltip=this.tt.label;this.ttRowCount=new dijit.Tooltip({label:(this.rowCountTooltip),connectId:[this.rowCountSpanId]});this.errorStackContextPopup=new dijit.TooltipDialog({});dojo.connect(this.titleRowCountNode,"oncontextmenu",function(a){a.preventDefault()});dojo.connect(this.titleRowCountNode,"oncontextmenu",dojo.hitch(this,this._showErrorStack,this.errorStackContextPopup))},setTitle:function(a){this.title=a;this.domNode.title=a;this.params.title=a;this.titleTextNode.firstChild.nodeValue=a},setRowCount:function(a){this.rowCount=a;this.params.rowCount=a;this.titleRowCountNode.firstChild.nodeValue="("+a+")"},setTitleRowCountNode:function(a){this.titleRowCountNode.firstChild.nodeValue=a},setLoadingAnimationOn:function(){dojo.style(this.refreshImgNode,{display:"none",visibility:"hidden"});if(!this.loadingImgSrc==""){dojo.attr(this.loadingImgNode,"src",this.loadingImgSrc);dojo.style(this.loadingImgNode,{cursor:"pointer",display:"inline","vertical-align":"middle",visibility:"visible"})}},setLoadingAnimationOff:function(){if(!this.loadingImgSrc==""){dojo.style(this.loadingImgNode,{display:"none",visibility:"hidden"})}dojo.style(this.refreshImgNode,{cursor:"pointer",display:"inline","vertical-align":"middle",visibility:"visible"})},_onRefreshClick:function(){var functionName=eval(this.refreshFunction);functionName(true,this.refType)},_showErrorStack:function(a){if(this.errorStackpopUpContextMenu){var b=new dijit.layout.ContentPane();b.setContent(this._buildShowStackTracePane(a));a.setContent(b.domNode);dijit.popup.open({popup:a,around:this.titleRowCountNode});dojo.addClass(a.domNode,"dijitInline")}},_buildShowStackTracePane:function(a){var h=document.createElement("div");var f=new dijit.form.Button({label:"Close",onClick:function(m){m.preventDefault();dijit.popup.close(a)}});h.appendChild(f.domNode);var l=document.createElement("span");l.appendChild(document.createTextNode(this.errorMessage));var b=new dijit.layout.ContentPane();dojo.style(b.domNode,{width:"780px",height:"320px"});b.setContent(l);h.appendChild(b.domNode);var g=new dijit.form.Button({label:"Close",onClick:function(m){m.preventDefault();dijit.popup.close(a)}});h.appendChild(g.domNode);dojo.connect(a,"onBlur",this,dojo.hitch(this,function(m){dijit.popup.close(m)},a));f.focus();return h},updateRowCountTooltip:function(a){this.ttRowCount.label="<b>Error Message</b>: "+a+"<br/>"},setErrorStackMsg:function(a){this.errorMessage=a},setErrorStackPopUpOnContextMenu:function(a){this.errorStackpopUpContextMenu=a;if(false==a){this.errorMessage=""}}})}if(!dojo._hasResource["srmdojoc.CheckedMenuItem"]){dojo._hasResource["srmdojoc.CheckedMenuItem"]=true;dojo.provide("srmdojoc.CheckedMenuItem");dojo.declare("srmdojoc.CheckedMenuItem",dijit.MenuItem,{templateString:'<tr class="dijitReset dijitMenuItem"dojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick"><td class="dijitReset"><div class="dijitMenuItemIcon dijitCheckedMenuItemIcon" dojoAttachPoint="iconNode" ><div class="dijitCheckedMenuItemIconChar">&#10003;</div></div></td><td tabIndex="-1" class="dijitReset dijitMenuItemLabel" dojoAttachPoint="containerNode" waiRole="menuitem"></td><td class="dijitReset" dojoAttachPoint="arrowCell"><div class="dijitMenuExpand" dojoAttachPoint="expand" style="display:none"><span class="dijitInline dijitArrowNode dijitMenuExpandInner">+</span></div></td></tr>',checked:false,constructor:function(a){this.checked=a.checked||false},postCreate:function(){this.inherited(arguments);this._setCheckedAttr(this.checked)},_setCheckedAttr:function(a){dojo.toggleClass(this.iconNode,"dijitCheckedMenuItemIconChecked",a);dijit.setWaiState(this.domNode,"checked",a);this.checked=a},onChange:function(a){},_onClick:function(a){if(!this.disabled){this.checked=!this.checked;this._setCheckedAttr(this.checked);this.onChange(this.checked)}this.inherited(arguments)}})}if(!dojo._hasResource["srmdojoc.DynamicGridData"]){dojo._hasResource["srmdojoc.DynamicGridData"]=true;dojo.provide("srmdojoc.DynamicGridData");dojo.declare("srmdojoc.DynamicGridData",dojox.grid.data.DojoData,{source:"",lookupParams:"",queryCol:"",queryVal:"",setSource:function(a){this.source=a},getSource:function(){return this.source},markupFactory:function(a,b){return new srmdojoc.DynamicGridData(null,null,a)},requestRows:function(h,a){console.log("request");var g=h||0;var b=a||this.rowsPerPage;var f={start:g,count:b,serverQuery:dojo.mixin({start:g,count:a||this.rowsPerPage,action:"getModel",source:this.source,lookupParams:this.lookupParams,queryCol:this.queryCol,queryVal:this.queryVal,sort:this.sortFields},this.query),query:this.query,onComplete:dojo.hitch(this,"processRows")};this.store.fetch(f)},getRowCount:function(){var a=0;dojo.xhrGet({preventCache:true,url:"../../../SRPickLovRequest",content:{action:"getRowCount",source:this.source,lookupParams:this.lookupParams,queryCol:this.queryCol,queryVal:this.queryVal},handleAs:"json",sync:true,timeout:120000,load:function(f,b){console.log("in getNumLineItems callback");a=f.rowCount;console.log("rowCount = "+a)},error:function(f,b){console.error("HTTP status code: ",b.xhr.status);return f}});return a},setData:function(a){this.store=a;this.data=[];this.allChange()},sort:function(b){var a=Math.abs(b)-1;this.sortFields=[{attribute:this.fields.values[a].name,descending:(b>0)}];this.refresh()},canSort:function(){return true}})}if(!dojo._hasResource["dijit.form.SimpleTextarea"]){dojo._hasResource["dijit.form.SimpleTextarea"]=true;dojo.provide("dijit.form.SimpleTextarea");dojo.declare("dijit.form.SimpleTextarea",dijit.form._FormValueWidget,{baseClass:"dijitTextArea",attributeMap:dojo.mixin(dojo.clone(dijit.form._FormValueWidget.prototype.attributeMap),{rows:"focusNode",cols:"focusNode"}),rows:"",cols:"",templateString:"<textarea name='${name}' dojoAttachPoint='focusNode,containerNode'>",postMixInProperties:function(){if(this.srcNodeRef){this.value=this.srcNodeRef.value}},setValue:function(a){this.domNode.value=a;this.inherited(arguments)},getValue:function(){return this.domNode.value.replace(/\r/g,"")}})}if(!dojo._hasResource["srmdojoc.form.ValidationSimpleTextarea"]){dojo._hasResource["srmdojoc.form.ValidationSimpleTextarea"]=true;dojo.provide("srmdojoc.form.ValidationSimpleTextarea");dojo.declare("srmdojoc.form.ValidationSimpleTextarea",dijit.form._FormValueWidget,{baseClass:"dijitTextArea",attributeMap:dojo.mixin(dojo.clone(dijit.form._FormValueWidget.prototype.attributeMap),{rows:"focusNode",cols:"focusNode"}),rows:"",cols:"",templateString:"<textarea name='${name}' dojoAttachPoint='focusNode,containerNode' dojoAttachEvent='onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onfocus:_update,onkeyup:_update,onblur:_onMouse,onkeypress:_onKeyPress'>",setValue:function(a){this.inherited(arguments);this.validate(this._focused)},getValue:function(){return this.domNode.value.replace(/\r/g,"")},displayMessage:function(a){if(this._message==a){return}this._message=a;dijit.hideTooltip(this.domNode);if(a){dijit.showTooltip(a,this.domNode,this.tooltipPosition)}},required:false,promptMessage:"",invalidMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(a){return this.regExp},state:"",tooltipPosition:[],validator:function(a,b){return(new RegExp("^("+this.regExpGen(b)+")"+(this.required?"":"?")+"$")).test(a)&&(!this.required||!this._isEmpty(a)&&(this._isEmpty(a)!==undefined))},isValid:function(a){return this.validator(this.domNode.value,this.constraints)},_isEmpty:function(a){return/^\s*$/.test(a)},getErrorMessage:function(a){return this.invalidMessage},getPromptMessage:function(a){return this.promptMessage},focused:function(){return this._focused},_refreshState:function(){this.validate(this._focused)},_update:function(a){this._refreshState();this._onMouse(a)},validate:function(a){var b="";var f=this.isValid(a);var g=this._isEmpty(this.domNode.value);this.state=(f||(!this._hasBeenBlurred&&g))?"":"Error";this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",f?"false":"true");if(a){if(g){b=this.getPromptMessage(true)}if(!b&&this.state=="Error"){b=this.getErrorMessage(true)}}this.displayMessage(b);return f},postMixInProperties:function(){if(this.srcNodeRef){this.value=this.srcNodeRef.value}var a=this.regExpGen(this.constraints);this.regExp=a}})}dojo.i18n._preloadLocalizations("srmdojoc.nls.srmdojoc",["he","nl","tr","no","ko","el","en","en-gb","ROOT","zh-cn","hu","es","fi-fi","pt-br","fi","he-il","xx","ru","it","fr","cs","de-de","fr-fr","it-it","es-es","ja","da","pl","de","sv","pt","zh-tw","pt-pt","nl-nl","ko-kr","ar","en-us","zh","ja-jp"]);var OP_DIALOG_CLASS="opDialogClass";var OP_DIALOG_TABLE_ATTR={width:"100%",cellSpacing:6,cellPadding:6};var OP_DIALOG_HEADER_CLASS="opDialogHeaderClass";var OP_DIALOG_TABLE_HEADER_CLASS="opDialogTableHeaderClass";var OP_DIALOG_TABLE_COL_CLASS="opDialogTableColClass";var OP_DIALOG_BC_CLASS="opDialogBCClass";var privilegeMap=new Map();var pageParamMap=new Map();var USER_PRIVS="userPrivs";var HREFS="hrefs";var userPrefsForPage;var PAGE_PARAMS="pageParams";var buildNumber=new Date().getTime();var areAllDefectSourcesMigrated=false;var perfMonId=undefined;var ERROR=2;var WARNING=1;var INFO=0;var SUCCESS_STATUS=0;var FAILURE_STATUS=1;var eventNameRegExp=new RegExp("[^A-Za-z0-9_]","g");var nameSpaceRegExp=new RegExp("[^A-Za-z0-9]","g");var validIdRegExp=new RegExp("[^A-Za-z0-9_-]","g");var sessionId=undefined;var ERROR_WHILE_SAVING_ACTIVITY="Error occurred in request to save SR Activity.";var ERROR_WHILE_SAVING_HEADER="Error occurred in request to save SR Header.";var ERROR_WHILE_SR_CREATE="Error occurred in request to Create SR.";var ERROR_WHILE_SAVING_TITLE="Error While Saving";var ERROR_WHILE_PROCESSING_TITLE="Error While Processing Your Request";var ERROR_WHILE_CREATE_PICKLIST="Error occurred in request to create pick list for ";var SRM_CLOSURE_HELP_DOC_URL="SRM_CLOSURE_HELP_DOC_URL";var countryCodeMap;var isBrowserSupportedNSP=false;dojo.addOnLoad(preInit);function preInit(){dojo.connect(dojo.Deferred.prototype,"callback",function(b){try{resetSessionTimeout()}catch(a){console.log("Problem encountered in invoking resetSessionTimeout() :"+a)}})}function getVersion(){return"?v="+buildNumber}function Map(){this.keyArray=new Array();this.valArray=new Array();this.put=put;this.get=get;this.size=size;this.clear=clear;this.keySet=keySet;this.valSet=valSet;this.showMe=showMe;this.findIt=findIt;this.remove=remove;this.putAll=putAll}function put(a,f){var b=this.findIt(a);if(b==(-1)){this.keyArray.push(a);this.valArray.push(f)}else{this.valArray[b]=f}}function get(b){var a=null;var f=this.findIt(b);if(f!=(-1)){a=this.valArray[f]}return a}function remove(b){var a=null;var f=this.findIt(b);if(f!=(-1)){this.keyArray=this.keyArray.removeAt(f);this.valArray=this.valArray.removeAt(f)}return}function size(){return(this.keyArray.length)}function clear(){for(var a=0;a<this.keyArray.length;a++){this.keyArray.pop();this.valArray.pop()}}function keySet(){return(this.keyArray)}function valSet(){return(this.valArray)}function putAll(b){if(b.keyArray!=undefined&&b.keyArray.length!=undefined&&b.valArray!=undefined&&b.valArray.length!=undefined&&b.keyArray.length==b.valArray.length){for(var a=0;a<this.keyArray.length;a++){(b.keyArray).push(this.keyArray[a]);(b.valArray).push(this.valArray[a])}}}function showMe(){var a="";for(var b=0;b<this.keyArray.length;b++){a+="Key: "+this.keyArray[b]+"\tValues: "+this.valArray[b]+"\n"}return a}function findIt(f){var a=(-1);for(var b=0;b<this.keyArray.length;b++){if(this.keyArray[b]==f){a=b;break}}return a}function removeAt(a){var f=this.slice(0,a);var b=this.slice(a+1);return(f.concat(b))}Array.prototype.removeAt=removeAt;var _filters=[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(<!--(.|\s){1,}?-->)/gi,handler:""},{regexp:/>\s+</g,handler:"> <"},{regexp:/>\s+<p/g,handler:">\n<p"},{regexp:/<\/(p|div)>$|^<(p|div)[^>]*>/gi,handler:""},{regexp:/([^>])<div>/gi,handler:"$1\n"},{regexp:/^<p\s*[^>]*>|<br[^>]*>|<\/div>\s*<p[^>]*>|<\/div>\s*<div[^>]*>/gi,handler:"\n"},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/(<br\s*\/>)/gi,handler:"\n"},{regexp:/(&|%26)/gi,handler:"&amp;"}];var _IE_editor_filters=[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(<!--(.|\s){1,}?-->)/gi,handler:""},{regexp:/>\s+</g,handler:"> <"},{regexp:/<\/(p|div)>$|^<(p|div)[^>]*>/gi,handler:""},{regexp:/([^>])<div>/gi,handler:"$1<br>"},{regexp:/<\/p>\s*<p[^>]*>|<br[^>]*>|<\/div>\s*<p[^>]*>|<\/div>\s*<div[^>]*>/gi,handler:"\n"},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/\r?\n/gi,handler:"\n"},{regexp:/\r/gi,handler:"\n"},{regexp:/(&|%26)/gi,handler:"&amp;"}];function filterTags(h,g,f){var a;for(a=0;a<h.length;a++){var b=h[a];g=g.replace(b.regexp,b.handler)}if(f!=undefined&&f==true){var l=dojo.byId("plainTextDiv");if(l==undefined){l=document.createElement("div")}if(dojo.isIE){l.innerHTML="<pre>"+g+"</pre>"}else{l.innerHTML=g}if(l.innerText===undefined){g=l.textContent}else{g=l.innerText}}return g}function postAForm(q){var p=document.forms[q];var l="";var u="";var f="";var v=new Object();var s=new Array();for(i=0;i<p.elements.length;i++){f="";var b=p.elements[i].name;var g=p.elements[i].id;if(b==undefined||b==""||b.indexOf(":")!=-1||b.indexOf(".")!=-1){continue}if(l!=""){u="&"}if(p.elements[i].type=="text"||p.elements[i].type=="textarea"||p.elements[i].type=="hidden"){f=p.elements[i].value.replace(/\s*$/g,"");f=encodeURIComponent(f);var h=(g!="")?g:b;if(p.elements[i].type=="textarea"){if(dijit.byId(h)){f=dijit.byId(h).getValue().replace(/\s*$/g,"");f=encodeURIComponent(f)}var a=(dojo.isIE)?window._IE_editor_filters:window._filters;f=filterTags(a,f,false)}var o=dijit.byId(h);if(o!=undefined&&o.declaredClass!=undefined&&o.declaredClass=="srmdojoc.form.DateTimeCombo"){f=dojo.byId(h).value}l+=u+p.elements[i].name+"="+f}else{if(p.elements[i].type=="checkbox"){f=p.elements[i].checked;l+=u+p.elements[i].name+"="+f}else{if(p.elements[i].type=="select-one"||p.elements[i].type=="select"){if(p.elements[i].length==1){f=p.elements[i].options[p.elements[i].selectedIndex].value}if(f==null){f=""}l+=u+p.elements[i].name+"="+f}else{if(p.elements[i].type=="multiple"||p.elements[i].type=="multiselect"||p.elements[i].type=="select-multiple"){var m=p.elements[i].options.length;for(k=m-1;k>=0;k--){if(p.elements[i].options[k].selected){f=f+p.elements[i].options[k].value+","}}l+=u+p.elements[i].name+"="+f}}}}var v=new Object();v.name=b;v.value=f;s.push(v)}return s}var errHandlingUtil={};errHandlingUtil.errs=new Array();errHandlingUtil.processErrFlds=function(a){if(errHandlingUtil.errs!=null&&errHandlingUtil.errs.length>0){dojo.forEach(errHandlingUtil.errs,function(o){var q=o.messageParams;var h=o.messageType;if(q!=undefined&&q.errFldId!=undefined){var b=q.errFldId;if(a!=undefined&&a==true&&b.indexOf("Cloned")==-1&&dijit.byId(b+"Cloned")!=undefined){b=b+"Cloned"}var g=dijit.byId(b);var s=dojo.byId(b);if(g!=undefined){var l=dojo.byId(b+"Row");if(l!=undefined){var m=dojo.query(".srattribute,.srHeaderAttribute,.srHeaderLabel",l);if(m!=undefined&&m.length>0){dojo.addClass(m[0],"errorLabel")}var f=".errorDiv";var p=dojo.query(f,l);if(p!=null&&p.length>0){dojo.addClass(p[0],"errorHighlight")}}}}});errHandlingUtil.errs={}}};errHandlingUtil.clearErrFlds=function(b){var a=dojo.query(".errorLabel",b);if(a!=null&&a.length>0){dojo.forEach(a,function(l){var f=l.parentNode;dojo.removeClass(l,"errorLabel");if(f!=undefined){var g=".errorDiv";var h=dojo.query(g,f);if(h!=null&&h.length>0){dojo.removeClass(h[0],"errorHighlight")}}})}};function isObjectErroneous(a){if(FAILURE_STATUS==a.opStatus){return true}else{return false}}function displayErrors(b,a){displayErrors(b,a,null)}var MESSAGE_DIALOG_ID="messageDialog";function displayErrors(E,p,g,y,x){var o=extractStatusCode(y);if(E.opStatus!=0&&E.opResult!=null){var A=E.opResult;errHandlingUtil.errs=E.opResult;var a="";if(E.continueLabel!=undefined){a=E.continueLabel}var q="";if(E.cancelLabel!=undefined){q=E.cancelLabel}if(dojo.isArray(A)){var z=dijit.byId(MESSAGE_DIALOG_ID);if(z!=undefined){z.destroyDescendants()}var B=document.createElement("table");B.setAttribute("width","100%");B.setAttribute("align","center");B.setAttribute("cellSpacing","10");B.style.cssText="padding-top:3px; padding-bottom:3px; padding-left:4px;padding-right:4px;";var f=document.createElement("tbody");B.appendChild(f);z.setContent(B);var w=document.createElement("tr");f.appendChild(w);var D=document.createElement("td");D.setAttribute("colSpan","3");D.setAttribute("align","center");w.appendChild(D);if(E.messageTitle!=undefined){var s=document.createElement("tr");f.appendChild(s);var b=document.createElement("td");b.setAttribute("colSpan","3");b.setAttribute("align","left");s.appendChild(b);b.appendChild(document.createTextNode(E.messageTitle))}var l="";var m=1;var h=false;var u=false;dojo.forEach(A,function(G){var L=document.createElement("tr");f.appendChild(L);var I=document.createElement("td");L.appendChild(I);var K=(A!=undefined&&A.length>1)?(m+"."):"";I.appendChild(document.createTextNode(K));I.setAttribute("align","left");I.setAttribute("valign","top");var H=document.createElement("td");var J=document.createElement("img");if(G!=undefined&&G.messageType!=undefined&&G.messageType==WARNING){J.setAttribute("src","../images/warningicon.gif")}else{if(G.messageType!=undefined&&G.messageType==INFO){J.setAttribute("src","../images/infoicon.gif");h=true}else{J.setAttribute("src","../images/erroricon.gif");h=true;u=true}}H.setAttribute("align","left");H.setAttribute("valign","top");H.appendChild(J);L.appendChild(H);var F=document.createElement("td");var N=document.createElement("span");var M=htmlDecode(G.message);N.innerHTML=unescape(M);F.appendChild(N);F.setAttribute("align","left");F.setAttribute("valign","top");L.appendChild(F);l+=G.message+"\n";m++});var v=document.createElement("tr");f.appendChild(v);var C=document.createElement("td");C.setAttribute("colSpan","3");C.setAttribute("align","center");v.appendChild(C);if(o!=401){D.appendChild(createErrorDialogButtonNode(p,g,h,a,q,y,x,E))}C.appendChild(createErrorDialogButtonNode(p,g,h,a,q,y,x,E));if(u){z.setTitle(ERROR_WHILE_PROCESSING_TITLE);if(l.indexOf(ERROR_WHILE_SAVING_ACTIVITY)>=0||l.indexOf(ERROR_WHILE_SAVING_HEADER)>=0||l.indexOf(ERROR_WHILE_SR_CREATE)>=0){z.setTitle(ERROR_WHILE_SAVING_TITLE)}}z.startup();setTimeout(function(){z.show()},"0")}}else{alert(dojo.toJson(E))}}function displayInfo(m){if(m.opStatus==0&&m.opResult!=null){var x=m.opResult;if(dojo.isArray(x)){var v=dijit.byId(MESSAGE_DIALOG_ID);if(v!=undefined){v.destroyDescendants()}var z=document.createElement("table");z.setAttribute("width","100%");z.setAttribute("align","center");z.setAttribute("cellSpacing","10");z.style.cssText="padding-top:3px; padding-bottom:3px; padding-left:4px;padding-right:4px;";var o=document.createElement("tbody");z.appendChild(o);v.setContent(z);var l=document.createElement("tr");o.appendChild(l);var h=document.createElement("td");h.setAttribute("colSpan","3");h.setAttribute("align","center");l.appendChild(h);if(m.messageTitle!=undefined){var y=document.createElement("tr");o.appendChild(y);var u=document.createElement("td");u.setAttribute("colSpan","2");u.setAttribute("align","left");y.appendChild(u);u.appendChild(document.createTextNode(m.messageTitle))}var f="";var q=1;var s=false;var a=x.length;dojo.forEach(x,function(C){var D=document.createElement("tr");o.appendChild(D);var B=document.createElement("td");D.appendChild(B);if(a>1){B.appendChild(document.createTextNode(q+"."))}B.setAttribute("align","left");B.setAttribute("valign","top");var A=document.createElement("td");var E=document.createElement("span");E.innerHTML=C.message;A.appendChild(E);A.setAttribute("align","left");A.setAttribute("valign","top");D.appendChild(A);f+=C.message+"\n";q++});var g=document.createElement("tr");o.appendChild(g);var b=document.createElement("td");b.setAttribute("colSpan","2");b.setAttribute("align","center");g.appendChild(b);var p=document.createElement("div");dojo.style(p,{width:"10%"});var w=new dijit.form.Button({label:"Close",onClick:function(){v.hide()}},p);h.appendChild(w.domNode);b.appendChild(w.domNode);v.startup();setTimeout(function(){v.show()},"0")}}else{alert(dojo.toJson(m))}}function extractStatusCode(b){var g=undefined;var a=undefined;if(b!=undefined&&b.responseText!=undefined){try{a=dojo.fromJson(b.responseText)}catch(f){}}if(a!=undefined&&a!=null){g=(a.errorCode!=undefined)?a.errorCode:""}return g}function createErrorDialogButtonNode(warningCallbackFunc,errorCallbackFunc,foundErrorMsg,continueLabel,cancelLabel,error,ioArgs,data){var statusCode=extractStatusCode(error);var dialog=dijit.byId(MESSAGE_DIALOG_ID);var ntable=document.createElement("table");ntable.setAttribute("align","center");ntable.setAttribute("width","35%");var ntbody=document.createElement("tbody");ntbody.setAttribute("align","center");ntable.appendChild(ntbody);var ntr=document.createElement("tr");ntbody.appendChild(ntr);var divB1=document.createElement("div");divB1.setAttribute("width","10%");var divB2=document.createElement("div");divB2.setAttribute("width","10%");var b1;var label1=cancelLabel!=undefined&&cancelLabel!=null&&cancelLabel!=""?cancelLabel:"Close";if(errorCallbackFunc!=null&&errorCallbackFunc!=undefined){b1=new dijit.form.Button({label:label1,style:"padding: 5px;",onClick:function(){dialog.hide();if(error!=undefined&&ioArgs!=undefined){logError(error,ioArgs)}if(typeof errorCallbackFunc=="function"){errorCallbackFunc()}else{eval("("+errorCallbackFunc+")")}}},divB1)}else{b1=new dijit.form.Button({label:label1,style:"padding: 5px;",onClick:function(){dialog.hide();if(error!=undefined&&ioArgs!=undefined){logError(error,ioArgs)}}},divB1)}var ntd1=document.createElement("td");ntr.appendChild(ntd1);ntd1.appendChild(b1.domNode);var label2=continueLabel!=undefined&&continueLabel!=null&&continueLabel!=""?continueLabel:"Continue";if(warningCallbackFunc!=undefined&&warningCallbackFunc!=null&&(!foundErrorMsg||(foundErrorMsg&&statusCode==401))){var b2=new dijit.form.Button({label:label2,style:"padding: 5px;",onClick:function(){dialog.hide();if(typeof warningCallbackFunc=="function"){warningCallbackFunc()}else{eval("("+warningCallbackFunc+")")}}},divB2);var ntd2=document.createElement("td");ntr.appendChild(ntd2);ntd2.appendChild(b2.domNode)}if(error!=undefined&&ioArgs!=undefined&&statusCode!=401){var divB3=document.createElement("div");divB3.setAttribute("width","10%");var b3=new dijit.form.Button({label:"Log Error",style:"padding: 5px;",onClick:function(){dialog.hide();logError(error,ioArgs)}},divB3);var ntd3=document.createElement("td");ntr.appendChild(ntd3);ntd3.appendChild(b3.domNode)}if(data.errHandler!=undefined){errHandlingUtil.errs=data.opResult;var divB4=document.createElement("div");divB4.setAttribute("width","10%");var b4=new dijit.form.Button({label:"Review & Fix",style:"padding: 5px;",onClick:function(){dialog.hide();eval("("+data.errHandler+")")}},divB4);var ntd4=document.createElement("td");ntr.appendChild(ntd4);ntd4.appendChild(b4.domNode)}return ntable}function destroyDijitWidget(a){if(dijit.byId(a)){dijit.byId(a).destroyRecursive()}}function getBrowserInfo(){var a={};a.Browser=navigator.appName;a.Version=navigator.appVersion;a.Codename=navigator.appCodeName;a.Language=navigator.language;a.Platform=navigator.platform;a.Plugins=navigator.plugins.length;for(i=0;i<navigator.plugins.length;i++){a["Plugin "+i]=navigator.plugins[i].name}a["User Agent"]=navigator.userAgent;a["Java Enabled"]=navigator.javaEnabled();return a}function logError(b,g){try{var l=(g!=undefined&&g.args!=undefined&&g.args!=null)?dojo.toJson(g.args):"";l=l+(g!=undefined&&g.query!=undefined&&g.query!=null)?dojo.toJson(g.query):"";var a=getBrowserInfo();if(a!=undefined&&a!=null){a=dojo.toJson(a)}var f={url:"../../../SRRequest",content:{action:"logJSError",error:dojo.toJson(b),xhrRequest:l,browserInfo:a},handleAs:"json"};dojo.xhrPost(f)}catch(h){}}function closeMessageDialog(){var a=dijit.byId(MESSAGE_DIALOG_ID);if(a!=undefined&&a.open){a.hide()}}function getResultProperty(data,propertyName){if(data.opResult!=null){var jarr=data.opResult;var propValue="";if(dojo.isArray(jarr)){dojo.forEach(jarr,function(node){propValue=eval("(node."+propertyName+")")})}return propValue}}function createDialog(b,m,g,a){var f=dijit.byId(b);if(f!=undefined){f.destroyRecursive()}var h=document.createElement("div");f=new dijit.Dialog({id:b,style:g,title:m},h);dojo.body().appendChild(h);if(a==undefined||a!=false){var l=dojo.connect(f,"hide",function(){dojo.disconnect(l);cleanupDialog(b)})}f.startup();return f}function createSRMDialog(a,m,g,l,b){var f=dijit.byId(a);if(f!=undefined){f.destroyRecursive()}var h=document.createElement("div");f=new srm.Dialog({id:a,style:g,title:m},h);if(l!=undefined){f.iframeName=l}if(b!=undefined){f.iframeCancelMessage=b}dojo.body().appendChild(h);f.startup();return f}function cleanupDialog(a){var b=dijit.byId(a);if(b!=undefined){b.destroyRecursive()}}function closeDialog(a){var b=dijit.byId(a);if(b!=undefined&&b.open){b.hide()}}var STATUS_DIALOG_ID="statusDialog";function showCustomStatusDialog(msg,customImgSrc,dialogClass,textClass,onCancelFunc){var style="visibility:hidden; width:500px; height:95px; font-family:verdana; font-size:8pt; font-weight:bold; z-index:255; position:absolute; left:42%; top:10%; text-align:left; background-color: #FFFFFF; border:2px solid rgb(153,187,232);";var dialog=createDialog(STATUS_DIALOG_ID,"Message",style);if(dialogClass!=undefined&&dialogClass!=null){dojo.addClass(dialog.domNode,dialogClass)}if(onCancelFunc!=undefined&&onCancelFunc!=null){dojo.connect(dialog,"onCancel",function(){if(typeof onCancelFunc=="function"){onCancelFunc()}else{if(onCancelFunc!=""){eval("("+onCancelFunc+")")}}})}var span=document.createElement("span");var img=document.createElement("img");var src=(customImgSrc!=undefined&&customImgSrc!=null)?customImgSrc:"../images/ajax-loader.gif";dojo.attr(img,{src:src,alt:msg});var span2=document.createElement("span");span2.innerHTML=msg;if(textClass!=undefined&&textClass!=null){dojo.addClass(span2,textClass)}span.appendChild(img);span.appendChild(span2);dialog.setContent(span);setTimeout(function(){dialog.show()},"0")}function hideCustomStatusDialog(){closeDialog(STATUS_DIALOG_ID)}function getInstructionImgNode(){var a=document.createElement("img");a.setAttribute("src","../images/tip.gif");a.setAttribute("alt","Tip");return a}function loadViewHrefMap(a){dojo.xhrGet({url:"../../../CustRequest",content:{action:"link"},preventCache:true,handleAs:"json",load:function(b){if(b.status=="SUCCESS"){dojo.forEach(b.data.link,function(f){a.put(f.businessType,f.linkHref)});if(b.data.areAllDefectSourcesMigrated!=undefined){window.areAllDefectSourcesMigrated=b.data.areAllDefectSourcesMigrated}evalToShowSupportTab_WorklistBanner(a)}},error:function(b){console.error("Error Encountered in post of readDynamicLinks function: ",b)}})}function loadPrivilegeMap(){return dojo.xhrGet({url:"../../../SRRequest",content:{action:"getPrivileges"},preventCache:true,handleAs:"json",load:function(a){if(a.opStatus==0&&a[USER_PRIVS]!=undefined){privilegeMap.put(USER_PRIVS,a[USER_PRIVS])}},error:function(a){console.error("Error Encountered in reading privileges ",a)}})}function loadInitSetupData(a){if(a==undefined||a==null){a=""}dojo.xhrGet({url:"../../../SRRequest",content:{action:"getInitSetupData",page:a},preventCache:true,handleAs:"json",load:function(b){if(b.buildNumber!=undefined){buildNumber=b.buildNumber}if(b[USER_PRIVS]!=undefined){privilegeMap.put(USER_PRIVS,b[USER_PRIVS])}if(b[PAGE_PARAMS]!=undefined){pageParamMap.put(PAGE_PARAMS,b[PAGE_PARAMS])}if(b.userPrefsForPage!=undefined){userPrefsForPage=b.userPrefsForPage}if(b[HREFS]!=undefined){dojo.forEach(b[HREFS].data.link,function(f){getLinkHrefMap().put(f.businessType,f.linkHref)});evalToShowSupportTab_WorklistBanner(getLinkHrefMap())}if(b.areAllDefectSourcesMigrated!=undefined){window.areAllDefectSourcesMigrated=b.areAllDefectSourcesMigrated}if(b.perfMonId!=undefined){window.perfMonId=b.perfMonId}if(b.loggedInUser!=undefined){window.loggedInUser=b.loggedInUser}if(b.spSubTokenDefaults!=undefined){window.spSubTokenDefaults=b.spSubTokenDefaults}if(b.sessionId!=undefined){window.sessionId=b.sessionId}if(a!=undefined&&a!="SRCreate"){loadSimilarSRProductAndLang()}if(b.useRewriteSRClose!=undefined){window.useRewriteSRClose=b.useRewriteSRClose}getPageSytemParamValue(SRM_CLOSURE_HELP_DOC_URL);if(b.countryToCCMapping!=undefined){countryCodeMap=new Map();if(b.countryToCCMapping!=undefined){dojo.forEach(b.countryToCCMapping,function(f){if(f.key!=undefined&&f.key!=""&&f.value!=undefined&&f.value!=""){countryCodeMap.put(f.key,f.value)}})}}if(b.isBrowserSupported!=undefined){if(b.isBrowserSupported=="true"){isBrowserSupportedNSP=true}}},error:function(b){console.error("Error Encountered in reading privileges ",b)}})}function isVisibleForUser(b){var f=privilegeMap.get(USER_PRIVS);if(f!=undefined){return checkPrivilegeInUserMap(f,b)}if(f==undefined){var a=loadPrivilegeMap();a.addCallback(function(g){f=privilegeMap.get(USER_PRIVS);if(f!=undefined){return checkPrivilegeInUserMap(f,b)}});a.addErrback(function(g){return false});return false}}function checkPrivilegeInUserMap(b,a){if(b!=undefined&&b!=null&&a!=undefined&&a!=null){if(b!=null&&b[a]!=undefined){return b[a]}}return false}function getPageSytemParamValue(b){var a=pageParamMap.get(PAGE_PARAMS);if(a!=undefined){if(a!=null&&a[b]!=undefined){return a[b]}}return""}function getUserPrefForPage(b){if(userPrefsForPage!=undefined){for(i=0;i<userPrefsForPage.length;i++){var g=userPrefsForPage[i];var a=g.name;var f=g.value;if(b==a){return f}}}return""}function invokeUrl(a,b,g){if(b==undefined||b==""||a==""||a==undefined){return}var f="";if(dijit.byId(b)!=undefined){f=dijit.byId(b).getValue()}if(f==null||f==""){alert("No form value found for "+g);return}invokeURLForRef(a,f,g)}function invokeURLForRef(b,f,l){var h=getLinkHrefMap().get(b);if(h==null){alert("Unexpected configuration error - No link details found for "+l);return}if(h!=null&&(h.href!=null)){var a=h.href;var g=h.hrefTarget;if(g==""||g==null||b=="SPHome-dnAsset"||b=="SPHome-dnCsi"){g="_blank"}console.debug("invokeUrl - "+b+"-"+f+"-"+a);a=a.replace("%%REFID%%",f);if(g=="_blank"){window.open(a)}else{self.location=a}}}function invokeURLForTPS(f,g,m){var l=getLinkHrefMap().get(f);if(l==null){alert("Unexpected configuration error - No link details found for "+m);return}if(l!=null&&(l.href!=null)){var a=l.href;var h=l.hrefTarget;console.debug("invokeUrl - "+f+"-"+g+"-"+a);a=a.replace("%%REFID%%",g);if(f=="SPHome-GPAMtpscore"){var b=getBrowserInfo();if(b.Browser!="Microsoft Internet Explorer"){alert("The target URL requires using Microsoft Internet Explorer (IE), and is not compatible with the current browser.\n\nURL:\n"+a);return}}if(h=="_blank"){window.open(a)}else{self.location=a}}}function invokeOTSURL(){var a=new Map();if(dijit.byId("csi")){a.put("CSI",dijit.byId("csi").getValue())}if(dijit.byId("srNumber")){a.put("SR",dijit.byId("srNumber").getValue())}invokeURLwithMultiParam("OTS",a)}function invokeURLwithMultiParam(p,o){if(o!=undefined){var f=o.keySet();var g=getLinkHrefMap().get(p);if(g==null){alert("Unexpected configuration error - No link details found for "+p);return}if(g!=null&&(g.href!=null)){var a=g.href;var m=g.hrefTarget;if(m==""||m==null){m="_blank"}for(var h=0;h<f.length;h++){var l=f[h];var b=o.get(l);console.debug("invokeUrl - "+l+"-"+b);a=a.replace("%%"+l+"%%",b)}if(m=="_blank"){window.open(a)}else{self.location=a}}}}function invokeDnDialog(b){if(b=="project"){var a=dijit.byId("project").getValue();if(a!=null&&a!=""){showDnProjectReferenceObject(a)}else{alert("No Project")}}else{if(b=="configuration"){var f=dijit.byId("configuration").getValue();if(f!=null&&f!=""){showDnConfigReferenceObject(f)}else{alert("No Configuration.")}}}}var MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");var DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");function LZ(a){return(a<0||a>9?"":"0")+a}function formatDate(Q,N){N=N+"";var q="";var C=0;var P="";var g="";var p=Q.getYear()+"";var l=Q.getMonth()+1;var O=Q.getDate();var v=Q.getDay();var u=Q.getHours();var F=Q.getMinutes();var x=Q.getSeconds();var A,B,b,z,R,f,L,J,G,w,T,u,S,o,a,I;var D=new Object();if(p.length<4){p=""+(p-0+1900)}D.y=""+p;D.yyyy=p;D.yy=p.substring(2,4);D.M=l;D.MM=LZ(l);D.MMM=MONTH_NAMES[l-1];D.NNN=MONTH_NAMES[l+11];D.d=O;D.dd=LZ(O);D.E=DAY_NAMES[v+7];D.EE=DAY_NAMES[v];D.H=u;D.HH=LZ(u);if(u==0){D.h=12}else{if(u>12){D.h=u-12}else{D.h=u}}D.hh=LZ(D.h);if(u>11){D.K=u-12}else{D.K=u}D.k=u+1;D.KK=LZ(D.K);D.kk=LZ(D.k);if(u>11){D.a="PM"}else{D.a="AM"}D.m=F;D.mm=LZ(F);D.s=x;D.ss=LZ(x);while(C<N.length){P=N.charAt(C);g="";while((N.charAt(C)==P)&&(C<N.length)){g+=N.charAt(C++)}if(D[g]!=null){q=q+D[g]}else{q=q+g}}return q}function formIsDirty(h){for(var f=0;f<h.elements.length;f++){var b=h.elements[f];if(b.id=="activeSrList"||b.id=="srTBox"||b.id=="filterActivities"){continue}var g=b.type;if(g=="checkbox"||g=="radio"){if(b.checked!=b.defaultChecked){return true}}else{if(g=="hidden"||g=="password"||g=="text"||g=="textarea"){if(b.value!=b.defaultValue){return true}}else{if(g=="select-one"||g=="select-multiple"){for(var a=0;a<b.options.length;a++){if(b.options[a].selected!=b.options[a].defaultSelected){return true}}}}}}return false}function xhrErrHandler(x,p,q){var s;var g;var v=ERROR;var a;var m=null;var u="Continue";var w="Cancel";var o=(x!=undefined&&x.dojoType!=undefined)?x.dojoType:"cancel";console.debug("errorType "+o);var h=(o=="timeout")?" Operation timed out. ":" Operation failed. ";var l=undefined;if(x!=undefined&&x.responseText!=undefined){try{l=dojo.fromJson(x.responseText)}catch(f){}}var b=(q!=undefined&&q!=null)?q+h:"";if(l!=undefined&&l!=null){s=(l.errorCode!=undefined)?l.errorCode:"";g=(l.errorMessage!=undefined)?l.errorMessage:""}if(s!=undefined&&s!=""&&s!=200&&s!=null){b=b+((s!=undefined&&s!=null)?"Error Code:"+s+" ":"");b=b+((g!=undefined&&g!=null)?"Error Message:"+g+" ":"");if(s==401){b=b+escape("<br/><br/>")+" It is likely that your session has expired.  Reinitialize Session to start again.";b=b+" If you want to copy information that you might lose you can close this dialog and stay on the page.";a="doNothing()";m="openNewSessionURL()";w="Reinitialize Session";u="Stay on Page"}}if(b!=""){var y=getDisplayMessageObj(b,v);y.continueLabel=u;y.cancelLabel=w;displayErrors(y,a,m,x,p)}}function doNothing(){}function redirect(a){self.location.href=a}function wsLog(){var a=dijit.byId("wsLog").checked;dojo.xhrGet({url:"../../../SRHeaderRequest",content:{action:"wsLogAction",wsLogVal:a},preventCache:true,handleAs:"json",load:function(b){if(dijit.byId("wsLog")){content.wsLog=dojo.byId("wsLog").checked}console.log("set ws message logging on for this session: "+b.status)},error:function(b){console.error("Error: ws message logging not set for this session",b)}})}function createMessageObject(b,a){var f={};f.messageType=a;f.message=b;return f}function getDisplayMessageObj(f,b){var g=new Array();var h=createMessageObject(f,b);g.push(h);var a=(b==ERROR||b==WARNING)?getErrMessageObj(g):getSuccessMessageObj(g);return a}function getErrMessageObj(b){var a=new Object();a.opStatus=FAILURE_STATUS;a.opResult=b;a.errors=true;return a}function getWarningMessageObj(b){var a=new Object();a.opStatus=FAILURE_STATUS;a.opResult=b;a.errors=false;return a}function getSuccessMessageObj(b){var a=new Object();a.opStatus=SUCCESS_STATUS;a.opResult=b;a.errors=false;return a}String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.startsWith=function(a){return(this.match("^"+a)==a)};String.prototype.endsWith=function(a){return(this.match(a+"$")==a)};if(typeof String.prototype.contains==="undefined"){String.prototype.contains=function(a){return this.indexOf(a)!=-1}}function StringBuffer(){this.buffer=[]}StringBuffer.prototype.append=function append(a){this.buffer.push(a);return this};StringBuffer.prototype.toString=function toString(){return this.buffer.join("")};Array.prototype.contains=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return true}}return false};Array.prototype.remove=function(b){if(!Array.indexOf){Array.prototype.indexOf=function(g){for(var f=0;f<this.length;f++){if(this[f]==g){return f}}return -1}}var a=this.indexOf(b);if(this.indexOf(b)!=-1){this.splice(a,1)}};Array.prototype.copy=function(){return[].concat(this)};Array.prototype.insert=function(b){var a=Array.prototype.slice.call(arguments,1);this.length=Math.max(this.length,b);b=b<0?this.length:b;if(a.length>1){this.splice.apply(this,[b,0].concat(a))}else{this.splice(b,0,a[0])}return this};var DateUtils={};DateUtils.millisecondsPerMinute=60000;DateUtils.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];DateUtils.meridians=["AM","PM"];DateUtils.leftPadWith0=function(a){if(a<10){return"0"+a}else{return a}};DateUtils.getCurrentTimeForUTCOffset=function(a){if(a==null){return""}var b=new Date();var f=b.getTime()+(b.getTimezoneOffset()*DateUtils.millisecondsPerMinute);var g=new Date();g.setTime(f+(a*DateUtils.millisecondsPerMinute));return""+DateUtils.leftPadWith0(g.getDate())+"-"+DateUtils.months[g.getMonth()]+"-"+g.getFullYear()+" "+DateUtils.leftPadWith0((g.getHours()===12)?12:(g.getHours()%12))+":"+DateUtils.leftPadWith0(g.getMinutes())+":"+DateUtils.leftPadWith0(g.getSeconds())+" "+DateUtils.meridians[Math.floor(g.getHours()/12)]};DateUtils.getCurrentTimeForCallcenterTimezone=function(b){var a=b.match(/\(((GMT)(([\+\-])(\d\d):(\d\d))?)\).*/i);if(a!=null){var f=0;if(a[1]!=="GMT"){f=parseInt(a[5],10)*60+parseInt(a[6],10);if(a[4]==="-"){f*=-1}}return DateUtils.getCurrentTimeForUTCOffset(f)}else{return null}};function isEmptyVal(a){if(a==""||a==null||a=="undefined"){return true}return false}function genericTalkToServer(b,h,a,o,l,f){var m=null;var g={url:b,handleAs:"json",error:function(q,p){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}displayErrors(q);return q}};if(h!=undefined&&h!=null){g.content=h}if(a!=undefined&&a!=null){if(a=="text"||a=="json"&&a=="json-comment-optional"||a=="json-comment-filtered"||a=="javascript"||a=="xml"){g.handleAs=a}}if(o!=undefined&&o!=null){if(o==false||o=="false"){g.preventCache=false}else{if(o==true||o=="true"){g.preventCache=true}}}if(l!=undefined&&l!=null&&parseInt(l)!=NaN){g.timeout=parseInt(l)}if(f!=undefined&&f!=null&&f.toLowerCase()=="post"){m=dojo.xhrPost(g)}else{m=dojo.xhrGet(g)}return m}function parseQueryString(g){var l="";var a=self.location.href;var h=a.indexOf("?");if(h!=-1&&a.length>h){l=unescape(a.substring((h+1)));if(l.endsWith("#")){l=l.substring(0,(l.length-1))}}var f=l.split("&");for(i=0;i<f.length;i++){var b=f[i].split("=");if(b[0]==g){return b[1]}}return null}(function(){fillerFunc=function(){return false};get_offset_X=function(a){return a?a.offsetLeft+get_offset_X(a.offsetParent):0},get_offset_Y=function(a){return a?a.offsetTop+get_offset_Y(a.offsetParent):0},openHook=function(g,b){var a=get_offset_X(b);var h=get_offset_Y(b);var f={_contextMenuWithMouse:g._contextMenuWithMouse,pageX:g.pageX+a,pageY:g.pageY+h,target:g.target,preventDefault:fillerFunc,stopPropagation:fillerFunc};dojo.stopEvent(g);return f},fixMenu=function(b,a){b._openMyselfOrig=b._openMyself;b._openMyself=function(f){return b._openMyselfOrig(openHook(f,a))};return b};window.MenuUtil={fixMenu:fixMenu,openHook:openHook}}());function evaluateSRMContextTextURL(h,b,f){var g=null;var a=h.get(b);if(a!=null&&a.href!=null&&dojo.string.trim(a.href)!=""&&f!=null&&dojo.string.trim(f)!=null){g=a.href.replace("%%REFID%%",f)}return g}function evaluateSRMContextTextTarget(g,b){var f="_self";var a=g.get(b);if(a!=null&&a.hrefTarget!=null&&dojo.string.trim(a.hrefTarget)!=""){f=dojo.string.trim(a.hrefTarget)}return f}function evaluateSRMContextTextJSString(h,g,b){var f=null;var a=h.get(g);var f=a.javascriptString;if(a!=null&&a.javascriptString!=null&&dojo.string.trim(a.javascriptString)!=""&&b!=undefined&&b!=null){f=f.replace(b.token,b.value)}return f}function hideTooltipMsg(b){var a=dijit.byId(b);if(a!=undefined){a.hide();a.destroy()}}function ismaxlength(h,b){if(h==undefined||isNaN(b)){return}var g=b;var q=h.id;var p=(dijit.byId(q))?dijit.byId(q).getValue():h.value;if(p!=undefined&&p.length>g){if(dijit.byId(q)){dijit.byId(q).setValue(p.substring(0,g))}var m=(h.title!=undefined&&h.title!="")?h.title:q;var f=m+" exceeded "+g+" characers.";var a="tooltip_"+q;var l=dijit.byId(a);if(l!=null){l.destroy()}var o=dojo.doc.createElement("span");l=new dijit.Tooltip({id:a,label:f,connectId:[q]},o)}}var SRMJSTimer={};SRMJSTimer.startTimer=function(a){return undefined};SRMJSTimer.endTimer=function(a){};(function(){var f={params:"params",defaultFunction:function(){}},b=function(m,q,l){var o=null;if((null!==m)&&(undefined!==m)){o=m[q]}if((true===l)&&((typeof o)!=="function")){o=f.defaultFunction}return o},g=function(l,m){return b(l,m,true)},h=function(l,m){(g(l,m))(a(l,f.params))},a=function(l,m){return b(l,m,false)};window.ParametersContext={getAttribute:a,getFunction:g,callFunction:h}})();function calTimePrefUtil(){this.timeProps=["mornHours","mornMin","afterHours","afterMin","noonHours","noonMin"];this.timePrefs=new Object();this.extractTimePref=function(time){var timeObj={};if(time==undefined||time==null||time==""){return timeObj}var arr=time.split(":");if(arr!=undefined&&arr.length>=2){if(!isNaN(parseInt(arr[0]))){timeObj.Hours=arr[0]}if(!isNaN(parseInt(arr[1]))){timeObj.Mins=arr[1]}}return timeObj};this.setUserTimePrefs=function(){this.timePrefs=new Object();var prefs=custDataMap.get(HEADER_BC_FORM);if(prefs==undefined){return}if(prefs.morningTime!=undefined){var timeobj=this.extractTimePref(prefs.morningTime);if(timeobj.Hours!=undefined){this.timePrefs.mornHours=timeobj.Hours}if(timeobj.Mins!=undefined){this.timePrefs.mornMin=timeobj.Mins}}if(prefs.noonTime!=undefined){var timeobj=this.extractTimePref(prefs.noonTime);if(timeobj.Hours!=undefined){this.timePrefs.noonHours=timeobj.Hours}if(timeobj.Mins!=undefined){this.timePrefs.noonMin=timeobj.Mins}}if(prefs.afternoonTime!=undefined){var timeobj=this.extractTimePref(prefs.afternoonTime);if(timeobj.Hours!=undefined){this.timePrefs.afterHours=timeobj.Hours}if(timeobj.Mins!=undefined){this.timePrefs.afterMin=timeobj.Mins}}};this.addUserCalTimePrefs=function(parentNode){this.setUserTimePrefs();this.setCalFlds(parentNode)};this.isEmpty=function(ob){for(var i in ob){return false}return true};this.setCalFlds=function(parentNode){var dFields=dojo.query(".dojoxformDateTimeCombo",parentNode);if(dFields==undefined||dFields.length==0){return}var obj=(this===window)?window.calTimePrefUtil:this;dojo.forEach(dFields,function(item){var input=dojo.query("input",item);if(input!=undefined&&input.length>0){var id=input[0].id;for(i=0;i<obj.timeProps.length;i++){var prop=obj.timeProps[i];eval("dijit.byId('"+id+"')."+prop+" = obj.timePrefs."+prop)}}})}}var SPLocalStorage={currentProvider:"default",currentNamespace:"dummy",isStorageReady:false,init:function(){this.isStorageReady=true;console.debug("SPLocalStorage loaded....")},_setCurrentNameSpace:function(a){if(typeof a!="undefined"&&a!=null){this.currentNamespace=a}},_save:function(a,f,b){}};function verifyPunchout(g,h,f,b){if(!g){var g=window.event}var a=false;if(h==="true"||h==="false"){if(h==="true"){a=true}else{if(b!=undefined&&dojo.string.trim(b)!=""){f=b+": "+f}a=confirm(f);if(!a){g.cancelBubble=true;g.returnValue=false;if(g.stopPropagation){g.preventDefault()}}}}else{a=true}return a}function SRMUnescapeHTML(a,b){var f=(b!=undefined)?b:undefined;if(a!=undefined){if(dojo.string.trim(a)!=""){f=a.unescapeHtml()}else{f=""}}return f}function disableMgrHelpButton(a){var b=undefined;if(sr_engineerHelpFlagAndSev1!=undefined){if(sr_engineerHelpFlagAndSev1==true){if(a==true){b=true}else{b=false}}else{b=true}}return b}String.prototype.unescapeHtml=function(){var b=document.createElement("div");b.innerHTML=this;var a=b.childNodes[0].nodeValue;b.removeChild(b.firstChild);return a};var sort_by=function(b,a,f){a=(a)?-1:1;return function(h,g){h=h[b];g=g[b];if(typeof(f)!="undefined"){h=f(h);g=f(g)}if(h<g){return a*-1}if(h>g){return a*1}return 0}};function getAppendedLOVName(b,a){var f=a;dojo.forEach(b.contents,function(g){var h=g.value;f+=":"+h});return f}function htmlDecode(a){var b=document.createElement("div");b.innerHTML=a;return b.childNodes.length===0?"":b.childNodes[0].nodeValue}function createCookie(f,g,h){if(h){var b=new Date();b.setTime(b.getTime()+(h*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=f+"="+g+a+"; path=/"}function readCookie(b){var g=b+"=";var a=document.cookie.split(";");for(var f=0;f<a.length;f++){var h=a[f];while(h.charAt(0)==" "){h=h.substring(1,h.length)}if(h.indexOf(g)==0){return h.substring(g.length,h.length)}}return null}function eraseCookie(a){createCookie(a,"",-1)}function truncateString(b,a){if(a==undefined||isNaN(a)||b==undefined){return b}return(b.length>a)?b.substring(0,a)+"... ":b}var OrionParameters={};OrionParameters.values={};OrionParameters.getParameter=function(b,a,f){OrionParameters.getParameters([b],a,f)};OrionParameters.getParameters=function(b,a,f){dojo.xhrPost({url:"../../../SRRequest",content:{action:"get_orion_params",params_name:b},preventCache:true,handleAs:"json",load:function(h){if(true===a){for(var g=0;g<b.length;g++){OrionParameters.values[b[g]]=h[b[g]]}}if(typeof(f)=="function"){f.call(h)}},error:function(g){console.error("Error Encountered while loading orion parameters: ",g)}})};function evaluateSRMContextTextURLandTokens(b,g,p){var a;var h=b.get(g);if(h!=null&&h.href!=null&&dojo.string.trim(h.href)!=""){var a=h.href;var m=p.keySet();for(var f=0;f<m.length;f++){var l=m[f];var o=p.get(l);a=a.replace(l,o)}return a}}function fixedEncodeURIComponent(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape)}var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,g=/[^-+\dA-Z]/g,f=function(l,h){l=String(l);h=h||2;while(l.length<h){l="0"+l}return l};return function(u,G,B){var p=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(u)=="[object String]"&&!/\d/.test(u)){G=u;u=undefined}u=u?new Date(u):new Date;if(isNaN(u)){throw SyntaxError("invalid date")}G=String(p.masks[G]||G||p.masks["default"]);if(G.slice(0,4)=="UTC:"){G=G.slice(4);B=true}var E=B?"getUTC":"get",x=u[E+"Date"](),h=u[E+"Day"](),v=u[E+"Month"](),A=u[E+"FullYear"](),C=u[E+"Hours"](),w=u[E+"Minutes"](),F=u[E+"Seconds"](),z=u[E+"Milliseconds"](),l=B?0:u.getTimezoneOffset(),q={d:x,dd:f(x),ddd:p.i18n.dayNames[h],dddd:p.i18n.dayNames[h+7],m:v+1,mm:f(v+1),mmm:p.i18n.monthNames[v],mmmm:p.i18n.monthNames[v+12],yy:String(A).slice(2),yyyy:A,h:C%12||12,hh:f(C%12||12),H:C,HH:f(C),M:w,MM:f(w),s:F,ss:f(F),l:f(z,3),L:f(z>99?Math.round(z/10):z),t:C<12?"a":"p",tt:C<12?"am":"pm",T:C<12?"A":"P",TT:C<12?"AM":"PM",Z:B?"UTC":(String(u).match(b)||[""]).pop().replace(g,""),o:(l>0?"-":"+")+f(Math.floor(Math.abs(l)/60)*100+Math.abs(l)%60,4),S:["th","st","nd","rd"][x%10>3?0:(x%100-x%10!=10)*x%10]};return G.replace(a,function(m){return m in q?q[m]:m.slice(1,m.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a,b){return dateFormat(this,a,b)};dojo.require("dojox.grid._grid.view");dojo.extend(dojox.GridView,{doscroll:function(a){var g=dojo._isBodyLtr();if(this.firstScroll<2){if((!g&&this.firstScroll==1)||(g&&this.firstScroll==0)){var b=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE){this.headerNodeContainer.style.width=b.w+this.getScrollbarWidth()+"px"}else{if(dojo.isMoz){this.headerNodeContainer.style.width=b.w-this.getScrollbarWidth()+"px"}}}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var f=this.scrollboxNode.scrollTop;if(f!=this.lastTop){this.grid.scrollTo(f)}}});var shortcut={all_shortcuts:{},add:function(b,o,g){var m={type:"keydown",propagate:false,disable_in_input:false,target:document,keycode:false};if(!g){g=m}else{for(var a in m){if(typeof g[a]=="undefined"){g[a]=m[a]}}}var l=g.target;if(typeof g.target=="string"){l=document.getElementById(g.target)}var f=this;b=b.toLowerCase();var h=function(v){v=v||window.event;if(g.disable_in_input){var q;if(v.target){q=v.target}else{if(v.srcElement){q=v.srcElement}}if(q.nodeType==3){q=q.parentNode}if(q.tagName=="INPUT"||q.tagName=="TEXTAREA"){return}}if(v.keyCode){code=v.keyCode}else{if(v.which){code=v.which}}var u=String.fromCharCode(code).toLowerCase();if(code==188){u=","}if(code==190){u="."}var z=b.split("+");var y=0;var w={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"};var s={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};var x={shift:{wanted:false,pressed:false},ctrl:{wanted:false,pressed:false},alt:{wanted:false,pressed:false},meta:{wanted:false,pressed:false}};if(v.ctrlKey){x.ctrl.pressed=true}if(v.shiftKey){x.shift.pressed=true}if(v.altKey){x.alt.pressed=true}if(v.metaKey){x.meta.pressed=true}for(var p=0;k=z[p],p<z.length;p++){if(k=="ctrl"||k=="control"){y++;x.ctrl.wanted=true}else{if(k=="shift"){y++;x.shift.wanted=true}else{if(k=="alt"){y++;x.alt.wanted=true}else{if(k=="meta"){y++;x.meta.wanted=true}else{if(k.length>1){if(s[k]==code){y++}}else{if(g.keycode){if(g.keycode==code){y++}}else{if(u==k){y++}else{if(w[u]&&v.shiftKey){u=w[u];if(u==k){y++}}}}}}}}}}if(y==z.length&&x.ctrl.pressed==x.ctrl.wanted&&x.shift.pressed==x.shift.wanted&&x.alt.pressed==x.alt.wanted&&x.meta.pressed==x.meta.wanted){o(v);if(!g.propagate){v.cancelBubble=true;v.returnValue=false;if(v.stopPropagation){v.stopPropagation();v.preventDefault()}return false}}};this.all_shortcuts[b]={callback:h,target:l,event:g.type};if(l.addEventListener){l.addEventListener(g.type,h,false)}else{if(l.attachEvent){l.attachEvent("on"+g.type,h)}else{l["on"+g.type]=h}}},remove:function(a){a=a.toLowerCase();var g=this.all_shortcuts[a];delete (this.all_shortcuts[a]);if(!g){return}var b=g.event;var f=g.target;var h=g.callback;if(f.detachEvent){f.detachEvent("on"+b,h)}else{if(f.removeEventListener){f.removeEventListener(b,h,false)}else{f["on"+b]=false}}}};var SRMKeypressFunc=function(g,m){g=g||window.event;if(g.keyCode){code=g.keyCode}else{if(g.which){code=g.which}}var f=String.fromCharCode(code).toLowerCase();if(code==188){f=","}if(code==190){f="."}var p=m.split("+");var o=0;var h={"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"};var b={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};var l={shift:{wanted:false,pressed:false},ctrl:{wanted:false,pressed:false},alt:{wanted:false,pressed:false},meta:{wanted:false,pressed:false}};if(g.ctrlKey){l.ctrl.pressed=true}if(g.shiftKey){l.shift.pressed=true}if(g.altKey){l.alt.pressed=true}if(g.metaKey){l.meta.pressed=true}for(var a=0;k=p[a],a<p.length;a++){if(k=="ctrl"||k=="control"){o++;l.ctrl.wanted=true}else{if(k=="shift"){o++;l.shift.wanted=true}else{if(k=="alt"){o++;l.alt.wanted=true}else{if(k=="meta"){o++;l.meta.wanted=true}else{if(k.length>1){if(b[k]==code){o++}}else{if(f==k){o++}else{if(h[f]&&g.shiftKey){f=h[f];if(f==k){o++}}}}}}}}}if(o==p.length&&l.ctrl.pressed==l.ctrl.wanted&&l.shift.pressed==l.shift.wanted&&l.alt.pressed==l.alt.wanted&&l.meta.pressed==l.meta.wanted){return true}else{return false}};function punchoutToNewSRViewer(b){var f="";if(b!=undefined){var g=dojo.query(".mosspSRViewerUrlClass",b.parentNode);if(g!=undefined&&g.length>0){f=g[0].innerHTML}}else{}if(f!=undefined&&dojo.string.trim(f)!=""){window.open(f,"_blank");return}console.log("In punchoutToNewSRViewer with parameter : "+b+" : URL is blank. Can't punchout to a blank url")}function evalToShowSupportTab_WorklistBanner(a){OrionParameters.getParameters(["SRM_MOSSP_WORKLIST_KEYTEXT","SRM_MOSSP_WORKLIST_BANNER_PAGELIST","SRM_MOSSP_SRCREATE_KEYTEXT"],true,function(){var f=a.get(dojo.string.trim(OrionParameters.values.SRM_MOSSP_WORKLIST_KEYTEXT));var h=a.get(dojo.string.trim(OrionParameters.values.SRM_MOSSP_SRCREATE_KEYTEXT));var p=dojo.string.trim(OrionParameters.values.SRM_MOSSP_WORKLIST_BANNER_PAGELIST);var w=new Array();if(p!=undefined&&p!=""){w=p.split(",")}var q=false;dojo.forEach(w,function(x,y){if(document.location.pathname.endsWith(x)){q=true}});if(q===true&&f!=undefined&&f.href!=undefined&&dojo.string.trim(f.href)!=""){if(dojo.byId("MOSSPWorklistButtonImg")!=undefined){dojo.byId("MOSSPWorklistButtonImg").src="../images/airhorn_24.png"}var o=dojo.byId("MOSSPWorklistButton");if(dojo.byId("MOSSPWorklistButton")!=null){dojo.style(dojo.byId("MOSSPWorklistButton"),{display:""});dojo.style(dojo.byId("MOSSPWorklistButton"),{width:"186px"});var v=dojo.doc.createElement("A");v.href=f.href;v.target="_blank";v.style.textDecoration="none";v.innerHTML="Preview the New Support Portal";v.onmouseout=function(){this.style.textDecoration="none"};v.onmouseover=function(){this.style.textDecoration="underline"};var g=false;if(f!=undefined){dojo.byId("MOSSPWorklistButtonSpan").appendChild(v);g=true}var s=dojo.doc.createElement("A");s.href=h.href;s.target="_blank";s.style.textDecoration="none";s.innerHTML="Try the New SR Create";s.onmouseout=function(){this.style.textDecoration="none"};s.onmouseover=function(){this.style.textDecoration="underline"};var m=dojo.doc.createElement("span");m.innerHTML="|";if(dojo.isIE==0){m.style="vertical-align:middle; padding-left:4px; margin-left:4px;padding-right:4px; margin-right:4px;"}var b="../../../SRRequest";var l={action:"isUserAllowedToUseRewriteSRCreate"};var u=genericTalkToServer(b,l,"json",true,120000,"post");u.addCallback(function(y,x){if(y.opStatus!=undefined&&y.opStatus==0){if(y.useMosspSRCreate!=undefined){if(y.useMosspSRCreate==true&&h!=undefined){if(g==true){dojo.byId("MOSSPWorklistButtonSpan").appendChild(m);dojo.style(dojo.byId("MOSSPWorklistButton"),{width:"315px"})}dojo.byId("MOSSPWorklistButtonSpan").appendChild(s);dojo.style(m,{"vertical-align":"middle","padding-left":"4px","margin-left":"4px","padding-right":"4px","margin-right":"4px"})}}}})}}else{console.log("Dont show the banner.Either the keyText can locate a valid href or dont show ")}})}function viewCSMConfig(g,a,h,f,l,b){OrionParameters.getParameters(["SRM_CONFIG_VIEWER_URL"],true,function(){url=OrionParameters.values.SRM_CONFIG_VIEWER_URL+"?csi="+g+"&orgid="+a+"&guid="+h+"&name="+f+"&sr_number="+l+"&doNotShowHeader="+b;window.open(url,"_blank")})}function viewCSMHost(g,a,h,f,l,b){OrionParameters.getParameters(["SRM_HOST_VIEWER_URL"],true,function(){url=OrionParameters.values.SRM_HOST_VIEWER_URL+"?csi="+g+"&orgid="+a+"&guid="+h+"&name="+f+"&sr_number="+l+"&doNotShowHeader="+b;window.open(url,"_blank")})}var SRUtils={};SRUtils.loadSRByNumber=function(a){refreshSR(getSRQstr(a))};SRUtils.loadSRByNumberInNewWindow=function(f){var a=null;var b=window.location.href.indexOf("?");if(b==-1){a=window.location.href}else{a=window.location.href.substr(0,b)}a+=getSRQstr(f);window.open(a)};SRUtils.loadSRInViewerByNumber=function(a){requestSR(a)};SRUtils.isSREditable=function(){return"Open"===headerDataAsJson.Status};SRUtils.isCollabSR=function(){return"true"===headerDataAsJson.isCollaborationSR};SRUtils.isInternalCollabSR=function(){return headerDataAsJson.isInternalCollaborationSR};SRUtils.isSRClosed=function(){if(headerDataAsJson!=undefined&&headerDataAsJson!=null){return"Closed"===headerDataAsJson.Status}return false};SRUtils.isSerialNumberOK=function(){var b=false;var a=getSerialNumberId();if(a!=""){b=true}return b};SRUtils.isNewSR=function(){var a=getEvalFieldVal("substatus","Substatus");return(dojo.string.trim(a).toLowerCase()=="new")};SRUtils.getCurrentSR=function(){return headerDataAsJson};SRUtils.isMigrationFromSoftwareToHardware=function(){return isHardwareSR()&&(SRUtils.getCurrentSR().HWFlg==false)};SRUtils.isCurrentSRLoaded=function(){return(null!=SRUtils.getCurrentSR().SRNumber)};SRUtils.mapFormFldForCustom=function(b){var a="";switch(b){case"status":a="status";break;case"SRType":a="srType";break;case"sub-Status":a="substatus";break;case"nextResponseDue":a="nextResponse";break;case"SRHIFlag":a="HIAcknowledge";break;case"SRRootcause":a="rootCause";break;case"resolutionCode":a="reasonCode";break;case"knownIssue":a="knownIssue";break;case"owner":a="empEmail";break;case"requestFullSupportReasonCode":a="unset24x7ReasonCode";break;case"SRPlatformSpecific":a="platformSpecificFlag";break;case"SROutageType":a="SROutageType";break;case"SROutageStartDate":a="SROutageStartDate";break;case"SROutageEndDate":a="SROutageEndDate";break;case"SROutagePercentage":a="SROutagePercentage";break;case"ATLastFlowStatus":a="ATLastFlowStatus";break}return a};SRUtils.getMappedFormFldId=function(b,a){if(b==undefined&&b.id==undefined){return""}var f="";f=SRUtils.mapFormFldForCustom(b.id);f=(a!=undefined&&a==true)?f+"Cloned":f;return f};SRUtils.createSRFromCSIDetailPage=function(a){if(a==null||a==undefined){alert("The SR creation process will not start because a CSI was not supplied.");return}window.open("/oip/faces/secure/srm/sr/SRCreate.jspx?csi="+a)};var TASK_STATUS_ATTR="status";SRUtils.hasOpenFSTask=function(){var a=false;if(referencesElementsStore!=undefined&&referencesElementsStore[CHILD_TYPE_FSTASK].length>0){dojo.forEach(referencesElementsStore[CHILD_TYPE_FSTASK],function(b){if(b[TASK_STATUS_ATTR]!="Closed"&&b[TASK_STATUS_ATTR]!="Cancelled"){a=true}})}return a};SRUtils.checkForOpenFSTask=function(a){if(getInitMode()){return}var b=SRUtils.hasOpenFSTask();if(b){var g="There is an 'Open Field Service(FS) Task' associated to this SR, close any open FS Task and then change it to "+a;var f=getDisplayMessageObj(g,ERROR);f.cancelLabel="Close";return f}return null};SRUtils.onbeforeunload=function(a){a=a||window.event;console.debug("modified flds size:"+window.modifiedFlds.size());if(window.modifiedFlds!=undefined&&window.modifiedFlds.size()>0){a.returnValue="You have made changes. They will be lost if you continue."}};var headerBlurHandles=new Array();SRUtils.addOnBlurForHeader=function(a){var b="srHeader";var f=new Array();if(a){f=dojo.query("select, input, textarea","maximizedSRHeaderTable")}else{f=dojo.query("select, input, textarea","unmaximizedSRHeaderTable")}cleanHeaderBlurHandles();dojo.forEach(f,function(u){var v=dojo.attr(u,"id");if(v==null){v=dojo.attr(u,"name")}var g=(dijit.byId(v))!=undefined?dijit.byId(v).readOnly:dojo.attr(u,"readOnly");var m=dojo.attr(u,"disabled");var l=dojo.attr(u,"type");var h=dijit.byId(v);if(v!=null&&v!=""&&!g&&l!="hidden"&&v!="srTBox"&&v!="activeSrList"&&!m&&v!="hideAF"&&v!="filterActivities"&&v!="sortFs"&&v!="hideInstr"&&v!="contactClock"&&v!="SRProductSubscription"||(v=="OnsiteSLA")){if(h!=undefined&&h!=null){var q=h.getValue();var p=new Object();p.detail=q;var o=null;if(v=="description"){o=dojo.connect(h,"onBlur",function(){SRUtils.onBlurFld(h,p,b)});var s=function(){SRUtils.onBlurFld(h,p,b)};h.domNode.onkeypress=s}else{o=dojo.connect(h,"onChange",function(){if(h.id=="SRProductClass"){var w=dojo.style("SRProductClassRow","display");if(w!=undefined&&w!="none"){SRUtils.onBlurFld(h,p,b)}}else{SRUtils.onBlurFld(h,p,b)}})}if(o!=null){headerBlurHandles.push(o)}}}})};function cleanHeaderBlurHandles(){if(headerBlurHandles!=undefined&&headerBlurHandles.length>0){for(var a=0;a<headerBlurHandles.length;a++){var b=headerBlurHandles[a];if(b!=undefined){dojo.disconnect(b)}}headerBlurHandles=new Array()}}SRUtils.onBlurFld=function(h,f,b){if(h==undefined||h==null||getInitMode()){return}var g="";var l=(h.id!=""&&h.id!=undefined)?h.id:h.name;if(dijit.byId(l)){g=dijit.byId(l).getValue()}else{g=h.value}g=(g!=undefined&&g!=""&&!(g instanceof Date)&&isNaN(g))?g.replace(/\s*$/g,""):g;var a="";if(f!=undefined&&f.detail!=undefined){a=unescape(f.detail)}else{a=unescape(f)}a=(a!=undefined&&a!=""&&!(a instanceof Date)&&isNaN(a))?a.replace(/\s*$/g,""):a;if(a!=g&&b!=null&&b!=""){if(h.id=="srType"||h.id=="serialNum"){recalcFSAccordion=true}modifiedFlds.put(b,"true")}};SRUtils.onChangeFld=function(g,a,f){if(g==undefined||g==null){return 0}var b=g.getValue();b=(b!=undefined&&b!=""&&!(b instanceof Date))?b.replace(/\s*$/g,""):b;b=(b!=undefined&&b!=""&&!(b instanceof Date))?b.replace(/&quot;/g,'"'):b;b=(b!=undefined&&b!=""&&!(b instanceof Date))?b.replace(/&gt;/g,">"):b;b=(b!=undefined&&b!=""&&!(b instanceof Date))?b.replace(/&lt;/g,"<"):b;f=(f!=undefined&&f!=""&&!(f instanceof Date))?f.replace(/&quot;/g,'"'):f;f=(f!=undefined&&f!=""&&!(f instanceof Date))?f.replace(/&gt;/g,">"):f;f=(f!=undefined&&f!=""&&!(f instanceof Date))?f.replace(/&lt;/g,"<"):f;f=(f!=undefined&&f!=""&&!(f instanceof Date))?f.replace(/&nbsp;/g,"\u00A0"):f;if(f!=b&&a!=null&&a!=""){modifiedFlds.put(a,"true");return 1}return 0};SRUtils.unmarkChanges=function(a){recalcFSAccordion=false;if(modifiedFlds!=undefined&&a!=undefined&&modifiedFlds.findIt(a)!=-1){modifiedFlds.remove(a)}if(a=="all"&&(modifiedFlds!=undefined&&modifiedFlds.size()>0)){modifiedFlds.clear()}};SRUtils.showPageModifiedAlert=function(){if(modifiedFlds!=undefined&&modifiedFlds.size()>0){SRUtils.printModifiedFlds();if(!confirm("You have made changes. They will be lost if you continue.")){return -1}else{modifiedFlds.clear()}}return 0};SRUtils.isHeaderModifiedDirty=function(){var a=false;if(window.modifiedFlds!=undefined&&window.modifiedFlds.size()>0&&window.modifiedFlds.findIt("srHeader")!=-1){a=true}return a};SRUtils.showHeaderModifiedAlert=function(){if(window.modifiedFlds!=undefined&&window.modifiedFlds.size()>0&&window.modifiedFlds.findIt("srHeader")!=-1){if(!confirm("You have made changes in SR Header. They will be lost if you continue.")){return -1}else{SRUtils.unmarkChanges("srHeader")}}return 0};SRUtils.showActivityInstructionModifiedAlert=function(a){if(window.modifiedFlds!=undefined&&window.modifiedFlds.size()>0&&window.modifiedFlds.findIt(a)!=-1){SRUtils.printModifiedFlds();if(!confirm("You have made changes in SR Activity Updates. They will be lost if you continue.")){return -1}else{SRUtils.unmarkChanges(a)}}return 0};SRUtils.showOtherSectionModified=function(a){var l=false;if(window.modifiedFlds!=undefined&&window.modifiedFlds.size()>0){SRUtils.printModifiedFlds();var g=window.modifiedFlds.keySet();var f=new Array();dojo.forEach(g,function(m){if(m!=undefined){if(m!=a){l=true;f.push(m)}}})}if(l&&!confirm("You have made changes in SR Header or other activities that are not saved. They may be lost if you continue.")){return -1}if(f!=undefined&&f.length>0){for(var b=0;b<f.length;b++){var h=f[b];SRUtils.unmarkChanges(h)}}return 0};SRUtils.printModifiedFlds=function(){if(window.modifiedFlds!=undefined&&window.modifiedFlds.size()>0){var a=window.modifiedFlds.keySet();dojo.forEach(a,function(b){if(b!=undefined){console.debug("Modified item:"+b)}})}};var dialogBlurHandles=new Array();function cleanHandles(f){if(f!=undefined&&f.length>0){for(var a=0;a<f.length;a++){var b=f[a];if(b!=undefined){dojo.disconnect(b)}}f=new Array()}}SRUtils.addOnChangeForOPDialog=function(b){var a=new Array();a=dojo.query("select, input, textarea",b);cleanHandles(dialogBlurHandles);dojo.forEach(a,function(s){var v=b.id;var u=dojo.attr(s,"id");if(u==null){u=dojo.attr(s,"name")}var g=dojo.attr(s,"readOnly");var m=dojo.attr(s,"disabled");var l=dojo.attr(s,"type");if(u!=null&&u!=""&&!g&&l!="hidden"){var h=dijit.byId(u);if(h!=undefined&&h!=null){var q=h.getValue();var p=new Object();p.detail=q;var o=null;if(l=="textarea"||l=="checkbox"){v=b.id+u}if(l=="textarea"){var f=function(){SRUtils.onBlurFld(h,p,v)};h.domNode.onkeypress=f;h.domNode.onblur=f}else{o=dojo.connect(h,"onChange",function(){SRUtils.onBlurFld(h,p,v)})}if(o!=null){dialogBlurHandles.push(o)}}}})};SRUtils.isDialogModified=function(f){var g=f.id;if(window.modifiedFlds!=undefined&&window.modifiedFlds.size()>0&&window.modifiedFlds.findIt(g)!=-1){return true}var a=window.modifiedFlds.keySet();for(i=0;i<a.length;i++){var b=a[i];if(b.startsWith(g)){return true}}return false};SRUtils.showDialogModifiedAlert=function(f){var g=f.id;if(window.modifiedFlds!=undefined&&window.modifiedFlds.size()>0&&window.modifiedFlds.findIt(g)!=-1){if(!confirm("This page contains uncommitted data. Press OK to continue, or Cancel to stay on the current page.")){return -1}else{SRUtils.unmarkDialogChanges(g)}}var a=window.modifiedFlds.keySet();for(i=0;i<a.length;i++){var b=a[i];if(b.startsWith(g)){if(!confirm("This page contains uncommitted data. Press OK to continue, or Cancel to stay on the current page.")){return -1}else{SRUtils.unmarkDialogChanges(b)}}}return 0};SRUtils.showDialogModifiedAlertOnIFrame=function(f,g,a){var b=document.getElementById(g).contentWindow;b.postMessage(a,"*")};SRUtils.unmarkDialogChanges=function(g,f){if(f==undefined||(f!=undefined&&f!=false)){cleanHandles(dialogBlurHandles)}SRUtils.unmarkChanges(g);var a=window.modifiedFlds.keySet();for(i=0;i<a.length;i++){var b=a[i];if(b.startsWith(g)){SRUtils.unmarkChanges(b)}}};SRUtils.isModifiedNode=function(a){if(window.modifiedFlds!=undefined&&window.modifiedFlds.size()>0&&window.modifiedFlds.findIt(a)!=-1){return true}return false};dojo.require("dojo.data.ItemFileReadStore");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("dijit.Tree");dojo.require("dijit.InlineEditBox");dojo.require("dijit.Editor");dojo.require("dijit._editor.RichText");dojo.require("dijit._editor._Plugin");dojo.require("dijit.form.ComboBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.TextBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.layout.BorderContainer");dojo.require("dijit.layout.AccordionContainer");dojo.require("dojox.fx.ext-dojo.NodeList");dojo.require("dijit.form.Button");dojo.require("dijit.Toolbar");dojo.require("dijit.Menu");dojo.require("dojo.parser");dojo.require("dojo._base.html");dojo.require("dojox.fx.easing");dojo.require("dijit.layout.LayoutContainer");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.Form");dojo.require("dijit.form.DateTextBox");dojo.require("dijit.form.Textarea");dojo.require("dijit.form.SimpleTextarea");dojo.require("dijit.form.Button");dojo.require("dijit.Editor");dojo.require("dijit._editor.plugins.AlwaysShowToolbar");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.ComboBox");dojo.require("dijit.form.CheckBox");dojo.require("dojo.date.locale");dojo.require("dojox.grid.Grid");dojo.require("dojox.fx.easing");dojo.require("dojox.fx.scroll");dojo.require("dojox.grid._data.model");dojo.require("dojox.data.QueryReadStore");dojo.require("dijit.ProgressBar");dojo.require("dijit.Tooltip");dojo.require("dijit.layout.TabContainer");dojo.require("dojo.io.script");dojo.require("dijit.layout.LinkPane");dojo.require("dijit.form.MultiSelect");dojo.registerModulePath("srmdojoc","../srmdojoc");dojo.require("srmdojoc.layout.ImageAccordion");dojo.require("srmdojoc.layout.DACTree");dojo.require("srmdojoc.data.SPHomeQueryReadStore");dojo.require("srmdojoc.data.SPHomeDojoData");dojo.require("srmdojoc.layout.SRTechTitlePane");dojo.require("srmdojoc.layout.SRTechActionTitlePane");dojo.require("srmdojoc.SRMDateTimeTextBox");dojo.require("srmdojoc.DynamicGridData");dojo.require("srmdojoc.layout.CustomButton");dojo.require("srmdojoc.layout.CustomDropDownButton");dojo.require("srmdojoc.data.LazyLoadItemFileReadStore");dojo.require("srmdojoc.grid.SPGrid");dojo.require("srmdojoc.layout.AccordionPanePlus");dojo.require("srmdojoc.form.ValidationSimpleTextarea");dojo.require("srmdojoc.form.Textarea");dojo.require("srmdojoc.form.DateTimeCombo");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.Dialog");dojo.extend(dijit.layout.StackController,{onkeypress:function(f){if(this.disabled||f.altKey){return}var b=null;if(f.ctrlKey||!f._djpage){var a=dojo.keys;switch(f.keyCode){case a.LEFT_ARROW:case a.UP_ARROW:if(!f._djpage){b=false}break;case a.PAGE_UP:if(f.ctrlKey&&!f.shiftKey){b=false}break;case a.RIGHT_ARROW:case a.DOWN_ARROW:if(!f._djpage){b=true}break;case a.PAGE_DOWN:if(f.ctrlKey&&!f.shiftKey){b=true}break;default:if(f.ctrlKey){if(f.keyCode==a.TAB){}else{if(f.keyChar=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild)}dojo.stopEvent(f)}}}}if(b!==null){this.adjacent(b).onClick();dojo.stopEvent(f)}}}});dojo.declare("srm.Dialog",dijit.Dialog,{refreshOnHide:false,iframeName:undefined,iframeCancelMessage:undefined,hide:function(){if(this.iframeName==undefined){var b=this.id;var a=SRUtils.showDialogModifiedAlert(this);if(a==0){SRUtils.unmarkDialogChanges(b);errHandlingUtil.clearErrFlds(b);this.inherited(arguments);cleanupDialog(b);if(this.refreshOnHide){refreshSRDetail("?refresh=true","",true,false)}}else{return -1}}else{var b=this.id;var a=SRUtils.showDialogModifiedAlertOnIFrame(this,this.iframeName,this.iframeCancelMessage);return true}}});dojo.declare("srm.TabContainer",dijit.layout.TabContainer,{_controllerWidget:"srm.TabController",tabOnClickRequestParam:{},tabOnClickRequest:function(){},postCreate:function(){this.inherited(arguments);dojo.connect(this.tablist,"tabControllerClickRequest",this,"tabOnClickRequest");this.tablist.tabOnClickRequestParam=this.tabOnClickRequestParam}});dojo.declare("srm.TabController",dijit.layout.TabController,{buttonWidget:"srm._TabButton",tabOnClickRequestParam:{},tabControllerClickRequest:function(){},onAddChild:function(m,b){var h=dojo.doc.createElement("span");this.domNode.appendChild(h);var g=dojo.getObject(this.buttonWidget);var l=new g({label:m.title,closeButton:m.closable},h);this.addChild(l,b);this.pane2button[m]=l;m.controlButton=l;dojo.connect(l,"onClick",dojo.hitch(this,"onButtonClick",m));dojo.connect(l,"tabButtonOnClickRequest",this,"tabControllerClickRequest");l.tabOnClickRequestParam=this.tabOnClickRequestParam;if(m.closable){dojo.connect(l,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",m));var f=dojo.i18n.getLocalization("dijit","common");var a=new dijit.Menu({targetNodeIds:[l.id],id:l.id+"_Menu"});var o=new dijit.MenuItem({label:f.itemClose});dojo.connect(o,"onClick",dojo.hitch(this,"onCloseButtonClick",m));a.addChild(o);this.pane2menu[m]=a}if(!this._currentChild){l.focusNode.setAttribute("tabIndex","0");this._currentChild=m}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList()}}});dojo.declare("srm._TabButton",dijit.layout._TabButton,{baseClass:"dijitTab",templateString:"<div waiRole=\"presentation\" dojoAttachEvent='onclick:onTabClick,onmouseenter:_onMouse,onmouseleave:_onMouse'>\r\n    <div waiRole=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\r\n        <div waiRole=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent'>\r\n\t   <img width='18' class='tabImage' dojoAttachPoint='tabImgNode'> </img>  <span dojoAttachPoint='containerNode,focusNode' class='tabLabel'>${!label}</span><span class='tabInfo' dojoAttachPoint='tabInfoNode'> </span>\r\n\t        <span dojoAttachPoint='closeButtonNode' class='closeImage' dojoAttachEvent='onmouseenter:_onMouse, onmouseleave:_onMouse, onclick:onClickCloseButton' stateModifier='CloseButton'>\r\n\t            <span dojoAttachPoint='closeText' class='closeText'>x</span>\r\n\t        </span>\r\n        </div>\r\n    </div>\r\n</div>\r\n",postCreate:function(){if(this.closeButton){dojo.addClass(this.innerDiv,"dijitClosable")}else{this.closeButtonNode.style.display="none"}this.inherited(arguments);dojo.setSelectable(this.containerNode,false)},stopTabOnClick:false,tabOnClickRequestParam:{},tabButtonOnClickRequest:function(){},onTabClick:function(a){this.tabButtonOnClickRequest();if(this.tabOnClickRequestParam.stopProp!=undefined&&typeof this.tabOnClickRequestParam.stopProp=="boolean"&&this.tabOnClickRequestParam.stopProp){return}if(this.tabOnClickRequestParam.deferred!=undefined&&this.tabOnClickRequestParam.deferred!=null&&typeof this.tabOnClickRequestParam.deferred=="object"){this.tabOnClickRequestParam.deferred.addCallback(dojo.hitch(this,function(b){if(b!=undefined&&typeof b=="number"&&b==1){return}if(b==undefined||b.opStatus==undefined||(b.opStatus!=undefined&&b.opStatus!=1)){this.onClick(a)}}))}else{if(this.tabOnClickRequestParam.stopProp==undefined||(this.tabOnClickRequestParam.stopProp!=undefined&&typeof this.tabOnClickRequestParam.stopProp=="boolean"&&!this.tabOnClickRequestParam.stopProp)){this.onClick(a)}}}});var store;var headerDataAsJson={};var LOVMap={};var vlinkHrefMap=new Map();var activityStore;var initMode=false;var referencesStore;var referencesElementsStore;var filteredActivities;var srData;var viewPaneContent;var psrId;var pmodId;var userTZ;var queryTabName;var QUERY_TAB_NAME="queryTabName";var DYNAMIC_QUERY="Dynamic Query";var TAB="tab";var SRM_CCA_OUTBOUND_SWITCH="SRM_CCA_OUTBOUND_SWITCH";var calTimePrefUtil=new calTimePrefUtil();var maximizedSRHeaderTemplate;var srHeaderTemplate;var paneContentTemplate;var FULL_SUPPORT_LABEL_Y="Yes";var FULL_SUPPORT_LABEL_N="No";var CHILD_TYPE_SR="RelatedSR";var CHILD_TYPE_BUG="Defect";var CHILD_TYPE_RFC="RfcProject";var CHILD_TYPE_KM="Solution";var CHILD_TYPE_SOLUTION_URL="SolutionURL";var CHILD_TYPE_ATTACHMENT="Attachment";var CHILD_TYPE_ERRMSG="MessageDef";var CHILD_TYPE_PREDEFECT="PREDEFECT";var CHILD_TYPE_ADR_PACKAGES="ADR";var CHILD_TYPE_CHILDREN_SR="RelatedIncidentSR";var TRANSLATION_SR="Translation SR";var PARENT_SR="PARENT_SR";var CHILD_TYPE_FSTASK="FSTask";var CHILD_TYPE_FSETASK="FSETask";var SIMILAR_SR="SIMILAR_SR";var lAccordionPaneIDs={};lAccordionPaneIDs[CHILD_TYPE_ATTACHMENT]="refElemAttachments";lAccordionPaneIDs[CHILD_TYPE_SR]="refElemSRs";lAccordionPaneIDs[CHILD_TYPE_KM]="refElemKM";lAccordionPaneIDs[CHILD_TYPE_BUG]="refElemBUGs";lAccordionPaneIDs[CHILD_TYPE_RFC]="refElemRFCs";lAccordionPaneIDs[CHILD_TYPE_ERRMSG]="refElemErrorMessages";lAccordionPaneIDs[CHILD_TYPE_PREDEFECT]="refElemPredefects";lAccordionPaneIDs[CHILD_TYPE_ADR_PACKAGES]="refElemADRPackages";lAccordionPaneIDs[CHILD_TYPE_CHILDREN_SR]="refElemChildrenSR";lAccordionPaneIDs[PARENT_SR]="refElemParentSR";lAccordionPaneIDs[CHILD_TYPE_FSTASK]="refElemFSTasks";lAccordionPaneIDs[CHILD_TYPE_SOLUTION_URL]="refElemSolnUrl";lAccordionPaneIDs[CHILD_TYPE_FSETASK]="refElemFSETasks";lAccordionPaneIDs[SIMILAR_SR]="refElemSimilarSR";var OPERATION_STATUS_SUCCESS="1";var OPERATION_STATUS_FAILURE="0";var ACTIVITY_DIV_ID_PREFIX="div";var ACTIVITY_ID_ANCHOR="link";var CSI_ACCOUNT_EDIT_PRIV="CSI_ACCOUNT_EDIT_PRIV";var RFC_READ_PRIV="RFC_READ_PRIV";var RFC_UPDATE_PRIV="RFC_UPDATE_PRIV";var OLM_OTS_READ_PRIV="OLM_OTS_READ_PRIV";var OLM_OTS_UPDATE_PRIV="OLM_OTS_UPDATE_PRIV";var SR_UPDATE_PRIV="SR_UPDATE_PRIV";var SECURE_SR_UPDATE_PRIV="SECURE_SR_UPDATE_PRIV";var CMDB_ASSOCIATION_PRIV="CMDB_ASSOCIATION_PRIV";var ADMINISTRATION_GLOBAL_PRIV="ADMINISTRATION_GLOBAL_PRIV";var DEFECT_DWB_URL="DEFECT_DWB_URL";var DEFECT_BUGDB_URL="DEFECT_BUGDB_URL";var DEFECT_EBIZ_URL="DEFECT_EBIZ_URL";var DEFECT_ICE_URL="DEFECT_ICE_URL";var DEFECT_BUGDB_ESC_URL="DEFECT_BUGDB_ESC_URL";var DEFECT_BUGDB_P1_URL="DEFECT_BUGDB_P1_URL";var DEFECT_BUGDB_OOB_URL="DEFECT_BUGDB_OOB_URL";var DEFECT_SUN_BUGTRAQ_URL="DEFECT_SUN_BUGTRAQ_URL";var PREDEFECT_CREATE_URL="PREDEFECT_CREATE_URL";var BDE_SEV1_URL="BDE_SEV1_URL";var SRM_CONF_OPTIONS="SRM_CONF_OPTIONS";var SRM_BEEHIVE_URL="SRM_BEEHIVE_URL";var SRM_STRTC_URL="SRM_STRTC_URL";var SRM_OC_URL="SRM_OC_URL";var SRM_STRTC_CUST_URL="SRM_STRTC_CUST_URL";var SRM_OC_CUST_URL="SRM_OC_CUST_URL";var SRM_BEEHIVE_CUST_URL="SRM_BEEHIVE_CUST_URL";var HIDE_EMAIL_DETAILS="hideEmailDetails";var HIDE_EMAIL_DETAIL_FOR_SESSION="hideEmailDetailForSession";var SRM_ACTIVITY_COUNT_LOV="SRM_ACTIVITY_COUNT_LOV";var SRM_USE_CC_ODMTRAIN_REC="SRM_USE_CC_ODMTRAIN_REC";var SRM_MAX_ACTIVITY_LIMIT="SRM_MAX_ACTIVITY_LIMIT";var modifiedFlds=new Map();var temp="";var FLD_SRV_ATR_URL="FLD_SRV_ATR_URL";var fsTaskLOVMap=new Map();var fsTaskCreateTemplate=null;var ACTION_CREATE_SR_REFERENCE_FSTASK="create_sr_reference_fsTask";var ACTION_CREATE_SR_REFERENCE_FSTASK_SHADOW_SR_ONLY="create_sr_reference_fsTask_shadowSRonly";var UI_TASK_TYPE="fsTaskType";var selectFSTaskPaneConnect=null;var referencePaneGroupFocus="";var isReferencePaneUpdate=false;var globalDashBoardAdmin=false;var START_NUM_ZERO=0;var currActivitySet;var DEFECT_SOURCE_SUNBUGTRAQ="SunBugTraq";var DEFECT_SOURCE_SUNOTHER="SunOther";var DEFECT_SOURCE_BUGDB="BugDB";var DEFECT_SOURCE_ICE="ICE";var DEFECT_SOURCE_EBIZ="eBiz";var recalcFSAccordion=false;var configObj={};var acctClassification={};var refreshSRInProgress=false;var connectHandle3=null;var connectHandle4=null;var fsNoteTypeParentSupportLOVName;var SEV_1="1-Critical";var UNSET_24x7_REASON_CODE_CUST_DOWNGRADE="Cust downgrade Sev via MOS";var ERROR_MSG_CUST_DOWNGRADE_SEV1="This Reason 24x7 Unset code cannot be selected if SR is still in Sev1";var SRM_OSN_IFRAME_ENABLED="SRM_OSN_IFRAME_ENABLED";var SRM_OSN_IFRAME_URL="SRM_OSN_IFRAME_URL";var SRM_PACKAGE_FILE_DELETE_ENABLED="SRM_PACKAGE_FILE_DELETE_ENABLED";var ACCOUNT_GCM_LINK_TD="accountGcmLinkTD";var ACCOUNT_GCM_IMG_ID="accountGcmImgId";var ACCOUNT_GCM_IMG_TITLE="View Account/Global Party Details";var ACCOUNT_GCM_IMG_SRC="../images/shortcuttodocumen_enabled.gif";var platinumConfigLevelIdentifier=null;var SRM_SRVIEW_URL_FID="SRM_SRVIEW_URL";var NEW_SR_CLOSURE_PROCESS_ON="NEW_SR_CLOSURE_PROCESS_ON";var SIMILAR_SR_MAX_DISPLAY_NUMBER=10;var SIMILAR_SR_KM_APP_URL="SIMILAR_SR_KM_APP_URL";var similarSR_supportedProductsArray=new Array();var similarSR_supportedLangArray=new Array();var IS_MY_DEFAULT_VIEWER_SRM_MOSSP_SRVIEWER="IS_MY_DEFAULT_VIEWER_SRM_MOSSP_SRVIEWER";var SRM_MOSSP_SRVIEWER_KEYTEXT_SRLIST="SRM_MOSSP_SRVIEWER_KEYTEXT_SRLIST";var MICROS_PUNCHOUT_BTN_ID="microsPunchoutButtonId";var SRM_MICROS_BUTTON_LABEL="SRM_MICROS_BUTTON_LABEL";var SRM_MICROS_BUTTON_TOOLTIP="SRM_MICROS_BUTTON_TOOLTIP";dojo.declare("custom.MaxHeaderDialog",dijit.Dialog,{hide:function(){if(dijit.byId("maxHeaderDOp")){var b=dijit.byId("maxHeaderDOp").getValue();var a=0;if(b==""){a=SRUtils.showHeaderModifiedAlert()}else{a=0}}else{a=0}if(a==0){this.inherited(arguments);SRUtils.unmarkChanges("srHeader");hideMaximizedSRHeader()}}});var displayItemsUtils={};displayItemsUtils.getNewRow=function(){return"</tr><tr>"};displayItemsUtils.getLabelCell=function(a){return"<td valign='top' align='right' style='color: #000000; font-size: 8pt;'>"+a+": </td>"};displayItemsUtils.getValueCell=function(a){return"<td valign='top' style='color: #0000FF; font-size: 8pt'>"+a+"</td>"};displayItemsUtils.getLabelValueCells=function(a,b){return"<tr>"+displayItemsUtils.getLabelCell(a)+displayItemsUtils.getValueCell(b)+"</tr>"};displayItemsUtils.getInputCells=function(a,b){return"<td><input type='"+a+" ' id='"+b+"' /></td>"};function processSRHeaderData(g,f){var b=SRMJSTimer.startTimer("refreshSRDetail_processSRHeaderData_"+g.srNumber);destroyLingeringTTDialog();var a=dijit.byId("srHeaderC");if(a==undefined){return}extractHeaderData(g,f);extractHeaderTitle(g);SRSessionPreferences.setPreferences(g.sessionPreferences);SRMJSTimer.endTimer(b)}function extractHeaderTitle(f){if(f.title==null){return}var b=dijit.byId("srHeader");b.titleNode.innerHTML="";b.titleNode.innerHTML=getTitleStr(f);var a=getFieldVal(ACCOUNT_ID);if(acctClassification!=undefined&&acctClassification.accountId!=undefined&&acctClassification.showAcctIndicator!=undefined&&acctClassification.accountId==a){showAcctIndicator(acctClassification.showAcctIndicator,acctClassification.indicatorAcctClassification)}showHideOpenInMicrosPortalBtn()}function getTitleStr(l){if(l.title==null){return}var h;var g=getPageSytemParamValue("SRM_CRITICAL_SYSTEM_SR_IDENTIFIER");if(g==undefined||dojo.string.trim(g)==""){g=CRITICAL_SYSTEM}platinumConfigLevelIdentifier=getPageSytemParamValue("PLATINUM_SR_IDENTIFIER");var b="";var f="";if(headerDataAsJson.configLevel!=undefined&&headerDataAsJson.configLevel!=null&&platinumConfigLevelIdentifier!=null&&headerDataAsJson.configLevel==platinumConfigLevelIdentifier){b=platinumConfigLevelIdentifier+"  "}if(headerDataAsJson!=undefined&&headerDataAsJson.CSICriticalFlg=="true"){b+=g+"  "}if(b!=undefined&&dojo.string.trim(b)!=""){f="<span class='PlatinumCriticalSystemTitleText'>"+b+"</span>"}var h=f+"<span style='vertical-align:middle;'>"+l.title+"</span>";var a="";if(headerDataAsJson!=undefined&&(headerDataAsJson.configuration!="")){a="<a class='nonactiveSRLink'  title='View CSM Configuration Details' style='vertical-align:middle;font-size: 6pt;' href='#' onclick='openProjConfigHostViewer(\"config\");'><img style='vertical-align:middle;' height='16' width='16' src='../images/config.gif' alt='View CSM Configuration Details'/></a>"}else{if(headerDataAsJson!=undefined&&(headerDataAsJson.Host!="")){a="<a class='nonactiveSRLink'  title='View CSM Host Details' style='vertical-align:middle;font-size: 6pt;' href='#' onclick='openProjConfigHostViewer(\"host\");'><img style='vertical-align:middle;' height='16' width='16' src='../images/config.gif' alt='View CSM Host Details'/></a>"}}var m="<span style='vertical-align:middle;' class='AcctClassificationText'></span>";if(headerDataAsJson!=undefined&&headerDataAsJson.Escalation!=""&&headerDataAsJson.Escalation=="Escalated"){h="<span style='vertical-align:middle;' class='EscalationText'>"+h+"</span>"}return a+m+h}function extractHeaderData(l,h){if(l.items==null){return}var f={identifier:"label",label:"field",items:l.items};for(var b=0;b<l.items.length;b++){var g=l.items[b];if(g.label.indexOf(" ")==-1){headerDataAsJson[g.label]=g.value}}if(h){initMode=true;populateSRHeader();initMode=false;disableSRHeaderFields("unmaximizedSRHeaderTable")}else{var a=dijit.byId("srHeaderC");a.destroyDescendants();a.containerNode.innerHTML="";store=new dojo.data.ItemFileReadStore({data:f});store.fetch({onComplete:displayItemsEditable,onError:displayError})}}function saveSRHeader(f,l){var g=false;var a=dojo.query(".HWDivArea");dojo.forEach(a,function(o){var m=dojo.style(o,"display");if(m!="none"){g=true}});if(!g){return saveSRHeader2(f,l)}else{var h=dojo.attr(dojo.byId(HW_ADDR1_FID),"readOnly");if(h==false){var b=saveSRHeader2;return HWAddrUtil.confirmHWAddr(b,f,l)}else{return saveSRHeader2(f,l)}}}function saveSRHeader2(f,q){console.debug("Save SR Header");var p=getActiveSrId();if(p==undefined||p==""){alert("No Active SR");return}var g="unmaximizedSRHeaderTable";if(dijit.byId("MaximizedSRHeaderDialog")){g="MaximizedSRHeaderDialog";errHandlingUtil.clearErrFlds("maximizedSRHeaderTable")}else{errHandlingUtil.clearErrFlds("unmaximizedSRHeaderTable")}var b=validateFormFlds(g);if(b.opStatus==-1){displayErrors(b);setTimeout("errHandlingUtil.processErrFlds()",100);return}var o=getQueryTabName();var h=getSrModId();var m=getSrNumber();var a=SRMJSTimer.startTimer("saveSRHeader_"+m);dijit.byId("pleasewait").show();var l={};l=populateContentFromSRHeaderForm(l);var s=new Date().getTimezoneOffset();q=(q==undefined)?"":q;l.tzOffset=s;l.action="updatesr";l.srAction=q;l.skipValidation=f;l.srId=p;l.modId=h;l.queryTabName=o;l.activeSR=m;dojo.xhrPost({url:"../../../SRHeaderRequest",content:l,handleAs:"json",load:function(z,y){SRMJSTimer.endTimer(a);if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}var u=SRMJSTimer.startTimer("saveSRHeader_refreshUI_"+m);if(z.opStatus==SUCCESS_STATUS){var v=recalcFSAccordion;SRUtils.unmarkChanges("srHeader");var x=z.permAddrChgStatus;if(x!=undefined&&x!=""){alert(x)}if(z.useRewriteSRClose!=undefined){useRewriteSRClose=z.useRewriteSRClose}if(z.srData!=undefined){if(z.refreshSR!=undefined&&z.refreshSR=="true"){processSRData(z.srData,"",true,false,"?refresh=true")}else{if(dijit.byId("MaximizedSRHeaderDialog")){dijit.byId("MaximizedSRHeaderDialog").hide()}window.forceHeaderRefresh=z.forceHeaderRefresh;refreshAfterSROp(z.srData,true,false,false,false);if(z.refreshOSN!=undefined&&z.refreshOSN==true){setTimeout(function(){OSN.showOSNIframe()},100)}}}if(v){calcFSTaskAccordion()}if(q=="close"){SRUtils.unmarkChanges("srHeader");var A=z.close;var w=getPageSytemParamValue(NEW_SR_CLOSURE_PROCESS_ON);if(A!=undefined&&A.opStatus!=undefined&&A.opStatus==1){A.cancelLabel="Cancel";var B=(w)?"SRClosureProcess.invokeSRClosureWiz()":"SRClosureUtil.invokeLastSRClosureStep()";displayErrors(A,B)}else{if(w){SRClosureProcess.invokeSRClosureWiz()}else{SRClosureUtil.invokeLastSRClosureStep()}}}else{if(q=="newclose"){SRUtils.unmarkChanges("srHeader");var A=z.close;if(A!=undefined&&A.opStatus!=undefined&&A.opStatus==1){A.cancelLabel="Cancel";var B="SRClosureProcess.invokeSRClosureWiz()";displayErrors(A,B)}else{SRClosureProcess.invokeSRClosureWiz()}}}}else{if(z.removeSRFromList!=undefined&&z.removeSRFromList=="true"){displayErrors(z,forceRemoveFromActiveSRList,forceRemoveFromActiveSRList)}else{displayErrors(z,"postSaveSRHeader("+z.buildPContactAss+","+z.buildAContactAss+",'"+q+"')");errHandlingUtil.processErrFlds()}}SRMJSTimer.endTimer(u)},error:function(u,v){SRMJSTimer.endTimer(a);if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(u.opStatus!=null){displayErrors(u)}else{xhrErrHandler(u,v,(ERROR_WHILE_SAVING_HEADER+escape("<br/>")))}return u}})}function populateContentFromSRHeaderForm(R){if(R==undefined){R={}}if(dijit.byId("csi")){var af=dojo.byId("csi").value;var ag=dojo.byId("csiId").value;R.csi=af;R.csiId=ag;if(dijit.byId("odFlag")){R.odFlag=dojo.byId("odFlag").checked}}if(dijit.byId("rootCause")){var au=dojo.byId("rootCause").value;R.rootCause=encodeURIComponent(au)}if(dijit.byId("knownIssue")){var aj=dojo.byId("knownIssue").value;R.knownIssue=encodeURIComponent(aj)}if(dijit.byId("platformSpecificFlag")){var s=dojo.byId("platformSpecificFlag").checked;R.platformSpecificFlag=s}if(dijit.byId("solnImplDate")){var aB=dojo.byId("solnImplDate").value;R.solnImplDate=aB}if(dijit.byId("milestone")){var A=dojo.byId("milestoneId").value;R.milestoneId=encodeURIComponent(A)}if(dijit.byId("reasonCode")){var u=dojo.byId("reasonCode").value;R.reasonCode=encodeURIComponent(u)}if(dijit.byId("hostId")){var aM=dojo.byId("hostId").value;R.hostId=aM}if(dijit.byId("configuration")){var aA=dojo.byId("configuration").value;R.configuration=aA}if(dijit.byId("project")){var D=dojo.byId("project").value;R.project=D}if(dijit.byId("databasePlatformDesc")){var aR=dojo.byId("databasePlatform").value;R.databasePlatform=encodeURIComponent(aR)}if(dijit.byId("databasePlatformVersionDesc")){var am=dojo.byId("databasePlatformVersionDesc").value;R.databasePlatformVersionDesc=encodeURIComponent(am)}if(dijit.byId("custErrorMessage")){var l=dojo.byId("custErrorMessage").value;R.custErrorMessage=encodeURIComponent(l)}if(dijit.byId("description")){var aI=dijit.byId("description").getValue();var z=dijit.byId("description");if(z.declaredClass=="dijit.form.Textarea"){aI=simpleHtmlEntityDecode(aI)}R.description=encodeURIComponent(aI)}if(dijit.byId("empEmail")){var aQ=dojo.byId("empEmail").value;R.empEmail=encodeURIComponent(aQ)}if(dijit.byId("groupDesc")){var V=dijit.byId("groupDesc").getValue();R.group=encodeURIComponent(V)}if(dijit.byId("srsource")){var ak=dijit.byId("srsource").getValue();R.source=encodeURIComponent(ak)}if(dijit.byId("languageDescription")){var E=dijit.byId("languageDescription").getValue();R.languageDescription=encodeURIComponent(E)}if(dijit.byId("customerRefId")){var aC=dijit.byId("customerRefId").getValue();R.customerRefId=aC}if(dojo.byId("alternateContactId")){var aF=dijit.byId("alternateContactId").getValue();R.altContactId=aF}if(dijit.byId("alternateContactLastName")){var K=dijit.byId("alternateContactLastName").getValue();R.altContactLast=encodeURIComponent(K)}if(dijit.byId("alternateContactFirstName")){var M=dijit.byId("alternateContactFirstName").getValue();R.altContactFirst=encodeURIComponent(M)}if(dijit.byId("alternateContactTimeZone")){var o=dijit.byId("alternateContactTimeZone").getValue();R.altContactTimeZone=encodeURIComponent(o)}if(dijit.byId("alternateContactPhone")){var T=dijit.byId("alternateContactPhone").getValue();R.altContactPhone=encodeURIComponent(T)}if(dijit.byId("alternateContactEmail")){var ax=dijit.byId("alternateContactEmail").getValue();R.altContactEmail=encodeURIComponent(ax)}if(dijit.byId("srType")){var aD=dijit.byId("srType").getValue();R.srType=encodeURIComponent(aD)}if(dijit.byId("subType")){var Y=dijit.byId("subType").getValue();R.subType=encodeURIComponent(Y)}if(dijit.byId("categoryDescription")){var aP=dijit.byId("categoryDescription").getValue();var al=dijit.byId("category").getValue();var v=dijit.byId("sev1Type").getValue();R.categoryDesc=encodeURIComponent(aP);R.category=al;R.sev1Type=v}if(dijit.byId("clarificationName")){var aw=dijit.byId("clarificationName").getValue();var aq=dijit.byId("clarificationId").getValue();var aJ=dijit.byId("parentTemplateSev1Type").getValue();R.clarificationName=encodeURIComponent(aw);R.clarificationId=aq;R.parentTemplateSev1Type=aJ}if(dijit.byId("subCategory")){var h=dijit.byId("subCategory").getValue();R.subCategory=encodeURIComponent(h)}if(dijit.byId("productDescription")){var B=dijit.byId("productDescription").getValue();var ai=dijit.byId("product").getValue();R.product=ai;R.productDesc=encodeURIComponent(B)}if(dijit.byId("productClass")){var aO=dijit.byId("productClass").getValue();R.productClass=encodeURIComponent(aO)}if(dijit.byId("SRProductSubscription")){var S=dijit.byId("SRProductSubscription").getValue();R.SRProductSubscription=encodeURIComponent(S)}if(dijit.byId("SRProductClass")){var aG=dijit.byId("SRProductClass").getValue();R.SRProductClass=encodeURIComponent(aG)}if(dijit.byId("componentDescription")){var ar=dijit.byId("componentDescription").getValue();var ap=dijit.byId("component").getValue();R.component=ap;R.componentDesc=encodeURIComponent(ar)}if(dijit.byId("productVersion")){var a=dijit.byId("productVersion").getValue();R.productVersion=a}if(dijit.byId("subcomponentDescription")){var F=dijit.byId("subcomponentDescription").getValue();var ay=dijit.byId("subcomponent").getValue();R.subcomponent=ay;R.subcomponentDesc=encodeURIComponent(F)}if(dijit.byId("toolsVersionVersion")){var ae=dijit.byId("toolsVersionVersion").getValue();var P=dijit.byId("toolsVersion").getValue();R.toolsVersion=P;R.toolsVersionVersion=encodeURIComponent(ae)}if(dijit.byId("platformDescription")){var C=dijit.byId("platformDescription").getValue();var f=dijit.byId("platform").getValue();if(f=="undefined"){f=""}R.platform=f;R.platformDesc=encodeURIComponent(C)}if(dijit.byId("platformVersionDescription")){var N=dijit.byId("platformVersionDescription").getValue();R.platformVersionDesc=N}if(dijit.byId("databaseDescription")){var aa=dijit.byId("databaseDescription").getValue();var y=dijit.byId("database").getValue();R.database=y;R.databaseDesc=encodeURIComponent(aa)}if(dijit.byId("databaseVersion")){var I=dijit.byId("databaseVersion").getValue();R.databaseVersion=I}if(dijit.byId("cirl")){var H=dijit.byId("cirl").getValue();var aE=dijit.byId("nonCCRCIID").getValue();var U=dijit.byId("ciType").getValue();R.cirl=H;R.nonCCRCIID=aE;R.ciType=U}if(dijit.byId("cmdbConfig")&&!isLoading("cmdbConfig")){var Q=dijit.byId("cmdbConfig").getValue();R.cmdbConfig=Q}if(dijit.byId("outageType")){var b=dijit.byId("outageType").getValue();R.outageType=b}if(dijit.byId("nextResponse")){var aS=dojo.byId("nextResponse").value;R.nextResponseDue=aS}if(dijit.byId("summary")){var aN=dojo.byId("summary").value;R.summary=encodeURIComponent(aN)}if(isVisibleForUser(CSI_ACCOUNT_EDIT_PRIV)&&dijit.byId("accountName")){var J=dojo.byId("accountName").value;var g=dojo.byId("accountId").value;R.accountId=g;R.accountName=encodeURIComponent(J)}if(dijit.byId("severity")){var aK=dojo.byId("severity").value;R.severity=encodeURIComponent(aK)}if(dijit.byId("fld24x7")){var ah=dojo.byId("fld24x7").checked;R.requestFullSupportFlg=ah}if(dijit.byId("HIAcknowledge")){var O=dojo.byId("HIAcknowledge").checked;R.HIAcknowledge=O}if(dijit.byId("SRTranslation")){if((headerDataAsJson.isEnglishTranslation==="true")&&!dijit.byId("SRTranslation").checked){R.SRTranslation=""}}if(dijit.byId("status")){var w=dojo.byId("status").value;R.status=encodeURIComponent(w)}if(dijit.byId("substatus")){var ac=dojo.byId("substatus").value;R.substatus=encodeURIComponent(ac)}if(dijit.byId("contactId")){var p=dijit.byId("contactId").getValue();R.contactId=p}if(dijit.byId("contactLastName")){var L=dijit.byId("contactLastName").getValue();R.contactLast=encodeURIComponent(L)}if(dijit.byId("contactFirstName")){var q=dijit.byId("contactFirstName").getValue();R.contactFirst=encodeURIComponent(q)}if(dijit.byId("contactTimeZone")){var Z=dijit.byId("contactTimeZone").getValue();R.contactTimeZone=encodeURIComponent(Z)}if(dijit.byId("contactPhone")){var G=dijit.byId("contactPhone").getValue();R.contactPhone=encodeURIComponent(G)}if(dijit.byId("contactEmail")){var ao=dijit.byId("contactEmail").getValue();R.contactEmail=encodeURIComponent(ao)}if(dijit.byId("contactMethod")){var X=dijit.byId("contactMethod").getValue();R.preferredContactMethod=X}var aH=new Array();aH=aH.concat(PartnerSRUtil.getFldsArr());aH=aH.concat(serialNumberUtil.getFldsArr());aH=aH.concat(HWAddrUtil.getFldsArr());aH.push(HW_FLG_FID);aH.push(HW_SW_FID);aH.push(PARTNER_FLG_FID);dojo.forEach(aH,function(aT){if(dijit.byId(aT)){R[aT]=(dojo.byId(aT).type=="checkbox")?dijit.byId(aT).checked:encodeURIComponent(getFieldVal(aT))}});if(dijit.byId("unset24x7ReasonCode")){var at=dijit.byId("unset24x7ReasonCode").getValue();R.unset24x7ReasonCode=at}if(dijit.byId("outageStatusId")){var x=dijit.byId("outageStatusId").getValue();R.outageStatusId=x}if(dijit.byId("outageStatus")){var an=dijit.byId("outageStatus").getValue();R.outageStatus=an}if(dijit.byId("OnsiteSLA")){R.OnsiteSLA=dijit.byId("OnsiteSLA").getValue()}if(dijit.byId("evaluatedSeverity")){R.evaluatedSeverity=dijit.byId("evaluatedSeverity").getValue()}if(dijit.byId("ATLastFlowStatus")){R.ATLastFlowStatus=dijit.byId("ATLastFlowStatus").getValue()}if(dijit.byId("SROutageType")){R.SROutageType=dijit.byId("SROutageType").getValue()}if(dijit.byId("SROutagePercentage")){R.SROutagePercentage=dijit.byId("SROutagePercentage").getValue()}if(dijit.byId("SROutageStartDate")){var az=dojo.byId("SROutageStartDate").value;R.SROutageStartDate=az}if(dijit.byId("SROutageEndDate")){var ad=dojo.byId("SROutageEndDate").value;R.SROutageEndDate=ad}if(dijit.byId("envName")){var m=dijit.byId("envName").getValue();R.envName=m}if(dijit.byId("envGuid")){var aL=dijit.byId("envGuid").getValue();R.envGuid=aL}if(dijit.byId("envVersion")){var av=dijit.byId("envVersion").getValue();R.envVersion=av}if(dijit.byId("envLifecycle")){var ab=dijit.byId("envLifecycle").getValue();R.envLifecycle=ab}if(dijit.byId("privateDataFlg")){var W=dijit.byId("privateDataFlg").getValue();R.privateDataFlg=W}return R}function isLoading(a){var f=a+"Loading";if(dojo.byId(f)){var b=dojo.style(dojo.byId(f),"display");if(b=="inline"||b==""){return true}}return false}function getMultiSelectedVals(a){if(dojo.byId(a)){var f=dojo.byId(a);var g=f.length;var b="";for(i=g-1;i>=0;i--){if(f.options[i].selected){b=b+f.options[i].value+","}}return b}return""}function postSaveSRHeader(f,l,m){console.debug(f);console.debug(l);var a=dijit.byId("csi").getValue();var g=dijit.byId("csiId").getValue();var h=dijit.byId("contactId").getValue();var b=dijit.byId("alternateContactId").getValue();var o=dijit.byId("accountId").getValue();if(f){buildContactCsiAss(g,h,"primary",a,o)}if(l){buildContactCsiAss(g,b,"alternate",a,o)}if(f||l){saveSRHeader(false,m)}else{saveSRHeader(true,m)}}function setHeaderJSONFromResponse(a){headerDataAsJson={};for(var b=0;b<a.items.length;b++){var f=a.items[b];if(f.label.indexOf(" ")==-1){headerDataAsJson[f.label]=f.value}}}function maximizeSRHeader(a){var b=true;if((maximizedSRHeaderTemplate==null)||!b){dojo.xhrGet({url:"maximizedHeaderTemplate.html"+getVersion(),load:function(f){maximizedSRHeaderTemplate=null;maximizedSRHeaderTemplate=f;displayMaximizedSRHeader(a);limitText("summary",100);limitText("description",2000)},error:function(f){console.error("Failed to load SR header template")}})}else{displayMaximizedSRHeader(a)}}function hideMaximizedSRHeader(){if(dijit.byId("MaximizedSRHeaderDialog")){dijit.byId("MaximizedSRHeaderDialog").setContent(null);cleanupDialog("MaximizedSRHeaderDialog");displaySRHeader()}}function displayMaximizedSRHeader(s){var b=dijit.byId("MaximizedSRHeaderDialog");if(b==null){b=new custom.MaxHeaderDialog({refocus:false,id:"MaximizedSRHeaderDialog",style:"width: 98%;max-height:99%;overflow:auto;z-index:2;"});b._size=function(){return true};b.show()}else{b.show()}var l=dijit.byId("srHeader");var a=dijit.byId("srHeaderC");a.destroyDescendants();a.setContent(null);var u=document.createElement("table");u.setAttribute("width","auto");var p=document.createElement("tbody");u.appendChild(p);var q=document.createElement("tr");p.appendChild(q);var h=getHeaderButtonCell();q.appendChild(h);var o=document.createElement("tr");p.appendChild(o);var g=document.createElement("td");g.setAttribute("width","auto");g.innerHTML=maximizedSRHeaderTemplate;o.appendChild(g);var m=document.createElement("tr");p.appendChild(m);var f=getHeaderButtonCell();m.appendChild(f);b.setContent(u);b.setTitle(l.titleNode.innerHTML);initMode=true;populateSRHeader();initMode=false;disableSRHeaderFields("maximizedSRHeaderTable");addUserTZ("maximizedSRHeaderTable");calTimePrefUtil.addUserCalTimePrefs("maximizedSRHeaderTable");processLOVChange();if(s!=undefined&&s==true){errHandlingUtil.processErrFlds()}}function disableSRHeaderFields(f){if(SRUtils.isSRClosed()){var b=dojo.query("input, textarea",f);for(var g=0;g<b.length;g++){var q=dojo.attr(b[g],"id");var p=dojo.attr(b[g],"type");if(q==null||q==""){q=dojo.attr(b[g],"name")}if(q!==null){var a=dijit.byId(q);if(a!=undefined&&a!=null){a.setAttribute("readOnly",true);if(p!="checkbox"){dojo.addClass(a.domNode,"dijitTextBoxReadOnly");dojo.addClass(a.domNode,"dijitComboBoxReadOnly")}else{if(p=="checkbox"){a.setAttribute("disabled",true)}}}}else{}}var h=dojo.query("a",f);for(var g=0;g<h.length;g++){if(dojo.hasClass(h[g],"nonactiveSRLink")){continue}h[g].style.display="none"}var o=dojo.byId("phone1TD");if(o!=undefined){o.style.display="none"}var m=dojo.byId("phone2TD");if(m!=undefined){m.style.display="none"}try{SRColorsCustomization.applyToSR(true)}catch(l){console.debug(l)}}}function displayKnowledgeSearchItems(){var a='<table border="0" cellpadding="1" cellspacing="1" id="kSearchTable"><tr>';a+=displayItemsUtils.getInputCells("text","txtSearch");a+=displayItemsUtils.getInputCells("button","btnSearch");a+="</tr></table>"}var displayError=function(a,b){alert(a);console.error("displayError",a)};var displayActivity=function(g,f){var h=g.activityHeader;var a=g.audience;var b=g.detail};function refreshActivityFilterList(f){var a=SRMJSTimer.startTimer("refreshSRDetail_displayMenuBar_loadCustomFilters_xhrRequest");var g="";if(f!=undefined&&f.selectedActivityFilter!=null){g=f.selectedActivityFilter}var h=dijit.byId("filterActivities");if(h!=undefined){h.destroyDescendants();var b="../../../SRRequest";dojo.xhrGet({url:b,content:{action:"loadActivityFilters"},preventCache:true,handleAs:"json",load:function(o,m){SRMJSTimer.endTimer(a);if(o.items!=undefined){var l=new dojo.data.ItemFileReadStore({data:{identifier:o.identifier,items:o.items}});h.store=l;if(g!=""){h.setValue(g)}}},timeout:120000,error:function(m,l){SRMJSTimer.endTimer(a);console.error(dojo.toJson(m));return m}})}}function resetActivityFilterVar(){window.filteredActivities=null}var menuHandles=new Array();function displayMenu(p,h){var a=SRMJSTimer.startTimer("refreshSRDetail_displayMenuBar_"+h.srNumber);var f=h.selectedActivitySortKey;var u=h.selectedActivitySortOrder;var s=h.hideFilteredActivities;var o=h[HIDE_EMAIL_DETAILS];var m="";if(h.selectedActivityFilter!=null){m=h.selectedActivityFilter}if(dojo.byId("srMenuBar")){disconnectSavedHandles(menuHandles)}else{var v="<div class='parentContainer'><div class='table'><div class='table-row'><div class='table-cell'><div  id='mouse_shortcuts'></div></div><div class='table-cell'><div  id='toolbar1'></div></div><div class='table-cell menubarTrainl'><div><table><tr><td><div id='train1' style='vertical-align: middle;float:left;overflow:hidden;'></div></td><td><span id='odmTrainRefreshMsg' class='errorLabel' style='display:none;vertical-align:middle;' ></span></td><td><span id='odmTrainRefreshSpan' ></span></td></tr></table></div></div><div class='table-cell'><label style='float:left;font-weight: bold;font-size: 8pt;padding-right:3px;' for='hideInstr'>Show Updates</label><input style='vertical-align: middle;margin-right:15px' title='Show/Hide Activity Updates' dojoType='dijit.form.CheckBox' value='true' checked='checked' type='checkbox' name='hideInstr' id='hideInstr' /></div>";var l="<div class='table-cell'>  <div class='table'>     <div class='table-row'>        <div class='table-cell'><img style='display:hidden;vertical-align:middle;pdding-right:1px;margin-right:5px;' alt='Open Mgr Help Requested' title='Open Mgr Help Requested' src='../images/tree_response.gif' id='img_openMgrHelp'/> </div>        <div class='table-cell'><img style='display:hidden;vertical-align:middle;pdding-right:1px;margin-right:5px;' alt='Open Sev1 Speak To Mgr Requested' title='Open Sev1 Speak To Mgr Requested' src='../images/livehelp_enabled.gif' id='img_openSev1SpeakToMgr'/> </div>     </div>  </div></div>";var b="<div class='parentContainer'><div class='table-row'>   <div class='table-cell'>"+getActivityLimitComboBox()+"</div>   <div class='table-cell'>"+getSortComboBox()+"</div>   <div class='table-cell'>"+getActivityFilteringSelect()+"</div>   <div class='table-cell'><label style='font-weight: bold;font-size: 8pt;align:left;vertical-align:middle;padding-right:3px;' for='hideEmailDetails'>Hide Email-Out</label><input style='vertical-align:middle;' title='Hide details for Email-Outbound Activitites' dojoType='dijit.form.CheckBox' checked='"+o+"' type='checkbox' name='"+HIDE_EMAIL_DETAILS+"' id='"+HIDE_EMAIL_DETAILS+"'/></div>   <div class='table-cell'><button style='vertical-align:middle;font-size: 8pt;' onClick='callPoirot' title='Interactive Poirot' dojoType='srmdojoc.layout.CustomButton'>Poirot</button></div>   <div class='table-cell'><button style='vertical-align:middle;font-size: 8pt;' onClick='saveActivityDefaultPref' title='Save Activity limit, Filter and Sort Order as Default Preferences' dojoType='srmdojoc.layout.CustomButton'>Save Pref</button></div></div>";v+=l;v+="</div>";v+=b;v+="</div>";v+="</div>";var q=getMenuBarNode();q.setContent(v);var w=refreshODMTrainNode();if(dojo.byId("odmTrainRefreshSpan")){dojo.byId("odmTrainRefreshSpan").appendChild(w)}refreshActivityFilterList(h)}if(f!=""){var g=f+"-"+u;dijit.byId("sortFs").setValue(g)}else{dijit.byId("sortFs").setValue("")}dijit.byId("filterActivities").setValue(m);dijit.byId("activityLimitBox").setValue(h.limit);dijit.byId(HIDE_EMAIL_DETAILS).setAttribute("checked",o);menuHandles=new Array();menuHandles.push(dojo.connect(dijit.byId("sortFs"),"onChange",function(){applySort(dijit.byId("sortFs"))}));menuHandles.push(dojo.connect(dijit.byId("hideAF"),"onClick","hideshowAF"));menuHandles.push(dojo.connect(dijit.byId("hideInstr"),"onClick","showHideInstructions"));menuHandles.push(dojo.connect(dijit.byId("activityLimitBox"),"onChange","changeActivityLimit"));menuHandles.push(dojo.connect(dijit.byId(HIDE_EMAIL_DETAILS),"onClick",HIDE_EMAIL_DETAIL_FOR_SESSION));menuHandles.push(dojo.connect(dijit.byId("filterActivities"),"onChange",function(){setActivityFilter(dijit.byId("filterActivities"))}));resetActivityFilterVar();SRMJSTimer.endTimer(a)}function disconnectSavedHandles(f){if(f!=undefined&&f.length>0){for(var a=0;a<f.length;a++){var b=f[a];if(b!=undefined){dojo.disconnect(b)}}}}function processToolbar(a){loadToolbarData(a)}function getActivityFilteringSelect(){var a=new StringBuffer();a.append('<span style="font-weight: bold;font-size: 8pt;align:left;vertical-align:middle;text-align:center;white-space:nowrap;padding-right:3px;" title="Filter applied on the Activities">Filter</span>');a.append('<input  dojoType="dijit.form.FilteringSelect" trim="true" promptMessage="Select Activity Filter"');a.append(' searchAttr="name"');a.append(' style="width:145px;font-weight: normal;font-size: 8pt;vertical-align:middle;white-space:nowrap;"');a.append(' id="filterActivities" name="filterActivities"/>');return a.toString()}function getSortComboBox(){var a=new StringBuffer();a.append('<span style="font-weight: bold;font-size: 8pt;align:left;vertical-align:middle;text-align:center;white-space:nowrap;padding-right:3px;" title="Sort Order applied on the Activities" >Sort</span>');a.append('<select dojoType="dijit.form.ComboBox" id="sortFs" name="sortFs"  style="margin-bottom:1px;width:121px;font-size: 8pt;font-weight: normal;vertical-align:middle;white-space:nowrap;">');a.append("<option>Created-DESC</option>");a.append("<option>Created-ASC</option>");a.append("<option>Updated-DESC</option>");a.append("<option>Updated-ASC</option>");if(isVisibleForUser(ADMINISTRATION_GLOBAL_PRIV)){a.append("<option></option>")}a.append("</select>");return a.toString()}function getActivityLimitComboBox(){var g=getPageSytemParamValue(SRM_ACTIVITY_COUNT_LOV);if(g==undefined||dojo.trim(g).length==0){g="10,20,30,40,50,60,70,80,90,100"}var b=g.split(",");var f=new StringBuffer();f.append('<span style="font-weight: bold;font-size: 8pt;align:left;vertical-align:middle;text-align:center;white-space:nowrap;padding-right:3px;" title="Intial # of Activities Displayed. Please note that increasing this value higher than the default may result in longer run time." >Activity Count</span>');f.append('<select dojoType="dijit.form.FilteringSelect" id="activityLimitBox" name="activityLimitBox"  style="margin-bottom:1px;width:50px;font-size: 8pt;font-weight: normal;vertical-align:middle;white-space:nowrap;">');for(i=0;i<b.length;i++){var a=b[i];f.append('<option value="'+a+'">'+a+"</option>")}f.append("</select>");return f.toString()}function setActivityFilter(f){var g=f.id;var b=dijit.byId(g).getValue();if(getSRData().selectedActivityFilter==b){return}var a=dijit.byId(g).getDisplayedValue();applyAFilter(b,true)}function showHideInstructions(){var b=!dijit.byId("hideInstr").checked;var a=".srActivityInstructions";if(b==true){dojo.query(a).forEach(function(f){f.style.display="none"})}else{dojo.query(a).forEach(function(f){f.style.display="block"})}}function hideshowAF(){dijit.byId("pleasewait").show();var f=false;if(dijit.byId("hideAF")!=undefined&&dijit.byId("hideAF").checked){f=true}var a=getActiveSrId();var b=getQueryTabName();var h=getSrModId();var g=getSrNumber();dojo.xhrPost({url:"../../../SRRequest",preventCache:true,content:{action:"saveHideFilteredActivitiesPref",hide:f,srId:a,queryTabName:b,modId:h,activeSR:g},handleAs:"json",load:function(m,l){dijit.byId("pleasewait").hide();if(m.activities!=undefined){resetSRActivityVars(m)}activityStore.fetch({onComplete:function(o,p){displayActivities(o,p,START_NUM_ZERO,window.activityStore)}})},error:function(o,m){dijit.byId("pleasewait").hide();var l=getDisplayMessageObj("Failed to hide SR activities.",2);displayErrors(l);console.error("Failed to hide activities..")}})}var hideEmailDetailForSession=function(){dijit.byId("pleasewait").show();var b="true";if(dijit.byId(HIDE_EMAIL_DETAILS)!=undefined&&!dijit.byId(HIDE_EMAIL_DETAILS).checked){b="false"}var a=getActiveSrId();var f=getQueryTabName();var h=getSrModId();var g=getSrNumber();dojo.xhrPost({url:"../../../SRRequest",preventCache:true,content:{action:HIDE_EMAIL_DETAIL_FOR_SESSION,hideEmailDetails:b,srId:a,queryTabName:f,modId:h,activeSR:g},handleAs:"json",load:function(m,l){dijit.byId("pleasewait").hide();if(m.activities!=undefined){var o={identifier:"activityId",label:"activityId",items:m.activities};activityStore=new dojo.data.ItemFileReadStore({data:o});activityStore.fetch({onComplete:function(p,q){displayActivities(p,q,START_NUM_ZERO,window.activityStore)}})}},error:function(o,m){dijit.byId("pleasewait").hide();var l=getDisplayMessageObj("Failed to save hide/show preference for email activities for this session.",2);displayErrors(l);console.error("Failed to hide email details..")}})};var applyAFilter=function(g,h){var b=SRMJSTimer.startTimer("applyActivityFilter_xhrRequest");var a=getActiveSrId();var f=getQueryTabName();var m=getSrModId();var l=getSrNumber();if(h){SRActivityUtil.invokeToggleLoading(true,false,"")}dojo.xhrPost({url:"../../../SRRequest",preventCache:true,content:{action:"applyActivityFilter",id:g,srId:a,queryTabName:f,modId:m,activeSR:l},handleAs:"json",load:function(p,o){SRMJSTimer.endTimer(b);dijit.byId("pleasewait").hide();if(p.activities!=undefined){resetSRActivityVars(p)}if(p.selectedActivityFilter!=undefined){getSRData().selectedActivityFilter=p.selectedActivityFilter}if(h){SRActivityUtil.invokeToggleLoading(false,false,"",p);activityStore.fetch({onComplete:function(q,s){displayActivities(q,s,START_NUM_ZERO,window.activityStore)}})}},error:function(q,p){if(h){SRActivityUtil.invokeToggleLoading(false,true,"Failed to execute selected activity filter.")}SRMJSTimer.endTimer(b);dijit.byId("pleasewait").hide();var o=getDisplayMessageObj("Failed to apply filter on SR activities.",2);displayErrors(o);console.debug("Failed to apply filter.",q)}})};var applySort=function(a){doActivitySort(a)};var doActivitySort=function(q){var a=q.id;if(dijit.byId(a)){var g="";var f="";var b=getSortKeyNOrder(a);if(b.sortKey){g=b.sortKey}if(b.sortOrder){f=b.sortOrder}var p=new Date().getTimezoneOffset();var o=getActiveSrId();var m=getQueryTabName();var h=getSrModId();var l=getSrNumber();SRActivityUtil.invokeToggleLoading(true,false,"");dojo.xhrPost({url:"../../../SRRequest",content:{action:"doActivitySort",sortKey:g,sortOrder:f,tzOffset:p,srId:o,queryTabName:m,modId:h,activeSR:l},handleAs:"json",load:function(u,s){dijit.byId("pleasewait").hide();SRActivityUtil.invokeToggleLoading(false,false,"",u);if(u.activities!=undefined){resetSRActivityVars(u);window.activityStore.fetch({onComplete:function(v,w){displayActivities(v,w,START_NUM_ZERO,window.activityStore)}})}},error:function(u,s){SRActivityUtil.invokeToggleLoading(false,true,"Failed to sort the activities.");dijit.byId("pleasewait").hide();console.error("Failed to apply filter.")}})}};function getSortKeyNOrder(b){var l=new Object();var h=dijit.byId(b).getValue();if(h!=""){var a=h.split("-");var f="";var g="";if(a.length==2){l.sortKey=a[0];l.sortOrder=a[1]}}return l}var doActivitySortInJS=function(f){var m=f.id;if(dijit.byId(m)){var a="";var b="";var h=getSortKeyNOrder(m);if(h.sortKey){a=h.sortKey}if(h.sortOrder){b=h.sortOrder}var g=getSRData().activities;activityComparatorKey=(a==="Created")?"createdAsNumber":"updatedAsNumber";activityComparatorOrder=b;g.sort(activityOrderComparator);var l={identifier:"activityId",label:"activityId",items:g};activityStore=new dojo.data.ItemFileReadStore({data:l});activityStore.fetch({onComplete:function(o,p){displayActivities(o,p,START_NUM_ZERO,window.activityStore)}});saveSortPref(a,b)}};var saveSortPref=function(f,g){var a=getActiveSrId();var b=getQueryTabName();var l=getSrModId();var h=getSrNumber();dojo.xhrPost({url:"../../../SRRequest",content:{action:"saveActivitySortPref",sortKey:f,sortOrder:g,srId:a,queryTabName:b,modId:l,activeSR:h},handleAs:"json",load:function(o,m){},error:function(o,m){console.error("Failed to store filter..")}})};var activityComparatorKey;var activityComparatorOrder;function activityOrderComparator(l,h){var g=l[activityComparatorKey];var o=h[activityComparatorKey];var m;var f;if(activityComparatorOrder==="ASC"){m=-1;f=1}else{m=1;f=-1}return((g<o)?m:((g>o)?f:0))}var changeActivityLimit=function(){dijit.byId("pleasewait").show();var a=dijit.byId("activityLimitBox").getValue();var b=getActiveSrId();var f=getQueryTabName();var h=getSrModId();var g=getSrNumber();SRActivityUtil.invokeToggleLoading(true,false,"");dojo.xhrPost({url:"../../../SRRequest",content:{action:"changeActivityLimit",limit:a,srId:b,queryTabName:f,modId:h,activeSR:g},handleAs:"json",load:function(m,l){dijit.byId("pleasewait").hide();SRActivityUtil.invokeToggleLoading(false,false,"",m);if(m.activities!=undefined){resetSRActivityVars(m)}activityStore.fetch({onComplete:function(o,p){displayActivities(o,p,START_NUM_ZERO,window.activityStore)}})},error:function(o,m){SRActivityUtil.invokeToggleLoading(false,true,"Failed to set SR Activity limit.");dijit.byId("pleasewait").hide();var l=getDisplayMessageObj("Failed to set SR activity limit.",2);displayErrors(l);console.error("Failed to set SR activity limit..")}})};var saveActivityDefaultPref=function(){var a=dijit.byId("activityLimitBox").getValue();var g="";var h="";var l=getSortKeyNOrder("sortFs");if(l.sortKey){g=l.sortKey}if(l.sortOrder){h=l.sortOrder}var f=dijit.byId("filterActivities").getValue();var b="true";if(dijit.byId(HIDE_EMAIL_DETAILS)!=undefined&&!dijit.byId(HIDE_EMAIL_DETAILS).checked){b="false"}dojo.xhrPost({url:"../../../SRRequest",content:{action:"saveActivityDefaultPref",limit:a,sortKey:g,sortOrder:h,filterId:f,hideEmailDetails:b},handleAs:"json",load:function(o,m){if(o.opStatus==-1){displayErrors(o)}},error:function(p,o){var m=getDisplayMessageObj("Failed to set default preference for activity list.",2);displayErrors(m);console.error("Failed to set default preference for activity list.")}})};function formatDetailPaneTitle(b){var a=dijit.byId("dData");a.titleNode.innerHTML=b}var displayActivities=function(C,q,h,x){var y=SRMJSTimer.startTimer("refreshSRDetail_displayActivities_"+getSrNumber());var s="";currActivitySet=h/getSRData().activityLimit;var b=getPageSytemParamValue(SRM_MAX_ACTIVITY_LIMIT);if(isNaN(currActivitySet)){currActivitySet=0}var O="";if(b!=undefined&&!isNaN(b)){O="Maximum number of activities that can be displayed on the screen is "+b}var l=getSRData().hasMoreActivities;var B=getSRData().filterCount;var M=(getSRData().showDirtyIndicator!=undefined&&getSRData().showDirtyIndicator)?true:false;var E=getStaleActivityListNode(M);var z=new Array();formatDetailPaneTitle("SR Details (Displayed/Filtered: "+getSRData().activities.length+"/"+B+")"+E);var o=getActionDataNode();var v=false;var I=document.createElement("table");dojo.attr(I,{id:"activityList"+currActivitySet,width:"100%"});dojo.style(I,{margin:"0px","padding-left":"1px"});var f=document.createElement("tbody");I.appendChild(f);for(var F=0;F<C.length;F++){var K=C[F];var D=x.getValue(K,"activityId");var N="cell"+D;if(SRActivityUtil.ifActivityCellDisplayed(D)&&h!=START_NUM_ZERO){continue}v=true;var g=document.createElement("tr");f.appendChild(g);var w=document.createElement("td");g.appendChild(w);dojo.attr(w,{id:N,width:"auto"});w.innerHTML=SRActivityUtil.getActivityCell(K,z,x)}var J='Get All Activities based on the selected filter and sort criteria. This operation can be slow for SRs with large number of Activities. Please use "Next" button to retrieve activities in batches for big SRs. '+O;if(h==START_NUM_ZERO&&l){if(dijit.byId("showAllBtn")){dijit.byId("showAllBtn").destroy()}var p=new srmdojoc.layout.CustomButton({label:"All",title:J,id:"showAllBtn",onClick:function(){SRActivityUtil.showAllActivities()}});dojo.place(p.domNode,dijit.byId("dData").expansionNode,"first")}if(l){var L=document.createElement("tr");dojo.attr(L,{width:"auto"});f.appendChild(L);var m=document.createElement("td");dojo.attr(m,{align:"right"});L.appendChild(m);var s="<button onClick='SRActivityUtil.showAllActivities();' style='width:\"10%\";vertical-align:middle;padding-right:2px;margin-right:2px;'  dojoType='srmdojoc.layout.CustomButton' title='"+J+"'>All</button>";if(getSRData()["hasActivitiesMoreThanMaxLimit"]==undefined||getSRData()["hasActivitiesMoreThanMaxLimit"]==false){var H="Get Next set of Activities based on the selected filter and sort criteria. "+O;s=s+"<button onClick='getMoreSRDetails(\"Activity\");' style='width:\"10%\";vertical-align:middle;'  dojoType='srmdojoc.layout.CustomButton' title='"+H+"'>Next</button>"}m.innerHTML=s;if(!dijit.byId("titleMoreBtn")){var p=new srmdojoc.layout.CustomButton({label:"Next",title:H,id:"titleMoreBtn",onClick:function(){getMoreSRDetails("Activity")}});dojo.place(p.domNode,dijit.byId("dData").addnNode,"first")}}else{if(dijit.byId("titleMoreBtn")){dijit.byId("titleMoreBtn").destroy()}if(dijit.byId("showAllBtn")){dijit.byId("showAllBtn").destroy()}}if(h==START_NUM_ZERO){o.destroyDescendants();o.setContent(I)}else{var a=document.createDocumentFragment();a.appendChild(I);o.containerNode.appendChild(a);dojo.parser.parse("activityList"+currActivitySet)}applyBugContextMenu();if(z.length>0){for(var F=0;F<z.length;F++){var u=z[F];if(dijit.byId(ACTIVITY_DIV_ID_PREFIX+u)){var A=dijit.byId(ACTIVITY_DIV_ID_PREFIX+u).chkId;if(A!=""&&A!=undefined&&dojo.byId(A)){dojo.byId(A).setAttribute("disabled",true)}}}}if(h!=START_NUM_ZERO&&!v){alert("There are no additional activities to display.")}try{SRColorsCustomization.applyToActivities()}catch(G){console.debug(G)}SRMJSTimer.endTimer(y)};function addAttachmentUrl(g){var a="stop";var f;for(var b=0;b<g.length;b++){if(g.charAt(b)=="k"&&g.charAt(b+1)=="e"&&g.charAt(b+2)=="y"&&g.charAt(b+3)=="="){a="start";f=""}if(g.charAt(b-2)=="~"&&g.charAt(b-1)=="~"&&g.charAt(b)=="~"){a="stop";f=f+g.charAt(b);g=g.replace(f,'<a href="'+f.substring(f.indexOf("val=")+4,f.indexOf("~~~"))+'" target="_blank">'+f.substring(f.indexOf("key=")+4,f.indexOf("val="))+"</a>")}if(a=="start"){f=f+g.charAt(b)}}return g}function applyBugContextMenu(b){if(globalBugMenu==undefined||globalBugMenu==null){window.globalBugMenu=createBugMenu(globalBugMenu)}var a=[];if(b!=undefined){a=b.contentWindow.document.images}else{a=dojo.query(".activityExternalBugIconMenu")}dojo.forEach(a,function(f){window.globalBugMenu._contextMenuWithMouse=true;dojo.connect(f,"oncontextmenu",window.globalBugMenu,function(h){var m=f.id;var g=m.split("_");if(g!=undefined&&g.length>0){m=g[g.length-1]}var l={};l.nodeId=m;l.url=f.title;window.globalBugMenu.params=l;if(b!=undefined){h=window.MenuUtil.openHook(h,b)}return window.globalBugMenu._openMyself(h)})})}var globalBugMenu;function createBugMenu(a){a=new dijit.Menu({});a=addExternalBugMenuOptions(a);a.startup();return a}function processSRActivities(a){setActivityStore(a);hideDisplayByNodeName("img_openMgrHelp",a.existsOpenMgrHelp);exists_openMgrHelp=a.existsOpenMgrHelp;var b=disableMgrHelpButton(exists_openMgrHelp);var f="NOT disabled";dijit.byId("MgrHelpIconArea").setAttribute("disabled",false);if(b!=undefined&&b==true){dijit.byId("MgrHelpIconArea").setAttribute("disabled",true);f="disabled"}console.debug("** Made MgrHelpIconArea "+f+" in processSrActivities  ");hideDisplayByNodeName("img_openSev1SpeakToMgr",a.existsOpenSev1SpeakToMgrHelp);if(activityStore!=null){activityStore.fetch({onComplete:function(g,h){displayActivities(g,h,START_NUM_ZERO,window.activityStore)},onError:displayError})}}function setActivityStore(a){activityStore=null;if(a.activities==null){getActionDataNode().setContent(null);return}var b={identifier:"activityId",label:"activityId",items:a.activities};activityStore=new dojo.data.ItemFileReadStore({data:b})}function getMoreSRDetails(a){if(a=="Activity"){SRActivityUtil.invokeToggleLoading(true,false,"")}dojo.xhrGet({url:"../../../SRRequest",preventCache:true,content:{action:"getMoreSRDetails",objName:a,queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()},handleAs:"json",load:function(g,f){if(isObjectErroneous(g)){if(a=="Activity"){SRActivityUtil.invokeToggleLoading(false,true,"",g)}displayErrors(g)}else{if(a=="Activity"){SRActivityUtil.invokeToggleLoading(false,false,"");dojo._destroyElement(dojo.byId("activityList"+currActivitySet).firstChild.lastChild);if(g.hasActivitiesMoreThanMaxLimit){var h="Maximum Activity Limit reached. First "+getPageSytemParamValue(SRM_MAX_ACTIVITY_LIMIT)+" activities have been displayed.";var b=getDisplayMessageObj(h,1);displayErrors(b)}addMoreActivities(g)}}},error:function(f,b){if(a=="Activity"){SRActivityUtil.invokeToggleLoading(false,true,"Failed to retrieve next set of activities.")}}})}function reloadSRDetails(a){if(a=="Activity"){SRActivityUtil.invokeToggleLoading(true,false,"")}dojo.xhrGet({url:"../../../SRRequest",preventCache:true,content:{action:"reloadSRDetails",objName:a,queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()},handleAs:"json",load:function(g,f){if(isObjectErroneous(g)){SRActivityUtil.invokeToggleLoading(false,false,"",g)}else{if(a=="Activity"){SRActivityUtil.invokeToggleLoading(false,false,"");dojo._destroyElement(dojo.byId("activityList"+currActivitySet).firstChild.lastChild);if(g.hasActivitiesMoreThanMaxLimit){var h="Maximum Activity Limit reached. First "+getPageSytemParamValue(SRM_MAX_ACTIVITY_LIMIT)+" activities have been displayed.";var b=getDisplayMessageObj(h,1);displayErrors(b)}addMoreActivities(g)}}},error:function(f,b){if(a=="Activity"){SRActivityUtil.invokeToggleLoading(false,true,"Failed to retrieve the activities.")}}})}function addMoreActivities(b){hideDisplayByNodeName("img_openMgrHelp",b.existsOpenMgrHelp);exists_openMgrHelp=b.existsOpenMgrHelp;var f=disableMgrHelpButton(exists_openMgrHelp);var l="NOT disabled";dijit.byId("MgrHelpIconArea").setAttribute("disabled",false);if(f!=undefined&&f==true){dijit.byId("MgrHelpIconArea").setAttribute("disabled",true);l="disabled"}console.debug("** Made MgrHelpIconArea "+l+" in addMoreActivities  ");hideDisplayByNodeName("img_openSev1SpeakToMgr",b.existsOpenSev1SpeakToMgrHelp);resetSRActivityVars(b);var h=b.activities;var g={identifier:"activityId",label:"activityId",items:h};var a=new dojo.data.ItemFileReadStore({data:g});a.fetch({onComplete:function(m,o){displayActivities(m,o,b.activityStartNum,a)},onError:displayError})}function resetSRActivityVars(a){if(a.activityStartNum==START_NUM_ZERO){getSRData().activities=a.activities}else{dojo.forEach(a.activities,function(b){if(!SRActivityUtil.ifActivityCellDisplayed(b.activityId)){getSRData().activities.push(b)}})}getSRData().activityStartNum=a.activityStartNum;getSRData().hasMoreActivities=a.hasMoreActivities;getSRData().totalActivities=a.totalActivities;setActivityStore(getSRData());getSRData().filterCount=a.filterCount;getSRData().activityLimit=a.activityLimit;getSRData().limit=a.limit;getSRData().showDirtyIndicator=(a.showDirtyIndicator!=undefined)?a.showDirtyIndicator:false;if(a.hasActivitiesMoreThanMaxLimit){getSRData().hasActivitiesMoreThanMaxLimit=a.hasActivitiesMoreThanMaxLimit}else{getSRData().hasActivitiesMoreThanMaxLimit=false}}function partialHeaderNActivityRefresh(a,b,f){if(a.items!=undefined){processSRHeaderData(a,true)}SRActivityUtil.setActivityDataFromResponse(a,f);if(b){processToolbar(b)}}function getStaleActivityListNode(b){var a=(b)?"<span title='Displayed list may be out of sync with the selected filter. Click on Refresh button to update the display.' id='dirtyInd' style='vertical-align:middle;'><img alt='Activity List has been modified. Please refresh.' src='../images/file-modified.jpg'></img></span>":"";return a}function refreshLastUsedReferencePaneArea(){if(referencePaneGroupFocus!=undefined&&dojo.string.trim(referencePaneGroupFocus)!=""){var b=dijit.byId(lAccordionPaneIDs[referencePaneGroupFocus]);var a=dijit.byId("elementsAccordion");if(a!=undefined&&b!=undefined){a.selectChild(b)}}}dojo.addOnLoad(init);function init(){var f=dijit.byId("mainTabContainer");var b=dojo.byId("mainTabContainer");console.log("maintabcontainer:"+f);console.log("dom_maintabcontainer:"+b);assignDataStoreToFsTaskType();var a="";cleanSRVars();if(queryTabName==undefined||queryTabName==""){queryTabName=DYNAMIC_QUERY}if(self.location.href.indexOf("?")!=-1){a=self.location.href.substring(self.location.href.indexOf("?"))}getTabData(a);dojo.connect(window,"onbeforeunload",function(g){return SRUtils.onbeforeunload(g)});loadServiceTeamRoleLOV();loadShiftStartEndTimeLOV();dojo.connect(dijit.byId("activityInstructionDialog"),"hide",function(){refreshParentActivity()});SREXA.initCSS()}function onTransition(f,a){if(f.href.indexOf("SRViewPart.jspx?")<0){if(a!=undefined&&a!=null){destroyViewWidgets();a.destroyDescendants();a.setContent(null);cleanHandleArr();setViewPaneContent();f.setContent(getViewPaneContent());setAdminMenu();cleanSRVars();setQueryTabName(f.title)}if(getQueryTabName()==f.title){if(dijit.byId("pleasewait")&&!dijit.byId("pleasewait").open){dijit.byId("pleasewait").show()}var b=function(){if(areEssentialElementsLoaded()){refreshSRDetail("","",true,true)}else{console.debug("Wait another 50 ms.");setTimeout(b,50)}};setTimeout(b,50)}}}function destroyViewWidgets(){if(dijit.byId("clickstreamIconArea")){dijit.byId("clickstreamIconArea").destroy()}}function areEssentialElementsLoaded(){console.debug("areEssentialElementsLoaded srHeader:",dijit.byId("srHeader"),"srHeaderC:",dijit.byId("srHeaderC"),"menuBar:",dijit.byId("menuBar"));if(dijit.byId("srHeader")!=undefined&&dijit.byId("srHeaderC")!=undefined&&dijit.byId("menuBar")!=undefined){return true}else{return false}}function onCloseTab(f){if(f.href.indexOf("SRViewPart.jspx?")<0){var b=f.title;var g={url:"../../../SRRequest",content:{action:"closeQueryTab",queryTabName:b},preventCache:true,handleAs:"json",load:function(o,m){if(o.opStatus==0&&o.queryTabName!=undefined){destroyViewWidgets();setQueryTabName(o.queryTabName);var h=o.queryTabIdx;var q=dijit.byId("mainTabContainer");var l=q.getChildren();cleanHandleArr();cleanSRVars();if(l.length&&l.length>h){var p=l[h];p.setContent(getViewPaneContent());setAdminMenu();if(h!=0){q.selectChild(p)}else{if(h==0){refreshSRDetail("","",true,true)}}}}else{if(o.opStatus!=undefined&&o.opStatus==1){displayErrors(o)}}return o},error:function(m,l){var h=getDisplayMessageObj("Failed to close query tab.",2);displayErrors(h);console.debug("Failed to close query tab.",m)},timeout:120000};var a=dojo.xhrPost(g)}}function refreshSR(a){return refreshSRDetail(a,"",true,true)}function refreshSRDetail(m,s,q,l){var f=SRMJSTimer.startTimer("refreshSRDetail_xhrRequest_"+getSrNumber());if(dijit.byId("pleasewait")&&!dijit.byId("pleasewait").open){dijit.byId("pleasewait").show()}window.refreshSRInProgress=true;var b="../../../SRRequest";var g=getQueryTabName();var a=getActiveSrId();var h=getSrNumber()||parseQueryString("srNumber");var o=new Date().getTimezoneOffset();if(m!=undefined&&m.indexOf("srNumber=")!=-1){a=""}var p=dojo.xhrGet({url:b,content:{queryTabName:g,srId:a,activeSR:h,tzOffset:o,queryStr:unescape(m)},preventCache:true,handleAs:"json",load:function(w,v){if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}SRMJSTimer.endTimer(f);if(w.viewLimitedSR!=undefined){var u=getSRViewerURL(w.viewLimitedSR);u=(u==undefined||u==null)?"SRViewStandalone.jspx?sr="+w.viewLimitedSR+"&refresh=true&perfTest=true":u;window.open(u);if(dijit.byId("srTBox")){dijit.byId("srTBox").setValue("")}}window.refreshSRInProgress=false;return w},timeout:300000,error:function(v,u){SRMJSTimer.endTimer(f);window.refreshSRInProgress=false;if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}xhrErrHandler(v,u,"Error occurred in retrieving SR Details.");console.error("Failed to retrieve SR data"+v);return v}});p.addCallback(function(w,u){if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}var v=SRMJSTimer.startTimer("processSRData_"+w.srNumber);if(w.opStatus!=undefined&&w.opStatus==1){displayErrors(w);if(w.nextValidSr!=undefined&&w.nextValidSr!=""){refreshSR("?srNumber="+w.nextValidSr);return}}else{if(w.opStatus==0){cleanSRVars();if(dijit.byId("srTBox")){dijit.byId("srTBox").setValue("")}processSRData(w,s,q,l,u)}}SRMJSTimer.endTimer(v)});return p}function createTab(a){if(dijit.byId("pleasewait")&&!dijit.byId("pleasewait").open){}dijit.byId("pleasewait").show();var b="../../../SRRequest";if(a!=undefined&&a!=""){b=b+a}dojo.xhrGet({url:b,sync:true,preventCache:true,handleAs:"json",load:function(g,f){if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(g.opStatus==0){setQueryTabName(g.queryTabName)}else{if(g.queryTabName==undefined){setQueryTabName(DYNAMIC_QUERY);setSRInDefaultTab()}if(g.closeQueryTabName!=undefined){displayErrors(g,"handleMaxTab()","handleMaxTabCancel()")}else{displayErrors(g)}}return g},timeout:200000,error:function(h,g){if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}var f=getDisplayMessageObj("Failed to create a new tab.",2);displayErrors(f);console.error("Failed to create a new tab.");return h}})}function setSRInDefaultTab(){var a=getRequestParameter("srNumber");dojo.xhrGet({url:"../../../SRRequest",content:{action:"setSRInDefaultTab",srNumber:a},preventCache:true,handleAs:"json",load:function(f,b){if(f.opStatus!=0){displayErrors(f)}return f},timeout:200000,error:function(f,b){console.error("Unable to open SR in default tab")}})}function getRequestParameter(a){var b=window.top.location.search.substring(1);var a=a+"=";if(b.length>0){begin=b.indexOf(a);if(begin!=-1){begin+=a.length;end=b.indexOf("&",begin);if(end==-1){end=b.length}return unescape(b.substring(begin,end))}}return undefined}function handleMaxTab(){var a="../../../SRRequest";dojo.xhrGet({url:a,content:{action:"handleMaxTab"},preventCache:true,handleAs:"json",load:function(f,b){if(f.opStatus==0){self.location.reload(true)}else{displayErrors(f);cleanQStr()}return f},timeout:200000,error:function(g,f){cleanQStr();if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}var b=getDisplayMessageObj("Failed to handle Max Tab error.",2);displayErrors(b);console.error("Failed to handle Max Tab error");return g}})}function handleMaxTabCancel(){cleanupQStr()}function getTabData(a){if(dijit.byId("pleasewait")&&!dijit.byId("pleasewait").open){dijit.byId("pleasewait").show()}var b="../../../SRRequest";dojo.xhrPost({url:b,content:{action:"getTabData",queryStr:a},preventCache:true,handleAs:"json",load:function(g,f){if(g==null){return g}if(g.opStatus==1){if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(g.closeQueryTabName!=undefined){displayErrors(g,"handleMaxTab()","handleMaxTabCancel()")}else{displayErrors(g)}}else{processTabData(g)}return g},timeout:200000,error:function(h,g){if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}var f=getDisplayMessageObj("Operation to retrieve information about query tabs failed or timed out.",2);displayErrors(f);console.error("Failed to retrieve Tab data");return h}})}function processTabData(g){var b=SRMJSTimer.startTimer("processQueryTabData");var m=dijit.byId("mainTabContainer");if(m==undefined||m==null){console.log("tabc is undefined or null; game over ");if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}var l="Error: An unexpected event happened. Please refresh your browser";if(dojo.isIE>0){l+="\n\nISP detected that you are using Internet Explorer. If this problem persists, consider using another browser."}alert(l);return}m.destroyDescendants();if(g.selQueryTabName!=undefined){setQueryTabName(g.selQueryTabName)}var h=g.sr;if(g.queryTabs!=undefined&&dojo.isArray(g.queryTabs)){dojo.forEach(g.queryTabs,function(q){var o="#";var p=false;if(q.queryTabSelected){p=true;setQueryTabName(q.queryTabName)}var s=new dijit.layout.ContentPane({id:TAB+q.queryTabIdx,style:"height:auto;overflow:hidden;",doLayout:false,refreshOnShow:false,title:q.queryTabName,selected:p,closable:q.queryTabClosable},dojo.doc.createElement("div"));m.addChild(s);s.startup();if(!p){s.destroyDescendants();s.setContent(null)}else{s.setContent(getViewPaneContent());setAdminMenu();m.selectChild(s)}})}m.layout();loadInitSetupData("SRTechnical");if(h!=undefined&&h!=""){var f=parseQueryString("refresh");var a=(f!=null&&f=="true")?"?refresh=true":"";refreshSRDetail(a,"",true,true)}else{if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}}initTabSettings();SRMJSTimer.endTimer(b)}function initTabSettings(){var b=dijit.byId("mainTabContainer");dojo.connect(b,"_transition",function(g,f){onTransition(g,f)});dojo.connect(b,"closeChild",function(f){onCloseTab(f)});dojo.connect(window,"onresize",resizeSRNavPage);var a=dijit.byId("srHeader");dojo.connect(a,"toggle",function(g){var f=!a.open;SRSessionPreferences.savePreference(SRSessionPreferences.SR_HEADER_MINIMIZED_PREFERENCE,f)})}function processSRData(g,f,h,b,a){if(g.userTZ!=undefined){setUserTZ(g.userTZ)}if(f=="actionData"){setSRData(g);processSRActivities(g)}else{if(f=="menuBar"){displayMenu(h,g);processToolbar(h)}else{if(f=="header"){setSRData(g);processSRHeaderData(g,false)}else{SRQueue.resetTimestamp();setSRData(g);setActiveSRVal(g,b);processSRHeaderData(g,false);displayMenu(h,g);processSRActivities(g);resetActionUpd();toggleSROperations();TransferUtils.resetContext();setTimeout(function(){SRReferences.processSRReferences(g,a)},15);setTimeout(function(){OSN.init()},100);setTimeout(function(){OSN.showOSNIframe()},100);SRSessionPreferences.apply();setTimeout(function(){processToolbar(h)},15)}}}processLOVChange()}function refreshAfterSROp(f,a,g,h,b){setSRData(f);if(a){if(dijit.byId("MaximizedSRHeaderDialog")){dijit.byId("MaximizedSRHeaderDialog").hide();processSRHeaderData(f,false)}else{if(true==window.forceHeaderRefresh){window.forceHeaderRefresh=undefined;processSRHeaderData(f,false)}else{processSRHeaderData(f,true)}}}if(g){processToolbar(g)}if(h){setActivityStore(f);processSRActivities(f)}if(b){SRReferences.processSRReferences(f,"")}if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}}function resetActionUpd(){var a=getActionUpdateNode();closePane(a.id)}function cleanup(){}function cleanupQStr(){var a=self.location.href.indexOf("?");if(a!=-1){self.location.replace(self.location.protocol+"//"+self.location.host+self.location.pathname+"#");return true}return false}function resize(b){var a=dijit.byId(b);if(b==="srHeader"){maximizeSRHeader()}}function getInitMode(){return initMode}function getSrNumber(){if(headerDataAsJson!=undefined&&headerDataAsJson.SRNumber){return headerDataAsJson.SRNumber}return""}function getActiveSrId(){if(psrId==""&&headerDataAsJson!=undefined&&headerDataAsJson.SRId){setActiveSrId(headerDataAsJson.SRId)}return psrId}function setActiveSrId(a){psrId=a}function getSrModId(){if(headerDataAsJson!=undefined&&headerDataAsJson.modId){setSrModId(headerDataAsJson.modId)}return pmodId}function setSrModId(a){pmodId=a}function getQueryTabName(){return queryTabName}function setQueryTabName(a){queryTabName=a}function getSRData(){return srData}function setSRData(a){srData=a}function getUserTZ(){return userTZ}function setUserTZ(a){userTZ=a}function cleanSRVars(){headerDataAsJson={};pmodId="";psrId="";srData={};configObj={};acctClassification={};clarificationCountObj={}}function getViewPaneContent(){if(viewPaneContent==undefined||viewPaneContent==null||viewPaneContent==""){setPaneContent()}return viewPaneContent}function setViewPaneContent(a){viewPaneContent=a}function setPaneContent(){dojo.xhrGet({url:"viewPaneContent.html"+getVersion(),sync:true,load:function(a){setViewPaneContent(a);return a},error:function(b,a){console.error("Error loading content")}})}function getActionDataNode(){return dijit.byId("actionData")}function getRefDataNode(){return dijit.byId("refData")}function getMenuBarNode(){return dijit.byId("menuBar")}function getActionUpdateNode(){return dijit.byId("actionUpdate")}function getBC1Node(){return dijit.byId("bc1")}function getCPaneNode(){return dijit.byId("cpane")}function toggleSROperations(){var a=SRMJSTimer.startTimer("refreshSRDetail_toggleSROperations_"+getSrNumber());if(SRUtils.isSRClosed()){disableConfButtonVisibility();disableSROperations();enableCloseReopenButton("reopen")}else{enableSROperations();enableConfButton();enableCloseReopenButton("close")}addTagButton();if(dijit.byId("dData")){dojo.style(dijit.byId("dData").customImgNode,{display:"","vertical-align":"middle",cursor:"pointer","float":"right"});dojo.style(dijit.byId("dData").customImg2Node,{display:"","vertical-align":"middle",cursor:"pointer","float":"right"})}if(dijit.byId("clickstreamIconArea")){dijit.byId("clickstreamIconArea").setDisabled(false)}if(headerDataAsJson.canBeAssignedToMe==="false"){dijit.byId("assigntomeIconArea").setAttribute("disabled",true)}else{dijit.byId("assigntomeIconArea").setAttribute("disabled",false)}if(headerDataAsJson.canBeTranslated==="false"){dijit.byId("translationIconArea").setAttribute("disabled",true)}else{dijit.byId("translationIconArea").setAttribute("disabled",false)}if(headerDataAsJson.canHaveCollaborationSR==="false"){dijit.byId("collaborationIconArea").setAttribute("disabled",true)}else{dijit.byId("collaborationIconArea").setAttribute("disabled",false)}if(headerDataAsJson.remoteAccessEnabled==="true"){if(dijit.byId("remoteAccessMI")!=undefined){dijit.byId("remoteAccessMI").setDisabled(false)}}else{if(dijit.byId("remoteAccessMI")!=undefined){dijit.byId("remoteAccessMI").setDisabled(true)}}toggleTransferOperation();SRMJSTimer.endTimer(a)}function toggleTransferOperation(){TransferUtils.buildSRTransferOptions("update");if(headerDataAsJson.canBeTransferred==="false"){dijit.byId("transferIconArea").setAttribute("disabled",true)}else{dijit.byId("transferIconArea").setAttribute("disabled",false)}}var lButtons=new Array("escalationIconArea","dacIconArea","kmIconArea","authwizIconArea");function disableSROperations(){if(SRUtils.isSRClosed()){for(var a=0;a<lButtons.length;a++){var b=lButtons[a];if(dijit.byId(b)){dijit.byId(b).setAttribute("disabled",true)}}}}function enableSROperations(){if(!SRUtils.isSRClosed()){for(var a=0;a<lButtons.length;a++){var b=lButtons[a];if(dijit.byId(b)){dijit.byId(b).setAttribute("disabled",false)}}}}function enableCloseReopenButton(h){var b=(h!=undefined&&h=="reopen")?"Reopen":"Close";var g=(h!=undefined&&h=="reopen")?"Reopen SR":"Start Close SR Process";var l="closeReopenBtn";if(dijit.byId(l)){dojo.style(dijit.byId(l).domNode,"display","");if(dijit.byId(l).label!=b){dijit.byId(l).destroyRecursive()}else{return}}if(dijit.byId("srHeader")){var a;var f={showLabel:true,label:b,onClick:function(){var m=dijit.byId(l).label;if(m=="Reopen"){SRClosureUtil.reopenSR()}else{saveSRHeader(false,"close")}},title:g,style:"vertical-align:middle",name:l,id:l};a=new srmdojoc.layout.CustomButton(f);a.startup();if(a!=undefined){dijit.byId("srHeader").addnNode.innerHTML="";dojo.place(a.domNode,dijit.byId("srHeader").addnNode,"first");dojo.style(dijit.byId("srHeader").addnNode,{display:"","vertical-align":"top"})}}}function disableConfButtonVisibility(){var a="confBtn";if(dijit.byId(a)){dojo.style(dijit.byId(a).domNode,"display","none")}}function enableConfButton(){var l=g();var p="confBtn";if(dijit.byId(p)){var o=dijit.byId(p).domNode;dojo.style(o,"display","");return}if(l==null||l.length==0){return}if(dijit.byId("dData")&&l.length>0){var o;if(l.length==1){var h=l[0];var b={showLabel:false,iconClass:"confIcon",onClick:h.onClick,title:"Start Conference "+h.title,style:"vertical-align:middle",name:p,id:p};o=new srmdojoc.layout.CustomButton(b);o.startup()}else{var f={showLabel:false,title:"Start Conference",iconClass:"confIcon",name:p,style:"vertical-align:middle",id:p};o=createDynamicDropDownBtn(l,f)}if(o!=undefined){dojo.place(o.domNode,dijit.byId("dData").addn2Node,"first");dojo.style(dijit.byId("dData").addn2Node,{display:"","vertical-align":"top"})}}function g(){var q=new Array();var u=getPageSytemParamValue(SRM_CONF_OPTIONS);if(u==""){return q}var s=u.split(",");dojo.forEach(s,function(y){var x=y.split("-");if(x.length==2){var B=m(x[1]);var z=a(x[1]);var w="SRM_"+x[1]+"_URL_TITLE";var v=getPageSytemParamValue(w);var C=(v!=null&&v!=undefined)?v:"";var A={showLabel:true,label:x[0],title:C,onClick:function(){createOWC(x[1],B,z)}};q.push(A)}});return q}function m(s){var q="";if(s=="OC"){q=getPageSytemParamValue(SRM_OC_URL)}else{if(s=="STRTC"){q=getPageSytemParamValue(SRM_STRTC_URL)}else{if(s=="BEEHIVE"){q=getPageSytemParamValue(SRM_BEEHIVE_URL)}}}return q}function a(s){var q="";if(s=="OC"){q=getPageSytemParamValue(SRM_OC_CUST_URL)}else{if(s=="STRTC"){q=getPageSytemParamValue(SRM_STRTC_CUST_URL)}else{if(s=="BEEHIVE"){q=getPageSytemParamValue(SRM_BEEHIVE_CUST_URL)}}}return q}}function createDynamicDropDownBtn(a,f){if(f==undefined||a==undefined){return}var b=new dijit.Menu({});f.dropDown=b;dojo.forEach(a,function(m){var l=new dijit.MenuItem(m);b.addChild(l)});var h=document.createElement("div");var g=new srmdojoc.layout.CustomDropDownButton(f,h);g.startup();return g}function createAdminMenu(m,b,a){if(b==null||b==undefined){return}var g=(a==="SR")?f():h();var o=b+"adminBtn";if(dijit.byId(o)){dijit.byId(o).destroyRecursive()}var l=new dijit.Menu({id:o,targetNodeIds:[m],leftClickToOpen:true});dojo.forEach(g,function(q){var p=new dijit.MenuItem(q);l.addChild(p)});l.startup();function f(){var p=new Array();var q={showLabel:true,label:"Manage SR Header View",title:"Manage SR Header View",onClick:function(){getDataForDialog()}};p.push(q);var q={showLabel:true,label:"Manage Color Preferences",title:"Manage SR Header Color Preferences",onClick:function(){StyleRuleManager.displayItems(StyleRuleManager.SRNavSRDialogContext)}};p.push(q);return p}function h(){var p=new Array();var q={showLabel:true,label:"Manage SR Details View",title:"Manage SR Details View",onClick:function(){SRPrefs.showSRPreferences()}};p.push(q);var q={showLabel:true,label:"Manage Color Preferences",title:"Manage SR Activity Color Preferences",onClick:function(){StyleRuleManager.displayItems(StyleRuleManager.SRNavSRACTIVITYDialogContext)}};p.push(q);return p}}function setAdminMenu(){createAdminMenu(dijit.byId("srHeader").customImg3Node,"srHeader","SR");createAdminMenu(dijit.byId("dData").resizeImgNode,"dData","Activity");SRActivityUtil.setRefreshIndicator();SRColorsCustomization.createColorToggleButton(StyleRuleManager.artifacts.SR);SRColorsCustomization.createColorToggleButton(StyleRuleManager.artifacts.SRACTIVITY);StyleRuleManager.setApplyRulesFlags(SRColorsCustomization.applyRules)}function getHeaderButtonCell(){var b=document.createElement("td");var h=new dijit.form.Button({label:"Save","class":"saveButtonX"});dojo.connect(h,"onClick",function(){if(dijit.byId("maxHeaderDOp")){dijit.byId("maxHeaderDOp").setValue("save")}saveSRHeader(false)});b.appendChild(h.domNode);var a=(SRUtils.isSRClosed())?"Reopen SR":"Close SR";var l=(SRUtils.isSRClosed())?"reopen":"close";var f=new dijit.form.Button({label:a});dojo.connect(f,"onClick",function(){if(dijit.byId("maxHeaderDOp")){dijit.byId("maxHeaderDOp").setValue("save")}if(l=="close"){saveSRHeader(false,l)}else{if(dijit.byId("MaximizedSRHeaderDialog")){dijit.byId("MaximizedSRHeaderDialog").hide()}SRClosureUtil.reopenSR()}});b.appendChild(f.domNode);var g=new dijit.form.Button({label:"Cancel","class":"cancelButtonX"});dojo.connect(g,"onClick",function(){if(window.modifiedFlds!=undefined&&window.modifiedFlds.size()>0){if(!confirm("You have made changes. They will be lost if you continue.")){return}}if(dijit.byId("maxHeaderDOp")){dijit.byId("maxHeaderDOp").setValue("cancel")}dijit.byId("MaximizedSRHeaderDialog").hide()});b.appendChild(g.domNode);return b}var pnote;function populateSRHeader(){window.clearTimeout(displaySRContactLocalTime_timeoutHandler);window.clearTimeout(displayHintSRContactWorkingHours_timeoutHandler);var s=dijit.byId("MaximizedSRHeaderDialog");var h=false;var m="pheaderUpdate";if(s!=null){h=true;m="update"}function f(a,x){if(dijit.byId(a)){dijit.byId(a).setValue(x)}else{if(dojo.byId(a)){dojo.byId(a).value=x}}}setActiveSrId(headerDataAsJson.SRId);setSrModId(headerDataAsJson.modId);var b="";f("csi",headerDataAsJson.csi);f("csiId",headerDataAsJson.csiId);f("csiName",headerDataAsJson.CSIName);f("srType",headerDataAsJson.SRType);f("srClass",headerDataAsJson.srClass);srLOVUtil.onchange_srClass(UPDATE_OP,h);if(dijit.byId("partnerFlag")){if(headerDataAsJson.partnerFlag!=undefined&&headerDataAsJson.partnerFlag=="true"){dijit.byId("partnerFlag").setAttribute("checked",true)}else{dijit.byId("partnerFlag").setAttribute("checked",false)}}if(dijit.byId("odFlag")){if(headerDataAsJson.odFlag!=undefined&&headerDataAsJson.odFlag=="true"){dijit.byId("odFlag").setAttribute("checked",true)}else{dijit.byId("odFlag").setAttribute("checked",false)}}f("summary",headerDataAsJson.Summary);f("customerRefId",headerDataAsJson.customerRefId);f("svcLvl",headerDataAsJson.svcLvl);if(dijit.byId("svcLvlFlag")){if(headerDataAsJson.svcLvlFlag!=undefined&&headerDataAsJson.svcLvlFlag=="true"){dijit.byId("svcLvlFlag").setAttribute("checked",true)}else{dijit.byId("svcLvlFlag").setAttribute("checked",false)}}if(dijit.byId("classification")){f("classification",headerDataAsJson.topAccountClassification)}if(dojo.byId(ACCOUNT_GCM_IMG_ID)){var o=dojo.byId(ACCOUNT_GCM_LINK_TD);var w=dojo.byId(ACCOUNT_GCM_IMG_ID);o.removeChild(w)}if(dojo.byId(ACCOUNT_GCM_LINK_TD)&&headerDataAsJson.accountGcmLink!=undefined&&headerDataAsJson.accountGcmLink!=""){var v=document.createElement("img");v.setAttribute("id",ACCOUNT_GCM_IMG_ID);v.setAttribute("src",ACCOUNT_GCM_IMG_SRC);v.setAttribute("title",ACCOUNT_GCM_IMG_TITLE);v.style.cssText="cursor:pointer; width:16px; height:16px;";dojo.connect(v,"onclick",function(a){window.open(headerDataAsJson.accountGcmLink,"_blank")});dojo.byId(ACCOUNT_GCM_LINK_TD).appendChild(v)}if(dijit.byId("HIAcknowledge")){if(headerDataAsJson.HIAcknowledge!=undefined&&headerDataAsJson.HIAcknowledge=="true"){dijit.byId("HIAcknowledge").setAttribute("checked",true)}else{dijit.byId("HIAcknowledge").setAttribute("checked",false)}}checkSRSHIs();if(dijit.byId("SRTranslation")){if(headerDataAsJson.isEnglishTranslation==="true"){dijit.byId("SRTranslation").setAttribute("checked",true);if(dojo.byId("SRHEADERsSRTranslationRow")){dojo.style(dojo.byId("SRHEADERsSRTranslationRow"),"display","")}}}f("ceCriticalDate",headerDataAsJson.ceCriticalDate);f("ceAccountManager",headerDataAsJson.ceAccountManager);f("ceEngagementTeam",headerDataAsJson.ceEngagementTeam);f("ceEngagementId",headerDataAsJson.ceEngagementId);f("ceEngagementStatus",headerDataAsJson.ceEngagementStatus);f("ceTemperature",headerDataAsJson.ceTemperature);f("collaborationType",headerDataAsJson.collaborationType);f("responseDue",headerDataAsJson.InitialResponseDue);f("responseDone",headerDataAsJson.InitialResponseDone);if(dijit.byId("nextResponse")){dijit.byId("nextResponse").setValue(getParsedDateVal(headerDataAsJson.NextResponseDue))}f("dateClosed",headerDataAsJson.dateClosed);f("dateReopened",headerDataAsJson.dateReopened);if(dijit.byId("surveyNotifDate")){dijit.byId("surveyNotifDate").setValue(getParsedDateVal(headerDataAsJson.surveyNotifDate))}if(dijit.byId("solnOfferedDate")){dijit.byId("solnOfferedDate").setValue(getParsedDateVal(headerDataAsJson.solnOfferedDate))}if(dijit.byId("solnImplDate")){dijit.byId("solnImplDate").setValue(getParsedDateVal(headerDataAsJson.solnImplDate))}f("custErrorMessage",headerDataAsJson.custErrorMessage);f("adjustedPriorityScore",headerDataAsJson.adjustedPriorityScore);if(dijit.byId("adjustedPriorityScore")){if(dojo.byId("tpslink")){dojo.byId("tpslink").style.visibility="visible"}}if(dijit.byId("initSolnOfferedDate")){dijit.byId("initSolnOfferedDate").setValue(getParsedDateVal(headerDataAsJson.initSolnOfferedDate))}f("migratedSr",headerDataAsJson.migratedSr);f("updatesFromCustomer",headerDataAsJson.updatesFromCustomer);f("problemSolnOdmTags",headerDataAsJson.problemSolnOdmTags);f("consultativeOdmTags",headerDataAsJson.consultativeOdmTags);f("assignmentType",headerDataAsJson.assignmentType);f("assignmentStatus",headerDataAsJson.assignmentStatus);f("transferCounter",headerDataAsJson.TransferCounter);if(dijit.byId("odmComplianceFlag")){if(headerDataAsJson.odmComplianceFlag!=undefined&&headerDataAsJson.odmComplianceFlag=="true"){dijit.byId("odmComplianceFlag").setAttribute("checked",true)}else{dijit.byId("odmComplianceFlag").setAttribute("checked",false)}}if(dijit.byId("platformSpecificFlag")){if(headerDataAsJson.platformSpecificFlag!=undefined&&headerDataAsJson.platformSpecificFlag=="true"){dijit.byId("platformSpecificFlag").setAttribute("checked",true)}else{dijit.byId("platformSpecificFlag").setAttribute("checked",false)}}f("description",headerDataAsJson.Description);f("srNumber",headerDataAsJson.SRNumber);f("created",headerDataAsJson.created);f("submitDate",headerDataAsJson.submitDate);if(dijit.byId("severity")){dijit.byId("severity").setValue(headerDataAsJson.Severity)}f("configLevel",headerDataAsJson.configLevel);if(platinumSR.isPlatinumSr()){platinumSR.setRestoreStatusStore()}platinumSR.enableDisableRestoreStatus();if(dijit.byId("outageType")){dijit.byId("outageType").setValue(headerDataAsJson.OutageType)}f("original24x7",headerDataAsJson.FullSupport);if(headerDataAsJson.FullSupport=="true"&&dijit.byId("fld24x7")){dijit.byId("fld24x7").setAttribute("checked",true)}if(dijit.byId("status")){dijit.byId("status").setValue(headerDataAsJson.Status)}if(headerDataAsJson.Status=="Closed"){dijit.byId("BDESev1").setAttribute("disabled",true)}else{dijit.byId("BDESev1").setAttribute("disabled",false)}globalEngineerHelpFlag=(headerDataAsJson.engineerHelpFlag==="true")?true:false;if(globalEngineerHelpFlag===true&&headerDataAsJson.Severity==SEV_1&&headerDataAsJson.Status==="Open"){sr_engineerHelpFlagAndSev1=true;dijit.byId("MgrHelpIconArea").setAttribute("disabled",false);if((exists_openMgrHelp!=undefined&&exists_openMgrHelp==true)){dijit.byId("MgrHelpIconArea").setAttribute("disabled",true);console.debug("** Made MgrHelpIconArea disabled in toggleSROperations")}}else{sr_engineerHelpFlagAndSev1=false;dijit.byId("MgrHelpIconArea").setAttribute("disabled",true)}if(dijit.byId("substatus")){loadSubstatusLOV();dijit.byId("substatus").setValue(headerDataAsJson.Substatus)}window.clearTimeout(checkEngrAvailability_tid);f("empEmail",headerDataAsJson.Owner);f("empEmailId",headerDataAsJson.OwnedById);checkEngrAvailability(true);f("groupDesc",headerDataAsJson.Group);f("groupID",headerDataAsJson.GroupId);fillMultiSelectFieldById(headerDataAsJson.serviceTeam,headerDataAsJson.serviceTeamDesc,"serviceTeam","serviceTeamDesc");initServiceTeamData(srData.serviceTeamArray);fillMultiSelectFieldById(headerDataAsJson.productLanguages,headerDataAsJson.productLanguagesDesc,"productLanguages","productLanguagesDesc");f("escalationStatus",headerDataAsJson.Escalation);f("escalationOwner",headerDataAsJson.EscalationOwner);f("escalationLvl",headerDataAsJson.escalationLvl);f("srsource",headerDataAsJson.SRSource);f("languageDescription",headerDataAsJson.Language);if(dijit.byId("rootCause")){dijit.byId("rootCause").setValue(headerDataAsJson.RootCause)}if(dijit.byId("reasonCode")){dijit.byId("reasonCode").setValue(headerDataAsJson.ReasonCode)}f("accountName",headerDataAsJson.accountName);f("altAccountName",headerDataAsJson.altAccountName);f("accountIntegId",headerDataAsJson.accountIntegId);f("accountId",headerDataAsJson.accountId);f("accountNumber",headerDataAsJson.accountNumber);f("contactLastName",headerDataAsJson.LastName);f("contactId",headerDataAsJson.contactId);f("contactFirstName",headerDataAsJson.FirstName);f("contactPhone",headerDataAsJson.ContactPhone);attachOutboundCallNode(headerDataAsJson,"phone1TD","contactPhone","primary");f("contactEmail",headerDataAsJson.ContactEmail);displaySRContactLocalTime(true);f("alternateContactLastName",headerDataAsJson.AltContactLastName);f("alternateContactFirstName",headerDataAsJson.AltContactFirstName);f("alternateContactPhone",headerDataAsJson.AltContactPhone);f("alternateContactId",headerDataAsJson.alternateContactId);attachOutboundCallNode(headerDataAsJson,"phone2TD","alternateContactPhone","alternate");f("alternateContactEmail",headerDataAsJson.AltContactEmail);f("alternateContactTimeZone",headerDataAsJson.AltContactTimeZone);f("country",headerDataAsJson.Country);f("contactMethod",headerDataAsJson.SRContactMethod);f("knownIssue",headerDataAsJson.knownIssue);f("lastUpdated",headerDataAsJson.Updated);f("lastUpdatedBy",headerDataAsJson.UpdatedBy);f("pubActivityCreated",headerDataAsJson.pubActivityCreated);f("pubActivityCreatedBy",headerDataAsJson.pubActivityCreatedBy);f("createdBy",headerDataAsJson.createdBy);f("FSSR",headerDataAsJson.fieldSvcSR);f("SRIntegrationStatus",headerDataAsJson.SRIntegrationStatus);f("SRIntegrationMessage",headerDataAsJson.SRIntegrationMessage);f("SRIntegrationDateTime",headerDataAsJson.SRIntegrationDateTime);if(dijit.byId("HWFlg")){dijit.byId("HWFlg").setAttribute("checked",(headerDataAsJson.HWFlg!=undefined)?headerDataAsJson.HWFlg:false)}f(HW_SW_FID,headerDataAsJson[HW_SW_FID]);if(dijit.byId(SR_HW_FLG_FID)){dijit.byId(SR_HW_FLG_FID).setAttribute("checked",(headerDataAsJson.SRHWFlg!=undefined)?headerDataAsJson.SRHWFlg:false)}f(SERIAL_NUM_FID,headerDataAsJson[SERIAL_NUM_FID]);f(SERIAL_NUM_ID,headerDataAsJson[SERIAL_NUM_ID]);f(SERIAL_NUM_STATUS,headerDataAsJson[SERIAL_NUM_STATUS]);f(SERIAL_NUM_PROD_CLASS,headerDataAsJson[SERIAL_NUM_PROD_CLASS]);f(SN_CSI_CONTIGENCY_STATUS,headerDataAsJson[SN_CSI_CONTIGENCY_STATUS]);f(SERIAL_NUM_GCSI_ID_FID,headerDataAsJson[SERIAL_NUM_GCSI_ID_FID]);f(SERIAL_NUM_GCSI_FID,headerDataAsJson[SERIAL_NUM_GCSI_FID]);f("HWAddrId",headerDataAsJson.HWAddrId);f("HWCity",headerDataAsJson.HWCity);f("HWProvince",headerDataAsJson.HWProvince);f("HWCounty",headerDataAsJson.HWCounty);if(dijit.byId("HWCountry")&&dijit.byId("HWCountry").store!=undefined&&!isEmptyVal(headerDataAsJson.HWCountry)){dijit.byId("HWCountry").store.fetch({onComplete:function(a,x){dijit.byId("HWCountry").setValue(headerDataAsJson.HWCountry);SRValidationUtils.onChangeHWCountry(headerDataAsJson.HWCountry)}})}f("HWCountry",headerDataAsJson.HWCountry);f("HWState",headerDataAsJson.HWState);f(HW_POSTAL_CODE_FID,headerDataAsJson[HW_POSTAL_CODE_FID]);f("HWDesc",headerDataAsJson.HWDesc);f("HWHost",headerDataAsJson.HWHost);f("HWAddr1",headerDataAsJson.HWAddr1);f("HWAddr2",headerDataAsJson.HWAddr2);f("HWTZ",headerDataAsJson.HWTZ);f("HWTZId",headerDataAsJson.HWTZId);f("OnsiteSLA",headerDataAsJson.OnsiteSLA);if(dijit.byId(HW_MC_FLG_FID)){dijit.byId(HW_MC_FLG_FID).setAttribute("checked",(headerDataAsJson[HW_MC_FLG_FID]!=undefined)?headerDataAsJson[HW_MC_FLG_FID]:false)}f("refCSI",headerDataAsJson.refCSI);f("refCSIId",headerDataAsJson.refCSIId);f("indirectContAcct",headerDataAsJson[INDIRECT_ACCT_FID]);f("indirectContAcctId",headerDataAsJson[INDIRECT_ACCT_ID_FID]);f("indirectCustV",headerDataAsJson.indirectCustV);f("indirectContId",headerDataAsJson.indirectContId);f("indirectContFirst",headerDataAsJson.indirectContFirst);f("indirectContLast",headerDataAsJson.indirectContLast);f("indirectContPhone",headerDataAsJson.indirectContPhone);f("indirectContEmail",headerDataAsJson.indirectContEmail);f("indirectContTZ",headerDataAsJson.indirectContTZ);f("indirectContTZId",headerDataAsJson.indirectContTZId);if(dijit.byId(INDIRECT_HW_FLG_FID)){dijit.byId(INDIRECT_HW_FLG_FID).setAttribute("checked",(headerDataAsJson[INDIRECT_HW_FLG_FID]!=undefined)?headerDataAsJson[INDIRECT_HW_FLG_FID]:false)}f(INDIRECT_HW_SW_FID,headerDataAsJson[INDIRECT_HW_SW_FID]);f(SEV1_TYPE,headerDataAsJson[SEV1_TYPE]);f(PARENT_TEMPLATE_SEV1_TYPE,headerDataAsJson[PARENT_TEMPLATE_SEV1_TYPE]);var q=dijit.byId(PARENT_TEMPLATE_SEV1_TYPE);var g=(headerDataAsJson.partnerFlag!=undefined&&headerDataAsJson.partnerFlag=="true")?"Y":"N";console.log("Service Group Details:\n isPartner : "+g+" \n hw sw flag of csi: "+dijit.byId(HW_SW_FID).getValue()+";  hw sw flag of indirect csi: "+dijit.byId(INDIRECT_HW_SW_FID).getValue());if(dijit.byId("criticalSystemFlg")){dijit.byId("criticalSystemFlg").setAttribute("checked",(headerDataAsJson.CSICriticalFlg!=undefined&&dojo.string.trim(headerDataAsJson.CSICriticalFlg)=="true")?true:false)}f("project",headerDataAsJson.project);f("project",headerDataAsJson.project);f("projectName",headerDataAsJson.projectName);f("milestone",headerDataAsJson.milestone);f("milestoneId",headerDataAsJson.milestoneId);f("milestoneDate",headerDataAsJson.milestoneDate);f("srMilestoneName",headerDataAsJson.SRMilestoneName);f("csiMilestoneName",headerDataAsJson.CSIMilestoneName);f("srMilestoneDate",headerDataAsJson.SRMilestoneDate);f("csiMilestoneDate",headerDataAsJson.CSIMilestoneDate);f("configuration",headerDataAsJson.configuration);if(headerDataAsJson.configuration!=undefined&&headerDataAsJson.configuration!=""&&(dijit.byId("configurationName")||dijit.byId("configurationOCMConfiguration"))){var l=getConfigDetails(headerDataAsJson.configuration);if(l==true){setConfigOnChangeHandle()}}else{setConfigOnChangeHandle()}f("hostId",headerDataAsJson.Host);if(headerDataAsJson.Host!=""){getHostName()}f("databasePlatform",headerDataAsJson.DatabasePlatform);f("databasePlatformDesc",headerDataAsJson.DatabasePlatformDesc);f("databasePlatformVersionDesc",headerDataAsJson.databasePlatformVersionDesc);f("cirl",headerDataAsJson.ciRL);f("nonCCRCIID",headerDataAsJson.nonCCRCIID);f("ciType",headerDataAsJson.ciType);f("subType",headerDataAsJson.SubType);f("categoryDescription",headerDataAsJson.CategoryDescription);f("category",headerDataAsJson.Category);getClarificationCount(headerDataAsJson.Category);f("clarificationName",headerDataAsJson.clarificationName);f("clarificationId",headerDataAsJson.clarificationId);f("productLine",headerDataAsJson.ProductLine);f("productDescription",headerDataAsJson.Product);f("product",headerDataAsJson.ProductId);f("productClass",headerDataAsJson.productClass);hideShowCXTicket(headerDataAsJson.productClass);dojo.connect(dijit.byId("product"),"onChange",null,dojo.hitch(this,"manageSimilarSrSection",dijit.byId("product"),h));dojo.connect(dijit.byId("languageDescription"),"onChange",null,dojo.hitch(this,"manageSimilarSrSection",dijit.byId("languageDescription"),h));if(true===h){if(SRCloud.isCloudProductSelected()||!isTechnicalSR()){dojo.style(dojo.byId("SRProductClassReadOnlyRow"),{display:"none"});dojo.style(dojo.byId("SRProductClassRow"),{display:"none"})}else{if(isHardwareSR()){dojo.style(dojo.byId("SRProductClassReadOnlyRow"),{display:""});f("SRProductClassReadOnly",headerDataAsJson.SRProductClass);if(dojo.byId("SRProductClassRow")){dojo.byId("SRProductClassRow").parentNode.removeChild(dojo.byId("SRProductClassRow"))}if(dijit.byId("SRProductClass")){dijit.byId("SRProductClass").destroy()}}else{dojo.style(dojo.byId("SRProductClassRow"),{display:""});f("SRProductClass",headerDataAsJson.SRProductClass)}}}else{f("SRProductClass",headerDataAsJson.SRProductClass)}SREXA.highlightReadonlyProductClassLabel(headerDataAsJson.SRProductClass);f("envName",headerDataAsJson.envName);f("envGuid",headerDataAsJson.envGuid);f("envVersion",headerDataAsJson.envVersion);f("envLifecycle",headerDataAsJson.envLifecycle);if(headerDataAsJson.envGuid!=undefined&&dojo.string.trim(headerDataAsJson.envGuid)!=""){getCloudConfigEmURL()}evalEffectOnEnvFields(headerDataAsJson.productClass,undefined,undefined);SRValidationUtils.onChangeHWCountry(headerDataAsJson.HWCountry);f("cxTicketNumber",headerDataAsJson.CXTicket);f("productClassification",headerDataAsJson.productClassification);f("productVersion",headerDataAsJson.ProductVersion);f("componentDescription",headerDataAsJson.Component);f("component",headerDataAsJson.ComponentId);f("subcomponentDescription",headerDataAsJson.SubComponent);f("subcomponent",headerDataAsJson.SubComponentId);f("toolsVersionVersion",headerDataAsJson.ToolsVersion);f("toolsVersion",headerDataAsJson.ToolsVersionId);f("releaseStatus",headerDataAsJson.ReleaseStatus);f("platformDescription",headerDataAsJson.Platform);f("platform",headerDataAsJson.PlatformId);f("platformVersionDescription",headerDataAsJson.PlatformVersion);f("databaseDescription",headerDataAsJson.Database);f("database",headerDataAsJson.DatabaseId);f("databaseVersion",headerDataAsJson.DatabaseVersion);f("maximizedID",headerDataAsJson.SRId);f("subCategory",headerDataAsJson.SubCategory);f("plaType",headerDataAsJson.plaType);f("unset24x7ReasonCode",headerDataAsJson.unset24x7ReasonCode);f("outageStatus",headerDataAsJson.outageStatus);f("outageStatusId",headerDataAsJson.outageStatusId);f("ASRDistributionListEmail",headerDataAsJson.ASRDistributionListEmail);f("serialNumAssetNumber",headerDataAsJson.SNassetNumber);f("HWAddressIntegrationId",headerDataAsJson.HWAddressIntegrationId);f("evaluatedSeverity",headerDataAsJson.evaluatedSeverity);f("SROutageType",headerDataAsJson.SROutageType);f("SROutagePercentage",headerDataAsJson.SROutagePercentage);f("SROutageStartDate",getParsedDateVal(headerDataAsJson.SROutageStartDate));f("SROutageEndDate",getParsedDateVal(headerDataAsJson.SROutageEndDate));f("SROutageId",headerDataAsJson.SROutageId);f("ATLastFlowStatus",headerDataAsJson.ATLastFlowStatus);if(dijit.byId("restrictedSRFlag")){dijit.byId("restrictedSRFlag").setAttribute("checked",(headerDataAsJson.restrictedSRFlag!=undefined&&dojo.string.trim(headerDataAsJson.restrictedSRFlag)=="true")?true:false)}f("privateDataFlg",headerDataAsJson.privateDataFlg);f("SRProductSubscriptionCloudType",headerDataAsJson.SRProductSubscriptionCloudType);f("SRProductSubscriptionOperPolicy",headerDataAsJson.SRProductSubscriptionOperPolicy);loadReasonCodeLOV();setConditionalAttributes("status",headerDataAsJson.Status);setConditionalAttributes("InitialResponseDone",headerDataAsJson.InitialResponseDone);changeOwnerFldROAttribute(headerDataAsJson.Owner,headerDataAsJson.Group,headerDataAsJson.assignmentType);var u=conditionalSrTechRequiredIndicator(headerDataAsJson.SRType,m);HWSRUtil.setHWConditions();PartnerSRUtil.setIndirectContactConditions();srLOVUtil.setSerialNumberProp();if(u!=undefined){u.addBoth(function(a){SRUtils.addOnBlurForHeader(h)})}else{SRUtils.addOnBlurForHeader(h)}try{setTimeout(processTitle,0);SRColorsCustomization.applyToSR(true);setTimeout(setBrowserTitle,0)}catch(p){console.debug(p)}}function setBrowserTitle(){if(headerDataAsJson!=undefined){var a=25;var s=20;var b=(headerDataAsJson.Platform!="")?headerDataAsJson.Platform:"";var g=(headerDataAsJson.PlatformVersion!="")?headerDataAsJson.PlatformVersion:"";var h=b+((g!=undefined&&g!="")?" ("+g+")":b);var o=(headerDataAsJson.Component!="")?headerDataAsJson.Component:"";var f=(headerDataAsJson.SubComponent!="")?headerDataAsJson.SubComponent:"";var q=(headerDataAsJson.Product!="")?headerDataAsJson.Product:"";q=(q.length>s)?q.substring(0,s)+"..":q;var m=o+((f!=undefined&&f!="")?" ("+f+")":o);var l=(headerDataAsJson.Summary.length>a)?headerDataAsJson.Summary.substring(0,a)+"..":headerDataAsJson.Summary;var p="SR "+headerDataAsJson.SRNumber+"-"+l+((h!="")?"-"+h:"")+((q!="")?"-"+q:"")+((m!="")?"-"+m:"")+((headerDataAsJson.accountName!="")?"-"+headerDataAsJson.accountName:"");document.title=p}}function fillCMDBConfig(){console.debug("fillCMDBConfig");if(dijit.byId("cmdbConfig")&&headerDataAsJson!=undefined){console.debug("@@@@@@@ setting value to: "+headerDataAsJson.cmdbConfig);dijit.byId("cmdbConfig").setValue(headerDataAsJson.cmdbConfig)}}function showSHIIcon(o,m){if(dojo.byId("shiTD")){if(m!=undefined){var a=dojo.byId("shiTD");a.innerHTML="";var l=document.createTextNode("WS Error");a.appendChild(l);var h=document.createElement("img");h.setAttribute("id","shiImg");h.setAttribute("src","../images/repeating_status.gif");h.style.cssText="cursor:pointer;";h.setAttribute("title","Click on icon to refresh instructions.");if(dijit.byId("shiErrorTip")){dijit.byId("shiErrorTip").destroyRecursive()}var f="WS Error";if(m.opResult!=undefined&&dojo.isArray(m.opResult)&&m.opResult.length>0){var b=m.opResult[0].message;if(!isEmptyVal(b)){f=f+": "+b}}var g=new dijit.Tooltip({id:"shiErrorTip",label:f,connectId:["shiTD"]});a.appendChild(h);dojo.connect(h,"onclick",function(){checkSRSHIs()})}else{if(o){var a=dojo.byId("shiTD");a.innerHTML="";var h=getSHIImgNode();a.appendChild(h);dojo.connect(h,"onclick",function(){showSHI(true)})}else{var a=dojo.byId("shiTD");a.innerHTML="";a.innerHTML="No Instructions"}}}}function getSHIImgNode(a){var f=(a!=undefined&&a==true)?"shiImgCloned":"shiImg";var b=document.createElement("img");b.setAttribute("id",f);b.setAttribute("src","../images/alerticon.gif");b.style.cssText="cursor:pointer;";b.setAttribute("title","Click on icon to view instructions.");return b}function initServiceTeamData(f){console.debug("initServiceTeamData serviceTeamArray:",f);if(f!=undefined){var a=dojo.byId("serviceTeam");var g=dojo.byId("serviceTeamPrimary");if(a&&g){deleteAllOptions(a);deleteAllOptions(g)}serviceTeamSelected=new Array();var b=f.length;for(i=0;i<b;i++){if(a&&g){addOption(a,f[i].serviceTeamId,f[i].serviceTeamId);addOption(g,f[i].serviceTeamId,f[i].serviceTeamPrimary.toLowerCase())}serviceTeamSelected.push({primary:(f[i].serviceTeamPrimary.toLowerCase()==="true"),empEmail:f[i].serviceTeamEmail,empFName:f[i].serviceTeamFirstName,empLName:f[i].serviceTeamLastName,empPhone:"",empTitle:"",empId:f[i].serviceTeamId,teamRole:f[i].serviceTeamRole,empEmailFlag:f[i].serviceTeamEmailFlag.toLowerCase()==="true",serviceTeamEmail:f[i].serviceTeamEmail,serviceTeamShiftStartTime:f[i].serviceTeamShiftStartTime,serviceTeamShiftEndTime:f[i].serviceTeamShiftEndTime,serviceTeamShiftPLAGroup:f[i].serviceTeamShiftPLAGroup,serviceTeamShiftAvailability:f[i].serviceTeamShiftAvailability,serviceTeamAudience:f[i].serviceTeamAudience,serviceTeamSource:f[i].serviceTeamSource,serviceTeamLastTeamAssignDate:f[i].serviceTeamLastTeamAssignDate})}console.debug("initServiceTeamData serviceTeamSelected:",serviceTeamSelected)}}function fillMultiSelectFieldById(m,g,a,h){console.debug("fillMultiSelectFieldById idFldData:",m," descFldData:",g," idFld:",a," descFld:",h);if(m==undefined||g==undefined||a==undefined||h==undefined||!dojo.byId(a)||!dojo.byId(h)){return}var b=m.split(",");var o=g.split(",");console.debug("fillMultiSelectFieldById:",b,o);var s="";if(b!=undefined&&b!=null&&o!=null&&o.length==b.length){var f=b.length;for(i=0;i<f;i++){var q=b[i];var p=o[i];s=s+p;if(i!=f-1){s=s+","}addOption(dojo.byId(a),p,q)}}if(dojo.byId(h)){if(s!=""){dojo.byId(h).value=s}else{dojo.byId(h).value=g}}}function changeOwnerFldROAttribute(a,f,b){if(!dojo.byId("empEmail")){return}if((a==""||a==null)&&f!="Unassigned"&&b=="Pull"){dojo.byId("empEmail").setAttribute("readonly",false);dojo.style(dojo.byId("empEmailLov"),"visibility","visible")}else{dojo.byId("empEmail").setAttribute("readonly",true);dojo.style(dojo.byId("empEmailLov"),"visibility","hidden")}}function getParsedDateVal(a){if(a==""||a==undefined||a==null){return a}else{return dojo.date.locale.parse(a,{datePattern:"dd-MMM-yyyy",timePattern:"hh:mm:ss a",selector:"",locale:"en-us"})}}function attachOutboundCallNode(f,b,g,a){if(f==undefined){return}if(f[SRM_CCA_OUTBOUND_SWITCH]!=undefined&&(f[SRM_CCA_OUTBOUND_SWITCH]=="ON"||f[SRM_CCA_OUTBOUND_SWITCH]=="on")){var h=dojo.byId(b);if(h!=undefined&&(!dojo.byId(b+"Img"))){var l=document.createElement("img");l.setAttribute("id",b+"Img");l.setAttribute("width","16");l.setAttribute("height","16");l.setAttribute("src","../images/phone.gif");l.style.cssText="cursor:pointer;";l.setAttribute("title","Click on icon to make outbound call.");h.appendChild(l);dojo.connect(l,"onclick",function(){makeOutboundCall(g,a)})}}}function loadSubstatusLOV(l){var p=(l!=undefined&&l==true)?"Cloned":"";var o=dijit.byId("status"+p);var g=dijit.byId("substatus"+p);if(!o||!g){return}var a=o.getValue();setConditionalAttributes("status",a);var f=new Object();f.id="";f.name="";var h=new Array();h.push(f);var m=new Object();m.identifier="id";m.items=h;g.store=new dojo.data.ItemFileReadStore({data:m});g.setValue("");g.setDisplayedValue("");if(a==""){return}var b={url:"../../../SRHeaderRequest",content:{parentValue:a,lov:"SR_SUB_STATUS",action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(q){g.store=new dojo.data.ItemFileReadStore({data:q});return q},error:function(q){console.error("An error occurred: ",q);return q},timeout:10000};return dojo.xhrGet(b)}function onchange_updSubstatus(h){if(initMode){return}var b=(h!=undefined&&h==true)?"substatusCloned":"substatus";var f=(h!=undefined&&h==true)?"statusCloned":"status";var m=dijit.byId(b);var a=m.getValue();if(a==="Awaiting Field Auto-Close"){var l=false;var p=false;if(referencesElementsStore!=undefined&&referencesElementsStore[CHILD_TYPE_FSTASK]!=undefined){for(var g=0;g<referencesElementsStore[CHILD_TYPE_FSTASK].length;g++){var o=referencesElementsStore[CHILD_TYPE_FSTASK][g];if(!l&&o.status.trim().toLowerCase()!="closed"&&o.status.trim().toLowerCase()!="canceled"){l=true}if(!p&&o.intgStatus!=null&&o.intgStatus.trim().toLowerCase()=="failed"){p=true}}}if(referencesElementsStore==undefined||referencesElementsStore[CHILD_TYPE_FSTASK]==null||(referencesElementsStore[CHILD_TYPE_FSTASK]!=undefined&&!l)||(referencesElementsStore[CHILD_TYPE_FSTASK]!=undefined&&p)){if(referencesElementsStore[CHILD_TYPE_FSTASK]!=undefined&&p){alert('SR Sub Status can not be set to "Awaiting Field Auto-Close" if SR has a failed FS Task.\nReverting to previous value')}else{alert('SR Sub Status can not be set to "Awaiting Field Auto-Close" if there are no active FS Tasks.\nReverting to previous value')}m.setValue(SRUtils.getCurrentSR().Substatus);return}else{alert('By updating Substatus to "Awaiting Field Auto-Close", SR will be automatically closed after associated Field Service Task is closed.Therefore SR will go through validations required for closure.')}}if(a==="Close Initiated"||a==="Close Requested"){alert("This Substatus must not be chosen by the user. Reverting to the old value...");m.setValue(SRUtils.getCurrentSR().Substatus);return}}function validatePreClosure(f){var g=new SRIdentity;g.srOp="update";g.action="validateComp";g.validationName="srclosure";g.compList=dojo.toJson(f);var b={url:"../../../SRHeaderRequest",content:g,handleAs:"json",load:function(h){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}return h},error:function(h){console.debug("Validation operation on Substatus failed or timed out.",h);return h},timeout:120000};var a=dojo.xhrGet(b);a.addCallback(function(h){if(h.opStatus!=undefined&&h.opStatus==1){displayErrors(h)}})}function setConditionalAttributes(b,a){if(b=="InitialResponseDone"&&a==""){if(dijit.byId("nextResponse")){dijit.byId("nextResponse").setDisabled(true)}dojo.query(".SrResponseReqHidden").removeClass("SrResponseReqVisible");if(dojo.byId("recalcNextResponseDueDate")){dojo.style(dojo.byId("recalcNextResponseDueDate"),"display","none")}}else{if((b=="InitialResponseDone")&&(a!="")){dojo.query(".SrResponseReqHidden").addClass("SrResponseReqVisible");if(dijit.byId("nextResponse")){dijit.byId("nextResponse").setDisabled(false)}if(dojo.byId("recalcNextResponseDueDate")){dojo.style(dojo.byId("recalcNextResponseDueDate"),"display","")}}}}function getNextResponse(l){var u=dojo.string.trim(getPageSytemParamValue("SRM_NEXT_RESPONSE_DUE_TIMEOUT_MILLIS"));var o=parseInt(u);if(isNaN(o)||o<=0){o=10000}var s=(l!=undefined&&l==true)?"substatusCloned":"substatus";var h=(l!=undefined&&l==true)?"statusCloned":"status";var m=(l!=undefined&&l==true)?"nextResponseCloned":"nextResponse";var g=dijit.byId(s).getValue();var v=dijit.byId("severity").getValue();var q=(dijit.byId("fld24x7").getValue()===false?"false":"true");var f=dijit.byId("responseDone").getValue();if(g==""||v==""||f==""){return}if(!dijit.byId(m)){return}var a=getActiveSrId();var p=new Date().getTimezoneOffset();var b={url:"../../../SRHeaderRequest",content:{srId:a,severity:v,substatus:g,fullSupportFlag:q,tzOffset:p,action:"getNextResponse"},handleAs:"json",load:function(w){dijit.byId("pleasewait").hide();if(w.opStatus==0){if(w.nextResponseDate!=undefined&&w.nextResponseDate!=null&&w.nextResponseDate!=""){var x=dojo.date.locale.parse(w.nextResponseDate,{datePattern:"dd-MMM-yyyy",timePattern:"hh:mm:ss a",selector:"",locale:"en-us"});dijit.byId(m).setValue(x)}}else{displayErrors(w)}},error:function(x){dijit.byId("pleasewait").hide();var w=getDisplayMessageObj("Request to retrieve next response due date failed or timed out.",2);displayErrors(w)},timeout:o};dijit.byId("pleasewait").show();dojo.xhrPost(b)}function loadReasonCodeLOV(h,p){var q=(h!=undefined&&h==true)?"Cloned":"";var g=dijit.byId("rootCause"+q);var l=dijit.byId("reasonCode"+q);if(!g||!l){return}var o=!isEmptyVal(p)?p:g.getValue();if(!getInitMode()){var b=new Object();b.id="";b.name="";var f=new Array();f.push(b);var m=new Object();m.identifier="id";m.items=f;l.store=new dojo.data.ItemFileReadStore({data:m});l.setValue("");l.setDisplayedValue("")}if(o==""){return}var a={url:"../../../SRHeaderRequest",content:{parentValue:o,lov:"SR_RESOLUTION",action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(s){l.store=new dojo.data.ItemFileReadStore({data:s});return s},error:function(s){console.error("An error occurred: "+s);return s},timeout:2000};return dojo.xhrGet(a)}function onChangeFullSupportFlag(a){if(a.checked==true){dojo.byId("fullSupportLabel").innerHTML=FULL_SUPPORT_LABEL_Y;dijit.byId("unset24x7ReasonCode").setValue("")}else{dojo.byId("fullSupportLabel").innerHTML=FULL_SUPPORT_LABEL_N;openUnset24x7ReasonCodeDialog()}}function getLargePopupDimensions(){var b=0,a=0;if(typeof(window.innerWidth)=="number"){b=window.innerWidth;a=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){b=document.documentElement.clientWidth;a=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){b=document.body.clientWidth;a=document.body.clientHeight}}}return{width:b,height:a}}function openRefLinkFromActivity(b,a,f){if(b==null){b=window.event}if(b.stopPropagation){b.preventDefault()}openCreateReferenceLink(a,false,f);var g=SRPrefs.getSRNavRefPrefByRefType(a);if(dijit.byId("referenceLinkInputText")){dijit.byId("referenceLinkInputText").setValue(f)}if(dijit.byId("associationClassification")){dijit.byId("associationClassification").setValue(g)}if(dijit.byId("bugProductLine")){dijit.byId("bugProductLine").setValue(SRPrefs.getSRNavRefPrefByRefType("DEFECT_SOURCE"))}if(!b.stopPropagation){return false}else{return true}}function associateRelatedSrFromSimilarSr(b){var a=getPageSytemParamValue("SRM_SIMILAR_SR_RELATEDSR_CLASS");if(a!=undefined&&dojo.string.trim(a)!=""){return autoAssociateSimilarSRToRelatedSR(b,a)}else{return openCreateReferenceLink(CHILD_TYPE_SR,false,b,undefined,undefined,undefined,undefined,SIMILAR_SR)}}function openCreateReferenceLink(referenceType,pIsEdit,pReferenceLink,pReferenceLinkLabel,pClassification,pUid,prefParams,otherSectionToRefreshAfter){referencePaneGroupFocus=referenceType;var lDialogTitles={};lDialogTitles[CHILD_TYPE_SR]=" SR Reference link";lDialogTitles[CHILD_TYPE_BUG]=" Defect Reference link";lDialogTitles[CHILD_TYPE_KM]=" KM Reference link";lDialogTitles[CHILD_TYPE_SOLUTION_URL]=" URL";lDialogTitles[CHILD_TYPE_RFC]=" RFC Reference link";lDialogTitles[CHILD_TYPE_ERRMSG]=" Error Message Reference link";lDialogTitles[CHILD_TYPE_PREDEFECT]=" Predefect ";lDialogTitles[CHILD_TYPE_FSTASK]=" Field Service Task ";var defaultClassificationVal=SRPrefs.getSRNavRefPrefByRefType(referenceType);var lEditMode=(pIsEdit===true);var lDialogTitle=(lEditMode?"Modify":"Create")+lDialogTitles[referenceType];var lCloseBtnLabel="Cancel";var updateDialog=dijit.byId("addEditSRChildrenDialog");if(updateDialog!=undefined){updateDialog.destroyRecursive()}var addStyle="";if(referenceType==CHILD_TYPE_PREDEFECT){addStyle="width:90%;height:auto"}else{if(referenceType==CHILD_TYPE_FSTASK){addStyle="width:60%;height:auto"}}updateDialog=new dijit.Dialog({refocus:false,title:lDialogTitle,style:"z-index:1;"+addStyle,id:"addEditSRChildrenDialog"});dojo.connect(updateDialog,"hide",function(){if(dijit.byId("buttonValue")!=undefined&&dijit.byId("buttonValue").getValue()!=null){if(dijit.byId("buttonValue").getValue()=="Create RFC"){SRReferences.refreshReference(true,CHILD_TYPE_RFC)}}});var refParams="";switch(referenceType){case CHILD_TYPE_PREDEFECT:var urlSRQuery="srId="+encodeURIComponent(getActiveSrId())+"&modId="+encodeURIComponent(getSrModId())+"&activeSR="+encodeURIComponent(getSrNumber())+"&queryTabName="+encodeURIComponent(getQueryTabName())+"&areAllDefectSourcesMigrated="+encodeURIComponent(window.areAllDefectSourcesMigrated);var idiv=dojo.doc.createElement("DIV");var internalFrame=dojo.doc.createElement("IFRAME");if(lEditMode){internalFrame.src="../sr/SRPreDefect.jspx?"+urlSRQuery+"&predefectId="+encodeURIComponent(pReferenceLink)}else{internalFrame.src="../sr/SRPreDefect.jspx?"+urlSRQuery+"&action=create"}internalFrame.id="internalFrame";internalFrame.style.width="100%";internalFrame.style.height="480px";dojo.parser.parse(internalFrame);updateDialog._size=function(){return true};updateDialog.layout();updateDialog.containerNode.appendChild(internalFrame);updateDialog.layout();break;case CHILD_TYPE_FSTASK:openFSTaskDialogCreate(updateDialog);break;case CHILD_TYPE_RFC:if(!isVisibleForUser(RFC_UPDATE_PRIV)){break}case CHILD_TYPE_KM:case CHILD_TYPE_SOLUTION_URL:case CHILD_TYPE_BUG:case CHILD_TYPE_ERRMSG:case CHILD_TYPE_SR:var linkLabelNode=dojo.doc.createElement("SPAN");linkLabelNode.innerHTML="Link: ";updateDialog.containerNode.appendChild(linkLabelNode);var inputText=(referenceType===CHILD_TYPE_SOLUTION_URL)?new dijit.form.TextBox({label:"Reference Link",style:"width: 350px;",id:"referenceLinkInputText"}):new dijit.form.TextBox({label:"Reference Link",id:"referenceLinkInputText"});if(lEditMode){inputText.setValue(pReferenceLink)}else{if(referenceType===CHILD_TYPE_SR&&pReferenceLink!=undefined&&dojo.string.trim(pReferenceLink)!=""&&otherSectionToRefreshAfter!=undefined&&otherSectionToRefreshAfter==SIMILAR_SR){inputText.setValue(pReferenceLink)}}updateDialog.containerNode.appendChild(inputText.domNode);if(referenceType===CHILD_TYPE_ERRMSG||referenceType===CHILD_TYPE_RFC){inputText.domNode.style.display="none";var pickedChoiceLabel=new dijit.form.TextBox({id:"pickedChoiceLabel",style:"width:180px",disabled:"disabled"});pickedChoiceLabel.setValue();updateDialog.containerNode.appendChild(pickedChoiceLabel.domNode);var spacerNode=dojo.doc.createElement("span");dojo.style(spacerNode,"paddingLeft","2px");dojo.style(spacerNode,"marginLeft","2px");dojo.parser.parse(spacerNode);updateDialog.containerNode.appendChild(spacerNode);var pickBtn=null;if(referenceType===CHILD_TYPE_ERRMSG){pickBtn=new srmdojoc.layout.CustomButton({label:"Browse Error Messages"});dojo.connect(pickBtn,"onClick",function(){getErrMsg()});if(lEditMode==false){getErrMsg()}}if(referenceType===CHILD_TYPE_RFC){var inputText1=new dijit.form.TextBox({type:"hidden",id:"rfcCsi"});var inputText2=new dijit.form.TextBox({type:"hidden",id:"rfcStatus"});var inputText3=new dijit.form.TextBox({type:"hidden",id:"buttonValue"});updateDialog.containerNode.appendChild(inputText1.domNode);updateDialog.containerNode.appendChild(inputText2.domNode);updateDialog.containerNode.appendChild(inputText3.domNode);pickBtn=new srmdojoc.layout.CustomButton({label:"Browse RFCs"});dojo.connect(pickBtn,"onClick",function(){getRfcs()})}if(pickBtn!=null){updateDialog.containerNode.appendChild(pickBtn.domNode)}if(referenceType===CHILD_TYPE_RFC&&!lEditMode&&isVisibleForUser(RFC_UPDATE_PRIV)){var createBtn=null;createBtn=new srmdojoc.layout.CustomButton({label:"Create RFC"});dojo.connect(createBtn,"onClick",function(){if(dijit.byId("buttonValue")){dijit.byId("buttonValue").setValue("Create RFC")}setRFCObject()});updateDialog.containerNode.appendChild(createBtn.domNode)}if(lEditMode){pickedChoiceLabel.setValue(getShorterTextAsHint(pReferenceLinkLabel))}}var span=dojo.doc.createElement("SPAN");updateDialog.containerNode.appendChild(span);var urlDescriptionReq=false;if(referenceType===CHILD_TYPE_SOLUTION_URL){urlDescriptionReq=true;var dndNode=dojo.doc.createElement("SPAN");dndNode.id=dojo.dnd.getUniqueId();dndNode.innerHTML='<span style=\'padding-left:2px;margin-left:2px;\'><label  for=\'urlDescription\'> Description: </label></span><input class="tundra" id="urlDescription" name="urlDescription" value="" style="width: 145px;font-weight:normal;font-size:8pt;" dojoType="dijit.form.TextBox"/><span style="padding-right:2px;margin-right:2px;"/>';dojo.parser.parse(dndNode);updateDialog.containerNode.appendChild(dndNode);if(lEditMode){var urldesc="";if(prefParams!=null&&prefParams!=undefined&&prefParams!=""){urldesc=prefParams.slice(12).toString();setFieldVal("urlDescription",urldesc)}}}var isProductLineRequired=false;if(referenceType===CHILD_TYPE_BUG){isProductLineRequired=true}if(isProductLineRequired){var dndNode=dojo.doc.createElement("SPAN");dndNode.id=dojo.dnd.getUniqueId();dndNode.innerHTML='<span id="productLineStore" dojoType="dojo.data.ItemFileReadStore" jsId="productLineStore"url="../../../SRHeaderRequest?action=loadSimpleLov2&lov=DEFECT_SOURCE_ORION" ></span><span style=\'padding-left:2px;margin-left:2px;\'><label  for=\'bugProductLine\'> Defect Source: </label></span><input class="tundra" id="bugProductLine" name="productLine" value="" searchAttr="id" store="productLineStore" style="width: 145px;font-weight:normal;font-size:8pt;" dojoType="dijit.form.FilteringSelect"/><span style="padding-right:2px;margin-right:2px;"/>';dojo.parser.parse(dndNode);updateDialog.containerNode.appendChild(dndNode);dojo.connect(dijit.byId("bugProductLine"),"onChange",null,dojo.hitch(this,"showBugTraqSrvRespEngineer",updateDialog))}var isClassificationRequired=false;if(referenceType===CHILD_TYPE_BUG||referenceType===CHILD_TYPE_SR||referenceType===CHILD_TYPE_KM||referenceType===CHILD_TYPE_SOLUTION_URL||referenceType===CHILD_TYPE_ERRMSG){isClassificationRequired=true}if(isClassificationRequired){if(!lEditMode){pClassification=(defaultClassificationVal==null||defaultClassificationVal==undefined)?"":defaultClassificationVal;if((referenceType===CHILD_TYPE_BUG||referenceType===CHILD_TYPE_SOLUTION_URL)&&pClassification==""){pClassification=""}}var dndNode=dojo.doc.createElement("SPAN");var lovName="";if(referenceType===CHILD_TYPE_SR){lovName="RELATEDSR_CLASSIFICATION"}else{if(referenceType===CHILD_TYPE_BUG){lovName="DEFECT_CLASSIFICATION"}else{if(referenceType===CHILD_TYPE_KM){lovName="KM_CLASSIFICATION"}else{if(referenceType===CHILD_TYPE_SOLUTION_URL){lovName="URL_CLASSIFICATION"}else{if(referenceType===CHILD_TYPE_ERRMSG){lovName="ERROR_CATEGORIZATION"}}}}}dndNode.id=dojo.dnd.getUniqueId();dndNode.innerHTML='<span id="assocClassificationStore" dojoType="dojo.data.ItemFileReadStore" jsId="assocClassificationStore"url="../../../SRHeaderRequest?action=loadlov&amp;lov='+lovName+"&amp;rev="+enabledLOVServlets.get("SRHeaderRequest")+'" ></span><span style=\'padding-left:2px;margin-left:2px;\'><label   for=\'associationClassification\'>Classification: </label></span><input  class="tundra" id="associationClassification" name="associationClassification" value="'+pClassification+'" searchAttr="id" store="assocClassificationStore" style="width: 145px;font-weight:normal;font-size:8pt;" dojoType="dijit.form.FilteringSelect"/><span style="padding-right:2px;margin-right:2px;"/>';dojo.parser.parse(dndNode);updateDialog.containerNode.appendChild(dndNode)}var applyBtn=new srmdojoc.layout.CustomButton({label:"Apply",iconClass:"plusIcon","class":"saveButtonX"});updateDialog.containerNode.appendChild(applyBtn.domNode);var srNumber=getSrNumber();dojo.connect(applyBtn,"onClick",function(){dijit.byId("referenceLinkInputText").setValue(dojo.string.trim(dijit.byId("referenceLinkInputText").getValue()));var ServicesResponsibleEngineer="";if(referenceType===CHILD_TYPE_BUG){var sunProduct=null;var bugProductLine=dijit.byId("bugProductLine").getValue();if(bugProductLine==undefined||bugProductLine==null||bugProductLine==""){bugProductLine="none"}if(bugProductLine==DEFECT_SOURCE_SUNBUGTRAQ){sunProduct="SunBugTraq"}else{if(bugProductLine==DEFECT_SOURCE_SUNOTHER){sunProduct="SunOther"}}if(sunProduct!=null){if(!validateSunDup(sunProduct)){return false}}if(!validateDefectNumber()){return false}if(sunProduct=="SunBugTraq"){ServicesResponsibleEngineer=validateSrvRespEng();if(ServicesResponsibleEngineer==null){return false}}}dijit.byId("pleasewait").show();if(referenceType===CHILD_TYPE_RFC){refParams='{"rfcCsi":"'+inputText1.getValue()+'","rfcStatus":"'+inputText2.getValue()+'","rfcNumber":"'+pickedChoiceLabel.getValue()+'"}';var refParamObj=eval("("+refParams+")");refParams=dojo.toJson(refParamObj)}dojo.xhrPost({url:"../../../SRHeaderRequest",preventCache:true,content:{action:(lEditMode?"update_sr_reference_link":"create_sr_reference_link"),referenceType:referenceType,id:srNumber,uid:pUid,description:(urlDescriptionReq?dijit.byId("urlDescription").getValue():""),defectSource:(isProductLineRequired?dijit.byId("bugProductLine").getValue():""),referenceLink:inputText.getValue(),classification:(isClassificationRequired?dijit.byId("associationClassification").getValue():""),oldReferenceLink:(lEditMode?pReferenceLink:"false"),queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber(),refParams:refParams,svcRespEng:ServicesResponsibleEngineer},handleAs:"json",load:function(data,ioargs){dijit.byId("pleasewait").hide();if(isObjectErroneous(data)){displayErrors(data)}else{isReferencePaneUpdate=true;SRReferences.refreshReference(true,referenceType);if(referenceType===CHILD_TYPE_SR&&dijit.byId(lAccordionPaneIDs[SIMILAR_SR])!=undefined){setTimeout(function(){SRReferences.refreshReference(true,SIMILAR_SR)},500)}if(data.srData!=undefined){setHeaderJSONFromResponse(data.srData);refreshAfterSROp(data.srData,true,false,false,false)}updateDialog.hide()}},error:function(data,ioargs){dijit.byId("pleasewait").hide();console.error("Failed to create reference link")}})});break}if(referenceType!=CHILD_TYPE_PREDEFECT&&referenceType!=CHILD_TYPE_FSTASK){addControlButton(updateDialog,lCloseBtnLabel,refDialogCloseButtonFunc,null,"cancelButtonX")}updateDialog.show()}function addControlButton(a,f,l,m,b){var g={label:f};if(m!=undefined&&m!=null){g.iconClass=m}if(b!=undefined&&b!=null){g["class"]=b}var h=new srmdojoc.layout.CustomButton(g);a.containerNode.appendChild(h.domNode);if(l!=undefined&&l!=null){dojo.connect(h,"onClick",this,dojo.hitch(this,l,a))}}function setRFCObject(){var b=getActiveSrId();var f=getQueryTabName();var l=getSrModId();var h=getSrNumber();var g={url:"../../../SRRequest",content:{action:"newRFC",srId:b,queryTabName:f,modId:l,activeSR:h},preventCache:true,handleAs:"json",load:function(o,m){if(o.opStatus!=0){displayErrors(o)}else{invokeURLForRef("RFC_Create","","Create RFC")}},error:function(p,o){var m=getDisplayMessageObj("Create RFC operation failed or timed out.",2);displayErrors(m);console.debug("Create RFC operation failed or timed out.",p)},timeout:60000};var a=dojo.xhrPost(g)}function deleteSRChild(m,b){referencePaneGroupFocus=b;var g="Are you sure you want to delete?";var a="";var o="";var l=0;var f=new Array();if(b==CHILD_TYPE_ATTACHMENT){if(referencesElementsStore!=undefined&&referencesElementsStore[CHILD_TYPE_ATTACHMENT]!=undefined){var h=false;dojo.forEach(referencesElementsStore[CHILD_TYPE_ATTACHMENT],function(p){if(p.id==m&&p.attachStatus.toLowerCase()!="success"&&p.attachStatus.toLowerCase()!="tds"){h=true}if(p.attachStatus!=undefined&&p.attachStatus!=null&&p.attachStatus.toLowerCase()!="success"&&p.attachStatus.toLowerCase()!="tds"){a+=o+ ++l+") "+p.name;f.push(p.id);o="\n"}});if(a!=""&&h){g="Deleting this file will cause ALL of  the following ADR/RDA files to be deleted :\n\n"+a+"\n\n"+g}}}if(confirm(g)){console.log("start deleting child "+m);dijit.byId("pleasewait").show();dojo.xhrPost({url:"../../../SRHeaderRequest",preventCache:true,content:{action:"delete_sr_reference_link",referenceLink:m,referenceType:b,queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()},handleAs:"json",load:function(q,p){dijit.byId("pleasewait").hide();if(isObjectErroneous(q)){displayErrors(q);if(b==CHILD_TYPE_ATTACHMENT){isReferencePaneUpdate=true;SRReferences.refreshReference(true,window.referencePaneGroupFocus)}}else{isReferencePaneUpdate=true;SRReferences.refreshReference(true,window.referencePaneGroupFocus);if(q.srData!=undefined){setHeaderJSONFromResponse(q.srData);refreshAfterSROp(q.srData,true,false,false,false)}if(b==CHILD_TYPE_SR&&dijit.byId(lAccordionPaneIDs[SIMILAR_SR])!=undefined){setTimeout(function(){SRReferences.refreshReference(true,SIMILAR_SR)},500)}}},error:function(q,p){dijit.byId("pleasewait").hide();alert("Failed to delete reference link")}})}}function getShorterTextAsHint2(f,b){var a=f.substring(0,b);if(f.length>b){a+="..."}return a}function getShorterTextAsHint(b){var a=30;return getShorterTextAsHint2(b,a)}function changeSeparatorPosition(){var b=dojo.byId("kmContainer");var a=dojo.byId("srContainer");var g=dojo.byId("separatorContainer");var h=dojo.byId("mainAreaContainer");if(b.style.display==="block"){console.log("going to minimize");dojo.style(b,"display","none");var f=parseInt(dojo.style(h,"width"))-parseInt(dojo.style(g,"width"))-6+"px";dojo.style(a,"width",f)}else{console.log("going to maximize");dojo.style(b,"display","block");dojo.style(a,"width","80%")}dijit.byId("outer").resize();dijit.byId("bc1").resize()}var displayItemsEditable=function(a,b){displaySRHeader()};function checkSRLoaded(a){if(getSRData()!=null&&getSRData().srNumber!=undefined){if(getSRData().srNumber==a){return true}}return false}function displaySRHeader(){initMode=true;var a=dijit.byId("MaximizedSRHeaderDialog");if(a!=null){a.setContent(null)}displayCustomSRFlds();initMode=false}function resetSRHeader(){var a=getActiveSrId();if(a==undefined||a==""){alert("No Active SR");return}initMode=true;populateSRHeader();SRUtils.unmarkChanges("srHeader");initMode=false}function loadHeaderSubstatusLOV(){var a=dijit.byId("srHeaderSubstatus").getValue();var b={url:"../../../SRHeaderRequest",content:{parentValue:a,lov:"SR_SUB_STATUS",action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(f){dijit.byId("srHeaderSubstatus").store=new dojo.data.ItemFileReadStore({data:f})},error:function(f){console.error("An error occurred: "+f)},timeout:2000};dojo.xhrGet(b)}function makeOutboundCall(h,a){var b="";if(dijit.byId(h)!=undefined){b=dijit.byId(h).getValue()}if(b==""){alert("No phone number is found for the contact.");return}dijit.byId("pleasewait").show();var f=getActiveSrId();var g=getQueryTabName();var m=getSrModId();var l=getSrNumber();dojo.xhrPost({url:"../../../SRHeaderRequest",content:{action:"outboundCall",phone:b,contactType:a,srId:f,queryTabName:g,modId:m,activeSR:l},handleAs:"json",load:function(q,p){dijit.byId("pleasewait").hide();if(q.opStatus==SUCCESS_STATUS){var o=getActionDataNode();refreshSRDetail("","actionData",true,false);o.refresh()}else{displayErrors(q)}},error:function(q,p){var o=getDisplayMessageObj("Failed to make outbound call.",2);displayErrors(o);console.debug("Failed to make outbound call.",q)},timeout:60000})}function checkSRSHIs(){if(dojo.byId("shiTD")==undefined){return}dojo.byId("shiTD").innerHTML="";dojo.byId("shiTD").innerHTML="Loading..";var b={url:"../../../SRRequest",content:{action:"checkSHIs"},preventCache:true,handleAs:"json",load:function(g,f){if(g.opStatus==1){showSHIIcon(false,g);return g}if(g.shiExists!=undefined&&g.shiExists==true){showSHIIcon(true)}else{showSHIIcon(false)}return g},error:function(g,f){console.debug("Request to retrieve Special Customer Handling Request failed or timed out.",g)},timeout:120000};var a=dojo.xhrPost(b)}function showSHI(l){console.debug("showSHI");if(getInitMode()){return}var m=new Object();var b=dijit.byId("csiId");var f=b.getValue();if(f==""||f==undefined){if(l){alert("Please provide CSI on the form.")}return}m.csiId=f;var h="";if(dijit.byId("accountId")!=null){h=dijit.byId("accountId").getValue()}m.accountId=h;var u="";if(dijit.byId("product")!=null){u=dijit.byId("product").getValue()}m.product=u;var s=getFieldVal(REF_CSI_ID_FID);m.refCsiId=s;var a=getFieldVal(INDIRECT_ACCT_ID_FID);m.indirectAccountId=a;var o=getEvalFieldVal(SRTYPE_FID);var g=undefined;if(o.toLowerCase()=="technical"){g=isHardwareSR()?"Hardware":"Software"}else{g=HWSRUtil.isNonTechSRHardware()?"Hardware":"Software"}m.hwsw=g;if(m.hwsw=="Hardware"){m.snGCSIId=getFieldVal(SERIAL_NUM_GCSI_ID_FID);m.snGCSI=getFieldVal(SERIAL_NUM_GCSI_FID)}var q={url:"../../../SRHeaderRequest",content:{action:"loadSHILov",json:dojo.toJson(m)},preventCache:true,handleAs:"json",load:function(w,v){if(w.opStatus==0){var y=w.opResult;if(dojo.isArray(y)&&y.length>0){var x=y[0];if(!l&&dojo.byId("shiTD")){if(x.rowCount=="0"){showSHIIcon(false)}else{if(x.rowCount!=undefined){showSHIIcon(true)}}}}if(l){displaySHIdialog(w,w.operation)}return w}else{displayErrors(w)}},error:function(v,w){if(v.opStatus!=null){displayErrors(v)}else{xhrErrHandler(v,w,("Request to retrieve Special Customer Handling Instructions failed or timed out."+escape("<br/>")))}return v},timeout:120000};var p=dojo.xhrPost(q)}function acknowledgeHi(){dijit.byId("pleasewait").show();var a=getActiveSrId();var b=getQueryTabName();var g=getSrModId();var f=getSrNumber();dojo.xhrPost({url:"../../../SRHeaderRequest",content:{action:"updatesr",skipValidation:true,HIAcknowledge:"true",srId:a,queryTabName:b,modId:g,activeSR:f},handleAs:"json",load:function(m,l){dijit.byId("pleasewait").hide();if(m.opStatus==SUCCESS_STATUS){var h=dijit.byId("HIDialog");if(h!=undefined&&h.open){h.hide()}if(m.srData!=undefined){setHeaderJSONFromResponse(m.srData)}headerDataAsJson.HIAcknowledge="true";if(dijit.byId("HIAcknowledge")){dijit.byId("HIAcknowledge").setAttribute("checked",true)}}else{displayErrors(m)}},error:function(m,l){dijit.byId("pleasewait").hide();var h=getDisplayMessageObj("Acknowledgement of Special Customer Handling Request failed or timed out.",2);displayErrors(h);console.debug("Acknowledgement of Special Customer Handling Request failed or timed out.",m)}})}function getLinkHrefMap(){return vlinkHrefMap}function getSRAudit(){var b=getActiveSrId();if(b==undefined||b==""){alert("No Active SR");return}var f=getQueryTabName();var l=getSrModId();var h=getSrNumber();var g={url:"../../../SRRequest",content:{action:"loadSRAudit",srId:b,queryTabName:f,modId:l,activeSR:h},preventCache:true,handleAs:"json",load:function(p,o){if(p.opStatus==0){var m=new Object();m.Id=b;m.bcomp="SR";m.tabName=f;displayAuditdialog(p,m);return p}else{displayErrors(p)}},error:function(p,o){var m=getDisplayMessageObj("Request to retrieve SR Audit Details failed or timed out.",2);displayErrors(m);console.debug("Request to retrieve SR Audit Details failed or timed out.",p)},timeout:160000};var a=dojo.xhrPost(g)}function getOutageAudit(){var b=getActiveSrId();if(b==undefined||b==""){alert("No Active SR");return}var f=getQueryTabName();var l=getSrModId();var h=getSrNumber();var g={url:"../../../SRRequest",content:{action:"loadOutageAudit",srId:b,queryTabName:f,modId:l,activeSR:h},preventCache:true,handleAs:"json",load:function(p,o){if(p.opStatus==0){var m=new Object();m.Id=b;m.bcomp="SR";m.tabName=f;displayOutageAuditDialog(p,m);return p}else{displayErrors(p)}},error:function(p,o){var m=getDisplayMessageObj("Request to retrieve SR Audit Details failed or timed out.",2);displayErrors(m);console.debug("Request to retrieve SR Audit Details failed or timed out.",p)},timeout:160000};var a=dojo.xhrPost(g)}function requestSRActivity(a){if(a==""){return}highlight(a)}function isTeamMemberInCC(f,b){for(var a=0;a<f.length;a++){if(f[a].serviceTeamId===b){return true}}return false}function isTeamMemberInSelect(f,b){for(var a=0;a<f.length;a++){if(f[a].empId===b){return true}}return false}function getMemberAtCCArray(b,f){for(var a=0;a<b.length;a++){if(b[a].serviceTeamId==f){return b[a]}}return}function getUpdateTeam(f,b){var h=new Array();for(var a=0;a<b.length;a++){if(isTeamMemberInCC(f,b[a].empId)){var g=getMemberAtCCArray(f,b[a].empId);if(g!=undefined&&g!=""){if(g.serviceTeamRole!=b[a].teamRole||g.serviceTeamPrimary!=String(b[a].primary)||g.serviceTeamEmailFlag!=String(b[a].empEmailFlag)||g.serviceTeamAudience!=String(b[a].serviceTeamAudience)||g.serviceTeamShiftStartTime!=String(b[a].serviceTeamShiftStartTime)||g.serviceTeamShiftEndTime!=String(b[a].serviceTeamShiftEndTime)||g.serviceTeamShiftPLAGroup!=String(b[a].serviceTeamShiftPLAGroup)||g.serviceTeamShiftAvailability!=String(b[a].serviceTeamShiftAvailability)){h.push(b[a])}}}}return h}function saveServiceTeam(){if(getInitMode()){return}if(!dijit.byId("serviceTeamDesc")){console.debug("Service Team not found");return}var u=srData.serviceTeamArray;var l=new Array();var f=new Array();var m=new Array();if(u.length==serviceTeamSelected.length){l=getUpdateTeam(u,serviceTeamSelected);if(l.length==0){console.debug("Service Team not modified");return}}else{if(u.length<serviceTeamSelected.length){l=getUpdateTeam(u,serviceTeamSelected);for(var h=0;h<serviceTeamSelected.length;h++){if(!isTeamMemberInCC(u,serviceTeamSelected[h].empId)){f.push(serviceTeamSelected[h])}}}else{if(u.length>serviceTeamSelected.length){l=getUpdateTeam(u,serviceTeamSelected);for(var h=0;h<u.length;h++){if(!isTeamMemberInSelect(serviceTeamSelected,u[h].serviceTeamId)){m.push(u[h])}}}}}console.debug("Save service team");var v=dijit.byId("serviceTeamDesc").getValue();var s=getActiveSrId();var q=getQueryTabName();var o=getSrModId();var p=getSrNumber();var a=JSON.stringify(l);var b=JSON.stringify(f);var g=JSON.stringify(m);dijit.byId("pleasewait").show();dojo.xhrPost({url:"../../../SRHeaderRequest",handleAs:"json",content:{action:"saveSvcTeam",updateTeam:a,insertTeam:b,deleteTeam:g,srId:s,queryTabName:q,modId:o,activeSR:p},load:function(x,w){if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(x.opStatus==SUCCESS_STATUS){alert("SR is updated with the selected service team");console.debug("saveServiceTeam data:",x);if(x.headerDataAsJson!=undefined){if(x.headerDataAsJson.serviceTeamArray!=undefined){srData.serviceTeamArray=x.headerDataAsJson.serviceTeamArray}setHeaderJSONFromResponse(x.headerDataAsJson)}}else{displayErrors(x)}},error:function(y,x){if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}var w=getDisplayMessageObj("Request to update service team failed or timed out.",2);displayErrors(w);console.debug("Request to update service team failed or timed out.",y)}})}function saveProductLanguage(){console.debug("saveproductLanguage"+getInitMode());if(getInitMode()){return}if(!dijit.byId("productLanguagesDesc")){return}var g=dijit.byId("productLanguagesDesc").getValue();var b=getMultiSelectedVals("productLanguages");var a=getActiveSrId();var f=getQueryTabName();var l=getSrModId();var h=getSrNumber();dijit.byId("pleasewait").show();dojo.xhrPost({url:"../../../SRHeaderRequest",content:{action:"saveProductLanguage",productLanguages:b,productLanguagesDesc:g,srId:a,queryTabName:f,modId:l,activeSR:h},handleAs:"json",load:function(o,m){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(o.opStatus==SUCCESS_STATUS){alert("SR is updated with the selected product languages");if(o.headerDataAsJson!=undefined){setHeaderJSONFromResponse(o.headerDataAsJson)}}else{displayErrors(o)}},error:function(p,o){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}var m=getDisplayMessageObj("Request to update product language failed or timed out.",2);displayErrors(m);console.debug("Request to save product language failed or timed out.",p)}})}function getCSI(){if(headerDataAsJson!=undefined&&headerDataAsJson.csi!=undefined){return headerDataAsJson.csi}return""}function decoratePredefectElement(a){return'<div style="margin-bottom: 6px;"><a style="text-decoration:none;" href="../../../SRPredefect?action=create" >  '+a.name+"</a></div>"}function createDefect(b){var a={url:"../../../SRPredefect",content:{action:"createDefect",predefectId:b,srId:getActiveSrId(),activeSR:getSrNumber(),modId:getSrModId(),queryTabName:getQueryTabName()},handleAs:"json",load:function(f){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(f!=null&&f.status=="SUCCESS"){alert("Defect was created successfully.");SRReferences.refreshReference(true,CHILD_TYPE_BUG);SRReferences.refreshReference(true,CHILD_TYPE_PREDEFECT)}else{alert("Create Defect Failed:"+f.data)}},error:function(g){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(g.opStatus!=null){alert(g.opStatus)}var f=getDisplayMessageObj("Create defect operation failed or timed out.",2);displayErrors(f);console.error("Create defect operation failed or timed out.",g);return g}};if(!dijit.byId("pleasewait").open){dijit.byId("pleasewait").show()}dojo.xhrPost(a)}function getSRViewerURL(f){var b=getPageSytemParamValue(SRM_SRVIEW_URL_FID);if(getPageSytemParamValue(IS_MY_DEFAULT_VIEWER_SRM_MOSSP_SRVIEWER)=="true"&&dojo.string.trim(getPageSytemParamValue(SRM_MOSSP_SRVIEWER_KEYTEXT_SRLIST))!=""){var a=getPageSytemParamValue(SRM_MOSSP_SRVIEWER_KEYTEXT_SRLIST);if(a!=undefined&&dojo.string.trim(a)!=""){b=evaluateSRMContextTextURL(vlinkHrefMap,a,f)}}if(b!=undefined&&b!=null&&dojo.string.trim(b)!=""){b=b.replace(/%%REFID%%/gi,f)}return b}function decorateSimilarSrElement(b){var f="";var l=evaluateSRMContextTextURL(getLinkHrefMap(),"SPHome-sr",b.id);var h="_blank";var g=evaluateSRMContextTextJSString(getLinkHrefMap(),"SPHome-sr",{token:"%%REFID%%",value:b.id});f+='<div style="margin-bottom: 6px;word-wrap: break-word;">';var a=false;if(referencesElementsStore!=undefined&&referencesElementsStore[CHILD_TYPE_SR]!=undefined){dojo.forEach(referencesElementsStore[CHILD_TYPE_SR],function(m){if(m.id!=undefined&&b.id==m.id){a=true}})}if(!a){f+=' <img src="../images/add.gif" style="cursor:pointer; vertical-align:middle;" title="Associate SR '+b.id+' to current SR " onclick="associateRelatedSrFromSimilarSr(\''+b.id+"');\" />&nbsp;"}tempLink='<a title="'+b.id+'" href="'+l+'" target="'+h+'"  '+g+">"+b.id+"</a>";f+=tempLink+"&nbsp;"+b.title;f+="</div>";return f}function decorateElement(g){var p="";p+='<div style="margin-bottom: 6px;word-wrap: break-word;">';if(SRUtils.isSREditable()){if((g.childType===CHILD_TYPE_RFC&&isVisibleForUser(RFC_UPDATE_PRIV))||(g.childType===CHILD_TYPE_SR)||(g.childType===CHILD_TYPE_ERRMSG)||(g.childType===CHILD_TYPE_KM)||(g.childType===CHILD_TYPE_SOLUTION_URL)){var h=g.name.replace(/'/g,"").replace(/"/g,"");var v="";if((g.childType===CHILD_TYPE_BUG)||(g.childType===CHILD_TYPE_SR)||(g.childType===CHILD_TYPE_KM)||(g.childType===CHILD_TYPE_SOLUTION_URL)||(g.childType===CHILD_TYPE_ERRMSG)){v=g.classification}var b="";if(g.childType===CHILD_TYPE_SOLUTION_URL){b=g.refParams}var m=getPageSytemParamValue("SRM_SIMILAR_SR_RELATEDSR_CLASS");if(g.childType!=CHILD_TYPE_SR||(g.childType===CHILD_TYPE_SR&&v!=m)){p+='&nbsp;<img width="16" width="16" src="../images/update_ena.png" style="cursor:pointer;" title="Modify" onclick="openCreateReferenceLink(\''+g.childType+"', true, '"+g.id+"','"+h+"', '"+v+"', '"+g.uid+"', '"+b+"');\" />"}}if(g.childType==CHILD_TYPE_FSTASK&&(g.number==undefined||g.number=="")&&(g.intgStatus!=undefined&&g.intgStatus!=null&&g.intgStatus.toLowerCase()=="failed")){p+=' <img src="../images/warningind_even_active.gif" style="cursor:pointer;" title="Resubmit" onclick="resubmitFSTask(\''+g.id+"');\" /> &nbsp; "}if((g.childType===CHILD_TYPE_SR)||(g.childType===CHILD_TYPE_BUG)||(g.childType===CHILD_TYPE_ATTACHMENT&&(g.attachStatus!=null&&g.attachStatus!=undefined&&(g.attachStatus.toLowerCase()=="success"||g.attachStatus.toLowerCase()=="tds")))||(g.childType===CHILD_TYPE_ERRMSG)||(g.childType===CHILD_TYPE_KM)||(g.childType===CHILD_TYPE_SOLUTION_URL)||(g.childType===CHILD_TYPE_RFC&&isVisibleForUser(RFC_UPDATE_PRIV))){if(g.childType===CHILD_TYPE_ATTACHMENT){p+=' <img src="../images/filedownload_ena.png" style="cursor:pointer;" title="Checkout File" onclick="viewFile(\''+g.SR_Number+"', '"+g.Filename+"');\" /> ";p+=' <img src="../images/datacollect.gif" style="cursor:pointer;" title="Create Activity: ODM Data Collection" onclick="displayAttachments();" /> '}var o=(g.childType===CHILD_TYPE_SOLUTION_URL)?g.uid:g.id;p+=' <img src="../images/trash_can.gif" style="cursor:pointer;" title="Delete" onclick="deleteSRChild(\''+o+"', '"+g.childType+"');\" /> "}var f=evaluateExternalBugAppURL(g.externalDefectNumber,g.externalDefectSource);if(g.childType==CHILD_TYPE_BUG&&g.externalDefectNumber!=null&&dojo.string.trim(g.externalDefectNumber)!=""){if(g.externalDefectSource=="BugDB"){p+=' <img  src="../images/bug.gif" style="cursor:pointer;"  title = "'+f+'" class="externalBugIcon externalBugIconMenu"  id ="'+g.externalDefectNumber+'" name ="'+g.externalDefectNumber+'" externalDefectSource ="'+g.externalDefectSource+'"  /> &nbsp;'}else{if(g.externalDefectSource=="eBiz"){p+=' <img  src="../images/bug.gif" style="cursor:pointer;"  title = "'+f+'" class="externalBugIcon externalEbizIconMenu"  id ="'+g.id+'" name ="'+g.externalDefectNumber+'" externalDefectSource ="'+g.externalDefectSource+'"  /> &nbsp;'}else{if(g.externalDefectSource!=null&&g.externalDefectSource!=undefined&&dojo.string.trim(g.externalDefectSource)!=""&&g.externalDefectSource.toLowerCase()!="sunother"){p+=' <img  src="../images/bug.gif" style="cursor:pointer;"  title = "'+f+'" class="externalBugIcon"  name ="'+g.externalDefectNumber+'"   externalDefectSource ="'+g.externalDefectSource+'"  onclick="launchExternalBugApp(\''+g.externalDefectNumber+"', '"+g.externalDefectSource+"');\" /> &nbsp;"}else{p+="&nbsp;"}}}}}var a=g.href;if((a==="")||(a==="#")){p+=" "+g.name}else{if(g.childType!=CHILD_TYPE_BUG&&g.childType!=CHILD_TYPE_PREDEFECT&&g.childType!=CHILD_TYPE_FSTASK){var u=(g.childType==CHILD_TYPE_CHILDREN_SR||g.childType==PARENT_SR)?g.summary:"";var s='<a title="'+u+'" href="'+a+'" target="'+g.href_target+'">'+g.name+"</a>";if(g.childType==CHILD_TYPE_SR||g.childType==CHILD_TYPE_CHILDREN_SR||g.childType==PARENT_SR){s='<a title="'+u+'" href="'+a+'" target="'+g.href_target+'"  '+g.href_jscript+'">'+g.name+"</a>"}p+=" "+s;p+=addParentChildRefInfo(g);p+=addMoreInfo(g)}else{if(g.childType==CHILD_TYPE_BUG){var l=dojo.fromJson(g.name);var q=escape(escape(g.name));p+=' <a href="'+a+'" target="'+g.href_target+'">'+l.system+":"+l.originalNumber+"</a>&nbsp;";if(window.areAllDefectSourcesMigrated&&l.alternate!=undefined&&l.alternate!=""){p+="("+l.alternate+")"}p+=", "+l.status+", Updated: "+l.last;if(!window.areAllDefectSourcesMigrated){p+=", Alt Sys #: "+((l.alternate==null)?"&nbsp;":l.alternate)}p+=', <a href="#" onclick="openBugDialog(\''+l.id+"','"+q+"' ,"+false+');">(Classification: '+l.classification+")</a>";var w=(l.integrationStatusCode==null)?", Integ: ":", Integ: "+l.integrationStatusCode;if(l.integrationStatusCode!=null&&l.integrationStatusCode=="Fail"){w=',<div style="color:red;"> Integ: '+l.integrationStatusCode+"</div>"}p+=w}else{if(g.childType==CHILD_TYPE_PREDEFECT){var l=dojo.fromJson(g.name);if(dojo.string.trim(l.status).toLowerCase()!="closed"){p+=' <a href="'+a+'" target="'+g.href_target+'">'+dojo.string.trim(g.externalDefectNumber)+"</a>,&nbsp;"}else{p+=dojo.string.trim(g.externalDefectNumber)+" &nbsp;"}p+=l.abstracttext+",&nbsp;"+l.status}else{if(g.childType==CHILD_TYPE_FSTASK){p+=createFsTaskPaneLine(g)}}}}}p+="</div>";return p}function onchange_subtype(){}function toggle(g){var f=false;var b=dojo.byId("srReferencesAccordion");if(g||(b.style.display=="")){f=true;b.style.display="none";dojo.attr(b,"width","0%");resizeSRNavPage()}else{f=false;b.style.display="";dojo.attr(b,"width","17%");resizeSRNavPage()}var a=dojo.byId("srReferencesToggle");if(g){a.className="toggleLeft"}else{if(a.className=="toggleLeft"){a.className="toggleRight"}else{a.className="toggleLeft"}}SRSessionPreferences.savePreference(SRSessionPreferences.REFERENCE_PANE_MINIMIZED_PREFERENCE,f)}dojo.addOnUnload(cleanup);function onchangeLov_fld(l){if(getInitMode()){return}var a=dijit.byId(l);var f=false;if(a!=undefined&&a.getValue()==""){f=true}if(f){var b=l+"_lovHidden";if(dijit.byId(b)){dijit.byId(b).setValue("")}if(l=="csi"){dojo.byId("csiId").value="";if(dijit.byId("accountName")){dijit.byId("accountName").setValue("")}if(dijit.byId("csiName")){dijit.byId("csiName").setValue("")}if(dijit.byId(HW_SW_FID)){dijit.byId(HW_SW_FID).setValue("")}}else{if(l=="accountName"){if(dijit.byId("accountId")){dijit.byId("accountId").setValue("")}if(dijit.byId("classification")){dijit.byId("classification").setValue("")}if(dijit.byId("altAccountName")){dijit.byId("altAccountName").setValue("")}if(dijit.byId("accountIntegId")){dijit.byId("accountIntegId").setValue("")}}else{if(l=="productDescription"){dojo.byId("product").value="";if(dijit.byId("productLine")){dojo.byId("productLine").value=""}if(dijit.byId("productClass")){dijit.byId("productClass").setValue("")}if(dijit.byId("productClassification")){dijit.byId("productClassification").setValue("")}if(dijit.byId("hasProdPlatform")){dijit.byId("hasProdPlatform").setValue("")}if(dijit.byId("componentDescription")){dijit.byId("componentDescription").setValue("")}if(dijit.byId("productVersion")){dijit.byId("productVersion").setValue("")}if(dijit.byId("SRProductSubscription")){SRCloud.resetFormElements();SRCloud.evaluateForm()}}else{if(l=="componentDescription"){dojo.byId("component").value="";if(dijit.byId("subcomponentDescription")){dijit.byId("subcomponentDescription").setValue("")}if(dijit.byId("hasSubcomponent")){dijit.byId("hasSubcomponent").setValue("");setSubcomponentStyle()}}else{if(l=="subcomponentDescription"){dojo.byId("subcomponent").value=""}else{if(l=="platformDescription"){dojo.byId("platform").value="";if(dijit.byId("platformVersionDescription")){dijit.byId("platformVersionDescription").setValue("")}}else{if(l=="projectName"){dijit.byId("project").setValue("");if(dijit.byId("configurationName")){dijit.byId("configurationName").setValue("")}if(dijit.byId("milestone")){dijit.byId("milestone").setValue("")}}else{if(l=="configurationName"){dijit.byId("configuration").setValue("");if(dijit.byId("configurationOCMConfiguration")){dijit.byId("configurationOCMConfiguration").setAttribute("checked",false)}setFieldVal("configLevel","");if(dijit.byId("configurationName")&&dijit.byId("configurationName").getValue()==""){if(document.getElementById("hostId")){document.getElementById("hostId").value=""}if(dijit.byId("hostName")){dijit.byId("hostName").setValue("")}setConditionalReqFld("hostId",false)}else{if(dijit.byId("configurationName")&&dijit.byId("configurationName").getValue()!=""){if(document.getElementById("hostId")){document.getElementById("hostId").value=""}setConditionalReqFld("hostId",false)}}setTimeout(function(){remoteAccessCheck()},0)}else{if(l=="hostId"){if(dijit.byId("hostId")&&dijit.byId("configurationName").getValue()==""){if(dijit.byId("hostName")){dijit.byId("hostName").setValue("")}}setTimeout(function(){remoteAccessCheck()},0)}else{if(l=="toolsVersionVersion"){dojo.byId("toolsVersion").value=""}else{if(l=="databaseDescription"){dojo.byId("database").value="";if(dijit.byId("databaseVersion")){dijit.byId("databaseVersion").setValue("")}}else{if(l=="groupDesc"){dojo.byId("group").value=""}else{if(l=="contactLastName"){if(dijit.byId("contactId")){dijit.byId("contactId").setValue("")}else{dojo.byId("contactId").value=""}if(dijit.byId("contactFirstName")){dijit.byId("contactFirstName").setValue("")}if(dijit.byId("contactPhone")){dijit.byId("contactPhone").setValue("")}if(dijit.byId("contactEmail")){dijit.byId("contactEmail").setValue("")}if(dijit.byId("contactTimeZone")){dijit.byId("contactTimeZone").setValue("")}if(dijit.byId("contactMethod")){dijit.byId("contactMethod").setValue("");dijit.byId("contactMethod").setDisplayedValue("")}if(dijit.byId("country")){dijit.byId("country").setValue("")}}else{if(l=="alternateContactLastName"){if(dijit.byId("alternateContactId")){dijit.byId("alternateContactId").setValue("")}else{dojo.byId("alternateContactId").value=""}if(dijit.byId("alternateContactFirstName")){dijit.byId("alternateContactFirstName").setValue("")}if(dijit.byId("alternateContactPhone")){dijit.byId("alternateContactPhone").setValue("")}if(dijit.byId("alternateContactEmail")){dijit.byId("alternateContactEmail").setValue("")}if(dijit.byId("alternateContactTimeZone")){dijit.byId("alternateContactTimeZone").setValue("")}}else{if(l=="categoryDescription"){dojo.byId("category").value="";dojo.byId("clarificationCount").value="";setFieldVal("sev1Type","");setFieldVal("clarificationName","")}else{if(l=="clarificationName"){dojo.byId("clarificationId").value="";setFieldVal("parentTemplateSev1Type","")}else{if(l=="databasePlatformDesc"){dojo.byId("databasePlatform").value="";if(dijit.byId("databasePlatformVersionDesc")){dijit.byId("databasePlatformVersionDesc").setValue("")}}else{if(l=="milestone"){dojo.byId("milestoneId").value="";if(dijit.byId("milestoneDate")){dojo.byId("milestoneDate").value=""}}else{if(l=="outageStatus"){dojo.byId("outageStatusId").value=""}else{if(l==SERIAL_NUM_FID){serialNumberUtil.clearSNFldsData()}else{if(l==REF_CSI_FID){PartnerSRUtil.clearIndirectCustFlds()}else{if(l==INDIRECT_LAST_FID){PartnerSRUtil.clearIndirectContFlds()}else{if(l=="envName"){var h=true;var g=getEvalFieldVal("productClass");evalEffectOnEnvFields(g,undefined,h)}}}}}}}}}}}}}}}}}}}}}}}}else{validateLov(l,"update")}}function openBugDialog(b,g,p){var o=p;var l=dojo.fromJson(unescape(unescape(g)));var u=(l.system=="BugDB");var v=(l.system.indexOf("SunBugTraq")!=-1);var w=dijit.byId("bugDialog");if(w!=undefined){w.destroyRecursive()}w=new dijit.Dialog({refocus:false,title:"Edit Defect Link",style:"z-index:1;",id:"bugDialog"});var x=dojo.doc.createElement("TABLE");var h=dojo.doc.createElement("TBODY");x.appendChild(h);row=h.insertRow(-1);row.appendChild(buildDialogComponent("External Defect #:","bugExtDefect",l.originalNumber,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row.appendChild(buildDialogComponent("Status:","bugStatus",l.status,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row=h.insertRow(-1);row.appendChild(buildDialogComponent("Defect Number:","bugDefect",l.number,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row.appendChild(buildDialogComponent("SubStatus:","buSubstatus",l.substatus,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row=h.insertRow(-1);if(!window.areAllDefectSourcesMigrated){row.appendChild(buildDialogComponent("Alt System #:","bugAltNum",l.alternate,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"))}row.appendChild(buildDialogComponent("Source:","bugSource",l.system,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row.appendChild(buildDialogComponent("Date Closed:","bugDateClosed",l.dateClosed,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row=h.insertRow(-1);row.appendChild(buildDialogComponent("Summary:","bugSummary",l.abstractText,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row.appendChild(buildDialogComponent("Product Line:","bugProductLine",0,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row=h.insertRow(-1);row.appendChild(buildDialogComponent("Product:","bugProductIntegrationId",l.bugProductIntegrationId,"",dijit.form.TextBox,true,"srHeaderInput","","","","","bugProduct",l.bugProduct));row.appendChild(buildDialogComponent("Defect Type:","bugDefectType",l.type,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row=h.insertRow(-1);row.appendChild(buildDialogComponent("Component:","bugComponentCode",l.bugComponentCode,"",dijit.form.TextBox,true,"srHeaderInput","","","","","bugComponent",l.bugComponent));row.appendChild(buildDialogComponent("Integration Desc:","integStsDesc",l.integrationStatusDesc,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row=h.insertRow(-1);row.appendChild(buildDialogComponent("Sub Component:","bugSubComponentCode",l.bugSubComponentCode,"",dijit.form.TextBox,true,"srHeaderInput","","","","","bugSubComponent",l.bugSubComponent));row.appendChild(buildDialogComponent("Date Opened:","bugDateOpened",l.dateOpened,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row=h.insertRow(-1);row.appendChild(buildDialogComponent("Severity:","bugSeverity",l.severity,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row.appendChild(buildDialogComponent("Last Updated:","bugLastUpdated",l.last,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));row=h.insertRow(-1);row.appendChild(buildDialogComponent("Integration Status:","integSts",l.integrationStatusCode,"",dijit.form.TextBox,true,"srHeaderInput","width","22em"));if(null!=v&&v){var a='<input class="tundra" id="svcRespEngEmail" name="svcRespEngEmail" dojoType="dijit.form.TextBox"  value="'+l.svcRespEng+'" readOnly = "readOnly" />';row.appendChild(buildDialogComponent("Serv Resp Engineer:","svcRespEngineerSearch",l.svcRespEng,"",a,true,"srHeaderInput",null,null,true))}row=h.insertRow(-1);var m="";if(o){m=' disabled = "true"'}var f='<span id="bugClassificationStore" dojoType="dojo.data.ItemFileReadStore" jsId="bugClassificationStore"url="../../../SRHeaderRequest?action=loadlov&amp;lov=DEFECT_CLASSIFICATION&amp;rev='+enabledLOVServlets.get("SRHeaderRequest")+'"> </span><input class="tundra" id="bugClassification" name="bugClassification"'+m+' value="'+l.classification+'" searchAttr="id" store="bugClassificationStore" dojoType="dijit.form.FilteringSelect"/>';row.appendChild(buildDialogComponent("Classificaton:","bugClassification",l.classification,"",f,(o||v),"srHeaderInput",null,null,true));row.appendChild(buildDialogComponent("Escalated:","bugEscalated",l.escalated,"",dijit.form.CheckBox,(!u||o),"srHeaderInput"));row.appendChild(buildDialogComponent("Published:","bugPublished",l.published,"",dijit.form.CheckBox,(!u||o),"srHeaderInput"));w.containerNode.appendChild(x);if(!o){var q=new dijit.form.Button({label:"OK","class":"saveButtonX"});w.containerNode.appendChild(q.domNode);dojo.connect(q,"onClick",function(){bugDialogProcess(l.id,headerDataAsJson.SRId,l.classification,l.escalated,l.published)})}var s=new dijit.form.Button({label:"Cancel","class":"cancelButtonX"});w.containerNode.appendChild(s.domNode);dojo.connect(s,"onClick",function(){w.destroyRecursive()});w.show()}function buildDialogComponent(q,E,x,w,C,s,a,z,v,h,f,D,p){if(h==undefined){h=false}var y=dojo.doc.createElement("TD");if(dojo.isIE>0){y=dojo.doc.createElement("ID")}if(w==undefined||w==""){w=E}var A=dijit.byId(w);if(A!=undefined){A.destroyRecursive()}var g=dojo.doc.createElement("TD");g.innerHTML=q;g.className="srHeaderAttribute srHeaderLabel";var m=dojo.doc.createElement("TD");if(f!=undefined){dojo.attr(m,{colSpan:f})}var b=dojo.doc.createElement("INPUT");if(h){var o=dojo.doc.createElement("SPAN");o.id=dojo.dnd.getUniqueId();o.innerHTML=C;dojo.parser.parse(o);m.appendChild(o)}else{m.appendChild(b);if(x==undefined){x=""}if(p!=undefined){var l=dojo.doc.createElement("INPUT");m.appendChild(l);var o=new C({name:E,id:w,value:x,style:"width:4em;",checked:x,readOnly:s?"readOnly":""},b);if(dojo.isFF){var u=new C({name:D,id:D,value:p,style:"width:17.5em;",checked:p,readOnly:s?"readOnly":""},l)}else{if(dojo.isIE){var u=new C({name:D,id:D,value:p,style:"width:17.6em;",checked:p,readOnly:s?"readOnly":""},l)}else{var u=new C({name:D,id:D,value:p,style:"width:17.7em;",checked:p,readOnly:s?"readOnly":""},l)}}}else{var o=new C({name:E,id:w,value:x,checked:x,readOnly:s?"readOnly":""},b)}dojo.parser.parse(b)}if(a!=undefined&&a!=null){dojo.addClass(o,a)}if(z!=undefined&&z!=null&&dojo.string.trim(z)!=""){dojo.style(o.domNode,z,v)}dojo.parser.parse(m);y.appendChild(g);y.appendChild(m);if(h&&s){var B=dijit.byId(w);if(B!=undefined&&B!=null){B.setDisabled(true)}}return y}function bugDialogProcess(b,a,p,f,g){var h=dojo.byId("bugClassification").value;var l=dijit.byId("bugEscalated").checked;var o=dijit.byId("bugPublished").checked;var m=false;if(l!=f||o!=g||h!=p){dijit.byId("pleasewait").show();console.log("req mod id "+getSrModId());dojo.xhrPost({url:"../../../SRDefectRequest",content:{action:"update",srid:a,id:b,classification:h,escalated:l,published:o,srId:getActiveSrId(),activeSR:getSrNumber(),modId:getSrModId(),queryTabName:getQueryTabName()},handleAs:"json",load:function(s,q){if(s.success=="true"){if(s.modId!=undefined){headerDataAsJson.modId=s.modId;setSrModId(headerDataAsJson.modId);console.log("mod id coming back "+getSrModId())}SRReferences.refreshReference(true,CHILD_TYPE_BUG);dijit.byId("bugDialog").destroyRecursive();dijit.byId("pleasewait").hide()}else{dijit.byId("pleasewait").hide();displayErrors(s)}},error:function(u,s){dijit.byId("pleasewait").hide();var q=getDisplayMessageObj("Failed to save classification data or operation timed out.",2);displayErrors(q);console.error("Failed to save classification data.")}})}else{dijit.byId("pleasewait").hide();dijit.byId("bugDialog").destroyRecursive()}}function viewCurrentSR(){if(srData!=undefined&&srData.srNumber!=undefined){var a=getSRViewerURL(srData.srNumber);a=(a==undefined||a==null)?"SRViewStandalone.jspx?sr="+srData.srNumber+"&refresh=true":a;window.open(a)}else{alert("No Active SR found !")}}function viewSrAlerts(){if(srData!=undefined&&srData.srNumber!=undefined){var h=600;var g=825;var b=(screen.height-h)/2;var a=(screen.width-g)/2;var f=window.open("../alerts/SrAlerts.jspx?sr="+srData.srNumber,"mywindow2","status=0, toolbar=0, scrollbars=0, menubar=0,  top="+b+" , left="+a+" ,  height="+h+", width="+g);f.document.title="SR - "+srData.srNumber+" Alerts"}else{alert("No Active SR found !")}}function addUserTZ(a){var b=dojo.query(".tzclass",a);var f=getUserTZ();dojo.forEach(b,function(g){g.innerHTML="";g.innerHTML="("+f+")"})}function onchange_status(){if(initMode){return}if(SRUtils.isSRClosed()&&dijit.byId("status").getValue()=="Open"){if(dijit.byId("HIAcknowledge")){var a=dijit.byId("HIAcknowledge");a.setAttribute("disabled",false);a.setAttribute("readOnly",false)}}loadSubstatusLOV()}function changeUIComponent(h,m,s,a){var p=dijit.byId(h);var b=m.operation;var q=dojo.number.parse(m.arg);var o=dojo.number.parse(m.max);var f=dojo.number.parse(m.min);var u=0;var g=0;var l=dojo.byId(a);dojo.style(l,{display:""});if(b!=null&&b=="addRow"){if(dojo.number.parse(p.domNode.rows)+q<=o){u=dojo.number.parse(p.domNode.rows)+q;g=u+q;if(g>o){dojo.style(s.parentNode,{display:"none"})}}}else{if(b!=null&&b=="minusRow"){if(dojo.number.parse(p.domNode.rows)-q>=f){u=dojo.number.parse(p.domNode.rows)-q;g=u-q;if(g<f){dojo.style(s.parentNode,{display:"none"})}}}}dojo.attr(p.domNode,{rows:u})}function destroyLingeringTTDialog(){dojo.query(".dijitTooltipDialog").forEach(function(a){var b=dijit.byNode(a);b.destroyRecursive()})}function popSRContactLocalTime(b){if(SRUtils.getCurrentSR().ContactTimeZone!=null){var a=SRUtils.getCurrentSR().ContactTimeZone.match(/\(((GMT)(([\+\-])(\d\d):(\d\d))?)\).*/i);if(a!=null){var g=0;if(a[1]!=="GMT"){g=parseInt(a[5],10)*60+parseInt(a[6],10);if(a[4]==="-"){g*=-1}}var f={url:"../../../SRHeaderRequest",content:{action:"get_local_time",utcOffset:g},handleAs:"json",load:function(h){if(h.localTime){b.title="Contact local time: "+h.localTime}},error:function(h){console.error("An error occurred: ",h)},timeout:20000};dojo.xhrGet(f)}}}var displaySRContactLocalTime_timeoutHandler=null;var displayHintSRContactWorkingHours_timeoutHandler=null;function displaySRContactLocalTime(a){if(!dijit.byId("contactClock")){return}dijit.byId("contactClock").setValue(DateUtils.getCurrentTimeForUTCOffset(SRUtils.getCurrentSR().ContactUTCOffset));if(true===a){displayHintSRContactWorkingHours()}displaySRContactLocalTime_timeout=window.setTimeout("displaySRContactLocalTime()",1000)}function displayHintSRContactWorkingHours(){if(!dijit.byId("contactClock")){return}var f="white";var b=0;var g=dijit.byId("contactClock").getValue();var a=g.match(/^.* (\d\d).*(AM|PM)$/);if((a!=null)&&(a.length==3)){b=parseInt(a[1],10);if((b!=12)&&("PM"===a[2])){b+=12}if((b==9)||(b==18)){f="orange"}else{if((b>=10)&&(b<=17)){f="green"}else{f="red"}}}dojo.byId("contactClockHintWorkingHours").style.backgroundColor=f;displayHintSRContactWorkingHours_timeoutHandler=window.setTimeout("displayHintSRContactWorkingHours()",60000)}var checkEngrAvailability_tid=null;var resetEngrAvailabilityIcon_milleseconds=900000;EngrAvailabilityInit=function(a){OrionParameters.getParameter("RESET_ENGR_AVAILABILITY_ICON",true,function(){resetEngrAvailabilityIcon_milleseconds=OrionParameters.values.RESET_ENGR_AVAILABILITY_ICON})};EngrAvailabilityInit();function checkEngrAvailability(b){if(!dijit.byId("empEmail")){return}var f=dojo.byId("engrAvailabilityIcon");if(f){f.src="../images/whitebox.gif"}if(b){return}var h="";if(dijit.byId("empEmailId")){h=dijit.byId("empEmailId").getValue()}var a="../../../EngrAvailabilityRequest";var g={action:"getEngrAvailability",engrId:h};showPleaseWaitDialog();var l=genericTalkToServer(a,g,"json",true,null,"get");l.addCallback(function(q,m){hidePleaseWaitDialog();if(q.opStatus!=0){displayErrors(q)}var p=q.engrAvailability;var o=dojo.byId("engrAvailabilityIcon");if(p=="Available"){o.src="../images/greenCheckbox.gif"}else{if(p=="Not Available"){o.src="../images/redXbox.gif"}}if(resetEngrAvailabilityIcon_milleseconds>0){if(checkEngrAvailability_tid){window.clearTimeout(checkEngrAvailability_tid)}checkEngrAvailability_tid=setTimeout("checkEngrAvailability(true)",resetEngrAvailabilityIcon_milleseconds)}});l.addErrback(function(o,m){hidePleaseWaitDialog();displayErrors(o)})}function openGRPSchedule(){var s=dijit.byId("empEmail");if(s){var f=(s.getValue());var o=new Date();var q=o.getFullYear();var h=("0"+(o.getMonth()+1)).slice(-2);var v=("0"+o.getDate()).slice(-2);var w=new Date(o.getTime()+604800000);var g=w.getFullYear();var m=("0"+(w.getMonth()+1)).slice(-2);var p=("0"+w.getDate()).slice(-2);var l=q+"-"+h+"-"+v;var b=g+"-"+m+"-"+p;var u=new Map();u.put("TOKEN1",f);u.put("TOKEN2",l);u.put("TOKEN3",b);var a=evaluateSRMContextTextURLandTokens(vlinkHrefMap,"GRPSchedule",u);window.open(encodeURI(a))}}function getConfigDetails(b){if(b==""){return true}if(configObj.configurationId!=undefined&&configObj.configurationId==b){setFieldVal("configurationName",configObj.configurationName);if(dijit.byId("configurationOCMConfiguration")){dijit.byId("configurationOCMConfiguration").setAttribute("checked",configObj.ocmConfigFlag)}return true}configObj={};configObj.configurationId=b;if(dijit.byId("configurationName")){dijit.byId("configurationName").setAttribute("disabled",true);if(dojo.byId("configPickLink")){dojo.style(dojo.byId("configPickLink"),"display","none")}if(dojo.byId("configurationNameLoading")){dojo.style(dojo.byId("configurationNameLoading"),"display","")}}var a={url:"../../../SRRequest",content:{action:"getConfigDetails",configId:b},handleAs:"json",load:function(f){configObj.configurationName=(f!=undefined&&f.configurationName!=undefined)?f.configurationName:"";setFieldVal("configurationName",configObj.configurationName);configObj.ocmConfigFlag=(f!=undefined&&f.ocmConfigFlag!=undefined&&f.ocmConfigFlag=="true")?true:false;if(dijit.byId("configurationOCMConfiguration")){dijit.byId("configurationOCMConfiguration").setAttribute("checked",configObj.ocmConfigFlag)}if(dijit.byId("configurationName")){dijit.byId("configurationName").setAttribute("disabled",false);if(dojo.byId("configPickLink")){dojo.style(dojo.byId("configPickLink"),"display","")}if(dojo.byId("configViewerLink")&&!isEmptyVal(configObj.configurationName)){dojo.style(dojo.byId("configViewerLink"),"display","")}if(dojo.byId("configurationNameLoading")){dojo.style(dojo.byId("configurationNameLoading"),"display","none")}var g=dojo.connect(dijit.byId("configurationName"),"onChange",function(){SRUtils.onBlurFld(dijit.byId("configurationName"),configObj.configurationName,"srHeader")})}setConfigOnChangeHandle();return true},error:function(g){console.error("An error occurred: ",g);configObj={};if(dijit.byId("configurationName")){dijit.byId("configurationName").setAttribute("disabled",false);if(dojo.byId("configPickLink")){dojo.style(dojo.byId("configPickLink"),"display","")}if(dojo.byId("configurationNameLoading")){dojo.style(dojo.byId("configurationNameLoading"),"display","none")}var f=dojo.connect(dijit.byId("configurationName"),"onChange",function(){SRUtils.onBlurFld(dijit.byId("configurationName"),configObj.configurationName,"srHeader")})}setConfigOnChangeHandle();return true},timeout:50000};dojo.xhrGet(a)}var configOnChangeHandle=null;function setConfigOnChangeHandle(){if(configOnChangeHandle!=undefined&&configOnChangeHandle!=null){dojo.disconnect(configOnChangeHandle)}if(dijit.byId("configurationName")!=undefined){configOnChangeHandle=dojo.connect(dijit.byId("configurationName"),"onChange",function(){onchangeLov_fld("configurationName")})}}var SRIdentity=function(){this.queryTabName=getQueryTabName();this.modId=getSrModId();this.activeSR=getSrNumber()};var attachmentComparatorKey="name";var attachmentComparatorOrder="ASC";function attachmentOrderComparator(l,h){var g=l[attachmentComparatorKey];var p=h[attachmentComparatorKey];var o;var f;if(attachmentComparatorOrder==="ASC"){o=-1;f=1}else{o=1;f=-1}var m=((g<p)?o:((g>p)?f:0));return m}function reorderAttachmentsInReferecePane(){var b=dijit.byId("attachmentsOrderBy").getValue();var g;var a=b.split("_");if(a.length==2){if(a[0]==="NAME"){attachmentComparatorKey="name";g="filename"}else{if(a[0]==="DATE"){attachmentComparatorKey="date";g="uploaddate"}}attachmentComparatorOrder=a[1];if(attachmentComparatorOrder=="DESC"){g=g+"dsc"}else{g=g+attachmentComparatorOrder.toLowerCase()}}var f="../../../SRAttachmentsRequest?type=storeattachmentssortbyorder&attachmentssortbyorder="+g+"&"+buildThisSRDetailsURL();dojo.xhrPost({url:f,handleAs:"json",load:function(m,l){if(m.items[0].save_status=="success"){referencesElementsStore[CHILD_TYPE_ATTACHMENT].sort(attachmentOrderComparator);var o="";for(var h=0;h<referencesElementsStore[CHILD_TYPE_ATTACHMENT].length;h++){o+=decorateElement(referencesElementsStore[CHILD_TYPE_ATTACHMENT][h])}dojo.byId("SRAttachmentsArea").innerHTML=o}}})}function defectLinkExists(b){for(var a=0;a<referencesElementsStore[CHILD_TYPE_BUG].length;a++){var f=referencesElementsStore[CHILD_TYPE_BUG][a].externalDefectSource;if(f==b){return true}}return false}function onSelectEmail(a){if(null==a){a="ServicesRespEngEmail"}var f=dijit.byId("grid");if(f!=null&&f.selection.getSelected()!=null){var h=dijit.byId("grid").selection.getSelected()[0];var g=dijit.byId("grid").model.data[h];if(dijit.byId(a)){dijit.byId(a).setValue(g.empEmail)}var b=dijit.byId("lovDialog");if(b!=null&&b.open){b.hide()}}}function resubmitFSTask(b){var a=new Object();a.id=b;createOrResubmitFSTask(a)}function fsATR(a){var b=evaluateSRMContextTextURL(vlinkHrefMap,FLD_SRV_ATR_URL,getSrNumber());window.open(b,"atr")}function getFSShadowSR(){var a=null;if(headerDataAsJson!=undefined&&headerDataAsJson[FS_SR]!=undefined&&headerDataAsJson[FS_SR]!=null&&dojo.string.trim(headerDataAsJson[FS_SR])!=""){a=headerDataAsJson[FS_SR]}return a}function getFSIntegDateTime(){var a=null;if(headerDataAsJson!=undefined&&headerDataAsJson[FS_SRIntegrationDateTime]!=undefined&&headerDataAsJson[FS_SRIntegrationDateTime]!=null&&dojo.string.trim(headerDataAsJson[FS_SRIntegrationDateTime])!=""){a=headerDataAsJson[FS_SRIntegrationDateTime]}return a}function assignDataStoreToFsTaskType(){getSP_LOV2(null,"ISP_FS_TASK_TYPE","loadlov");getSP_LOV2(null,"FS_DURATION_ISP","loadlov");getSP_LOV2(null,"FS_COMPLEXITY_ISP","loadlov");getSP_LOV2(null,"FS_SKILL","loadlov");getSP_LOV2(null,"FS_PREFERRED_ONSITE","loadlov");getSP_LOV2(null,"FS_ONSITE_PRIMARY_REASON_ISP","loadlov");getSP_LOV2(null,"FS_ONSITE_REQUESTOR_ISP","loadlov");var a={contents:[{name:"parent",value:"='Support'"}]};fsNoteTypeParentSupportLOVName=getAppendedLOVName(a,"FS_NOTE_TYPE");getSP_LOV2(a,"FS_NOTE_TYPE","loadlov2",fsNoteTypeParentSupportLOVName)}function fsTaskSecondaryReasonLOV(){var a=dijit.byId("fsTaskPrimaryReason").getValue();var b={url:"../../../SRHeaderRequest",content:{parentType:"FS_ONSITE_PRIMARY_REASON",parentValue:a,lov:"FS_ONSITE_SECONDARY_REASON",action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(f){dijit.byId("fsTaskSecondaryReason").store=new dojo.data.ItemFileReadStore({data:f})},error:function(f){console.error("An error occurred: "+f)},timeout:2000};dojo.xhrGet(b)}function openFSTaskDialogCreate(a){if(fsTaskCreateTemplate==null){dojo.xhrGet({url:"fsTaskCreate.html"+getVersion(),load:function(b){fsTaskCreateTemplate=b;processFSTaskCreate(a,fsTaskCreateTemplate)},error:function(b){console.debug("Failed to load FS Task Create Template")},timeout:120000})}else{processFSTaskCreate(a,fsTaskCreateTemplate)}}function processFSTaskCreate(b,f){b.setContent(f);dijit.byId("fsTaskDesc").setValue("");var a=fsTaskLOVMap.get("ISP_FS_TASK_TYPE");dijit.byId("fsTaskType").store=new dojo.data.ItemFileReadStore({data:a});a=fsTaskLOVMap.get("FS_DURATION_ISP");dijit.byId("fsTaskDuration").store=new dojo.data.ItemFileReadStore({data:a});a=fsTaskLOVMap.get("FS_COMPLEXITY_ISP");dijit.byId("fsTaskComplexity").store=new dojo.data.ItemFileReadStore({data:a});a=fsTaskLOVMap.get("FS_SKILL");dijit.byId("fsTaskSoftwareSkill").store=new dojo.data.ItemFileReadStore({data:a});a=fsTaskLOVMap.get("FS_ONSITE_PRIMARY_REASON_ISP");dijit.byId("fsTaskPrimaryReason").store=new dojo.data.ItemFileReadStore({data:a});a=fsTaskLOVMap.get("FS_ONSITE_SECONDARY_REASON");dijit.byId("fsTaskSecondaryReason").store=new dojo.data.ItemFileReadStore({data:a});a=fsTaskLOVMap.get("FS_ONSITE_REQUESTOR_ISP");dijit.byId("fsTaskRequestor").store=new dojo.data.ItemFileReadStore({data:a});a=fsTaskLOVMap.get("FS_PREFERRED_ONSITE");dijit.byId("fsTaskPreferredOnsiteTime").store=new dojo.data.ItemFileReadStore({data:a});dijit.byId("fsTaskPreferredOnsiteTime").setValue("");dijit.byId("fsTaskTZ").setValue(headerDataAsJson.HWTZ);dijit.byId("fsTaskTZId").setValue(headerDataAsJson.HWTZId);dojo.byId("fsPrefTimeDisplayTZ").innerHTML=headerDataAsJson.HWTZ;dojo.style(dojo.byId("fsTaskTimeLabel"),"display","none");dojo.style(dojo.byId("fsTaskTimeRequired"),"display","none");dojo.style(dijit.byId("fsTaskTime").domNode,"display","none");dojo.style(dojo.byId("fsPrefTimeDisplayTZ"),"display","none");addControlButton(b,"Create","refDialogFSTaskCreateButtonFunc","plusIcon");addControlButton(b,"Cancel","refDialogCloseButtonFunc",null);dojo.connect(dijit.byId("fsTaskPreferredOnsiteTime"),"onChange","refDialogSpecificTimeFunc");checkOnsite();b.show()}function refDialogSpecificTimeFunc(){var a=dijit.byId("fsTaskPreferredOnsiteTime");var b=dijit.byId("fsTaskTime");if(a.getValue().toLowerCase().indexOf("outside")!=-1){dojo.style(dojo.byId("fsTaskTimeLabel"),"display","");dojo.style(dojo.byId("fsTaskTimeRequired"),"display","");dojo.style(dijit.byId("fsTaskTime").domNode,"display","");dojo.style(dojo.byId("fsPrefTimeDisplayTZ"),"display","");if(typeof previousFSTaskTime!="undefined"){b.setValue(previousFSTaskTime)}}else{dojo.style(dojo.byId("fsTaskTimeLabel"),"display","none");dojo.style(dojo.byId("fsTaskTimeRequired"),"display","none");dojo.style(dijit.byId("fsTaskTime").domNode,"display","none");dojo.style(dojo.byId("fsPrefTimeDisplayTZ"),"display","none");if(b.getValue()!=undefined){previousFSTaskTime=b.getValue()}b.setValue("")}}function refDialogCloseButtonFunc(a){var b=false;if(dijit.byId("buttonValue")!=undefined&&dijit.byId("buttonValue").getValue()!=null){if(dijit.byId("buttonValue").getValue()=="Create RFC"){b=true}}a.destroyRecursive();if(b){SRReferences.refreshReference(true,CHILD_TYPE_RFC)}}function hideOnsite(){var a=document.getElementsByTagName("td");if(a){for(i=0;i<a.length;i++){if(a[i].className=="onsite_visible"){a[i].className="onsite_hidden"}}}}function showOnsite(){var a=document.getElementsByTagName("td");if(a){for(i=0;i<a.length;i++){if(a[i].className=="onsite_hidden"){a[i].className="onsite_visible"}}}}function checkOnsite(){var a=dijit.byId("fsTaskType").getValue();(a&&a=="Onsite")?showOnsite():hideOnsite()}function refDialogFSTaskCreateButtonFunc(h,E){var H=dijit.byId("fsTaskType").getValue();var m=validateSPDialogWidget(dijit.byId("fsTaskType"));if(H=="Onsite"){var u=validateSPDialogWidget(dijit.byId("fsTaskPrimaryReason"));var b=validateSPDialogWidget(dijit.byId("fsTaskSecondaryReason"));var J=validateSPDialogWidget(dijit.byId("fsTaskRequestor"))}var D=validateSPDialogWidget(dijit.byId("fsTaskDuration"));var s=validateSPDialogWidget(dijit.byId("fsTaskComplexity"));var q=validateSPDialogWidget(dijit.byId("fsTaskSummary"));var A=validateSPDialogWidget(dijit.byId("fsTaskPreferredOnsiteTime"));if(H=="Onsite"){var G=(m&&D&&s&&q&&A&&u&&b&&J)}else{var G=(m&&D&&s&&q&&A)}if(!G){return G}var f=dijit.byId("fsTaskType").getValue();var a=dijit.byId("fsTaskDuration").getValue();var x=dijit.byId("fsTaskComplexity").getValue();var F=dijit.byId("fsTaskSoftwareSkill").getValue();var o=dijit.byId("fsTaskSummary").getValue();var C=dijit.byId("fsTaskDesc").getValue();var z=dijit.byId("fsTaskPreferredOnsiteTime").getValue();var p=dojo.byId("fsTaskTime").value;var I=dojo.byId("fsTaskTZ").value;var B=dojo.byId("fsTaskTZId").value;var g=dijit.byId("fsTaskPrimaryReason").getValue();var y=dijit.byId("fsTaskSecondaryReason").getValue();var l=dijit.byId("fsTaskRequestor").getValue();var v=dijit.byId("fsTaskReasonNotation").getValue();if(z!=undefined&&z!=null&&z.toLowerCase().indexOf("specific")>=0&&p==""){var K=validateSPDialogWidget(dijit.byId("fsTaskTime"));if(!K){return K}}var w=new Object();w.type=f;w.summary=o;w.desc=C;w.duration=a;w.complexity=x;w.softwareSkill=F;w.preferredOnsite=z;w.preferredOnsiteTime=p;w.preferredOnsiteTZ=I;w.preferredOnsiteTZId=B;w.primaryReason=g;w.secondaryReason=y;w.requestor=l;w.reasonNotation=v;createOrResubmitFSTask(w,h)}function createOrResubmitFSTask(f,b){var a=null;var g={action:ACTION_CREATE_SR_REFERENCE_FSTASK,activeSR:getSrNumber(),modId:getSrModId(),queryTabName:getQueryTabName(),json:dojo.toJson(f)};dijit.byId("pleasewait").show();var h=talkToServer("../../../SRHeaderRequest",g);h.addErrback(function(m,l){console.debug("Problems were encountered while communicating with server; action is createOrResubmitFSTask");if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}});return h.addCallback(function(m,l){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(isObjectErroneous(m.status)){alert("A problem was encountered during FS Task creation request");displayErrors(m.status)}else{alert("FS Task is submitted successfully");if(b!=undefined&&b!=null){b.hide()}isReferencePaneUpdate=true;refreshAfterSROp(m.srData,true,false,true,true);dijit.byId("elementsAccordion").selectChild(dijit.byId(lAccordionPaneIDs[CHILD_TYPE_FSTASK]))}})}function getSP_LOV2(b,a,f,h){if(b==null){b=new Object()}var g={url:"../../../SRHeaderRequest",content:{lovDetails:dojo.toJson(b),lov:a,action:f,rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(l){if(l.opStatus!=undefined&&l.opStatus==1){displayErrors(l)}else{if(h!=undefined&&h!=null&&dojo.string.trim(h)!=""){fsTaskLOVMap.put(h,l)}else{fsTaskLOVMap.put(a,l)}}},error:function(l){alert("An error occurred while getching the FS task type LOV name: "+a+"----"+l);return l}};return dojo.xhrGet(g)}function createFsTaskPaneLine(f){var g=f.summary;if(f.summary!=undefined&&f.summary.length>30){g=f.summary.substring(0,27)+"..."}var b=' <a alt="'+f.summary+'" href="'+f.href+'" target="'+f.href_target+'">'+f.displayId+"</a>,&nbsp;"+g+",&nbsp;"+f.type+",&nbsp;"+f.status+",&nbsp;Note count: "+f.nbrOfNotes+" ,&nbsp;updated: "+f.updatedDate;var a=(f.intgStatus!=null&&f.intgStatus!=undefined)?(",&nbsp;Integ: "+f.intgStatus):(",&nbsp;Integ: ");if(f.intgStatus!=null&&f.intgStatus.toLowerCase()=="failed"){a=',&nbsp;<span style="color:red;"> Integ: '+f.intgStatus+"</span>"}b+=a;return b}function toggleParentChildRefInfo(g){var l=(g.src.indexOf("hideshow_infoshown.gif")!=-1)?"../images/hideshow_infohidden.gif":"../images/hideshow_infoshown.gif";var h=(g.src.indexOf("hideshow_infoshown.gif")!=-1)?"none":"";var o=(g.src.indexOf("hideshow_infoshown.gif")!=-1)?"":"none";dojo.attr(g,"src",l);var f=g.parentNode.parentNode;var b=dojo.query("div",f);var a=dojo.query("span",f);if(b!=undefined&&b.length>0){var m=b[0];dojo.style(m,"display",h)}if(a!=undefined&&a.length>0){var m=a[0];dojo.style(m,"display",o)}}var globalRefTT;function applyRefDetailContextMenu(){var a=dojo.query(".refDetailMenu");if(a!=undefined&&a.length>0){if(globalRefTT==null||globalRefTT==undefined){globalRefTT=new dijit.TooltipDialog({});dojo.addClass(globalRefTT.domNode,"dijitInline");var p=document.createElement("table");var m=document.createElement("tbody");p.appendChild(m);var h=document.createElement("tr");m.appendChild(h);var f=document.createElement("td");var o=document.createElement("span");f.appendChild(o);h.appendChild(f);var g=document.createElement("tr");m.appendChild(g);var b=document.createElement("td");g.appendChild(b);dojo.attr(b,{align:"left"});var l=new dijit.form.Button({label:"Close"});b.appendChild(l.domNode);dojo.connect(l,"onClick",this,function(){dijit.popup.close(globalRefTT)});globalRefTT.setContent(p);globalRefTT.startup();dojo.connect(globalRefTT,"onBlur",function(){dijit.popup.close(globalRefTT)})}dojo.forEach(a,function(q){dojo.connect(q,"oncontextmenu",function(u){u.preventDefault();dijit.popup.open({popup:globalRefTT,around:q});var s=dojo.query("span",globalRefTT.domNode);if(s!=undefined&&s.length>0){var v=s[0];v.innerHTML=q.title}})})}}function addParentChildRefInfo(f){var h=new StringBuffer();if(f.childType!=CHILD_TYPE_CHILDREN_SR&&f.childType!=PARENT_SR){return""}var p=16;var b=(isEmptyVal(f.owner))?"None":f.owner;var g=f.substatus;var m="";if(f.lastUpdated!=undefined){m=f.lastUpdated;var o=m.indexOf("GMT");if(o!=-1){m=m.substring(0,o)}}var a=f.lastUpdatedBy;var l="Status:"+f.status+",Substatus:"+f.substatus+",Owner:"+b+",Severity:"+f.severity+",Updated:"+f.lastUpdated+",Updated by:"+f.lastUpdatedBy;h.append('<div style="width:99%;height:auto;margin:1px;padding:1px;">');h.append('<a><img style="vertical-align:middle;" src="../images/hideshow_infoshown.gif" onclick="toggleParentChildRefInfo(this)"/></a>');h.append('<span title="'+l+'" style="margin-left:1px;padding-left:1px;display:none;vertical-align:middle;">Expand to see details</span>');h.append('<div style="overflow:hidden;width:98%;margin:0px;padding:0px;height:auto;border-width:1px;border-color:#99BBE8;border-style:solid; white-space:nowrap;">');h.append('<table width="auto" ><tbody><tr><td width="5%" title="SR Status" class="srHeaderLabel" >Status:</td><td class="refDetailMenu" nowrap="nowrap" title="'+f.status+'">'+f.status+"</td></tr>");h.append('<tr><td width="5%"  class="srHeaderLabel" title="SR Substatus">Substatus:</td><td nowrap="nowrap" class="refDetailMenu" title="'+f.substatus+'">'+g+"</td></tr>");h.append('<tr><td width="5%" class="srHeaderLabel" title="SR Owner">Owner:</td><td nowrap="nowrap" class="refDetailMenu" title="'+f.owner+'">'+b+"</td></tr>");h.append('<tr><td width="5%" class="srHeaderLabel"  title="Severity">Severity:</td><td nowrap="nowrap" class="refDetailMenu" title="'+f.severity+'">'+f.severity+"</td></tr>");h.append('<tr><td nowrap="nowrap" class="srHeaderLabel"  width="5%" title="Last Updated Date"">Updated:</td><td class="refDetailMenu" nowrap="nowrap" title="'+f.lastUpdated+'">'+m+"</td></tr>");h.append('<tr><td nowrap="nowrap" class="srHeaderLabel" width="5%" title="Last Updated By">Upd by:</td><td nowrap="nowrap" class="refDetailMenu" title="'+f.lastUpdatedBy+'">'+a+"</td></tr>");h.append("</tbody></table></div></div>");return h.toString()}function ellipsis(f){var l=dojo.byId("refdatacontainer");if(l==undefined){return}var b=l.offsetWidth-65;var a=dojo.query(".refDetailMenu",l);if(a!=undefined&&a.length>0){for(i=0;i<a.length;i++){var h=a[i];var g=h.innerHTML;g=fitStringToWidth(g,b);h.innerHTML=g}}}function fitStringToWidth(m,b,l){function o(u){return u.replace("<","&lt;").replace(">","&gt;")}var p=document.createElement("span");if(l){p.className=l}p.style.display="inline";p.style.visibility="hidden";p.style.padding="0px";document.body.appendChild(p);var q=o(m);p.innerHTML=q;if(p.offsetWidth>b){var g=0,h,a=m.length,f;while(f=(a-g)>>1){h=g+f;p.innerHTML=o(m.substring(0,h))+"..";if(p.offsetWidth>b){a=h}else{g=h}}q=o(m.substring(0,g))+".."}document.body.removeChild(p);return q}function validateSPDialogWidget(a){var b=false;b=a.validate(false);if(!b){a.state="Error";a._setStateClass()}return b}function isFSCapable(){var a=false;a=(isTechnicalSR()&&isHardwareSR()&&SRUtils.isSerialNumberOK()&&(headerDataAsJson.isEnglishTranslation==="false")&&!SRUtils.isInternalCollabSR());return a}function requestForShadowSROnly(){var a=null;var b={action:ACTION_CREATE_SR_REFERENCE_FSTASK_SHADOW_SR_ONLY,activeSR:getSrNumber(),modId:getSrModId(),queryTabName:getQueryTabName()};dijit.byId("pleasewait").show();var f=talkToServer("../../../SRHeaderRequest",b);f.addErrback(function(h,g){console.debug("Problems were encountered while communicating with server; action is requesting for shadow SR creation");if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}});return f.addCallback(function(l,h){var g=isObjectErroneous(l.status);if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(isObjectErroneous(l.status)){alert("A problem was encountered during submit of Shadow SR creation");displayErrors(l.status)}else{alert("Request to create shadow SR was submitted successfully. Screen will be Refreshed");refreshAfterSROp(l.srData,true,false,true,true);dijit.byId("elementsAccordion").selectChild(dijit.byId(lAccordionPaneIDs[CHILD_TYPE_FSTASK]))}})}function isFsSrInThisState(a){var b=false;if(headerDataAsJson!=undefined&&headerDataAsJson[FS_SRIntegrationStatus]!=undefined&&headerDataAsJson[FS_SRIntegrationStatus]!=null&&a!=null&&a!=undefined&&(dojo.string.trim(headerDataAsJson[FS_SRIntegrationStatus])).toLowerCase()==a.toLowerCase()){b=true}return b}function refreshFSTask(){if(this.declaredClass=="dijit.form.Button"){this.setLabel("Loading...");this.setDisabled(true)}if(selectFSTaskPaneConnect==null){selectFSTaskPaneConnect=dojo.connect(SRReferences,"renderAndLoad",function(){dijit.byId("elementsAccordion").selectChild(dijit.byId(lAccordionPaneIDs[CHILD_TYPE_FSTASK]));dojo.disconnect(selectFSTaskPaneConnect);selectFSTaskPaneConnect=null})}refreshSRDetail("?refresh=true","",true,false)}function validateDefectNumber(){var g=true;var a=dijit.byId("bugProductLine").getValue();var f="";if(a!=undefined){a=a.toLowerCase()}else{a="unknown"}if(a=="bugdb"){f=/^\d{1,38}$/}else{if(a=="ebiz"){f=/^\S{1,20}$/}else{if(a=="ice"){f=/^(\d{1,15}|SAR\d{1,8})$/}else{if(a=="sunbugtraq"){f=/^\d{1,7}$/}else{if(a=="sunother"){f=/.+/}}}}}if(!dijit.byId("referenceLinkInputText").getValue().match(f)){var b=" Validation rules:\n  BugDB: 1 to 38 numbers\n  eBiz: 1 to 20 non-blank characters\n  ICE: 1 to 15 numbers *OR* SAR + 1 to 8 numbers\n  BugTraq: 1 to 7 numbers\n  SunOther: No validation";displayError("Incorrect defect number format, please verify.\n"+b);g=false}return g}function validateSrvRespEng(){var a=dijit.byId("ServicesRespEngEmail").getValue();if(!a.match(/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/)){displayError("Invalid email address entered for Services Responsible Engineer. Please enter a valid email address");dijit.byId("ServicesRespEngEmail").focus();a=null}return a}function showBugTraqSrvRespEngineer(b){var a=dijit.byId("bugProductLine").getValue();var h=null;var f=dijit.byId("associationClassification");f.setDisabled(false);if(a==undefined||a==null||a==""){a="none"}if(a.indexOf(DEFECT_SOURCE_SUNBUGTRAQ)!=-1){h="SunBugTraq"}else{if(a.indexOf(DEFECT_SOURCE_SUNOTHER)!=-1){h="SunOther"}}if(h!=null){if(h=="SunBugTraq"){f.setValue("Active Participant");f.setDisabled(true);if(dojo.byId("sunAdditionalInfo")==null){var g=createSunAddInfoNode();b.containerNode.appendChild(g)}else{}}else{if(dojo.byId("sunAdditionalInfo")!=null){dojo._destroyElement("sunAdditionalInfo");dijit.byId("ServicesRespEngEmail").destroy()}}}else{if(dojo.byId("sunAdditionalInfo")!=null){dojo._destroyElement("sunAdditionalInfo");dijit.byId("ServicesRespEngEmail").destroy()}}}function validateSunDup(b){var a=true;if(defectLinkExists(b)){displayError("There is already a "+b+" defect associated to this SR. Please remove the existing defect from this SR or create a new SR.");a=false}return a}function createSunAddInfoNode(){var g=dojo.doc.createElement("SPAN");g.id="sunAdditionalInfo";g.appendChild(dojo.doc.createElement("BR"));var a=dojo.doc.createElement("SPAN");a.innerHTML="Services Responsible Engineer:";a.id="svcEngEmailLabel";g.appendChild(a);var f=new dijit.form.TextBox({label:"Services Responsible Engineer",id:"ServicesRespEngEmail"});f.setValue(headerDataAsJson.Owner);g.appendChild(f.domNode);var b=dojo.doc.createElement("SPAN");b.id="ServicesRespEngEmailSearch";b.innerHTML='<a style="vertical-align:middle" href="#" class = "lovSearchImg" id =  "lovSearchImg3"onclick=\'setLovDialog("employee","","", "ServicesRespEngEmail", "Services Responsible Engineer Email", "onSelectEmail()");\'><img height="16" width="16" src="../images/search.gif"/></a>';dojo.parser.parse(b);g.appendChild(b);return g}function openSrViewerWithSrNumber(b){if(!isEmptyVal(b)){var a=evaluateSRMContextTextURL(vlinkHrefMap,"SR",b);window.open(a)}}function viewAllFSTasksReport(a){console.debug("FS shadow SR is "+a);var b=evaluateSRMContextTextURL(vlinkHrefMap,"FS_GSI_ALLTASK_REPORT_URL",a);window.open(b,"GSIAllTaskScreen")}function calcFSTaskAccordion(){var m=lAccordionPaneIDs[CHILD_TYPE_FSTASK];var g=dijit.byId(m);var l=0;var f="";if(SRUtils.isSREditable()&&isFSCapable()){f+=getCreateLinkContent(CHILD_TYPE_FSTASK)}if(referencesElementsStore[CHILD_TYPE_FSTASK]){l=referencesElementsStore[CHILD_TYPE_FSTASK].length;if(referencesElementsStore[CHILD_TYPE_FSTASK].length>0){focusOnTheFirstTabWithContent(CHILD_TYPE_FSTASK)}for(var h=0;h<referencesElementsStore[CHILD_TYPE_FSTASK].length;h++){var b=referencesElementsStore[CHILD_TYPE_FSTASK][h];f+=decorateElement(referencesElementsStore[CHILD_TYPE_FSTASK][h])}}g.setContent(f);SRReferences.updateReferenceCount(g,l)}function focusOnTheFirstTabWithContent(a){if(isReferencePaneUpdate){return}if(referencePaneGroupFocus===""){referencePaneGroupFocus=a}}function noOfElements(a){return"("+referencesElementsStore[a].length+")"}function getCreateLinkContent(h){var a="openCreateReferenceLink";if(h==CHILD_TYPE_FSTASK){var m="fsATR";var l="viewAllFSTasksReport";b='<div style="margin-bottom: 3px;">';b+='<table width="100%"><tbody><tr>';if(getFSShadowSR()!=null||(getFSShadowSR()==null&&!isFsSrInThisState("submitted")&&!isFsSrInThisState("failed"))){b+='<td align="left">';var g=evaluateSRMContextTextJSString(getLinkHrefMap(),"FLD_SRV_ATR_URL");b+='<a style="text-decoration:none;float:left;" title="+ Create Task (ATR)" alt ="+ Create Task (ATR)" href="javascript:validateSR_FSTask(\''+m+"')\""+g+">";b+='<img src="../images/add.gif" border="0" align="absmiddle" title="Create Task (ATR)" alt ="Create Task (ATR)"/>ATR</a>';b+="</td>";if(getFSShadowSR()!=null){var o=evaluateSRMContextTextJSString(getLinkHrefMap(),"FS_GSI_ALLTASK_REPORT_URL");b+='<td align="center"><a style="text-decoration:none;" title="All Tasks Report" alt ="All Tasks Report" href="javascript:'+l+"('"+getFSShadowSR()+"');\""+o+">All Tasks</a></td>"}b+='<td align = "right"><a style="text-decoration:none;"  title="Quick Task" alt ="Quick Task" href="javascript:validateSR_FSTask(\''+a+"')\">Quick Task</a>";b+="</td>"}else{if(getFSShadowSR()==null&&isFsSrInThisState("submitted")){b+='<td align ="left">';b+='<button type="button" dojoType="dijit.form.Button" style="text-decoration:none;font-size:4pt;" onclick="refreshFSTask">FS in Submitted State.';b+=getFSIntegDateTime()!=null?("<br/>("+getFSIntegDateTime()+')<br/><span class="tzclass">'+getUserTZ()+"</span>"):("");b+="<br/>Click to Refresh</button>";b+="</td>"}}b+="</tr></tbody></table></div><br/>"}else{if(h==SIMILAR_SR){var f=evaluateSRMContextTextURL(vlinkHrefMap,SIMILAR_SR_KM_APP_URL,getActiveSrId());var b='<div style="margin-bottom: 3px;"><a style="text-decoration:none;" title="View All Similar Srs" alt ="View All Similar SRs" href="'+f+'" target="_blank">&nbsp;&nbsp;&nbsp;View All Similar SRs</a></div><br/><br/>'}else{var b='<div style="margin-bottom: 3px;"><a style="text-decoration:none;" title="Create new" alt ="Create New" href="#" onclick="'+a+"('"+h+'\');">&nbsp;<img src="../images/add.gif" border="0" align="absmiddle" title="Create new" alt ="Create new" /> Create new link</a></div>'}}return b}function getPredefectLink(f){var a=evaluateSRMContextTextURL(vlinkHrefMap,PREDEFECT_CREATE_URL,getSrNumber());var b=evaluateSRMContextTextTarget(vlinkHrefMap,PREDEFECT_CREATE_URL);return'<div style="margin-bottom: 6px;"><a style="text-decoration:none;" title="Create new predefect" alt ="Create new predefect" href="'+a+'" target="'+b+'">&nbsp; <img src="../images/add.gif" border="0" align="absmiddle" title="Create new predefect" alt ="Create new predefect" /> Create new </a></div>'}var SRPrefs={};SRPrefs.srPrefTemplate=null;SRPrefs.showSRPreferences=function(){if(SRPrefs.srPrefTemplate==null){dojo.xhrGet({url:"SRPreferences.html"+getVersion(),load:function(a){SRPrefs.srPrefTemplate=a;SRPrefs.openSRPreferences(SRPrefs.srPrefTemplate)},error:function(a){console.debug("Failed to load Preferences Template")},timeout:120000})}else{SRPrefs.openSRPreferences(SRPrefs.srPrefTemplate)}};SRPrefs.openSRPreferences=function(a){if(dijit.byId("prefDialog")){dijit.byId("prefDialog").destroyRecursive()}var f=document.createElement("div");var b=new dijit.Dialog({id:"prefDialog",execute:SRPrefs.saveSRNavPrefs,style:"width:85%;height:300px;font-family:verdana;font-size:8pt;background-color:#FFFFEE; border:2px outset #AAAAAA;",title:"SR Preferences"},f);b.setContent(a);dojo.body().appendChild(f);b.startup();SRPrefs.populateLov();SRPrefs.populateSRNavPrefs.spSubTokens("spSubLoginAlias","spSubLoginAliasPrefFS");b.show()};SRPrefs.lovMap=new Map();SRPrefs.populateLov=function(){SRPrefs.retrieveLov("RELATEDSR_CLASSIFICATION","loadlov","defaultSRClassification");SRPrefs.retrieveLov("DEFECT_CLASSIFICATION","loadlov","defaultDefectClassification");SRPrefs.retrieveLov("KM_CLASSIFICATION","loadlov","defaultKMClassification");SRPrefs.retrieveLov("DEFECT_SOURCE_ORION","loadSimpleLov2","defaultDefectProductLine");SRPrefs.retrieveLov("URL_CLASSIFICATION","loadlov","defaultURLClassification");SRPrefs.retrieveLov("ERROR_CATEGORIZATION","loadlov","defaultErrorMsgClassification")};SRPrefs.retrieveLov=function(f,h,b){var g=SRPrefs.lovMap.findIt(f);if(g!=-1){SRPrefs.setLovStore(f,b);SRPrefs.populateSRNavPrefs(b);return}var a=SRPrefs.ajaxReq(f,h);a.addCallback(function(l){if(l.opStatus!=undefined&&l.opStatus==1){displayErrors(l)}else{SRPrefs.lovMap.put(f,l);SRPrefs.setLovStore(f,b);SRPrefs.populateSRNavPrefs(b)}})};SRPrefs.ajaxReq=function(a,b){var f={url:"../../../SRHeaderRequest",content:{lov:a,action:b,rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(g){return g},error:function(g){console.debug(g);return g}};return dojo.xhrGet(f)};SRPrefs.setLovStore=function(f,b){var a=SRPrefs.lovMap.findIt(f);if(a!=-1){var g=SRPrefs.lovMap.get(f);dijit.byId(b).store=new dojo.data.ItemFileReadStore({data:{identifier:g.identifier,items:g.items}})}};SRPrefs.populateSRNavPrefs=function(h){if(userPrefsForPage!=undefined){for(i=0;i<userPrefsForPage.length;i++){var l=userPrefsForPage[i];var f=l.name;var g=l.value;var b=dijit.byId(h);if(dijit.byId(h)&&h==f){dijit.byId(f).setValue(g);if(dijit.byId(f).type=="checkbox"){dijit.byId(f).setAttribute("checked",g)}break}}}};SRPrefs.getSRNavRefPrefByRefType=function(b){if(userPrefsForPage!=undefined){for(i=0;i<userPrefsForPage.length;i++){var g=userPrefsForPage[i];var a=g.name;var f=g.value;if(b==CHILD_TYPE_KM&&a=="defaultKMClassification"){return f}if(b==CHILD_TYPE_SR&&a=="defaultSRClassification"){return f}if(b==CHILD_TYPE_BUG&&a=="defaultDefectClassification"){return f}if(b==CHILD_TYPE_SOLUTION_URL&&a=="defaultURLClassification"){return f}if(b=="DEFECT_SOURCE"&&a=="defaultDefectProductLine"){return f}if(b==CHILD_TYPE_ERRMSG&&a=="defaultErrorMsgClassification"){return f}}}return""};SRPrefs.saveSRNavPrefs=function(a){if(a.spSubLoginAliasPrefFS=="DEFAULT"){a.spSubLoginAlias=""}dijit.byId("pleasewait").show();dojo.xhrPost({url:"../../../SRRequest",content:{action:"saveSRNavUserPrefs",json:dojo.toJson(a),page:"SRTechnical"},handleAs:"json",load:function(b){dijit.byId("pleasewait").hide();if(b.opStatus==0){userPrefsForPage=b.userPrefsForPage}},error:function(f){dijit.byId("pleasewait").hide();var b=getDisplayMessageObj("Request to save SR Navigator preferences failed or timed out.",2);displayErrors(b);console.debug("Request to save SR Navigator preferences failed or timed out.",f)}})};SRPrefs.validateSPSubTokens=function(b){var a=true;if(dijit.byId("spSubLoginAliasPrefFS")!=undefined&&dijit.byId("spSubLoginAliasPrefFS")!="CUSTOM"&&dijit.byId("spSubLoginAliasPrefFS")!="DEFAULT"){alert("Option selected is not recognized. Please select from provided options only");a=false}if(dijit.byId("spSubLoginAliasPrefFS")!=undefined&&dijit.byId("spSubLoginAliasPrefFS")=="CUSTOM"&&dojo.trim(dijit.byId("spSubLoginAlias").getValue())==""){alert("Please Enter a Login Alias");a=false}return a};SRPrefs.populateSRNavPrefs.spSubTokens=function(m,l){if(userPrefsForPage!=undefined){for(i=0;i<userPrefsForPage.length;i++){var o=userPrefsForPage[i];var g=o.name;var h=o.value;var f=dijit.byId(m);if(dijit.byId(m)&&m==g){if(h!=undefined&&dojo.string.trim(h)==""){dijit.byId(l).setValue("DEFAULT");var b=window.spSubTokenDefaults.spSubLoginAlias;dijit.byId(m).setValue(b)}else{dijit.byId(l).setValue("CUSTOM");dijit.byId(m).setValue(h)}break}}}};SRPrefs.changeSubToken=function(){var a=this.id;var f=dijit.byId(a).getValue();if(f=="CUSTOM"){if(a=="spSubLoginAliasPrefFS"){dijit.byId("spSubLoginAlias").setAttribute("readOnly",false);dijit.byId("spSubLoginAlias").focus()}}else{if(f=="DEFAULT"){if(a=="spSubLoginAliasPrefFS"){var b=window.spSubTokenDefaults.spSubLoginAlias;dijit.byId("spSubLoginAlias").setValue(b);dijit.byId("spSubLoginAlias").focus();dijit.byId("spSubLoginAlias").setAttribute("readOnly",true);dijit.byId(a).focus()}}}};SRPrefs.hideSRNavPrefsDialog=function(){if(dijit.byId("prefDialog")){dijit.byId("prefDialog").hide()}};function validateSR_FSTask(func){var fsTaskMessageTitle="Cannot create FS Task due to the following. Please update the SR and try again";var retObj={};var message=new Array();if(SRUtils.isNewSR()){var messageArray=new Array();var messageObj={message:"SubStatus is New",messageType:2};messageArray.push(messageObj);retObj.opStatus="1";retObj.opResult=messageArray;retObj.messageTitle=fsTaskMessageTitle;displayErrors(retObj)}else{var url="../../../SRHeaderRequest";var request={action:"validateSR",srId:getActiveSrId(),modId:getSrModId(),queryTabName:getQueryTabName(),activeSR:getSrNumber(),nextOperation:"fstaskOperation"};showPleaseWaitDialog();var xhr=genericTalkToServer(url,request,"json",true,null,"post");xhr.addCallback(function(data,ioArgs){hidePleaseWaitDialog();if(data.opStatus==SUCCESS_STATUS){var fnczion=eval(func);fnczion(CHILD_TYPE_FSTASK)}else{if(data.opResult!=undefined&&data.opResult.length>0){data.messageTitle=fsTaskMessageTitle}displayErrors(data)}});xhr.addErrback(function(data,ioArgs){hidePleaseWaitDialog();displayErrors(data);console.debug("Error encountered in createRuleSetAssociation - "+data.status)})}}function openSolnUrl(a){window.open(a)}(function(){var o=function(w,x){var v=SRMJSTimer.startTimer("refreshSRDetail_processSRReferences_"+getSrNumber());SRReferences.renderAndLoad(x);SRMJSTimer.endTimer(v)},u=function(v){l();h(v)},l=function(){var w=getRefDataNode();w.destroyDescendants();var x=parseInt(dojo.contentBox(dojo.byId("refData")).w)-1;var v='<div class="tundra" dojoType="dijit.layout.AccordionContainer" id="elementsAccordion" style="height:99%;width:'+x+'px;"><div  dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+PARENT_SR+'" id="'+lAccordionPaneIDs[PARENT_SR]+'" title="Parent SR" ></div><div  dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+CHILD_TYPE_CHILDREN_SR+'" id="'+lAccordionPaneIDs[CHILD_TYPE_CHILDREN_SR]+'" title="Child SRs"></div><div dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+CHILD_TYPE_ATTACHMENT+'" id="'+lAccordionPaneIDs[CHILD_TYPE_ATTACHMENT]+'" title="Attachments"></div><div dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+CHILD_TYPE_SR+'" id="'+lAccordionPaneIDs[CHILD_TYPE_SR]+'" title="Related SRs"></div><div  dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+CHILD_TYPE_KM+'" id="'+lAccordionPaneIDs[CHILD_TYPE_KM]+'" title="Related Knowledge"></div><div  dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+CHILD_TYPE_SOLUTION_URL+'" id="'+lAccordionPaneIDs[CHILD_TYPE_SOLUTION_URL]+'" title="Related URLs"></div><div  dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+CHILD_TYPE_BUG+'" id="'+lAccordionPaneIDs[CHILD_TYPE_BUG]+'" title="Defects"></div>'+(isODTechSR()?'<div dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+CHILD_TYPE_RFC+'" id="'+lAccordionPaneIDs[CHILD_TYPE_RFC]+'" title="RFCs"></div>':'<div dojoType="srmdojoc.layout.AccordionPanePlus" style="visibility:hidden;height:0px;" refType="'+CHILD_TYPE_RFC+'" id="'+lAccordionPaneIDs[CHILD_TYPE_RFC]+'" title="RFCs"></div>')+'<div  dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+CHILD_TYPE_ERRMSG+'" id="'+lAccordionPaneIDs[CHILD_TYPE_ERRMSG]+'" title="Error Messages"></div><div dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+CHILD_TYPE_PREDEFECT+'" id="'+lAccordionPaneIDs[CHILD_TYPE_PREDEFECT]+'" title="Predefects"></div><div  dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+CHILD_TYPE_FSTASK+'" id="'+lAccordionPaneIDs[CHILD_TYPE_FSTASK]+'" title="FS Tasks"></div><div  dojoType="srmdojoc.layout.AccordionPanePlus" refType="'+SIMILAR_SR+'" id="'+lAccordionPaneIDs[SIMILAR_SR]+'" title="Similar SRs"></div></div>';w.setContent('<div class="tundra" id="refdatacontainer" style="border:0px solid red;height:100%">'+v+"</div>");console.log("references rendered");console.log(dijit.byId("elementsAccordion"))},b=function(w){var v=dijit.byId(lAccordionPaneIDs[w]);if(v!=null){p({element:w})}},p=function(v){v=v||{renderAll:true};var B=(true===v.renderAll);var y=v.element;console.log(" referenceElement to render: "+y);var C=getRefDataNode();var I=parseInt(dojo.contentBox(dojo.byId("refData")).w)-1;var H=null;var A=0;var w="";if(B||(y==PARENT_SR)){A=0;H=dijit.byId(lAccordionPaneIDs[PARENT_SR]);if(referencesElementsStore[PARENT_SR]&&referencesElementsStore[PARENT_SR]!=null){focusOnTheFirstTabWithContent(PARENT_SR);A=1;w+=decorateElement(referencesElementsStore[PARENT_SR]);H.setContent(w);ellipsis(PARENT_SR);SRReferences.updateReferenceCount(H,A)}else{H.destroy()}}var z=SRUtils.isSREditable();if(B||(y==CHILD_TYPE_CHILDREN_SR)){w="";A=0;H=dijit.byId(lAccordionPaneIDs[CHILD_TYPE_CHILDREN_SR]);if(referencesElementsStore[CHILD_TYPE_CHILDREN_SR]&&referencesElementsStore[CHILD_TYPE_CHILDREN_SR].length>0){focusOnTheFirstTabWithContent(CHILD_TYPE_CHILDREN_SR);A=referencesElementsStore[CHILD_TYPE_CHILDREN_SR].length;for(var x=0;x<referencesElementsStore[CHILD_TYPE_CHILDREN_SR].length;x++){w+=decorateElement(referencesElementsStore[CHILD_TYPE_CHILDREN_SR][x])}H.setContent(w);ellipsis(CHILD_TYPE_CHILDREN_SR);SRReferences.updateReferenceCount(H,A)}else{H.destroy()}}if(B||(y==CHILD_TYPE_BUG)){var w="";if(z){w+=getCreateLinkContent(CHILD_TYPE_BUG)}A=0;H=dijit.byId(lAccordionPaneIDs[CHILD_TYPE_BUG]);if(referencesElementsStore[CHILD_TYPE_BUG]){A=referencesElementsStore[CHILD_TYPE_BUG].length;if(referencesElementsStore[CHILD_TYPE_BUG].length>0){focusOnTheFirstTabWithContent(CHILD_TYPE_BUG)}for(var x=0;x<referencesElementsStore[CHILD_TYPE_BUG].length;x++){w+=decorateElement(referencesElementsStore[CHILD_TYPE_BUG][x])}H.setContent(w)}SRReferences.updateReferenceCount(H,A)}if(B||(y==CHILD_TYPE_PREDEFECT)){w="";if(headerDataAsJson.Status==dojo.string.trim("Open")&&headerDataAsJson.SubType!=dojo.string.trim("Security Group")){w+=getPredefectLink(CHILD_TYPE_PREDEFECT)}else{w+="\n"}A=0;H=dijit.byId(lAccordionPaneIDs[CHILD_TYPE_PREDEFECT]);if(referencesElementsStore[CHILD_TYPE_PREDEFECT]){A=referencesElementsStore[CHILD_TYPE_PREDEFECT].length;if(referencesElementsStore[CHILD_TYPE_PREDEFECT].length>0){focusOnTheFirstTabWithContent(CHILD_TYPE_PREDEFECT)}for(var x=0;x<referencesElementsStore[CHILD_TYPE_PREDEFECT].length;x++){w+=decorateElement(referencesElementsStore[CHILD_TYPE_PREDEFECT][x])}H.setContent(w)}SRReferences.updateReferenceCount(H,A)}if(B||(y==CHILD_TYPE_ATTACHMENT)){w="";if(referencesElementsStore[CHILD_TYPE_ATTACHMENT]){H=dijit.byId(lAccordionPaneIDs[CHILD_TYPE_ATTACHMENT]);SRReferences.updateReferenceCount(H,referencesElementsStore[CHILD_TYPE_ATTACHMENT].length);if(referencesElementsStore[CHILD_TYPE_ATTACHMENT].length==0&&(!SRUtils.isSRClosed())){w+='<div style="background-color:#AFC7C7;text-align:left;" class="box" hasShadow="true" id="upload_viewcontents">';w+='<img src="../images/add.gif" onClick="uploadFile()"></img></div>'}if(referencesElementsStore[CHILD_TYPE_ATTACHMENT].length>0){focusOnTheFirstTabWithContent(CHILD_TYPE_ATTACHMENT);w+='<div style="background-color:#AFC7C7;text-align:left;" class="box" hasShadow="true" id="upload_viewcontents">';if(!(SRUtils.isSRClosed())){w+='<img src="../images/add.gif" title="File Upload" style="padding-right:5px;margin-right:5px;" onClick="uploadFile()"></img>'}w+='<button class="negative" style="vertical-align:top;" dojoType="dijit.form.Button" id="issviewrbtn" onClick="displayAttachment()" alt="View Files in ISS Viewer">ISS Viewer</button></div>';var G="";var E="../../../SRAttachmentsRequest?type=fetchattachmentssortbyorder&"+buildThisSRDetailsURL();dojo.xhrPost({url:E,handleAs:"json",load:function(L,K){G=L.items[0].sortByString;if(G!=null&&G!="exception"){if(G=="filenameasc"){attachmentComparatorKey="name";attachmentComparatorOrder="ASC"}else{if(G=="filenamedsc"){attachmentComparatorKey="name";attachmentComparatorOrder="DESC"}else{if(G=="uploaddateasc"){attachmentComparatorKey="date";attachmentComparatorOrder="ASC"}else{if(G=="uploaddatedsc"){attachmentComparatorKey="date";attachmentComparatorOrder="DESC"}}}}}else{attachmentComparatorKey="date";attachmentComparatorOrder="DESC"}w+='<select dojoType="dijit.form.FilteringSelect" id="attachmentsOrderBy" onChange="reorderAttachmentsInReferecePane();">';if(G=="filenameasc"){w+='<option value="NAME_ASC" selected=true>Order by Name ASC</option>'}else{w+='<option value="NAME_ASC">Order by Name ASC</option>'}if(G=="filenamedsc"){w+='<option value="NAME_DESC" selected=true>Order by Name DESC</option>'}else{w+='<option value="NAME_DESC">Order by Name DESC</option>'}if(G=="uploaddateasc"){w+='<option value="DATE_ASC" selected=true>Order by Date ASC</option>'}else{w+='<option value="DATE_ASC">Order by Date ASC</option>'}if(G=="uploaddatedsc"){w+='<option value="DATE_DESC" selected=true>Order by Date DESC</option>'}else{w+='<option value="DATE_DESC">Order by Date DESC</option>'}w+="</select>";w+='<div id="SRAttachmentsArea">';referencesElementsStore[CHILD_TYPE_ATTACHMENT].sort(attachmentOrderComparator);for(var J=0;J<referencesElementsStore[CHILD_TYPE_ATTACHMENT].length;J++){w+=decorateElement(referencesElementsStore[CHILD_TYPE_ATTACHMENT][J])}w+="</div>";H.setContent(w)}})}else{H.setContent(w)}}else{dijit.byId(lAccordionPaneIDs[CHILD_TYPE_ATTACHMENT]).destroy()}}if(B||(y==CHILD_TYPE_SR)){w="";if(z){w+=getCreateLinkContent(CHILD_TYPE_SR)}A=0;H=dijit.byId(lAccordionPaneIDs[CHILD_TYPE_SR]);if(referencesElementsStore[CHILD_TYPE_SR]){A=referencesElementsStore[CHILD_TYPE_SR].length;if(referencesElementsStore[CHILD_TYPE_SR].length>0){focusOnTheFirstTabWithContent(CHILD_TYPE_SR)}for(var x=0;x<referencesElementsStore[CHILD_TYPE_SR].length;x++){w+=decorateElement(referencesElementsStore[CHILD_TYPE_SR][x])}}H.setContent(w);SRReferences.updateReferenceCount(H,A)}if(B||(y==CHILD_TYPE_KM)){w="";if(z){w+=getCreateLinkContent(CHILD_TYPE_KM)}A=0;H=dijit.byId(lAccordionPaneIDs[CHILD_TYPE_KM]);if(referencesElementsStore[CHILD_TYPE_KM]){A=referencesElementsStore[CHILD_TYPE_KM].length;if(referencesElementsStore[CHILD_TYPE_KM].length>0){focusOnTheFirstTabWithContent(CHILD_TYPE_KM)}for(var x=0;x<referencesElementsStore[CHILD_TYPE_KM].length;x++){w+=decorateElement(referencesElementsStore[CHILD_TYPE_KM][x])}H.setContent(w)}SRReferences.updateReferenceCount(H,A)}if(B||(y==CHILD_TYPE_SOLUTION_URL)){w="";if(z){w+=getCreateLinkContent(CHILD_TYPE_SOLUTION_URL)}A=0;H=dijit.byId(lAccordionPaneIDs[CHILD_TYPE_SOLUTION_URL]);if(referencesElementsStore[CHILD_TYPE_SOLUTION_URL]){A=referencesElementsStore[CHILD_TYPE_SOLUTION_URL].length;if(referencesElementsStore[CHILD_TYPE_SOLUTION_URL].length>0){focusOnTheFirstTabWithContent(CHILD_TYPE_SOLUTION_URL)}for(var x=0;x<referencesElementsStore[CHILD_TYPE_SOLUTION_URL].length;x++){w+=decorateElement(referencesElementsStore[CHILD_TYPE_SOLUTION_URL][x])}H.setContent(w)}SRReferences.updateReferenceCount(H,A)}if(B||(y==CHILD_TYPE_RFC)){w="";if(z){if(isVisibleForUser(RFC_UPDATE_PRIV)){w+=getCreateLinkContent(CHILD_TYPE_RFC)}}A=0;H=dijit.byId(lAccordionPaneIDs[CHILD_TYPE_RFC]);if(referencesElementsStore[CHILD_TYPE_RFC]){A=referencesElementsStore[CHILD_TYPE_RFC].length;if(referencesElementsStore[CHILD_TYPE_RFC].length>0){focusOnTheFirstTabWithContent(CHILD_TYPE_RFC);w+='<select dojoType="dijit.form.FilteringSelect" id="rfcOrderBy" onChange="reorderRfcInReferecePane();">';w+='<option value="STATUS_ASC">Order by Status ASC</option>';w+='<option value="STATUS_DESC">Order by Status DESC</option>';w+='<option value="CREATED_ASC">Order by Created ASC</option>';w+='<option value="CREATED_DESC" selected=true>Order by Created DESC</option>';w+='<option value="UPDATED_ASC">Order by Updated ASC</option>';w+='<option value="UPDATED_DESC">Order by Updated DESC</option>';w+="</select>";rfcComparatorKey="date_created";rfcComparatorOrder="desc";referencesElementsStore[CHILD_TYPE_RFC].sort(rfcOrderComparator);w+='<div id="rfcArea">';for(var x=0;x<referencesElementsStore[CHILD_TYPE_RFC].length;x++){w+=decorateElement(referencesElementsStore[CHILD_TYPE_RFC][x])}w+="</div>"}H.setContent(w)}SRReferences.updateReferenceCount(H,A)}if(B||(y==CHILD_TYPE_ERRMSG)){w="";if(z){w+=getCreateLinkContent(CHILD_TYPE_ERRMSG)}A=0;H=dijit.byId(lAccordionPaneIDs[CHILD_TYPE_ERRMSG]);if(referencesElementsStore[CHILD_TYPE_ERRMSG]){A=referencesElementsStore[CHILD_TYPE_ERRMSG].length;if(referencesElementsStore[CHILD_TYPE_ERRMSG].length>0){focusOnTheFirstTabWithContent(CHILD_TYPE_ERRMSG)}for(var x=0;x<referencesElementsStore[CHILD_TYPE_ERRMSG].length;x++){w+=decorateElement(referencesElementsStore[CHILD_TYPE_ERRMSG][x])}H.setContent(w)}SRReferences.updateReferenceCount(H,A)}if(referencesElementsStore[CHILD_TYPE_FSTASK]){calcFSTaskAccordion()}if(B||(y==CHILD_TYPE_ADR_PACKAGES)){dijit.byId(lAccordionPaneIDs[CHILD_TYPE_ADR_PACKAGES]).destroy()}if(B||(y==SIMILAR_SR)){w="";A=0;H=dijit.byId(lAccordionPaneIDs[SIMILAR_SR]);var D=(referencesElementsStore[SIMILAR_SR]);if(referencesElementsStore[SIMILAR_SR]){A=referencesElementsStore[SIMILAR_SR].length;if(A>SIMILAR_SR_MAX_DISPLAY_NUMBER){w+=getCreateLinkContent(SIMILAR_SR)}if(referencesElementsStore[SIMILAR_SR].length>0){focusOnTheFirstTabWithContent(SIMILAR_SR);for(var x=0;x<referencesElementsStore[SIMILAR_SR].length;x++){if(x>=SIMILAR_SR_MAX_DISPLAY_NUMBER){A=SIMILAR_SR_MAX_DISPLAY_NUMBER+"/"+A;break}w+=decorateSimilarSrElement(referencesElementsStore[SIMILAR_SR][x])}H.setContent(w)}}SRReferences.updateReferenceCount(H,A)}dijit.byId("elementsAccordion").layout();var F=C.domNode.style.height;isReferencePaneUpdate=false;dijit.byId("elementsAccordion").layout()},q=[PARENT_SR,CHILD_TYPE_SR,CHILD_TYPE_BUG,CHILD_TYPE_KM,CHILD_TYPE_SOLUTION_URL,CHILD_TYPE_ATTACHMENT,CHILD_TYPE_ERRMSG,CHILD_TYPE_CHILDREN_SR,CHILD_TYPE_RFC,CHILD_TYPE_FSTASK,CHILD_TYPE_PREDEFECT,SIMILAR_SR],h=function(x){var z=false;var D;var C=new Array();if(x!=undefined){var B=x.indexOf("?");if(B!=-1&&x.length>B){x=unescape(x.substring((B+1)))}var v=x.split("&");for(y=0;y<v.length;y++){var A=v[y].split("=");if(A[0]=="refresh"){z=A[1]}if(A[0]=="refType"){D=A[1]}}}if(D!=undefined&&D!=null&&D!=""&&D!="null"){C.push(D)}else{C=q}for(var y=0;y<C.length;y++){if(window.refreshSRInProgress==true){break}var w=w||{};w.referenceType=C[y];w.refresh=z;if(w.referenceType!=SIMILAR_SR){s(w)}else{m()}}},m=function(){var v=getEvalFieldVal("product","ProductId");var w=getEvalFieldVal("languageDescription","Language");if(isProductAndLanguageSupportedInSimilarSR(v,w)){retrieveSimilarSrs()}else{var x=dijit.byId(lAccordionPaneIDs[SIMILAR_SR]);x.destroyRecursive()}},a=function(A){A=A||{};if(A.referenceType==undefined||A.referenceType==""){return}var w=A.referenceType;var v=A.isLoading||false;var z=A.isError||false;var y=A.message||"";var x=dijit.byId(lAccordionPaneIDs[w]);if(x!=undefined&&x!=null&&v==true){SRReferences.updateReferenceCount(x,"");x.setLoadingAnimationOn()}if(x!=undefined&&x!=null&&v==false&&z==true){x.setLoadingAnimationOff();x.updateRowCountTooltip(y);SRReferences.updateReferenceCount(x,"Error")}if(x!=undefined&&x!=null&&v==false&&z==false){x.setLoadingAnimationOff();x.updateRowCountTooltip(x.title)}},s=function(y){y=y||{};if(y.referenceType==undefined||y.referenceType==""){return}var w=SRMJSTimer.startTimer("refreshSRDetail_loadAndRenderByReferenceType_"+y.referenceType+"_"+getSrNumber());var v=dijit.byId(lAccordionPaneIDs[y.referenceType]);var z={};z.isLoading=true;z.isError=false;z.referenceType=y.referenceType;a(z);var x={url:"../../../SRRequest",preventCache:true,content:{action:"action_reference_only",refreshSR:y.refresh,srId:getActiveSrId(),activeSR:getSrNumber(),modId:getSrModId(),queryTabName:getQueryTabName(),referenceType:y.referenceType,preventCache:true},handleAs:"json",load:function(C,B){if(window.refreshSRInProgress==true){return C}var I={};I.referenceType=B.args.content.referenceType;I.isLoading=false;if(C.error!=undefined||(C.opStatus!=undefined&&C.opStatus==1)){I.isError=true;var H=dijit.byId(lAccordionPaneIDs[I.referenceType]);var F=(C.error!=undefined)?C.error.opResult:C.opResult;I.message=(F!=undefined&&F.length>0&&F[0].message!=undefined)?F[0].message:"Failed to retrieve "+H.title+" in the reference panel.";a(I);return}else{I.isError=false;I.message="";a(I)}var D=getSrNumber();if(D==C.srNumber){referencesElementsStore=referencesElementsStore||{};var E=C.referencesElements;if(E!=undefined){for(var G in E){if(G=="srInfo"){continue}referencesElementsStore[G]=E[G];b(G)}}}else{var A="Got data for different sr; active sr "+D+", expecting "+C.srNumber;I.isError=true;I.message=A;a(I)}applyContextMenuAction();applyRefDetailContextMenu();SRMJSTimer.endTimer(w)},error:function(C,B){SRMJSTimer.endTimer(w);var D={};D.referenceType=B.args.content.referenceType;var A=dijit.byId(lAccordionPaneIDs[D.referenceType]);D.isLoading=false;D.isError=true;D.message="Failed to retrieve "+A.title+"  in the reference panel. Operation failed or timed out.";a(D);console.error("Failed to retrieve "+D.referenceType+" in the reference panel")}};dojo.xhrPost(x)},g=function(v,w){v.setRowCount(w)},f=function(w,v){v=(v==undefined)?null:v;w=(w==undefined)?false:w;if(v==CHILD_TYPE_FSTASK&&isFSCapable()&&getFSShadowSR()==null){refreshFSTask()}else{h("?refresh="+w+"&refType="+v)}};window.SRReferences={renderAndLoad:u,updateReferenceCount:g,processSRReferences:o,refreshReference:f,toggleLoadingRefType:a,renderReferenceByType:b}}());function addTagButton(){var b="Tag";var g="Manage Tags";var h="tagBtn";if(dijit.byId(h)){dojo.style(dijit.byId(h).domNode,"display","");if(dijit.byId(h).label!=b){dijit.byId(h).destroyRecursive()}else{return}}if(dijit.byId("srHeader")){var a;var f={showLabel:true,label:b,onClick:function(){DashboardTagging.openTagDialog(getSrNumber(),"SR",loggedInUser,headerDataAsJson.Summary)},title:g,style:"vertical-align:middle",name:h,id:h};a=new srmdojoc.layout.CustomButton(f);a.startup();if(a!=undefined){dijit.byId("srHeader").expansionNode.appendChild(a.domNode);dojo.style(dijit.byId("srHeader").expansionNode,{display:"","vertical-align":"top"})}}}function addMoreInfo(a){var b="";if(a.childType===CHILD_TYPE_RFC&&isVisibleForUser(RFC_UPDATE_PRIV)){if(a.status!=undefined&&a.status!=""&&a.status!=null){b+=", Status: "+a.status}if(a.date_created!=undefined&&a.date_created!=""&&a.date_created!=null){b+=", Created: "+a.date_created}if(a.date_updated!=undefined&&a.date_updated!=""&&a.date_updated!=null){b+=", Updated: "+a.date_updated}}return b}function limitText(f,a){console.debug("limitText("+f+", "+a+")");var b=dijit.byId(f);if(b!=undefined&&b!=null){dojo.connect(b.domNode,"onfocus",function(g){console.debug("limit() :onfocus");limitIfmaxLength(b,a)});dojo.connect(b.domNode,"onkeydown",function(g){console.debug("limit() :onkeydown");var h=g.keyCode;if(h<32||(h>=33&&h<=46)||(h>=112&&h<=123)){console.debug("(keycode: "+h+")")}else{limitIfmaxLength(b,a)}});dojo.connect(b.domNode,"onkeyup",function(g){console.debug("limit() :onkeyup");var h=g.keyCode;if(h<32||(h>=33&&h<=46)||(h>=112&&h<=123)){console.debug("(keycode: "+h+")")}else{limitIfmaxLength(b,a)}})}}function limitIfmaxLength(h,a){if(h==undefined||isNaN(a)){return}var f=a;var b=h.id;var g=(dijit.byId(b))?dijit.byId(b).getValue():h.value;if(g!=undefined&&g.length>=f){if(dijit.byId(b)){dijit.byId(b).setValue(g.substring(0,f));console.debug(b+"(trimmed to =>"+dijit.byId(b).getValue().length+"chars) ")}}dijit.byId(b).domNode.scrollTop=dijit.byId(b).domNode.scrollHeight-dijit.byId(b).domNode.offsetHeight}function getCaretPosition(b){var f=0;if(document.selection){b.focus();var a=document.selection.createRange();a.moveStart("character",-b.value.length);f=a.text.length}else{if(b.selectionStart||b.selectionStart=="0"){f=b.selectionStart}}console.debug("getCaretPosition: "+f);return(f)}function setCaretPosition(b,f){console.debug("setCaretPosition: "+f);if(b.setSelectionRange){b.setSelectionRange(f,f);b.focus()}else{if(b.createTextRange){var a=b.createTextRange();a.collapse(true);a.moveEnd("character",f);a.moveStart("character",f);a.select()}}}var globalOpenSRContextMenu=undefined;function createOpenSRContextMenu(){var a=new dijit.Menu({});a.addChild(new dijit.MenuItem({label:"Open Link in Same Tab/Window",onClick:function(b){SRQueue.put(this.getParent().srNumber,false)}}));a.addChild(new dijit.MenuItem({label:"Open Link in New Tab/Window",onClick:function(b){SRQueue.put(this.getParent().srNumber,true)}}));a.startup();return a}function openSRContextMenu(b,f){var a;if(!b){var b=window.event}if(b.target){a=b.target}else{if(b.srcElement){a=b.srcElement}}if(a.nodeType==3){a=a.parentNode}if(globalOpenSRContextMenu==undefined){globalOpenSRContextMenu=createOpenSRContextMenu()}globalOpenSRContextMenu.srNumber=f;globalOpenSRContextMenu._openMyself(b)}function openUnset24x7ReasonCodeDialog(){SR_CWW_Util.promptUnset24x7ReasonCode()}function openSRMContextURL(b,f){var g=null;if(f=="srNumber"){g=getSrNumber()}if(!isEmptyVal(g)){var a=evaluateSRMContextTextURL(vlinkHrefMap,b,g);window.open(a)}}function hideDisplayByNodeName(b,a){if(a!=undefined&&(a==true||a=="true")){dojo.style(b,"display","")}else{dojo.style(b,"display","none")}}var OSN={};OSN.events={LOAD:"LOAD",OPEN:"OPEN",CREATE:"CREATE_CONVERSATION"};OSN.servlet="/oip/faces/SRBridgeToOSN";OSN.enabledIcon="../images/osn_join_conversation_enabled.png";OSN.disabledIcon="../images/osn_join_conversation_disabled.png";OSN.init=function(a){OrionParameters.getParameter("OSN_SRCollaboration_Enabled",true,function(){var b=dijit.byId("dData").osnImgNode;if("true"==OrionParameters.values.OSN_SRCollaboration_Enabled){dojo.style(b,{display:""});OSN.sendEvent(OSN.events.LOAD)}else{dojo.style(b,{display:"none"})}})};OSN.sendEvent=function(a){if(OSN.events.CREATE===a){dijit.byId("pleasewait").show()}dojo.xhrPost({url:OSN.servlet,preventCache:true,content:{action:a,srNavigatorURL:window.location.href,queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()},handleAs:"json",load:function(f,b){dijit.byId("pleasewait").hide();if(isObjectErroneous(f)){if(f.currentEvent==OSN.events.LOAD){OSN.renderButton(null,f)}else{displayErrors(f)}}else{if(f.currentEvent){if(OSN.events.CREATE===a&&f.error===true){alert(f.errorMessage);return}if(f.error===true){OSN.renderButton(null,f);return}if(f.currentEvent==OSN.events.LOAD){if(f.conversationCreated===true){OSN.renderButton(OSN.events.OPEN,f)}else{OSN.renderButton(OSN.events.CREATE,f)}}else{if(f.currentEvent==OSN.events.CREATE){if(f.conversationCreated===true){OSN.renderButton(OSN.events.OPEN,f);window.open(f.conversationUrl)}}else{}}}}},error:function(g,f){dijit.byId("pleasewait").hide();var b=getDisplayMessageObj("Failed to communicate with OSN.",2);displayErrors(b)}})};OSN.renderButton=function(a,f){var b=dijit.byId("dData").osnImgNode;if(a===OSN.events.OPEN){if(f.conversationAccessible===false){b.src=OSN.disabledIcon;b.title="You do not have access to this conversation";b.onclick=OSN.doNothing;return}else{b.src=OSN.enabledIcon;if(SRUtils.isSRClosed()){b.title="View the conversation on this Service Request "}else{b.title="Join the conversation on this Service Request"}b.onclick=function(){OSN.sendEvent(OSN.events.OPEN);window.open(f.conversationUrl)}}}else{if(a===OSN.events.CREATE){if(SRUtils.isSRClosed()){b.src=OSN.disabledIcon;b.title="You can not start a conversation on a closed Service Request";b.onclick=OSN.doNothing}else{b.src=OSN.enabledIcon;b.title="Start a conversation around this Service Request";b.onclick=function(){OSN.sendEvent(OSN.events.CREATE)}}}else{if(a===null){b.title=f.errorMessage||"An error occured while querying OSN.";b.onclick=OSN.doNothing}}}};OSN.showOSNIframe=function(){var b=getPageSytemParamValue(SRM_OSN_IFRAME_ENABLED);if(!b||getSRData()==null||getSRData()==undefined||getSRData().srNumber==undefined||SRUtils.isSRClosed()){dijit.byId("dData").osnFrameNode.innerHTML="";dijit.byId("dData").osnFrameRefreshButtonNode.innerHTML=""}else{var a=OSN.getOSNIframeUrl();if(a!=undefined){if(dojo.byId("osniframe")==undefined){dijit.byId("dData").osnFrameNode.innerHTML="";dijit.byId("dData").osnFrameNode.innerHTML="<iframe scrolling='no' frameborder='0'  id='osniframe' style='width:450px; height:16px; border: 0px;overflow:hidden;'  src='"+a+"' onfocus='document.body.focus();'>"}else{OSN.frameReload(a)}OSN.buildOSNIframeRefreshButton(a)}}};OSN.buildOSNIframeRefreshButton=function(b){dijit.byId("dData").osnFrameRefreshButtonNode.innerHTML="";var a=SRUtils.getCurrentSR()["Owner"];if(window.loggedInUser!=undefined&&a!=undefined&&window.loggedInUser.toUpperCase()==a){dijit.byId("dData").osnFrameRefreshButtonNode.innerHTML='<img id="osnFrameRefreshButtonId"  title="Refresh Customer Presence"  width="16" height="16"   onmouseover="this.style.border=\'1px solid #585858\';"   onmouseout="this.style.border=\'1px solid transparent\';" style="" onclick="OSN.frameReload(\''+b+'\')" src="../images/refresh_enabled.gif" align="right"></img>'}};OSN.frameReload=function(a){if(dojo.byId("osniframe")!=undefined){dojo.byId("osniframe").src=a}};OSN.getOSNIframeUrl=function(){var a=getPageSytemParamValue(SRM_OSN_IFRAME_URL);if(a!=undefined){a=a.replace("<sessionId>",sessionId==undefined?"":encodeURIComponent(sessionId));a=a.replace("<user>",loggedInUser==undefined?"":encodeURIComponent(window.loggedInUser));a=a.replace("<srNumber>",encodeURIComponent(getSRData().srNumber));a=a.replace("<Summary>",headerDataAsJson.Summary==undefined?"":fixedEncodeURIComponent(headerDataAsJson.Summary));a=a.replace("<Owner>",headerDataAsJson.Owner==undefined?"":encodeURIComponent(headerDataAsJson.Owner));a=a.replace("<ContactEmail>",headerDataAsJson.ContactEmail==undefined?"":encodeURIComponent(headerDataAsJson.ContactEmail));a=a.replace("<secureSr>",headerDataAsJson.secureSr==undefined?"":encodeURIComponent(headerDataAsJson.secureSr));a=a.replace("<Status>",headerDataAsJson.Status==undefined?"":encodeURIComponent(headerDataAsJson.Status));a=a.replace("<AltContactEmail>",headerDataAsJson.AltContactEmail==undefined?"":encodeURIComponent(headerDataAsJson.AltContactEmail));a=a.replace("<srRowId>",headerDataAsJson.SRId==undefined?"":encodeURIComponent(headerDataAsJson.SRId))}return a};OSN.checkOSNIframeLoaded=function(){if(dojo.byId("osniframe")){var a=(dojo.byId("osniframe").contentWindow||dojo.byId("osniframe").contentDocument);if(a!=undefined){return true}}return false};OSN.doNothing=function(){};function forceRemoveFromActiveSRList(){SRUtils.unmarkChanges("srHeader");hideMaximizedSRHeader();removeActiveSR("activeSrList")}function startChat(){window.location.replace("xmpp:"+headerDataAsJson.Owner)}function remoteAccess(){var f=getEvalFieldVal("configuration");var l=getEvalFieldVal("hostId");var b=getEvalFieldVal("serialNum");var o=getEvalFieldVal("serialNumAssetNumber");var m="";var g="";var p="";var a="";if(f){a="ccrId="+f;m=(m=="")?a:"&"+a}else{if(l){a=(f)?"ccrId="+f:"ccrId="+l;m=(m=="")?a:"&"+a}}if(b){g="serialNo="+b;m+=(m=="")?g:"&"+g}if(o){p="&instanceId="+o;m+=p}var h=new Map();h.put("PARAMS",m);invokeURLwithMultiParam("ADVANCED_CUSTOMER_SUPPORT_URL",h)}function remoteAccessCheck(){var a=getEvalFieldVal("configLevel");var b=getEvalFieldVal("HWMC");var m=getEvalFieldVal("configuration");var l=getEvalFieldVal("hostId");var h=getEvalFieldVal("serialNum");var g=getEvalFieldVal("serialNumAssetNumber");var f=(getEvalFieldVal("srType")=="Technical")?true:false;if(f&&((a.substr(0,8)=="Platinum")||b)&&(m||l||h)){if(dijit.byId("remoteAccessMI")!=undefined){dijit.byId("remoteAccessMI").setDisabled(false)}}else{if(dijit.byId("remoteAccessMI")!=undefined){dijit.byId("remoteAccessMI").setDisabled(true)}}}function retrieveSimilarSrs(){var a="../../../SRRequest";var b={action:"action_similar_srs",activeSR:getSrNumber()};var g={};g.isLoading=true;g.isError=false;g.referenceType=SIMILAR_SR;g.message="";SRReferences.toggleLoadingRefType(g);var f=genericTalkToServer(a,b,"json",true,null,"get");f.addCallback(function(l,h){hidePleaseWaitDialog();if(isObjectErroneous(l)){throw"errorInFetchingsimilarsr"}else{console.log("Success in fetching similar SRs");var m={};m.referenceType=SIMILAR_SR;m.isLoading=false;m.isError=false;m.message="";SRReferences.toggleLoadingRefType(m);if(l!=undefined&&l.similarContentList!=undefined){referencesElementsStore[SIMILAR_SR]=l.similarContentList;SRReferences.renderReferenceByType(SIMILAR_SR)}}});f.addErrback(function(m,l){hidePleaseWaitDialog();console.log("Warning: Problem encountered fetching similar SR list, timed out");var o={};o.referenceType=SIMILAR_SR;var h=dijit.byId(lAccordionPaneIDs[o.referenceType]);o.isLoading=false;o.isError=true;o.message="Failed to retrieve "+h.title+"  in the reference panel. Operation failed or timed out.";SRReferences.toggleLoadingRefType(o);console.error("Failed to retrieve "+o.referenceType+" in the reference panel")})}function retrieveSimilarSrsUsingJSONP(){var f=undefined;if(getLinkHrefMap().get("SIMILAR_SR_WS_URL")!=undefined&&getLinkHrefMap().get("SIMILAR_SR_WS_URL").href!=undefined){f=getLinkHrefMap().get("SIMILAR_SR_WS_URL").href}else{return}SIMILAR_SR_MAX_DISPLAY_NUMBER=getPageSytemParamValue("SRM_SIMILAR_SR_MAX_DISPLAY_NUMBER");var g=f.replace("%%SRNUMBER%%",getSrNumber());var a=dijit.byId(lAccordionPaneIDs[SIMILAR_SR]);var h={};h.isLoading=true;h.isError=false;h.referenceType=SIMILAR_SR;SRReferences.toggleLoadingRefType(h);var b={url:g,callbackParamName:"callback",preventCache:true,timeout:120000,load:function(l){console.log("Success in fetching similar SRs");var m={};m.referenceType=SIMILAR_SR;m.isLoading=false;m.isError=false;m.message="";SRReferences.toggleLoadingRefType(m);if(l!=undefined&&l.similarContentList!=undefined){referencesElementsStore[SIMILAR_SR]=l.similarContentList;SRReferences.renderReferenceByType(SIMILAR_SR)}},error:function(m){console.log("Warning: Problem encountered fetching similar SR list, timed out");var o={};o.referenceType=SIMILAR_SR;var l=dijit.byId(lAccordionPaneIDs[o.referenceType]);o.isLoading=false;o.isError=true;o.message="Failed to retrieve "+l.title+"  in the reference panel. Operation failed or timed out.";SRReferences.toggleLoadingRefType(o);console.error("Failed to retrieve "+o.referenceType+" in the reference panel")}};dojo.io.script.get(b)}function manageSimilarSrSection(g,h,f){try{if(h==true){return}var a=getEvalFieldVal("product","ProductId");var l=getEvalFieldVal("languageDescription","Language");if(isProductAndLanguageSupportedInSimilarSR(a,l)==true){SRReferences.processSRReferences();return}if(isProductAndLanguageSupportedInSimilarSR(a,l)==false&&dijit.byId(lAccordionPaneIDs[SIMILAR_SR])!=undefined){SRReferences.processSRReferences();return}}catch(b){console.log("problem in manageSimilarSrSection "+b)}}function reorderRfcInReferecePane(){var b=dijit.byId("rfcOrderBy").getValue();var g=b.split("_");if(g.length==2){if(g[0]==="STATUS"){rfcComparatorKey="status"}else{if(g[0]==="CREATED"){rfcComparatorKey="date_created"}else{if(g[0]==="UPDATED"){rfcComparatorKey="date_updated"}}}if(g[1]==="ASC"){rfcComparatorOrder="asc"}else{if(g[1]==="DESC"){rfcComparatorOrder="desc"}}referencesElementsStore[CHILD_TYPE_RFC].sort(rfcOrderComparator);var a="";for(var f=0;f<referencesElementsStore[CHILD_TYPE_RFC].length;f++){a+=decorateElement(referencesElementsStore[CHILD_TYPE_RFC][f])}dojo.byId("rfcArea").innerHTML=a}}var rfcComparatorKey="date_created";var rfcComparatorOrder="DESC";function rfcOrderComparator(h,f){var l=0;try{if(rfcComparatorKey==="status"){if(rfcComparatorOrder==="asc"){l=(h.status.toLowerCase()>f.status.toLowerCase())?1:((h.status.toLowerCase()<f.status.toLowerCase())?-1:0)}else{if(rfcComparatorOrder==="desc"){l=(h.status.toLowerCase()>f.status.toLowerCase())?-1:((h.status.toLowerCase()<f.status.toLowerCase())?1:0)}}}else{if((rfcComparatorKey==="date_created")&&((h.date_created_JS!=undefined)&&(h.date_created_JS!=null)&&(h.date_created_JS!=""))&&((f.date_created_JS!=undefined)&&(f.date_created_JS!=null)&&(f.date_created_JS!=""))){var g=new Date(h.date_created_JS);var p=new Date(f.date_created_JS);if(rfcComparatorOrder==="asc"){l=(g>p)?1:((g<p)?-1:0)}else{if(rfcComparatorOrder==="desc"){l=(g>p)?-1:((g<p)?1:0)}}}else{if((rfcComparatorKey==="date_updated")&&((h.date_updated_JS!=undefined)&&(h.date_updated_JS!=null)&&(h.date_updated_JS!=""))&&((f.date_updated_JS!=undefined)&&(f.date_updated_JS!=null)&&(f.date_updated_JS!=""))){var m=new Date(h.date_updated_JS);var q=new Date(f.date_updated_JS);if(rfcComparatorOrder==="asc"){l=(m>q)?1:((m<q)?-1:0)}else{if(rfcComparatorOrder==="desc"){l=(m>q)?-1:((m<q)?1:0)}}}}}}catch(o){console.debug(o);l=0}return l}function autoAssociateSimilarSRToRelatedSR(f,b){dijit.byId("pleasewait").show();var a="../../../SRHeaderRequest";var g={action:"create_sr_reference_link",referenceType:CHILD_TYPE_SR,referenceLink:f,classification:b,queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()};var h=genericTalkToServer(a,g,"json",true,null,"get");h.addCallback(function(m,l){hidePleaseWaitDialog();if(isObjectErroneous(m)){displayErrors(m)}else{SRReferences.refreshReference(true,CHILD_TYPE_SR);setTimeout(function(){SRReferences.refreshReference(true,SIMILAR_SR)},500);referencePaneGroupFocus=CHILD_TYPE_SR;refreshLastUsedReferencePaneArea();if(m.srData!=undefined){setHeaderJSONFromResponse(m.srData);refreshAfterSROp(m.srData,true,false,false,false)}}});h.addErrback(function(m,l){hidePleaseWaitDialog();displayErrors(m);console.error("Failed to auto associate a Similar SR into a Related SR")})}function callPoirot(){if(!isEmptyVal(srNumber)){var a=evaluateSRMContextTextURL(vlinkHrefMap,"Poirot",getSrNumber());window.open(a)}}function loadSimilarSRProductAndLang(){var a=getPageSytemParamValue("SRM_SIMILAR_SR_PRODUCT_ID");if(a!=undefined&&a!=null&&dojo.string.trim(a)!=""){similarSR_supportedProductsArray=a.split(",")}similarSR_supportedProductsArray=dojo.map(similarSR_supportedProductsArray,function(f){return dojo.string.trim(f)});var b=getPageSytemParamValue("SRM_SIMILAR_SR_LANGUAGE");if(b!=undefined&&b!=null&&dojo.string.trim(b)!=""){similarSR_supportedLangArray=b.split(",")}similarSR_supportedLangArray=dojo.map(similarSR_supportedLangArray,function(f){return dojo.string.trim(f)});console.log("the value of  similarSR_supportedProductsArray : "+similarSR_supportedProductsArray);console.log("the value of  similarSR_supportedLangArray : "+similarSR_supportedLangArray);return}function isProductAndLanguageSupportedInSimilarSR(b,f){if(b==undefined||dojo.string.trim(b)==""||f==undefined||dojo.string.trim(f)==""){return false}var a=false;if((dojo.indexOf(similarSR_supportedProductsArray,b)>=0||dojo.indexOf(similarSR_supportedProductsArray,"ALL")>=0)&&(dojo.indexOf(similarSR_supportedLangArray,f)>=0||dojo.indexOf(similarSR_supportedLangArray,"ALL")>=0)){a=true}return a}function resizeSRNavPage(){if(!(dojo.isIE<7)){if(dijit.byId("srHeader")){dijit.byId("srHeader").resize()}}if(dijit.byId("mainTabContainer")){dijit.byId("mainTabContainer").resize()}if(dijit.byId("elementsAccordion")){var b=parseInt(dojo.contentBox(dojo.byId("refData")).w)-1;dijit.byId("elementsAccordion").resize({w:b})}if(dijit.byId("actionData")){var b=parseInt(dojo.contentBox(dojo.byId("bc1")).w);if(dijit.byId("elementsAccordion")!=undefined){var g=b*0.17;dijit.byId("elementsAccordion").resize({w:g})}var f=dojo.query(".activitydivClass");dojo.forEach(f,function(m){var o=m.id;if(o!=""&&dijit.byId(o)){var p=o.indexOf("div");if(p!=-1){var l="ndiv_"+m.id.substring(p+"div".length);var h=getSRActivityDivWidth();if(dojo.byId(l)){dojo.style(dojo.byId(l),"width",h)}}dijit.byId(o).resize({w:getSRActivityTitlePaneWidth()})}})}if(dijit.byId("actionUpdate")){var a=parseInt(dojo.contentBox(dojo.byId("bc1")).w);a=a-20;dijit.byId("actionUpdate").resize({w:a});dijit.byId("actionUpdate").resize()}}function getSRActivityDivWidth(){var b=getSRActivityTitlePaneWidth();var a=b-20+"px";return a}function getSRActivityTitlePaneWidth(){var g=parseInt(dojo.contentBox(dojo.byId("bc1")).w);var b=dojo.style(dojo.byId("srReferencesAccordion"));var a=0.99;if(b.display!="none"){a=0.82}var f=g*a;return f}function addMicrosButton(h){var b=!isEmptyVal(getPageSytemParamValue(SRM_MICROS_BUTTON_LABEL))?getPageSytemParamValue(SRM_MICROS_BUTTON_LABEL):"Edit MICROS SR";b+=" &nbsp;";var g=!isEmptyVal(getPageSytemParamValue(SRM_MICROS_BUTTON_TOOLTIP))?getPageSytemParamValue(SRM_MICROS_BUTTON_TOOLTIP):"Open in New SP for full editing support";if(dijit.byId("srHeader")){var f={showLabel:true,label:b,onClick:function(){var l=evaluateSRMContextTextURL(vlinkHrefMap,"MOSSP_SREDIT",getSrNumber());window.open(l)},title:g,style:"vertical-align:middle;",iconClass2:"microsPunchOutIcon","class":"AcctClassificationText",name:h,id:h};var a=new srmdojoc.layout.CustomButton(f);a.startup();if(a!=undefined){dijit.byId("srHeader").microsNode.innerHTML="";dojo.place(a.domNode,dijit.byId("srHeader").microsNode,"first");dojo.style(dijit.byId("srHeader").microsNode,{display:"none","vertical-align":"top"})}}}function showHideOpenInMicrosPortalBtn(){if(dijit.byId(MICROS_PUNCHOUT_BTN_ID)==undefined){addMicrosButton(MICROS_PUNCHOUT_BTN_ID)}var a=getEvalFieldVal("productClass");var b=a.search("Micros");if(b==0){console.log("showHideOpenInMicrosPortalBtn - this is a micros product. Product Class: "+a);dojo.style(dijit.byId("srHeader").microsNode,{display:""})}else{console.log("showHideOpenInMicrosPortalBtn - this is NOT a micros product. Product Class: "+a);dojo.style(dijit.byId("srHeader").microsNode,{display:"none"})}}function simpleHtmlEntityDecode(a){var b=a;b=a.replace(/\r\n/g,"\n").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&");return b}var SRActivityUtil={};(function(){var saveActivityHandle=null,clearActivityChangesHandle=null,closedSREnabledActivities=new Array("Reopen Request","Email - Outbound"),showAllActivities=function(){var timerEvent=SRMJSTimer.startTimer("showAllActivities_"+getSrNumber());invokeToggleLoading(true,false,"");var url="../../../SRRequest";var request={action:"showAllActivities",queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()};var dfd=genericTalkToServer(url,request,"json","true");dfd.addCallback(function(data){invokeToggleLoading(false,false,"",data);dojo._destroyElement(dojo.byId("activityList"+currActivitySet).firstChild.lastChild);if(data.hasActivitiesMoreThanMaxLimit){var msg="Maximum Activity Limit reached. First "+getPageSytemParamValue(SRM_MAX_ACTIVITY_LIMIT)+" activities for the selected filter have been displayed.";var msgData=getDisplayMessageObj(msg,1);displayErrors(msgData)}addMoreActivities(data)});SRMJSTimer.endTimer(timerEvent)},getActivityTitlePaneId=function(activityId){return ACTIVITY_DIV_ID_PREFIX+activityId},getActivityReadOnlyNodeId=function(activityId){return"ndiv_"+activityId},getActivityEditModeNodeId=function(activityId){return"text_"+activityId},getActivityEditorNodeId=function(activityId){return"editor_"+activityId},getActivityTableCellId=function(activityId){return"cell"+activityId},ifActivityCellDisplayed=function(activityId){var activityTableCellId=getActivityTableCellId(activityId);if(dojo.byId(activityTableCellId)){return true}return false},addIndicatorForActivityInEditMode=function(activityId,sewTemplateId,origActivityHtml){var tpId=getActivityTitlePaneId(activityId);var readOnlyNode=dojo.byId(getActivityReadOnlyNodeId(activityId));var editModeNode=dijit.byId(getActivityEditModeNodeId(activityId));var editorDivNode=dojo.byId(getActivityEditorNodeId(activityId));if(dijit.byId(tpId)!=undefined&&dijit.byId(tpId).customImg3Node!=undefined){dijit.byId(tpId).customImg3Node.title="Save Activity Comments";dijit.byId(tpId).customImg3Node.src="../images/disk.gif";saveActivityHandle=dojo.connect(dijit.byId(tpId).customImg3Node,"onclick",function(){saveActivityComments(activityId,sewTemplateId)})}if(dijit.byId(tpId)!=undefined&&dijit.byId(tpId).customImg6Node!=undefined){dijit.byId(tpId).customImg6Node.title="Reset Changes in Activity Comments";dijit.byId(tpId).customImg6Node.src="../images/clear.gif";dojo.style(dijit.byId(tpId).customImg6Node,"display","");clearActivityChangesHandle=dojo.connect(dijit.byId(tpId).customImg6Node,"onclick",function(){dojo.style(editorDivNode,{display:"none"});if(editModeNode){editModeNode.destroyRecursive()}readOnlyNode.innerHTML=origActivityHtml;dojo.style(readOnlyNode,"display","");clearIndicatorForChangedActivity(activityId)})}if(dijit.byId(tpId)!=undefined&&dijit.byId(tpId).expansionNode!=undefined){dijit.byId(tpId).expansionNode.innerHTML="EDIT MODE";dojo.addClass(dijit.byId(tpId).expansionNode,"errorLabel")}},addIndicatorForChangedActivity=function(activityId){var tpId=getActivityTitlePaneId(activityId);var tableCellId=getActivityTableCellId(activityId);if(dojo.hasClass(dojo.byId(tableCellId),"errorHighlight")){return}if(dijit.byId(tpId)!=undefined&&dijit.byId(tpId).customImg3Node!=undefined){dijit.byId(tpId).customImg3Node.title="You have made changes in the activity text. Please save your changes."}dojo.addClass(dojo.byId(tableCellId),"errorHighlight")},clearIndicatorForChangedActivity=function(activityId){var tpId=getActivityTitlePaneId(activityId);if(dijit.byId(tpId)!=undefined&&dijit.byId(tpId).customImg3Node!=undefined){dijit.byId(tpId).customImg3Node.title="'Double Click on Activity Text to enable Save operation'";dijit.byId(tpId).customImg3Node.src="../images/disk_disabled.gif";if(saveActivityHandle!=null){dojo.disconnect(saveActivityHandle)}}if(dijit.byId(tpId)!=undefined&&dijit.byId(tpId).expansionNode!=undefined){dijit.byId(tpId).expansionNode.innerHTML="";dojo.removeClass(dijit.byId(tpId).expansionNode,"errorLabel")}if(dijit.byId(tpId)!=undefined&&dijit.byId(tpId).customImg6Node!=undefined){dojo.style(dijit.byId(tpId).customImg6Node,"display","none")}var tableCellId=getActivityTableCellId(activityId);dojo.removeClass(dojo.byId(tableCellId),"errorHighlight");if(clearActivityChangesHandle!=null){dojo.disconnect(clearActivityChangesHandle)}},switchActivityToEditMode=function(e,activityId,pheight,sewTemplateId){var editorId=getActivityEditorNodeId(activityId);var tpId=getActivityTitlePaneId(activityId);var readOnlyNode=dojo.byId(getActivityReadOnlyNodeId(activityId));var origHtml=readOnlyNode.innerHTML;dojo.style(readOnlyNode,"display","none");readOnlyNode.innerHTML="";var pvalue=origHtml;pvalue=sanitizeDivInnerHTMLForRichTextEditor(pvalue);addIndicatorForActivityInEditMode(activityId,sewTemplateId,origHtml);var editModeNodeId=getActivityEditModeNodeId(activityId);var editModeNode=dijit.byId(editModeNodeId);if(editModeNode){editModeNode.destroyRecursive()}var df=dojo.byId(editorId);dojo.style(df,"display","");var ddiv=document.createElement("textarea");df.appendChild(ddiv);var tarea=new dijit._editor.RichText({value:pvalue,onKeyDown:function(e){var evtobj=window.event?window.event:e;try{if(saveKeyCombArray[0]!=undefined){var saveShortcutPressed=SRMKeypressFunc(e,saveKeyCombArray[0].toLowerCase());if(saveShortcutPressed==true){if(saveActivityHandle!=undefined&&dojo.isArray(saveActivityHandle)&&saveActivityHandle.length>0&&saveActivityHandle[0]!=undefined){console.log("save key1");saveActivityHandle[0].click();return false}}}if(cancelKeyCombArray[0]!=undefined){var cancelShortcutPressed=SRMKeypressFunc(e,cancelKeyCombArray[0].toLowerCase());if(cancelShortcutPressed==true){if(clearActivityChangesHandle!=undefined&&dojo.isArray(clearActivityChangesHandle)&&clearActivityChangesHandle.length>0&&clearActivityChangesHandle[0]!=undefined){clearActivityChangesHandle[0].click();return false}}}}catch(Exc){console.log("problem encountered in Rictext's save/cancel hot key. Proceeding...")}addIndicatorForChangedActivity(activityId)},onChange:function(){var r=SRUtils.onChangeFld(this,"activity_"+activityId,pvalue)},width:"auto",style:"border:1px solid rgb(210,210,210); color:"+readOnlyNode.style.color+";background-color:"+readOnlyNode.style.backgroundColor,height:pheight+"px",name:editModeNodeId,id:editModeNodeId},ddiv);tarea.startup();tarea.setValue(pvalue);if(!dojo.isIE){setTimeout(function(){dojo.style(tarea.iframe.contentWindow.document.getElementsByTagName("body")[0],"whiteSpace","pre-wrap")},100)}setTimeout(function(){dojo.style(tarea.iframe.contentWindow.document.getElementsByTagName("body")[0],"backgroundColor",readOnlyNode.style.backgroundColor)},100);setTimeout(function(){dojo.style(tarea.iframe.contentWindow.document.getElementsByTagName("body")[0],"color",readOnlyNode.style.color)},100);var anchors=tarea.iframe.contentWindow.document.anchors;if(anchors!=null&&anchors.length>0){for(i=0;i<anchors.length;i++){var anchor=anchors[i];if(anchor.href.indexOf("openTargetViewer")!=-1){var href=anchor.href;href=href.replace(/javascript:/,"");anchor.href="javascript:function(){return false;}";dojo.connect(anchor,"onclick",function(evt){eval(href);if(evt.stopPropagation){evt.preventDefault()}})}if(anchor.oncontextmenu!=null){dojo.connect(anchor,"oncontextmenu",anchor.oncontextmenu)}}}if(e.stopPropagation){e.preventDefault()}else{e.returnValue=false}setTimeout(function(){applyBugContextMenu(tarea.iframe)},100);if(dojo.isFF){console.log("FF");tarea.focus()}else{if(dojo.isIE){setTimeout(function(){tarea.iframe.contentWindow.document.getElementsByTagName("body")[0].focus()},100)}else{setTimeout(function(){tarea.iframe.contentWindow.document.getElementsByTagName("body")[0].focus()},100)}}},getActivityCell=function(item,disableActivities,aStore){var activityId=aStore.getValue(item,"activityId");var title=aStore.getValue(item,"activityHeader");title=title+' <a href="#topPortion">Top</a>&nbsp;&nbsp;<a href="#bottomPortion">Bottom</a>';var open=!aStore.getValue(item,"hide");var audience=aStore.getValue(item,"audience");var type=aStore.getValue(item,"activityType");var templateId=(aStore.getValue(item,"activityTemplateId")!=undefined)?aStore.getValue(item,"activityTemplateId"):"";var innerHtml="";if(dijit.byId(ACTIVITY_DIV_ID_PREFIX+activityId)){dijit.byId(ACTIVITY_DIV_ID_PREFIX+activityId).destroyRecursive()}var audchecked="false";if(audience=="Public"){audchecked="true"}var audienceDisabled="false";if(aStore.getValue(item,"audienceDisabled")!=undefined){audienceDisabled=aStore.getValue(item,"audienceDisabled")}var detail=aStore.getValue(item,"detail");if(detail.indexOf("key=")!=-1&&detail.indexOf("val=")!=-1&&detail.indexOf("~~~")!=-1){detail=addAttachmentUrl(detail)}detail=detail.replace(/\s*$/g,"");detail=detail.replace(/\n/g,"<br />");if(dojo.isIE){detail=detail.replace(/\t/g," &nbsp; &nbsp; ")}var instructionCount=aStore.getValue(item,"instructionCount");var instructionImg="../images/notes.gif";if(instructionCount!=undefined&&instructionCount!=0){instructionImg="../images/notes_upd.gif"}var instructionTitle="Activity Updates ("+instructionCount+")";var detailRows=detail.toLowerCase().split("<br />").length;var detailHeight=14*(detailRows+1);detailHeight=detailHeight<50?50:detailHeight;var instructionsList=aStore.getValue(item,"instructionsList");var activityInstructionsInnerTable="";if(dojo.isArray(instructionsList)){for(var k=0;k<instructionsList.length;k++){activityInstructionsInnerTable+="<tr><td class='srAdfField'>Created:</td><td nowrap='nowrap' valign='top'>"+instructionsList[k].created+"</td><td class='srAdfField'>Type:</td><td nowrap='nowrap' valign='top'>"+instructionsList[k].instructionType+"</td><td class='srAdfField'>Instruction:</td><td width='30%'>"+instructionsList[k].instruction+"</td></tr>"}}var activityInstructionsTable="";if(activityInstructionsInnerTable!=""){activityInstructionsTable+="<table title='Activity Instructions' class='srActivityInstructions' id='instructions_activity_"+activityId+"'>"+activityInstructionsInnerTable+"</table>"}var origDetail=new Object();origDetail.detail=escape(detail);var height=(detail=="")?"15px":"auto;";if(SRUtils.isSRClosed()&&!closedSREnabledActivities.contains(type)){var activityStatus=aStore.getValue(item,"activityStatus");var resolution=aStore.getValue(item,"resolution");var category=aStore.getValue(item,"category");var escOwnerRole=aStore.getValue(item,"escOwnerRole");var escLvl=aStore.getValue(item,"escLvl");var owner=aStore.getValue(item,"owner");var updated=aStore.getValue(item,"updated");var updatedBy=aStore.getValue(item,"updatedBy");var desc=aStore.getValue(item,"desc");var created=aStore.getValue(item,"created");var createdBy=aStore.getValue(item,"createdBy");var start=aStore.getValue(item,"start");var end=aStore.getValue(item,"end");var actualEnd=aStore.getValue(item,"actualEnd");var due=aStore.getValue(item,"due");var durationM=aStore.getValue(item,"durationM");var doneFlag=aStore.getValue(item,"doneFlag");var doneFlagStr=(doneFlag)?"Y":"N";var account=aStore.getValue(item,"account");var contacts=aStore.getValue(item,"contacts");var employees=aStore.getValue(item,"employees");var playBackURL=aStore.getValue(item,"playBackURL");var conferenceId=aStore.getValue(item,"conferenceId");var conferenceKey=aStore.getValue(item,"conferenceKey");var confIdLabel=(templateId=="")?"Known Issue?":"Conference ID";var activityDetailTable="<table title='Activity Header' class='srActivityHeader' id='activity_header_"+activityId+"'><tbody><tr><td class='srAdfField'>Activity #:</td><td width='30%'>"+activityId+"</td><td class='srAdfField'>Account:</td><td width='30%'>"+account+"</td><td class='srAdfField'>Contacts:</td><td nowrap='nowrap' valign='top'>"+contacts+"</td></tr><tr><td class='srAdfField'>Created By:</td><td width='30%'>"+created+"</td><td class='srAdfField'>Created:</td><td  valign='top'>"+createdBy+"</td><td class='srAdfField'>Updated By:</td><td valign='top'>"+updatedBy+"</td></tr><tr><td class='srAdfField'>Updated:</td><td  width='30%' valign='top'>"+updated+"</td><td class='srAdfField'>Employees:</td><td  valign='top'>"+employees+"</td><td class='srAdfField'>Owner:</td><td valign='top'>"+owner+"</td></tr><tr><td class='srAdfField'>Description:</td><td width='30%'>"+desc+"</td><td class='srAdfField'>Customer Visible:</td><td  valign='top'>"+audience+"</td><td class='srAdfField'>Category:</td><td  valign='top'>"+category+"</td></tr><tr><td class='srAdfField'>Status:</td><td width='30%'>"+activityStatus+"</td><td class='srAdfField'>Resolution:</td><td nowrap='nowrap' valign='top'>"+resolution+"</td><td class='srAdfField'>Done:</td><td  valign='top'>"+doneFlagStr+"</td></tr><tr><td class='srAdfField'>Start:</td><td  valign='top'>"+start+"</td><td class='srAdfField'>End:</td><td valign='top'>"+end+"</td><td class='srAdfField'>Actual End:</td><td width='30%'>"+actualEnd+"</td></tr> <tr><td class='srAdfField'>"+confIdLabel+"</td><td width='30%'>"+conferenceId+"</td><td class='srAdfField'>Playback URL:</td><td  valign='top'>"+playBackURL+"</td><td class='srAdfField'>Conference Key:</td><td  valign='top'>"+conferenceKey+"</td></tr> <tr><td class='srAdfField'>Esc Level:</td><td width='30%'>"+escLvl+"</td><td class='srAdfField'>Esc Owner Role:</td><td  valign='top'>"+escOwnerRole+"</td><td class='srAdfField'>Due:</td><td  valign='top'>"+due+"</td></tr> <tr><td class='srAdfField'>Duration:</td><td width='30%'>"+durationM+"</td><td class='srAdfField'></td><td valign='top'></td><td class='srAdfField'></td><td valign='top'></td></tr> </tbody></table>";innerHtml+="<div class='activitydivClass' id='"+ACTIVITY_DIV_ID_PREFIX+activityId+"' style='border:0px solid #000; overflow: auto;height:auto; width:"+getSRActivityTitlePaneWidth()+"px;' img2onclick='' img3title='' img3onclick='' chkboxonclick='' checked='"+audchecked+"' chkId='chk_"+activityId+"' open='"+open+"' img2title='' img2style='display:none;'  img3style='display:none;' img4title='"+instructionTitle+"' img4style='display:none;' img4onclick=''"+ +"img5style='vertical-align:middle; border:1px solid transparent; cursor:pointer; float:right;'  img5title='Audit' img5src='../images/audit.gif' img5onclick='getActivityAudit(\""+activityId+"\");'  a1title='' a1onclick=''  dojoType='srmdojoc.layout.SRTechActionTitlePane' title='"+title+"'>"+activityDetailTable+activityInstructionsTable+"<div style='overflow: auto;height:auto; width:'"+getSRActivityDivWidth()+"px;' id='ndiv_"+activityId+"'>"+detail+" </div> </div>";disableActivities.push(activityId)}else{innerHtml+="<div class='activitydivClass' id='"+ACTIVITY_DIV_ID_PREFIX+activityId+"' style='border:0px solid #000; overflow: auto;height:auto; width:"+getSRActivityTitlePaneWidth()+"px;' img2onclick='updateActivityWT(\""+activityId+"\",\"\");'img3src='../images/disk_disabled.gif' img3title='Double Click on Activity Text to enable Save operation' img3onclick='' chkboxonclick='toggleAudience(this, \""+activityId+"\");' chkId='chk_"+activityId+"'   chkboxDisabled='"+audienceDisabled+"'  checked='"+audchecked+"' open='"+open+"' img2title='Open Update screen' img2src='../images/update_ena.png' "+ +"img2style='vertical-align:middle; border:1px solid transparent; cursor:pointer; float:right;' img3style='vertical-align:middle; border:1px solid transparent; cursor:pointer; float:right;' img4style='vertical-align:middle; border:1px solid transparent; cursor:pointer; float:right;' img5style='vertical-align:middle; border:1px solid transparent; cursor:pointer; float:right;'  img4title='"+instructionTitle+"' img4src='"+instructionImg+"' img4onclick='getActivityUpdates(\""+activityId+"\");'  img5title='Audit' img5src='../images/audit.gif' img5onclick='getActivityAudit(\""+activityId+"\");'  a1title='Toggle Customer Visible'  a1onclick=''  dojoType='srmdojoc.layout.SRTechActionTitlePane' title='"+title+"'>"+activityInstructionsTable+"<div  name='ndiv_"+activityId+"' id='ndiv_"+activityId+"' title='Double click inside the activity pane to edit activity' onDblClick='SRActivityUtil.switchActivityToEditMode(event,\""+activityId+'","'+detailHeight+'","'+templateId+"\");' style='white-space:pre-wrap; overflow: auto;height:"+height+";width="+getSRActivityDivWidth()+"px;' >"+detail+" </div><div style='display:none;' name='editor_"+activityId+"' id='editor_"+activityId+"'></div> </div>"}return innerHtml},setActivityDataFromResponse=function(responseJson,isNewActivity){if(responseJson.activities!=undefined&&responseJson.activities.length>0){var showDirtyIndicator=false;hideDisplayByNodeName("img_openMgrHelp",responseJson.existsOpenMgrHelp);exists_openMgrHelp=responseJson.existsOpenMgrHelp;var disableButton=disableMgrHelpButton(exists_openMgrHelp);var oper="NOT disabled";dijit.byId("MgrHelpIconArea").setAttribute("disabled",false);if(disableButton!=undefined&&disableButton==true){dijit.byId("MgrHelpIconArea").setAttribute("disabled",true);oper="disabled"}console.debug("** Made MgrHelpIconArea "+oper+" in addMoreActivities  ");hideDisplayByNodeName("img_openSev1SpeakToMgr",responseJson.existsOpenSev1SpeakToMgrHelp);var newActivities=responseJson.newActivities;for(var i=0;i<responseJson.activities.length;i++){var replaceWith=responseJson.activities[i];var isNew=(newActivities!=undefined&&dojo.isArray(newActivities)&&newActivities.contains(replaceWith.activityId))?true:isNewActivity;var pos=getActivityNewPos(replaceWith.activityId);if(pos==""&&!isNew){replace(getSRData().activities,replaceWith.activityId,replaceWith)}else{if(pos!=""&&!isNew){remove(getSRData().activities,replaceWith.activityId)}}if(pos=="first"){getSRData().activities.unshift(replaceWith)}else{if(pos=="last"){getSRData().activities.push(replaceWith)}}setActivityStore(getSRData());activityStore.fetchItemByIdentity({identity:replaceWith.activityId,onItem:function(item,request){var disableActivities=new Array();var cellId="cell"+replaceWith.activityId;showDirtyIndicator=true;var innerHtml=getActivityCell(item,disableActivities,window.activityStore);if(dojo.byId(cellId)&&pos==""){dojo.removeClass(dojo.byId(cellId),"errorHighlight");dojo.byId(cellId).innerHTML=innerHtml;dojo.parser.parse(cellId)}if(dojo.byId(cellId)&&pos!=""){dojo._destroyElement(dojo.byId(cellId).parentNode)}if(pos!=""&&innerHtml!=""){var parentNode;if(pos=="first"){parentNode=dojo.byId("activityList"+START_NUM_ZERO)}else{parentNode=dojo.byId("activityList"+currActivitySet)}var cellId="cell"+replaceWith.activityId;var newRow=document.createElement("tr");var newCell=document.createElement("td");newCell.innerHTML=innerHtml;newCell.setAttribute("id",cellId);newRow.appendChild(newCell);if(getSRData().hasMoreActivities&&pos=="last"){dojo.place(newRow,parentNode.firstChild.lastChild,"before")}else{dojo.place(newRow,parentNode.firstChild,pos)}dojo.parser.parse(cellId)}}})}var addInfo=getStaleActivityListNode(showDirtyIndicator);if(responseJson.totalActivities){getSRData().totalActivities=responseJson.totalActivities;formatDetailPaneTitle("SR Details (Displayed/Filtered:"+getSRData().activities.length+"/"+responseJson.filterCount+")"+addInfo)}setTimeout("try{applyBugContextMenu(); SRColorsCustomization.applyToActivities();}catch(e){console.debug(1)}",1000)}function replace(arrayName,id,replaceWith){for(var i=0;i<arrayName.length;i++){if(arrayName[i].activityId==id){arrayName.splice(i,1,replaceWith)}}}function remove(arrayName,id){for(var i=0;i<arrayName.length;i++){if(arrayName[i].activityId==id){arrayName.remove(arrayName[i])}}}function getActivityNewPos(activityId){var sort=dijit.byId("sortFs").getValue();var pos="";if(sort.indexOf("Updated-ASC")!=-1){pos="last"}else{if(sort.indexOf("Updated-DESC")!=-1){pos="first"}else{if(sort.indexOf("Created-ASC")!=-1&&!ifActivityCellDisplayed(activityId)){pos="last"}else{if(!ifActivityCellDisplayed(activityId)){pos="first"}}}}return pos}},sanitizeDivInnerHTMLForRichTextEditor=function(pvalue){if(isEmptyVal(pvalue)){return pvalue}pvalue=pvalue.replace(/<br>/ig,"<br />");pvalue=pvalue.replace(/\s*$/g,"");pvalue=pvalue.replace(/<img([^>]*)>/ig,"<img$1 />");if(pvalue.indexOf("openTargetViewer")!=-1){pvalue=pvalue.replace(/openTargetViewer/g,"parent.openTargetViewer")}if(pvalue.indexOf("openRefLinkFromActivity")!=-1){pvalue=pvalue.replace(/openRefLinkFromActivity/g,"parent.openRefLinkFromActivity")}return pvalue},setRefreshIndicator=function(){dojo.style(dijit.byId("dData").refreshImgNode,"display","");dojo.connect(dijit.byId("dData").refreshImgNode,"onclick",function(){reloadSRDetails("Activity")});dijit.byId("dData").refreshImgNode.title="Reload Activities based on the selected filter and sort criteria."},invokeToggleLoading=function(isLoading,isError,errorMsg,data){var params={};params.isLoading=(isLoading==undefined)?false:isLoading;params.isError=(isError==undefined)?false:isError;params.message=(errorMsg==undefined)?"":errorMsg;if(data!=undefined&&data.opStatus!=undefined&&data.opStatus==1){params.isError=true;var errorResult=(data.error!=undefined)?data.error.opResult:data.opResult;params.message=(errorResult!=undefined&&errorResult.length>0&&errorResult[0].message!=undefined)?errorResult[0].message:errorMsg}toggleLoading(params)},toggleLoading=function(params){params=params||{};var isLoading=params.isLoading||false;var isError=params.isError||false;var error=params.message||"";var dData=dijit.byId("dData");if(dData!=undefined&&isLoading==true){dData.setMessage("");dData.setLoadingAnimationOn()}if(dData!=undefined&&isLoading==false&&isError==true){dData.setLoadingAnimationOff();dData.setMessage("Error");if(params.message!=undefined&&params.message!=""){dData.setErrorStackMsg(params.message)}dData.setErrorStackPopUpOnContextMenu(true)}if(dData!=undefined&&isLoading==false&&isError==false){dData.setLoadingAnimationOff();dData.setMessage("");dData.setErrorStackPopUpOnContextMenu(false)}};window.SRActivityUtil={showAllActivities:showAllActivities,saveActivityHandle:saveActivityHandle,clearIndicatorForChangedActivity:clearIndicatorForChangedActivity,addIndicatorForChangedActivity:addIndicatorForChangedActivity,switchActivityToEditMode:switchActivityToEditMode,getActivityCell:getActivityCell,ifActivityCellDisplayed:ifActivityCellDisplayed,toggleLoading:toggleLoading,setActivityDataFromResponse:setActivityDataFromResponse,invokeToggleLoading:invokeToggleLoading,setRefreshIndicator:setRefreshIndicator}}());var StyleRuleManager={};var SRCOLORS_CUSTOM_DIALOG_NAME="SRColorsCustomizationWindow";StyleRuleManager.artifacts={SR:"SR",SRACTIVITY:"SRActivity"};StyleRuleManager.artifactsStore=new dojo.data.ItemFileReadStore({data:{items:[{name:"SR",id:StyleRuleManager.artifacts.SR},{name:"SR Activity",id:StyleRuleManager.artifacts.SRACTIVITY}],identifier:"id"}});StyleRuleManager.currentDialogContext=null;StyleRuleManager.executeOperationCallback=function(a){if(StyleRuleManager.currentDialogContext&&StyleRuleManager.currentDialogContext[a]){var b=StyleRuleManager.currentDialogContext[a][StyleRuleManager.currentArtifact()];if(typeof b=="function"){b()}else{}}};StyleRuleManager.currentArtifact=function(){return dijit.byId("SRColorFormArtifact").getValue()};StyleRuleManager.displayItems=function(a){StyleRuleManager.currentDialogContext=a;SRColorsCustomization.showWindow()};StyleRuleManager.toggleRulesForArtifact=function(a,b){SRColorsCustomization.toggleApplyRulesOn=a;SRColorsCustomization.applyRules[a]=b;dijit.byId("pleasewait").show();dojo.xhrPost({url:SRColorsCustomization.servlet,content:{action:"toggle_apply_rules",artifact:a,flag:b},handleAs:"json",load:function(g,f){if(isObjectErroneous(g)){displayErrors(g);dijit.byId("pleasewait").hide()}else{dijit.byId("pleasewait").hide();StyleRuleManager.setApplyRulesFlags(SRColorsCustomization.applyRules);if(a===StyleRuleManager.artifacts.SR){SRColorsCustomization.applyToSR()}else{if(a===StyleRuleManager.artifacts.SRACTIVITY){SRColorsCustomization.applyToActivities()}}}},error:function(g,f){dijit.byId("pleasewait").hide();xhrErrHandler(g,f,"Error occurred in saving rule apply status.")}})};StyleRuleManager.canApplyRulesForArtifact=function(a){if(SRColorsCustomization.applyRules===null){StyleRuleManager.getApplyRulesFlags();return false}else{return SRColorsCustomization.applyRules[a]}};StyleRuleManager.setApplyRulesFlags=function(a){if(a==null||a==undefined){return}SRColorsCustomization.applyRules=a;if(true===SRColorsCustomization.applyRules[StyleRuleManager.artifacts.SR]&&dijit.byId("toggleRulesForSR")){dijit.byId("toggleRulesForSR").setAttribute("checked",true);dijit.byId("toggleRulesForSR").setAttribute("title","Styles for SR Header are turned on. Click to turn styles off.");dojo.removeClass(dijit.byId("toggleRulesForSR").iconNode,"colordisabledIcon");dojo.addClass(dijit.byId("toggleRulesForSR").iconNode,"colorpickerIcon")}else{if(dijit.byId("toggleRulesForSR")){dijit.byId("toggleRulesForSR").setAttribute("checked",false);dijit.byId("toggleRulesForSR").setAttribute("title","Styles for SR Header are turned off. Click to turn styles on.");dojo.removeClass(dijit.byId("toggleRulesForSR").iconNode,"colorpickerIcon");dojo.addClass(dijit.byId("toggleRulesForSR").iconNode,"colordisabledIcon")}}if(true===SRColorsCustomization.applyRules[StyleRuleManager.artifacts.SRACTIVITY]&&dijit.byId("toggleRulesForActivity")){dijit.byId("toggleRulesForActivity").setAttribute("checked",true);dijit.byId("toggleRulesForActivity").setAttribute("title","Styles for Activity are turned on. Click to turn styles off.");dojo.removeClass(dijit.byId("toggleRulesForActivity").iconNode,"colordisabledIcon");dojo.addClass(dijit.byId("toggleRulesForActivity").iconNode,"colorpickerIcon")}else{if(dijit.byId("toggleRulesForActivity")){dijit.byId("toggleRulesForActivity").setAttribute("checked",false);dijit.byId("toggleRulesForActivity").setAttribute("title","Styles for Activity are turned off. Click to turn styles on.");dojo.removeClass(dijit.byId("toggleRulesForActivity").iconNode,"colorpickerIcon");dojo.addClass(dijit.byId("toggleRulesForActivity").iconNode,"colordisabledIcon")}}};StyleRuleManager.getApplyRulesFlags=function(){if(SRColorsCustomization.applyRules!==null){return}dojo.xhrPost({url:SRColorsCustomization.servlet,content:{action:"get_apply_rules"},handleAs:"json",load:function(b,a){if(isObjectErroneous(b)){displayErrors(b)}else{StyleRuleManager.setApplyRulesFlags(b);StyleRuleManager.executeOperationCallback("onModify")}},error:function(b,a){xhrErrHandler(b,a,"Error occurred in getting rule apply status.")}})};StyleRuleManager.displayItemsForReorderOperation=function(){dojo.style("SRColorCustomizationRegularTopButtons",{display:"none"});dojo.style("SRColorCustomizationReorderTopButtons",{display:""});SRColorsCustomization.showAllRows({isForReorderOperation:true})};StyleRuleManager.cancelDisplayItemsForReorderOperation=function(){dojo.style("SRColorCustomizationReorderTopButtons",{display:"none"});dojo.style("SRColorCustomizationRegularTopButtons",{display:""});SRColorsCustomization.showAllRows()};StyleRuleManager.saveItemsOrder=function(){dijit.byId("pleasewait").show();var a=[];var f=dojo.query("tr","SRColorCustomizationTable");for(var b=0;b<f.length;b++){var g=f[b];a.push(dojo.attr(g,"rowid"))}dojo.xhrPost({url:SRColorsCustomization.servlet,content:{action:"update_positions",ruleIds:a,artifact:StyleRuleManager.currentArtifact()},handleAs:"json",load:function(l,h){if(isObjectErroneous(l)){displayErrors(l);dijit.byId("pleasewait").hide()}else{SRColorsCustomization.rules[StyleRuleManager.currentArtifact()]=l.rules;StyleRuleManager.cancelDisplayItemsForReorderOperation();StyleRuleManager.executeOperationCallback("onModify");dijit.byId("pleasewait").hide()}},error:function(l,h){dijit.byId("pleasewait").hide();xhrErrHandler(l,h,"Error occurred in saving rules order.")}})};StyleRuleManager.moveRuleUp=function(f){var b=f.parentNode.parentNode;var h=b.rowIndex+1;if(h==1){return}var g=b.parentNode;var a=b.previousSibling;b=g.removeChild(b);g.insertBefore(b,a)};StyleRuleManager.moveRuleDown=function(f){var a=f.parentNode.parentNode;var l=a.rowIndex+1;var h=a.parentNode;var b=h.childNodes.length;if(l==b){return}var g=a.nextSibling;a=h.removeChild(a);if(g.nextSibling){return h.insertBefore(a,g.nextSibling)}else{return h.appendChild(a)}};var SRColorsCustomization={};SRColorsCustomization.servlet="/oip/faces/SRCustomization";SRColorsCustomization.rulesLoaded={};SRColorsCustomization.rulesLoaded[StyleRuleManager.artifacts.SR]=false;SRColorsCustomization.rulesLoaded[StyleRuleManager.artifacts.SRACTIVITY]=false;SRColorsCustomization.rules={};SRColorsCustomization.rules[StyleRuleManager.artifacts.SR]=[];SRColorsCustomization.rules[StyleRuleManager.artifacts.SRACTIVITY]=[];SRColorsCustomization.applyRules=null;SRColorsCustomization.toggleApplyRulesOn=null;SRColorsCustomization.default_ro_style={backgroundColor:"#E4E4E4",color:"black"};SRColorsCustomization.default_style={backgroundColor:"#FFFFFF",color:"black"};SRColorsCustomization.special_field_operator="#";SRColorsCustomization.workflow_odm_activities=[];SRColorsCustomization.applicationOperandsStores={};SRColorsCustomization.applicationOperandsStores[StyleRuleManager.artifacts.SR]=new dojo.data.ItemFileReadStore({data:{items:[{name:"SR Status",id:"status"},{name:"SR Substatus",id:"sub-Status"},{name:"SR Escalation Status",id:"esclStatus"},{name:"SR Severity",id:"severity"},{name:"SR OD Flag",id:"ODFlag"}],identifier:"id"}});SRColorsCustomization.applicationOperandsStores[StyleRuleManager.artifacts.SRACTIVITY]=new dojo.data.ItemFileReadStore({data:{items:[{name:"Published ODM",id:"PUBLISHED_ODM"},{name:"Unpublished ODM",id:"UNPUBLISHED_ODM"},{name:"Published Customer updates",id:"PUBLISHED_CUSTOMER_UPDATES"},{name:"Unpublished Customer updates",id:"UNPUBLISHED_CUSTOMER_UPDATES"},{name:"Unpublished Support updates",id:"UNPUBLISHED_SUPPORT_UPDATES"},{name:"Published Support updates",id:"PUBLISHED_SUPPORT_UPDATES"}],identifier:"id"}});SRColorsCustomization.activitiesNameFromIdMapping={PUBLISHED_ODM:"Published ODM",UNPUBLISHED_ODM:"Unpublished ODM",PUBLISHED_CUSTOMER_UPDATES:"Published Customer updates",UNPUBLISHED_CUSTOMER_UPDATES:"Unpublished Customer updates",UNPUBLISHED_SUPPORT_UPDATES:"Unpublished Support updates",PUBLISHED_SUPPORT_UPDATES:"Published Support updates"};SRColorsCustomization.applicationOperatorsStore=new dojo.data.ItemFileReadStore({data:{items:[{name:"equal",id:"="},{name:"not equal",id:"!="},{name:"in",id:"in"}],identifier:"id"}});dojo.require("dojox.widget.ColorPicker");dojo.require("dijit.ColorPalette");SRColorsCustomization.showWindow=function(){dijit.byId("pleasewait").show();dojo.xhrGet({url:"/oip/faces/secure/srm/srview/srColorsPreferences.html"+getVersion(),load:function(b){var a=dijit.byId(SRCOLORS_CUSTOM_DIALOG_NAME);if(a==null){a=new dijit.Dialog({refocus:false,id:SRCOLORS_CUSTOM_DIALOG_NAME,title:"Rules and Color preferences",style:"width: 800px; height: 430px;z-index:1;overflow:hidden;"});dummySRColorsPrefFunction(a);a.setContent(b)}dijit.byId("SRColorFormArtifact").setValue(StyleRuleManager.currentDialogContext.artifact);a.show();dijit.byId("pleasewait").hide()},error:function(b,a){dijit.byId("pleasewait").hide();xhrErrHandler(b,a,"Error occurred in fetting the rules dialog's layout.")}})};SRColorsCustomization.isMultiSelectOperator=function(b){var a=b||dijit.byId("SRColorFormOperator").getValue();if("in"==a){return true}else{return false}};SRColorsCustomization.showForm=function(a){dojo.attr(dijit.byId("SRColorFormAppOperand"),"store",SRColorsCustomization.applicationOperandsStores[StyleRuleManager.currentArtifact()]);var g=(a==undefined);if(g){a={id:"",app_operand:(StyleRuleManager.currentArtifact()==StyleRuleManager.artifacts.SR)?"status":"PUBLISHED_ODM",operator:"=",user_operand:"",css_compact:"background-color:yellow;color:black;",css:{"background-color":"yellow",color:"black"},position:""}}var b=("in"==a.operator)&&(dijit.byId("SRColorFormAppOperand").getValue()==a.app_operand);if(SRColorsCustomization.isMultiSelectOperator(a.operator)){window.SRColorFormUserMultiOperandSelectedOptions=SRColorsCustomization.inOperandExtractor(a.user_operand);dijit.byId("SRColorFormOperator").setValue(a.operator);dijit.byId("SRColorFormAppOperand").setValue(a.app_operand)}else{dijit.byId("SRColorFormOperator").setValue(a.operator);dijit.byId("SRColorFormAppOperand").setValue(a.app_operand);if(dijit.byId("SRColorFormUserOperand")!=undefined){if(dojo.byId("SRColorFormUserValueRow").style.display!="none"){dijit.byId("SRColorFormUserOperand").setValue(a.user_operand)}else{dijit.byId("SRColorFormUserOperand").setValue("")}}}if(b){var h=dijit.byId("SRColorFormUserMultiOperand").domNode;for(var f=0;f<h.options.length;f++){if(dojo.indexOf(window.SRColorFormUserMultiOperandSelectedOptions,h.options[f].value)!=-1){h.options[f].selected="selected"}else{h.options[f].selected=""}}window.SRColorFormUserMultiOperandSelectedOptions=null}dojo.byId("SRColorFormId").value=a.id;dojo.byId("SRColorFormPosition").value=a.position;dojo.byId("SRColorFormBackgroundColor").style.backgroundColor=a.css["background-color"];dojo.byId("SRColorFormFontColor").style.backgroundColor=a.css.color;dojo.byId("SRColorFormPreview").style.backgroundColor=a.css["background-color"];dojo.byId("SRColorFormPreview").style.color=a.css.color;dojo.byId("SRColorCustomizationRowsArea").style.display="none";dojo.byId("SRColorFormTable").style.display="block";dojo.byId("SRColorFormAppOperand").focus();if(g){SRColorsCustomization.onChangeAppOperandHandler()}};SRColorsCustomization.inOperandExtractor=function(b){try{return b.slice(1,b.length-1).replace(/\'/gi,"").split(",")}catch(a){}return[]};SRColorsCustomization.hideForm=function(){dojo.byId("SRColorFormTable").style.display="none";dojo.byId("SRColorCustomizationRowsArea").style.display="block";dojo.byId("colorswheel").style.display="none";dojo.byId("colorswheeltip").style.display="none";StyleRuleManager.executeOperationCallback("onModify")};SRColorsCustomization.showRow=function(a,f){if(a.position===undefined){return}SRColorsCustomization.toggleNoRecordsYetMessage();var g=dojo.byId("SRColorCustomizationTable");var b=g.insertRow(0);b.setAttribute("id","SRColorCustomizationRow"+a.id);b.setAttribute("rowid",a.id);var m=b.insertCell(0);m.width=350;if(a.special_rule===true){m.innerHTML=SRColorsCustomization.activitiesNameFromIdMapping[a.app_operand]}else{m.innerHTML=a.rule}var l=b.insertCell(1);l.width=250;l.innerHTML='<span style="'+a.css_compact+'">&nbsp; customized text test &nbsp;</span>';var h=b.insertCell(2);if(true===f){h.innerHTML='<img src="../images/spPaneUpArrow.gif" style="cursor:pointer;" title="Move Up" onclick="StyleRuleManager.moveRuleUp(this);" /><img src="../images/spPaneDownArrow.gif" style="cursor:pointer;" title="Move Down" onclick="StyleRuleManager.moveRuleDown(this)" />'}else{h.innerHTML='<img src="../images/update_ena.png" style="cursor:pointer;" title="Modify" onclick="SRColorsCustomization.editRow(this);" /><img src="../images/trash_can.gif" style="cursor:pointer;" title="Delete" onclick="SRColorsCustomization.deleteRow(this);" />'}};SRColorsCustomization.toggleNoRecordsYetMessage=function(a){var b=(SRColorsCustomization.rules[StyleRuleManager.currentArtifact()].length==0)?"":"none";dojo.byId("noRecordsYet").style.display=b};SRColorsCustomization.showAllRows=function(l){if(!SRColorsCustomization.rulesLoaded[StyleRuleManager.currentArtifact()]){SRColorsCustomization.fetchCustomizations({onComplete:SRColorsCustomization.showAllRows,params:l,artifact:StyleRuleManager.currentArtifact()});return}if(StyleRuleManager.artifacts.SRACTIVITY==StyleRuleManager.currentArtifact()){dojo.byId("initializePowerpackStylePreferencesButton").style.display=""}else{dojo.byId("initializePowerpackStylePreferencesButton").style.display="none"}SRColorsCustomization.toggleNoRecordsYetMessage();var g=dojo.byId("SRColorCustomizationTable");var a=g.rows.length;while(a>0){g.deleteRow(0);a--}var h=SRColorsCustomization.rules[StyleRuleManager.currentArtifact()].length;var b=ParametersContext.getAttribute(l,"isForReorderOperation");for(var f=0;f<h;f++){SRColorsCustomization.showRow(SRColorsCustomization.rules[StyleRuleManager.currentArtifact()][f],b)}ParametersContext.callFunction(l,"onComplete")};SRColorsCustomization.fetchCustomizations=function(f){var a=ParametersContext.getAttribute(f,"artifact");var b={action:"get_list",artifact:a};if(SRColorsCustomization.workflow_odm_activities.length===0){b.includeWfODMActivites="true"}dojo.xhrGet({url:SRColorsCustomization.servlet,content:b,preventCache:true,handleAs:"json",load:function(h,g){if(isObjectErroneous(h)){displayErrors(h)}else{SRColorsCustomization.rules[a]=h.rules;SRColorsCustomization.rulesLoaded[a]=true;if(h.wfODMActivities){SRColorsCustomization.workflow_odm_activities=h.wfODMActivities}(ParametersContext.getFunction(f,"onComplete"))(ParametersContext.getAttribute(f,"params"))}},error:function(h,g){xhrErrHandler(h,g,"Error occurred in fetching the list of rules.")}})};function inquire(){}SRColorsCustomization.saveForm=function(){var a=(dojo.byId("SRColorFormSpecialField").value=="1")?true:false;var l={app_operand:dijit.byId("SRColorFormAppOperand").getValue(),operator:a?SRColorsCustomization.special_field_operator:dijit.byId("SRColorFormOperator").getValue(),user_operand:a?"comment":dijit.byId("SRColorFormUserOperand").getValue(),css:{"background-color":dojo.byId("SRColorFormBackgroundColor").style.backgroundColor,color:dojo.byId("SRColorFormFontColor").style.backgroundColor},id:dojo.byId("SRColorFormId").value,position:dojo.byId("SRColorFormPosition").value,special_rule:a,artifact:StyleRuleManager.currentArtifact()};if("in"==l.operator){var f="";var h=dijit.byId("SRColorFormUserMultiOperand").domNode;for(var b=0;b<h.options.length;b++){if(h.options[b].selected){f+="'"+h.options[b].value+"',"}}if(""!=f){f=f.slice(0,f.length-1);f="("+f+")"}l.user_operand=f}l.css_compact="background-color:"+l.css["background-color"]+";color:"+l.css.color+";";l.rule=l.app_operand+" "+l.operator+" ";if("in"==l.operator){l.rule+=l.user_operand}else{l.rule+="'"+l.user_operand+"'"}if(!a){if(l.app_operand===""){alert('Please provide a value for "Field".');dojo.byId("SRColorFormAppOperand").focus();return}if(l.operator===""){alert('Please provide a value for "Operation".');dojo.byId("SRColorFormOperator").focus();return}if(l.user_operand===""){alert('Please provide a value for "User value".');dojo.byId("SRColorFormUserOperand").focus();return}}dijit.byId("pleasewait").show();var g=((l.id=="")?true:false);l.action="save";dojo.xhrPost({url:SRColorsCustomization.servlet,content:l,handleAs:"json",load:function(p,o){if(isObjectErroneous(p)){displayErrors(p);dijit.byId("pleasewait").hide()}else{if(g){SRColorsCustomization.rules[StyleRuleManager.currentArtifact()].push(l);l.id=p.id;l.position=p.position}else{for(var m=0;m<SRColorsCustomization.rules[StyleRuleManager.currentArtifact()].length;m++){if(l.id==SRColorsCustomization.rules[StyleRuleManager.currentArtifact()][m].id){SRColorsCustomization.rules[StyleRuleManager.currentArtifact()][m]=l;break}}}SRColorsCustomization.hideForm();SRColorsCustomization.showAllRows();dijit.byId("pleasewait").hide()}},error:function(o,m){dijit.byId("pleasewait").hide();xhrErrHandler(o,m,"Error occurred in saving the form.")}})};SRColorsCustomization.operationContext=function(b){var a={};if(b!=null){if(b.app_operand.substring(0,2)=="SR"){a.object="sr"}else{if(b.app_operand.substring(0,8)=="Activity"){a.object="activity"}}}return a};SRColorsCustomization.editRow=function(g){var f=g.parentNode.parentNode;var a=dojo.attr(f,"rowid");for(var b=0;b<SRColorsCustomization.rules[StyleRuleManager.currentArtifact()].length;b++){if(a==SRColorsCustomization.rules[StyleRuleManager.currentArtifact()][b].id){SRColorsCustomization.showForm(SRColorsCustomization.rules[StyleRuleManager.currentArtifact()][b]);break}}};SRColorsCustomization.deleteRow=function(f){if(confirm("Are you sure?")){dijit.byId("pleasewait").show();var b=f.parentNode.parentNode;var a=dojo.attr(b,"rowid");dojo.xhrPost({url:SRColorsCustomization.servlet,content:{action:"delete",id:a},handleAs:"json",load:function(m,l){if(isObjectErroneous(m)){displayErrors(m);dijit.byId("pleasewait").hide()}else{var g=null;for(var h=0;h<SRColorsCustomization.rules[StyleRuleManager.currentArtifact()].length;h++){if(a==SRColorsCustomization.rules[StyleRuleManager.currentArtifact()][h].id){g=SRColorsCustomization.rules[StyleRuleManager.currentArtifact()].splice(h,1);break}}b.parentNode.removeChild(b);SRColorsCustomization.toggleNoRecordsYetMessage();StyleRuleManager.executeOperationCallback("onModify");dijit.byId("pleasewait").hide()}},error:function(h,g){dijit.byId("pleasewait").hide();xhrErrHandler(h,g,"Error occurred in deleting the rule.")}})}};SRColorsCustomization.showColorPalette=function(f){dojo.byId("SRColorFormColorFocus").value=f;dojo.byId("colorswheelstyle").innerHTML=f;dojo.byId("colorswheeltip").style.display="block";var b=dojo.byId("colorswheel");b.style.display="";dojo.require("dojox.widget.ColorPicker");dojo.require("dijit.ColorPalette");if(!dijit.byId("colorswheel")){var a=new dijit.ColorPalette({onChange:function(g){SRColorsCustomization.setColor(g)}},b);a.startup()}};SRColorsCustomization.setColor=function(b){var a=dojo.byId("SRColorFormColorFocus").value;if(a=="background"){dojo.byId("SRColorFormBackgroundColor").style.backgroundColor=b;dojo.byId("SRColorFormPreview").style.backgroundColor=b}else{if(a=="font"){dojo.byId("SRColorFormFontColor").style.backgroundColor=b;dojo.byId("SRColorFormPreview").style.color=b}}};SRColorsCustomization.setBackgroundColor=function(a){dojo.byId("SRColorFormBackgroundColor").style.backgroundColor=a;dojo.byId("SRColorFormPreview").style.backgroundColor=a};SRColorsCustomization.setFontColor=function(a){dojo.byId("SRColorFormFontColor").style.backgroundColor=a;dojo.byId("SRColorFormPreview").style.color=a};SRColorsCustomization.applyToSR=function(pIsHeaderMaximized){if(!SRUtils.isCurrentSRLoaded()){return}if(!SRColorsCustomization.rulesLoaded[StyleRuleManager.artifacts.SR]){SRColorsCustomization.fetchCustomizations({onComplete:SRColorsCustomization.applyToSR,artifact:StyleRuleManager.artifacts.SR});return}var operatorsMapping={"=":"==","!=":"!="};var app_operands_mappings={status:{sr_attribute:"Status",ui_id:"status"},"sub-Status":{sr_attribute:"Substatus",ui_id:"substatus"},severity:{sr_attribute:"Severity",ui_id:"severity"},ODFlag:{sr_attribute:"odFlag",ui_id:"odFlag"},esclStatus:{sr_attribute:"Escalation",ui_id:"escalationStatus"}};var all_ui_labels={};for(var operand_mapping_property in app_operands_mappings){all_ui_labels[app_operands_mappings[operand_mapping_property].ui_id]=null}if(SRUtils.isCurrentSRLoaded()){if(StyleRuleManager.canApplyRulesForArtifact(StyleRuleManager.artifacts.SR)){for(var i=0;i<SRColorsCustomization.rules[StyleRuleManager.artifacts.SR].length;i++){var lPreference=SRColorsCustomization.rules[StyleRuleManager.artifacts.SR][i];var lAppOperandMapping=app_operands_mappings[lPreference.app_operand];if(lAppOperandMapping!=null){var lSRFieldValue=SRUtils.getCurrentSR()[lAppOperandMapping.sr_attribute];var lIsConditionMet=false;var lCondition=null;if("in"==lPreference.operator){var multiUserOperand=SRColorsCustomization.inOperandExtractor(lPreference.user_operand);if(dojo.indexOf(multiUserOperand,lSRFieldValue)!=-1){lIsConditionMet=true}}else{lCondition='"'+lSRFieldValue+'"'+operatorsMapping[lPreference.operator]+'"'+lPreference.user_operand+'"';try{lIsConditionMet=eval(lCondition)}catch(err){}}if(lIsConditionMet){var ui_id=lAppOperandMapping.ui_id;var lUILabel=dijit.byId(ui_id).domNode;var isCheckbox=(dojo.byId(ui_id).type=="checkbox")?true:false;if(lUILabel!=null){var lCss=SRColorsCustomization.compactStyleToJSON(lPreference.css_compact);if(isCheckbox==true&&!dojo.isIE){dojo.style(lUILabel,"-moz-opacity","0.5");dojo.style(lUILabel,"background",lCss.backgroundColor)}dojo.style(lUILabel,lCss);if(dojo.isIE){dojo.style(dojo.byId(ui_id),"color",lCss.color)}}delete all_ui_labels[ui_id]}}}}for(var each_ui_label in all_ui_labels){var lUILabel=dijit.byId(each_ui_label).domNode;var isCheckbox=(dojo.byId(each_ui_label).type=="checkbox")?true:false;var isReadOnly=(dijit.byId(each_ui_label).readOnly==true)?true:false;var isDisabled=(dojo.attr(lUILabel,"disabled")==true)?true:false;if(lUILabel!=null){dojo.style(lUILabel,SRColorsCustomization.default_style);if(isCheckbox==true){dijit.byId(each_ui_label).domNode.removeAttribute("style")}if(isCheckbox==false){var bgPropName=(dojo.isIE)?"background":"backgroundColor";dojo.style(lUILabel,bgPropName,(isReadOnly||isDisabled)?SRColorsCustomization.default_ro_style.backgroundColor:SRColorsCustomization.default_style.backgroundColor);dojo.style(dojo.byId(each_ui_label),"color",SRColorsCustomization.default_style.color)}}}}};SRColorsCustomization.compactStyleToJSON=function(a){var h={};var b=a.split(";");for(var f=0;f<b.length;f++){if(b[f].length>0){var g=b[f].split(":");if(g.length==2){if(g[0]=="background-color"){g[0]="backgroundColor";if(dojo.isIE){g[0]="background"}}h[g[0]]=g[1]}}}return h};SRColorsCustomization.applyToActivities=function(){if(!SRUtils.isCurrentSRLoaded()){return}if(SRColorsCustomization.rulesLoaded[StyleRuleManager.artifacts.SRACTIVITY]===false){SRColorsCustomization.fetchCustomizations({onComplete:SRColorsCustomization.applyToActivities,artifact:StyleRuleManager.artifacts.SRACTIVITY});return}var o={};var f={};var l=false;for(var b=0;b<SRColorsCustomization.rules[StyleRuleManager.artifacts.SRACTIVITY].length;b++){var g=SRColorsCustomization.rules[StyleRuleManager.artifacts.SRACTIVITY][b];if(true===g.special_rule){f[g.app_operand]=g;l=true}else{o[g.user_operand]=g}}var m=["Customer Problem Description","Update from Customer"];var h=[];function a(q,s){for(var p=0;p<s.length;p++){if(q===s[p]){return true}}return false}if(StyleRuleManager.canApplyRulesForArtifact(StyleRuleManager.artifacts.SRACTIVITY)){if(l){window.activityStore.fetch({onComplete:function(y,v){for(var w=0;w<y.length;w++){var A=y[w];var z=window.activityStore.getValue(A,"activityType");var s=window.activityStore.getValue(A,"audience");var B=false;var x=null;if(f.PUBLISHED_ODM!=null){if(a(z,SRColorsCustomization.workflow_odm_activities)&&(s==="Public")){B=true;x=f.PUBLISHED_ODM}}if(!B&&(f.UNPUBLISHED_ODM!=null)){if(a(z,SRColorsCustomization.workflow_odm_activities)&&(s==="Internal")){B=true;x=f.UNPUBLISHED_ODM}}if(!B&&(f.PUBLISHED_CUSTOMER_UPDATES!=null)){if(a(z,m)&&(s==="Public")){B=true;x=f.PUBLISHED_CUSTOMER_UPDATES}}if(!B&&(f.UNPUBLISHED_CUSTOMER_UPDATES!=null)){if(a(z,m)&&(s==="Internal")){B=true;x=f.UNPUBLISHED_CUSTOMER_UPDATES}}if(B){var p=window.activityStore.getValue(A,"activityId");var q=dojo.byId("ndiv_"+p);var u=SRColorsCustomization.compactStyleToJSON(x.css_compact);dojo.style(q,u);h.push(p)}}}})}}window.activityStore.fetch({onComplete:function(x,u){for(var w=0;w<x.length;w++){var z=x[w];var p=window.activityStore.getValue(z,"activityId");if(!a(p,h)){var q=dojo.byId("ndiv_"+p);var v=SRColorsCustomization.default_style;var y=window.activityStore.getValue(z,"activityType");var s=window.activityStore.getValue(z,"audience");if(StyleRuleManager.canApplyRulesForArtifact(StyleRuleManager.artifacts.SRACTIVITY)){if((s==="Internal")&&(f.UNPUBLISHED_SUPPORT_UPDATES!=null)){v=SRColorsCustomization.compactStyleToJSON(f.UNPUBLISHED_SUPPORT_UPDATES.css_compact)}if((s==="Public")&&(f.PUBLISHED_SUPPORT_UPDATES!=null)){v=SRColorsCustomization.compactStyleToJSON(f.PUBLISHED_SUPPORT_UPDATES.css_compact)}}dojo.style(q,v)}}}})};SRColorsCustomization.severityStore=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&lov=SR_SEVERITY"});SRColorsCustomization.statusStore=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&lov=SR_STATUS"});SRColorsCustomization.substatusStore=null;SRColorsCustomization.trueFalseStore=new dojo.data.ItemFileReadStore({data:{items:[{name:"true",id:"true"},{name:"false",id:"false"}],identifier:"id"}});SRColorsCustomization.escalationStore=new dojo.data.ItemFileReadStore({data:{items:[{name:"Escalated",id:"Escalated"},{name:"Never Escalated",id:"Never Escalated"}],identifier:"id"}});SRColorsCustomization.activityAudienceStore=new dojo.data.ItemFileReadStore({data:{items:[{name:"Public",id:"Public"},{name:"Internal",id:"Internal"}],identifier:"id"}});SRColorsCustomization.activityTypeStore=new dojo.data.ItemFileReadStore({data:{items:[{name:"Update from Customer",id:"Update from Customer"},{name:"Customer Problem Description",id:"Customer Problem Description"}],identifier:"id"}});SRColorsCustomization.currentUserOperandStore=null;SRColorsCustomization.onChangeAppOperandHandler=function(b){var h={onComplete:SRColorsCustomization.populateAppOperandFromStore};var g=dijit.byId("SRColorFormAppOperand").getValue();var a=0;if("status"==g){dijit.byId("SRColorFormUserOperand").store=SRColorsCustomization.statusStore;SRColorsCustomization.currentUserOperandStore=SRColorsCustomization.statusStore;SRColorsCustomization.statusStore.fetch(h)}else{if("sub-Status"==g){if(SRColorsCustomization.substatusStore==null){var f=[];SRColorsCustomization.statusStore.fetch({onComplete:function(l,q){for(var o=0;o<l.length;o++){var p=l[o];var m=SRColorsCustomization.statusStore.getValue(p,"name");dojo.xhrGet({url:"../../../SRHeaderRequest?action=loadlov&lov=SR_SUB_STATUS&parentValue="+m,handleAs:"json",sync:true,load:function(u,s){if(isObjectErroneous(u)){displayErrors(u)}else{f=f.concat(u.items)}},error:function(u,s){xhrErrHandler(u,s,"Error occurred in fetching the substatuses for status: "+m)}})}SRColorsCustomization.substatusStore=new dojo.data.ItemFileReadStore({data:{items:f,identifier:"id"}});SRColorsCustomization.currentUserOperandStore=SRColorsCustomization.substatusStore;dijit.byId("SRColorFormUserOperand").store=SRColorsCustomization.substatusStore;SRColorsCustomization.populateAppOperandFromStore()}})}else{SRColorsCustomization.currentUserOperandStore=SRColorsCustomization.substatusStore;dijit.byId("SRColorFormUserOperand").store=SRColorsCustomization.substatusStore;SRColorsCustomization.populateAppOperandFromStore()}}else{if("severity"==g){dijit.byId("SRColorFormUserOperand").store=SRColorsCustomization.severityStore;SRColorsCustomization.currentUserOperandStore=SRColorsCustomization.severityStore;SRColorsCustomization.severityStore.fetch(h)}else{if("ODFlag"==g){dijit.byId("SRColorFormUserOperand").store=SRColorsCustomization.trueFalseStore;SRColorsCustomization.currentUserOperandStore=SRColorsCustomization.trueFalseStore;SRColorsCustomization.populateAppOperandFromStore()}else{if("esclStatus"==g){dijit.byId("SRColorFormUserOperand").store=SRColorsCustomization.escalationStore;SRColorsCustomization.currentUserOperandStore=SRColorsCustomization.escalationStore;SRColorsCustomization.populateAppOperandFromStore()}else{if("PUBLISHED_ODM"==g){a=1}else{if("UNPUBLISHED_ODM"==g){a=1}else{if("PUBLISHED_CUSTOMER_UPDATES"==g){a=1}else{if("UNPUBLISHED_CUSTOMER_UPDATES"==g){a=1}else{if("PUBLISHED_SUPPORT_UPDATES"==g){a=1}else{if("UNPUBLISHED_SUPPORT_UPDATES"==g){a=1}}}}}}}}}}}dojo.byId("SRColorFormSpecialField").value=a;if(a===1){dojo.style(dojo.byId("SRColorFormOperationRow"),{display:"none"});dojo.style(dojo.byId("SRColorFormUserValueRow"),{display:"none"})}else{dojo.style(dojo.byId("SRColorFormOperationRow"),{display:""});dojo.style(dojo.byId("SRColorFormUserValueRow"),{display:""})}};SRColorsCustomization.onChangeOperationHandler=function(){var a=dijit.byId("SRColorFormOperator").getValue();if("in"==a){dojo.style(dijit.byId("SRColorFormUserOperand").domNode,{display:"none"});dojo.style(dijit.byId("SRColorFormUserMultiOperand").domNode,{display:""});dojo.style(dojo.byId("SRColorFormUserMultiOperandResizer"),{display:""})}else{if("="==a||"!="==a){dojo.style(dijit.byId("SRColorFormUserOperand").domNode,{display:""});dojo.style(dijit.byId("SRColorFormUserMultiOperand").domNode,{display:"none"});dojo.style(dojo.byId("SRColorFormUserMultiOperandResizer"),{display:"none"})}}};SRColorsCustomization.resizeUserMultiOperand=function(b){var f=dijit.byId("SRColorFormUserMultiOperand").domNode;var a=f.size+b;if(a<5||a>15){a=5}f.size=a};SRColorsCustomization.populateAppOperandFromStore=function(){if(SRColorsCustomization.currentUserOperandStore!=null){var a=SRColorsCustomization.currentUserOperandStore;a.fetch({onComplete:function(b,h){if((b!=null)&&(b.length>0)){var m=b[0];var f=a.getValue(m,"name");dijit.byId("SRColorFormUserOperand").setValue(f);var l=dijit.byId("SRColorFormUserMultiOperand").domNode;for(var g=l.length-1;g>=0;g--){l.remove(g)}for(var g=0;g<b.length;g++){var o=dojo.doc.createElement("option");o.innerHTML=b[g].name;o.value=b[g].id;if(window.SRColorFormUserMultiOperandSelectedOptions){if(dojo.indexOf(window.SRColorFormUserMultiOperandSelectedOptions,b[g].id)!=-1){o.selected="selected"}}else{if(g==0){o.selected="selected"}}l.appendChild(o)}window.SRColorFormUserMultiOperandSelectedOptions=null}}})}};SRColorsCustomization.showAddPopularEntriesDialog=function(){dijit.byId("pleasewait").show();var b="The following entries will be added:";b+="<table>";b+="<tr><td>Rule</td><td>Style</td></tr>";b+='<tr><td> - Published ODM</td><td><span style="background-color:#e6ffcc;color:black;">&nbsp; customized text test &nbsp;</span></td></tr><tr><td> - Unpublished ODM</td><td><span style="background-color:#d7e3bc;color:#585858;">&nbsp; customized text test &nbsp;</span></td></tr><tr><td> - Published Customer updates</td><td><span style="background-color:#dbe5f1;color:black;">&nbsp; customized text test &nbsp;</span></td></tr><tr><td> - Unpublished Customer updates</td><td><span style="background-color:#c6d9f0;color:#585858;">&nbsp; customized text test &nbsp;</span></td></tr><tr><td> - Published Support updates</td><td><span style="background-color:#ffffff;color:#000000;">&nbsp; customized text test &nbsp;</span></td></tr><tr><td> - Unpublished Support updates</td><td><span style="background-color:#e0e0e0;color:#585858;">&nbsp; customized text test &nbsp;</span></td></tr>';b+="</table>";b+="<p>Are you sure you want to proceed?</p>";b+='<p><button onclick="SRColorsCustomization.addPopularEntries();" title="Cancel" dojoType="dijit.form.Button">Add the entries</button>';b+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";b+='<button onclick="dijit.byId(\'SRColorsCustomizationPopularEntriesWindow\').hide();" title="Cancel" dojoType="dijit.form.Button">Cancel</button>';b+="</p>";var a=dijit.byId("SRColorsCustomizationPopularEntriesWindow");if(a==null){a=new dijit.Dialog({refocus:false,id:"SRColorsCustomizationPopularEntriesWindow",title:"Popular entries",style:"width: 350px; height: 260px; z-index:2;"})}a.setContent(b);a.show();dijit.byId("pleasewait").hide()};SRColorsCustomization.addPopularEntries=function(){dijit.byId("pleasewait").show();dojo.xhrPost({url:SRColorsCustomization.servlet,content:{action:"add_powerpack_rules"},handleAs:"json",load:function(b,a){if(isObjectErroneous(b)){displayErrors(b);dijit.byId("pleasewait").hide()}else{dijit.byId("SRColorsCustomizationPopularEntriesWindow").hide();SRColorsCustomization.rulesLoaded[StyleRuleManager.currentArtifact()]=false;SRColorsCustomization.showAllRows({onComplete:function(){StyleRuleManager.executeOperationCallback("onModify")}});dijit.byId("pleasewait").hide()}},error:function(b,a){dijit.byId("pleasewait").hide();xhrErrHandler(b,a,"Error occurred in adding popular entries")}})};SRColorsCustomization.createColorToggleButton=function(f){var a=(f===StyleRuleManager.artifacts.SRACTIVITY)?dijit.byId("dData"):dijit.byId("srHeader");var h=(f===StyleRuleManager.artifacts.SRACTIVITY)?"toggleRulesForActivity":"";h=(f===StyleRuleManager.artifacts.SR)?"toggleRulesForSR":h;if(a==undefined||a==null){return}if(dijit.byId(h)){dijit.byId(h).destroy()}var g={showLabel:false,title:"Styles are turned off. Click to turn colors on.",iconClass:"colordisabledIcon",name:h,style:"vertical-align:top;",id:h,onClick:function(){var l=dijit.byId(h).checked;console.log("toggled button checked="+l);StyleRuleManager.toggleRulesForArtifact(f,l)}};var b=new dijit.form.ToggleButton(g);if(b!=undefined){dojo.place(b.domNode,a.addn3Node,"first");dojo.style(a.addn3Node,{display:"","vertical-align":"top"})}};function dummySRColorsPrefFunction(a){}StyleRuleManager.SRNavSRDialogContext={};StyleRuleManager.SRNavSRDialogContext.artifact=StyleRuleManager.artifacts.SR;StyleRuleManager.SRNavSRDialogContext.onModify={};StyleRuleManager.SRNavSRDialogContext.onModify[StyleRuleManager.artifacts.SR]=SRColorsCustomization.applyToSR;StyleRuleManager.SRNavSRDialogContext.onModify[StyleRuleManager.artifacts.SRACTIVITY]=SRColorsCustomization.applyToActivities;StyleRuleManager.SRNavSRACTIVITYDialogContext={};StyleRuleManager.SRNavSRACTIVITYDialogContext.artifact=StyleRuleManager.artifacts.SRACTIVITY;StyleRuleManager.SRNavSRACTIVITYDialogContext.onModify={};StyleRuleManager.SRNavSRACTIVITYDialogContext.onModify[StyleRuleManager.artifacts.SR]=SRColorsCustomization.applyToSR;StyleRuleManager.SRNavSRACTIVITYDialogContext.onModify[StyleRuleManager.artifacts.SRACTIVITY]=SRColorsCustomization.applyToActivities;StyleRuleManager.testDialogContext={};StyleRuleManager.testDialogContext.artifact=StyleRuleManager.artifacts.SR;dojo.addOnLoad(StyleRuleManager.getApplyRulesFlags);var Barrier={};function CustManageViewDetails(a,g,f,b){this.viewId=a;this.dndSource=g;this.jsonContent=f;this.manageViewDialogRef=b;this.savedJsonContent=null;this.rulesMap=null;this.slaveObject=null;this.appliedRuleSetStyles=new Array();this.custColumnsToStyle=new Map();this.areRulesAssessed=false}var srLOVUtil={};var PLA_TYPE_CWW="CWW";var ACCOUNT_NAME="accountName";var ACCOUNT_ID="accountId";var ACCOUNT_COUNTRY="country";var CONTACT_EMAIL="contactEmail";var CSI="csi";var CSI_ID="csiId";var CSI_ACCOUNT_NUMBER="accountNumber";var CSI_ACCOUNT_NAME="accountName";var CSI_ACCOUNT_ID="accountId";var CSI_LOCATION="location";var CSI_CONTACT_EMAIL="emailAddress";var CSI_ACCOUNT_COUNTRY="country";var CSI_SI_NAME="csiName";var CSI_INPUT="csiQInput";var CSI_ACCOUNT_NUMBER_INPUT="parentAccountNumberQInput";var CSI_ACCOUNT_ID_INPUT="parentAccountIdQInput";var CSI_ACCOUNT_NAME_INPUT="parentAccountNameQInput";var CSI_CONTACT_EMAIL_INPUT="emailAddressQInput";var CSI_ACCOUNT_COUNTRY_INPUT="parentAccountCountryQInput";var CSI_SI_NAME_INPUT="csiNameQInput";var REF_CSI_Q_INPUT="refCsiQInput";var CSI_LABEL="CSI";var CSI_ACCOUNT_NUMBER_LABEL="Account#";var CSI_ACCOUNT_NAME_LABEL="Account Name";var CSI_ACCOUNT_ID_LABEL="Account Id";var CSI_ACCOUNT_COUNTRY_LABEL="Country";var CSI_LOCATION_LABEL="Location";var CSI_SI_NAME_LABEL="SI Name";var REF_CSI_LABEL="Indirect Customer Ref CSI";var CSI_CONTACT_EMAIL_LABEL="Contact E-mail";var SERIAL_NUMBER_CONTACT_EMAIL_LABEL="Contact E-mail";var SERIAL_NUMBER_CONTACT_EMAIL_INPUT="snContactEmailAddressQInput";var SERIAL_NUMBER_CONTACT_EMAIL_FID="snContactEmailAddress";var PRODUCT_TYPE="productType";var PRODUCT_DEFECT_TRACKING_ON_FLAG="defectTrackingOnFlag";var PRODUCT_LINE="productLine";var PRODUCT_GROUP_ID="bugProductGroupIdx2";var TECHNICAL="Technical";var NONTECHNICAL="Non-Technical";var SRTYPE_FID="srType";var CONTACT_ID="contactId";var CONTACT_LAST="contactLastName";var CONTACT_FIRST="contactFirstName";var CONTACT_EMAIL="contactEmail";var CONTACT_PHONE="contactPhone";var CONTACT_TZ="contactTimeZone";var CONTACT_TZ_ID="contactTimeZoneID";var PLATINUM_OUTAGE_TYPE_SEV1_RULE_MSG="OD Outage Type cannot be null for Platinum Sev1 SR's. Reverting OD Outage type to previous value";var FLD_CONFIGURATION_NAME="configurationName";var FLD_HOST_ID="hostId";var FLD_HOST_NAME="hostName";var FLD_CONFIG_LEVEL="configLevel";var FLD_PLATFORM="platformDescription";var FLD_PLATFORM_VERSION="platformVersionDescription";var initSubscription=undefined;var zindexCounter=101;var sr_engineerHelpFlagAndSev1=undefined;var globalEngineerHelpFlag=undefined;var exists_openMgrHelp=undefined;var CSI_CONTACT_ID="csiContactId";var NEED_CUSTOM_ROW_STYLE="needCustomRowStyle";var CUSTOM_ROW_STYLES="customRowStyles";var SN_CSI_NON_TECH_ONLY="SNCSINonTechOnly";var criticalSystemHoverMsg="The Support ID associated with this SR is flagged as containing Critical Systems";var beenTo_InEvalEffectOnEnvFields=false;var enabledLOVServlets=new Map();enabledLOVServlets.put("SRHeaderRequest",1);var disabledIds=new Map();disabledIds.put("dummy",true);disabledIds.put("bugProductLine",true);var atLeast3CharsMsg="At least provide three non-wildcard characters before using wildcard.";var LOVServletMap=new Map();LOVServletMap.put("SRHeaderRequest",["SRHeaderDetail"]);var LOVCacheInit=false;var CRITICAL_SYSTEM="Critical System";var cmdbInstanceHostsMap=new Map();var SRM_CLOUD_TME_PUNCHOUT_URL="SRM_CLOUD_TME_PUNCHOUT_URL";var CMDS_INSTANCE_PRIVACY_DATA_FLG_MAP=new Map();var initCMDBConfigLoad=true;dojo.addOnLoad(function(){var a="tundra";if(!dojo.hasClass(dojo.body(),a)){dojo.addClass(dojo.body(),a)}});var staticLOVsMap={set:function(b,a){this[b]=a},get:function(a){return this[a]}};var LOV_SR_SERVICE_TEAM_ROLE="SR_SERVICE_TEAM_ROLE";var LOV_SHIFT_START_END_NUM_TIME="SHIFT_START_END_NUM_TIME";function loadServiceTeamRoleLOV(){processLOVChange();var a={url:"../../../SRHeaderRequest",content:{lov:LOV_SR_SERVICE_TEAM_ROLE,action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(b){staticLOVsMap.set(LOV_SR_SERVICE_TEAM_ROLE,b)},error:function(b){console.error("An error occurred: "+b)},xtout:120000};dojo.xhrGet(a)}function loadShiftStartEndTimeLOV(){processLOVChange();var a={url:"../../../SRHeaderRequest",content:{lov:LOV_SHIFT_START_END_NUM_TIME,action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(b){staticLOVsMap.set(LOV_SHIFT_START_END_NUM_TIME,b)},error:function(b){console.error("An error occurred: "+b)},timeout:120000};dojo.xhrGet(a)}var showGridValidRowsOnly=false;var lovMap=new Map();dojo.require("dijit.Dialog");dojo.extend(dijit.Dialog,{setTitle:function(a){this.titleNode.innerHTML=a||""}});var lovWarningCBFunc;var lovCancelCBFunc;function selectRow(b){var a=getSelectedLOVRow();if(a!=null){handleSelectedRow(b,a)}}function getSelectedLOVRow(){var a=dijit.byId(LOV_GRID_ID);var b=null;if(a!=null&&a.selection.getSelected()!=null){var f=dijit.byId(LOV_GRID_ID).selection.getSelected()[0];b=dijit.byId(LOV_GRID_ID).model.data[f]}return b}function handleSelectedRow(g,b,l){if(hasRowInvalidStatus(b)){var h=extractRowStatusMessage(b);alert(h!=""?h:"This item has the Status field set to 'invalid'. Please choose another item!")}else{var a=extractRowWarningMessage(b);if(a!=""){window.lovWarningCBFunc=function(){setAndCloseLovDialog(g,b)};window.lovCancelCBFunc=function(){if(l!=undefined&&dijit.byId(l)){dijit.byId(l).setValue("")}};var f=getDisplayMessageObj(a,WARNING);displayErrors(f,window.lovWarningCBFunc,window.lovCancelCBFunc)}else{setAndCloseLovDialog(g,b)}}}function setAndCloseLovDialog(b,a){setTargetFieldVals(b,a);closeLOVdialog()}function closeLOVdialog(){var a=dijit.byId("lovDialog");if(a&&a.open){a.hide()}}function extractRowWarningMessage(a){if(a.warningMsg!=undefined&&a.warningMsg!=""){return a.warningMsg}return""}function extractRowStatusMessage(a){if(a.statusMsg!=undefined&&a.statusMsg!=""){return a.statusMsg}return""}function filterQD(source,params,clientSidePaging){var combo=dijit.byId("comboF");if(combo!=null){var comboVal=combo.getValue();var comboDisplayedVal=combo.getDisplayedValue();if(comboVal==""||comboVal==null){if(source=="PROJECT_CONFIG"){comboVal="configurationName"}else{if(source=="HOST_CSI"){comboVal="HostName"}else{alert('Please select value for "Find".');return}}}var text1=dijit.byId("searchText");var textVal;if(text1!=null){textVal=encodeURIComponent(text1.getValue())}if(textVal==""||textVal==null){if(source=="PROJECT_CONFIG"||source=="HOST_CSI"){textVal="*"}else{alert('Please provide value for "Value".');return}}if(textVal!=null&&textVal!=""){var rule=isLOVTextSearchRestricted(source,comboVal);if(rule!=null&&(rule==LIKE_REQUIRES_3_NONWILDCARD_CHARS||rule==LIKE_MAY_NOT_CONTAIN_WILDCARD)){var rcode=restrictQuery(comboDisplayedVal,textVal,rule);if(rcode==-1){return}}var paramStr="";if(params!=undefined&&params!=null&&params.length>0){for(i=0;i<params.length;i++){if(i>0){paramStr=paramStr+","}var obj=params[i];paramStr=paramStr+obj.lookupId+': "'+encodeURIComponent(obj.lookupValue)+'"'}paramStr=paramStr+","}textVal=evalToCapitalize(source,comboVal,textVal);var queryStr="{"+paramStr+comboVal+': "'+textVal+'"';var grid=dijit.byId("grid");if(source=="PROJECT_CONFIG"){var isPlatinumId=dijit.byId("platinumCheckBox");var isPlatinumValue=isPlatinumId.getValue();var configurationLevelQueryOb;var orgIdQueryOb;if(isPlatinumValue!==false){configurationLevelQueryOb='configurationLevel: "'+isPlatinumValue+'"';queryStr=queryStr+","+configurationLevelQueryOb}}else{if(source=="HOST_CSI"){var isPlatinumId=dijit.byId("platinumCheckBox");var isPlatinumValue=isPlatinumId.getValue();var configurationLevelQueryOb;var orgIdQueryOb;if(isPlatinumValue!==false){configurationLevelQueryOb='ConfigurationLevel: "'+isPlatinumValue+'"';queryStr=queryStr+","+configurationLevelQueryOb}}}if(source=="ENV_NAME"){var addFilter={lookupId:comboVal,lookupValue:textVal};queryStr=queryStr+"}";var newParams=new Array();newParams.push(addFilter);dojo.forEach(params,function(oneParam){newParams.push(oneParam)});retrievePodCloudConfigUsingJSONP(grid,newParams);return}queryStr=queryStr+"}";var queryObj=eval("("+queryStr+")");var dstore=getDynamicQueryItemStore(false);dojo.connect(dstore,"errorHandler",ajaxLoadingError);var tzOffset=new Date().getTimezoneOffset();var t=(new Date()).getTime();if(grid!=null){grid.model.store.errorMsg="";grid.model.query={queryObj:dojo.toJson(queryObj),action:"getModel",tzOffset:tzOffset,t:t,source:source};grid.model.refresh();if(source=="PRODUCT"){dojo.connect(grid,"onStyleRow",this,dojo.hitch(this,addStyleForRowRestricted))}}}}}function evalToCapitalize(g,b,f){var a=f;if(g==="SERVICE_TEAM"&&b==="empEmail"&&f!==undefined&&f.trim()!==""){a=f.toUpperCase()}return a}function isLOVTextSearchRestricted(b,a){if(b=="contact"||(b==CSI&&a!=CSI_CONTACT_EMAIL)||(b==SERIAL_NUM_FID&&a==HW_HOST_NAME_FID)||(b==SERIAL_NUM_FID&&a==SERIAL_NUM_CSI_FID)||(b==SERIAL_NUM_FID&&a==SERIAL_NUM_ACCT_FID)||(b==SERIAL_NUM_FID&&a==SERIAL_NUM_ACCT_NUM_FID)||(b==SERIAL_NUM_FID&&a==SERIAL_NUM_FID)||(b==SERIAL_NUM_FID&&a==SERIAL_NUM_GCSI_FID)||(b==SERIAL_NUM_FID&&a==CSI)||(b==SERIAL_NUM_FID&&a==SERIAL_NUM_ALT_ACCT_FID)||(b==SERIAL_NUM_FID&&a==SERIAL_NUM_CSI_NAME_FID)||(b==SERIAL_NUM_FID&&a==HW_DESC_FID)||(b==SERIAL_NUM_FID&&a==HW_PROD_FID)||(b==SERIAL_NUM_FID&&a==SERIAL_NUM_LOS_FID)||(b==REF_CSI_FID&&a==REF_CSI_FID)||(b==REF_CSI_FID&&a==REF_CSI_NAME_FID)||(b==REF_CSI_FID&&a==INDIRECT_ACCT_FID)||(b==REF_CSI_FID&&a==INDIRECT_ACCT_ALT_NAME_FID)||(b==REF_CSI_FID&&a==INDIRECT_ACCT_NUM_FID)){return LIKE_REQUIRES_3_NONWILDCARD_CHARS}else{if((b==CSI&&a==CSI_CONTACT_EMAIL)||(b=SERIAL_NUM_FID&&a==SERIAL_NUMBER_CONTACT_EMAIL_FID)){return LIKE_MAY_NOT_CONTAIN_WILDCARD}}return null}function setDefaultSolarisPlatform(f,a){var b={url:"../../../SRPickLovRequest",content:{action:"getDefaultSolarisPlatform",productId:a,productClass:f},handleAs:"json",load:function(h){if(h.opStatus==0){var g="platform,platformDescription,platformVersion,platformVersionDescription";setTargetFieldVals(g,h.data);return h}},error:function(g){console.debug("An error occurred in onchange_component: ",g);return g},timeout:120000};dojo.xhrGet(b)}function setPlatformLov(f,b){var h="PLATFORM";var l=new Array();if(dijit.byId("productClass")){var m=new Object();m.lookupId="productClass";m.lookupValue=dijit.byId("productClass").getValue();l.push(m)}if(dijit.byId("productClassification")&&dijit.byId("productClassification").getValue()==="Hardware"){var m=new Object();m.lookupId="platformClass";m.lookupValue="Hardware";l.push(m)}if(dijit.byId("product")){var m=new Object();m.lookupId="productId";m.lookupValue=dijit.byId("product").getValue();l.push(m)}if(dijit.byId("hasProdPlatform")&&b=="create"){var m=new Object();m.lookupId="hasProdPlatform";m.lookupValue=dijit.byId("hasProdPlatform").getValue();l.push(m)}var g="";if(f!=undefined&&f){if(dijit.byId("platformDescription")&&dijit.byId("platformDescription").getValue()!=""){g="platformDescription:"+dijit.byId("platformDescription").getValue()}}var a="platform,platformDescription,platformVersion,platformVersionDescription";setLovDialog(h,l,g,a,"Platform",null)}function setDatabasePlatformLov(b){var g="DATABASE_PLATFORM";var h=new Array();var f="";if(b!=undefined&&b){if(dijit.byId("databasePlatformDesc")&&dijit.byId("databasePlatformDesc").getValue()!=""){f="databasePlatformDesc:"+dijit.byId("databasePlatformDesc").getValue()}}var a="databasePlatform,databasePlatformDesc,databasePlatformVersion,databasePlatformVersionDesc";setLovDialog(g,h,f,a,"Database Platform",null)}function setBugdb_osLov(){var b="PLATFORM";var f=new Array();var a="bugdb_osDesc,bugdb_os";setLovDialog(b,f,"",a,"Bug DB OS",null)}function setBugdb_reportedRelLov(){var b="PREDEFECT_BUGDB_REPORTED_RELEASE";var g=dijit.byId("bugdb_productGroupId");if(g==undefined||(g!=null&&(g.getValue()==undefined||(dojo.string.trim(g.getValue())=="")))){alert("Product Group Id (a function of the selected Product ) is missing. Please report this error to System Administrator");return}var f=new Array();var h=new Object();h.lookupId=PRODUCT_GROUP_ID;h.lookupValue=g.getValue();f.push(h);var a="bugdb_reportedReleaseDesc,bugdb_reportedRelease,bugdb_reportedReleaseId";setLovDialog(b,f,"",a,"Bug DB Reported Release",null)}function setEbiz_productLov(){var b="PREDEFECT_EBIZ_PRODUCT";var f=new Array();var a="ebiz_productDesc,ebiz_product,ebiz_product_build";setLovDialog(b,f,"",a,"Ebiz Product",null)}function setEbiz_reqTargetLov(){var b="PREDEFECT_EBIZ_REQUESTED_TARGET";var f=new Array();var a="ebiz_reqTargetDesc,ebiz_reqTarget";setLovDialog(b,f,"",a,"Ebiz Requested Target",null)}function setIce_productLov(){var g="PREDEFECT_ICE_PRODUCT";var h=new Array();var b=dijit.byId("ice_productFamily");if(b==undefined||(b!=null&&(b.getValue()==undefined||(dojo.string.trim(b.getValue())=="")))){alert("I/S Product Family is missing. Please choose an I/S Product Family first.");return}var f=new Object();f.lookupId="iceProductFamilyDesc";f.lookupValue=b.getValue();h.push(f);var a="ice_productDesc,ice_product,ice_product_superId,ice_localization,ice_release,ice_productFamily";setLovDialog(g,h,"",a,"ICE Product",null)}function setPlatformVersionLov(b){var g="PLATFORM_VERSION";var l=dijit.byId("platform");if(l==undefined||(l!=null&&(l.getValue()==undefined||(l.getValue()=="")))){alert("Please provide a Platform on the form.");return}var m=new Object();var h=new Array();m.lookupId="platformId";m.lookupValue=l.getValue();h.push(m);var f="";if(b!=undefined&&b){if(dijit.byId("platformVersionDescription")&&dijit.byId("platformVersionDescription").getValue()!=""){f="platformVersionDescription:"+dijit.byId("platformVersionDescription").getValue()}}var a="platformVersion,platformVersionDescription";setLovDialog(g,h,f,a,"Platform Version",null)}function setDatabasePlatformVersionLov(b){var g="DATABASE_PLATFORM_VERSION";var l=dijit.byId("databasePlatform");if(l==undefined||(l!=null&&(l.getValue()==undefined||(l.getValue()=="")))){alert("Please provide a Database Platform on the form.");return}var m=new Object();var h=new Array();m.lookupId="platformId";m.lookupValue=l.getValue();h.push(m);var f="";if(b!=undefined&&b){if(dijit.byId("databasePlatformVersionDesc")&&dijit.byId("databasePlatformVersionDesc").getValue()!=""){f="databasePlatformVersionDesc:"+dijit.byId("databasePlatformVersionDesc").getValue()}}var a="databasePlatformVersion,databasePlatformVersionDesc";setLovDialog(g,h,f,a,"Database Platform Version",null)}function setProductLov(b,f){var h="PRODUCT";var l=new Array();if(srLOVUtil.isInternalCollab()){var m=new Object();m.lookupId="isInternalCollab";m.lookupValue="true";l.push(m)}var g="";if(f!=undefined&&f){if(dijit.byId("productDescription")&&dijit.byId("productDescription").getValue()!=""){g="productDescription:"+dijit.byId("productDescription").getValue()}}var a="";setLovDialog(h,l,g,a,"Product",'onSelectProduct("'+b+'")')}function onSelectProductXX(b,f){var a="product,productDescription,productLine,productClass,productClassification,hasProdPlatform,productVersion,productVersionDescription,component,componentDescription,subcomponent,subcomponentDescription";if(f!=undefined&&f!=null){setTargetFieldVals(a,f)}else{selectRow(a)}if(b==UPDATE_OP){resetHandInstAck(b)}}function setProductVersionLov(f){var l="PRODUCT_VERSION";var g=dijit.byId("product");if(g==undefined||(g!=null&&(g.getValue()==undefined||(g.getValue()=="")))){alert("Please provide a Product on the form.");return}var b=dijit.byId(CSI);var m=new Array();var o=new Object();o.lookupId="productId";o.lookupValue=g.getValue();m.push(o);var h="";if(f!=undefined&&f){if(dijit.byId("productVersion")&&dijit.byId("productVersion").getValue()!=""){h="productVersion:"+dijit.byId("productVersion").getValue()}}var a="productVersion,productVersionDescription";setLovDialog(l,m,h,a,"Product Version",null)}function setLicensedProductLov(m,p){var a="LICENSED_PRODUCT";var l=new Array();var u=getFieldVal(CSI);var g=getFieldVal(SERIAL_NUM_ID);var o=getFieldVal(CSI_ID);var h=getFieldVal(REF_CSI_ID_FID);var b=getFieldVal(REF_CSI_FID);var q="";if(isEmptyVal(u)){alert("Please provide CSI on the form.");return}if(isHardwareOnly()&&isEmptyVal(g)){alert(ENTER_SN_MSG);return}if(isPartnerSR()&&isEmptyVal(b)){alert("Please provide Reference CSI on the form.");return}if(p!=undefined&&p){if(dijit.byId("productDescription")&&dijit.byId("productDescription").getValue()!=""){q="productDescription:"+dijit.byId("productDescription").getValue()}}var s=new Object();s.lookupId=CSI;s.lookupValue=(isPartnerSR())?b:u;l.push(s);var s=new Object();s.lookupId=CSI_ID;s.lookupValue=(isPartnerSR())?h:o;l.push(s);var s=new Object();s.lookupId=HW_FLG_FID;s.lookupValue=isHardwareSR().toString();l.push(s);var s=new Object();s.lookupId=SERIAL_NUM_ID;s.lookupValue=(dijit.byId(SERIAL_NUM_ID))?g:"";l.push(s);var s=new Object();s.lookupId=SERIAL_NUM_PROD_CLASS;s.lookupValue=getFieldVal(SERIAL_NUM_PROD_CLASS);l.push(s);var s=new Object();s.lookupId=SERIAL_NUM_STATUS;s.lookupValue=getFieldVal(SERIAL_NUM_STATUS);l.push(s);var s=new Object();s.lookupId=SN_CSI_CONTIGENCY_STATUS;s.lookupValue=getFieldVal(SN_CSI_CONTIGENCY_STATUS);l.push(s);var f="";setLovDialog(a,l,q,f,"Licensed Product",'onSelectProduct("'+m+'")')}function setLicensedProductVersionLov(){var f="LICENSED_PRODUCT_VERSION";var l=dijit.byId("licensedProduct");if(l==undefined||(l!=null&&(l.getValue()==undefined||(l.getValue()=="")))){alert("Please provide a Product on the form.");return}var b=dijit.byId(CSI);if(b==undefined||(b!=null&&(b.getValue()==undefined||(b.getValue()=="")))){alert("Please provide CSI on the form.");return}var g=new Array();var h=new Object();h.lookupId="licensedProductId";h.lookupValue=l.getValue();g.push(h);h=new Object();h.lookupId=CSI;h.lookupValue=b.getValue();g.push(h);var a="licensedProductVersion,licensedProductVersionDescription";setLovDialog(f,g,"",a,"Licensed Product Version",null)}function setSPOwnerLov(b){var g="employee";var h=new Array();var a="empEmail";var f="";if(b!=undefined&&b){if(dijit.byId("empEmail")&&dijit.byId("empEmail").getValue()!=""){f="empEmail:"+dijit.byId("empEmail").getValue()}}setLovDialog(g,h,f,a,"Owner",null)}function setSPActivityOwnerLov(a,b){var h="employee";var l=new Array();var f='onSelectSpActivityOwner("'+a+'")';var g="";if(b!=undefined&&b){if(dijit.byId(a)&&dijit.byId(a).getValue()!=""){g="empEmail:"+dijit.byId(a).getValue()}}setLovDialog(h,l,g,a,"Owner",f)}function onSelectSpActivityOwner(h){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null){var g=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[g];if(dijit.byId(h+"_lovHidden")){dijit.byId(h+"_lovHidden").setValue(f.empEmail)}dijit.byId(h).setValue(f.empEmail);var a=dijit.byId("lovDialog");if(a!=null&&a.open){a.hide()}}}function setDatabaseLov(b){var g="DATABASE";var h=new Array();var f="";if(b!=undefined&&b){if(dijit.byId("databaseDescription")&&dijit.byId("databaseDescription").getValue()!=""){f="databaseDescription:"+dijit.byId("databaseDescription").getValue()}}var a="database,databaseDescription,databaseVersion,databaseVersionDescription";setLovDialog(g,h,f,a,"Database",null)}function setDatabaseVersionLov(b){var h="DATABASE_VERSION";var f=dijit.byId("database");if(f==undefined||(f!=null&&(f.getValue()==undefined||(f.getValue()=="")))){alert("Please provide a Database on the form.");return}var l=new Array();var m=new Object();m.lookupId="databaseId";m.lookupValue=f.getValue();l.push(m);var g="";if(b!=undefined&&b){if(dijit.byId("databaseVersion")&&dijit.byId("databaseVersion").getValue()!=""){g="databaseVersion:"+dijit.byId("databaseVersion").getValue()}}var a="databaseVersion,databaseVersionDescription";setLovDialog(h,l,g,a,"Database Version",null)}function setComponentLov(b){var h="COMPONENT";var f=dijit.byId("product");if(f==undefined||(f!=null&&(f.getValue()==undefined||(f.getValue()=="")))){alert("Please provide a Product on the form.");return}var l=new Array();var m=new Object();m.lookupId="productId";m.lookupValue=f.getValue();l.push(m);var g="";if(b!=undefined&&b){if(dijit.byId("componentDescription")&&dijit.byId("componentDescription").getValue()!=""){g="componentDescription:"+dijit.byId("componentDescription").getValue()}}var a="component,componentDescription,subcomponent,subcomponentDescription";setLovDialog(h,l,g,a,"Component","onSelectComponent('"+f.getValue()+"','"+a+"')")}function onSelectComponent(g,h){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null&&b.selection.getSelected()!=undefined){var l=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[l];setTargetFieldVals(h,f);checkIfSubcompExist(g,f.component);var a=dijit.byId("lovDialog");if(a!=undefined){a.hide()}}}function checkIfSubcompExist(b,a){b=(b==null&&dijit.byId("product"))?dijit.byId("product").getValue():b;if(b==null||b==""||a==""||a==null){return}if(dijit.byId(SRTYPE_FID)&&dijit.byId(SRTYPE_FID).getValue()==TECHNICAL&&dijit.byId("hasSubcomponent")){var f={url:"../../../SRPickLovRequest",content:{action:"getCompDetail",productId:b,componentId:a},handleAs:"json",load:function(g){if(g.opStatus==1){dijit.byId("hasSubcomponent").setValue("F");setSubcomponentStyle();displayErrors(g)}else{if(g.opStatus==0){(g.hasSubcomponent)?dijit.byId("hasSubcomponent").setValue("T"):dijit.byId("hasSubcomponent").setValue("F");setSubcomponentStyle()}}},error:function(g){console.debug("An error occurred in onchange_component: ",g)},timeout:120000};dojo.xhrGet(f)}else{if(dijit.byId("hasSubcomponent")){dijit.byId("hasSubcomponent").setValue("");setSubcomponentStyle()}}}function setSubcomponentStyle(){var a="subcomponentDescription";if(dijit.byId("hasSubcomponent")&&dijit.byId(a)){if(dijit.byId(SRTYPE_FID).getValue()==TECHNICAL&&dijit.byId("hasSubcomponent").getValue()=="T"){setConditionalReqFld(a,true)}else{setConditionalReqFld(a,false)}}}function setConditionalReqFld(f,b){var a=b?{display:"inline-block","vertical-align":"middle"}:{display:"none"};if(dijit.byId(f)){dijit.byId(f).setAttribute("required",b);setStyleForChildNode("#"+f+"Row span.conditionalSrReq","img",a)}}function setSubcomponentLov(f){var l="SUB_COMPONENT";var b=dijit.byId("component");if(b==undefined||(b!=null&&(b.getValue()==undefined||(b.getValue()=="")))){alert("Please provide Component on the form.");return}var g=dijit.byId("product");if(g==undefined||(g!=null&&(g.getValue()==undefined||(g.getValue()=="")))){alert("Please provide a Product on the form.");return}var m=new Array();var o=new Object();o.lookupId="componentId";o.lookupValue=b.getValue();m.push(o);o=new Object();o.lookupId="productId";o.lookupValue=g.getValue();m.push(o);var h="";if(f!=undefined&&f){if(dijit.byId("subcomponentDescription")&&dijit.byId("subcomponentDescription").getValue()!=""){h="subcomponentDescription:"+dijit.byId("subcomponentDescription").getValue()}}var a="subcomponent,subcomponentDescription";setLovDialog(l,m,h,a,"Sub Component",null)}function setToolsVersionLov(f){var l="TOOLS_VERSION";var g=dijit.byId("product");if(g==undefined||(g!=null&&(g.getValue()==undefined||(g.getValue()=="")))){alert("Please provide a Product on the form.");return}var b=dijit.byId("productLine");if(b==undefined||(b!=null&&(b.getValue()==undefined||(b.getValue()=="")))){alert("Please provide a Product on the form.");return}var m=new Array();var o=new Object();o.lookupId="productLine";o.lookupValue=b.getValue();m.push(o);o=new Object();o.lookupId="productId";o.lookupValue=g.getValue();m.push(o);var h="";if(f!=undefined&&f){if(dijit.byId("toolsVersionVersion")&&dijit.byId("toolsVersionVersion").getValue()!=""){h="toolsVersionVersion:"+dijit.byId("toolsVersionVersion").getValue()}}var a="toolsVersion,toolsVersionVersion";setLovDialog(l,m,h,a,"Tools Version",null)}function setProjectLov(h){var a="PROJECT";var p=dijit.byId("csiId");var l=dijit.byId("accountId");var b=getFieldVal(REF_CSI_ID_FID);if((p==undefined||(p!=null&&(p.getValue()==undefined||(p.getValue()==""))))){alert("Please provide CSI on the form.");return}if(isPartnerSR()&&isEmptyVal(b)){alert("Please provide Reference CSI on the form.");return}var g=new Array();var o=new Object();o.lookupId="csiId";o.lookupValue=(isPartnerSR())?b:p.getValue();g.push(o);var m="";if(h!=undefined&&h){if(dijit.byId("projectName")&&dijit.byId("projectName").getValue()!=""){m="projectName:"+dijit.byId("projectName").getValue()}}var f="project,projectName,configurationName,configuration,milestone";setLovDialog(a,g,m,f,"Project",null)}function setProjectMilestoneLov(b){var g="PROJECT_MILESTONE";var h=new Array();if(dijit.byId("project")){if(dijit.byId("project").getValue()==""){alert("Please select Project first.");return}var l=new Object();l.lookupId="project";l.lookupValue=dijit.byId("project").getValue();h.push(l)}var f="";if(b!=undefined&&b){if(dijit.byId("milestone")&&dijit.byId("milestone").getValue()!=""){f="milestone:"+dijit.byId("milestone").getValue()}}var a="milestone,milestoneId,milestoneDate";setLovDialog(g,h,f,a,"Project Milestone",null)}function setProjectConfigLov(l){var a="PROJECT_CONFIG";var p=dijit.byId("csi");var b=getFieldVal(REF_CSI_FID);if(p==undefined||(p!=null&&(p.getValue()==undefined||(p.getValue()=="")))){alert("Please provide CSI on the form.");return}if(isPartnerSR()&&isEmptyVal(b)){alert("Please provide Reference CSI on the form.");return}var h=new Array();var o=new Object();o.lookupId="csi";o.lookupValue=(isPartnerSR())?b:p.getValue();h.push(o);var g=isPartnerSR()?null:dijit.byId("accountIntegId").getValue();if(g!=undefined&&g!=null){var o=new Object();o.lookupId="configurationOrganizationId";o.lookupValue=g;h.push(o)}var m="";if(l!=undefined&&l){if(dijit.byId("configurationName")&&dijit.byId("configurationName").getValue()!=""){m="configurationName:"+dijit.byId("configurationName").getValue()}}var f="configuration,configurationName,configurationOCMConfiguration,hostId,hostName,configLevel";setLovDialog(a,h,m,f,"Configuration",null);if(dijit.byId("configurationName")&&dijit.byId("configurationName").getValue()!=""){setConditionalReqFld("hostId",true)}}function setConfigHostLov(l,p){var w=dijit.byId("csi");if(w==undefined||(w!=null&&(w.getValue()==undefined||(w.getValue()=="")))){alert("Please provide CSI on the form.");return}if(l=="update"&&getInitMode()){return}if(dijit.byId("configurationName")&&dijit.byId("configurationName").getValue()!=""){setConditionalReqFld("hostId",true);var a="CONFIG_HOST";var h=new Array();var f=dijit.byId("configuration");var v=new Object();v.lookupId="CONFIG_ID";v.lookupValue=f.getValue();h.push(v);var m=dijit.byId("serialNum");var v=new Object();v.lookupId="HOST_SN";v.lookupValue=m.getValue();h.push(v);var g=isPartnerSR()?null:getEvalFieldVal("accountIntegId");if(g!=undefined&&g!=null){var v=new Object();v.lookupId="HOST_ORGID";v.lookupValue=g;h.push(v)}var b=dijit.byId("refCSI");var o=dijit.byId("csi");var s;if(isPartnerSR()){if(b&&b.getValue()!=""){s=b}else{alert("Please provide Reference CSI on the form.")}}else{s=o}var v=new Object();v.lookupId="HOST_CSI";v.lookupValue=s.getValue();h.push(v);var u="";if(p){if(dijit.byId("hostId")&&dijit.byId("hostId").getValue()!=""){u="hostId:"+dijit.byId("hostId").getValue();u=u.substring(0,u.length-1)}}var q="onSelectHost('"+l+"')";setLovDialog(a,h,u,"","Host",q)}else{var h=new Array();a="HOST_CSI";var b=dijit.byId("refCSI");var o=dijit.byId("csi");var s;if(isPartnerSR()){if(b&&b.getValue()!=""){s=b}else{alert("Please provide Reference CSI on the form.")}}else{s=o}var v=new Object();v.lookupId="HOST_CSI";v.lookupValue=s.getValue();h.push(v);var m=dijit.byId("serialNum");var v=new Object();v.lookupId="HOST_SN";v.lookupValue=m.getValue();h.push(v);var g=isPartnerSR()?null:getEvalFieldVal("accountIntegId");if(g!=undefined&&g!=null){var v=new Object();v.lookupId="HOST_ORGID";v.lookupValue=g;h.push(v)}var u="";if(p){if(dijit.byId("hostId")&&dijit.byId("hostId").getValue()!=""){u="hostId:"+dijit.byId("hostId").getValue();u=u.substring(0,u.length-1)}}var q="onSelectHost('"+l+"')";setLovDialog(a,h,u,"","Host",q)}}function onSelectHost(h,q){var a="hostId,hostName,platform,platformDescription,platformVersion,platformVersionDescription,configLevel";var g=q;if(!g){var s=dijit.byId("grid").selection.getSelected()[0];g=dijit.byId("grid").model.data[s]}var p=dijit.byId(SERIAL_NUM_FID);var b=g[SERIAL_NUM_FID];var l=g[FLD_HOST_ID];var f=isHardwareSR();if(f&&p&&p.value!=""&&p.value!=b){var o=confirm("Overwrite value in the Serial Number field");if(o){p.setValue(b)}}else{if(f&&p&&p.getValue()==""&&b){p.setValue(b)}}setTargetFieldVals(a,g);var m=dijit.byId("lovDialog");if(m!=undefined){m.hide()}}function setCategoryLov(f){var h="CATEGORY";var b=dijit.byId(SRTYPE_FID);var m=new Object();var l=new Array();if(b!=undefined&&b.getValue()!=""){var m=new Object();m.lookupId=SRTYPE_FID;m.lookupValue=b.getValue();l.push(m)}var m=new Object();m.lookupId="TemplateType";m.lookupValue="Product Template";l.push(m);var m=new Object();m.lookupId="Active";m.lookupValue="Y";l.push(m);var g="";if(f!=undefined&&f){if(dijit.byId("categoryDescription")&&dijit.byId("categoryDescription").getValue()!=""){g="categoryDescription:"+dijit.byId("categoryDescription").getValue()}}var a="category,categoryDescription,clarificationCount,sev1Type";setLovDialog(h,l,g,a,"Category","onSelectCategory()")}function onSelectCategory(b){var a="category,categoryDescription,clarificationCount,sev1Type";if(b!=undefined&&b!=null){setTargetFieldVals(a,b)}else{selectRow(a)}setFieldVal("clarificationName","");setClarificationFld();HWSRUtil.setSR_HW_SW_Flag();serialNumberUtil.handleSRHIs()}function onSelectOutageStatus(h){if(h==undefined){var f=dijit.byId("grid");if(f!=null&&f.selection.getSelected()!=null&&f.selection.getSelected()!=undefined){var l=dijit.byId("grid").selection.getSelected()[0];var h=dijit.byId("grid").model.data[l];var b=h.outageStatus;var g="";var a="";if(dijit.byId("TemplateFLD_outageStatus")){g=dijit.byId("TemplateFLD_outageStatus").getValue()}else{g="outageStatus"}a=g+"_lovHidden";if(dijit.byId(g)){dijit.byId(g).setValue(b);if(dijit.byId("TemplateFLD_outageStatus")){dojo.style(dojo.byId(g),"width",(parseInt(b.length)*0.6).toString()+"em")}}if(dijit.byId(a)){dijit.byId(a).setValue(b)}closeLOVdialog()}}}var clarificationCountObj={};function getClarificationCount(a){if(isTechnicalSR()||a==undefined||a==null||a==""){setClarificationFld();return}if(clarificationCountObj.categoryId!=undefined&&clarificationCountObj.categoryId==a){setFieldVal("clarificationCount",clarificationCountObj.clarificationCount);setClarificationFld();return}clarificationCountObj={};var b={url:"../../../SRHeaderRequest",content:{action:"getClarificationCount",category:a},handleAs:"json",preventCache:true,load:function(f){if(f!=undefined&&f.clarificationCount!=undefined){setFieldVal("clarificationCount",f.clarificationCount);clarificationCountObj.categoryId=a;clarificationCountObj.clarificationCount=f.clarificationCount}setClarificationFld();return f},error:function(f){console.error("An error occurred: ",f);setClarificationFld();return f},timeout:10000};return dojo.xhrGet(b)}function setClarificationFld(){var g="none";var h=false;var f=true;if(getFieldVal("clarificationCount")!=""&&getFieldVal("clarificationCount")!="0"&&!isTechnicalSR()){g="";h=true;f=false}setConditionalReqFld("clarificationName",h);var a=self.location.href;var b=(a!=undefined&&(a.indexOf("SRCreate.jspx")!=-1))?CREATE_OP:UPDATE_OP;if((b==CREATE_OP||(b==UPDATE_OP&&dijit.byId("MaximizedSRHeaderDialog")))&&dojo.byId("clarificationNameRow")){dojo.style(dojo.byId("clarificationNameRow"),{display:g})}if(dijit.byId("clarificationName")){dijit.byId("clarificationName").setDisabled(f)}if(dojo.byId("clarificationNameSearch")){dojo.style(dojo.byId("clarificationNameSearch"),{display:g})}}function setClarificationLov(b){var h="PRODUCT_TEMPLATE_CLARIFICATION";var g=getFieldVal("category");var l=new Array();var m=new Object();m.lookupId="categoryId";m.lookupValue=g;l.push(m);var m=new Object();m.lookupId="ActiveFlag";m.lookupValue="Y";l.push(m);var f="";if(b!=undefined&&b){if(dijit.byId("clarificationName")&&dijit.byId("clarificationName").getValue()!=""){f="clarificationName:"+dijit.byId("clarificationName").getValue()}}var a="clarificationId,clarificationName,parentTemplateSev1Type";setLovDialog(h,l,f,a,"Clarification","onSelectClarification()")}function onSelectClarification(b){var a="clarificationId,clarificationName,parentTemplateSev1Type";if(b!=undefined&&b!=null){setTargetFieldVals(a,b)}else{selectRow(a)}HWSRUtil.setSR_HW_SW_Flag();serialNumberUtil.handleSRHIs()}function setLanguageLov(b,f){if(b=="create"&&!getSrCreatePageLoaded()){return}var h="LANGUAGE";var l=new Array();var m=new Object();m.lookupId=HW_FLG_FID;m.lookupValue=isHardwareSR().toString();l.push(m);var g="";if(f!=undefined&&f){if(dijit.byId("languageDescription")&&dijit.byId("languageDescription").getValue()!=""){g="languageDescription:"+dijit.byId("languageDescription").getValue()}}var a="languageDescription";setLovDialog(h,l,g,a,"Language",null)}function setDefectLov(){var f="DEFECT";var b=dijit.byId(CSI);if(b==undefined||(b!=null&&(b.getValue()==undefined||(b.getValue()=="")))){alert("Please provide CSI on the form.");return}var g=new Array();var h=new Object();h.lookupId=CSI;h.lookupValue=b.getValue();g.push(h);var a="defect,defectDescription";setLovDialog(f,g,"",a,"Defect",null)}function setPredefectFlatGroupLov(){var b="PREDEFECT_PLA_FLAT_STRUCTURE";var f=new Array();var a="group,groupDesc";setLovDialog(b,f,"",a,"Organization",null)}function setFlatGroupLov(){var b="PLA_FLAT_STRUCTURE";var f=new Array();var a="group,groupDesc";setLovDialog(b,f,"",a,"Organization",null)}function setGroupLov(){var f="PLA_TREE_STRUCTURE";var h=new Array();var a="group,groupName";var g="Organizational Group";var b={url:"../../../SRPickLovRequest",content:{source:f,action:"getTreeModel"},preventCache:true,handleAs:"json",load:function(l){dijit.byId("pleasewait").hide();console.debug("treeData: ",l);if(l.error!=undefined){alert("An error occurend when querying the PLA hierarchy: "+l.error)}else{showTreeDialog(g,l)}},error:function(l){dijit.byId("pleasewait").hide();showSimpleError("The request to server for PLA data has timed out. Please try again!")},timeout:120000};dijit.byId("pleasewait").show();dojo.xhrGet(b)}function showTreeDialog(q,f){var m=dijit.byId("treeDialog");if(m!=null){m.hide();m.destroyRecursive()}m=new dijit.Dialog({id:"treeDialog",style:"width: 75%;background-color:#FFFFEE;z-index:200;border:1px solid rgb(153,187,232);",title:"Pick "+q});var s=new srmdojoc.data.LazyLoadItemFileReadStore({data:f});console.debug("myStore:",s);var g=new dijit.tree.ForestStoreModel({store:s,rootLabel:"Organization",childrenAttrs:["children"]});var b;var u;var h;var l=document.createElement("div");var w=new dijit.Tree({model:g,onClick:function(x){console.debug("selected node: ",x.groupId,x.groupName,x.groupType,x);if(x.groupId!=undefined&&x.groupName!=undefined){b=x.groupId;u=x.groupName;h=x.groupType;l.innerHTML=u}}});var p=new dijit.layout.ContentPane({style:"width: 98%; overflow:auto; height: 400px; border: 0px; padding: 1px; border: 1px solid #D8D8D8;"});p.containerNode.appendChild(w.domNode);m.containerNode.appendChild(p.domNode);l.setAttribute("style","height: 40px; width: 98%; padding: 1px; padding-top: 4px; border: 1px solid #D8D8D8; margin: 0px; margin-top: 2px;");m.containerNode.appendChild(l);var a=new dijit.form.Button({label:"Ok",onClick:function(x){console.debug(b,u,h);m.hide()}});var v=new dijit.form.Button({label:"Cancel",onClick:function(x){m.hide()}});var o=document.createElement("div");o.setAttribute("style","white-space:nowrap; height:30px; padding-top: 4px;");o.setAttribute("align","center");o.appendChild(a.domNode);o.appendChild(v.domNode);m.containerNode.appendChild(o);dijit.byId("pleasewait").hide();m.show()}function setProductLanguagesLov(){var a="PRODUCT_LANGUAGES";var f=new Array();var g=dijit.byId("product");var l=dijit.byId("productLine");if(g==undefined||(g!=null&&(g.getValue()==undefined||(g.getValue()=="")))){alert("Please provide a Product on the form.");return}var q=new Object();q.lookupId="productLine";q.lookupValue=l.getValue();f.push(q);q=new Object();q.lookupId="productId";q.lookupValue=g.getValue();f.push(q);var b="productLanguages,productLanguagesDesc";var m="SR Product Languages";var o=new Date().getTimezoneOffset();var p=(new Date()).getTime();var h={url:"../../../SRPickLovRequest",content:{source:a,lookupParam:dojo.toJson(f),action:"getModel",tzOffset:o,t:p},preventCache:true,handleAs:"json",load:function(s){dijit.byId("pleasewait").hide();createShuttleWidget(s,a,"",b,m,null,f);return s},error:function(u){dijit.byId("pleasewait").hide();var s=getDisplayMessageObj("Failed to create pick list for product language.",2);displayErrors(s)},timeout:120000};dijit.byId("pleasewait").show();dojo.xhrGet(h)}function onSelectEmployeeTeam(){}function setServiceTeamLov(){var b="SERVICE_TEAM";var g=new Array();var a="serviceTeam,serviceTeamDesc,serviceTeamPrimary,serviceTeamRole,serviceTeamEmailFlag,serviceTeamEmail,serviceTeamAudience,serviceTeamShiftStartTime,serviceTeamShiftEndTime,serviceTeamShiftPLAGroup,serviceTeamShiftAvailability,serviceTeamSource";var f="Service Team";var g=new Array();setLovDialog(b,g,"",a,f,"onSelectEmployeeTeam()")}function createShuttleWidget(O,x,K,h,D,J,a){var M=dijit.byId("shuttleDialog");if(M!=null){M.hide();M.destroyRecursive()}M=new dijit.Dialog({id:"shuttleDialog",style:"width: 800px; background-color:#FFFFEE; border:1px solid rgb(153,187,232); z-index:2;",title:"Pick "+D});M._size=function(){return true};M.show();var w=document.createElement("table");w.setAttribute("width","100%");M.setContent(w);var H=document.createElement("tbody");w.appendChild(H);var Q=document.createElement("tr");Q.setAttribute("width","100%");H.appendChild(Q);var g=document.createElement("td");g.setAttribute("width","350px");g.setAttribute("valign","top");g.setAttribute("align","left");Q.appendChild(g);var s=document.createElement("span");s.innerHTML="Available";g.appendChild(s);g.appendChild(document.createElement("br"));var z=document.createElement("select");z.setAttribute("id","select_1");z.setAttribute("multiple","true");g.appendChild(z);var v=document.createElement("td");v.setAttribute("valign","middle");v.setAttribute("align","center");Q.appendChild(v);var q=new dijit.form.Button({label:">",id:"shuttle_button_1",onClick:function(U){moveSelectedOptions("select_1","select_2")}});v.appendChild(q.domNode);var L=document.createElement("br");v.appendChild(L);var m=new dijit.form.Button({label:"<",id:"shuttle_button_2",onClick:function(U){moveSelectedOptions("select_2","select_1")}});v.appendChild(m.domNode);var u=document.createElement("td");u.setAttribute("width","350px");u.setAttribute("valign","top");u.setAttribute("align","right");Q.appendChild(u);var o=document.createElement("span");o.innerHTML="Selected";u.appendChild(o);u.appendChild(document.createElement("br"));var f=document.createElement("select");f.setAttribute("id","select_2");f.setAttribute("multiple","true");u.appendChild(f);var A=new dijit.form.Button({label:"Ok",id:"shuttle_button_ok",onClick:function(Y){var U=dojo.byId("select_2");var aa=h.split(",");var V=aa[0];var X=aa[1];console.debug("Update fields: ",V,X);var Z="";for(N=0;N<=U.length-1;N++){Z=Z+U.options[N].text;if(N!=U.length-1){Z=Z+","}}var W=getSelectedOptions("select_2");W.forEach(function(ab){console.debug("selected: ",ab.value+" - "+ab.text)});deleteAllOptions(dojo.byId(V));moveSelectedOptions("select_2",V);console.debug(Z);dijit.byId(X).setValue(Z);M.destroyRecursive()}});var I=new dijit.form.Button({label:"Cancel",id:"shuttle_button_cancel",onClick:function(U){M.destroyRecursive()}});var E=document.createElement("tr");E.setAttribute("width","100%");H.appendChild(E);var S=document.createElement("td");S.setAttribute("width","47%");S.setAttribute("valign","top");S.setAttribute("align","right");E.appendChild(S);S.appendChild(A.domNode);var p=document.createElement("td");E.appendChild(p);var F=document.createElement("td");F.setAttribute("width","47%");F.setAttribute("valign","top");F.setAttribute("align","left");E.appendChild(F);F.appendChild(I.domNode);var T=new dijit.form.MultiSelect({},dojo.byId("select_1"));dojo.byId("select_1").style.cssText="width: 350px;";dojo.byId("select_1").setAttribute("size","15");var R=new dijit.form.MultiSelect({},dojo.byId("select_2"));dojo.byId("select_2").style.cssText="width: 350px;";dojo.byId("select_2").setAttribute("size","15");var C=h.split(",");var G=C[0];var P=C[1];var y=dojo.byId(G);for(N=0;N<=y.length-1;N++){console.debug("already selected:",y.options[N].value,y.options[N].text);option=new Option(y.options[N].text,y.options[N].value);var b=dojo.byId("select_2");b.options[b.length]=option}console.debug("Available items: ",O.items);if(dojo.isArray(O.items)){for(var N=0;N<O.items.length;N++){var B=O.items[N];var l=false;for(j=0;j<=y.length-1;j++){if(y.options[j].text==B.selectItemName){l=true}}if(!l){option=new Option(B.selectItemName,B.selectItemId);var b=dojo.byId("select_1");b.options[b.length]=option}else{}}if(O.items.length==0){M.destroyRecursive();alert("There are no available options for this field.")}}}function setContactLov(h,m){var b="contact";if(dijit.byId("csiId")&&dijit.byId("csiId").getValue()==""){alert("Please enter CSI first");return}var o=dijit.byId(ACCOUNT_NAME);var g=new Array();if(dijit.byId("accountId")&&dijit.byId("accountId").getValue()!=""){var q=new Object();q.lookupId="accountId";q.lookupValue=dijit.byId("accountId").getValue();g.push(q)}if(dijit.byId("csiId")&&dijit.byId("csiId").getValue()!=""){var l=dijit.byId("csiId").getValue();var q=new Object();q.lookupId="csiId";q.lookupValue=l;g.push(q)}if(dijit.byId(SRTYPE_FID)){var q=new Object();q.lookupId=SRTYPE_FID;q.lookupValue=dijit.byId(SRTYPE_FID).getValue();g.push(q)}if(dijit.byId("alternateContactId")&&dijit.byId("alternateContactId").getValue()!=""){var a=dijit.byId("alternateContactId").getValue();var q=new Object();q.lookupId="alternateContactId";q.lookupValue=a;g.push(q)}var p="";if(m!=undefined&&m){if(dijit.byId("contactLastName")&&dijit.byId("contactLastName").getValue()!=""){p="contactLastName:"+dijit.byId("contactLastName").getValue()}}var f="contactFirstName,contactLastName,contactEmail,contactPhone,contactTimeZone,contactId,contactMethod,country";setLovDialog(b,g,p,f,"Contact","onSelectContact('"+h+"')")}function setAlternateContactLov(g,l){var a="contact";var f=new Array();if(dijit.byId("accountId")){var p=new Object();p.lookupId="accountId";p.lookupValue=dijit.byId("accountId").getValue();f.push(p)}if(dijit.byId(SRTYPE_FID)){var p=new Object();p.lookupId=SRTYPE_FID;p.lookupValue=dijit.byId(SRTYPE_FID).getValue();f.push(p)}if(dijit.byId("csiId")&&dijit.byId("csiId").getValue()!=""){var h=dijit.byId("csiId").getValue();var p=new Object();p.lookupId="csiId";p.lookupValue=h;f.push(p)}if(dijit.byId("contactId")&&dijit.byId("contactId").getValue()!=""){var m=dijit.byId("contactId").getValue();var p=new Object();p.lookupId="primaryContactId";p.lookupValue=m;f.push(p)}var o="";if(l!=undefined&&l){if(dijit.byId("alternateContactLastName")&&dijit.byId("alternateContactLastName").getValue()!=""){o="contactLastName:"+dijit.byId("alternateContactLastName").getValue()}}var b="alternateContactFirstName,alternateContactLastName,alternateContactEmail,alternateContactPhone,alternateContactTimeZone,alternateContactId";setLovDialog(a,f,o,b,"Alternate Contact","onSelectAlternateContact('"+g+"')")}function setOutageStatusLov(){var h="OUTAGE_STATUS";var f=dijit.byId("groupID");var b=undefined;if(f==undefined&&headerDataAsJson!=undefined){b=headerDataAsJson.GroupId}else{b=f.getValue()}if(b==undefined||b==null||b==""){alert("Cannot display List of Outage Status if Group is empty.");return}var l=new Array();var m=new Object();m.lookupId="groupID";m.lookupValue=b;l.push(m);var g="";var a="outageStatusId,outageStatus";setLovDialog(h,l,g,a,"Outage Status","onSelectOutageStatus()")}function setEnvNameLov(a){var b="ENV_NAME";var s=getEvalFieldVal(CSI);var f=getEvalFieldVal(REF_CSI_FID);var m=(isPartnerSR())?f:s;if(m==undefined||m==null||m==""){alert("Cannot display List of Environment if CSI is empty.");return}var h=new Array();var q=new Object();q.lookupId="csiNumber";q.lookupValue=m;h.push(q);if(a!=undefined){var o=getEvalFieldVal("envName");var q=new Object();q.lookupId="name";q.lookupValue=o;h.push(q);var l=new Object();l.lookupId="fromInputField";l.lookupValue=true;h.push(l)}var p="";var g=undefined;setLovDialog(b,h,p,g,"Environment","onSelectEnvName()")}var populateContact;function onSelectCSIContact(){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null&&b.selection.getSelected()!=undefined){var m=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[m];if(hasRowInvalidStatus(f)){var l=extractRowStatusMessage(f);alert(l!=""?l:"This item has the Status field set to 'invalid'. Please choose another item!");return}else{if(f.csiContactId!=undefined&&dojo.string.trim(f.csiContactId)!=""&&dijit.byId("alternateContactId")){var o=dijit.byId("alternateContactId").value;if(o==f.csiContactId){alert("Selected primary contact is same as alternate contact. Please select different primary contact or change alternate contact.");if(dijit.byId("contactLastName")){dijit.byId("contactLastName").setValue("")}return}}var h=undefined;if(f[CSI]!=undefined&&f[CSI]==dijit.byId(CSI).getValue()){if(f[CSI_CONTACT_ID]!=undefined&&f[CSI_CONTACT_ID]!=""&&f[CSI_CONTACT_ID]!=dijit.byId(CONTACT_ID).getValue()){var g=loadCsiContactObjFromSelected(f);var a=undefined;populateSelectedContact(a,g)}h=CSI}else{h=CSI_CONTACT_ID+","+CSI}setTargetFieldVals(h,f);closeLOVdialog()}}else{}}function onSelectContact(a){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null&&b.selection.getSelected()!=undefined){var g=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[g];populateSelectedContact(a,f)}}function populateSelectedContact(a,f){if(f.statusFlag!=""&&f.statusFlag!="valid"){alert("Invalid Contact. Not available for selection.");if(dijit.byId("contactLastName")){dijit.byId("contactLastName").setValue("")}return}if(dijit.byId("alternateContactId")){var h=dijit.byId("alternateContactId").value;if(h==f.contactId){alert("Selected primary contact is same as alternate contact. Please select different primary contact or change alternate contact.");if(dijit.byId("contactLastName")){dijit.byId("contactLastName").setValue("")}return}}var g="contactLastName_lovHidden";if(dijit.byId(g)){dijit.byId(g).setValue(f.contactLastName)}dijit.byId("contactId").setValue(f.contactId);dijit.byId("contactLastName").setValue(f.contactLastName);if(dijit.byId("contactFirstName")){dijit.byId("contactFirstName").setValue(f.contactFirstName)}if(dijit.byId("contactEmail")){dijit.byId("contactEmail").setValue(f.contactEmail)}if(dijit.byId("contactPhone")){dijit.byId("contactPhone").setValue(f.contactPhone)}if(dijit.byId("contactTimeZone")){dijit.byId("contactTimeZone").setValue(f.contactTimeZone)}if(dijit.byId("contactMethod")){dijit.byId("contactMethod").setValue(f.contactMethod)}if(dijit.byId("country")){dijit.byId("country").setValue(f.country)}var b=dijit.byId("lovDialog");if(b!=undefined){b.hide()}}function onSelectAlternateContact(a){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null&&b.selection.getSelected()!=undefined){var g=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[g];populateSelectedAlternateContact(a,f)}}function populateSelectedAlternateContact(b,g){if(g.statusFlag!=""&&g.statusFlag!="valid"){alert("Invalid Contact. Not available for selection.");if(dijit.byId("alternateContactLastName")){dijit.byId("alternateContactLastName").setValue("")}return}if(dijit.byId("contactId")){var a=dijit.byId("contactId").value;if(a==g.contactId){alert("Selected alternate contact is same as primary contact. Please select different alternate contact.");if(dijit.byId("alternateContactLastName")){dijit.byId("alternateContactLastName").setValue("")}return}}var h="alternateContactLastName_lovHidden";if(dijit.byId(h)){dijit.byId(h).setValue(g.contactLastName)}dijit.byId("alternateContactId").setValue(g.contactId);dijit.byId("alternateContactLastName").setValue(g.contactLastName);dijit.byId("alternateContactFirstName").setValue(g.contactFirstName);dijit.byId("alternateContactEmail").setValue(g.contactEmail);dijit.byId("alternateContactPhone").setValue(g.contactPhone);dijit.byId("alternateContactTimeZone").setValue(g.contactTimeZone);var f=dijit.byId("lovDialog");if(f){f.hide()}}function setLovDialog(l,o,h,a,m,f){if(h!=null&&h!=""){h=h+"*"}if(l=="ENV_NAME"){var g=getEnvNamePicklistColumns();createLovWidget(g,l,h,a,m,f,o);return g}else{var b={url:"../../../SRPickLovRequest",content:{source:l,searchText:h,lookupParam:dojo.toJson(o)},preventCache:true,handleAs:"json",load:function(p){dijit.byId("pleasewait").hide();createLovWidget(p,l,h,a,m,f,o);return p},error:function(p,q){dijit.byId("pleasewait").hide();if(p.opStatus!=null){displayErrors(p)}else{xhrErrHandler(p,q,(ERROR_WHILE_CREATE_PICKLIST+m+escape("<br/>")))}return p},timeout:120000};dijit.byId("pleasewait").show();dojo.xhrGet(b)}}function isRestrictedWildCardSearch(a){return false}function hasRowInvalidStatus(a){if(a!=undefined){if(a.statusFlag!=undefined&&a.statusFlag=="invalid"){return true}if(a.status!=undefined&&a.status=="invalid"){return true}}return false}function hasRowRestricted(a){if(a!=undefined){return((a.allProdFlg!=undefined&&a.allProdFlg!="true")?true:false)}return false}function addStyleForRowRestricted(a){if(dijit.byId("grid").model.getRow(a.index)==undefined){return}if(hasRowRestricted(dijit.byId("grid").model.getRow(a.index))){a.customStyles="color:red"}}function addStyleForRow(a,b){if(dijit.byId("grid").model.getRow(b.index)==undefined){return}if(hasRowInvalidStatus(dijit.byId("grid").model.getRow(b.index))){b.customClasses="rowRemoved";if(showGridValidRowsOnly==true){b.customClasses="rowRemoved rowHidden"}else{b.customClasses="rowRemoved"}}else{var f=dijit.byId("grid").model.getRow(b.index);if(SERIAL_NUM_FID==a){if(f[CUSTOM_ROW_STYLES]!=undefined&&f[NEED_CUSTOM_ROW_STYLE]=="true"){b.customStyles=f[CUSTOM_ROW_STYLES]}}}}function createLovWidget(data,source,searchText,targetFields,title,onselect,params){console.debug("createLovWidget",data);var jsonObj=new Object();jsonObj.params=params;jsonObj.data=data;jsonObj.source=source;jsonObj.targetFields=targetFields;jsonObj.searchText=searchText;jsonObj.title=title;jsonObj.onselect=onselect;var defaultFindCol=data.queryCol;var dstore=null;var gmodel=null;var dialog=dijit.byId("lovDialog");var lovHandles=new Array();if(dijit.byId("grid")!=null){dijit.byId("grid").destroyRecursive()}if(dialog!=null){dialog.destroyRecursive();closeDialog("lovDialog")}if(searchText!=""&&searchText!=null&&data.searchResultCount!=undefined){var splitArr=searchText.split(":");var fldId;if(splitArr.length>1){fldId=splitArr[0]}if(data.searchResultCount==1){var srchResult=data.searchResult;if(dojo.isArray(srchResult)&&srchResult.length==1){dojo.forEach(srchResult,function(item){if(onselect!=undefined&&onselect!=""){var srOp="";if(onselect.indexOf("create")!=-1){srOp="create"}if(onselect.indexOf("update")!=-1){srOp="update"}setCustomTargetField(item,title,srOp,targetFields)}else{handleSelectedRow(targetFields,item,fldId)}});return}}else{if(data.searchResultCount==0){if(data.searchException!=undefined&&data.searchException!=""){var msgData=getDisplayMessageObj(data.searchException,2);displayErrors(msgData);return}alert("No matching data found. Please enter valid data for "+title);if(fldId!=undefined&&dijit.byId(fldId)){dijit.byId(fldId).setValue("");searchText=""}}else{if(data.searchResultCount>1){if(fldId!=undefined&&dijit.byId(fldId)){dijit.byId(fldId).setValue("")}}}}}var clientSidePaging=false;dstore=getDynamicQueryItemStore(clientSidePaging);dojo.connect(dstore,"errorHandler",ajaxLoadingError);var tzOffset=new Date().getTimezoneOffset();var t=(new Date()).getTime();var paramStr="";if(params!=undefined&&params!=null&&params.length>0){for(i=0;i<params.length;i++){if(i>0){paramStr=paramStr+","}var obj=params[i];paramStr=paramStr+obj.lookupId+': "'+encodeURIComponent(obj.lookupValue)+'"'}paramStr=paramStr}var queryStr="{"+paramStr+"}";if(searchText!=""&&searchText!=null&&searchText.length>0){var splitArr=searchText.split(":",2);if(splitArr.length==2){if(paramStr!=""){queryStr="{"+paramStr+","+splitArr[0]+': "'+splitArr[1]+'"}'}else{queryStr="{"+splitArr[0]+': "'+splitArr[1]+'"}'}}}var queryObj=eval("("+queryStr+")");var _queryObj=null;if(source!="PROJECT_CONFIG"){_queryObj=dojo.toJson(queryObj)}gmodel=new srmdojoc.data.SPHomeDojoData(null,dstore,{jsId:"gmodel",rowsPerPage:100,clientSort:clientSidePaging,cache:false,query:{action:"getModel",tzOffset:tzOffset,t:t,source:source,queryObj:_queryObj}});lovHandles.push(dojo.connect(gmodel,"spHomePreRequestRows",this,dojo.hitch(this,ajaxLoadingOn,"rowCount")));lovHandles.push(dojo.connect(gmodel,"processRows",this,dojo.hitch(this,ajaxLoadingOff,gmodel,"rowCount")));var gridId=data.gridId;var node=document.createElement("div");dialog=new dijit.Dialog({id:"lovDialog",style:"width: 95%;background-color:#FFFFEE; border:1px solid rgb(153,187,232);",title:"Pick "+title,refocus:false,preventCache:true},node);dojo.body().appendChild(node);dialog.startup();dialog.domNode.style.zIndex=parseInt(zindexCounter);zindexCounter=zindexCounter+1;lovHandles.push(dojo.connect(dialog,"hide",this,dojo.hitch(this,dhide,dialog,gmodel,lovHandles)));var table=document.createElement("table");table.setAttribute("width","100%");table.setAttribute("id","lovtb");dialog.setContent(table);var tbody=document.createElement("tbody");table.appendChild(tbody);var tr=document.createElement("tr");tr.setAttribute("width","100%");if(source==HW_ADDR1_FID){dojo.style(tr,{display:"none"})}else{tr.style.cssText="background-color: #E0E0E0"}tbody.appendChild(tr);var td=document.createElement("td");dojo.attr(td,{width:"99%",valign:"middle",align:"left",colSpan:"3",nowrap:"nowrap"});tr.appendChild(td);var tdDiv=document.createElement("div");dojo.attr(tdDiv,{width:"99%","float":"left"});dojo.style(tdDiv,{"vertical-align":"middle",padding:"2px",margin:"2px","white-space":"nowrap"});td.appendChild(tdDiv);var callbackFunction="createLovWidget";var customW=getCustomWidget(source,callbackFunction,jsonObj);if(customW!=null&&customW!=undefined){tdDiv.appendChild(customW.domNode);tdDiv.appendChild(document.createTextNode("  "))}if("DN_CONTACT_ALT_PHONE"==source){var divAltPhone2=document.createElement("div");divAltPhone2.setAttribute("width","10%");var buttonAltPhone2=new dijit.form.Button({label:"Update",onClick:function(){dnContactAltPhoneUpdateLov(linkParentId)}},divAltPhone2);tdDiv.appendChild(buttonAltPhone2.domNode);tdDiv.appendChild(document.createTextNode("  "));var divAltPhone3=document.createElement("div");divAltPhone3.setAttribute("width","10%");var buttonAltPhone3=new dijit.form.Button({label:"Delete",onClick:function(){dnContactAltPhoneDeleteLov(linkParentId)}},divAltPhone3);tdDiv.appendChild(buttonAltPhone3.domNode);tdDiv.appendChild(document.createTextNode("  "))}if("DN_CONTACT_ALT_EMAIL"==source){var divAltEmail2=document.createElement("div");divAltEmail2.setAttribute("width","10%");var buttonAltEmail2=new dijit.form.Button({label:"Update",onClick:function(){dnContactAltEmailUpdateLov(linkParentId)}},divAltEmail2);tdDiv.appendChild(buttonAltEmail2.domNode);tdDiv.appendChild(document.createTextNode("  "));var divAltEmail3=document.createElement("div");divAltEmail3.setAttribute("width","10%");var buttonAltEmail3=new dijit.form.Button({label:"Delete",onClick:function(){dnContactAltEmailDeleteLov(linkParentId)}},divAltEmail3);tdDiv.appendChild(buttonAltEmail3.domNode);tdDiv.appendChild(document.createTextNode("  "))}if("DN_CONTACT_CONTACT_TEAM"==source){var divConTeam2=document.createElement("div");divConTeam2.setAttribute("width","10%");var buttonContTeam2=new dijit.form.Button({label:"Delete",onClick:function(){dnContactConTeamUpdateLov(linkParentId)}},divConTeam2);tdDiv.appendChild(buttonContTeam2.domNode);tdDiv.appendChild(document.createTextNode("  "))}if(source==SERIAL_NUM_FID||source==CSI||source==REF_CSI_FID||source=="contact"||source==INDIRECT_LAST_FID){var radioLabel=getLabelForShowInactiveRowRB(source);var radioLabel=document.createTextNode(radioLabel);tdDiv.appendChild(radioLabel);var radioButtonChecked=showGridValidRowsOnly?"checked":"";var radioButton=new dijit.form.CheckBox({checked:radioButtonChecked,onClick:function(){showGridValidRowsOnly=radioButton.getValue()==false?false:true;console.debug("radio: ",radioButton.getValue()," showGridValidRowsOnly:",showGridValidRowsOnly);dojo.query(".rowRemoved").forEach(function(n){if(showGridValidRowsOnly==true){n.className="rowRemoved rowHidden"}else{n.className="rowRemoved"}});var grid=dijit.byId("grid");if(grid!=null){var model=dijit.byId("grid").model;grid.resize()}}});tdDiv.appendChild(radioButton.domNode)}tdDiv.appendChild(document.createTextNode(" Find: "));var input=document.createElement("input");input.setAttribute("id","inputLov1");input.setAttribute("name","inputLov1");var searchStore=data.searchStore;var combo=dijit.byId("comboF");if(combo!=null){combo.destroyRecursive()}var cstore=new dojo.data.ItemFileReadStore({id:"flovStore",jsId:"flovStore",data:{identifier:searchStore.identifier,items:searchStore.items}});combo=new dijit.form.FilteringSelect({id:"comboF",name:"comboF",searchAttr:"name",tabindex:"-1",onChange:function(){var cvalue=dijit.byId("comboF").getValue();var rule=isLOVTextSearchRestricted(source,cvalue);if(rule!=null&&rule==LIKE_REQUIRES_3_NONWILDCARD_CHARS&&dijit.byId("searchText")){dijit.byId("searchText").domNode.title="Atleast provide three non-wildcard characters before using wildcard."}},style:"vertical-align:middle;",labelAttr:"name",labelType:"text",store:cstore},input);tdDiv.appendChild(combo.domNode);tdDiv.appendChild(document.createTextNode(" Value: "));var input2=document.createElement("input");input2.setAttribute("id","inputLov2");var textbox=new dijit.form.TextBox({id:"searchText",style:"vertical-align:middle;",name:"searchText"},input2);tdDiv.appendChild(textbox.domNode);if(defaultFindCol!=null){combo.setValue(defaultFindCol);lovHandles.push(dojo.connect(dijit.byId("lovDialog"),"show",function(){setTimeout(dojo.hitch(this,function(){dijit.byId("searchText").focus()}),100)}))}if(source=="PROJECT_CONFIG"||source=="HOST_CSI"){var platinumCheckBox=new dijit.form.CheckBox({id:"platinumCheckBox",name:"platinumCheckBox",value:"1",checked:false},"checkBox");tdDiv.appendChild(platinumCheckBox.domNode);tdDiv.appendChild(document.createTextNode(" Platinum "))}var divB=document.createElement("div");tdDiv.appendChild(document.createTextNode(String.fromCharCode(160)));var buttonDynamic=new dijit.form.Button({id:"lovgo",label:"Go",onClick:function(){filterQD(source,params,clientSidePaging)}},divB);tdDiv.appendChild(buttonDynamic.domNode);var img=document.createElement("img");dojo.attr(img,{src:"../images/tip.gif",alt:"Tip"});dojo.style(img,{"vertical-align":"middle"});tdDiv.appendChild(document.createTextNode("  "));tdDiv.appendChild(img);var textMsg=getTipText(source,params);var tipText=document.createTextNode(textMsg);var tSpan=document.createElement("span");dojo.addClass(tSpan,"tipText");tSpan.appendChild(tipText);tdDiv.appendChild(tSpan);var qtr=document.createElement("tr");qtr.setAttribute("width","100%");tbody.appendChild(qtr);var qtd=document.createElement("td");qtd.setAttribute("align","left");qtd.setAttribute("valign","top");qtd.setAttribute("colSpan","3");qtr.appendChild(qtd);if(source==CSI){var qtable=createCSIQueryNode();qtd.appendChild(qtable)}else{if(source==SERIAL_NUM_FID){var qtable=createSerialNumberQueryNode(params);qtd.appendChild(qtable)}else{if(source==HW_ADDR1_FID){var qtable=createHWAddrQueryNode(params);qtd.appendChild(qtable)}}}var etr=document.createElement("tr");tbody.appendChild(etr);var etd=document.createElement("td");etd.setAttribute("align","right");etd.setAttribute("valign","top");etd.setAttribute("colSpan","3");var div=document.createElement("div");div.setAttribute("id","rowCount");lovHandles.push(dojo.connect(div,"onmouseover",function(){showErrorMessage(gmodel)}));lovHandles.push(dojo.connect(div,"onmouseout",function(){hideErrorMessage()}));etd.appendChild(div);etr.appendChild(etd);if(source=="ENV_NAME"){var dataItems=new Array();var djsonObj={identifier:"guid",label:"Environment Guid",items:dataItems};var store=new dojo.data.ItemFileReadStore({data:djsonObj});gmodel=new dojox.grid.data.DojoData(null,store,{jsId:"gmodel",query:{guid:"*"},clientSort:true})}var SERVICE_TEAM_COL1_WIDTH="33%";var SERVICE_TEAM_COL2_WIDTH="3%";var SERVICE_TEAM_COL3_WIDTH="100%";if(source=="SERVICE_TEAM"){var titleTr=document.createElement("tr");tbody.appendChild(titleTr);var titleTd1=document.createElement("td");titleTd1.innerHTML="Potential Members";titleTd1.setAttribute("width",SERVICE_TEAM_COL1_WIDTH);titleTd1.setAttribute("align","left");titleTd1.setAttribute("valign","middle");titleTd1.style.cssText="font-weight: bold;";titleTr.appendChild(titleTd1);var titleTd2=document.createElement("td");titleTd2.setAttribute("width",SERVICE_TEAM_COL2_WIDTH);titleTr.appendChild(titleTd2);var titleTd3=document.createElement("td");titleTd3.setAttribute("width","SERVICE_TEAM_COL3_WIDTH");titleTd3.setAttribute("align","left");titleTd3.setAttribute("valign","middle");titleTr.appendChild(titleTd3);var hdr=document.createElement("table");hdr.setAttribute("width","100%");hdr.setAttribute("id","hdr");var hdrBody=document.createElement("tbody");hdr.appendChild(hdrBody);var hdrTr=document.createElement("tr");hdrBody.appendChild(hdrTr);var hdrTrTd1=document.createElement("td");hdrTrTd1.setAttribute("width","15%");hdrTrTd1.setAttribute("align","left");hdrTrTd1.setAttribute("white-space","nowrap");hdrTrTd1.setAttribute("valign","middle");var sm=document.createElement("b");sm.innerHTML="Selected Members";hdrTrTd1.appendChild(sm);hdrTr.appendChild(hdrTrTd1);var hdrTrTd2=document.createElement("td");hdrTrTd2.setAttribute("width","20%");hdrTrTd2.setAttribute("align","left");hdrTrTd2.setAttribute("white-space","nowrap");hdrTrTd2.setAttribute("valign","middle");if(this.headerDataAsJson.plaType=="CWW"){var sev1_24x7CheckBox=new dijit.form.CheckBox({id:"sev1_24x7CheckBox",name:"sev1_24x7CheckBox",value:"1",checked:true,onClick:function(){(sev1_24x7CheckBox.getValue()==true)?showSev124x7TeamSelected():showAllServiceTeamSelected()}},"checkBox");hdrTrTd2.appendChild(sev1_24x7CheckBox.domNode);hdrTrTd2.appendChild(document.createTextNode(String.fromCharCode(160)));hdrTrTd2.appendChild(document.createTextNode("Sev1 24x7 Team"));hdrTrTd2.setAttribute("valign","middle")}hdrTr.appendChild(hdrTrTd2);var hdrTrTd3=document.createElement("td");hdrTrTd3.setAttribute("width","40%");hdrTrTd3.setAttribute("align","right");hdrTrTd3.setAttribute("valign","middle");hdrTr.appendChild(hdrTrTd3);var hdrTrTd4=document.createElement("td");hdrTrTd4.setAttribute("width","25%");hdrTrTd4.setAttribute("align","right");hdrTrTd4.setAttribute("white-space","nowrap");hdrTrTd4.setAttribute("valign","middle");var hdrTrTd5=document.createElement("td");hdrTrTd5.setAttribute("width","25%");hdrTrTd5.setAttribute("align","right");hdrTrTd5.setAttribute("white-space","nowrap");hdrTrTd5.setAttribute("valign","middle");var utcDate=document.createElement("small");utcDate.id="utcDateVal";var utcDate2=document.createElement("small");utcDate2.id="utcDate2Val";utcDate2.style.color="#FF0000";setInterval(function(){var days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var utc=convertDateToUTC(new Date());if(document.getElementById("utcDateVal")!=undefined){var utc=convertDateToUTC(new Date());var day=utc.getDay();var y=utc.getFullYear();var m=utc.getMonth();var d=utc.getDate();var dateStr=days[day]+", "+d+" "+months[m]+" "+y+" ";document.getElementById("utcDateVal").innerHTML=dateStr}if(document.getElementById("utcDate2Val")!=undefined){var hh=utc.getHours();var mm=utc.getMinutes();var ss=utc.getSeconds();if(hh<=9){hh="0"+hh}if(mm<=9){mm="0"+mm}if(ss<=9){ss="0"+ss}var dateStr2=hh+":"+mm+":"+ss+" UTC";document.getElementById("utcDate2Val").innerHTML=dateStr2}},1000);hdrTrTd4.appendChild(utcDate);hdrTrTd4.appendChild(utcDate2);hdrTr.appendChild(hdrTrTd4);hdrTr.appendChild(hdrTrTd5);titleTd3.appendChild(hdr)}var tr2=document.createElement("tr");tbody.appendChild(tr2);var td2=document.createElement("td");td2.setAttribute("align","left");td2.setAttribute("valign","top");td2.setAttribute("width","33%");if(source!="SERVICE_TEAM"){td2.setAttribute("colSpan","3")}tr2.appendChild(td2);var gridDiv=document.createElement("div");gridDiv.setAttribute("id","gridDiv");var rowbar={type:"dojox.GridRowView",width:"20px"};var normalCell=data.normalCell;var normalCellL={cells:normalCell.cells};var layout=[normalCellL];var grid=new srmdojoc.grid.SPGrid({id:"grid",elasticview:"2",model:gmodel,structure:layout,rowSelector:true});if(source=="ENV_NAME"){retrievePodCloudConfigUsingJSONP(grid,params)}if(source=="contact"||source=="csi"||source=="PLATFORM"||source=="PLATFORM_VERSION"||source=="PRODUCT"||source=="PRODUCT_VERSION"||source=="LICENSED_PRODUCT"||source=="LICENSED_PRODUCT_VERSION"||source==INDIRECT_LAST_FID||source==SERIAL_NUM_FID||source==REF_CSI_FID){lovHandles.push(dojo.connect(grid,"onStyleRow",this,dojo.hitch(this,addStyleForRow,source)))}if(source=="SERVICE_TEAM"){var manageSelected=function(inRow){var grid=dijit.byId("grid");var gridSelected=dijit.byId("gridSelected");if(grid.model.getRow(inRow.index)==undefined){return}if(empExistInArray(gridSelected.model.data,grid.model.getRow(inRow.index).empEmail)){inRow.customClasses="rowHidden"}else{}};lovHandles.push(dojo.connect(grid,"onStyleRow",this,dojo.hitch(this,manageSelected)))}gridDiv.appendChild(grid.domNode);td2.appendChild(gridDiv);if(source=="SERVICE_TEAM"){var empExistInArray=function(arrayData,empEmail){var found=false;for(var i=0;i<arrayData.length;i++){if(arrayData[i].empEmail==empEmail){found=true}}return found};var td3=document.createElement("td");td3.setAttribute("align","center");td3.setAttribute("valign","middle");var button1=new dijit.form.Button({label:"&gt;",title:"Add",onClick:function(e){var grid=dijit.byId("grid");if(dijit.byId("sev1_24x7CheckBox")){dijit.byId("sev1_24x7CheckBox").setValue(false)}showAllServiceTeamSelected();var gridSelected=dijit.byId("gridSelected");if(grid!=null&&grid.selection.getSelected()!=null){var size=grid.selection.getSelected().length;for(var i=0;i<size;i++){var rowIndex=grid.selection.getSelected()[i];var selectedRow=grid.model.data[rowIndex];if(!empExistInArray(gridSelected.model.data,selectedRow.empEmail)){gridSelected.addRow({primary:false,empEmail:selectedRow.empEmail,empFName:selectedRow.empFName,empLName:selectedRow.empLName,empPhone:selectedRow.empPhone,empTitle:selectedRow.empTitle,empId:selectedRow.empId,teamRole:"",empEmailFlag:true,serviceTeamEmail:selectedRow.serviceTeamEmail,serviceTeamShiftStartTime:"",serviceTeamShiftEndTime:"",serviceTeamShiftPLAGroup:"",serviceTeamShiftAvailability:"",serviceTeamAudience:"",serviceTeamSource:""});gridSelected.model.store.save();gridSelected.model.refresh();gridSelected.refresh()}}grid.refresh();gridSelected.refresh();primaryArray=new Array();var modelSize=gridSelected.model.data.length;for(var i=0;i<modelSize;i++){var selectedRow=gridSelected.model.data[i];primaryArray[i]=selectedRow.primary}}}});td3.appendChild(button1.domNode);var wrap=document.createElement("br");td3.appendChild(document.createElement("br"));var button2=new dijit.form.Button({label:" &lt; ",title:"Remove",onClick:function(e){var grid=dijit.byId("grid");var gridSelected=dijit.byId("gridSelected");if(gridSelected!=null&&gridSelected.selection.getSelected()!=null){var size=gridSelected.selection.getSelected().length;for(var i=0;i<size;i++){var rowIndex=gridSelected.selection.getSelected()[i];var selectedRow=gridSelected.model.data[rowIndex];if(selectedRow&&selectedRow.serviceTeamSource=="GRP"){alert(selectedRow.empFName+" "+selectedRow.empLName+" cannot be removed, because this member was added by GRP.");return}}gridSelected.removeSelectedRows();gridSelected.model.store.save();gridSelected.model.refresh();gridSelected.refresh();gridSelected.update();grid.refresh();primaryArray=new Array();var modelSize=gridSelected.model.data.length;for(var i=0;i<modelSize;i++){var selectedRow=gridSelected.model.data[i];primaryArray[i]=selectedRow.primary}}}});td3.appendChild(button2.domNode);td3.appendChild(document.createElement("br"));var button3=new dijit.form.Button({label:"&lt;&lt;",title:"Remove All",onClick:function(e){var grid=dijit.byId("grid");var gridSelected=dijit.byId("gridSelected");if(gridSelected!=null){for(var i=0;i<gridSelected.rowCount;i++){gridSelected.selection.addToSelection(i)}}if(gridSelected!=null&&gridSelected.selection.getSelected()!=null){var size=gridSelected.selection.getSelected().length;for(var i=0;i<size;i++){var rowIndex=gridSelected.selection.getSelected()[i];var selectedRow=gridSelected.model.data[rowIndex];if(selectedRow&&selectedRow.serviceTeamSource=="GRP"){alert(selectedRow.empFName+" "+selectedRow.empLName+" cannot be removed, because this member was added by GRP.");return}}gridSelected.removeSelectedRows();gridSelected.model.store.save();gridSelected.refresh();gridSelected.update();grid.refresh();primaryArray=new Array();var modelSize=gridSelected.model.data.length;for(var i=0;i<modelSize;i++){var selectedRow=gridSelected.model.data[i];primaryArray[i]=selectedRow.primary}}}});td3.appendChild(button3.domNode);tr2.appendChild(td3);var gridSelectedDiv=document.createElement("div");gridSelectedDiv.setAttribute("id","gridSelectedDiv");var serviceTeamSelectedCopy=new Array();var primaryArray=new Array();for(var i=0;i<serviceTeamSelected.length;i++){var serviceTeamMember=serviceTeamSelected[i];serviceTeamSelectedCopy.push({primary:serviceTeamMember.primary,empEmail:serviceTeamMember.empEmail,empFName:serviceTeamMember.empFName,empLName:serviceTeamMember.empLName,empPhone:serviceTeamMember.empPhone,empTitle:serviceTeamMember.empTitle,empId:serviceTeamMember.empId,teamRole:serviceTeamMember.teamRole,empEmailFlag:serviceTeamMember.empEmailFlag,serviceTeamEmail:serviceTeamMember.serviceTeamEmail,serviceTeamShiftStartTime:serviceTeamMember.serviceTeamShiftStartTime,serviceTeamShiftEndTime:serviceTeamMember.serviceTeamShiftEndTime,serviceTeamShiftPLAGroup:serviceTeamMember.serviceTeamShiftPLAGroup,serviceTeamShiftAvailability:serviceTeamMember.serviceTeamShiftAvailability,serviceTeamAudience:serviceTeamMember.serviceTeamAudience,serviceTeamSource:serviceTeamMember.serviceTeamSource});primaryArray[i]=serviceTeamMember.primary}if(dijit.byId("sev1_24x7CheckBox")){showSev124x7TeamSelected()}serviceTeamSelectedCopy.sort(function(a,b){return sortEndShiftTime(a,b)});var emptyData={identifier:"empEmail",items:serviceTeamSelectedCopy};var jsonStore=new dojo.data.ItemFileWriteStore({data:emptyData});var modelSelected;if(dijit.byId("sev1_24x7CheckBox")){modelSelected=new dojox.grid.data.DojoData(null,jsonStore,{jsId:"modelSelected",query:{teamRole:"Sev1 24x7",serviceTeamAudience:"Public",serviceTeamShiftAvailability:"Available"},clientSort:true})}else{modelSelected=new dojox.grid.data.DojoData(null,jsonStore,{jsId:"modelSelected",query:{empEmail:"*"},clientSort:true})}var layoutSelected=layout.slice();var serviceTeamRoleLOV=staticLOVsMap.get(LOV_SR_SERVICE_TEAM_ROLE).items;var serviceTeamRolesArray=new Array();for(var i=0;i<serviceTeamRoleLOV.length;i++){serviceTeamRolesArray.push(serviceTeamRoleLOV[i].id)}serviceTeamRolesArray.sort();var serviceTeamAudienceArray=new Array("Public","Internal");var serviceTeamShiftAvailabilityArray=new Array("Available","Unavailable");var serviceTeamShiftTimeLOV=staticLOVsMap.get(LOV_SHIFT_START_END_NUM_TIME).items;var serviceTeamShiftTimeArray=new Array();for(var i=0;i<serviceTeamShiftTimeLOV.length;i++){serviceTeamShiftTimeArray.push(serviceTeamShiftTimeLOV[i].id)}serviceTeamShiftTimeArray.sort();layoutSelected[0].cells[0]=[].concat([{name:"Pri mary",noresize:false,field:"primary",width:"3",styles:"text-align: center;",editor:dojox.grid.editors.Bool}],[{name:"Source",noresize:false,field:"serviceTeamSource",width:"auto",styles:"text-align: center;",get:getServiceTeamSource}],[{name:"Audience",noresize:false,field:"serviceTeamAudience",width:"auto",styles:"text-align: center;",editor:dojox.grid.editors.Select,options:serviceTeamAudienceArray,get:getServiceTeamAudience}],[{name:"First Name",noresize:false,field:"empFName",width:"auto",styles:"text-align: center;",get:getServiceTeamPerson}],[{name:"Last Name",noresize:false,field:"empLName",width:"auto",styles:"text-align: center;"}],[{name:"SR Team Role",noresize:false,field:"teamRole",width:"auto",styles:"text-align: center;",editor:dojox.grid.editors.Select,options:serviceTeamRolesArray}],[{name:"Email Flag",noresize:false,field:"empEmailFlag",width:"3",styles:"text-align: center;",editor:dojox.grid.editors.Bool}],[{name:"Start Time (UTC)",noresize:false,field:"serviceTeamShiftStartTime",width:"auto",styles:"text-align: center;",editor:dojox.grid.editors.Select,options:serviceTeamShiftTimeArray,get:getServiceTeamShiftStartTime}],[{name:"End Time (UTC)",noresize:false,field:"serviceTeamShiftEndTime",width:"auto",styles:"text-align: center;",editor:dojox.grid.editors.Select,options:serviceTeamShiftTimeArray,get:getServiceTeamShiftEndTime}],[{name:"PLA Group",noresize:false,field:"serviceTeamShiftPLAGroup",width:"auto",styles:"text-align: center;",get:getServiceTeamPLASupportGroup}],[{name:"Availability",noresize:false,field:"serviceTeamShiftAvailability",width:"auto",styles:"text-align: center;",editor:dojox.grid.editors.Select,options:serviceTeamShiftAvailabilityArray,get:getServiceTeamShiftAvailability}]);var gridSelected=new srmdojoc.grid.SPGrid({id:"gridSelected",elasticview:"2",model:modelSelected,structure:layoutSelected,canEdit:canEditServiceTeam,rowSelector:true});gridSelected.singleClickEdit=true;gridSelectedDiv.appendChild(gridSelected.domNode);var td4=document.createElement("td");td4.setAttribute("align","left");td4.setAttribute("valign","top");td4.setAttribute("width","SERVICE_TEAM_COL2_WIDTH");td4.appendChild(gridSelectedDiv);tr2.appendChild(td4);gridSelected.render();gridSelected.refresh();gridSelected.update();dojo.connect(gridSelected,"onCellClick",function(event){if(event.cell.field=="primary"){var gridSelected=dijit.byId("gridSelected");var changedIndex=-1;var size=gridSelected.model.data.length;changedIndex=event.rowIndex;var selectedRow=gridSelected.model.data[changedIndex];if(changedIndex!=-1&&selectedRow.primary){for(var i=0;i<size;i++){if(i!=changedIndex){var otherRow=gridSelected.model.data[i];console.debug("Clear i ",i);gridSelected.model.data[i].primary=false}}}dijit.byId("gridSelected").edit.apply();gridSelected.refresh()}});var buttonOk=new srmdojoc.layout.CustomButton({label:"Save",onClick:function(e){var fieldArray=targetFields.split(",");var fieldId=fieldArray[0];var fieldDesc=fieldArray[1];var fieldPrimary=fieldArray[2];var fieldRole=fieldArray[3];var fieldEmailFlag=fieldArray[4];var fieldEmail=fieldArray[5];var fieldAudience=fieldArray[6];var fieldStartTime=fieldArray[7];var fieldEndTime=fieldArray[8];var fieldPLAGroup=fieldArray[9];var fieldAvailability=fieldArray[10];var fieldSource=fieldArray[11];var theTargetOption=dojo.byId(fieldId);var theTargetDesc=dojo.byId(fieldDesc);var theTargetOptionPrimary=dojo.byId(fieldPrimary);var theTargetOptionRole=dojo.byId(fieldRole);var theTargetOptionEmailFlag=dojo.byId(fieldEmailFlag);var theTargetOptionEmail=dojo.byId(fieldEmail);var theTargetOptionAudience=dojo.byId(fieldAudience);var theTargetOptionStartTime=dojo.byId(fieldStartTime);var theTargetOptionEndTime=dojo.byId(fieldEndTime);var theTargetOptionPLAGroup=dojo.byId(fieldPLAGroup);var theTargetOptionAvailability=dojo.byId(fieldAvailability);var theTargetOptionSource=dojo.byId(fieldSource);var gridSelected=dijit.byId("gridSelected");gridSelected.edit.apply();gridSelected.model.query={empEmail:"*"};gridSelected.model.refresh();var size=gridSelected.model.data.length;theTargetDesc.value="";deleteAllOptions(theTargetOption);deleteAllOptions(theTargetOptionPrimary);deleteAllOptions(theTargetOptionRole);deleteAllOptions(theTargetOptionEmailFlag);deleteAllOptions(theTargetOptionEmail);deleteAllOptions(theTargetOptionAudience);deleteAllOptions(theTargetOptionStartTime);deleteAllOptions(theTargetOptionEndTime);deleteAllOptions(theTargetOptionPLAGroup);deleteAllOptions(theTargetOptionAvailability);deleteAllOptions(theTargetOptionSource);serviceTeamSelected=new Array();for(var i=0;i<size;i++){var selectedRow=gridSelected.model.data[i];if(selectedRow&&selectedRow.teamRole=="Sev1 24x7"){var starttime=selectedRow.serviceTeamShiftStartTime;var endtime=selectedRow.serviceTeamShiftEndTime;var source=selectedRow.serviceTeamSource;if(source!="GRP"&&(starttime==""||endtime=="")){alert("Start Time(UTC) and End Time(UTC) are required fields when SR Team Role is Sev1 24x7.");return}}addOption(theTargetOption,selectedRow.empId,selectedRow.empId);addOption(theTargetOptionPrimary,selectedRow.empId,selectedRow.primary);addOption(theTargetOptionRole,selectedRow.empId,selectedRow.teamRole);addOption(theTargetOptionEmailFlag,selectedRow.empId,selectedRow.empEmailFlag);addOption(theTargetOptionEmail,selectedRow.empId,selectedRow.serviceTeamEmail);addOption(theTargetOptionAudience,selectedRow.empId,selectedRow.serviceTeamAudience);addOption(theTargetOptionStartTime,selectedRow.empId,selectedRow.serviceTeamShiftStartTime);addOption(theTargetOptionEndTime,selectedRow.empId,selectedRow.serviceTeamShiftEndTime);addOption(theTargetOptionPLAGroup,selectedRow.empId,selectedRow.serviceTeamShiftPLAGroup);addOption(theTargetOptionAvailability,selectedRow.empId,selectedRow.serviceTeamShiftAvailability);addOption(theTargetOptionSource,selectedRow.empId,selectedRow.theTargetOptionSource);theTargetDesc.value+=selectedRow.empEmail+",";serviceTeamSelected.push({primary:selectedRow.primary,empEmail:selectedRow.empEmail,empFName:selectedRow.empFName,empLName:selectedRow.empLName,empPhone:selectedRow.empPhone,empTitle:selectedRow.empTitle,empId:selectedRow.empId,teamRole:selectedRow.teamRole,empEmailFlag:selectedRow.empEmailFlag,serviceTeamEmail:selectedRow.serviceTeamEmail,serviceTeamShiftStartTime:selectedRow.serviceTeamShiftStartTime,serviceTeamShiftEndTime:selectedRow.serviceTeamShiftEndTime,serviceTeamShiftPLAGroup:selectedRow.serviceTeamShiftPLAGroup,serviceTeamShiftAvailability:selectedRow.serviceTeamShiftAvailability,serviceTeamAudience:selectedRow.serviceTeamAudience,serviceTeamSource:selectedRow.serviceTeamSource})}selectAllOptions(theTargetOption);selectAllOptions(theTargetOptionPrimary);selectAllOptions(theTargetOptionRole);selectAllOptions(theTargetOptionEmailFlag);selectAllOptions(theTargetOptionEmail);selectAllOptions(theTargetOptionAudience);selectAllOptions(theTargetOptionStartTime);selectAllOptions(theTargetOptionEndTime);selectAllOptions(theTargetOptionPLAGroup);selectAllOptions(theTargetOptionAvailability);selectAllOptions(theTargetOptionSource);dijit.byId("lovDialog").hide();if(typeof saveServiceTeam=="function"){saveServiceTeam()}}});var buttonCancel=new srmdojoc.layout.CustomButton({label:"Cancel",onClick:function(e){dijit.byId("lovDialog").hide()}});var buttonsTr=document.createElement("tr");buttonsTr.setAttribute("style","height: 30px");tbody.appendChild(buttonsTr);var spacerTd1=document.createElement("td");spacerTd1.setAttribute("width",SERVICE_TEAM_COL1_WIDTH);buttonsTr.appendChild(spacerTd1);var spacerTd2=document.createElement("td");spacerTd2.setAttribute("width",SERVICE_TEAM_COL2_WIDTH);buttonsTr.appendChild(spacerTd2);var spacerTd3=document.createElement("td");spacerTd2.setAttribute("width",SERVICE_TEAM_COL2_WIDTH);buttonsTr.appendChild(spacerTd3);var hdr2=document.createElement("table");hdr2.setAttribute("width","100%");hdr2.setAttribute("id","hdr2");var hdr2Body=document.createElement("tbody");hdr2.appendChild(hdr2Body);var hdr2Tr=document.createElement("tr");hdr2Body.appendChild(hdr2Tr);var buttonsTd0=document.createElement("td");buttonsTd0.setAttribute("align","right");buttonsTd0.setAttribute("width","90%");hdr2Tr.appendChild(buttonsTd0);var buttonsTd1=document.createElement("td");buttonsTd1.setAttribute("align","right");buttonsTd1.setAttribute("valign","bottom");buttonsTd1.appendChild(buttonOk.domNode);buttonsTr.appendChild(buttonsTd1);hdr2Tr.appendChild(buttonsTd1);var buttonsTd2=document.createElement("td");buttonsTd2.setAttribute("align","right");buttonsTd2.setAttribute("valign","bottom");buttonsTd2.appendChild(buttonCancel.domNode);buttonsTr.appendChild(buttonsTd2);hdr2Tr.appendChild(buttonsTd2);spacerTd3.appendChild(hdr2);spacerTd3.setAttribute("align","right")}if(onselect==null||onselect==""){lovHandles.push(dojo.connect(grid,"onRowClick",function(event){selectRow(targetFields)}))}else{lovHandles.push(dojo.connect(grid,"onRowClick",function(event){eval("("+onselect+")")}))}grid.refresh();grid.render();grid.update();setTimeout(function(){dijit.byId("lovDialog").show()},"0")}function compareShiftStartAndEndTimes(h,l){var g=(h&&h!="")?getComputedTime(h):new Date(3000,0,0);var f=(l&&l!="")?getComputedTime(l):new Date(3000,0,0);return(g<f?-1:g>f?1:0)}function showSev124x7TeamSelected(){var a=dijit.byId("gridSelected");if(a){a.model.query={teamRole:"Sev1 24x7",serviceTeamAudience:"Public",serviceTeamShiftAvailability:"Available"};a.model.refresh()}}function showAllServiceTeamSelected(){var a=dijit.byId("gridSelected");a.model.query={empEmail:"*"};a.model.refresh()}function convertDateToUTC(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds())}function getComputedTime(v){var s=convertDateToUTC(new Date());var q=s.getFullYear();var f=s.getMonth();var p=s.getDate();var h=s.getHours();var l=s.getMinutes();var w=s.getSeconds();var a=v.split(":");var g=a[0];var o=a[1];var u=a[2];var v=new Date(Date.UTC(q,f,p,g,o,u));var b=convertDateToUTC(v);return b}function compareShiftEndTimes(h,l){var g=(h&&h!="")?getComputedTime(h):new Date(3000,0,0);var f=(l&&l!="")?getComputedTime(l):new Date(3000,0,0);console.debug("[u]===> "+convertDateToUTC(new Date()));console.debug("[a]===> "+h+" a_shiftUTC="+g);console.debug("[b]===> "+l+" b_shiftUTC="+f+"\n");return(g<f?-1:g>f?1:0)}function sortEndShiftTime(l,g){var h=l.serviceTeamShiftEndTime,f=g.serviceTeamShiftEndTime;var m=compareShiftEndTimes(h,f);if(m==1){return 1}if(m==-1){return -1}return sortRole(l,g)}function sortRole(l,g){var h=l.teamRole.toLowerCase(),f=g.teamRole.toLowerCase();if(h==""){h="zz"}if(f==""){f="zz"}if(h<f){return -1}if(h>f){return 1}return sortAvailability(l,g)}function sortAvailability(l,g){var h=l.serviceTeamShiftAvailability.toLowerCase(),f=g.serviceTeamShiftAvailability.toLowerCase();if(h==""){h="zz"}if(f==""){f="zz"}if(h<f){return -1}if(h>f){return 1}return sortAudience(l,g)}function sortAudience(l,g){var h=l.serviceTeamAudience.toLowerCase(),f=g.serviceTeamAudience.toLowerCase();if(h==""){h="zz"}if(f==""){f="zz"}if(h<f){return -1}if(h>f){return 1}return sortLastName(l,g)}function sortLastName(l,g){var h=l.empLName.toLowerCase(),f=g.empLName.toLowerCase();if(h==""){h="zz"}if(f==""){f="zz"}if(h<f){return -1}if(h>f){return 1}return sortEmail(l,g)}function sortEmail(l,g){var h=l.empEmail.toLowerCase(),f=g.empEmail.toLowerCase();if(h<f){return -1}if(h>f){return 1}return 0}function getTipText(b,f){var a="For wild character search use asterisk (*).";if(b==SERIAL_NUM_FID){return"For wild character search on any field, use asterisk (*)."}else{if(b=="PRODUCT"&&f.length==0){return"Please specify search criteria to see list of products. For wild character search use asterisk (*)."}}if(b=="ENV_NAME"){return"Allows partial search. Simply type in a part of the word and click Go. Do not use asterisk (*),"}else{return a}}function getLabelForShowInactiveRowRB(b){var a="Show selectable enteries only: ";if(b==SERIAL_NUM_FID){return"Show Active SNs only: "}else{if(b==CSI){return"Show Active CSIs only: "}else{if(b==REF_CSI_FID){return"Show Active Reference CSIs only: "}else{if(b==INDIRECT_LAST_FID||b=="contact"){return"Show Active Contacts only: "}else{return a}}}}}function ajaxLoadingOn(a){if(a==undefined||a==null||a==""){a="rowCount"}if(dojo.byId(a)){dojo.byId(a).innerHTML="Loading ...."}}function ajaxLoadingOff(a,b,f){if(b==undefined||b==null||b==""){b="rowCount"}if(dojo.byId(b)){if(f!=undefined&&f=="ENV_NAME"){dojo.byId(b).innerHTML=(a==undefined||a.getRowCount()==-1)?"WS Error":"Row count: "+a.getRowCount();return}else{if(a.store.getRealRowCount()!=undefined){dojo.byId(b).innerHTML=(a.store.getServerRowCount()==-1)?"WS Error":"Row count: "+a.store.getServerRowCount()+" / "+a.store.getRealRowCount()}else{dojo.byId(b).innerHTML=(a.store.getServerRowCount()==-1)?"WS Error":"Row count: "+a.store.getServerRowCount()}}}}function ajaxLoadingError(a,f,b){if(b==undefined||b==null||b==""){b="rowCount"}if(dojo.byId(b)){xhrErrHandler(a,f,"");dojo.byId(b).innerHTML="Operation failed"}}function showErrorMessage(a){if(dojo.byId("rowCount")&&a!=undefined&&a.store!=undefined&&a.store.getErrorMsg()!=undefined&&a.store.getErrorMsg()!=""){dijit.showTooltip(a.store.getErrorMsg(),dojo.byId("rowCount"))}}function hideErrorMessage(){if(dojo.byId("rowCount")){dijit.hideTooltip(dojo.byId("rowCount"))}}function getCustomWidget(b,m,p){if(REF_CSI_FID==b){var o=document.createElement("div");var g="";if(p.params!=undefined){g=retrieveLOVLookupParam(p.params,SR_OP_PARAM)}var l=new dijit.form.Button({label:"Use Primary CSI",style:"vertical-align:middle",onClick:function(){PartnerSRUtil.setRefCSISameAsPrimary(g);closeLOVdialog()}},o);return l}else{if("contact"==b||INDIRECT_LAST_FID==b){var o=document.createElement("div");var l=new dijit.form.Button({label:"New/Associate",onClick:function(){createContact(b,m,p)}},o);return l}else{if("DN_CONTACT_ALT_PHONE"==b){var q=document.createElement("div");q.setAttribute("width","10%");var u=new dijit.form.Button({label:"New",onClick:function(){showCreateAltPhone()}},q);return u}else{if("DN_CONTACT_ALT_EMAIL"==b){var s=document.createElement("div");s.setAttribute("width","10%");var a=new dijit.form.Button({label:"New",onClick:function(){showCreateAltEmail()}},s);return a}else{if("DN_CONTACT_CONTACT_TEAM"==b){var h=document.createElement("div");h.setAttribute("width","10%");var f=new dijit.form.Button({label:"New",onClick:function(){showCreateContTeam()}},h);return f}}}}}return null}function createContact(aD,v,a){var z=dijit.byId("lovDialog");if(z!=null){z.hide();z.destroyRecursive()}var ah=dijit.byId("newContactDialog");if(ah!=null){ah.destroyRecursive()}var V=this.document.createElement("div");ah=new dijit.Dialog({id:"newContactDialog",execute:function(aF){submitNewContactForm(aF,v,a,ah)},style:"width: 60%;",title:"New/Associate Contact",postCreate:function(){dojo.body().appendChild(this.domNode);var aF=dojo.i18n.getLocalization("dijit","common");if(this.closeButtonNode){this.closeButtonNode.setAttribute("title",aF.buttonCancel)}if(this.closeText){this.closeText.setAttribute("title",aF.buttonCancel)}var aG=this.domNode.style;aG.visibility="hidden";aG.position="absolute";aG.display="";aG.top="-9999px";this.connect(this,"onCancel","hide");this._modalconnects=[]}},V);ah.domNode.style.zIndex=parseInt(zindexCounter);zindexCounter=zindexCounter+1;dojo.body().appendChild(V);var L=document.createElement("table");L.setAttribute("width","100%");L.setAttribute("id","newctb");ah.setContent(L);var x=document.createElement("tbody");L.appendChild(x);var h=createTableRow("100%");x.appendChild(h);var C=createLovSaveCancelButtonCell(ah,aD,v,a);h.appendChild(C);var P=createTableRow("100%");x.appendChild(P);var X="";var R="";var E="";var aC="";var u=null;var q=dijit.byId("accountName");var b=dijit.byId("accountId");var ad=dijit.byId("csi");var af=dijit.byId("csiId");var A=dijit.byId("contactMethod");if(q!=undefined){X=q.getValue()}if(ad!=undefined){E=ad.getValue()}if(af!=undefined){aC=af.getValue()}if(A!=undefined){u=A.store}if(b!=undefined){R=b.getValue()}if(dijit.byId("busComp")!=null){dijit.byId("busComp").destroy()}var aB=createLabelCell("Account",true,"50%");var aA=createTextboxCell("newAcctInput","newAccountName","50%",true,X);var aq=createHiddenTextbox("busComp","contact");var ap=createHiddenTextbox("action","create");var ao=createHiddenTextbox("newAccountId",R);var an=createHiddenTextbox("existsFlag","false");var am=createHiddenTextbox("existsContactId","");var al=createHiddenTextbox("csiContactAss","");var ak=createHiddenTextbox("csiContactAssError","");var aj=createHiddenTextbox("accountContactAss","");var ai=createHiddenTextbox("newCountry","");aA.appendChild(aq.domNode);aA.appendChild(ap.domNode);aA.appendChild(ao.domNode);aA.appendChild(an.domNode);aA.appendChild(am.domNode);aA.appendChild(al.domNode);aA.appendChild(ak.domNode);aA.appendChild(aj.domNode);aA.appendChild(ai.domNode);P.appendChild(aB);P.appendChild(aA);var U=createTableRow("100%");x.appendChild(U);var az=createLabelCell("CSI",true,"50%");var ay=createTextboxCell("newCsiInput","newCsi","50%",true,E);var ar=createHiddenTextbox("newCsiId",aC);ay.appendChild(ar.domNode);U.appendChild(az);U.appendChild(ay);var T=createTableRow("100%");x.appendChild(T);var ax=createLabelCell("Email",true,"50%");var aw=createTextboxCell("newEmailInput","newContactEmail","50%",false,"");T.appendChild(ax);T.appendChild(aw);var S=createTableRow("100%");x.appendChild(S);var av=createLabelCell("First Name",true,"50%");var au=createTextboxCell("newFNameInput","newContactFName","50%",false,"");S.appendChild(av);S.appendChild(au);var Q=createTableRow("100%");x.appendChild(Q);var at=createLabelCell("Last Name",true,"50%");var ag=createTextboxCell("newLNameInput","newContactLName","50%",false,"");Q.appendChild(at);Q.appendChild(ag);var O=createTableRow("100%");x.appendChild(O);var ae=createLabelCell("Job Title",false,"50%");var ac=createTextboxCell("newTitleInput","newContactTitle","50%",false,"");var y=document.createElement("td");dojo.attr(y,{width:"5px",align:"right",valign:"middle"});O.appendChild(ae);O.appendChild(y);O.appendChild(ac);var N=createTableRow("100%");x.appendChild(N);var ab=createLabelCell("Preferred Method",true,"50%");var aa=createFilteringSelectCell("newCMInput","newContactMethod",u,"id","id");N.appendChild(ab);N.appendChild(aa);var M=createTableRow("100%");x.appendChild(M);var Z=createLabelCell("Time Zone",true,"50%");var w=createTextInput("newTZInput","newContactTZ",false,"");dojo.connect(w,"onFocus",function(){clearLovHiddenFld("newContactTZ")});dojo.connect(w,"onChange",function(){onchangeLov_fld("newContactTZ")});var aE=createHiddenTextbox("newContactTZId","");var W=createHiddenTextbox("newContactTZ_lovHidden","");var f=document.createElement("a");dojo.attr(f,{style:"vertical-align:middle",href:"#"});var D=document.createElement("img");dojo.attr(D,{src:"../images/search.gif",height:"16",width:"16",title:"Search Timezone"});f.appendChild(D);dojo.connect(f,"onclick",function(){setTZLov(false)});var Y=document.createElement("td");Y.appendChild(w.domNode);Y.appendChild(aE.domNode);Y.appendChild(W.domNode);Y.appendChild(f);Y.setAttribute("width","50%");Y.setAttribute("align","left");Y.setAttribute("valign","middle");M.appendChild(Z);M.appendChild(Y);var s=createTableRow("100%");x.appendChild(s);var K=createLabelCell("Work Phone#",true,"50%");var J=createTextboxCell("newWphoneInput","newContactPhone","50%",false,"");s.appendChild(K);s.appendChild(J);var p=createTableRow("100%");x.appendChild(p);var I=createLabelCell("Mobile Phone#",false,"50%");var H=createTextboxCell("newMobileInput","newContactMobile","50%",false,"");p.appendChild(I);var m=document.createElement("td");dojo.attr(m,{width:"5px",align:"right",valign:"middle"});p.appendChild(m);p.appendChild(H);var o=createTableRow("100%");x.appendChild(o);var G=createLabelCell("Work Fax",false,"50%");var F=createTextboxCell("newFaxInput","newContactFax","50%",false,"");o.appendChild(G);var l=document.createElement("td");dojo.attr(l,{width:"5px",align:"right",valign:"middle"});o.appendChild(l);o.appendChild(F);var g=createTableRow("100%");x.appendChild(g);var B=createLovSaveCancelButtonCell(ah,aD,v,a);g.appendChild(B);dojo.connect(dijit.byId("newContactEmail"),"onChange",function(){validateNewContactEmail()});dojo.parser.parse("newContactDialog");dijit.byId("newContactDialog").show()}function validateNewContactEmail(){if(dijit.byId("newContactEmail")&&dijit.byId("newContactEmail").getValue()!=""){var f=dijit.byId("newContactEmail").getValue();var h=new Array();var b={};b.name="contactEmail";b.value=f;h.push(b);var b={};b.name="csiId";b.value=dojo.byId("newCsiId").value;h.push(b);var b={};b.name="accountId";b.value=dojo.byId("newAccountId").value;h.push(b);var a=TECHNICAL;if(dijit.byId(SRTYPE_FID)){a=dijit.byId(SRTYPE_FID).getValue()}var b={};b.name=SRTYPE_FID;b.value=a;h.push(b);var g={url:"../../../SRHeaderRequest",content:{validationName:"contact",compList:dojo.toJson(h),action:"validateComp"},preventCache:true,handleAs:"json",load:function(l){dijit.byId("pleasewait").hide();if(l.csiContactAssError!=undefined&&l.csiContactAss=="invalid"){dijit.byId("newContactEmail").setValue("");displayErrors(l.csiContactAssError)}else{if(l.emailAddress!=undefined){if(l.existsFlag!=undefined){dijit.byId("existsFlag").setValue(l.existsFlag)}if(l.contactId!=undefined){dijit.byId("existsContactId").setValue(l.contactId)}if(l.csiContactAss!=undefined){dijit.byId("csiContactAss").setValue(l.csiContactAss)}if(l.csiContactAssError!=undefined){dijit.byId("csiContactAssError").setValue(l.csiContactAssError)}if(l.accountContactAss!=undefined){dijit.byId("accountContactAss").setValue(l.accountContactAss)}if(l.lastName!=undefined){dijit.byId("newContactLName").setValue(l.lastName)}if(l.firstName!=undefined){dijit.byId("newContactFName").setValue(l.firstName)}if(l.workPhone!=undefined){dijit.byId("newContactPhone").setValue(l.workPhone)}if(l.cellularPhone!=undefined){dijit.byId("newContactMobile").setValue(l.cellularPhone)}if(l.faxPhone!=undefined){dijit.byId("newContactFax").setValue(l.faxPhone)}if(l.jobTitle!=undefined){dijit.byId("newContactTitle").setValue(l.jobTitle)}if(l.timeZoneName!=undefined){dijit.byId("newContactTZ").setValue(l.timeZoneName)}if(l.timeZoneId!=undefined){dijit.byId("newContactTZId").setValue(l.timeZoneId)}if(l.preferredCommunications!=undefined){dijit.byId("newContactMethod").setValue(l.preferredCommunications)}if(l.country!=undefined&&dijit.byId("newCountry")){dijit.byId("newCountry").setValue(l.country)}}else{dijit.byId("existsFlag").setValue("false");dijit.byId("existsContactId").setValue("");dijit.byId("csiContactAss").setValue("");dijit.byId("accountContactAss").setValue("");dijit.byId("csiContactAssError").setValue("");dijit.byId("newContactLName").setValue("");dijit.byId("newContactFName").setValue("");dijit.byId("newContactPhone").setValue("");dijit.byId("newContactMobile").setValue("");dijit.byId("newContactFax").setValue("");dijit.byId("newContactTitle").setValue("");dijit.byId("newContactTZ").setValue("");dijit.byId("newContactTZId").setValue("");dijit.byId("newContactMethod").setValue("");if(dijit.byId("newCountry")){dijit.byId("newCountry").setValue("")}}}return l},error:function(m){dijit.byId("pleasewait").hide();var l=getDisplayMessageObj("Failed to validate new contact email.",2);displayErrors(l)},timeout:120000};dijit.byId("pleasewait").show();dojo.xhrGet(g)}}function setTZLov(b){var g="timezone";var h=new Array();var f="";if(b!=undefined&&b){if(dijit.byId("newContactTZ")&&dijit.byId("newContactTZ").getValue()!=""){f="contactTimeZone:"+dijit.byId("newContactTZ").getValue()}}var a="";setLovDialog(g,h,f,a,"TimeZone","onSelectTZ()")}function onSelectTZ(){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null){var g=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[g];if(dijit.byId("newContactTZ_lovHidden")){dijit.byId("newContactTZ_lovHidden").setValue(f.contactTimeZone)}dijit.byId("newContactTZ").setValue(f.contactTimeZone);if(dijit.byId("newContactTZId")){dijit.byId("newContactTZId").setValue(f.contactTimeZoneId)}var a=dijit.byId("lovDialog");if(a!=null&&a.open){a.hide()}}}function createLabel(a){return document.createTextNode(a)}function createTextInput(l,h,g,f){var b=document.createElement("input");b.setAttribute("id",l);var a=new dijit.form.TextBox({id:h,value:f,name:h},b);if(g){a.readOnly=g}return a}function createTableRow(a){var b=document.createElement("tr");b.setAttribute("width",a);return b}function createLabelCell(b,m,g){var l=document.createDocumentFragment();var f=document.createElement("td");l.appendChild(f);if(m){var h=document.createElement("td");dojo.attr(h,{width:"5px",align:"right",valign:"middle"});l.appendChild(h);var a=document.createElement("img");a.setAttribute("src","../images/requiredicon.gif");a.setAttribute("alt","required");h.appendChild(a)}f.appendChild(createLabel(b));f.setAttribute("width",g);f.setAttribute("align","right");return l}function createLabelCellNotRequired(b,g){var l=document.createDocumentFragment();var f=document.createElement("td");l.appendChild(f);var h=document.createElement("td");dojo.attr(h,{width:"5px",align:"right",valign:"middle"});l.appendChild(h);var a=document.createElement("img");a.setAttribute("src","../../../common/images/blank.gif");h.appendChild(a);f.appendChild(createLabel(b));f.setAttribute("width",g);f.setAttribute("align","right");return l}function createHeader(b){var a=document.createElement("span");dojo.style(a,"font-weight","bold");dojo.style(a,"font-size","8pt");a.appendChild(document.createTextNode(b));return a}function createTextboxCell(m,l,f,h,g){var b=document.createElement("td");var a=createTextInput(m,l,h,g);b.appendChild(a.domNode);b.setAttribute("width",f);b.setAttribute("align","left");return b}function createComboSelectCell(g,b){var f=document.createElement("td");var a=createComboSelect(g,b);f.appendChild(a.domNode);f.setAttribute("align","left");return f}function createComboSelect(f,b){var a=document.createElement("input");var g=new dijit.form.ComboBox({id:f,name:f,autoComplete:false,store:b},a);return g}function createFilteringSelect(m,f,b,l,h){var a=document.createElement("input");var g=new dijit.form.FilteringSelect({id:f,name:f,autoComplete:false,store:b,searchAttr:l,invalidMessage:"Invalid value",labelType:"text"},a);return g}function createFilteringSelectCell(m,g,b,l,h){var f=document.createElement("td");var a=createFilteringSelect(m,g,b,l,h);f.appendChild(a.domNode);f.setAttribute("align","left");return f}function createDateTextBox(f){var a=document.createElement("input");var b=new srmdojoc.SRMDateTimeTextBox({promptMessage:"Please enter date in format: 03-Feb-2008 12:00:00 PM",constraints:{datePattern:"dd-MMM-yyyy",timePattern:"hh:mm:ss a",selector:""},lang:"en-us",id:f,name:f},a);return b}function createDateTextBoxCell(a){var g=document.createElement("td");dojo.attr(g,{valign:"middle","class":"srinput",align:"left"});var o=document.createElement("table");g.appendChild(o);var h=document.createElement("tbody");o.appendChild(h);var m=document.createElement("tr");h.appendChild(m);var f=document.createElement("td");m.appendChild(f);var l=document.createElement("td");m.appendChild(l);var b=createDateTextBox(a);f.appendChild(b.domNode);var p=document.createElement("span");p.className="tzclass";dojo.attr(p,{"class":"tzclass"});l.appendChild(p);return g}function createSimpleTextArea(h,f,g){var a=document.createElement("textarea");var b=new dijit.form.SimpleTextarea({style:f,rows:g,id:h,name:h},a);return b}function createSimpleTextAreaCell(h,b,g){var a=document.createElement("td");var f=createSimpleTextArea(h,b,g);a.appendChild(f.domNode);a.setAttribute("align","left");return a}function createLovSaveCancelButtonCell(dialog,source,callbackFunction,jsonObj){var td2=document.createElement("td");var divB1=document.createElement("div");divB1.setAttribute("width","10%");var b1=new dijit.form.Button({label:"Save",type:"submit"},divB1);td2.appendChild(b1.domNode);var divB2=document.createElement("div");divB2.setAttribute("width","10%");var b2=new dijit.form.Button({label:"Cancel",onClick:function(){dialog.hide();eval("("+callbackFunction+"( jsonObj.data, source, jsonObj.searchText, jsonObj.targetFields, jsonObj.title, jsonObj.onselect, jsonObj.params))")}},divB2);td2.setAttribute("colSpan","3");td2.appendChild(b2.domNode);return td2}function createHiddenTextbox(g,f){var b=document.createElement("input");b.setAttribute("id",g+"input");var a=new dijit.form.TextBox({id:g,type:"hidden",name:g},b);a.setValue(f);return a}function submitNewContactForm(h,g,p,b){var a=p.targetFields;var m=p.title;if(h!=undefined&&h.existsFlag=="true"&&h.existsContactId!=""){if(h.csiContactAss=="null"){var l='selectNewContactFlds("'+h.existsContactId+'","'+a+'","'+m+'")';buildContactCsiAss(h.newCsiId,h.existsContactId,"","",h.newAccountId,l)}else{if(h.csiContactAss=="valid"){if(h.accountContactAss=="null"){var l="";buildContactAccountAss(h.existsContactId,h.newAccountId,l)}selectNewContactFlds(h.existsContactId,a,m)}}}else{var o=validateNewContactForm();if(!o){return}var f={url:"../../../SRPickLovRequest",content:{formStr:dojo.toJson(h)},handleAs:"json",load:function(s){var q=s.opStatus;if(q==0){selectNewContactFlds(s.contactId,a,m)}else{displayErrors(s)}return s},error:function(s){var q=getDisplayMessageObj("Create New Contact Operation failed or timed out.",2);displayErrors(q);return s},timeout:120000};dojo.xhrPost(f)}}function selectNewContactFlds(f,b,h){var a=getNewContactData(h,f);if(h=="Contact"&&dijit.byId("contactId")){dijit.byId("contactId").setValue("")}else{if(h=="Alternate Contact"&&dijit.byId("alternateContactId")){dijit.byId("alternateContactId").setValue("")}else{if(h=="Indirect Contact"&&dijit.byId(INDIRECT_CONT_ID_FID)){dijit.byId(INDIRECT_CONT_ID_FID).setValue("")}}}setTargetFieldVals(b,a);if(dijit.byId("newContactDialog")){var g=dijit.byId("newContactDialog");if(g.open){g.hide()}}}function validateNewContactForm(){var h=new Array();var l="";var o=dijit.byId("newContactFName").getValue();if(o==null||o==""){l+="Please enter new contact first name on the form.\n"}var f=dijit.byId("newContactLName").getValue();if(f==null||f==""){l+="Please enter new contact last name on the form."}var g=dijit.byId("newContactEmail").getValue();if(g==null||g==""){l+="Please enter new contact email on the form.\n"}var a=dijit.byId("newContactPhone").getValue();if(a==null||a==""){l+="Please enter new contact work phone on the form.\n"}var m=dijit.byId("newContactTZ").getValue();if(m==null||m==""){if(dijit.byId("newContactTZId")){dijit.byId("newContactTZId").setValue("")}l+="Please enter new contact timezone on the form.\n"}var b=dijit.byId("newContactMethod").getValue();if(b==null||b==""){l+="Please select new contact preferred contact method on the form.\n"}if(dijit.byId("newContactMethod")!=undefined&&!dijit.byId("newContactMethod").isValid()){l+="Please select new contact preferred contact method on the form from the drop down.\n"}if(l!=""){alert(l);return false}return true}function getNewContactData(p,f){var b=dijit.byId("newContactFName").getValue();var o=dijit.byId("newContactLName").getValue();var m=dijit.byId("newContactEmail").getValue();var l=dijit.byId("newContactPhone").getValue();var g=dijit.byId("newContactTZ").getValue();var h=dijit.byId("newContactMethod").getValue();var a=dijit.byId("newCountry").getValue();var q={};if(p=="Contact"){q={contactId:f,contactFirstName:b,contactLastName:o,contactEmail:m,contactTimeZone:g,contactPhone:l,contactMethod:h,country:a}}else{if(p=="Alternate Contact"){q={alternateContactId:f,alternateContactFirstName:b,alternateContactLastName:o,alternateContactEmail:m,alternateContactPhone:l,alternateContactTimeZone:g}}else{if(p=="Indirect Contact"){q={indirectContId:f,indirectContFirst:b,indirectContLast:o,indirectContEmail:m,indirectContPhone:l,indirectContTZ:g}}}}return q}function setCustomTargetField(f,g,b,a){if(g=="TimeZone"){if(dijit.byId("newContactTZ_lovHidden")){dijit.byId("newContactTZ_lovHidden").setValue(f.contactTimeZone)}dijit.byId("newContactTZ").setValue(f.contactTimeZone);if(dijit.byId("newContactTZId")){dijit.byId("newContactTZId").setValue(f.contactTimeZoneId)}}else{if(g=="Owner"){if(dijit.byId(a+"_lovHidden")){dijit.byId(a+"_lovHidden").setValue(f.empEmail)}dijit.byId(a).setValue(f.empEmail)}else{if(g=="Contact"){populateSelectedContact(b,f)}else{if(g=="Alternate Contact"){populateSelectedAlternateContact(b,f)}else{if(g=="Product"||g=="Licensed Product"){onSelectProduct(b,f)}else{if(g=="Clarification"){onSelectClarification(f)}else{if(g=="Component"){setTargetFieldVals(a,f);checkIfSubcompExist(null,f.component)}else{if(g=="Serial Number"){serialNumberUtil.SNOnSelectHandler_b4(b,f)}else{if(g=="Reference CSI"){PartnerSRUtil.refCSIOnSelectHandler(b,f)}else{if(g=="Host"||g=="Host"){onSelectHost(b,f)}else{if(g=="Category"){onSelectCategory(f)}}}}}}}}}}}}function setTargetFieldVals(g,b){if(g!=null){var m=(dojo.isArray(g))?g:g.split(",");if(dojo.isArray(m)){for(var a=0;a<m.length;a++){var f=m[a];f=f.trim();var l=b[f];console.debug("field: ",f," val: ",l);if(dijit.byId(f)&&l!=undefined){var h=f+"_lovHidden";if(dijit.byId(h)){dijit.byId(h).setValue(l)}if(dojo.byId(f).type=="checkbox"){if(l=="true"||l==true){dijit.byId(f).setAttribute("checked",true)}else{dijit.byId(f).setAttribute("checked",false)}}else{dijit.byId(f).setValue(l)}}}}}}function setTargetFieldFromItem(l,g,f,a){if(l!=null){var o=l.split(",");for(var b=0;b<o.length;b++){var h=o[b];var m=a.getValue(f,h);if(dijit.byId(h)!=undefined){dijit.byId(h).setValue(m)}}}alert("A single value was found. It was automatically selected.")}function getAccount(){var b=dijit.byId(CSI);var g=b.getValue();var l=new Object();var h=new Array();l.lookupId=CSI;l.lookupValue=g;h.push(l);var f="account";var a="accountName,accountId";if(g!=null&&g!=""){setLovDialog(f,h,"",a,"Account",null)}}function setAccountLov(){var f=new Array();var b="account";var a="accountName,accountNumber,accountId";setLovDialog(b,f,"",a,"Account",null)}function getCsiByEmail(){var g=dijit.byId(CSI);var l=g.getValue();if(l==""){var b=dijit.byId(CONTACT_EMAIL);var f=b.getValue();if(f==""){return}var o=new Object();var m=new Array();o.lookupId=CSI_CONTACT_EMAIL;o.lookupValue=f;m.push(o);var h=CSI;var a=CSI;setLovDialog(h,m,"",a,CSI_LABEL,null)}}function getErrMsg(){var b="errorMessage";var a="onSelectErrMsg()";setLovDialog(b,[],"","","Error Message",a)}function getRfcs(){var f="rfc";var b="onSelectRfc()";var a=getCSI();var g=new Array();var h=new Object();h.lookupId="rfcCsi";h.lookupValue=a;g.push(h);setLovDialog(f,g,"","","RFC",b)}function onSelectErrMsg(){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null){var g=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[g];dijit.byId("referenceLinkInputText").setValue(f.messageId);dijit.byId("pickedChoiceLabel").setValue(getShorterTextAsHint(f.messageText));var a=dijit.byId("lovDialog");if(a!=null&&a.open){a.hide()}}}function onSelectRfc(){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null){var g=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[g];dijit.byId("pickedChoiceLabel").setValue(getShorterTextAsHint(f.rfcNumber));dijit.byId("rfcCsi").setValue(f.rfcCsi);dijit.byId("rfcStatus").setValue(f.rfcStatus);dijit.byId("referenceLinkInputText").setValue(f.rfcId);var a=dijit.byId("lovDialog");if(a!=null&&a.open){a.hide()}}}function getItemDataStore(a,f,b,h){var g;dojo.xhrGet({url:"../../../SRPickLovRequest",content:{action:"getModel",source:b,lookupParam:dojo.toJson(h)},preventCache:true,sync:true,handleAs:"json",load:function(l){if(l==null){alert("Error in retrieving data");return null}g=new dojo.data.ItemFileReadStore({data:l});return g},error:function(m){var l=getDisplayMessageObj("Error in retrieving data for pick list.",2);displayErrors(l)},timeout:200000});return g}function getDynamicQueryItemStore(a){var b=new srmdojoc.data.SPHomeQueryReadStore({url:"../../../SRPickLovRequest",urlPreventCache:true,clearOnClose:true,requestMethod:"get",jsId:"lovStore",doClientPaging:a,doClientSorting:a});return b}function getSRPickApplet(){var a="sr";setLovDialog(a,[],"","","Service Request","onSelectSR()")}function onSelectSR(){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null){var g=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[g];dijit.byId("referenceLinkInputText").setValue(f.srNumber);dijit.byId("pickedChoiceLabel").setValue(f.srNumber);var a=dijit.byId("lovDialog");if(a!=null&&a.open){a.hide()}}}function setCSILov(){var g=CSI;var f=dijit.byId(ACCOUNT_NAME);var b=dijit.byId(ACCOUNT_ID);var m="";var h=new Array();if(b!=undefined&&(b!=null&&b.getValue()!="")){var l=new Object();l.lookupId=CSI_ACCOUNT_ID;l.lookupValue=b.value;h.push(l)}if(dijit.byId(SRTYPE_FID)){var l=new Object();l.lookupId=SRTYPE_FID;l.lookupValue=dijit.byId(SRTYPE_FID).getValue();h.push(l)}if(dijit.byId(CONTACT_EMAIL)!=undefined&&dojo.string.trim(dijit.byId(CONTACT_EMAIL).getValue())!=""){var l=new Object();l.lookupId=CSI_CONTACT_EMAIL;l.lookupValue=dijit.byId(CONTACT_EMAIL).getValue();h.push(l)}var a=CSI_CONTACT_ID+","+CSI;setLovDialog(g,h,"",a,CSI_LABEL,"onSelectCSIContact()")}function createCSIQueryNode(){var H=dijit.byId("csiadvancedF");if(H!=undefined){H.destroyRecursive()}var z=document.createElement("div");z.setAttribute("id","csipane");H=new dijit.TitlePane({id:"csiadvancedF",title:"Advanced Search",style:"width: 100%"},z);var A=document.createElement("table");A.setAttribute("width","100%");A.setAttribute("id","queryT");var a=document.createElement("tbody");A.appendChild(a);var G=createTableRow("100%");a.appendChild(G);var w=createQueryButtonCell("doCSIQuery()");w.setAttribute("valign","middle");w.setAttribute("align","center");w.setAttribute("rowSpan","2");G.appendChild(w);var m=createLabelCell(CSI_LABEL,false,"15%");var h=createTextboxCell(CSI_INPUT,CSI_INPUT,"15%",false,"");h.title="Atleast provide three non-wildcard characters before using wildcard.";var y=dijit.byId(CSI_INPUT);G.appendChild(m);G.appendChild(h);var v=createLabelCell(CSI_ACCOUNT_NUMBER_LABEL,false,"15%");var s=createTextboxCell(CSI_ACCOUNT_NUMBER_INPUT,CSI_ACCOUNT_NUMBER_INPUT,"15%",false,"");s.title="Atleast provide three non-wildcard characters before using wildcard.";var p=dijit.byId(CSI_ACCOUNT_NUMBER_INPUT);p.setAttribute("class","srinput");G.appendChild(v);G.appendChild(s);var D=createLabelCell(CSI_ACCOUNT_NAME_LABEL,false,"15%");var B=createTextboxCell(CSI_ACCOUNT_NAME_INPUT,CSI_ACCOUNT_NAME_INPUT,"15%",false,"");B.title="Atleast provide three non-wildcard characters before using wildcard.";var q=dijit.byId(CSI_ACCOUNT_NAME_INPUT);G.appendChild(D);G.appendChild(B);var E=createTableRow("100%");a.appendChild(E);var o=createLabelCell(CSI_ACCOUNT_COUNTRY_LABEL,false,"15%");var l=createTextboxCell(CSI_ACCOUNT_COUNTRY_INPUT,CSI_ACCOUNT_COUNTRY_INPUT,"10%",false,"");l.title="Atleast provide three non-wildcard characters before using wildcard.";var f=dijit.byId(CSI_ACCOUNT_COUNTRY_INPUT);f.setAttribute("class","srinput");E.appendChild(o);E.appendChild(l);var F=createLabelCell(CSI_SI_NAME_LABEL,false,"15%");var C=createTextboxCell(CSI_SI_NAME_INPUT,CSI_SI_NAME_INPUT,"15%",false,"");C.title=atLeast3CharsMsg;var g=dijit.byId(CSI_SI_NAME_INPUT);g.setAttribute("class","srinput");E.appendChild(F);E.appendChild(C);var x=createLabelCell(CSI_CONTACT_EMAIL_LABEL,false,"15%");var u=createTextboxCell(CSI_CONTACT_EMAIL_INPUT,CSI_CONTACT_EMAIL_INPUT,"15%",false,"");var b=dijit.byId(CSI_CONTACT_EMAIL_INPUT);b.setAttribute("class","srinput");E.appendChild(x);E.appendChild(u);H.setContent(A);H.startup();return H.domNode}function doCSIQuery(){var b=CSI;var a=new Array();var f=new Object();f.id=CSI_INPUT;f.name=CSI;f.label=CSI_LABEL;a.push(f);var f=new Object();f.id=CSI_ACCOUNT_NUMBER_INPUT;f.name=CSI_ACCOUNT_NUMBER;f.label=CSI_ACCOUNT_NUMBER_LABEL;a.push(f);var f=new Object();f.id=CSI_ACCOUNT_NAME_INPUT;f.name=CSI_ACCOUNT_NAME;f.label=CSI_ACCOUNT_NAME_LABEL;a.push(f);var f=new Object();f.id=CSI_ACCOUNT_COUNTRY_INPUT;f.name=CSI_ACCOUNT_COUNTRY;f.label=CSI_ACCOUNT_COUNTRY_LABEL;a.push(f);var f=new Object();f.id=CSI_SI_NAME_INPUT;f.name=CSI_SI_NAME;f.label=CSI_SI_NAME_LABEL;a.push(f);if(dijit.byId(SRTYPE_FID)){var f=new Object();f.id=SRTYPE_FID;f.name=SRTYPE_FID;f.label="SR Type";a.push(f)}var f=new Object();f.id=CSI_CONTACT_EMAIL_INPUT;f.name=CSI_CONTACT_EMAIL;f.label=CSI_CONTACT_EMAIL_LABEL;a.push(f);submitQuery(b,a)}function createQueryButtonCell(callbackFunc){var td2=document.createElement("td");var divB1=document.createElement("div");divB1.setAttribute("width","10%");var b1=new dijit.form.Button({label:"Query",onClick:function(){eval("("+callbackFunc+")")}},divB1);td2.appendChild(b1.domNode);return td2}function submitQuery(source,formParams){var queryStr="{";var params=[];if(formParams!=null&&dojo.isArray(formParams)){for(i=0;i<formParams.length;i++){var param=formParams[i];var pid=param.id;var pname=param.name;if(dijit.byId(pid)!=undefined&&pname!=undefined){pvalue=dijit.byId(pid).getValue();if(pvalue!=""&&pvalue!=null){if(pid==CSI_ACCOUNT_NUMBER_INPUT||pid==CSI_ACCOUNT_NAME_INPUT||pid==CSI_INPUT||pid==CSI_ACCOUNT_COUNTRY_INPUT||(pid==HW_HOST_NAME_Q_INPUT)||pid==SERIAL_NUMBER_Q_INPUT||pid==HW_DESC_Q_INPUT||pid==HW_PROD_Q_INPUT||pid==CSI_SI_NAME_INPUT||pid==REF_CSI_Q_INPUT){var plabel=param.label;var rcode=restrictQuery(plabel,pvalue,LIKE_REQUIRES_3_NONWILDCARD_CHARS);if(rcode==-1){return}}if(pid==CSI_CONTACT_EMAIL_INPUT||pid==SERIAL_NUMBER_CONTACT_EMAIL_INPUT){var plabel=param.label;var rcode=restrictQuery(plabel,pvalue,LIKE_MAY_NOT_CONTAIN_WILDCARD);if(rcode==-1){return}}queryStr=queryStr+pname+': "'+encodeURIComponent(pvalue)+'",'}}}var pos=queryStr.lastIndexOf(",");if(pos!=-1){queryStr=queryStr.substring(0,pos)}}queryStr=queryStr+"}";var queryObj=eval("("+queryStr+")");var grid=dijit.byId("grid");var dstore=getDynamicQueryItemStore(false);dojo.connect(dstore,"errorHandler",ajaxLoadingError);var tzOffset=new Date().getTimezoneOffset();var t=(new Date()).getTime();if(grid!=null){grid.model.store.errorMsg="";grid.model.query={queryObj:dojo.toJson(queryObj),action:"getModel",tzOffset:tzOffset,t:t,source:source};grid.model.refresh()}}function getDefectPickApplet(){var a="DEFECT";setLovDialog(a,[],"","","Defects","onSelectDefect()")}function onSelectDefect(){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null){var g=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[g];var a=dijit.byId("lovDialog");if(a!=null&&a.open){a.hide()}}}function onchange_account(f){var l=false;var g=dijit.byId(ACCOUNT_ID);if(!g){return}var b=g.getValue();if(b==""){return}if(f=="update"&&getInitMode()){if(acctClassification.accountId!=undefined&&(acctClassification.accountId==b)){setFieldVal("classification",acctClassification.classification);showAcctIndicator(acctClassification.showAcctIndicator,acctClassification.indicatorAcctClassification);return}acctClassification={};l=true}var h=dijit.byId(CSI);var a="";if(h!=undefined){a=h.getValue()}dojo.xhrGet({url:"../../../SRPickLovRequest",content:{action:"getAccount",accountId:b,srOperation:f,classificationValue:(f=="update")?SRUtils.getCurrentSR().topAccountClassification:"",classificationOnly:l},preventCache:true,handleAs:"json",load:function(m){if(m.accountId!=undefined){if(f=="create"){setFieldVal("classification",m.classification)}if(f=="update"){acctClassification.accountId=b;acctClassification.classification=m.classification;acctClassification.showAcctIndicator=(m.showAcctIndicator!=undefined)?m.showAcctIndicator:false;acctClassification.indicatorAcctClassification=(m.indicatorAcctClassification!=undefined)?m.indicatorAcctClassification:"";showAcctIndicator(acctClassification.showAcctIndicator,acctClassification.indicatorAcctClassification)}if(dijit.byId("altAccountName")!=undefined&&m.altAccountName!=undefined){dijit.byId("altAccountName").setValue(m.altAccountName)}if(dijit.byId("accountIntegId")!=undefined&&m.accountIntegId!=undefined){dijit.byId("accountIntegId").setValue(m.accountIntegId)}if(f=="create"&&b!=""&&a==""){setCSILov()}}},error:function(m){console.debug("Failed to retrieve account related information. Operation timed out.")},timeout:200000})}function showAcctIndicator(a,f){if(true==a){var b=dijit.byId("srHeader");dojo.query(".AcctClassificationText",b.titleNode).forEach(function(g){g.innerHTML=f+" "})}}function onchange_acctClassfication(a){}function setClassificationClass(g,a,b){if(dijit.byId(g)==undefined){return}if(!dojo.byId("noclassification")){return}var f=dijit.byId(g);if(a!=undefined&&a==true){dojo.byId("noclassification").innerHTML="";dojo.byId("noclassification").innerHTML="Loading ..";dojo.style(dojo.byId("noclassification"),"display","");dojo.style(dojo.byId("classification"),"display","none");dojo.style(dojo.byId("classificationSearch"),"display","none")}else{if(b!=undefined&&b==true){dojo.byId("noclassification").innerHTML="";dojo.byId("noclassification").innerHTML="WS Error";dojo.style(dojo.byId("noclassification"),"display","");dojo.style(dojo.byId("classification"),"display","none");dojo.style(dojo.byId("classificationSearch"),"display","none")}else{if(f.value==undefined||f.value==""){dojo.byId("noclassification").innerHTML="";dojo.byId("noclassification").innerHTML="No Classification";dojo.style(dojo.byId("noclassification"),"display","");dojo.style(dojo.byId("classification"),"display","none");dojo.style(dojo.byId("classificationSearch"),"display","none")}else{if(f.value!=""){dojo.byId("noclassification").innerHTML="";dojo.style(dojo.byId("noclassification"),"display","none");dojo.style(dojo.byId("classification"),"display","");dojo.style(dojo.byId("classificationSearch"),"display","")}}}}}function OnChangeCSICbFunc(g,o,q){console.debug("srLOV>> OnChangeCSICbFunc(response, srOp, srcreateOp)");if(g==undefined&&!dojo.isObject(g)){return}var l={};var z=dijit.byId("csi");var v=z.getValue();var w=(g.oldVal!=undefined)?g.oldVal:"";var s=(g.oldCsiId!=undefined)?g.oldCsiId:"";var y=(dijit.byId("accountId")!=undefined)?dijit.byId("accountId").getValue():"";var h=(dijit.byId("odFlag")!=undefined)?dijit.byId("odFlag").checked:false;var u=(dijit.byId("partnerFlag")!=undefined)?dijit.byId("partnerFlag").checked:false;l.csi=v;l.csiId=(g.csiId!=undefined)?g.csiId:"";l.accountId=(g.accountId!=undefined)?g.accountId:"";l.accountName=(g.accountName!=undefined)?(g.accountName):"";l.accountNumber=(g.accountNumber!=undefined)?g.accountNumber:"";l.odFlag=(g.odFlag!=undefined)?g.odFlag:false;l.partnerFlag=(g.partnerFlag!=undefined)?g.partnerFlag:false;l.hwFlg=(g.HWFlg!=undefined)?g.HWFlg:false;l.csiName=(g.csiName!=undefined)?g.csiName:"";l.HW_SW=(g[HW_SW_FID]!=undefined)?g[HW_SW_FID]:"";if(o=="update"&&(!l.hwFlg&&!l.partnerFlag)){var x=SRUtils.checkForOpenFSTask("Software CSI");var f=getFieldVal(SERIAL_NUM_FID);if(x!=null&&x.opStatus==FAILURE_STATUS){window.continueFunc="";window.cancelFunc=function(){resetSRHeader()};displayErrors(x,window.continueFunc,window.cancelFunc);return false}}if(((h&&!l.odFlag)||(!h&&l.odFlag))&&v!=""){var b="";if(l.odFlag){b="Are you sure you want to use On Demand CSI?"}else{b="Are you sure you want to change to Non On Demand CSI?"}if(!confirm(b)){if(o=="update"){resetSRHeader()}else{fillCSIDataOnCancel("","","","",false,false)}return}}fillCSIRelatedData(o,l,q);if(dijit.byId("odFlag")&&l.odFlag){loadCMDBConfigList(o)}var m=false;var a=g.csiContactJson;if(a!=undefined&&a!=""){a.statusFlag="";populateSelectedContact(o,a);m=true;if(dijit.byId(CSI_CONTACT_ID)){dijit.byId(CSI_CONTACT_ID).setValue("")}}if(o=="create"||(o=="update"&&y!=l.accountId)){if(q!="SRCollaboration"&&q!="SRCopy"&&!m){if(dijit.byId("contactLastName")){dijit.byId("contactLastName").setValue("")}}if(dijit.byId("alternateContactLastName")){dijit.byId("alternateContactLastName").setValue("")}if(dijit.byId("acknowledged")&&o=="create"){dijit.byId("acknowledged").setAttribute("checked",false)}CSIUtil.resetCSIRelatedFlds(o);platinumSR.onchangeSRFlds()}resetHandInstAck(o);if(o=="create"){setSHILOV(false)}else{if(o=="update"){showSHI(false)}}if(dijit.byId("contactId")!=undefined&&dijit.byId("contactId").getValue()!=""){validateContactCSIAss(o,l.accountId,l.csiId,dijit.byId("contactId").getValue(),"primary")}var p=true;evalEffectOnEnvFields(getEvalFieldVal("productClass"),o,p);if(dijit.byId("SRProductSubscription")){SRCloud.resetFormElements();SRCloud.evaluateForm()}SREXA.verifyIsEXA()}function onchange_csi(b,a){console.debug("srLOV>> onchange_csi(srOp, srcreateOp)");if(b=="update"&&getInitMode()){return}invokeCSIFldValidation(b,a)}function csiValidation(f){var q=dijit.byId("csi");var p=q.getValue();var a=new Array();var g={};g.name="csi";g.value=p;a.push(g);if(dojo.byId("accountId")&&f=="update"){var g={};g.name="accountId";g.value=dojo.byId("accountId").value;a.push(g)}if(dojo.byId(SRTYPE_FID)){var g={};g.name=SRTYPE_FID;g.value=dojo.byId(SRTYPE_FID).value;a.push(g)}if(dojo.byId(CSI_CONTACT_ID)){var g={};g.name=CSI_CONTACT_ID;g.value=dojo.byId(CSI_CONTACT_ID).value;a.push(g)}if(!dijit.byId("pleasewait").open){dijit.byId("pleasewait").show()}var o="";var m="";var h="";var l="";if(f=="update"){o=getActiveSrId();m=getQueryTabName();h=getSrModId();l=getSrNumber()}var b={url:"../../../SRHeaderRequest",content:{srOp:f,validationName:"csi",compList:dojo.toJson(a),action:"validateComp",srId:o,queryTabName:m,modId:h,activeSR:l},handleAs:"json",load:function(s){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}return s},error:function(u){var s=getDisplayMessageObj("Validation operation on CSI failed or timed out.",2);displayErrors(s);console.debug("Validation operation on CSI failed or timed out.",u);return u},timeout:120000};return dojo.xhrGet(b)}function invokeCSIFldValidation(f,b){var a=csiValidation(f);a.addCallback(function(h){if(h.opStatus==1){var g="OnChangeCSICbFunc("+dojo.toJson(h)+",'"+f+"','"+b+"')";if(f=="update"){var l="resetSRHeader()";displayErrors(h,g,l)}else{var l="fillCSIDataOnCancel('','','','',false,false)";displayErrors(h,g,l)}}else{if(h.opStatus==0){OnChangeCSICbFunc(h,f,b)}}})}function fillCSIDataOnCancel(f,h,a,b,g){if(dijit.byId("csi")){dijit.byId("csi").setValue(f)}if(f==""&&dijit.byId("accountName")){dijit.byId("accountName").setValue("")}if(dijit.byId("csiId")){dijit.byId("csiId").setValue(h)}if(isEmptyVal(f)){setFieldVal("csiName","")}if(dijit.byId("partnerFlag")){dijit.byId("partnerFlag").setAttribute("checked",b)}if(dijit.byId("hwFlag")){dijit.byId("hwFlag").setAttribute("checked",g)}serialNumberUtil.clearSNFldsData();PartnerSRUtil.clearIndirectCustFlds();HWSRUtil.setHWConditions()}function fillCSIRelatedData(l,g,p){var h=dijit.byId("csiId");var m=dijit.byId("accountName");var b=dijit.byId("accountNumber");var a=dijit.byId("accountId");if(h!=undefined&&g.csiId!=undefined){h.setValue(g.csiId)}if(m!=undefined){var f=m.getValue();if(g.accountName!=undefined&&f!=g.accountName){m.setValue(g.accountName)}}if(a!=undefined&&g.accountId!=undefined&&g.accountId!=""){a.setValue(g.accountId)}if(b!=undefined&&g.accountNumber!=""){b.setValue(g.accountNumber)}if(dijit.byId("odFlag")&&g.odFlag!=undefined){dijit.byId("odFlag").setAttribute("checked",g.odFlag);if(isODTechSR()){showODConfirmation()}}if(dijit.byId("partnerFlag")&&g.partnerFlag!=undefined){dijit.byId("partnerFlag").setAttribute("checked",g.partnerFlag)}if(dijit.byId("csiName")&&g.csiName!=undefined){dijit.byId("csiName").setValue(g.csiName)}if(dijit.byId(HW_SW_FID)&&g[HW_SW_FID]!=undefined){dijit.byId(HW_SW_FID).setValue(g[HW_SW_FID])}if(dijit.byId(HW_FLG_FID)&&g.hwFlg!=undefined){dijit.byId(HW_FLG_FID).setAttribute("checked",g.hwFlg)}CSIUtil.setCSIHWPartnerConditions(l,g,p);var o=false;if(g.csi==""&&g.csiId==""){o=true}srLOVUtil.setSerialNumberProp(o);srLOVUtil.evaluateProductProp(o)}var initOdMode=false;function showODConfirmation(){var a=dijit.byId("odDialog");if(a!=undefined){a.destroyRecursive()}a=new dijit.Dialog({refocus:false,title:"Confirmation",style:" border:1px solid rgb(153,187,232); z-index:2;",id:"odDialog"});var p=document.createElement("table");var h=document.createElement("tbody");p.appendChild(h);var o=document.createElement("tr");var f=document.createElement("td");f.appendChild(document.createTextNode("Are you reporting an outage of hosted service?"));o.appendChild(f);h.appendChild(o);var g=document.createElement("tr");var b=document.createElement("td");b.setAttribute("align","center");g.appendChild(b);h.appendChild(g);var l=new dijit.form.Button({label:"Yes"});dojo.connect(l,"onClick",function(){showODOutageWin();a.hide()});var m=new dijit.form.Button({label:"No"});dojo.connect(m,"onClick",function(){initOdMode=true;if(dijit.byId("outageType")!=undefined){dijit.byId("outageType").setValue("")}if(dijit.byId("severity")!=undefined){dijit.byId("severity").setValue("2-Significant")}initOdMode=false;a.hide()});b.appendChild(l.domNode);b.appendChild(m.domNode);a.domNode.appendChild(p);a.show()}function showODCsiChangeConfirmation(h){var a=dijit.byId("odDialog");var l=true;if(a!=undefined){a.destroyRecursive()}a=new dijit.Dialog({refocus:false,title:"Confirmation",style:" border:1px solid rgb(153,187,232); z-index:2;",id:"odDialog"});var u=document.createElement("table");var o=document.createElement("tbody");u.appendChild(o);var s=document.createElement("tr");var g=document.createElement("td");var b="";if(h=="true"){b="Are you sure you want to change to On Demand CSI?"}else{b="Are you sure you want to change to Non On Demand CSI?"}g.appendChild(document.createTextNode(b));s.appendChild(g);o.appendChild(s);var m=document.createElement("tr");var f=document.createElement("td");f.setAttribute("align","center");m.appendChild(f);o.appendChild(m);var p=new dijit.form.Button({label:"Yes"});dojo.connect(p,"onClick",function(){l=true;a.hide()});var q=new dijit.form.Button({label:"No"});dojo.connect(q,"onClick",function(){l=false;a.hide()});f.appendChild(p.domNode);f.appendChild(q.domNode);a.domNode.appendChild(u);dojo.connect(a,"hide",function(){alert(l);return l});a.show()}function showODOutageWin(){var p=dijit.byId("odOutageDialog");if(p!=undefined){p.destroyRecursive()}p=new dijit.Dialog({refocus:false,title:"Select Outage Type",style:" border:1px solid rgb(153,187,232); z-index:2;",id:"odOutageDialog"});var u=document.createElement("table");var a=document.createElement("tbody");u.appendChild(a);var f=document.createElement("tr");f.style.cssText="background-color: #CFECEC";var h=document.createElement("td");h.setAttribute("colSpan","2");var A=document.createElement("img");h.appendChild(A);A.setAttribute("src","../images/tip.gif");var s=document.createElement("span");s.style.cssText="font-weight:bold;";s.appendChild(document.createTextNode("Select appropriate Outage Type and set serverity to 1-Critical or 2-Significant."));h.appendChild(s);f.appendChild(h);a.appendChild(f);var o=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&lov=SR_SEVERITY&rev="+enabledLOVServlets.get("SRHeaderRequest")});var m=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&lov=OD_OUTAGE_TYPE&rev="+enabledLOVServlets.get("SRHeaderRequest")});var q=document.createElement("tr");var v=document.createElement("td");v.setAttribute("align","right");v.setAttribute("width","25%");v.appendChild(document.createTextNode("Outage Type"));q.appendChild(v);var y=document.createElement("td");var l=document.createElement("input");l.setAttribute("id","odF1");if(dijit.byId("outageTypeD")!=undefined){dijit.byId("outageTypeD").destroy()}var x=new dijit.form.FilteringSelect({id:"outageTypeD",name:"outageTypeD",value:"Unconfirmed"},l);x.store=m;x.setValue("Unconfirmed");y.appendChild(x.domNode);q.appendChild(y);a.appendChild(q);var q=document.createElement("tr");var v=document.createElement("td");v.setAttribute("align","right");v.setAttribute("width","25%");v.appendChild(document.createTextNode("Severity"));q.appendChild(v);var y=document.createElement("td");var l=document.createElement("input");l.setAttribute("id","odF2");if(dijit.byId("severityD")!=undefined){dijit.byId("severityD").destroy()}var x=new dijit.form.FilteringSelect({id:"severityD",value:"1-Critical",name:"severityD"},l);x.store=o;x.setValue("1-Critical");y.appendChild(x.domNode);q.appendChild(y);a.appendChild(q);var w=document.createElement("tr");var g=document.createElement("td");g.setAttribute("colSpan","2");g.setAttribute("align","center");w.appendChild(g);a.appendChild(w);var z=new dijit.form.Button({label:"Apply"});dojo.connect(z,"onClick",function(){var B=enforce_od_outage_sev_check("severityD","outageTypeD");initOdMode=true;if(!B){if(dijit.byId("outageTypeD").getValue()!=""){dijit.byId("severityD").setValue("1-Critical")}if(dijit.byId("outageTypeD").getValue()==""){dijit.byId("severityD").setValue("2-Significant")}initOdMode=false;return}if(dijit.byId("outageType")!=undefined){dijit.byId("outageType").setValue(dijit.byId("outageTypeD").getValue())}if(dijit.byId("severity")!=undefined){dijit.byId("severity").setValue(dijit.byId("severityD").getValue())}initOdMode=false;p.hide()});var b=new dijit.form.Button({label:"Cancel"});dojo.connect(b,"onClick",function(){initOdMode=true;if(dijit.byId("outageType")!=undefined){dijit.byId("outageType").setValue("")}if(dijit.byId("severity")!=undefined){dijit.byId("severity").setValue("2-Significant")}initOdMode=false;p.hide()});g.appendChild(z.domNode);g.appendChild(b.domNode);p.domNode.appendChild(u);p.show()}function onchange_outageType(f){if(f=="update"&&getInitMode()){return}var b="";if(dijit.byId("outageType")!=undefined){b=dijit.byId("outageType").getValue()}enforce_od_outage_sev1_check_for_platinum("severity","outageType");var a=enforce_od_outage_sev_check("severity","outageType");if(!a){if(dijit.byId("outageType").getValue()!=""){dijit.byId("severity").setValue("1-Critical")}if(dijit.byId("outageType").getValue()==""){dijit.byId("severity").setValue("2-Significant")}return}}function onchange_primary(b){if(b=="update"&&getInitMode()){return}var g=dijit.byId("contactId");var h="";h=g.getValue();if(h==null||h==""){return}var a=dijit.byId("csiId");var f=a.getValue();if(f==""||f==undefined){return}var l="";if(dijit.byId("accountId")!=null){l=dijit.byId("accountId").getValue()}validateContactCSIAss(b,l,f,h,"primary")}function onchange_alternate(b){if(b=="update"&&getInitMode()){return}var g=dijit.byId("alternateContactId");var a=dijit.byId("csiId");var h="";h=g.getValue();if(h==null||h==""){return}var f=a.getValue();if(f==""||f==undefined){return}var l="";if(dijit.byId("accountId")!=null){l=dijit.byId("accountId").getValue()}validateContactCSIAss(b,l,f,h,"alternate")}function onchange_indirect(a){if(a=="update"&&getInitMode()){return}var f=getFieldVal(INDIRECT_CONT_ID_FID);var b=getFieldVal(REF_CSI_ID_FID);if(f==""||b==""){return}var g=getFieldVal(INDIRECT_ACCT_ID_FID);validateContactCSIAss(a,g,b,f,"indirect")}function validateIndirectContactCSIStatus(f){if(f=="update"&&getInitMode()){return}var o=getFieldVal(INDIRECT_CUST_VFLG_FID);if(o==""||o=="No Access"){return}var l=getFieldVal(INDIRECT_CONT_ID_FID);var h=getFieldVal(REF_CSI_ID_FID);if((l==""||h=="")&&(o!=""&&o!="No Access")){alert("Please make sure you have  Reference CSI and Indirect Contact selected for the SR.");PartnerSRUtil.setIndirectContactConditions("No Access");return}var g=getFieldVal(INDIRECT_CONT_CSI_STATUS);var b=getFieldVal(INDIRECT_SR_VIEW_FLAG);if(g!=""){return PartnerSRUtil.validateIndirectContactVisibility(g,b)}var m={url:"../../../SRHeaderRequest",content:{action:"getContactCSIStatus",csiId:h,contactId:l},handleAs:"json",load:function(p){return p}};var a=dojo.xhrGet(m);a.addCallback(function(p){if(p.opStatus==0){console.debug("Contact CSI Status "+p.contactCSIStatus);PartnerSRUtil.validateIndirectContactVisibility(p.contactCSIStatus,p.srViewFlag)}})}function validateContactCSIAss(g,m,h,l,b,f){if(l==""||l==null||h==""||h==null){return}if(!dijit.byId("pleasewait").open){dijit.byId("pleasewait").show()}var a=validateCsiContactXhr(g,m,h,l,b,true);a.addCallback(function(s){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}setFieldVal(b+"_csiContactStatus",(s.csiContactStatus!=undefined)?s.csiContactStatus:"");setFieldVal(b+"_srViewFlag",(s.srViewFlag!=undefined)?s.srViewFlag:false);if(s.opStatus==1){var v="";if(s.csi!=undefined){v=s.csi}var u="";if(s.accountName!=undefined){u=s.accountName}var q="";if(f!=undefined&&f!=""){q=",'"+f+"'"}var o="invokeBuildContactCsiAss('"+g+"','"+h+"','"+l+"','"+b+"','"+v+"','"+m+"'"+q+")";var p="cancelContactCsiAssWarning('"+b+"','"+g+"' )";displayErrors(s,o,p)}else{checkChildSRAccess(g,h,l,b,v,m)}});a.addErrback(function(p){var o=getDisplayMessageObj("Validation of CSI Contact association failed or timed out.",2);displayErrors(o);console.debug("Validation of CSI Contact association failed or timed out.",p)});return a}function validateCsiContactXhr(l,w,m,f,p,g){if(isEmptyVal(f)||isEmptyVal(m)){return}var a=new Array();var o={};o.name="accountId";o.value=w;a.push(o);var o={};o.name="csiId";o.value=m;a.push(o);var o={};o.name="contactId";o.value=f;a.push(o);var o={};o.name="contactType";o.value=p;a.push(o);var h=getFieldVal(SRTYPE_FID)==""?TECHNICAL:getFieldVal(SRTYPE_FID);if(p=="indirect"){h="Non-Technical"}var o={};o.name=SRTYPE_FID;o.value=h;a.push(o);var v="";var u="";var q="";var s="";if(l=="update"){v=getActiveSrId();u=getQueryTabName();q=getSrModId();s=getSrNumber()}var b={url:"../../../SRHeaderRequest",content:{srOp:l,validationName:"contact-csi",compList:dojo.toJson(a),action:"validateComp",srId:v,queryTabName:u,modId:q,activeSR:s},sync:g,handleAs:"json",load:function(x){return x},timeout:120000};return dojo.xhrGet(b)}function cancelContactCsiAssWarning(a,b){if(a=="primary"){if(dijit.byId("contactLastName")){dijit.byId("contactLastName").setValue("")}}else{if(a=="alternate"){if(dijit.byId("alternateContactLastName")){dijit.byId("alternateContactLastName").setValue("")}}else{if(a=="indirect"){setFieldVal(INDIRECT_LAST_FID,"")}}}}function onchange_group(){if(getInitMode()){return}var f=dijit.byId("maximizedGroup").value;var a=dijit.byId("empEmail").value;var b=dijit.byId("assignmentType").value;changeOwnerFldROAttribute(a,f,b)}function invokeBuildContactCsiAss(g,h,l,a,f,m,b){buildContactCsiAss(h,l,a,f,m,b);checkChildSRAccess(g,h,l,a,f,m)}function checkChildSRAccess(g,h,b,l,q,m){if(l=="primary"&&g==CREATE_OP&&srLOVUtil.isExternalCollab()&&headerDataAsJson!=undefined&&(h!=headerDataAsJson.csiId)&&(b!=headerDataAsJson.contactId)){var o=headerDataAsJson.csiId;var f=headerDataAsJson.accountId;var a=headerDataAsJson.contactId;var p=validateCsiContactXhr(g,f,o,b,"primary",false);p.addCallback(function(v){if(v.opStatus==1){var x=(f==m&&v.csiContactStatus!="Denied")?"The selected contact is not associated to parent SR CSI and therefore will not be able to view the parent SR. Do you want submit the request to create association between parent SR CSI and contact?":"The selected contact is not associated to parent SR CSI and therefore will not be able to view the parent SR.";var w=getDisplayMessageObj(x,1);var s=(f==m&&v.csiContactStatus!="Denied")?"buildContactCsiAss('"+o+"','"+b+"','primary','"+headerDataAsJson.csi+"','"+f+"')":null;var u="closeMessageDialog()";displayErrors(w,s,u)}});p.addErrback(function(u){var s=getDisplayMessageObj("Validation of CSI Contact association failed or timed out.",2);displayErrors(s);console.debug("Validation of CSI Contact association failed or timed out.",u)})}}function buildContactCsiAss(csiId,contactId,contactType,csi,accountId,callfunc){if(csiId==""||csiId==null||contactId==""||contactId==null||accountId==""||accountId==null){return}var srType=getFieldVal(SRTYPE_FID)==""?TECHNICAL:getFieldVal(SRTYPE_FID);if(contactType=="indirect"){srType="Non-Technical"}var ajaxReq={url:"../../../SRHeaderRequest",content:{contactType:contactType,action:"buildContactCsiAss",csiId:csiId,contactId:contactId,csi:csi,accountId:accountId,srType:srType},sync:true,handleAs:"json",load:function(response){if(response.opStatus!=0){displayErrors(response)}else{if(response.opStatus==0){alert("Request to create association between CSI "+csi+" and "+contactType+" has been submitted for approval process.");if(callfunc!=undefined&&callfunc!=""){eval("("+callfunc+")")}}}},error:function(data){var msgData=getDisplayMessageObj("Request to Create Association between CSI and Contact failed or timed out.",2);displayErrors(msgData);console.debug("Request to Create Association between CSI and Contact failed or timed out.",data)},timeout:120000};dojo.xhrGet(ajaxReq)}function buildContactAccountAss(contactId,accountId,callfunc){if(contactId==""||contactId==null||accountId==""||accountId==null){return}var ajaxReq={url:"../../../SRHeaderRequest",content:{action:"buildContactAccountAss",contactId:contactId,accountId:accountId},sync:true,handleAs:"json",load:function(response){if(response.opStatus!=0){displayErrors(response)}else{if(response.opStatus==0){if(callfunc!=undefined&&callfunc!=""){eval("("+callfunc+")")}}}},error:function(data){var msgData=getDisplayMessageObj("Request to Create Association between Account and Contact failed or timed out.",2);displayErrors(msgData);console.debug("Request to Create Association between Account and Contact failed or timed out.",data)},timeout:120000};dojo.xhrGet(ajaxReq)}function loadSubCategory(b,f){if(!dijit.byId("srType")){return}var a=dijit.byId("srType");if(a==undefined){return}var g=a.getValue();if(!dojo.byId("subCategory")){return}if((b=="")||(b=="create")||(b=="update"&&!getInitMode())){dijit.byId("subCategory").setValue("");dijit.byId("subCategory").setDisplayedValue("")}var h={url:"../../../SRHeaderRequest",content:{parentValue:g,lov:"SR_SUBCATEGORY_CD",action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(l){dijit.byId("subCategory").store=new dojo.data.ItemFileReadStore({data:l});if(f!=undefined&&f!=""){dijit.byId("subCategory").setValue(f)}},error:function(l){console.debug("An error occurred for subcategory: "+l)},timeout:60000};dojo.xhrGet(h)}function onchange_type(f){var b=dijit.byId("srType");var l=b.getValue();setTimeout(function(){remoteAccessCheck()},0);var g=false;if(f=="update"&&getInitMode()){g=true}if(f=="update"&&l==NONTECHNICAL&&!g){var h=SRUtils.checkForOpenFSTask("Non-Technical SR Type");if(h!=null&&h.opStatus==FAILURE_STATUS){window.continueFunc="";window.cancelFunc=function(){resetSRHeader()};displayErrors(h,window.continueFunc,window.cancelFunc);return false}}if(isHardwareOrBoth()&&f==UPDATE_OP&&!(serialNumberUtil.isEmptySN())&&!g){var a=serialNumberUtil.getSNDetails();a.addCallback(function(o){var m=srTypeUtil.onChangeValidation(f,o[SERIAL_NUM_FID]);if(m==1){return}})}else{if(isPartnerSR()&&!isEmptyVal(getFieldVal(REF_CSI_FID))&&l==TECHNICAL&&!g){var a=PartnerSRUtil.getRefCSIDetails();a.addCallback(function(o){var m=srTypeUtil.invokeOnChangeValidationForRefCSI(f,o);if(m==1){return}})}else{if(!(serialNumberUtil.isEmptySN())&&!g){var a=serialNumberUtil.getSNDetails();a.addCallback(function(o){var m=srTypeUtil.onChangeValidation(f,o[SERIAL_NUM_FID]);if(m==1){return}})}else{srTypeUtil.onChangeValidation(f)}}}if(dijit.byId("refElemFSTasks")!=undefined){}serialNumberUtil.handleSRHIs();SREXA.verifyIsEXA({trigger:"srType"});SRCloud.evaluateForm();setTimeout(function(){onsiteSLACheck()},10)}var srTypeUtil={};var UNSUPPORTED_SN_FOR_SRTYPE_MSG="Selected Serial Number is not covered under the current support contract. Therefore, this Serial Number cannot be used in Technical SR.";srTypeUtil.invokeOnChangeValidationForRefCSI=function(g,f){var h=false;if(g=="update"&&getInitMode()){h=true}if(!(serialNumberUtil.isEmptySN())&&!h){var a=serialNumberUtil.getSNDetails();a.addCallback(function(m){var l=srTypeUtil.onChangeValidation(g,m[SERIAL_NUM_FID],f);return l})}else{var b=srTypeUtil.onChangeValidation(g,serialNumberUtil.getSNRecord(),f);return b}return 0};srTypeUtil.onChangeValidation=function(l,o,m){var y=false;if(l=="update"&&getInitMode()){y=true}if(o!=undefined&&!y){if(isHardwareOrBoth()){var x=serialNumberUtil.validateSerialNumberData(o);if(x!=undefined&&x[UNSUPPORTED_SN_PROP]==true){alert(UNSUPPORTED_SN_FOR_SRTYPE_MSG);srTypeUtil.setSRType(NONTECHNICAL,l);return FAILURE_STATUS}if(x!=undefined&&x[UNSUPPORTED_SN_CSI_PROP]==true){displayErrors(x);srTypeUtil.setSRType(NONTECHNICAL,l);return FAILURE_STATUS}}var x=serialNumberUtil.matchSerialNumberCSI(o);if(x!=undefined&&x[EMPTY_PARTNER_CSI]==true){displayErrors(x);srTypeUtil.setSRType(NONTECHNICAL,l);return FAILURE_STATUS}if(x!=undefined&&(x[UNMATCHED_PARTNER_CSI]||x[SN_INDIRECT_CSI_AS_DIRECT_NONTECH_ONLY])==true){displayErrors(x);srTypeUtil.setSRType(NONTECHNICAL,l);return FAILURE_STATUS}if(x!=undefined&&x[UNMATCHED_ORIGINATING_CSI]==true&&l==UPDATE_OP){var h=getFieldVal("srType");if(h!=undefined&&h==TECHNICAL){serialNumberUtil.clearSNFldsData()}}}if(m!=undefined){m.isIndirect=true;var x=CSIUtil.validateCSI(m,getFieldVal("srType"));if(x!=null&&x.opStatus==FAILURE_STATUS){displayErrors(x);if(x.errors){srTypeUtil.setSRType(NONTECHNICAL,l);return FAILURE_STATUS}}}var h=dijit.byId("srType");var w=h.getValue();var a=new Array();var f="";var g="";if(dijit.byId("csi")){var p={};p.name="csi";f=dijit.byId("csi").getValue();p.value=f;a.push(p)}if(dijit.byId("contactId")){var p={};p.name="contactId";g=dijit.byId("contactId").getValue();p.value=g;a.push(p)}var p={};p.name=SRTYPE_FID;p.value=w;a.push(p);if(f!=""&&w==TECHNICAL&&!y){if(!dijit.byId("pleasewait").open){dijit.byId("pleasewait").show()}var v="";var u="";var q="";var s="";if(l=="update"){v=getActiveSrId();u=getQueryTabName();q=getSrModId();s=getSrNumber()}var b={url:"../../../SRHeaderRequest",content:{srOp:l,validationName:"srtype-csi",compList:dojo.toJson(a),action:"validateComp",srId:v,queryTabName:u,modId:q,activeSR:s},handleAs:"json",load:function(B){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(B.opStatus==1){var z="srTypeUtil.runSrTypeConditions('"+w+"','"+l+"')";var A="srTypeUtil.setSRType(NONTECHNICAL,'"+l+"')";displayErrors(B,z,A);return FAILURE_STATUS}else{srTypeUtil.runSrTypeConditions(w,l)}},error:function(z){console.debug("Validation of CSI for technical SRs failed or timed out.",z);return FAILURE_STATUS},timeout:120000};dojo.xhrGet(b)}else{srTypeUtil.runSrTypeConditions(w,l)}return SUCCESS_STATUS};srTypeUtil.setSRType=function(b,a){if(dijit.byId("srType")){dijit.byId("srType").setValue(b);dijit.byId("srType").setDisplayedValue(b)}};srTypeUtil.runSrTypeConditions=function(b,a){if(a=="create"||(a=="update"&&!getInitMode())){conditionalSrTechRequiredIndicator(b,a)}if(isODTechSR()){showODConfirmation()}ODVSGCSFlds(a);HWSRUtil.setHWConditions();srLOVUtil.setSerialNumberProp();srLOVUtil.evaluateProductProp();if(dojo.byId("category")!=undefined){dijit.byId("category").setValue("");dijit.byId("categoryDescription").setValue("");setFieldVal("clarificationCount","");setFieldVal("sev1Type","")}setClarificationFld();loadSubCategory(a);loadRootCause(a)};function loadRootCause(h,l){var o=(l!=undefined&&l==true)?"Cloned":"";var g=dijit.byId("srType"+o);if(g==undefined){return}var b=dijit.byId("rootCause"+o);if(b==undefined){return}var p=g.getValue();var f=getEvalFieldVal("productClass","productClass");var m=SRUtils.getCurrentSR()["collaborationType"];if((h=="")||(h=="create")||(h=="update"&&!getInitMode())){b.setValue("");b.setDisplayedValue("")}var a={url:"../../../SRHeaderRequest",preventCache:true,content:{parentValue:p,lov:"SR_ROOTCAUSE",action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest"),productClass:f,collabType:m},handleAs:"json",load:function(q){b.store=new dojo.data.ItemFileReadStore({data:q});return q},error:function(q){console.debug("An error occurred for rootcause: "+q);return q},timeout:60000};return dojo.xhrGet(a)}function conditionalSrTechRequiredIndicator(f,b){var g="";if(dijit.byId("productClass")){g=dijit.byId("productClass").getValue()}if(b=="update"&&!dijit.byId("MaximizedSRHeaderDialog")){b="pheaderUpdate"}var a=true;processProductClass(g,b,a)}function moveSelectedOptions(a,b){moveOptions(dojo.byId(a),dojo.byId(b))}function getSelectedOptions(b){var a=dojo.byId(b);var f=a.length;for(i=0;i<=f-1;i++){a.options[i].selected=true}return dijit.byId(b).getSelected()}function selectAllOptions(a){if(a==undefined){return}var b=a.length;for(i=0;i<=b-1;i++){a.options[i].selected=true}}function addOption(a,b,h){if(a==undefined){return}var g=new Option(b,h);var f=a.length;a.options[f]=g}function deleteOption(a,f){if(a==undefined){return}var b=a.length;if(b>0){a.options[f]=null}}function deleteAllOptions(a){if(a==undefined){return}var b=a.length;for(i=b-1;i>=0;i--){deleteOption(a,i)}}function moveOptions(l,f){var h=l.length;var m=new Array();var a=new Array();var b=0;var g;for(g=h-1;g>=0;g--){if(l.options[g].selected){m[b]=l.options[g].text;a[b]=l.options[g].value;deleteOption(l,g);b++}}for(g=b-1;g>=0;g--){addOption(f,m[g],a[g])}}function setSHILOV(l){var m=new Object();var b=dijit.byId("csiId");var f=b.getValue();if(!l&&dijit.byId("shiText")){dijit.byId("shiText").setValue("")}if(f==""||f==undefined){if(l){alert("Please provide CSI on the form.")}return}m.csiId=f;var h="";if(dijit.byId("accountId")!=null){h=dijit.byId("accountId").getValue()}m.accountId=h;var u="";if(dijit.byId("product")!=null){u=dijit.byId("product").getValue()}m.product=u;var s=getFieldVal(REF_CSI_ID_FID);m.refCsiId=s;var a=getFieldVal(INDIRECT_ACCT_ID_FID);m.indirectAccountId=a;var o=getEvalFieldVal(SRTYPE_FID);var g=undefined;if(o.toLowerCase()=="technical"){g=isHardwareSR()?"Hardware":"Software"}else{g=HWSRUtil.isNonTechSRHardware()?"Hardware":"Software"}m.hwsw=g;if(m.hwsw=="Hardware"){m.snGCSIId=getFieldVal(SERIAL_NUM_GCSI_ID_FID);m.snGCSI=getFieldVal(SERIAL_NUM_GCSI_FID)}var q={url:"../../../SRHeaderRequest",content:{action:"loadSHILov",operation:"create",json:dojo.toJson(m)},preventCache:true,handleAs:"json",load:function(w,v){if(w.opStatus==0){var y=w.opResult;if(dojo.isArray(y)&&y.length>0){var x=y[0];if(!l&&x.firstRow!=null&&dijit.byId("shiText")){dijit.byId("shiText").setValue(x.firstRow)}if(!l&&x.firstRow==undefined){setFieldVal("shiText","")}if(!l&&w.mandatorySHI!=undefined&&dijit.byId("mandatorySHI")){dijit.byId("mandatorySHI").setValue(w.mandatorySHI)}}if(l){displaySHIdialog(w,w.operation)}return w}else{displayErrors(w)}},error:function(v,w){if(v.opStatus!=null){displayErrors(v)}else{xhrErrHandler(v,w,("Request to retrieve Special Customer Handling Instructions failed or timed out."+escape("<br/>")))}return v},timeout:120000};var p=dojo.xhrPost(q)}function displaySHIdialog(D,p){var w=dijit.byId("HIDialog");if(w!=null){w.destroyRecursive()}var a=D.opResult;if(dojo.isArray(a)&&a.length>0){var z=a[0];if(z.rowCount=="0"){alert("No Instructions found");return}var o=new dojo.data.ItemFileReadStore({data:z.data});if(z.data!=undefined&&z.data!=null){var v=document.createElement("div");w=new dijit.Dialog({id:"HIDialog",style:"width:90%;height:400px;font-family:verdana;font-size:8pt;font-weight:bold;background-color:#FFFFEE; border:2px outset #AAAAAA;",title:"Special Handling Instructions"},v);dojo.body().appendChild(v);var A=document.createElement("table");var f=document.createElement("tbody");A.appendChild(f);A.setAttribute("width","100%");w.setContent(A);var g=document.createElement("tr");f.appendChild(g);var m=document.createElement("td");m.setAttribute("align","center");g.appendChild(m);var C=document.createElement("tr");f.appendChild(C);var h=document.createElement("td");C.appendChild(h);var b=document.createElement("div");b.setAttribute("width","10%");var y=new dijit.form.Button({label:"Close",onClick:function(){dijit.byId("HIDialog").hide()}},b);m.appendChild(y.domNode);var x=new dojox.grid.data.DojoData(null,o,{jsId:"gmodel",query:{seq:"*"},clientSort:true});var s=z.normalCells;var q={cells:s.cells};var B=[q];var l=document.createElement("div");l.setAttribute("id","shigridDiv");if(dijit.byId("shigrid")!=null){dijit.byId("shigrid").destroyRecursive()}var u=new dojox.Grid({id:"shigrid",elasticview:"2",model:x,structure:B,rowSelector:true});l.appendChild(u.domNode);h.appendChild(l);u.render();u.update();dojo.connect(w,"hide",function(){if(x!=undefined&&x!=null){x.clearData(false)}if(dijit.byId("shigrid")!=null){dijit.byId("shigrid").destroyRecursive()}w.destroyRecursive()});w.show()}}return}function setActivityPlanLov(){setLovDialog("activityPlan",[],"","","Activity Plan","onSelectActivityPlan()")}function onSelectActivityPlan(){var f=dijit.byId("grid");if(f!=null&&f.selection.getSelected()!=null){var h=dijit.byId("grid").selection.getSelected()[0];var g=dijit.byId("grid").model.data[h];var b={};b.id=g.planId;b.desc=g.description;b.type=g.type;b.name=g.name;var a=dijit.byId("lovDialog");if(a!=null){a.destroyRecursive();closeDialog("lovDialog")}displayAPTemplate(b)}}function createSaveCancelButtonCell(h){var g=document.createElement("td");var l=document.createElement("div");l.setAttribute("width","10%");var b=new dijit.form.Button({label:"Save",type:"submit"},l);g.appendChild(b.domNode);var f=document.createElement("div");f.setAttribute("width","10%");var a=new dijit.form.Button({label:"Cancel",onClick:function(){h.hide()}},f);g.setAttribute("colSpan","2");g.appendChild(a.domNode);return g}function onchange_odFlag(a){ODVSGCSFlds(a)}var OLM_OTS_READ_PRIV="OLM_OTS_READ_PRIV";var OLM_OTS_UPDATE_PRIV="OLM_OTS_UPDATE_PRIV";var CMDB_ASSOCIATION_PRIV="CMDB_ASSOCIATION_PRIV";function ODVSGCSFlds(f){var b=isODTechSR();if(b){if(dijit.byId("project")){dijit.byId("project").setValue("");dijit.byId("projectName").setValue("");dijit.byId("projectName").setDisabled(true);if(dojo.byId("projectPickLink")){dojo.style("projectPickLink","display","none")}}if(dijit.byId("configuration")){dijit.byId("configuration").setValue("");dijit.byId("configurationName").setValue("");dijit.byId("configurationName").setDisabled(true);if(dojo.byId("configPickLink")){dojo.style("configPickLink","display","none")}}if(dijit.byId("hostId")){dijit.byId("hostId").setValue("");dijit.byId("hostId").setDisabled(true);if(dojo.byId("hostPickLink")){dojo.style("hostPickLink","display","none")}}if(dijit.byId("milestone")){dijit.byId("milestone").setValue("");dijit.byId("milestoneId").setValue("");dijit.byId("milestone").setDisabled(true);if(dojo.byId("milestonePickLink")){dojo.style("milestonePickLink","display","none")}}if(dojo.byId("odConf")){dojo.style("odConf","display","");dojo.style("odConf","width","100%");loadCMDBConfigList(f)}else{if(dijit.byId("cmdbConfig")){dijit.byId("cmdbConfig").setDisabled(false);loadCMDBConfigList(f)}}if(dijit.byId("refElemRFCs")!=undefined){dojo.style("refElemRFCs","visibility","visible");dojo.style("refElemRFCs","height","auto")}if(dojo.byId("gcsConf")){dojo.style("gcsConf","display","none")}if(f=="update"&&dojo.byId("otslink")){dojo.byId("otslink").style.visibility="visible"}if(dojo.byId("olmlink")){dojo.byId("olmlink").style.visibility="visible"}}else{if(dijit.byId("projectName")){dijit.byId("projectName").setDisabled(false);if(dojo.byId("projectPickLink")){dojo.style("projectPickLink","display","")}}if(dijit.byId("configurationName")){dijit.byId("configurationName").setDisabled(false);if(dojo.byId("configPickLink")){dojo.style("configPickLink","display","")}}if(dijit.byId("hostId")){dijit.byId("hostId").setDisabled(false);if(dojo.byId("hostPickLink")){dojo.style("hostPickLink","display","")}}if(dijit.byId("milestone")){dijit.byId("milestone").setDisabled(false);if(dojo.byId("milestonePickLink")){dojo.style("milestonePickLink","display","")}}if(dojo.byId("odConf")){dojo.style("odConf","display","none")}else{if(dijit.byId("cmdbConfig")){var h=new Object();h.id="";h.name="";var a=new Array();a.push(h);var g=new Object();g.identifier="id";g.items=a;dijit.byId("cmdbConfig").store=new dojo.data.ItemFileReadStore({data:g});dijit.byId("cmdbConfig").setDisplayedValue("");dijit.byId("cmdbConfig").setValue("");dijit.byId("cmdbConfig").setDisabled(true)}}if(dojo.byId("gcsConf")){dojo.style("gcsConf","display","");dojo.style("gcsConf","width","100%")}if(f=="update"&&dojo.byId("otslink")){dojo.byId("otslink").style.visibility="hidden"}if(dojo.byId("olmlink")){dojo.byId("olmlink").style.visibility="hidden"}if(dijit.byId("refElemRFCs")!=undefined){dojo.style("refElemRFCs","visibility","hidden");dojo.style("refElemRFCs","height","0")}}}function loadCMDBConfigList(g,l){if(!dijit.byId("csi")||!dijit.byId("cmdbConfig")){return}var p=false;if(g=="update"){p=getInitMode()}var o=dijit.byId("csi").getValue();var b=new Object();b.id="";b.name="";var f=new Array();f.push(b);var h=new Object();h.identifier="id";h.items=f;dijit.byId("cmdbConfig").store=new dojo.data.ItemFileReadStore({data:h});dijit.byId("cmdbConfig").setDisplayedValue("");dijit.byId("cmdbConfig").setValue("");if(o==""){return}var m=dojo.byId("cmdbConfigLoading");if(m!=undefined){dojo.style(m,{display:"inline"})}var a={url:"../../../SRHeaderRequest",preventCache:true,content:{action:"getCMDBConfigList",csi:o},handleAs:"json",load:function(s){if(m!=undefined){dojo.style(m,{display:"none"})}if(s.opStatus==1){displayErrors(s)}else{if(s.items!=undefined&&s.items.length>0){transferPrivateDataFlgArrayToMap(s);dijit.byId("cmdbConfig").store=new dojo.data.ItemFileReadStore({data:{identifier:s.identifier,items:s.items}});if(g=="update"&&l==undefined){fillCMDBConfig();if(p){SRUtils.unmarkChanges("srHeader")}}if(l!=undefined&&l!=""){dijit.byId("cmdbConfig").setValue(l)}}var q=s.instanceHostsArray;dojo.forEach(q,function(v,u){cmdbInstanceHostsMap.put(v.instanceId,v.hosts)});showHideCmdbCmsLink()}initCMDBConfigLoad=false},error:function(q){initCMDBConfigLoad=false;dojo.style(m,{display:"none"});console.debug("An error occurred loading cmdb config: ",q)},timeout:120000};if(isODTechSR()){initCMDBConfigLoad=true;dojo.xhrGet(a)}}function transferPrivateDataFlgArrayToMap(b){if(b.instancePrivacyDataFlgArray){var a=b.instancePrivacyDataFlgArray;dojo.forEach(a,function(g,f){CMDS_INSTANCE_PRIVACY_DATA_FLG_MAP.put(g.id,g.privacyDataFlg)})}}function isODTechSR(){var a=false;var b=false;if(dijit.byId("odFlag")!=undefined){a=dijit.byId("odFlag").checked}if(dijit.byId(SRTYPE_FID)!=undefined){var f=dijit.byId(SRTYPE_FID).getValue();if(f===TECHNICAL){b=true}}if(a&&b){return true}else{return false}}function isODSR(){var a=false;if(dijit.byId("odFlag")!=undefined){a=dijit.byId("odFlag").checked}if(a){return true}else{return false}}function isGCSSR(){var a=false;if(dijit.byId("odFlag")!=undefined){a=dijit.byId("odFlag").checked}if(!a){return true}else{return false}}function setCMDBLov(){dijit.byId("pleasewait").show();var b=getLinkHrefMap().get("RFC_Create");var a="";if(b!=null&&(b.href!=null)){a=b.href}if(a==null||a==""){return}dojo.xhrGet({url:a,load:function(l){var f=dijit.byId("cmdbD");if(f!=null){f.destroyRecursive()}f=new dijit.Dialog({id:"cmdbD",refocus:false,title:"CMDB",style:" border:1px solid rgb(153,187,232); width: 95%;height:500px;"});var h="<input type='button' value='Close' onClick='dijit.byId(\"cmdbD\").hide();' id='closeCmdbDBtn1' /><br/>";var g="<input type='button' value='Close' onClick='dijit.byId(\"cmdbD\").hide();' id='closeCmdbDBtn2' />";dojo.connect(f,"hide",function(){hideCMDB()});f.setContent(h+l+g);dijit.byId("pleasewait").hide();f.show()},error:function(f){dijit.byId("pleasewait").hide()}})}function hideCMDB(){dojo.xhrGet({url:"../../../SRHeaderRequest",handleAs:"json",content:{action:"getCmdbConfig"},load:function(a){if(a.opStatus==0){dijit.byId("cirl").setValue(a.cirl);dijit.byId("nonCCRCIID").setValue(a.nonCCRCIID);dijit.byId("ciType").setValue(a.ciType)}},error:function(a){dijit.byId("pleasewait").hide()}})}function onchange_configId(){var a=dijit.byId("configuration").value;if(a!=""){dojo.style("configViewerLink","display","");setConditionalReqFld("hostId",true)}else{if(a==""){setConditionalReqFld("hostId",false);dojo.style("configViewerLink","display","none")}}}function onchange_configLevel(){if(!platinumSR.isCreateSrOp()&&getInitMode()){return}platinumSR.onchangeSRFlds();setTimeout(function(){remoteAccessCheck()},0)}function openProjConfigHostViewer(l,b,o){var f=self.location.href;var a=(f!=undefined&&(f.indexOf("SRCreate.jspx")!=-1))?"":getSrNumber();var q=isPartnerSR()?dijit.byId(REF_CSI_FID).getValue():dijit.byId("csi").getValue();var h=isPartnerSR()?null:dijit.byId("accountIntegId").getValue();var g={};if(!isEmptyVal(a)){g.sr_number=a}if(l=="config"){var m=true;var s=dijit.byId("configurationName").getValue();var p=dijit.byId("configuration").getValue();viewCSMConfig(q,h,p,s,a,m)}else{if(l=="project"){g.name=dijit.byId("projectName").getValue();mos.viewProjectInPopup(dijit.byId("project").getValue(),q,h,g)}else{if(l=="host"){var m=true;var b=(dijit.byId("hostName")!=undefined&&dijit.byId("hostName").getValue()!=undefined)?dijit.byId("hostName").getValue():"";var p=dijit.byId("hostId").getValue();viewCSMHost(q,h,p,b,a,m)}else{if(l=="cmdbHost"){var m=true;viewCSMHost(q,h,o,b,a,m)}}}}}function openTargetViewer(m){var f="";var b=null;var a=null;var h=getSrNumber();var g={};if(!isEmptyVal(h)){g.sr_number=h}if(m!=null&&m!=undefined){m=unescape(m.trim());var l=m.split(/ORG ID:/i,2);if(l!=null&&l.length==2){f=l[0].trim();l=l[1].trim().split(/CSI:/i,2);if(l!=null&&l.length==2){a=l[0].trim();b=l[1].trim();if(b=="NA"){b=null}if(a=="NA"){a=null}}}}if(f!=""){mos.viewTargetInPopup(f,b,a,g)}else{alert("Unable to open target details. No Target Id found in the link.")}}function onchange_projectId(){var a=dijit.byId("project").getValue();if(a!=""){dojo.style("projectViewerLink","display","")}else{dojo.style("projectViewerLink","display","none")}}function onchange_host(){var a=dijit.byId("hostId").getValue();if(a!=""){dojo.style("hostViewerLink","display","")}else{if(dijit.byId("configurationName")&&dijit.byId("configurationName").getValue()){setConditionalReqFld("hostId",true)}dojo.style("hostViewerLink","display","none");dijit.byId("hostName").setValue("")}}function onchange_odConfigId(){var a=dijit.byId("nonCCRConfId").value;if(a!=""){dojo.style("cmdbViewerLink","visibility","visible")}else{dojo.style("cmdbViewerLink","visibility","hidden")}}function setBugdb_productLov(){var h="PREDEFECT_BUGDB_PRODUCT";var b=dijit.byId("productLine");if(b==undefined||(b!=null&&(b.getValue()==undefined||(dojo.string.trim(b.getValue())=="")))){alert("Please provide a Product Line on the form.");return}var l=new Array();var m=new Object();m.lookupId=PRODUCT_TYPE;m.lookupValue="Support";l.push(m);var g=new Object();g.lookupId=PRODUCT_DEFECT_TRACKING_ON_FLAG;g.lookupValue="Y";l.push(g);var f=new Object();f.lookupId=PRODUCT_LINE;f.lookupValue=b.getValue();l.push(f);var a="bugdb_product,bugdb_productDesc,bugdb_component,bugdb_componentDesc,bugdb_subcomponent,bugdb_subcomponentDesc";setLovDialog(h,l,"",a,"BugDB Product",null)}function setBugdb_ComponentLov(){var g="PREDEFECT_BUGDB_COMPONENT";var f=dijit.byId("bugdb_product");if(f==undefined||(f!=null&&(f.getValue()==undefined||(f.getValue()=="")))){alert("Please provide a Product on the form.");return}var h=new Array();var l=new Object();l.lookupId="productId";l.lookupValue=f.getValue();h.push(l);var b=new Object();b.lookupId="applicationType";b.lookupValue="Defect";h.push(b);var a="bugdb_component,bugdb_componentDesc,bugdb_subcomponent,bugdb_subcomponentDesc";setLovDialog(g,h,"",a,"BugDB Component",null)}function setBugdb_ComponentLov2(){var f="PREDEFECT_BUGDB_COMPONENT2";var b=dijit.byId("bugdb_product");if(b==undefined||(b!=null&&(b.getValue()==undefined||(b.getValue()=="")))){alert("Please provide a Product on the form.");return}var g=new Array();var h=new Object();h.lookupId="productId";h.lookupValue=b.getValue();g.push(h);var a="bugdb_component,bugdb_componentDesc,bugdb_subcomponent,bugdb_subcomponentDesc";setLovDialog(f,g,"",a,"BugDB Component",null)}function setBugdb_SubComponentLov(){var h="PREDEFECT_BUGDB_SUB_COMPONENT";var b=dijit.byId("bugdb_component");if(b==undefined||(b!=null&&(b.getValue()==undefined||(b.getValue()=="")))){alert("Please provide Component on the form.");return}var g=dijit.byId("bugdb_product");if(g==undefined||(g!=null&&(g.getValue()==undefined||(g.getValue()=="")))){alert("Please provide a Product on the form.");return}var l=new Array();var m=new Object();m.lookupId="componentId";m.lookupValue=b.getValue();l.push(m);m=new Object();m.lookupId="productId";m.lookupValue=g.getValue();l.push(m);var f=new Object();f.lookupId="applicationType";f.lookupValue="Defect";l.push(f);var a="bugdb_subcomponent,bugdb_subcomponentDesc";setLovDialog(h,l,"",a,"BugDB Sub Component",null)}function setBugdb_SubComponentLov2(){var g="PREDEFECT_BUGDB_SUB_COMPONENT2";var b=dijit.byId("bugdb_component");if(b==undefined||(b!=null&&(b.getValue()==undefined||(b.getValue()=="")))){alert("Please provide Component on the form.");return}var f=dijit.byId("bugdb_product");if(f==undefined||(f!=null&&(f.getValue()==undefined||(f.getValue()=="")))){alert("Please provide a Product on the form.");return}var h=new Array();var l=new Object();l.lookupId="componentId";l.lookupValue=b.getValue();h.push(l);l=new Object();l.lookupId="productId";l.lookupValue=f.getValue();h.push(l);var a="bugdb_subcomponent,bugdb_subcomponentDesc";setLovDialog(g,h,"",a,"BugDB Sub Component",null)}function setProductLineLov(){var b="PREDEFECT_PRODUCT_LINE";var f=new Array();var a="productLine,productLineDescription,defectSource,bugdb_product,bugdb_productDesc,bugdb_productGroupId";setLovDialog(b,f,"",a,"Predefect Product Line",null)}function setBugdb_productLov2(){var f="PREDEFECT_BUGDB_PRODUCT2";var b=dijit.byId("productLine");if(b==undefined||(b!=null&&(b.getValue()==undefined||(dojo.string.trim(b.getValue())=="")))){alert("Please provide a Product Line on the form.");return}var g=new Array();var h=new Object();h.lookupId=PRODUCT_LINE;h.lookupValue=b.getValue();g.push(h);var a="bugdb_product,bugdb_productDesc,bugdb_productGroupId,bugdb_component,bugdb_componentDesc,bugdb_subcomponent,bugdb_subcomponentDesc,bugdb_reportedRelease,bugdb_reportedReleaseId,bugdb_reportedReleaseDesc";setLovDialog(f,g,"",a,"BugDB Product",null)}function setAccountClassificationLov(){var b=dijit.byId(ACCOUNT_ID);var f="accountClassification";var g=new Array();if(b==undefined||b==null||(b.getValue()==undefined||(b.getValue()==""))){alert("Please provide Account on the form.");return}if(b!=undefined&&(b!=null&&b.getValue()!="")){var h=new Object();h.lookupId="accountId";h.lookupValue=b.value;g.push(h)}var a="";setLovDialog(f,g,"",a,"Account Classification",null)}function showSimpleError(h){if(h!=""){var f=new dijit.Dialog({style:"width: 40%; background-color:#FFFFEE; border:2px; z-index:200;",title:"Error"});var b=new dijit.layout.ContentPane({style:"width: 98%; overflow:auto; height: 150px; border: 0px; margin-bottom: 5px; padding: 1px; border: 1px solid #D8D8D8;"});var a=document.createElement("img");a.setAttribute("src","../images/erroricon.gif");var g=document.createElement("span");g.innerHTML=h+"<br>";var l=new dijit.form.Button({label:"Close",onClick:function(m){f.hide();f.destroyRecursive()}});b.containerNode.appendChild(a);b.containerNode.appendChild(g);f.containerNode.appendChild(b.domNode);f.containerNode.appendChild(l.domNode);f.show()}}var oldSevValue="";function onfocus_severity(a){if(a!=undefined&&a!=""&&dijit.byId(a)!=undefined){oldSevValue=dijit.byId(a).getValue()}}var oldEvaluatedSeverityValue="";function onfocus_evaluatedSeverity(a){if(a!=undefined&&a!=""&&dijit.byId(a)!=undefined){oldEvaluatedSeverityValue=dijit.byId(a).getValue()}}var oldServiceOutageValue="";function onfocus_SROutageType(a){if(a!=undefined&&a!=""&&dijit.byId(a)!=undefined){oldServiceOutageValue=dijit.byId(a).getValue()}}var oldOutageValue="";function onfocus_outageType(a){if(a!=undefined&&a!=""&&dijit.byId(a)!=undefined){oldOutageValue=dijit.byId(a).getValue()}}function onchange_severity(b){if(b=="update"&&getInitMode()){return}if(b=="create"&&!getSrCreatePageLoaded()){return}var a=enforce_od_outage_sev_check("severity","outageType");if(!a){if(oldSevValue!=undefined){dijit.byId("severity").setValue(oldSevValue)}return}enforce_fullsupp_sev_check("severity",b);oldSevValue=dijit.byId("severity").getValue();platinumSR.onchangeSRFlds({outageType:getFieldVal("outageType"),source:"severity"});if(globalEngineerHelpFlag===true&&dijit.byId("severity").getValue()===SEV_1&&dijit.byId("status").getValue()==="Open"){sr_engineerHelpFlagAndSev1=true}else{sr_engineerHelpFlagAndSev1=false}var f=disableMgrHelpButton(exists_openMgrHelp);if(dijit.byId("MgrHelpIconArea")!=undefined){dijit.byId("MgrHelpIconArea").setAttribute("disabled",false)}if(dijit.byId("MgrHelpIconArea")!=undefined&&f!=undefined&&f==true){dijit.byId("MgrHelpIconArea").setAttribute("disabled",true);oper="disabled"}setTimeout(function(){onsiteSLACheck(b)},10)}function onchange_evaluatedSeverity(b){if(b=="update"&&getInitMode()){return}if(b=="create"&&!getSrCreatePageLoaded()){return}var a=dijit.byId("severity");var f=dijit.byId("evaluatedSeverity");if(f&&a&&f.value==a.value){alert("The Evaluated Severity  and the Severity fields are set with the same value.")}}function onchange_OutageImpact(){processServiceOutageFields()}var SVC_NO_OUTAGE="No Outage";var SVC_IMPACT_OUTAGE="Service Impact Outage";var SVC_FULL_OUTAGE="Full Outage-Network Element";var SVC_PARTIAL_OUTAGE="Partial Outage-Network Element";function processServiceOutageFields(){var a=getEvalFieldVal("SROutageType");dojo.style(dojo.byId("SROutagePercentageRow"),{display:""});dojo.style(dojo.byId("SROutageStartDateRow"),{display:""});dojo.style(dojo.byId("SROutageEndDateRow"),{display:""});dijit.byId("SROutageStartDate").setDisabled(true);dijit.byId("SROutageEndDate").setDisabled(true);dijit.byId("SROutagePercentage").setDisabled(true);if(a==SVC_NO_OUTAGE){dojo.byId("SROutageEndDate").value="";dojo.byId("SROutageStartDate").value="";dojo.byId("SROutagePercentage").value="";dijit.byId("SROutageStartDate").setDisabled(true);dijit.byId("SROutageEndDate").setDisabled(true);dijit.byId("SROutagePercentage").setDisabled(true)}else{if(a==SVC_IMPACT_OUTAGE){dojo.byId("SROutageStartDate").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDate").value=headerDataAsJson.SROutageEndDate;dojo.byId("SROutagePercentage").value="";dijit.byId("SROutageStartDate").setDisabled(false);dijit.byId("SROutageEndDate").setDisabled(false);dijit.byId("SROutagePercentage").setDisabled(true)}else{if(a==SVC_FULL_OUTAGE){dojo.byId("SROutageStartDate").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDate").value=headerDataAsJson.SROutageEndDate;dojo.byId("SROutagePercentage").value=100;dijit.byId("SROutageStartDate").setDisabled(false);dijit.byId("SROutageEndDate").setDisabled(false);dijit.byId("SROutagePercentage").setDisabled(true)}else{if(a==SVC_PARTIAL_OUTAGE){dojo.byId("SROutageStartDate").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDate").value=headerDataAsJson.SROutageEndDate;var b=(headerDataAsJson.SROutagePercentage)?((headerDataAsJson.SROutagePercentage==100)?50:headerDataAsJson.SROutagePercentage):50;dojo.byId("SROutagePercentage").value=b;dijit.byId("SROutageStartDate").setDisabled(false);dijit.byId("SROutageEndDate").setDisabled(false);dijit.byId("SROutagePercentage").setDisabled(false)}else{if(a==""){dojo.byId("SROutageEndDate").value="";dojo.byId("SROutageStartDate").value="";dojo.byId("SROutagePercentage").value="";dijit.byId("SROutageStartDate").setDisabled(true);dijit.byId("SROutageEndDate").setDisabled(true);dijit.byId("SROutagePercentage").setDisabled(true)}}}}}}function checkOutageDates(b){var h=dijit.byId("SROutageStartDate");var a=dijit.byId("SROutageEndDate");if(a&&!isEmptyVal(a.focusNode.value)&&(h&&isEmptyVal(h.focusNode.value))){alert("The Outage Start Date/Time should be set prior to setting the Outage End Date/Time.");dijit.byId("SROutageStartDate").focus()}var g;var f;if(a&&h){if(h.textbox.value!==""){g=getParsedDateVal(h.textbox.value).getTime()}if(a.textbox.value!==""){f=getParsedDateVal(a.textbox.value).getTime()}if(f&&g&&(f<=g)){alert("The Outage End Date/Time must be set to a value that is 'after' the Outage Start Date/Time.");dojo.byId("SROutageStartDate").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDate").value=headerDataAsJson.SROutageEndDate;dijit.byId("SROutageEndDate").focus()}}}function checkSROutagePercentage(){var b=dijit.byId("SROutagePercentage");var a=dijit.byId("SROutageType");var f;if(b&&b.textbox.value!==""){f=b.textbox.value;if(isNaN(f)){alert(f+" is not a number.")}else{if((parseInt(f)>=100||parseInt(f)<=0)&&(a.value===SVC_PARTIAL_OUTAGE)){alert("SROutage Percentage must be between 1 and 99");dojo.byId("SROutagePercentage").value=50}else{if(a==SVC_FULL_OUTAGE){dojo.byId("SROutagePercentage").value=100}}}}else{if(!f){alert("SROutage Percentage is invalid.")}}}var OD_SEV_RULE_MSG="If OD Outage Type is not null, Severity has to be 1-Critical or 2-Significant. If the Outage Type is null, then Severity could be 2-Significant, 3-Standard or 4-Minimal but not 1-Critical.";function enforce_od_outage_sev_check(a,h){var g=dijit.byId(a).getValue();var f=isODTechSR();if(initOdMode!=undefined&&initOdMode){return true}var b="";if(dijit.byId(h)!=undefined){b=dijit.byId(h).getValue()}if(f&&b!=""&&(g!="1-Critical"&&g!="2-Significant")){alert(OD_SEV_RULE_MSG);return false}if(f&&b==""&&(g=="1-Critical")){alert(OD_SEV_RULE_MSG);return false}return true}function enforce_od_outage_sev1_check_for_platinum(a,g){if(initOdMode!=undefined&&initOdMode){return}var f=dijit.byId(a).getValue();var b="";if(dijit.byId(g)!=undefined){b=dijit.byId(g).getValue()}if(oldOutageValue!=undefined&&dojo.string.trim(oldOutageValue)!=""){if(platinumSR.isPlatinumSr()&&b==""&&f==("1-Critical")){alert(PLATINUM_OUTAGE_TYPE_SEV1_RULE_MSG);dijit.byId(g).setValue(oldOutageValue)}}return}function enforce_fullsupp_sev_check(a,h){var f=dijit.byId(a).getValue();var b=dijit.byId("fld24x7");var g=b.getValue();if(b){if(f=="1-Critical"){b.setAttribute("checked",true);setFieldVal("unset24x7ReasonCode","")}else{b.setAttribute("checked",false);if(g!==false&&h!=undefined&&h=="update"){openUnset24x7ReasonCodeDialog()}}}}function getLOVTimestamp(a){if(typeof lovHash=="undefined"||lovHash==null){processLOVChange(true)}return enabledLOVServlets.get(a)}function processLOVChange(b){if(b||typeof lovHash=="undefined"||lovHash==null||LOVCacheInit==false){getTimestamps();LOVCacheInit=true;dojo.forEach(enabledLOVServlets.keySet(),function(f,g){var h=0;dojo.forEach(LOVServletMap.get(f),function(m,l){h+=lovTS[m]});enabledLOVServlets.put(f,h)})}var a=searchInputFields();if(typeof a!="undefined"&&a.length>0){dojo.forEach(a,function(h,f){var g=new dojo._Url(h.url);var m=dojo.queryToObject(g.query);var l=g.path.substring(g.path.lastIndexOf("/")+1);if(enabledLOVServlets.findIt(l)!=-1){if(disabledIds.findIt(h.id)==-1){refreshLOVData(h.id,g,enabledLOVServlets.get(l))}}})}}function searchInputFields(){var b=dojo.query("input");var a=Array();b.forEach(function(h,g){var f=dijit.byId(h.id);if(f!=undefined&&f.store!=undefined&&f.store._jsonFileUrl!=undefined){a.push({id:h.id,url:f.store._jsonFileUrl,store:f.store})}});return a}function getTimestamps(){var a={url:"/oip/faces/AlertNotification",content:{ACTION:"ACTION_GET_TIMESTAMPS"},preventCache:true,handleAs:"json",load:function(b){lovHash=b.lovHash;lovTS=b.lovTS},error:function(b){console.error("An error occurred: "+b)},timeout:2000,sync:true};dojo.xhrGet(a)}function refreshLOVData(o,g,l){var h=dijit.byId(o);if(h!=undefined){var f=dojo.queryToObject(g.query);var m=f.rev;if(f.rev==null||(f.rev!=null&&parseInt(f.rev)!=l)){f.rev=l;var a=g.path+"?"+dojo.objectToQuery(f);var b=new dojo.data.ItemFileReadStore({url:a});if(b!=undefined){h.store=b}}}}var LIKE_REQUIRES_3_NONWILDCARD_CHARS=1;var LIKE_MAY_NOT_CONTAIN_WILDCARD=2;function restrictQuery(h,a,g){var f=0;if(a==null){return f}switch(g){case LIKE_REQUIRES_3_NONWILDCARD_CHARS:var l="";var b=a.replace(/\x2a/g,"");if((a.length<=3&&a.indexOf("*")!=-1)||(a.length>3&&b.length<3)){l="Please provide at least 3 non-wildcard characters in search criteria for field "+h;alert(l);f=-1}break;case LIKE_MAY_NOT_CONTAIN_WILDCARD:var l="";if(a.indexOf("*")!=-1){l="No wildcard search is allowed for field "+h;alert(l);f=-1}break}return f}function dhide(g,a,f){if(a!=undefined){a.clearData(false)}if(dijit.byId("grid")!=null){dijit.byId("grid").destroyRecursive()}if(f.length>0){for(var b=0;b<f.length;b++){dojo.disconnect(f[b])}}g.destroyRecursive();isConfigurationCancelled()}function isConfigurationCancelled(){if(dijit.byId("configurationName")&&dijit.byId("configurationName").getValue()==""){setConditionalReqFld("hostId",false)}else{if(dijit.byId("configurationName")&&dijit.byId("configurationName").getValue()!=""){setConditionalReqFld("hostId",true)}}}function getFormattedData(a,b){return"<tr><td valign='top' align='right' style='color: #000000; font-size: 10pt;'>"+a+": </td><td valign='top' style='color: #0000FF; font-size: 10pt'>"+b+"</td></tr>"}function showDnProjectReferenceObject(a){dijit.byId("pleasewait").show();dojo.xhrGet({url:"../../../DNProjectRequest?parentId="+a,handleAs:"json",load:function(f,b){displayDnProjectRefObjInfo(f.items);dijit.byId("pleasewait").hide()},error:function(b){dijit.byId("pleasewait").hide();alert(b)}})}function displayDnProjectRefObjInfo(b){dijit.byId("dnProjectDialog").show();var a='<div dojoType="dijit.TitlePane" title="projectHeaderTitle" style="background-color: #CCC; "> Project - '+b.Name+" </div>";if(b.hasError=="Y"){a+=getFormattedData("Message",b.errorMsg)}else{a+='<table border=0 cellpadding="1" cellspacing="1"><tr>';a+='<td valign="top"><table>';a+=getFormattedData("Name",b.Name);a+=getFormattedData("Description",b.Description);a+=getFormattedData("Account",b.Account);a+=getFormattedData("Status",b.Status);a+=getFormattedData("Phase",b.Phase);a+=getFormattedData("CSI",b.CSI);a+=getFormattedData("Implementation Date",b.ImplementationDate);a+=getFormattedData("Associated People",b.AssociatedPeople);a+="</table></td>";a+="</tr></table>"}dojo.byId("dnProjectContent").innerHTML=a}function showDnConfigReferenceObject(a){dijit.byId("pleasewait").show();dojo.xhrGet({url:"../../../DNConfigurationRequest?parentId="+a,handleAs:"json",load:function(f,b){displayDnConfigRefObjInfo(f.items);dijit.byId("pleasewait").hide()},error:function(b){dijit.byId("pleasewait").hide();alert(b)}})}function displayDnConfigRefObjInfo(b){dijit.byId("dnConfigDialog").show();var a='<div dojoType="dijit.TitlePane" title="configHeaderTitle" style="background-color: #CCC; "> Configuration - '+b.ConfigurationName+" </div>";if(b.hasError=="Y"){a+=getFormattedData("Message",b.errorMsg)}else{a+='<table border=0 cellpadding="1" cellspacing="1"><tr>';a+='<td valign="top"><table>';a+=getFormattedData("Configuration Name",b.ConfigurationName);a+=getFormattedData("Configuration Id",b.ConfigurationId);a+=getFormattedData("Alias",b.Alias);a+=getFormattedData("Description",b.Description);a+=getFormattedData("Active Flag",b.ActiveFlag);a+=getFormattedData("CCR CSI",b.CCRCSI);a+=getFormattedData("Configuration Type",b.ConfigurationType);a+=getFormattedData("Organization Id",b.OrganizationId);a+=getFormattedData("Account",b.Account);a+=getFormattedData("Last Update Date",b.LastUpdateDate);a+=getFormattedData("Target Type",b.Targettype);a+=getFormattedData("OCM Configuration Flag",b.OCMConfiguration);a+="</table></td>";a+="</tr></table>"}dojo.byId("dnConfigContent").innerHTML=a}function validateCombo(f){function a(){f.state="Error";if(dojo.hasClass(f.comboNode,"dijitError")){dojo.removeClass(f.comboNode,"dijitError")}if(dojo.hasClass(f.comboNode,"dijitComboBoxError")){dojo.removeClass(f.comboNode,"dijitComboBoxError")}dojo.addClass(f.comboNode,"dijitError");dojo.addClass(f.comboNode,"dijitComboBoxError");dijit.hideTooltip(f.domNode);dijit.showTooltip(f.invalidMessage,f.domNode,f.tooltipPosition);setTimeout(function(){dijit.hideTooltip(f.domNode)},3000)}function g(){if(dojo.hasClass(f.comboNode,"dijitError")){dojo.removeClass(f.comboNode,"dijitError")}if(dojo.hasClass(f.comboNode,"dijitComboBoxError")){dojo.removeClass(f.comboNode,"dijitComboBoxError")}dijit.hideTooltip(f.domNode)}var h=f.id;if(f.required){if(f.getValue()==null||f.getValue()==""){a()}else{g()}}if(f.store&&f.getValue()!=null&&f.getValue()!=""){var b=dojo.clone(f.query);b.name=f.getValue();f.store.fetch({query:b,queryOptions:{deep:true},onComplete:function(l,m){if(!l.length&&f.invalidMessage!=undefined&&f.invalidMessage!=""){a()}else{g()}},onError:function(l){console.error("dijit.form.combobox: "+l)}})}}function clearTooltip(a){dijit.hideTooltip(a.domNode)}function validateLov(h,f){if(f=="update"&&getInitMode()){return}var g=h+"_lovHidden";var b=dijit.byId(g);if(dijit.byId(g)){if(dijit.byId(g).getValue()==undefined||dijit.byId(g).getValue()==""){if(h=="contactLastName"){setContactLov(f,true)}else{if(h=="alternateContactLastName"){setAlternateContactLov(f,true)}else{if(h=="projectName"){setProjectLov(true)}else{if(h=="milestone"){setProjectMilestoneLov(true)}else{if(h=="languageDescription"){setLanguageLov(f,true)}else{if(h=="configurationName"){setProjectConfigLov(true)}else{if(h=="hostId"){setConfigHostLov(f,true)}else{if(h=="categoryDescription"){setCategoryLov(true)}else{if(h=="clarificationName"){setClarificationLov(true)}else{if(h=="productDescription"){if(isHardwareSR()){setLicensedProductLov(f,true)}else{setProductLov(f,true)}}else{if(h=="productVersion"){setProductVersionLov(true)}else{if(h=="componentDescription"){setComponentLov(true)}else{if(h=="subcomponentDescription"){setSubcomponentLov(true)}else{if(h=="platformDescription"){setPlatformLov(true)}else{if(h=="platformVersionDescription"){setPlatformVersionLov(true)}else{if(h=="toolsVersionVersion"){setToolsVersionLov(true)}else{if(h=="databaseDescription"){setDatabaseLov(true)}else{if(h=="databaseVersion"){setDatabaseVersionLov(true)}else{if(h=="databasePlatformDesc"){setDatabasePlatformLov(true)}else{if(h=="databasePlatformVersionDesc"){setDatabasePlatformVersionLov(true)}else{if(h=="newContactTZ"){setTZLov(true)}else{if(h=="empEmail"){setSPOwnerLov(true)}else{if(h=="ActivityFld_primaryOwner"){if(f=="update"&&getTemplateInitMode()){return}setSPActivityOwnerLov("ActivityFld_primaryOwner",true)}else{if(h==SERIAL_NUM_FID){serialNumberUtil.setSerialNumberLov(f,true)}else{if(h==REF_CSI_FID){PartnerSRUtil.setRefCSILov(f,true)}else{if(h==INDIRECT_LAST_FID){setIndirectContLov(true)}else{if(h=="envName"){setEnvNameLov(true)}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}function clearLovHiddenFld(b){console.log("clearLovHiddenFld");var a=b+"_lovHidden";if(dijit.byId(a)){dijit.byId(a).setValue("")}}function clearDependentFlds(f){console.log("clearDependentFlds ",f);if(f=="csi"){dojo.byId("csiId").value="";if(dijit.byId("accountName")){dijit.byId("accountName").setValue("")}if(dijit.byId("csiName")){dijit.byId("csiName").setValue("")}if(dijit.byId(HW_SW_FID)){dijit.byId(HW_SW_FID).setValue("")}}else{if(f=="accountName"){dojo.byId("accountId").value="";if(dijit.byId("classification")){dijit.byId("classification").setValue("")}if(dijit.byId("altAccountName")){dijit.byId("altAccountName").setValue("")}if(dijit.byId("accountIntegId")){dijit.byId("accountIntegId").setValue("")}}else{if(f=="productDescription"){dojo.byId("product").value="";if(dijit.byId("productLine")){dojo.byId("productLine").value=""}if(dijit.byId("productClass")){dijit.byId("productClass").setValue("")}if(dijit.byId("productClassification")){dijit.byId("productClassification").setValue("")}if(dijit.byId("hasProdPlatform")){dijit.byId("hasProdPlatform").setValue("")}if(dijit.byId("componentDescription")){dijit.byId("componentDescription").setValue("")}if(dijit.byId("productVersion")){dijit.byId("productVersion").setValue("")}if(dijit.byId("SRProductSubscription")){SRCloud.resetFormElements()}}else{if(f=="componentDescription"){dojo.byId("component").value="";if(dijit.byId("subcomponentDescription")){dijit.byId("subcomponentDescription").setValue("")}if(dijit.byId("hasSubcomponent")){dijit.byId("hasSubcomponent").setValue("");setSubcomponentStyle()}}else{if(f=="subcomponentDescription"){dojo.byId("subcomponent").value="";if(dijit.byId("subcomponentDescription")){dojo.byId("subcomponentDescription").value=""}}else{if(f=="platformDescription"){dojo.byId("platform").value="";if(dijit.byId("platformVersionDescription")){dijit.byId("platformVersionDescription").setValue("")}}else{if(f=="projectName"){dijit.byId("project").setValue("");if(dijit.byId("configurationName")){dijit.byId("configurationName").setValue("")}if(dijit.byId("milestone")){dijit.byId("milestone").setValue("")}}else{if(f=="configurationName"){dijit.byId("configuration").setValue("");if(dijit.byId("configurationOCMConfiguration")){dijit.byId("configurationOCMConfiguration").setAttribute("checked",false)}setFieldVal("configLevel","");if(dijit.byId("configurationName")&&dijit.byId("configurationName").getValue()==""){if(dijit.byId("hostId")){dojo.byId("hostId").value=""}if(dijit.byId("hostName")){dijit.byId("hostName").setValue("")}setConditionalReqFld("hostId",false)}}else{if(f=="hostId"&&dijit.byId("hostId").getValue()==""){if(dijit.byId("hostName")){dijit.byId("hostName").setValue("")}setFieldVal("configLevel","")}else{if(f=="languageDescription"){dojo.byId("language").value=""}else{if(f=="toolsVersionVersion"){dojo.byId("toolsVersion").value=""}else{if(f=="databaseDescription"){dojo.byId("database").value="";if(dijit.byId("databaseVersion")){dijit.byId("databaseVersion").setValue("")}}else{if(f=="groupDesc"){dojo.byId("group").value=""}else{if(f=="contactLastName"){if(dijit.byId("contactId")){dijit.byId("contactId").setValue("")}else{dojo.byId("contactId").value=""}if(dijit.byId("contactFirstName")){dijit.byId("contactFirstName").setValue("")}if(dijit.byId("contactPhone")){dijit.byId("contactPhone").setValue("")}if(dijit.byId("contactEmail")){dijit.byId("contactEmail").setValue("")}if(dijit.byId("contactTimeZone")){dijit.byId("contactTimeZone").setValue("")}if(dijit.byId("contactMethod")){dijit.byId("contactMethod").setValue("");dijit.byId("contactMethod").setDisplayedValue("")}if(dijit.byId("country")){dijit.byId("country").setValue("")}if(dijit.byId("SRProductClass")){SREXA.clean()}}else{if(f=="alternateContactLastName"){if(dijit.byId("alternateContactId")){dijit.byId("alternateContactId").setValue("")}else{dojo.byId("alternateContactId").value=""}if(dijit.byId("alternateContactFirstName")){dijit.byId("alternateContactFirstName").setValue("")}if(dijit.byId("alternateContactPhone")){dijit.byId("alternateContactPhone").setValue("")}if(dijit.byId("alternateContactEmail")){dijit.byId("alternateContactEmail").setValue("")}if(dijit.byId("alternateContactTimeZone")){dijit.byId("alternateContactTimeZone").setValue("")}}else{if(f=="categoryDescription"){dojo.byId("category").value="";dojo.byId("clarificationCount").value="";setFieldVal("sev1Type","");setFieldVal("clarificationName","")}else{if(f=="clarificationName"){dojo.byId("clarificationId").value="";setFieldVal("parentTemplateSev1Type","")}else{if(f=="databasePlatformDesc"){dojo.byId("databasePlatform").value="";if(dijit.byId("databasePlatformVersionDesc")){dijit.byId("databasePlatformVersionDesc").setValue("")}}else{if(f=="envName"){var b=true;var a=getEvalFieldVal("productClass");evalEffectOnEnvFields(a,undefined,b)}else{if(f=="milestone"){dojo.byId("milestoneId").value=""}else{if(f==SERIAL_NUM_FID){serialNumberUtil.clearSNFldsData()}else{if(f==REF_CSI_FID){PartnerSRUtil.clearIndirectCustFlds()}else{if(f==INDIRECT_LAST_FID){PartnerSRUtil.clearIndirectContFlds()}}}}}}}}}}}}}}}}}}}}}}}}var pcRequiredFieldsArr=[];var pcHiddenFieldsArr=[];var pcOptionalFieldsArr=[];var productClassFieldMap=new Map();function resetProductClassArr(){pcRequiredFieldsArr=[];pcHiddenFieldsArr=[];pcOptionalFieldsArr=[]}function setTechnicalUIFieldArr(){pcRequiredFieldsArr=["productDescription","productVersion","componentDescription","platformDescription","platformVersionDescription"];pcOptionalFieldsArr=["categoryDescription","subCategory","subcomponentDescription","databaseDescription","databaseVersion","databasePlatformDesc","databasePlatformVersionDesc","toolsVersionVersion","productLanguagesDesc"]}function setNonTechnicalUIFieldArr(){pcRequiredFieldsArr=["categoryDescription","subCategory"];pcOptionalFieldsArr=["productDescription","productVersion","componentDescription","platformDescription","platformVersionDescription","subcomponentDescription","databaseDescription","databaseVersion","databasePlatformDesc","databasePlatformVersionDesc","toolsVersionVersion","productLanguagesDesc"]}function processProductClass(s,o,p){hideShowCXTicket(s);if((beenTo_InEvalEffectOnEnvFields!=undefined&&beenTo_InEvalEffectOnEnvFields==false)||(p==undefined||(p!=undefined&&p==false))){evalEffectOnEnvFields(s,o,undefined)}var m=(window.location.href.indexOf("SRCreate.jspx")!=-1)?true:false;if(!m){var b=loadRootCause();var a=dijit.byId("rootCause");if(a!=undefined){var f=a.getValue();if(f!=undefined&&dojo.string.trim(f)!=""&&!getInitMode()){b.addCallback(function(w){var v=dojo.some(w.items,function(y){var x=(f==y.id);return x});if(v==false){a.reset()}})}}}if(dijit.byId("SRProductSubscription")){SRCloud.resetFormElements();SRCloud.evaluateForm()}var h=getFieldVal(SRTYPE_FID);var g=getFieldVal("product");resetProductClassArr();if(s==""&&h==TECHNICAL){setTechnicalUIFieldArr();setFieldProperties(pcRequiredFieldsArr,o);return}if(h==NONTECHNICAL){setNonTechnicalUIFieldArr();setFieldProperties(pcRequiredFieldsArr,o);return}if(s==""&&h==""){setFieldProperties(pcRequiredFieldsArr,o);return}if(s!=""){if(s=="Solaris"&&(o==CREATE_OP||(o==UPDATE_OP&&!getInitMode()))){setDefaultSolarisPlatform(s,g)}if(o==CREATE_OP||(o==UPDATE_OP&&!getInitMode())){cleanPlatformFld()}pcRequiredFieldsArr.push("productDescription");pcRequiredFieldsArr.push("productVersion");pcRequiredFieldsArr.push("componentDescription");pcOptionalFieldsArr.push("categoryDescription");pcOptionalFieldsArr.push("subCategory");var u=productClassFieldMap.findIt("PRODUCT_CLASS");if(u==-1){var q=dojo.xhrGet({url:"../../../SRHeaderRequest",content:{lov:"PRODUCT_CLASS",action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(v){if(v!=undefined){productClassFieldMap.put("PRODUCT_CLASS",v);processUIFieldProperties(v,s,o)}},error:function(v){var w=getDisplayMessageObj("Load error occurred for PRODUCT_CLASS  list of values. Operation failed or timed out.",2);displayErrors(w)},timeout:60000})}else{var l=productClassFieldMap.get("PRODUCT_CLASS");processUIFieldProperties(l,s,o)}}}function setRootcauseIfProductClassificationIsIntegratedSoftware(b,a){if(b.productClassification=="Integrated Software"&&dijit.byId("rootCause")!="Hardware"){dijit.byId("rootCause").setValue("Hardware")}}function processUIFieldProperties(g,m,h){var p=false;for(var f=0;f<g.items.length;f++){var o=g.items[f];var a;var l;if(o.id.length>0){a=o.name;if(m!=a){continue}else{p=true}l=o.low}if(l!=undefined&&l.length>0){parseFieldMap(l)}setFieldProperties(pcRequiredFieldsArr,h)}if((!p||(l!=undefined&&l==""))&&m!=""){var b=getFieldVal(SRTYPE_FID);resetProductClassArr();if(b==TECHNICAL){setTechnicalUIFieldArr()}else{if(b==NONTECHNICAL){setNonTechnicalUIFieldArr()}}setFieldProperties(pcRequiredFieldsArr,h)}}function parseFieldMap(f){if(f!=undefined){var b=f.split(",");for(var g=0;g<b.length;g++){var a=b[g].split("-");var l=a[0];var h=a[1];decodeField(l,h)}}}function decodeField(g,b){var f;var a;if(g=="PL"){f="platformDescription"}else{if(g=="PLV"){f="platformVersionDescription"}else{if(g=="DB"){f="databaseDescription"}else{if(g=="DBV"){f="databaseVersion"}else{if(g=="DBPL"){f="databasePlatformDesc"}else{if(g=="DBPLV"){f="databasePlatformVersionDesc"}else{if(g=="TV"){f="toolsVersionVersion"}else{if(g=="PLANG"){f="productLanguagesDesc"}}}}}}}}if(b=="Y"){a=pcRequiredFieldsArr.push(f)}else{if(b=="N"){pcHiddenFieldsArr.push(f)}else{if(b=="O"){pcOptionalFieldsArr.push(f)}}}}function setStyleForChildNode(l,g,o){var f=new Array();var m=l;f=dojo.query(m);if(f!=null&&f!=undefined&&f.length>0){var p=f[0];var b=p.getElementsByTagName(g);if(b!=null&&b.length>0){for(var h=0;h<b.length;h++){var a=b[h];if(a!=null&&a!=undefined){dojo.style(a,o)}}}}}function setFieldProperties(h,g){var p={display:"inline-block","vertical-align":"middle"};var o={display:"none"};var m={display:""};for(var f=0;f<h.length;f++){var l=h[f];if(!dijit.byId(l)){continue}var b=l+"Row";if(dojo.byId(b)){dojo.style(dojo.byId(b),m)}dijit.byId(l).setAttribute("required",true);dijit.byId(l).setDisabled(false);setStyleForChildNode("#"+l+"Row span.conditionalSrReq","img",p);setStyleForChildNode("#"+l+"Row","a",p);overrideConditionalPickListNode(g,l)}for(var f=0;f<pcHiddenFieldsArr.length;f++){var a=pcHiddenFieldsArr[f]+"Row";if(!dijit.byId(pcHiddenFieldsArr[f])){continue}dijit.byId(pcHiddenFieldsArr[f]).setAttribute("required",false);setFieldVal(pcHiddenFieldsArr[f],"");if(g=="pheaderUpdate"){setStyleForChildNode("#"+a+" span.conditionalSrReq","img",o);dijit.byId(pcHiddenFieldsArr[f]).setDisabled(true);setStyleForChildNode("#"+a,"a",o)}else{if(dojo.byId(a)){dojo.style(dojo.byId(a),o)}}}for(var f=0;f<pcOptionalFieldsArr.length;f++){var a=pcOptionalFieldsArr[f]+"Row";if(!dijit.byId(pcOptionalFieldsArr[f])){continue}dijit.byId(pcOptionalFieldsArr[f]).setAttribute("required",false);dijit.byId(pcOptionalFieldsArr[f]).setDisabled(false);setStyleForChildNode("#"+a+" span.conditionalSrReq","img",o);setStyleForChildNode("#"+a,"a",p);if(dojo.byId(a)){dojo.style(dojo.byId(a),m)}}}function overrideConditionalPickListNode(a,b){if(a=="pheaderUpdate"&&b=="productDescription"){srLOVUtil.setProductDisplayProp()}}function validateFormFlds(q){var B=null;var v=new Object();var A=new Array();v.opStatus=0;v.opResult=A;if(q!=undefined&&q!=""){B=dojo.query("input, textarea",q)}else{B=dojo.query("input, textarea")}if(B==null){return}var w=dojo.query(".parentDiv");for(var F=0;F<B.length;F++){var g=dojo.attr(B[F],"id");var z=dojo.attr(B[F],"name");var b=dojo.attr(B[F],"title");var h=dojo.attr(B[F],"type");if(dijit.byId(g)){b=dijit.byId(g).title}var y=dojo.attr(B[F],"required");var D=dojo.style(B[F],"display");var o=dojo.attr(B[F],"disabled");var E=dojo.attr(B[F],"readOnly");var m=dijit.byId(g);var f=false;if(m){y=m.required;f=(m.declaredClass=="dijit.form.FilteringSelect")?true:false}if(!y&&!f){continue}var s=(b!=null&&b!="")?b:g;var u="";if(w!=undefined&&w.length>0){for(j=0;j<w.length;j++){var x=w[j];var C=dojo.query("#"+g,x);if(C!=undefined&&C.length>0){u=dojo.style(x,"display");if(u=="none"){break}}}}if(y&&((!f&&dijit.byId(g).getValue()=="")||(f&&dijit.byId(g).getDisplayedValue()==""))&&u!="none"&&D!="none"&&o!=true&&E!=true&&h!="hidden"){v.opStatus=-1;var p={};p.messageType=2;p.message=s+" is missing.";var a={};a.errFldId=g;p.messageParams=a;A.push(p)}if(f&&dijit.byId(g).getDisplayedValue()!=""&&u!="none"&&D!="none"&&o!=true&&E!=true&&h!="hidden"){var G=m.validate(false);if(!G){v.opStatus=-1;var p={};p.messageType=2;p.message=s+" has invalid value.";var a={};a.errFldId=g;p.messageParams=a;A.push(p)}}}return v}function setFieldVal(a,b){console.debug("fieldId: "+a+",  value: "+b);if(dijit.byId(a)&&b!=undefined){dijit.byId(a).setValue(b)}}function getFieldVal(a){if(dijit.byId(a)){if(dojo.byId(a).type=="checkbox"){return dijit.byId(a).checked}else{return dijit.byId(a).getValue()}}return""}function resetHandInstAck(a){if(dijit.byId("HIAcknowledge")&&a=="update"){dijit.byId("HIAcknowledge").setAttribute("checked",false)}if(dijit.byId("acknowledged")&&a=="create"){dijit.byId("acknowledged").setAttribute("checked",false)}}var SR_HW_FLG_FID="SRHWFlg";var SR_HW_SW_FID="SRHW_SW";var HW_FLG_FID="HWFlg";var HW_SW_FID="HW_SW";var INDIRECT_HW_FLG_FID="indirectHWFlg";var INDIRECT_HW_SW_FID="indirectHW_SW";var SEV1_TYPE="sev1Type";var PARENT_TEMPLATE_SEV1_TYPE="parentTemplateSev1Type";var PARTNER_FLG_FID="partnerFlag";var PARTNER_LOG_FLG_FID="partnerLogFlg";var PARTNER_LOG_FLG_LABELTD="partnerLogFlgLabel";var PARTNER_LOG_FLG_INPUTTD="partnerLogFlgInput";var SERIAL_NUM_FID="serialNum";var SERIAL_NUM_SEARCH_ICON_FID="serialNumSearchIcon";var SERIAL_NUM_INFO_FID="serialNumInfo";var SERIAL_NUM_ID="serialNumId";var SERIAL_NUM_CSI_ID_FID="serialNumCSIId";var SERIAL_NUM_CSI_FID="serialNumCSI";var SERIAL_NUM_GCSI_ID_FID="serialNumGCSIId";var SERIAL_NUM_GCSI_FID="serialNumGCSI";var SERIAL_NUM_ALT_ACCT_FID="serialNumAltAcct";var SERIAL_NUM_LOS_FID="serialNumLOS";var SERIAL_NUM_CSI_NAME_FID="serialNumCSIName";var SERIAL_NUM_ACCT_ID_FID="serialNumAcctId";var SERIAL_NUM_ACCT_FID="serialNumAcct";var SERIAL_NUM_ACCT_NUM_FID="serialNumAcctNum";var SERIAL_NUM_STATUS="serialNumStatus";var SERIAL_NUM_PROD_CLASS="serialNumProdClass";var SERIAL_NUM_ASSETNUMBER="serialNumAssetNumber";var INACTIVE_STATUS="Inactive";var SN_CSI_CONTIGENCY_STATUS="SNCSICStatus";var SN_PCSI_CONTIGENCY_STATUS="SNParentCSICStatus";var SN_CSI_DERIVED_STATUS="SNCSIDStatus";var SN_PCSI_DERIVED_STATUS="SNParentCSIDStatus";var SN_CSI_SR_CREATE_FLAG="serialNumCSICreateFlg";var SN_CSI_INDIRECT_SUPPORT_FLG="SNCSIIndirectSuppFlg";var HW_DESC_FID="HWDesc";var HW_COUNTRY_FID="HWCountry";var HW_STATE_FID="HWState";var HW_CITY_FID="HWCity";var HW_PROVINCE_FID="HWProvince";var HW_COUNTY_FID="HWCounty";var HW_ASSET_ADDR1_FID="HWAssetAddr1";var HW_ADDR_QUERY_SOURCE_FID="HWAddrQuerySource";var HW_ADDR1_FID="HWAddr1";var HW_ADDR2_FID="HWAddr2";var HW_TZ_FID="HWTZ";var HW_TZ_ID_FID="HWTZId";var HW_POSTAL_CODE_FID="HWPCode";var HW_LOCATION_ID_FID="HWAddrId";var HW_ADDRRESS_INTEGRATIONID_FID="HWAddressIntegrationId";var PERM_CHG_FLG_FID="HWPC";var HW_MC_FLG_FID="HWMC";var HW_HOST_NAME_FID="HWHost";var HW_PROD_FID="HWProd";var INDIRECT_CONT_ID_FID="indirectContId";var INDIRECT_LAST_FID="indirectContLast";var INDIRECT_FIRST_FID="indirectContFirst";var INDIRECT_PHONE_FID="indirectContPhone";var INDIRECT_EMAIL_FID="indirectContEmail";var INDIRECT_TZ_FID="indirectContTZ";var INDIRECT_TZ_ID_FID="indirectContTZId";var INDIRECT_ACCT_ID_FID="indirectContAcctId";var INDIRECT_ACCT_NUM_FID="indirectContAcctNum";var INDIRECT_ACCT_ALT_NAME_FID="indirectContAcctAltName";var INDIRECT_ACCT_FID="indirectContAcct";var INDIRECT_CUST_VFLG_FID="indirectCustV";var REF_CSI_FID="refCSI";var REF_CSI_ID_FID="refCSIId";var REF_CSI_NAME_FID="refCSIName";var INDIRECT_CONT_PANE="indirectContPane";var INDIRECT_CONT_CSI_STATUS="indirect_csiContactStatus";var INDIRECT_SR_VIEW_FLAG="indirect_srViewFlag";var SERIAL_NUMBER_Q_INPUT="serialNumQInput";var SR_TYPE_INPUT="srTypeQInput";var HW_DESC_Q_INPUT="HWDescQInput";var HW_HOST_NAME_Q_INPUT="HWHostQInput";var HW_PROD_Q_INPUT="HWProductQInput";var CSI_ACCOUNT_ID_Q_INPUT="accountIdQInput";var SERIAL_NUMBER_LABEL="Serial Number";var HW_DESC_LABEL="HW Description";var HW_HOST_NAME_LABEL="Asset Name";var PRODUCT_LABEL="Product";var HW_ADDR1_Q_INPUT="HWAddr1QInput";var HW_COUNTRY_Q_INPUT="HWCountryQInput";var HW_STATE_Q_INPUT="HWStateQInput";var HW_CITY_Q_INPUT="HWCityQInput";var HW_ADDR1_LABEL="HW Addr Line1";var HW_COUNTRY_LABEL="Country";var HW_STATE_LABEL="State";var HW_CITY_LABEL="City";var FS_SR="fieldSvcSR";var FS_SRIntegrationStatus="SRIntegrationStatus";var FS_SRIntegrationMessage="SRIntegrationMessage";var FS_SRIntegrationDateTime="SRIntegrationDateTime";var PRODUCT_DESC="productDescription";var PLATFORM_DESC="platformDescription";var SR_OP_PARAM="srOp";var UPDATE_OP="update";var CREATE_OP="create";var NON_HARDWARE_ALERT_MSG="SR is not related to the Hardware.";var PICK_REF_CSI_MSG="Reference CSI and Indirect Account is not found. Pick valid Reference CSI first.";var LOV_GRID_ID="grid";var snCbFunc;var snCancelFunc;var serialNumberUtil={};serialNumberUtil.setSerialNumberLov=function(b,f){var h=SERIAL_NUM_FID;var l=new Array();if(b=="update"&&getInitMode()){return}var o=new Object();o.lookupId=SR_OP_PARAM;o.lookupValue=(b!=undefined)?b:"";l.push(o);var o=new Object();o.lookupId=CSI_ID;o.lookupValue=(dijit.byId(CSI_ID))?dijit.byId(CSI_ID).getValue():"";l.push(o);var o=new Object();o.lookupId=PARTNER_FLG_FID;o.lookupValue=isPartnerSR()?"true":"false";l.push(o);var o=new Object();o.lookupId=REF_CSI_ID_FID;o.lookupValue=(dijit.byId(REF_CSI_ID_FID))?dijit.byId(REF_CSI_ID_FID).getValue():"";l.push(o);var o=new Object();o.lookupId=SRTYPE_FID;o.lookupValue=(dijit.byId(SRTYPE_FID))?dijit.byId(SRTYPE_FID).getValue():"";l.push(o);if(dijit.byId(CONTACT_EMAIL)!=undefined&&dojo.string.trim(dijit.byId(CONTACT_EMAIL).getValue())!=""){var o=new Object();o.lookupId=SERIAL_NUMBER_CONTACT_EMAIL_FID;o.lookupValue=dijit.byId(CONTACT_EMAIL).getValue();l.push(o)}var g="";if(f!=undefined&&f){if(dijit.byId(SERIAL_NUM_FID)&&dijit.byId(SERIAL_NUM_FID).getValue()!=""){g=SERIAL_NUM_FID+":"+dijit.byId(SERIAL_NUM_FID).getValue()}}var m="serialNumberUtil.SNOnSelectHandler_b4('"+b+"')";var a="";setLovDialog(h,l,g,a,"Serial Number",m)};var UNSUPPORTED_SN_MSG="Serial Number is not covered under the current support contract.";var UNMATCHED_SN_CSI_MSG="Warning : The selected Serial Number is not associated to the CSI already stamped on the SR. Select OK to continue or Cancel to select a different Serial number.";var UNMATCHED_SN_PARTNER_CSI_MSG="The Serial Number you selected is not directly supported and requires a Partner CSI to be set as the Primary CSI for Technical SRs. For Non-Techical SRs, you can continue using this Serial Number without entering Partner CSI.";var UNMATCHED_SN_REF_CSI_MSG="Warning : The selected Serial Number is not associated to the Reference CSI already stamped on the SR. Select OK to continue or Cancel to select a different Serial Number.";var EMPTY_SN_PARTNER_CSI_MSG="The Serial Number you selected is not directly supported and requires a Partner CSI to be set as the Primary CSI for Technical SRs. For Non-Techical SRs, you can continue using this Serial Number without entering Partner CSI.";var UNSUPPORTED_SN_CSI_MSG="The selected Serial Number is associated to an unsupported CSI. Select a different Serial Number or CSI. Serial Number - CSI validation failed with following errors: ";var SN_INDIRECT_CSI_AS_DIRECT_NONTECH_ONLY_MSG="The Serial Number you selected is not directly supported and requires a Partner CSI to be set as the Primary CSI for Technical SRs. Change SR Type to Non-Technical and try again .";serialNumberUtil.SNOnSelectHandler_b4=function(b,f){f=(f==undefined||f==null)?getSelectedLOVRow():f;if(f!=null){if(hasRowInvalidStatus(f)){var l=extractRowStatusMessage(f);alert(l!=""?l:"This item has the Status field set to 'invalid'. Please choose another item!");return}else{if(f.snContactId!=undefined&&dojo.string.trim(f.snContactId)!=""&&dijit.byId("alternateContactId")&&dojo.string.trim(dijit.byId("alternateContactId").getValue())==dojo.string.trim(f.snContactId)){var m=dijit.byId("alternateContactId").value;if(m==f.snContactId){alert("Selected primary contact is same as alternate contact. Please select different primary contact or change alternate contact.");if(dijit.byId("contactLastName")){dijit.byId("contactLastName").setValue("")}return}}else{var a="../../../SRHeaderRequest";var g={action:"getOnlyProductBySerialNum",serialNum:f.serialNum};var h=genericTalkToServer(a,g,"json",true,null,"post");h.addBoth(function(p,o){f.product=p.product;f.productDescription=p.productDescription;f.productLine=p.productLine;f.productClass=p.productClass;f.productClassification=p.productClassification;f.productVersion=p.productVersion;f.componentDescription=p.componentDescription;f.hasProdPlatform=p.hasProdPlatform;serialNumberUtil.SNOnSelectHandler(b,f)})}}}else{serialNumberUtil.SNOnSelectHandler(b,f)}};serialNumberUtil.SNOnSelectHandler=function(f,h){var a=SERIAL_NUM_ID+","+SERIAL_NUM_FID+","+SERIAL_NUM_CSI_FID+","+SERIAL_NUM_CSI_ID_FID+","+SERIAL_NUM_GCSI_FID+","+SERIAL_NUM_GCSI_ID_FID+","+SERIAL_NUM_ACCT_FID+","+SERIAL_NUM_ACCT_ID_FID+","+SERIAL_NUM_ACCT_NUM_FID+","+HW_DESC_FID+","+HW_COUNTRY_FID+","+HW_STATE_FID+","+HW_CITY_FID+","+HW_COUNTY_FID+","+HW_PROVINCE_FID+","+HW_ADDR1_FID+","+HW_ADDR2_FID+","+HW_TZ_FID+","+HW_TZ_ID_FID+","+HW_POSTAL_CODE_FID+","+HW_LOCATION_ID_FID+","+HW_MC_FLG_FID+","+HW_HOST_NAME_FID+","+INDIRECT_ACCT_ID_FID+","+INDIRECT_ACCT_FID+","+INDIRECT_ACCT_NUM_FID+","+SN_CSI_CONTIGENCY_STATUS+","+SN_PCSI_CONTIGENCY_STATUS+","+SN_CSI_INDIRECT_SUPPORT_FLG+","+SN_CSI_DERIVED_STATUS+","+SN_PCSI_DERIVED_STATUS+","+SERIAL_NUM_STATUS+","+SERIAL_NUM_PROD_CLASS+","+REF_CSI_FID+","+REF_CSI_ID_FID+","+CSI+","+CSI_ID+",product,productDescription,productLine,productClass,productClassification,productVersion,componentDescription,hasProdPlatform,svcLvl,svcLvlFlag,"+SERIAL_NUM_ASSETNUMBER,g;var b=a.split(",");h=(h==undefined||h==null)?getSelectedLOVRow():h;if(h!=null){serialNumberUtil.invokeSNValidations(f,h,b)}SRValidationUtils.onChangeHWCountry(dijit.byId("HWCountry"));if(dijit.byId("refElemFSTasks")!=undefined){}setTimeout(function(){remoteAccessCheck()},0)};serialNumberUtil.invokeSNValidations=function(b,f,a){var g=serialNumberUtil.validateSerialNumberData(f);if(g!=undefined&&g.opStatus==FAILURE_STATUS&&g.errors){window.snCancelFunc=function(){serialNumberUtil.onCancel(f)};displayErrors(g,null,window.snCancelFunc);return false}g=serialNumberUtil.matchSerialNumberCSI(f);if(g!=undefined&&g.opStatus==FAILURE_STATUS&&g.errors){window.snCancelFunc=function(){serialNumberUtil.onCancel(f)};displayErrors(g,null,window.snCancelFunc);return false}if((g!=undefined&&g.opStatus==FAILURE_STATUS&&!g.errors)){window.snCbFunc=function(){serialNumberUtil.fillData(a,f,b)};window.snCancelFunc=function(){serialNumberUtil.onCancel(f)};g.continueLabel="OK";g.cancelLabel="Cancel";displayErrors(g,window.snCbFunc,window.snCancelFunc);return false}serialNumberUtil.fillData(a,f,b)};serialNumberUtil.getFldsArr=function(){return[SERIAL_NUM_ID,SERIAL_NUM_FID,SERIAL_NUM_CSI_FID,SERIAL_NUM_CSI_ID_FID,SERIAL_NUM_GCSI_FID,SERIAL_NUM_GCSI_ID_FID,SERIAL_NUM_ACCT_FID,SERIAL_NUM_ACCT_ID_FID,SERIAL_NUM_ACCT_NUM_FID,HW_DESC_FID,HW_MC_FLG_FID,HW_HOST_NAME_FID,SN_CSI_CONTIGENCY_STATUS,SN_PCSI_CONTIGENCY_STATUS,SN_CSI_DERIVED_STATUS,SN_PCSI_DERIVED_STATUS,SERIAL_NUM_STATUS,SERIAL_NUM_PROD_CLASS,SN_CSI_INDIRECT_SUPPORT_FLG,SERIAL_NUM_ASSETNUMBER]};serialNumberUtil.getSNRecord=function(){var b=serialNumberUtil.getFldsArr();var a={};dojo.forEach(b,function(f){if(f==SN_CSI_INDIRECT_SUPPORT_FLG){a[f]=(getFieldVal(f)=="true")?true:false}else{a[f]=getFieldVal(f)}});return a};serialNumberUtil.clearSNFldsData=function(){var a=getFieldVal(REF_CSI_FID);var f=getFieldVal(CSI);var g=getFieldVal(SERIAL_NUM_GCSI_FID);var b=serialNumberUtil.getFldsArr();dojo.forEach(b,function(h){if(dijit.byId(h)&&dojo.byId(h).type=="checkbox"){dijit.byId(h).setAttribute("checked",false)}else{setFieldVal(h,"")}});if(dijit.byId(HW_MC_FLG_FID)){dijit.byId(HW_MC_FLG_FID).setAttribute("checked",false)}HWAddrUtil.clearHWAddrFldsData();serialNumberUtil.clearRelatedData();HWSRUtil.setHWConditions();if(g!=undefined&&((!isEmptyVal(a)&&a!=g)||(!isEmptyVal(f)&&f!=g))){serialNumberUtil.handleSRHIs()}if(dijit.byId("refElemFSTasks")!=undefined){}setTimeout(function(){remoteAccessCheck()},0)};serialNumberUtil.clearRelatedData=function(){var a=[PRODUCT_DESC,PLATFORM_DESC,"svcLvl","svcLvlFlag",FLD_CONFIGURATION_NAME,FLD_HOST_ID,FLD_HOST_NAME,"configLevel"];dojo.forEach(a,function(b){if(dijit.byId(b)&&dojo.byId(b).type=="checkbox"){dijit.byId(b).setAttribute("checked",false)}else{setFieldVal(b,"")}})};serialNumberUtil.fillData=function(q,f,g){var m=f.serialNum;var l=document.getElementById("serialNum").value;if(m!=l){cleanConfigurationFld();cleanHostFld();cleanPlatformFld()}var a=getFieldVal(REF_CSI_FID);var o=getFieldVal(CSI);var h=false;if(!isTechnicalSR()&&(f[SN_CSI_INDIRECT_SUPPORT_FLG]==true)&&((!isEmptyVal(o)&&f[REF_CSI_FID]==o)||(isEmptyVal(o))||(!isEmptyVal(o)&&f[REF_CSI_FID]!=o&&f[CSI]!=o))){f[CSI]=f[REF_CSI_FID];f[CSI_ID]=f[REF_CSI_ID_FID];f[INDIRECT_ACCT_ID_FID]="";f[INDIRECT_ACCT_NUM_FID]="";f[INDIRECT_ACCT_FID]="";f[REF_CSI_FID]="";f[REF_CSI_ID_FID]=""}var p=undefined;if(dijit.byId("csi")){p=dijit.byId("csi")}if(!isEmptyVal(f.snContactId)){if(f[CSI]!=p.getValue()&&!isEmptyVal(f.snContactId)){if(dijit.byId(CSI_CONTACT_ID)){dijit.byId(CSI_CONTACT_ID).setValue(f.snContactId)}}else{var b={};b.statusFlag="";b.contactId=f.snContactId;b.contactEmail=f.snContactEmailAddress;b.contactLastName=f.snContactLastName;b.contactFirstName=f.snContactFirstName;b.contactPhone=f.snContactPhone;b.contactTimeZone=f.snContactTimeZone;b.contactMethod=f.snContactMethod;b.country=f.snContactCountry;populateSelectedContact(g,b)}}if(f!=undefined&&(isPartnerSR()&&f[SERIAL_NUM_CSI_FID]!=a)||((f[SN_CSI_INDIRECT_SUPPORT_FLG]==false)&&f[SERIAL_NUM_CSI_FID]!=o)){h=true}setAndCloseLovDialog(q,f);HWSRUtil.setHWConditions();HWSRUtil.toggleHWAddrFlds({readOnly:true});srLOVUtil.evaluateProductProp();if(!isEmptyVal(f[REF_CSI_FID])&&f[REF_CSI_FID]!=a){PartnerSRUtil.setRefCSILov(g,true)}if(!h){serialNumberUtil.handleSRHIs()}};serialNumberUtil.setExadataConditions=function(){srLOVUtil.setProductDisplayProp()};var UNSUPPORTED_SN_PROP="unsupportedSN";var UNSUPPORTED_SN_CSI_PROP="unsupportedSNCSI";var ALERT_SN_CSI_PROP="alertSNCSI";var ALERT_SN_CSI_MSG="You have selected a Serial Number that is associated to a unsupported CSI. Serial Number CSI validation failed with warnings, Click Ok to continue.";serialNumberUtil.validateSerialNumberData=function(m){var l=new Array();var h;if(m.status!=undefined&&m.status=="invalid"){var o=createMessageObject(UNSUPPORTED_SN_MSG,ERROR);l.push(o);h=getErrMessageObj(l);h[UNSUPPORTED_SN_PROP]=true;return h}var a=false;if(isTechnicalSR()&&isHardwareOrBoth()&&!isEmptyVal(m[SERIAL_NUM_FID])){a=((m[SERIAL_NUM_STATUS]==INACTIVE_STATUS||isEmptyVal(m[SERIAL_NUM_STATUS]))&&(isEmptyVal(m[SN_CSI_CONTIGENCY_STATUS])||m[SN_CSI_CONTIGENCY_STATUS]==INACTIVE_STATUS));var o=(a)?createMessageObject(UNSUPPORTED_SN_MSG,ERROR):null;if(o!=null){l.push(o)}h=(a)?getErrMessageObj(l):getSuccessMessageObj(l);h[UNSUPPORTED_SN_PROP]=a;if(a){return h}var g=serialNumberUtil.validateSerialNumberCSI(m);if(g.opStatus==FAILURE_STATUS&&g.errors){var f=g.opResult;var b=createMessageObject(UNSUPPORTED_SN_CSI_MSG,ERROR);l.push(b);l=l.concat(f);h=getErrMessageObj(l);h[UNSUPPORTED_SN_CSI_PROP]=g.errors}else{if(g.opStatus==FAILURE_STATUS&&!g.errors){var f=g.opResult;var b=createMessageObject(ALERT_SN_CSI_MSG,WARNING);l.push(b);l=l.concat(f);h=getWarningMessageObj(l);h[ALERT_SN_CSI_PROP]=true}}}return h};var UNMATCHED_ORIGINATING_CSI="unmatchedCsi";var UNMATCHED_REF_CSI="unmatchedRefCsi";var EMPTY_PARTNER_CSI="emptyPartnerCsi";var UNMATCHED_PARTNER_CSI="unmatchedPartnerCsi";var ENTER_SN_MSG="Please enter Serial Number first.";var SN_INDIRECT_CSI_AS_DIRECT_NONTECH_ONLY="indirectCSiAsDirectCSI";serialNumberUtil.matchSerialNumberCSI=function(l){var p=new Array();var s=dijit.byId(CSI).getValue();var a=dijit.byId(REF_CSI_FID).getValue();var h=(!isEmptyVal(s)&&(l[SN_CSI_INDIRECT_SUPPORT_FLG]==false)&&l[SERIAL_NUM_CSI_FID]!=s)?true:false;var g=(!isEmptyVal(a)&&isPartnerSR()&&l[SERIAL_NUM_CSI_FID]!=a)?true:false;var f=(isTechnicalSR()&&!isEmptyVal(s)&&(l[SN_CSI_INDIRECT_SUPPORT_FLG]==true)&&l[CSI]!=s)?true:false;var o=(isTechnicalSR()&&isEmptyVal(s)&&(l[SN_CSI_INDIRECT_SUPPORT_FLG]==true))?true:false;var m=(isTechnicalSR()&&!isEmptyVal(s)&&(l[SN_CSI_INDIRECT_SUPPORT_FLG]==true)&&l[SN_CSI_NON_TECH_ONLY]=="true")?true:false;var q;var b=(o)?createMessageObject(EMPTY_SN_PARTNER_CSI_MSG,ERROR):null;if(b!=null){p.push(b);q=getErrMessageObj(p);q[EMPTY_PARTNER_CSI]=true;return q}var b=(f)?createMessageObject(UNMATCHED_SN_PARTNER_CSI_MSG,ERROR):null;if(b!=null){p.push(b);q=getErrMessageObj(p);q[UNMATCHED_PARTNER_CSI]=true;return q}var b=(m)?createMessageObject(SN_INDIRECT_CSI_AS_DIRECT_NONTECH_ONLY_MSG,ERROR):null;if(b!=null){p.push(b);q=getErrMessageObj(p);q[SN_INDIRECT_CSI_AS_DIRECT_NONTECH_ONLY]=true;return q}var b=(h)?createMessageObject(UNMATCHED_SN_CSI_MSG,WARNING):null;if(b!=null){p.push(b)}var b=(g)?createMessageObject(UNMATCHED_SN_REF_CSI_MSG,WARNING):null;if(b!=null){p.push(b)}q=(p.length>0)?getWarningMessageObj(p):getSuccessMessageObj(p);q[UNMATCHED_ORIGINATING_CSI]=h;q[UNMATCHED_REF_CSI]=g;return q};serialNumberUtil.validateSerialNumberCSI=function(l){var f=isPartnerSR()?true:false;var g=l[SN_CSI_CONTIGENCY_STATUS];var a=l[SN_CSI_DERIVED_STATUS];var b=l[SERIAL_NUM_CSI_FID];var m=new CSIUtil.CSIRec(b,g,a,"","","",f);var h=CSIUtil.validateCSI(m,TECHNICAL);return h};serialNumberUtil.onCancel=function(a){var b=getFieldVal(SERIAL_NUM_FID);if(a!=undefined&&b==a[SERIAL_NUM_FID]){serialNumberUtil.clearSNFldsData()}return};serialNumberUtil.isEmptySN=function(){if(dijit.byId(SERIAL_NUM_FID)){return isEmptyVal(dijit.byId(SERIAL_NUM_FID).getValue())}return true};serialNumberUtil.getSNDetails=function(f){var h=getFieldVal(SERIAL_NUM_ID);var b=getFieldVal(SRTYPE_FID);var g=getFieldVal(CSI_ID);var a=getFieldVal(REF_CSI_ID_FID);f=(f==undefined)?"":f;return dojo.xhrGet({url:"../../../SRPickLovRequest",content:{action:"getSNRec",serialNumId:h,csiId:g,refCsiId:a,srType:b,productId:f},preventCache:true,handleAs:"json",load:function(l){if(l!=undefined&&!isObjectErroneous(l)){return l}return serialNumberUtil.getSNRecord()},error:function(l){return serialNumberUtil.getSNRecord()},timeout:200000})};serialNumberUtil.handleSRHIs=function(){var a=self.location.href;var b=(a!=undefined&&(a.indexOf("SRCreate.jspx")!=-1))?CREATE_OP:UPDATE_OP;if(b==CREATE_OP){setSHILOV(false)}else{if(b==UPDATE_OP){showSHI(false)}}resetHandInstAck(b)};function isCreateCollabOp(){return"SRCollaboration"===parseQueryString("srcreateOp")}function isCreateTranslationOp(){return"SRTranslation"===parseQueryString("srcreateOp")}var HWAddrUtil={};HWAddrUtil.getFldsArr=function(){return[HW_COUNTRY_FID,HW_STATE_FID,HW_CITY_FID,HW_COUNTY_FID,HW_PROVINCE_FID,HW_ADDR1_FID,HW_ADDR2_FID,HW_TZ_FID,HW_TZ_ID_FID,HW_POSTAL_CODE_FID,HW_LOCATION_ID_FID,PERM_CHG_FLG_FID,HW_ADDRRESS_INTEGRATIONID_FID]};HWAddrUtil.getValidationClearFldsArr=function(){return[HW_COUNTRY_FID,HW_STATE_FID,HW_CITY_FID,HW_COUNTY_FID,HW_PROVINCE_FID,HW_ADDR1_FID,HW_ADDR2_FID,HW_POSTAL_CODE_FID,HW_LOCATION_ID_FID,PERM_CHG_FLG_FID,HW_ADDRRESS_INTEGRATIONID_FID]};HWAddrUtil.clearHWAddrFldsData=function(b){var a=HWAddrUtil.getFldsArr();if(b!=undefined&&dojo.isArray(b)&&b.length>0){a=b}dojo.forEach(a,function(f){if(dijit.byId(f)&&dojo.byId(f).type=="checkbox"){dijit.byId(f).setAttribute("checked",false)}else{if(dijit.byId(f)!=undefined){setFieldVal(f,"");if(dijit.byId(f).declaredClass=="dijit.form.FilteringSelect"||dijit.byId(f).declaredClass=="dijit.form.ComboBox"){dijit.byId(f).setDisplayedValue("")}}}});SRValidationUtils.onChangeHWCountry(dijit.byId("HWCountry"))};HWAddrUtil.HWNewAddr=function(a){HWAddrUtil.clearHWAddrFldsData(a);HWSRUtil.toggleHWAddrFlds({readOnly:false})};HWAddrUtil.onSelectAddr=function(a){selectRow(a);HWSRUtil.toggleHWAddrFlds({readOnly:true});SRValidationUtils.onChangeHWCountry(dijit.byId("HWCountry"))};function setHWAddrLov(){if(serialNumberUtil.isEmptySN()){displayAlert(ENTER_SN_MSG);return}var h=HW_ADDR1_FID;var m=new Array();var o=new Object();o.lookupId=HW_LOCATION_ID_FID;o.lookupValue=(dijit.byId(HW_LOCATION_ID_FID))?dijit.byId(HW_LOCATION_ID_FID).getValue():"";m.push(o);var b=isPartnerSR();var l=(b)?INDIRECT_ACCT_ID_FID:CSI_ACCOUNT_ID;var o=new Object();o.lookupId=CSI_ACCOUNT_ID;o.lookupValue=(dijit.byId(l))?dijit.byId(l).getValue():"";m.push(o);var g="";var a=HW_COUNTRY_FID+","+HW_STATE_FID+","+HW_CITY_FID+","+HW_COUNTY_FID+","+HW_PROVINCE_FID+","+HW_ADDR1_FID+","+HW_ADDR2_FID+","+HW_TZ_FID+","+HW_TZ_ID_FID+","+HW_POSTAL_CODE_FID+","+HW_LOCATION_ID_FID+","+HW_ADDRRESS_INTEGRATIONID_FID;var f="HWAddrUtil.onSelectAddr ('"+a+"')";setLovDialog(h,m,g,a,"Hardware Address",f)}var CSI_NO_SUPPORT_MSG="CSI has No Support.";var CSI_SUPPORT_SUSPENDED_TECHNICAL_MSG="CSI is Support Suspended.";var CSI_NO_TECHNICAL_MSG="CSI does not allow Technical SRs to be logged.";var CSI_SUPPORT_EXPIRED_MSG="Warning : CSI is Support Expired. ";var LOG_SR_MSG="You can continue to log/update the SR.";var CSI_SUPPORT_SUSPENDED_NONTECHNICAL_MSG="Warning : CSI is Support Suspended. ";var LOG_NONTECH_SR_MSG="You can continue to log/update the Non-Technical SR.";var CSI_CONTINGENCY_INACTIVE_TECHNICAL_MSG="CSI does not allow Technical SRs to be logged.";var CSI_CONTINGENCY_INACTIVE_NONTECHNICAL_MSG="Warning : CSI is Inactivated. ";var CSI_CONTINGENCY_ACTIVE_TECHNICAL_UPD_MSG="CSI does not allow Technical SRs to be logged.";var NO_CSI_DATA_MSG="No CSI data found.";var CSIUtil={};CSIUtil.validateCSI=function(l,a){var h=new Array();var g=false;if(("No Support"==l.derivedStatus)&&(l.contigencyStatus==null||l.contigencyStatus=="")){var f=(l.isIndirect)?CSI_NO_SUPPORT_MSG.replace(/CSI/ig,"Reference CSI"):CSI_NO_SUPPORT_MSG;var m=createMessageObject(f,ERROR);h.push(m);g=true}if(("Support Suspended"==l.derivedStatus||"Y"==l.isCsiSuspended)&&(l.contigencyStatus==null||l.contigencyStatus=="")&&TECHNICAL==a){var f=(l.isIndirect)?CSI_SUPPORT_SUSPENDED_TECHNICAL_MSG.replace(/CSI/ig,"Reference CSI"):CSI_SUPPORT_SUSPENDED_TECHNICAL_MSG;var m=createMessageObject(f,ERROR);h.push(m);g=true}if(("No Technical SRs Allowed"==l.derivedStatus||"UPD"==l.los)&&TECHNICAL==a&&!l.isIndirect){var m=createMessageObject(CSI_NO_TECHNICAL_MSG,ERROR);h.push(m);g=true}if("Inactive"==l.contigencyStatus&&TECHNICAL==a){var f=(l.isIndirect)?CSI_CONTINGENCY_INACTIVE_TECHNICAL_MSG.replace(/CSI/ig,"Reference CSI"):CSI_CONTINGENCY_INACTIVE_TECHNICAL_MSG;var m=createMessageObject(f,ERROR);h.push(m);g=true}if(("Support is Expired"==l.derivedStatus||"Y"==l.isCsiExpired)&&(l.contigencyStatus==null||l.contigencyStatus=="")){var f=(g)?CSI_SUPPORT_EXPIRED_MSG:CSI_SUPPORT_EXPIRED_MSG+LOG_SR_MSG;f=(l.isIndirect)?f.replace(/CSI/ig,"Reference CSI"):f;var m=createMessageObject(f,WARNING);h.push(m)}if("Support Suspended"==l.derivedStatus&&(l.contigencyStatus==null||""==l.contigencyStatus)&&NONTECHNICAL==a){var f=(g)?CSI_SUPPORT_SUSPENDED_NONTECHNICAL_MSG:CSI_SUPPORT_SUSPENDED_NONTECHNICAL_MSG+LOG_NONTECH_SR_MSG;f=(l.isIndirect)?f.replace(/CSI/ig,"Reference CSI"):f;var m=createMessageObject(f,WARNING);h.push(m)}if("Inactive"==l.contigencyStatus&&NONTECHNICAL==a){var f=(g)?CSI_CONTINGENCY_INACTIVE_NONTECHNICAL_MSG:CSI_CONTINGENCY_INACTIVE_NONTECHNICAL_MSG+LOG_NONTECH_SR_MSG;f=(l.isIndirect)?f.replace(/CSI/ig,"Reference CSI"):f;var m=createMessageObject(f,WARNING);h.push(m)}var b=getSuccessMessageObj(h);if(g){b=getErrMessageObj(h)}else{if(h.length>0){b=getWarningMessageObj(h)}}return b};CSIUtil.CSIRec=function(f,h,a,m,l,g,b){this.csi=f;this.contigencyStatus=h;this.derivedStatus=a;this.isCsiSuspended=m;this.isCsiExpired=l;this.los=g;this.isIndirect=b};CSIUtil.setCSIHWPartnerConditions=function(f,g,b){if(f==UPDATE_OP&&!(serialNumberUtil.isEmptySN())){var a=serialNumberUtil.getSNDetails();a.addCallback(function(h){CSIUtil.clearSNFlds(h[SERIAL_NUM_FID],g,f)})}else{if(b!="SRCopy"){CSIUtil.clearSNFlds(serialNumberUtil.getSNRecord(),g,f);PartnerSRUtil.clearIndirectCustFlds()}}HWSRUtil.setHWConditions()};CSIUtil.clearSNFlds=function(f,g,a){var b=serialNumberUtil.matchSerialNumberCSI(f);if((b!=undefined&&(b[UNMATCHED_ORIGINATING_CSI]==true||b[UNMATCHED_PARTNER_CSI]==true)&&!(serialNumberUtil.isEmptySN()))||isEmptyVal(g[CSI])){serialNumberUtil.clearSNFldsData()}};CSIUtil.resetSRLanguage=function(){dijit.byId("languageDescription").setValue("English")};CSIUtil.resetCSIRelatedFlds=function(a){if(a!=undefined&&a=="create"){if(dijit.byId("projectName")){dijit.byId("projectName").setValue("")}if(dijit.byId("configurationName")){dijit.byId("configurationName").setValue("")}if((serialNumberUtil.isEmptySN())){if(dijit.byId("productDescription")){dijit.byId("productDescription").setValue("")}}}CSIUtil.resetSRLanguage()};function createSerialNumberQueryNode(b){var f=retrieveLOVLookupParam(b,SR_OP_PARAM);var w=retrieveLOVLookupParam(b,PARTNER_FLG_FID);var g=(w!=undefined&&w=="true")?INDIRECT_ACCT_ID_FID:CSI_ACCOUNT_ID;var v=(w!=undefined&&w=="true")?INDIRECT_ACCT_FID:CSI_ACCOUNT_NAME;var F=(f==UPDATE_OP&&dijit.byId(v))?dijit.byId(v).getValue():"";var M=(f==UPDATE_OP&&dijit.byId(g))?dijit.byId(g).getValue():"";var a=getFieldVal(SRTYPE_FID);var Q=dijit.byId("snAdvancedSearch");if(Q!=undefined){Q.destroyRecursive()}var z=document.createElement("div");Q=new dijit.TitlePane({id:"snAdvancedSearch",title:"Advanced Search",style:"width: 100%"},z);var x=document.createElement("table");x.setAttribute("width","100%");var G=document.createElement("tbody");x.appendChild(G);var L=createTableRow("100%");G.appendChild(L);var H=createQueryButtonCell("doSNQuery()");dojo.attr(H,{valign:"middle",align:"center",rowSpan:"4"});L.appendChild(H);var A=createLabelCell(CSI_LABEL,false,"15%");var y=createTextboxCell(CSI_INPUT,CSI_INPUT,"15%",false,"");y.title="Atleast provide three non-wildcard characters before using wildcard.";L.appendChild(A);L.appendChild(y);var o=createLabelCell(CSI_ACCOUNT_NUMBER_LABEL,false,"15%");var m=createTextboxCell(CSI_ACCOUNT_NUMBER_INPUT,CSI_ACCOUNT_NUMBER_INPUT,"15%",false,"");m.title="Atleast provide three non-wildcard characters before using wildcard.";dojo.addClass(dijit.byId(CSI_ACCOUNT_NUMBER_INPUT).domNode,"srinput");dijit.byId(CSI_ACCOUNT_NUMBER_INPUT).setDisabled((f==UPDATE_OP)?true:false);L.appendChild(o);L.appendChild(m);var O=createLabelCell(CSI_ACCOUNT_NAME_LABEL,false,"15%");var N=createTextboxCell(CSI_ACCOUNT_NAME_INPUT,CSI_ACCOUNT_NAME_INPUT,"15%",false,F);N.title="Atleast provide three non-wildcard characters before using wildcard.";dijit.byId(CSI_ACCOUNT_NAME_INPUT).setDisabled((f==UPDATE_OP&&F!="")?true:false);var l=createHiddenTextbox(SR_TYPE_INPUT,a);N.appendChild(l.domNode);if(f==UPDATE_OP){var h=createHiddenTextbox(CSI_ACCOUNT_ID_INPUT,M);N.appendChild(h.domNode)}L.appendChild(O);L.appendChild(N);var K=createTableRow("100%");G.appendChild(K);var C=createLabelCell(REF_CSI_LABEL,false,"15%");var B=createTextboxCell(REF_CSI_Q_INPUT,REF_CSI_Q_INPUT,"10%",false,"");B.title=atLeast3CharsMsg;K.appendChild(C);K.appendChild(B);var q=createLabelCell(HW_DESC_LABEL,false,"15%");var p=createTextboxCell(HW_DESC_Q_INPUT,HW_DESC_Q_INPUT,"10%",false,"");p.title="Atleast provide three non-wildcard characters before using wildcard.";K.appendChild(q);K.appendChild(p);var R=createLabelCell(HW_HOST_NAME_LABEL,false,"15%");var P=createTextboxCell(HW_HOST_NAME_Q_INPUT,HW_HOST_NAME_Q_INPUT,"10%",false,"");P.title="Atleast provide three non-wildcard characters before using wildcard.";K.appendChild(R);K.appendChild(P);var J=createTableRow("100%");G.appendChild(J);var C=createLabelCell(SERIAL_NUMBER_LABEL,false,"15%");var B=createTextboxCell(SERIAL_NUMBER_Q_INPUT,SERIAL_NUMBER_Q_INPUT,"10%",false,"");B.title="Atleast provide three non-wildcard characters before using wildcard.";J.appendChild(C);J.appendChild(B);var E=createLabelCell(PRODUCT_LABEL,false,"15%");var D=createTextboxCell(HW_PROD_Q_INPUT,HW_PROD_Q_INPUT,"10%",false,"");D.title="Atleast provide three non-wildcard characters before using wildcard.";J.appendChild(E);J.appendChild(D);var u=createLabelCell(CSI_SI_NAME_LABEL,false,"15%");var s=createTextboxCell(CSI_SI_NAME_INPUT,CSI_SI_NAME_INPUT,"15%",false,"");s.title=atLeast3CharsMsg;J.appendChild(u);J.appendChild(s);var I=createTableRow("100%");G.appendChild(I);var T=createLabelCell(SERIAL_NUMBER_CONTACT_EMAIL_LABEL,false,"15%");var S=createTextboxCell(SERIAL_NUMBER_CONTACT_EMAIL_INPUT,SERIAL_NUMBER_CONTACT_EMAIL_INPUT,"10%",false,"");S.title="wildcard search is not allowed";I.appendChild(T);I.appendChild(S);Q.setContent(x);dojo.addClass(dijit.byId(CSI_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(CSI_ACCOUNT_NAME_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(SERIAL_NUMBER_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(HW_DESC_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(HW_HOST_NAME_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(HW_PROD_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(REF_CSI_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(CSI_SI_NAME_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(SERIAL_NUMBER_CONTACT_EMAIL_INPUT).domNode,"srinput");Q.startup();return Q.domNode}function retrieveLOVLookupParam(f,a){if(f!=undefined&&f!=null&&f.length>0){for(i=0;i<f.length;i++){var b=f[i];if(b.lookupId==a){return b.lookupValue}}}return null}function doSNQuery(){var b=SERIAL_NUM_FID;var a=new Array();a.push(createAdvancedSearchParamObj(CSI_INPUT,CSI,CSI_LABEL));a.push(createAdvancedSearchParamObj(REF_CSI_Q_INPUT,REF_CSI_Q_INPUT,REF_CSI_LABEL));a.push(createAdvancedSearchParamObj(CSI_ACCOUNT_NUMBER_INPUT,CSI_ACCOUNT_NUMBER,CSI_ACCOUNT_NUMBER_LABEL));a.push(createAdvancedSearchParamObj(CSI_ACCOUNT_NAME_INPUT,CSI_ACCOUNT_NAME,CSI_ACCOUNT_NAME_LABEL));a.push(createAdvancedSearchParamObj(SR_TYPE_INPUT,SRTYPE_FID,""));if(dijit.byId(CSI_ACCOUNT_ID_INPUT)){a.push(createAdvancedSearchParamObj(CSI_ACCOUNT_ID_INPUT,CSI_ACCOUNT_ID,CSI_ACCOUNT_ID_LABEL))}a.push(createAdvancedSearchParamObj(SERIAL_NUMBER_Q_INPUT,SERIAL_NUM_FID,SERIAL_NUMBER_LABEL));a.push(createAdvancedSearchParamObj(HW_DESC_Q_INPUT,HW_DESC_FID,HW_DESC_LABEL));a.push(createAdvancedSearchParamObj(HW_HOST_NAME_Q_INPUT,HW_HOST_NAME_FID,HW_HOST_NAME_LABEL));a.push(createAdvancedSearchParamObj(HW_PROD_Q_INPUT,HW_PROD_FID,PRODUCT_LABEL));a.push(createAdvancedSearchParamObj(CSI_SI_NAME_INPUT,CSI_SI_NAME,CSI_SI_NAME_LABEL));a.push(createAdvancedSearchParamObj(SERIAL_NUMBER_CONTACT_EMAIL_INPUT,SERIAL_NUMBER_CONTACT_EMAIL_FID,SERIAL_NUMBER_CONTACT_EMAIL_LABEL));submitQuery(b,a)}function createHWAddrQueryNode(a){var Y=document.createElement("div");var x=document.createElement("table");Y.appendChild(x);x.setAttribute("width","100%");var N=document.createElement("tbody");x.appendChild(N);var S=createTableRow("100%");N.appendChild(S);var z=document.createElement("td");S.appendChild(z);var h=document.createElement("img");dojo.attr(h,{src:"../images/tip.gif",alt:"Tip Text"});z.appendChild(h);var L="For wild character search on any field, use asterisk (*).";var s=document.createTextNode(L);var y=document.createElement("span");y.appendChild(s);z.appendChild(y);var b=createTableRow("100%");N.appendChild(b);var M=document.createElement("td");b.appendChild(M);var v=document.createElement("img");dojo.attr(v,{src:"../images/tip.gif",alt:"Tip Text"});M.appendChild(v);var K="Address list is constrained by the account stamped on the SR.";var w=document.createTextNode(K);var R=document.createElement("span");R.appendChild(w);M.appendChild(R);var aa=document.createElement("br");Y.appendChild(aa);var W=dijit.byId("hwAddrAdvancedSearch");if(W!=undefined){W.destroyRecursive()}var F=document.createElement("div");W=new dijit.TitlePane({id:"hwAddrAdvancedSearch",title:"Advanced Search by Account Address",style:"width: 100%"},F);Y.appendChild(W.domNode);var A=retrieveLOVLookupParam(a,CSI_ACCOUNT_ID);var x=document.createElement("table");x.setAttribute("width","100%");var N=document.createElement("tbody");x.appendChild(N);var Q=createTableRow("100%");N.appendChild(Q);var O=createQueryButtonCell('doHWAddrQuery("Account")');dojo.attr(O,{valign:"middle",align:"left",rowSpan:"2"});Q.appendChild(O);var H=createLabelCell(HW_CITY_LABEL,false,"15%");var G=createTextboxCell(HW_CITY_Q_INPUT,HW_CITY_Q_INPUT,"15%",false,"");Q.appendChild(H);Q.appendChild(G);var p=createLabelCell(HW_STATE_LABEL,false,"15%");var C=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&lov=STATE_ABBREV&rev="+enabledLOVServlets.get("SRHeaderRequest")});var o=createComboSelectCell(HW_STATE_Q_INPUT,C);Q.appendChild(p);Q.appendChild(o);var X=createLabelCell(HW_COUNTRY_LABEL,false,"15%");var B=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&lov=COUNTRY&rev="+enabledLOVServlets.get("SRHeaderRequest")});var V=createFilteringSelectCell("",HW_COUNTRY_Q_INPUT,B,"id","id");Q.appendChild(X);Q.appendChild(V);var P=createTableRow("100%");N.appendChild(P);var J=createLabelCell(HW_ADDR1_LABEL,false,"15%");var I=createTextboxCell(HW_ADDR1_Q_INPUT,HW_ADDR1_Q_INPUT,"10%",false,"");P.appendChild(J);P.appendChild(I);var u=document.createElement("td");var q=document.createElement("td");dojo.attr(q,{colSpan:3});var g=createHiddenTextbox(HW_ADDR_QUERY_SOURCE_FID,HW_ASSET_ADDR1_FID);var f=createHiddenTextbox(CSI_ACCOUNT_ID_Q_INPUT,A);u.appendChild(g.domNode);q.appendChild(f.domNode);P.appendChild(u);P.appendChild(q);W.setContent(x);dojo.addClass(dijit.byId(HW_COUNTRY_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(HW_CITY_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(HW_ADDR1_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(HW_STATE_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(HW_ADDR1_Q_INPUT).domNode,"srinput");dijit.byId(HW_COUNTRY_Q_INPUT).startup();W.startup();var Z=document.createElement("br");Y.appendChild(Z);var W=dijit.byId("hwAddr2AdvancedSearch");if(W!=undefined){W.destroyRecursive()}var F=document.createElement("div");W=new dijit.TitlePane({id:"hwAddr2AdvancedSearch",title:"Advanced Search by Hardware",style:"width: 100%"},F);Y.appendChild(W.domNode);var A=retrieveLOVLookupParam(a,CSI_ACCOUNT_ID);var x=document.createElement("table");x.setAttribute("width","100%");var N=document.createElement("tbody");x.appendChild(N);var Q=createTableRow("100%");N.appendChild(Q);var O=createQueryButtonCell('doHWAddrQuery("HW")');dojo.attr(O,{valign:"middle",align:"left",rowSpan:"1"});Q.appendChild(O);var E=createLabelCell(SERIAL_NUMBER_LABEL,false,"10%");var D=createTextboxCell(SERIAL_NUMBER_Q_INPUT,SERIAL_NUMBER_Q_INPUT,"15%",false,"");D.title="Atleast provide three non-wildcard characters before using wildcard.";Q.appendChild(E);Q.appendChild(D);var m=createLabelCell(HW_DESC_LABEL,false,"15%");var l=createTextboxCell(HW_DESC_Q_INPUT,HW_DESC_Q_INPUT,"15%",false,"");l.title="Atleast provide three non-wildcard characters before using wildcard.";Q.appendChild(m);Q.appendChild(l);var U=createLabelCell(HW_HOST_NAME_LABEL,false,"15%");var T=createTextboxCell(HW_HOST_NAME_Q_INPUT,HW_HOST_NAME_Q_INPUT,"15%",false,"");T.title="Atleast provide three non-wildcard characters before using wildcard.";Q.appendChild(U);Q.appendChild(T);W.setContent(x);dojo.addClass(dijit.byId(SERIAL_NUMBER_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(HW_DESC_Q_INPUT).domNode,"srinput");dojo.addClass(dijit.byId(HW_HOST_NAME_Q_INPUT).domNode,"srinput");dijit.byId(HW_COUNTRY_Q_INPUT).startup();W.startup();return Y}function doHWAddrQuery(f){var b=HW_ADDR1_FID;var a=new Array();if(f=="Account"){a.push(createAdvancedSearchParamObj(HW_CITY_Q_INPUT,HW_CITY_FID,HW_CITY_LABEL));a.push(createAdvancedSearchParamObj(HW_STATE_Q_INPUT,HW_STATE_FID,HW_STATE_LABEL));a.push(createAdvancedSearchParamObj(HW_COUNTRY_Q_INPUT,HW_COUNTRY_FID,HW_COUNTRY_LABEL));a.push(createAdvancedSearchParamObj(HW_ADDR1_Q_INPUT,HW_ADDR1_FID,HW_ADDR1_LABEL))}if(f=="HW"){a.push(createAdvancedSearchParamObj(HW_HOST_NAME_Q_INPUT,HW_HOST_NAME_FID,HW_HOST_NAME_LABEL));a.push(createAdvancedSearchParamObj(HW_DESC_Q_INPUT,HW_DESC_FID,HW_DESC_LABEL));a.push(createAdvancedSearchParamObj(SERIAL_NUMBER_Q_INPUT,SERIAL_NUM_FID,SERIAL_NUMBER_LABEL));a.push(createAdvancedSearchParamObj(HW_ADDR_QUERY_SOURCE_FID,HW_ADDR_QUERY_SOURCE_FID,""))}a.push(createAdvancedSearchParamObj(CSI_ACCOUNT_ID_Q_INPUT,CSI_ACCOUNT_ID,""));submitQuery(b,a)}function createAdvancedSearchParamObj(b,a,f){var g=new Object();g.id=b;g.name=a;g.label=f;return g}function isHardwareSR(){return isHardwareSoftwareSR()}function isHardwareSoftwareSR(){isHard=false;var a=getEffectiveHwSwFieldVal();if(a!=undefined&&dojo.string.trim(a)!=""){if(a=="Hardware"){isHard=true}else{if(a=="Software"){isHard=false}else{if(a=="Both"){if(getSerialNumberId()!=""){isHard=true}else{isHard=false}}}}}return isHard}function isHardwareOrBoth(){var a=getEffectiveHwSwFieldVal();var b=(a!=undefined&&(a=="Hardware"||a=="Both"));return b}function isHardwareOnly(){var a=getEffectiveHwSwFieldVal();var b=a!=undefined&&a=="Hardware";return b}function getEffectiveHwSwFieldVal(){var a=undefined;var b=(isPartnerSR())?INDIRECT_HW_SW_FID:HW_SW_FID;if(dijit.byId(b)!=undefined){a=dijit.byId(b).getValue()}else{a=SRUtils.getCurrentSR()[b]}return a}function isPartnerSR(){if(dijit.byId(PARTNER_FLG_FID)){return dijit.byId(PARTNER_FLG_FID).checked}else{return SRUtils.getCurrentSR().partnerFlag=="true"}}function isTechnicalSR(){if(dijit.byId(SRTYPE_FID)){return dijit.byId(SRTYPE_FID).getValue()==TECHNICAL}else{return SRUtils.getCurrentSR().SRType==TECHNICAL}}function displayAlert(a){alert(a)}var HWSRUtil={};HWSRUtil.setHWConditions=function(){console.log("Inside HWSRUtil.setHWConditions");srLOVUtil.setProductDisplayProp();var a=isHardwareSR();var b=(a&&isTechnicalSR())?true:false;var f=(a)?"":"none";var g=(a)?false:true;if(srLOVUtil.isInternalCollab()&&serialNumberUtil.isEmptySN()){b=false}dojo.query(".HWDivArea").forEach(function(h){dojo.style(h,"display",f)});setConditionalReqFld(SERIAL_NUM_FID,b);setConditionalReqFld(HW_COUNTRY_FID,b);setConditionalReqFld(HW_CITY_FID,b);setConditionalReqFld(HW_POSTAL_CODE_FID,b);setConditionalReqFld(HW_ADDR1_FID,b);setConditionalReqFld(HW_TZ_FID,b);dojo.query(".SNClickArea").forEach(function(h){dojo.style(h,"display","")});HWSRUtil.setSR_HW_SW_Flag()};HWSRUtil.setSR_HW_SW_Flag=function(){if(dijit.byId(SR_HW_FLG_FID)){if(isTechnicalSR()){dijit.byId(SR_HW_FLG_FID).setAttribute("checked",isHardwareSR())}else{dijit.byId(SR_HW_FLG_FID).setAttribute("checked",HWSRUtil.isNonTechSRHardware())}}};HWSRUtil.setCollabSRCondition=function(){HWSRUtil.toggleHWAddrFlds({readOnly:true});if(dijit.byId(PERM_CHG_FLG_FID)){dijit.byId(PERM_CHG_FLG_FID).setAttribute("disabled",true)}if(dijit.byId(SERIAL_NUM_FID)){dijit.byId(SERIAL_NUM_FID).setAttribute("disabled",true)}dojo.query(".SNClickArea").forEach(function(a){dojo.style(a,"display","none")})};HWSRUtil.toggleHWAddrFlds=function(b){if(b==undefined||b==null){return}var a=[HW_COUNTRY_FID,HW_STATE_FID,HW_CITY_FID,HW_PROVINCE_FID,HW_COUNTY_FID,HW_POSTAL_CODE_FID,HW_ADDR1_FID,HW_ADDR2_FID,HW_ADDRRESS_INTEGRATIONID_FID];dojo.forEach(a,function(f){if(dijit.byId(f)){dojo.attr(dijit.byId(f).domNode,b)}if(b.readOnly==false){dojo.removeClass(dijit.byId(f).domNode,"readonly");dojo.removeClass(dijit.byId(f).domNode,"dijitReadOnly");dojo.removeClass(dijit.byId(f).domNode,"dijitComboBoxReadOnly");dojo.removeClass(dijit.byId(f).domNode,"dijitTextBoxReadOnly");dijit.byId(f).setAttribute("readOnly",false)}else{if(b.readOnly==true){dijit.byId(f).setAttribute("readOnly",true);dojo.addClass(dijit.byId(f).domNode,"readonly");dojo.addClass(dijit.byId(f).domNode,"dijitReadOnly");dojo.addClass(dijit.byId(f).domNode,"dijitComboBoxReadOnly");dojo.addClass(dijit.byId(f).domNode,"dijitTextBoxReadOnly")}}})};HWSRUtil.onchange_hwFlag=function(){};HWSRUtil.onChangePermHwAddrFlag=function(){var a=isHardwareSR();if(a&&dijit.byId(PERM_CHG_FLG_FID).checked&&(isEmptyVal(getFieldVal(HW_COUNTRY_FID))||isEmptyVal(getFieldVal(HW_CITY_FID))||isEmptyVal(getFieldVal(HW_POSTAL_CODE_FID))||isEmptyVal(getFieldVal(HW_ADDR1_FID))||isEmptyVal(getFieldVal(HW_TZ_FID)))){alert("Please provide all the required Hardware Address data for the SR - Country, City, Address Line1, Postal Code & Time Zone.")}};HWSRUtil.isNonTechSRHardware=function(){var b=false;var a=undefined;if(dijit.byId(PARENT_TEMPLATE_SEV1_TYPE)!=undefined&&dojo.string.trim(dijit.byId(PARENT_TEMPLATE_SEV1_TYPE).getValue())!=""){a=dijit.byId(PARENT_TEMPLATE_SEV1_TYPE).getValue()}else{if(dijit.byId(SEV1_TYPE)!=undefined&&dojo.string.trim(dijit.byId(SEV1_TYPE).getValue())!=""){a=dijit.byId(SEV1_TYPE).getValue()}else{var f=getEffectiveHwSwFieldVal();if(f!=undefined&&dojo.string.trim(f)!=""){a=(f=="Both")?"Software":f}}}if(a!=undefined&&dojo.string.trim(a)!=""&&a=="Hardware"){b=true}return b};var PartnerSRUtil={};PartnerSRUtil.setIndirectContactConditions=function(g){var a=(isPartnerSR())?true:false;setConditionalReqFld(REF_CSI_FID,a);setConditionalReqFld(INDIRECT_CUST_VFLG_FID,a);if(!isEmptyVal(g)){setFieldVal(INDIRECT_CUST_VFLG_FID,g)}var h=(a)?"":"none";if(dijit.byId(INDIRECT_CONT_PANE)){dojo.style(dijit.byId(INDIRECT_CONT_PANE).domNode,"display",h)}else{var b=PartnerSRUtil.getFldsArr();var f=PartnerSRUtil.getReadOnlyFldsArr();dojo.forEach(b,function(l){if(dijit.byId(l)&&!f.contains(l)){dijit.byId(l).setAttribute("readOnly",!(a));var m=dijit.byId(l).domNode;if(!(a)){dojo.addClass(m,"dijitReadOnly");dojo.addClass(m,"dijitComboBoxReadOnly");dojo.addClass(m,"dijitTextBoxReadOnly")}else{dojo.removeClass(m,"dijitReadOnly");dojo.removeClass(m,"dijitComboBoxReadOnly");dojo.removeClass(m,"dijitTextBoxReadOnly")}}})}PartnerSRUtil.handleCustVisibilityDisplay(isPartnerSR())};PartnerSRUtil.handleCustVisibilityDisplay=function(b){var a=(b)?true:false;if(!a){return}if(srLOVUtil.isInternalCollab()){a=false}setConditionalReqFld(INDIRECT_CUST_VFLG_FID,a);if(dijit.byId(INDIRECT_CUST_VFLG_FID)){dijit.byId(INDIRECT_CUST_VFLG_FID).setAttribute("readOnly",!(a));var f=dijit.byId(INDIRECT_CUST_VFLG_FID).domNode;if(!(a)){dojo.addClass(f,"dijitReadOnly");dojo.addClass(f,"dijitComboBoxReadOnly");dojo.addClass(f,"dijitTextBoxReadOnly")}else{dojo.removeClass(f,"dijitReadOnly");dojo.removeClass(f,"dijitComboBoxReadOnly");dojo.removeClass(f,"dijitTextBoxReadOnly")}}};PartnerSRUtil.onchange_partnerFlag=function(a){var b=(a==CREATE_OP||(a==UPDATE_OP&&headerDataAsJson[INDIRECT_CUST_VFLG_FID]==""))?"No Access":"";PartnerSRUtil.setIndirectContactConditions(b);setFieldVal("csiPartnerFlag",isPartnerSR())};PartnerSRUtil.hasAccessForIndirectCont=function(){var a=(isPartnerSR()&&headerDataAsJson[INDIRECT_CUST_VFLG_FID]=="No Access")?false:true;return a};var ENTER_CSI="Please enter CSI first.";PartnerSRUtil.setRefCSILov=function(h,m){if(h=="update"&&getInitMode()){return}var a=REF_CSI_FID;var g=new Array();var b=REF_CSI_FID+","+REF_CSI_ID_FID+","+INDIRECT_HW_FLG_FID+","+INDIRECT_HW_SW_FID+","+INDIRECT_ACCT_FID+","+INDIRECT_ACCT_ID_FID+","+INDIRECT_LAST_FID;var s=b.split(",");var l=getFieldVal(CSI_ID);if(isEmptyVal(l)){alert(ENTER_CSI);PartnerSRUtil.clearIndirectCustFlds();return}var q=new Object();q.lookupId=CSI_ID;q.lookupValue=(dijit.byId(CSI_ID))?l:"";g.push(q);var q=new Object();q.lookupId=SRTYPE_FID;q.lookupValue=(dijit.byId(SRTYPE_FID))?dijit.byId(SRTYPE_FID).getValue():"";g.push(q);var q=new Object();q.lookupId=SR_OP_PARAM;q.lookupValue=(h!=undefined)?h:"";g.push(q);var o="";if(m!=undefined&&m){if(dijit.byId(REF_CSI_FID)&&dijit.byId(REF_CSI_FID).getValue()!=""){o=REF_CSI_FID+":"+dijit.byId(REF_CSI_FID).getValue();var p=getFieldVal(CSI);if(p==getFieldVal(REF_CSI_FID)){return PartnerSRUtil.setRefCSISameAsPrimary(h)}}}var f="PartnerSRUtil.refCSIOnSelectHandler('"+h+"')";setLovDialog(a,g,o,b,"Reference CSI",f)};var refCsiCbFunc;var refCsiCancelFunc;var REF_CSI_SN_MISMATCH_MSG="The Serial Number stamped on the SR is not associated to the selected Reference CSI. Click Ok to select Reference CSI and 'Cancel' to select a different Reference CSI.";PartnerSRUtil.refCSIOnSelectHandler=function(h,l){if(!isPartnerSR()){return}var a=REF_CSI_FID+","+REF_CSI_ID_FID+","+INDIRECT_HW_FLG_FID+","+INDIRECT_HW_SW_FID+","+INDIRECT_ACCT_FID+","+INDIRECT_ACCT_ID_FID+","+INDIRECT_LAST_FID;var f=a.split(",");l=(l==undefined||l==null)?getSelectedLOVRow():l;if(l!=null){var b=PartnerSRUtil.invokeRefCSIValidation(f,l,h);if(b==FAILURE_STATUS){return}PartnerSRUtil.fillRefCSIData(f,l);var g=getFieldVal(CSI_ID);if(g!=getFieldVal(REF_CSI_FID)){PartnerSRUtil.handleIndirectCustSRHIs()}CSIUtil.resetCSIRelatedFlds(h)}};PartnerSRUtil.setRefCSISameAsPrimary=function(h){PartnerSRUtil.clearIndirectContFlds();var a=REF_CSI_FID+","+REF_CSI_ID_FID+","+INDIRECT_HW_FLG_FID+","+INDIRECT_HW_SW_FID+","+INDIRECT_ACCT_FID+","+INDIRECT_ACCT_ID_FID+","+INDIRECT_LAST_FID+","+INDIRECT_FIRST_FID+","+INDIRECT_CONT_ID_FID+","+INDIRECT_PHONE_FID+","+INDIRECT_EMAIL_FID+","+INDIRECT_TZ_FID+","+INDIRECT_TZ_ID_FID;var f=a.split(",");var g=PartnerSRUtil.createRefCSIRec(true);var b=PartnerSRUtil.invokeRefCSIValidation(f,g,h);if(b==FAILURE_STATUS){return}PartnerSRUtil.fillRefCSIData(f,g);CSIUtil.resetCSIRelatedFlds(h);return};PartnerSRUtil.invokeRefCSIValidation=function(a,h,f){if(f==UPDATE_OP&&h[INDIRECT_HW_SW_FID]=="Software"){var g=SRUtils.checkForOpenFSTask("Software REF CSI");if(g!=null&&g.opStatus==FAILURE_STATUS){window.continueFunc="";window.cancelFunc=function(){resetSRHeader()};displayErrors(g,window.continueFunc,window.cancelFunc);return false}}var b=(dijit.byId("srType"))?dijit.byId("srType").getValue():TECHNICAL;h.isIndirect=true;var g=CSIUtil.validateCSI(h,b);if(g!=null&&g.opStatus==FAILURE_STATUS){window.continueFunc=function(){return PartnerSRUtil.startValidateRefCSISNRelation(a,h,f)};window.cancelFunc=function(){PartnerSRUtil.cleanSNOnRefCSIValidationError(h,f);setFieldVal(REF_CSI_FID,"");return false};displayErrors(g,window.continueFunc,window.cancelFunc);return false}return PartnerSRUtil.startValidateRefCSISNRelation(a,h,f)};PartnerSRUtil.cleanSNOnRefCSIValidationError=function(g,f){if(!serialNumberUtil.isEmptySN()){if(f==UPDATE_OP){var a=serialNumberUtil.getSNDetails();a.addCallback(function(h){if(h[SERIAL_NUM_CSI_FID]==g[REF_CSI_FID]){serialNumberUtil.clearSNFldsData()}})}else{var b=serialNumberUtil.getSNRecord();if(b[SERIAL_NUM_CSI_FID]==g[REF_CSI_FID]){serialNumberUtil.clearSNFldsData()}}}};PartnerSRUtil.startValidateRefCSISNRelation=function(b,h,g){if(!serialNumberUtil.isEmptySN()){if(g==UPDATE_OP){var a=serialNumberUtil.getSNDetails();a.addCallback(function(l){return PartnerSRUtil.validateRefCSISNRelation(b,h,l[SERIAL_NUM_FID],g)})}else{var f=serialNumberUtil.getSNRecord();return PartnerSRUtil.validateRefCSISNRelation(b,h,f,g)}}return SUCCESS_STATUS};PartnerSRUtil.validateRefCSISNRelation=function(a,g,b,f){if(b[SERIAL_NUM_CSI_FID]!=g[REF_CSI_FID]){rData=getDisplayMessageObj(REF_CSI_SN_MISMATCH_MSG,WARNING);window.refCsiCbFunc=function(){PartnerSRUtil.postRefCSISNValidationHandler(a,g,b,f)};window.refCsiCancelFunc=function(){PartnerSRUtil.onCancel(g)};rData.continueLabel="OK";rData.cancelLabel="Cancel";displayErrors(rData,window.refCsiCbFunc,window.refCsiCancelFunc);return FAILURE_STATUS}return SUCCESS_STATUS};PartnerSRUtil.postRefCSISNValidationHandler=function(a,g,b,f){serialNumberUtil.clearSNFldsData();PartnerSRUtil.fillRefCSIData(a,g);CSIUtil.resetCSIRelatedFlds(f)};PartnerSRUtil.fillRefCSIData=function(a,f){var b=REF_CSI_FID+"_lovHidden";if(f[REF_CSI_FID]!=undefined){setFieldVal(b,f[REF_CSI_FID])}setAndCloseLovDialog(a,f);HWSRUtil.setHWConditions();srLOVUtil.setSerialNumberProp();srLOVUtil.evaluateProductProp()};PartnerSRUtil.onCancel=function(b){var a=getFieldVal(REF_CSI_FID);if(b!=undefined&&a==b[REF_CSI_FID]){PartnerSRUtil.clearIndirectCustFlds()}return};PartnerSRUtil.getFldsArr=function(){return[REF_CSI_FID,REF_CSI_ID_FID,INDIRECT_ACCT_FID,INDIRECT_ACCT_ID_FID,INDIRECT_LAST_FID,INDIRECT_FIRST_FID,INDIRECT_CONT_ID_FID,INDIRECT_PHONE_FID,INDIRECT_EMAIL_FID,INDIRECT_TZ_FID,INDIRECT_TZ_ID_FID,INDIRECT_CUST_VFLG_FID,INDIRECT_HW_FLG_FID,INDIRECT_HW_SW_FID]};PartnerSRUtil.getReadOnlyFldsArr=function(){return[INDIRECT_ACCT_FID,INDIRECT_FIRST_FID,INDIRECT_TZ_FID]};PartnerSRUtil.clearIndirectCustFlds=function(){var b=getFieldVal(REF_CSI_ID_FID);var a=[REF_CSI_FID,REF_CSI_ID_FID,INDIRECT_ACCT_FID,INDIRECT_ACCT_ID_FID,INDIRECT_HW_FLG_FID,INDIRECT_HW_SW_FID,INDIRECT_LAST_FID];dojo.forEach(a,function(f){if(dijit.byId(f)&&dojo.byId(f).type=="checkbox"){dijit.byId(f).setAttribute("checked",false)}else{setFieldVal(f,"")}});HWSRUtil.setHWConditions();PartnerSRUtil.clearIndirectContFlds();if(!isEmptyVal(b)){PartnerSRUtil.handleIndirectCustSRHIs()}};PartnerSRUtil.handleIndirectCustSRHIs=function(){var a=self.location.href;var b=(a!=undefined&&(a.indexOf("SRCreate.jspx")!=-1))?CREATE_OP:UPDATE_OP;if(b==CREATE_OP){setSHILOV(false)}else{if(b==UPDATE_OP){showSHI(false)}}resetHandInstAck(b)};PartnerSRUtil.clearIndirectContFlds=function(){var a=[INDIRECT_LAST_FID,INDIRECT_FIRST_FID,INDIRECT_CONT_CSI_STATUS,INDIRECT_SR_VIEW_FLAG,INDIRECT_CONT_ID_FID,INDIRECT_PHONE_FID,INDIRECT_EMAIL_FID,INDIRECT_TZ_FID,INDIRECT_TZ_ID_FID];dojo.forEach(a,function(b){setFieldVal(b,"")})};PartnerSRUtil.getRefCSIDetails=function(){var b=getFieldVal(REF_CSI_ID_FID);var a=getFieldVal(CSI_ID);return dojo.xhrGet({url:"../../../SRPickLovRequest",content:{action:"getRefCSIRec",refCSIId:b,partnerCSIId:a},preventCache:true,handleAs:"json",load:function(f){if(f!=undefined&&!isObjectErroneous(f)&&f[REF_CSI_FID]!=undefined){return f[REF_CSI_FID]}return null},error:function(f){return null},timeout:200000})};PartnerSRUtil.createRefCSIRec=function(b){var a={};a[REF_CSI_FID]=(b)?getFieldVal(CSI):getFieldVal(REF_CSI_FID);a[REF_CSI_ID_FID]=(b)?getFieldVal(CSI_ID):getFieldVal(REF_CSI_ID_FID);a[INDIRECT_ACCT_ID_FID]=(b)?getFieldVal(CSI_ACCOUNT_ID):getFieldVal(INDIRECT_ACCT_ID_FID);a[INDIRECT_ACCT_FID]=(b)?getFieldVal(CSI_ACCOUNT_NAME):getFieldVal(INDIRECT_ACCT_FID);a[INDIRECT_HW_FLG_FID]=(b)?getFieldVal(HW_FLG_FID):getFieldVal(INDIRECT_HW_FLG_FID);a[INDIRECT_HW_SW_FID]=(b)?getFieldVal(HW_SW_FID):getFieldVal(INDIRECT_HW_SW_FID);a[INDIRECT_LAST_FID]=(b)?getFieldVal(CONTACT_LAST):getFieldVal(INDIRECT_LAST_FID);a[INDIRECT_FIRST_FID]=(b)?getFieldVal(CONTACT_FIRST):getFieldVal(INDIRECT_FIRST_FID);a[INDIRECT_CONT_ID_FID]=(b)?getFieldVal(CONTACT_ID):getFieldVal(INDIRECT_CONT_ID_FID);a[INDIRECT_PHONE_FID]=(b)?getFieldVal(CONTACT_PHONE):getFieldVal(INDIRECT_PHONE_FID);a[INDIRECT_EMAIL_FID]=(b)?getFieldVal(CONTACT_EMAIL):getFieldVal(INDIRECT_EMAIL_FID);a[INDIRECT_TZ_FID]=(b)?getFieldVal(CONTACT_TZ):getFieldVal(INDIRECT_TZ_FID);a[INDIRECT_TZ_ID_FID]=(b)?"":getFieldVal(INDIRECT_TZ_ID_FID);return a};PartnerSRUtil.validateIndirectContactVisibility=function(h,g){var f=getFieldVal(INDIRECT_CUST_VFLG_FID);var b=getPageSytemParamValue("SRM_INDIRECT_CSI_CONTACT_STATUS_V");var a=(b!=undefined&&b!=null)?b.split(","):new Array();if((!a.contains(h)||g!=true)&&f!=""&&f!="No Access"){PartnerSRUtil.setIndirectContactConditions("No Access");var l=getDisplayMessageObj("Warning: You have selected to display this SR to a Indirect Contact who does not have privilege to view it on My Oracle Support. Please keep the [Indirect Customer Visibility] field to 'No Access' or select a different Indirect Contact.",ERROR);displayErrors(l);return false}return true};function setIndirectContLov(b){var h=INDIRECT_LAST_FID;var m=new Array();var l=(dijit.byId(INDIRECT_ACCT_ID_FID))?dijit.byId(INDIRECT_ACCT_ID_FID).getValue():"";var f=(dijit.byId(REF_CSI_ID_FID))?dijit.byId(REF_CSI_ID_FID).getValue():"";if(isEmptyVal(l)||isEmptyVal(f)){displayAlert(PICK_REF_CSI_MSG);return}var o=new Object();o.lookupId=INDIRECT_ACCT_ID_FID;o.lookupValue=l;m.push(o);var o=new Object();o.lookupId=REF_CSI_ID_FID;o.lookupValue=f;m.push(o);var g="";if(b!=undefined&&b){if(dijit.byId(INDIRECT_LAST_FID)&&dijit.byId(INDIRECT_LAST_FID).getValue()!=""){g=INDIRECT_LAST_FID+dijit.byId(INDIRECT_LAST_FID).getValue()}}var a=INDIRECT_CONT_ID_FID+","+INDIRECT_LAST_FID+","+INDIRECT_FIRST_FID+","+INDIRECT_PHONE_FID+","+INDIRECT_EMAIL_FID+","+INDIRECT_TZ_FID+","+INDIRECT_TZ_ID_FID+","+INDIRECT_CONT_CSI_STATUS+","+INDIRECT_SR_VIEW_FLAG;setLovDialog(h,m,g,a,"Indirect Contact",null)}function setHWTZLov(b){var g="timezone";var h=new Array();var f="";if(b!=undefined&&b){if(dijit.byId(HW_TZ_FID)&&dijit.byId(HW_TZ_FID).getValue()!=""){f="contactTimeZone:"+dijit.byId(HW_TZ_FID).getValue()}}var a="";setLovDialog(g,h,f,a,"TimeZone","onSelectHWTZ()")}function onSelectHWTZ(){var a=getSelectedLOVRow();if(a!=null){if(dijit.byId("HWTZ_lovHidden")){dijit.byId("HWTZ_lovHidden").setValue(a.contactTimeZone)}dijit.byId(HW_TZ_FID).setValue(a.contactTimeZone);if(dijit.byId(HW_TZ_ID_FID)){dijit.byId(HW_TZ_ID_FID).setValue(a.contactTimeZoneId)}}closeLOVdialog()}function cleanPlatformFld(){setFieldVal(PLATFORM_DESC,"")}function cleanConfigurationFld(){console.debug("cleanConfigurationFld...");setFieldVal(FLD_CONFIGURATION_NAME,"")}function cleanHostFld(){console.debug("cleanHostFld...");setFieldVal(FLD_HOST_ID,"");setFieldVal(FLD_HOST_NAME,"");setFieldVal(FLD_CONFIG_LEVEL,"")}function cleanPlatformVersionFld(){console.debug("cleanPlatformVersionFld...");setFieldVal(PLATFORM_VERSION,"")}var contactFlds=[{id:"contactLastName_lovHidden",required:false,readOnly:false,headerPropName:"LastName"},{id:"contactId",required:true,readOnly:false,headerPropName:"contactId"},{id:"contactLastName",required:true,readOnly:false,headerPropName:"LastName"},{id:"contactFirstName",required:false,readOnly:true,headerPropName:"FirstName"},{id:"contactPhone",required:false,readOnly:false,headerPropName:"ContactPhone"},{id:"contactEmail",required:false,readOnly:false,headerPropName:"ContactEmail"},{id:"contactTimeZone",required:false,readOnly:true,headerPropName:"ContactTimeZone"},{id:"contactMethod",required:false,readOnly:false,headerPropName:"SRContactMethod"},{id:"country",required:false,readOnly:true,headerPropName:"Country"},{id:"alternateContactLastName_lovHidden",required:false,readOnly:false,headerPropName:"AltContactLastName"},{id:"alternateContactId",required:false,readOnly:false,headerPropName:"alternateContactId"},{id:"alternateContactLastName",required:false,readOnly:false,headerPropName:"AltContactLastName"},{id:"alternateContactFirstName",required:false,readOnly:true,headerPropName:"AltContactFirstName"},{id:"alternateContactPhone",required:false,readOnly:true,headerPropName:"AltContactPhone"},{id:"alternateContactEmail",required:false,readOnly:true,headerPropName:"AltContactEmail"},{id:"alternateContactTimeZone",required:false,readOnly:true,headerPropName:"AltContactTimeZone"},{id:"indirectContLast_lovHidden",required:false,readOnly:false,headerPropName:"indirectContLast"},{id:"indirectContId",required:false,readOnly:false,headerPropName:"indirectContId"},{id:"indirectContLast",required:false,readOnly:false,headerPropName:"indirectContLast"},{id:"indirectContFirst",required:false,readOnly:true,headerPropName:"indirectContFirst"},{id:"indirectContPhone",required:false,readOnly:true,headerPropName:"indirectContPhone"},{id:"indirectContEmail",required:false,readOnly:true,headerPropName:"indirectContEmail"},{id:"indirectContTZ",required:false,readOnly:true,headerPropName:"indirectContTZ"},{id:"indirectContTZId",required:false,readOnly:true,headerPropName:"indirectContTZId"}];srLOVUtil.onchange_srClass=function(l,h){var q=getFieldVal("srClass");var m=getFieldVal("collabType");srLOVUtil.loadCollabType(l,m);var b=false;var s=false;if(l==CREATE_OP&&q=="External Collaboration"){var o=headerDataAsJson[CSI_ID];var g=headerDataAsJson.refCSIId;var a=getFieldVal(CSI_ID);var f=getFieldVal(REF_CSI_ID_FID);b=(o!=a)?false:true;s=(g!=f)?false:true}dojo.forEach(contactFlds,function(x){var y=(q=="GCS Collaboration")?false:x.required;var B=(q=="GCS Collaboration")?"none":"";var C=(q=="GCS Collaboration")?true:x.readOnly;var w=x.id+"Row";var v=(q=="GCS Collaboration"||(q!="GCS Collaboration"&&!b))?"":headerDataAsJson[x.headerPropName];if(x.id.startsWith("indirect")){B=(headerDataAsJson.partnerFlag==="true")?B:"none";if(!s){v=""}}if((q=="GCS Collaboration"&&l==UPDATE_OP&&h===false&&dojo.byId(w)!=undefined)){B="";var z=C;dijit.byId(x.id).setAttribute("disabled",z);var u=dojo.query("a,img",dojo.byId(w));if(u!=undefined){for(var A=0;A<u.length;A++){u[A].style.display="none"}}}if(dijit.byId(x.id)){dijit.byId(x.id).setAttribute("required",y);dijit.byId(x.id).setAttribute("readOnly",C)}setFieldVal(dijit.byId(x.id),v);if(dojo.byId(w)){dojo.style(dojo.byId(w),"display",B)}});HWSRUtil.setHWConditions();if(headerDataAsJson!=undefined&&l==CREATE_OP){var p=(headerDataAsJson.partnerFlag==="true")?true:false;PartnerSRUtil.handleCustVisibilityDisplay(p);if(!srLOVUtil.isInternalCollab()&&headerDataAsJson.indirectCustV!=undefined){setFieldVal("indirectCustV",headerDataAsJson.indirectCustV)}else{setFieldVal("indirectCustV","No Access")}}};srLOVUtil.isInternalCollab=function(){var a=getFieldVal("srClass");if(a==="GCS Collaboration"){return true}return false};srLOVUtil.isExternalCollab=function(){var a=getFieldVal("srClass");if(a==="External Collaboration"){return true}return false};srLOVUtil.isExadataSN=function(){var a=getFieldVal(SERIAL_NUM_PROD_CLASS);if(a!=undefined&&dojo.string.trim(a)!=""){return true}return false};srLOVUtil.setProductDisplayProp=function(){var f=getEffectiveHwSwFieldVal();var a=false;a=(isHardwareSR()&&f!=undefined&&dojo.string.trim(f)!="");if(!a&&(f==undefined||dojo.string.trim(f)=="")&&isPartnerSR()&&!isMainCsiSoftwareOrBoth()){a=true}var b=(a)?"none":"";var g=(a)?"":"none";b=(srLOVUtil.isExadataSN())?"":b;g=(srLOVUtil.isExadataSN())?"none":g;b=(srLOVUtil.isInternalCollab()&&serialNumberUtil.isEmptySN())?"":b;g=(srLOVUtil.isInternalCollab()&&serialNumberUtil.isEmptySN())?"none":g;dojo.query(".SWProdArea").forEach(function(h){dojo.style(h,"display",b)});dojo.query(".HWProdArea").forEach(function(h){dojo.style(h,"display",g)})};var serialNumberPropMethodCtr=0;var evaluateProductPropMethodCtr=0;srLOVUtil.setSerialNumberProp=function(a){if(a!=undefined&&a==true){if(dijit.byId(SERIAL_NUM_FID)!=undefined){dijit.byId(SERIAL_NUM_FID).setDisabled(false)}if(dojo.byId(SERIAL_NUM_SEARCH_ICON_FID)!=undefined){dojo.style(dojo.byId(SERIAL_NUM_SEARCH_ICON_FID),"display","")}if(dojo.byId(SERIAL_NUM_INFO_FID)!=undefined){dojo.style(dojo.byId(SERIAL_NUM_INFO_FID),"display","")}return}if(dijit.byId(SERIAL_NUM_FID)!=undefined){var b=getEffectiveHwSwFieldVal();if((!isHardwareOrBoth()&&b!=undefined&&dojo.string.trim(b)!="")||(!isHardwareOrBoth()&&b!=undefined&&dojo.string.trim(b)==""&&isPartnerSR()&&!isMainCsiHardwareOrBoth())){dijit.byId(SERIAL_NUM_FID).setDisabled(true);if(dojo.byId(SERIAL_NUM_SEARCH_ICON_FID)!=undefined){dojo.style(dojo.byId(SERIAL_NUM_SEARCH_ICON_FID),"display","none")}if(dojo.byId(SERIAL_NUM_INFO_FID)!=undefined){dojo.style(dojo.byId(SERIAL_NUM_INFO_FID),"display","none")}}else{dijit.byId(SERIAL_NUM_FID).setDisabled(false);if(dojo.byId(SERIAL_NUM_SEARCH_ICON_FID)!=undefined){dojo.style(dojo.byId(SERIAL_NUM_SEARCH_ICON_FID),"display","")}if(dojo.byId(SERIAL_NUM_INFO_FID)!=undefined){dojo.style(dojo.byId(SERIAL_NUM_INFO_FID),"display","")}}}};srLOVUtil.evaluateProductProp=function(a){if(a!=undefined&&a==true){srLOVUtil.setProductProp(false);return}if(isHardwareOnly()){if(getSerialNumberId()==""){srLOVUtil.setProductProp(true)}else{srLOVUtil.setProductProp(false)}}else{srLOVUtil.setProductProp(false)}};srLOVUtil.setProductProp=function(f){var a=dojo.query(".SWProdArea");var b=false;if(a!=undefined&&a!=null&&a.length>0){if(a[0].style!=undefined&&a[0].style.display!=undefined&&dojo.string.trim(a[0].style.display.toLowerCase())!="none"){b=true}}if(b){srLOVUtil.enableDisablePicklist("productDescription",f)}else{srLOVUtil.enableDisablePicklist("productDescription",f,"#productDescriptionRow img.HWProdArea")}srLOVUtil.enableDisablePicklist("productVersion",f);srLOVUtil.enableDisablePicklist("productLine",f);srLOVUtil.enableDisablePicklist("componentDescription",f);srLOVUtil.enableDisablePicklist("subcomponentDescription",f);srLOVUtil.enableDisablePicklist("SRProductClass",f);srLOVUtil.enableDisablePicklist("platformDescription",f);srLOVUtil.enableDisablePicklist("platformVersionDescription",f)};srLOVUtil.enableDisablePicklist=function(g,b,f){if(dijit.byId(g)){dijit.byId(g).setDisabled(b)}if(f==undefined){f="#"+g+"Row a.searchIcon"}var a=dojo.query(f);if(a!=undefined){a.forEach(function(h){dojo.style(h,"display",(b)?"none":"")})}};srLOVUtil.loadCollabType=function(b,a){var g=dijit.byId("srClass");var f=getFieldVal("srClass");if(b==CREATE_OP&&f.indexOf("Collaboration")!=-1){var h={url:"../../../SRHeaderRequest",content:{parentValue:f,parentType:"SR_TYPE_CD",lov:"COLLAB_TYPE",action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(l){if(l!=undefined&&l.items!=undefined&&l.items.length>0){dijit.byId("collabType").store=new dojo.data.ItemFileReadStore({data:l});if(!isEmptyVal(a)){dijit.byId("collabType").setValue("");dijit.byId("collabType").setDisplayedValue("");dijit.byId("collabType").store.fetch({onComplete:function(m,o){dojo.forEach(m,function(p){if(p.id==a){dijit.byId("collabType").setValue(a)}})}})}}},error:function(m){var l=getDisplayMessageObj("Load error occurred for Collaboration Type List of values. Operation failed or timed out.",2);displayErrors(l);console.debug("Load error occurred for Collaboration Type List of values. Operation failed or timed out.",m)},timeout:60000};dojo.xhrGet(h)}};function getHostName(){console.debug("load host name");var b=(dijit.byId("hostId")!=undefined)?dijit.byId("hostId").getValue():"";var f=(dijit.byId("configuration")!=undefined)?dijit.byId("configuration").getValue():"";if(b==""||!(dijit.byId("hostName"))){return}var a={url:"../../../SRRequest",content:{action:"getHostName",configId:f,hostId:b},handleAs:"json",load:function(g){if(g!=undefined&&g.hostName!=undefined){dijit.byId("hostName").setValue(g.hostName);if(dojo.byId("hostViewerLink")){dojo.style(dojo.byId("hostViewerLink"),"display","")}}},error:function(g){console.error("An error occurred: ",g)},timeout:60000};dojo.xhrGet(a)}var SRCursorStyleUtil={};SRCursorStyleUtil.addOnMouseOver=function(a){var b=new Array();b=dojo.query("input[readOnly]",a);dojo.forEach(b,function(o){var h=dojo.attr(o,"id");if(h==null){h=dojo.attr(o,"name")}var m=dojo.attr(o,"readOnly");var l=dojo.attr(o,"disabled");var g=dojo.attr(o,"type");var f=dijit.byId(h);if(f!=undefined&&f!=null&&g!="checkbox"&&!l&&m){dojo.connect(dojo.byId(h),"onmouseover",function(){SRCursorStyleUtil.toggleCursor(h)})}})};SRCursorStyleUtil.toggleCursor=function(f){var a=dijit.byId(f);var b=dojo.byId(f);if(b==undefined||b==null){return}if(b.readOnly){b.style.cursor="not-allowed"}else{b.style.cursor="text"}};var SREXA={};SREXA.NONE_OPTION="None of the above";SREXA.context={};SREXA.operation=null;SREXA.init=function(a){SREXA.context=a||{};return SREXA};SREXA.verifyIsEXA=function(b){if(typeof(b)=="object"){SREXA.context.trigger=b.trigger}if(SREXA.operation===null){if(window.location.href.indexOf("SRTechnical.jspx")!=-1){SREXA.operation="update"}else{if(window.location.href.indexOf("SRCreate.jspx")!=-1){SREXA.operation="create"}}}if("create"===SREXA.operation){if(initMode){console.log("init mode create...");return}if("GCS Collaboration"==dijit.byId("srClass").getValue()){console.log("never show for GCS Collab...");return}if(isHardwareSR()||!isTechnicalSR()){SREXA.clean()}else{SREXA.start()}}else{if("update"===SREXA.operation){if(initMode){console.log("init mode update...");return}var a=(dijit.byId("MaximizedSRHeaderDialog")!=null)?true:false;if(SRUtils.isMigrationFromSoftwareToHardware()){SREXA.clean(true)}else{if(isHardwareSR()&&!isTechnicalSR()){if(dojo.byId("SRProductClassReadOnlyRow")){dojo.style(dojo.byId("SRProductClassReadOnlyRow"),{display:"none"})}if(dojo.byId("SRProductClassRow")){dojo.style(dojo.byId("SRProductClassRow"),{display:"none"})}}else{if(isHardwareSR()&&isTechnicalSR()){if(dojo.byId("SRProductClassReadOnlyRow")){dojo.style(dojo.byId("SRProductClassReadOnlyRow"),{display:""})}}else{if(!isHardwareSR()&&isTechnicalSR()){if(dojo.byId("SRProductClassRow")){dojo.style(dojo.byId("SRProductClassRow"),{display:""})}}else{if(dojo.byId("SRProductClassReadOnlyRow")){dojo.style(dojo.byId("SRProductClassReadOnlyRow"),{display:"none"})}if(dojo.byId("SRProductClassRow")){dojo.style(dojo.byId("SRProductClassRow"),{display:"none"})}}}}}}}};SREXA.start=function(){console.log("SREXA.start: ",SREXA.context);if("create"===SREXA.operation){var l=true;var g=true;var h=null;var b=false;if(isPartnerSR()){var f=getFieldVal("csi");var a=getFieldVal("refCSI");if(isEmptyVal(f)||isEmptyVal(a)){l=false}else{if(f==a){b=true}else{if("email"===SREXA.context.trigger){SREXA.context.trigger=undefined;l=false;g=false}b=false}}}else{b=true}if(b){if(l&&isEmptyVal(getFieldVal(CONTACT_EMAIL))){l=false}h="../../../SRRequest?action=query_sr_product_class&contact="+getFieldVal(CONTACT_EMAIL)}else{h="../../../SRHeaderRequest?action=loadlov&lov=SR_PROD_CLASS"}if(g===true){SREXA.clean()}if(l!==true){return}dijit.byId("SRProductClass").store=new dojo.data.ItemFileReadStore({url:h,urlPreventCache:true});dijit.byId("SRProductClass").store.fetch({onComplete:function(m,o){dojo.byId("SRProductClassLOVSize").value=m.length;if(m.length==0){dojo.style(dojo.byId("SRProductClassRow"),{display:"none"})}else{if(true===SREXA.context.copyData){dijit.byId("SRProductClass").setValue(headerDataAsJson.SRProductClass)}else{dijit.byId("SRProductClass").setValue("");dijit.byId("SRProductClass").setDisplayedValue("")}dojo.style(dojo.byId("SRProductClassRow"),{display:""})}},onError:function(o){var m=getDisplayMessageObj("Error fetching the SR Product Class LOV",ERROR);displayErrors(m);console.error("Error fetching the SR Product Class LOV")}})}};SREXA.clean=function(a){if(true===a){if(dojo.byId("SRProductClassRow")){dojo.style(dojo.byId("SRProductClassRow"),{display:"none"});dijit.byId("SRProductClass").setValue("");dijit.byId("SRProductClass").setDisplayedValue("")}if(dojo.byId("SRProductClassReadOnlyRow")){dojo.style(dojo.byId("SRProductClassReadOnlyRow"),{display:"none"})}}else{if("create"===SREXA.operation){dojo.style(dojo.byId("SRProductClassRow"),{display:"none"});dijit.byId("SRProductClass").store=new dojo.data.ItemFileReadStore({data:{items:[],identifier:"id"}});dijit.byId("SRProductClass").setValue("");dijit.byId("SRProductClass").setDisplayedValue("");dojo.byId("SRProductClassLOVSize").value=0}}dojo.removeClass("SRProductClassRow","SRProductClass")};SREXA.onChangeSRProductClass=function(){var a=dijit.byId("SRProductClass");SREXA.highlightOrNotSRProductClassLabel(a.getValue(),"SRProductClassLabel")};SREXA.highlightOrNotSRProductClassLabel=function(a,b){if(isEmptyVal(a)||(a==SREXA.NONE_OPTION)){dojo.removeClass(b,"SRProductClass")}else{dojo.addClass(b,"SRProductClass")}};SREXA.highlightReadonlyProductClassLabel=function(a){if(dojo.byId("SRProductClassReadonlyLabel")){SREXA.highlightOrNotSRProductClassLabel(a,"SRProductClassReadonlyLabel")}};SREXA.onChangeContactEmail=function(){SREXA.context.trigger="email";SREXA.verifyIsEXA()};SREXA.initCSS=function(){OrionParameters.getParameter("SRM_SR_PRODUCT_CLASS_STYLE",true,function(){var a=document.createElement("style");a.setAttribute("type","text/css");var b=".SRProductClass {"+OrionParameters.values.SRM_SR_PRODUCT_CLASS_STYLE+"}";if(a.styleSheet){a.styleSheet.cssText=b}else{a.innerHTML=b}document.body.appendChild(a)})};var SRCloud={};SRCloud.context={};SRCloud.init=function(a){SRCloud.context=a||{};return SRCloud};SRCloud.evaluateForm=function(){try{if(dijit.byId("SRProductSubscription")){var h=dijit.byId("csiId").getValue();var g=dijit.byId("product").getValue();var b=headerDataAsJson.SRProductSubscriptionId;var a=(window.location.href.indexOf("SRCreate.jspx")!=-1)?true:false;if(h&&g&&SRCloud.isCloudProductSelected()&&!isHardwareSR()&&isTechnicalSR()){console.log("querying subscriptions");var l={action:"query_csi_product_subscriptions",csiId:h,productId:g,cloudSubscriptionId:b,isSRCreateOperation:a};var m={url:"/oip/faces/SRRequest",content:l,handleAs:"json",preventCache:true,sync:true,timeout:60000,load:function(s){if(isObjectErroneous(s)){dijit.byId("pleasewait").hide();displayErrors(s)}else{initSubscription=true;SRCloud.csiProductSubscriptionObjMap=s.csiProductSubscriptionObjMap;dijit.byId("SRProductSubscription").store=new dojo.data.ItemFileReadStore({data:s});dojo.byId("SubscriptionLOVSize").value=s.items.length;if(s.items.length==0){SRCloud.csiProductSubscriptionObjMap={};SRCloud.resetFormElements()}else{SREXA.clean(true);if(dojo.byId("SRProductSubscriptionRow")){dojo.style(dojo.byId("SRProductSubscriptionRow"),{display:""})}if(dojo.byId("SRProductSubscriptionDatacenterRow")){dojo.style(dojo.byId("SRProductSubscriptionDatacenterRow"),{display:""})}if(dojo.byId("SRProductSubscriptionServiceVersionRow")){dojo.style(dojo.byId("SRProductSubscriptionServiceVersionRow"),{display:""})}if(dojo.byId("SRProductSubscriptionShortNameRow")){dojo.style(dojo.byId("SRProductSubscriptionShortNameRow"),{display:""})}if(dojo.byId("SRProductSubscriptionDBNameRow")){dojo.style(dojo.byId("SRProductSubscriptionDBNameRow"),{display:""})}if(dojo.byId("SRProductSubscriptionOperPolicyRow")){dojo.style(dojo.byId("SRProductSubscriptionOperPolicyRow"),{display:""})}if(dojo.byId("SRProductSubscriptionCloudTypeRow")){dojo.style(dojo.byId("SRProductSubscriptionCloudTypeRow"),{display:""})}dojo.connect(dijit.byId("SRProductSubscription"),"onChange",this,dojo.hitch(this,SRCloud.onChangeSubscription,a));if(a){if(true===SRCloud.context.copyData){dijit.byId("SRProductSubscription").setValue(headerDataAsJson.SRProductSubscriptionId)}else{dijit.byId("SRProductSubscription").setValue("");dijit.byId("SRProductSubscription").setDisplayedValue("")}evalEffectOnEnvFields("Cloud",null,false);dojo.style(dojo.byId("productVersionRow"),{display:"none"});dijit.byId("productVersion").setValue("N/A")}else{var p=dijit.byId("SRProductSubscription");if(p){p.setValue(headerDataAsJson.SRProductSubscriptionId)}var z=dijit.byId("SRProductSubscriptionDatacenter");if(z){z.setValue(headerDataAsJson.SRProductSubscriptionDataCenter)}var q=dijit.byId("SRProductSubscriptionServiceVersion");if(q){q.setValue(headerDataAsJson.SRProductSubscriptionServiceVersion)}var o=dijit.byId("SRProductSubscriptionShortName");if(o){o.setValue(headerDataAsJson.SRProductSubscriptionShortName)}var x=dijit.byId("SRProductSubscriptionDBName");if(x){x.setValue(headerDataAsJson.SRProductSubscriptionDBName)}var w=dijit.byId("SRProductSubscriptionTenantId");if(w){w.setValue(headerDataAsJson.SRProductSubscriptionTenantId);SRCloud.showHideTMELink()}var y=dijit.byId("SRProductSubscriptionCloudType");if(y){y.setValue(headerDataAsJson.SRProductSubscriptionCloudType)}var v=dijit.byId("SRProductSubscriptionOperPolicy");if(v){v.setValue(headerDataAsJson.SRProductSubscriptionOperPolicy)}if(dijit.byId("envName")){dijit.byId("envName").setValue(headerDataAsJson.envName)}if(dijit.byId("envGuid")){dijit.byId("envGuid").setValue(headerDataAsJson.envGuid)}if(dijit.byId("envVersion")){dijit.byId("envVersion").setValue(headerDataAsJson.envVersion)}if(dijit.byId("envLifecycle")){dijit.byId("envLifecycle").setValue(headerDataAsJson.envLifecycle)}if(headerDataAsJson.envGuid!=undefined&&dojo.string.trim(headerDataAsJson.envGuid)!=""){getCloudConfigEmURL()}evalEffectOnEnvFields("Cloud",null,false);var A="srHeader";var u=dojo.connect(p,"onChange",function(){SRUtils.onBlurFld(p,headerDataAsJson.SRProductSubscriptionId,A)});if(u!=null){headerBlurHandles.push(u)}}initSubscription=false}}},error:function(p){var o=getDisplayMessageObj("Error fetching the SR Product Subscriptions LOV: "+errText,ERROR);console.log("Error fetching the SR Product Subscriptions LOV: "+errText);displayErrors(o)}};dojo.xhrPost(m)}else{SREXA.verifyIsEXA();SRCloud.resetFormElements()}}}catch(f){console.log("Exception in SRCloud.evaluateForm: "+f)}};SRCloud.isCloudProductSelected=function(){return"Cloud"==dijit.byId("productClass").getValue()};SRCloud.viewSimilarSRs=function(){console.log("SRCloud.viewSimilarSRs")};SRCloud.resetFormElements=function(){if(dojo.byId("SRProductSubscriptionDatacenterRow")){dijit.byId("SRProductSubscriptionDatacenter").setValue("");dojo.style(dojo.byId("SRProductSubscriptionDatacenterRow"),{display:"none"})}if(dojo.byId("SRProductSubscriptionServiceVersionRow")){dijit.byId("SRProductSubscriptionServiceVersion").setValue("");dojo.style(dojo.byId("SRProductSubscriptionServiceVersionRow"),{display:"none"})}if(dojo.byId("SRProductSubscriptionShortNameRow")){if(dijit.byId("SRProductSubscriptionShortName")){dijit.byId("SRProductSubscriptionShortName").setValue("")}if(dijit.byId("SRProductSubscriptionTenantId")){dijit.byId("SRProductSubscriptionTenantId").setValue("");SRCloud.showHideTMELink()}dojo.style(dojo.byId("SRProductSubscriptionShortNameRow"),{display:"none"})}if(dojo.byId("SRProductSubscriptionDBNameRow")){if(dijit.byId("SRProductSubscriptionDBName")){dijit.byId("SRProductSubscriptionDBName").setValue("")}dojo.style(dojo.byId("SRProductSubscriptionDBNameRow"),{display:"none"})}if(dojo.byId("SRProductSubscriptionOperPolicyRow")){if(dijit.byId("SRProductSubscriptionOperPolicy")){dijit.byId("SRProductSubscriptionOperPolicy").setValue("")}dojo.style(dojo.byId("SRProductSubscriptionOperPolicyRow"),{display:"none"})}if(dojo.byId("SRProductSubscriptionCloudTypeRow")){if(dijit.byId("SRProductSubscriptionCloudType")){dijit.byId("SRProductSubscriptionCloudType").setValue("")}dojo.style(dojo.byId("SRProductSubscriptionCloudTypeRow"),{display:"none"})}if(dojo.byId("productVersionRow")){dojo.style(dojo.byId("productVersionRow"),{display:""})}dojo.byId("SubscriptionLOVSize").value=0;dijit.byId("SRProductSubscription").store=new dojo.data.ItemFileReadStore({data:{items:[],identifier:"id"}});if(dojo.byId("SRProductSubscriptionRow")){dijit.byId("SRProductSubscription").setValue("");dijit.byId("SRProductSubscription").setDisplayedValue("");dojo.style(dojo.byId("SRProductSubscriptionRow"),{display:"none"})}var a=dijit.byId("productClass").getValue();if(a=="Cloud"){evalEffectOnEnvFields(a,undefined,true)}};SRCloud.onChangeSubscription=function(y){var o=dijit.byId("SRProductSubscriptionDatacenter");var w=dijit.byId("SRProductSubscriptionServiceVersion");var v=dijit.byId("SRProductSubscriptionShortName");var B=dijit.byId("SRProductSubscriptionDBName");var s=dijit.byId("SRProductSubscriptionTenantId");var u=dijit.byId("SRProductSubscriptionCloudType");var p=dijit.byId("SRProductSubscriptionOperPolicy");if(SRCloud.csiProductSubscriptionObjMap!=undefined&&dijit.byId("SRProductSubscription").getValue()!=""){var z=SRCloud.csiProductSubscriptionObjMap[dijit.byId("SRProductSubscription").getValue()];if(o!=undefined&&z!=undefined){if(y||(!y&&initSubscription==false)){var f=z.dataCenter;o.setValue(f)}}if(w!=undefined&&z!=undefined){if(y||(!y&&initSubscription==false)){var b=z.serviceVersion;w.setValue(b)}}if(v!=undefined&&z!=undefined){if(y||(!y&&initSubscription==false)){var m=z.shortName;v.setValue(m)}}if(B!=undefined&&z!=undefined){if(y||(!y&&initSubscription==false)){var A=z.DBName;B.setValue(A)}}if(s!=undefined&&z!=undefined){if(y||(!y&&initSubscription==false)){var a=z.tenantId;s.setValue(a);SRCloud.showHideTMELink()}}if(u!=undefined&&z!=undefined){if(y||(!y&&initSubscription==false)){var q=z.cloudType;u.setValue(q)}}if(p!=undefined&&z!=undefined){if(y||(!y&&initSubscription==false)){var l=z.operationalPolicy;p.setValue(l)}}if(z!=undefined){if(y||(!y&&initSubscription===false)){var g=dijit.byId("productClass").getValue();if(g=="Cloud"){evalEffectOnEnvFields(g,undefined,true)}var h=dijit.byId("SRProductSubscription").getValue();var x=z.csi;SRCloud.getEnvRelatedFields(h,x)}}}else{if(o){o.setValue("")}if(w){w.setValue("")}if(v){v.setValue("")}if(B){B.setValue("")}if(s){s.setValue("");SRCloud.showHideTMELink()}if(u){u.setValue("")}if(p){p.setValue("")}var g=dijit.byId("productClass").getValue();if(g=="Cloud"){evalEffectOnEnvFields(g,undefined,true)}}};SRCloud.getEnvRelatedFields=function(b,a){var h=new Array();var l=new Object();l.lookupId="csiNumber";l.lookupValue=a;h.push(l);var l=new Object();l.lookupId="subscriptionId";l.lookupValue=b;h.push(l);var f=null;var g="getEnvFieldsUsingSubId";retrievePodCloudConfigUsingJSONP(f,h,g)};SRCloud.showHideTMELink=function(){var f=false;if(getPageSytemParamValue("SRM_CLOUD_TME_LINK_ENABLED")!=undefined&&dojo.string.trim(getPageSytemParamValue("SRM_CLOUD_TME_LINK_ENABLED"))=="true"){f=true}var b=dojo.byId("TMEPunchout");var a=dijit.byId("SRProductSubscriptionTenantId");console.log("SRCloud Tenant Id value is "+a.getValue());if(b!=undefined){if(f==true&&a!=undefined&&a.getValue()!=undefined&&dojo.string.trim(a.getValue())!=""){dojo.style(b,{display:""})}else{dojo.style(b,{display:"none"})}}};function punchoutToTME(){var b=dijit.byId("SRProductSubscriptionTenantId");if(b!=undefined&&dojo.string.trim(b.getValue())!=""){console.log("The new tenantId is "+b.getValue());var a=b.getValue();var f=dojo.string.trim(getPageSytemParamValue(SRM_CLOUD_TME_PUNCHOUT_URL));f=f.replace("%%REFID%%",encodeURIComponent(a));console.log("tmeURL:"+f);window.open(f,"_blank")}else{console.log("Error encountered in punchoutToTME ... tenatIdWidget is empty!")}}var SRValidationUtils={};SRValidationUtils.onChangeHWCountry=function(b){var f=(typeof b==="string")?b:dojo.trim(b.getValue());if((f.length==0)||!isTechnicalSR()){setConditionalReqFld(HW_STATE_FID,false);setConditionalReqFld(HW_PROVINCE_FID,false);return}var a=("United States"==f)?true:false;setConditionalReqFld(HW_COUNTY_FID,a);SRValidationUtils.hwStateRequiredCountriesStore.fetch({query:{name:f},onComplete:function(g){a=(g.length>0)?true:false;setConditionalReqFld(HW_STATE_FID,a)}});SRValidationUtils.hwProvinceRequiredCountriesStore.fetch({query:{name:f},onComplete:function(g){a=(g.length>0)?true:false;setConditionalReqFld(HW_PROVINCE_FID,a)}});SRValidationUtils.hwZipcodeExclusionCountriesStore.fetch({query:{name:f},onComplete:function(g){a=(g.length>0)?false:true;console.log("Is zip code req for "+f+" = "+a);setConditionalReqFld(HW_POSTAL_CODE_FID,a)}})};SRValidationUtils.hwStateRequiredCountriesStore=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&lov=HW_STATE_REQUIRED_COUNTRIES"});SRValidationUtils.hwProvinceRequiredCountriesStore=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&lov=HW_PROVINCE_REQUIRED_COUNTRIES"});SRValidationUtils.hwZipcodeExclusionCountriesStore=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&lov=COUNTRY_ZIPCODE_NOT_REQ"});function canEditServiceTeam(q,u){var s=q.field;var l=u;var p=this.model.data[u]["serviceTeamSource"];var g=this.model.data[u]["serviceTeamShiftPLAGroup"];var f=this.model.data[u]["teamRole"];var a=this.model.data[u]["emailFlag"];var o=(p=="GRP");var h=(p=="MANUAL");var m=(f=="Sev1 24x7");if(s=="primary"){return true}if(s=="teamRole"){return true}if(s=="empEmailFlag"){return true}if(s=="serviceTeamSource"){return false}if(s=="serviceTeamAudience"&&m){return true}if(s=="serviceTeamShiftAvailability"){return true}if(s=="serviceTeamShiftPLAGroup"){return false}if(s=="serviceTeamShiftStartTime"&&!o){return true}if(s=="serviceTeamShiftEndTime"&&!o){return true}return false}function getServiceTeamSource(b){var a;var f=this.grid.model.data[b];if((f)&&(f!=null)){a=f.serviceTeamSource;if(a==""||(a==undefined)){a="MANUAL"}}return a}function getServiceTeamPLASupportGroup(f){var h;var b=this.grid.model.data[f];if((b)&&(b!=null)){h=b.serviceTeamShiftPLAGroup;if(h&&h!=""){return h}else{var g=srData.items;var a;for(i=0;i<g.length;i++){if(g[i].label=="Group"){h=g[i].value;break}}h=(h!=undefined&&h!="")?h:"Unassigned"}}return h}function getServiceTeamAudience(a){var f;var b=this.grid.model.data[a];if((b)&&(b!=null)){f=b.serviceTeamAudience;if(f==""||(f==undefined)){f="Internal"}}return f}function getServiceTeamShiftAvailability(a){var f;var b=this.grid.model.data[a];if((b)&&(b!=null)){f=b.serviceTeamShiftAvailability;if(f==""||(f==undefined)){f="Available"}}return f}function getServiceTeamShiftStartTime(a){var b;var f=this.grid.model.data[a];if((f)&&(f!=null)){b=f.serviceTeamShiftStartTime;if(b==""||(b==undefined)){b=""}}return b}function getServiceTeamShiftEndTime(a){var b;var f=this.grid.model.data[a];if((f)&&(f!=null)){b=f.serviceTeamShiftEndTime;if(b==""||(b==undefined)){b=""}}return b}function getServiceTeamPerson(b){var g;var l=this.grid.model.data[b];var a;var m;var h;var f;if((l)&&(l!=null)){g='<a href="http://people.us.oracle.com/pls/oracle/find_person?p_string=PERSON"  target="_blank">FIRSTNAME</a>';m=l.empFName;f=l.empLName;serviceTeamEmail=l.empEmail;firstAndLast=m+" "+f;g=g.replace("PERSON",serviceTeamEmail);g=g.replace("FIRSTNAME",m);return g}return}var platinumSR={};platinumSR.platinumText=isEmptyVal(getPageSytemParamValue("PLATINUM_SR_IDENTIFIER"))?"Platinum":getPageSytemParamValue("PLATINUM_SR_IDENTIFIER");platinumSR.defaultRestoreStatus=isEmptyVal(getPageSytemParamValue("SRM_DEFAULT_PLATINUM_RESTORE_STATUS"))?"Restoration Required":getPageSytemParamValue("SRM_DEFAULT_PLATINUM_RESTORE_STATUS");platinumSR.restoreStatusStore=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&lov=OD_OUTAGE_TYPE&parentValue=Support&rev="+enabledLOVServlets.get("SRHeaderRequest")});platinumSR.nonPlatinumStore=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadSimpleLov2&lov=OD_OUTAGE_TYPE&rev="+enabledLOVServlets.get("SRHeaderRequest")});platinumSR.isPlatinumSr=function(){if(getFieldVal("configLevel")==platinumSR.platinumText){return true}return false};platinumSR.isRestoreStatusVisible=function(){return platinumSR.isPlatinumSr()};platinumSR.isSev1=function(){if(getFieldVal("severity")==="1-Critical"){return true}return false};platinumSR.isRestoreStatusDisabled=function(){if((platinumSR.isRestoreStatusVisible()&&!platinumSR.isSev1())||platinumSR.isNot_od_platinum()){return true}return false};platinumSR.isNot_od_platinum=function(){if(!isODSR()&&!platinumSR.isPlatinumSr()){return true}return false};platinumSR.enableDisableRestoreStatus=function(){if(dijit.byId("outageType")!=undefined){dijit.byId("outageType").setDisabled(platinumSR.isRestoreStatusDisabled())}};platinumSR.setRestoreStatusStore=function(){if(platinumSR.isRestoreStatusVisible()&&dijit.byId("outageType")!=undefined){dijit.byId("outageType").store=platinumSR.restoreStatusStore;setFieldVal("outageType","")}};platinumSR.setNonPlatinumStore=function(){if(!platinumSR.isRestoreStatusVisible()&&dijit.byId("outageType")!=undefined){dijit.byId("outageType").store=platinumSR.nonPlatinumStore;setFieldVal("outageType","")}};platinumSR.isCreateSrOp=function(){return(window.location.href.indexOf("SRCreate.jspx")!=-1)?true:false};platinumSR.resetODOutageType=function(b){if(isODSR()&&isEmptyVal(getFieldVal("outageType"))){var a=(b!=undefined&&typeof(b)=="object"&&b.outageType!=undefined)?b.outageType:((!platinumSR.isCreateSrOp()&&headerDataAsJson!=undefined&&!isEmptyVal(headerDataAsJson.OutageType)&&headerDataAsJson.odFlag!=undefined&&headerDataAsJson.odFlag=="true")?headerDataAsJson.OutageType:"");setFieldVal("outageType",a)}};platinumSR.setDefaultRestoreStatus=function(){if(platinumSR.isRestoreStatusVisible()&&!platinumSR.isRestoreStatusDisabled()&&dijit.byId("outageType")!=undefined){setFieldVal("outageType",platinumSR.defaultRestoreStatus)}};platinumSR.onchangeSRFlds=function(b){var a=(b!=undefined&&typeof(b)=="object"&&b.source!=undefined&&b.source=="severity")?false:true;if(a){if(platinumSR.isRestoreStatusVisible()){platinumSR.setRestoreStatusStore()}else{platinumSR.setNonPlatinumStore()}}if(platinumSR.isRestoreStatusVisible()&&!platinumSR.isRestoreStatusDisabled()){platinumSR.setDefaultRestoreStatus()}else{if(platinumSR.isRestoreStatusDisabled()){setFieldVal("outageType","")}}platinumSR.enableDisableRestoreStatus();platinumSR.resetODOutageType(b)};function setCsiNameTitle(){if(dijit.byId("csiName")!=undefined){var b=dijit.byId("csiName").getValue();var f=dojo.trim(b)==""?"SI Name is undefined (or is missing from view)":b;var a=dijit.byId("csiName");dojo.attr(a,"title",f);setCsiTitle(f)}}function setCsiTitle(b){var a=dijit.byId("csi");dojo.attr(a,"title",b)}function isMainCsiHardwareSoftwareBoth(f){var b=false;var a=undefined;var g=HW_SW_FID;if(dijit.byId(g)!=undefined){a=dijit.byId(g).getValue()}else{a=SRUtils.getCurrentSR()[g]}if(a!=undefined&&(a==f||a=="Both")){b=true}return b}function isMainCsiHardwareOrBoth(){return isMainCsiHardwareSoftwareBoth("Hardware")}function isMainCsiSoftwareOrBoth(){return isMainCsiHardwareSoftwareBoth("Software")}function getSerialNumberId(){var a="";if(dijit.byId(SERIAL_NUM_ID)!=undefined){a=dijit.byId(SERIAL_NUM_ID).getValue()}else{a=SRUtils.getCurrentSR()[SERIAL_NUM_ID]}if(a!=undefined){a=dojo.string.trim(a)}return a}function getEvalFieldVal(g,b){var f="";if(b==undefined){b=g}if(dijit.byId(g)!=undefined){var a=dijit.byId(g);if(a.type==="checkbox"){f=false;if("on"===a.getValue()){f=true}}else{f=dijit.byId(g).getValue()}}else{f=SRUtils.getCurrentSR()[b]}if(f!=undefined&&dojo.isString(f)){f=dojo.string.trim(f)}return f}function loadCsiContactObjFromSelected(b){var a={};if(b==undefined){return a}a.statusFlag="";a.contactId=b.csiContactId;a.contactEmail=b.csiContactEmailAddress;a.contactLastName=b.csiContactLastName;a.contactFirstName=b.csiContactFirstName;a.contactPhone=b.csiContactPhone;a.contactTimeZone=b.csiContactTimeZone;a.contactMethod=b.csiContactMethod;a.country=b.csiContactCountry;return a}function getSPBooleanValue(b){var a=false;if(b!=undefined&&b!=null){if(dojo.isString(b)){a=(b==="true")}else{if(typeof b==="boolean"){a=b}}}return a}function onSelectProduct(a,f){if(f==undefined){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null&&b.selection.getSelected()!=undefined){var h=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[h];if(hasRowInvalidStatus(f)){var g=extractRowStatusMessage(f);alert(g!=""?g:"This item has the Status field set to 'invalid'. Please choose another item!");return}}}compareProductVersionWithVersionsFromSelection(f,a);setRootcauseIfProductClassificationIsIntegratedSoftware(f,a);if(a==UPDATE_OP){resetHandInstAck(a)}}function defaultIfOneProductVersion(f,b){if(b!=null){var h=b.productVersionsLov;if(h!=undefined&&h.length==1){var a="productVersion,productVersionDescription";var g={};g.productVersion=h[0].productVersion;g.productVersionDescription=h[0].productVersionDescription;setTargetFieldVals(a,g)}}}function checkIfSameProductVersion(g,b){if(b!=null){var h=b.productVersionsLov;if(g!=undefined&&headerDataAsJson!=undefined&&h!=undefined){for(var f=0;f<h.length;f++){var a=h[f];if(a.productVersion===getEvalFieldVal("productVersion")){return true}}return false}}}function compareProductVersionWithVersionsFromSelection(f,b){var a=dojo.xhrGet({url:"../../../SRPickLovRequest",content:{action:"getProductVersionsLov",productId:f.product},handleAs:"json",preventCache:true,sync:false,load:function(h){var m="product,productDescription,productLine,productClass,productClassification,hasProdPlatform,productVersion,productVersionDescription,component,componentDescription,subcomponent,subcomponentDescription";var l="product,productDescription,productLine,productClass,productClassification,hasProdPlatform,component,componentDescription,subcomponent,subcomponentDescription";var g=m;g=(checkIfSameProductVersion(f,h))?l:m;setAndCloseLovDialog(g,f);defaultIfOneProductVersion(b,h);if(dijit.byId("SRProductSubscription")){SRCloud.resetFormElements();SRCloud.evaluateForm()}},error:function(h){var g="product,productDescription,productLine,productClass,productClassification,hasProdPlatform,productVersion,productVersionDescription,component,componentDescription,subcomponent,subcomponentDescription";setAndCloseLovDialog(g,f);console.error("Error in getting product versions: ",h)},timeout:5000})}function onsiteSLACheck(l){if(l=="create"){if(!getSrCreatePageLoaded()){return}}else{if(l=="update"){if(getInitMode()){return}}}var D=dijit.byId("OnsiteSLA");var N=dojo.byId("OnsiteSLAIcon");try{if(D&&N){var A=getEvalFieldVal("svcLvl").trim();var T=headerDataAsJson.svcLvl.trim();var Q=((A!=T)&&(T!=""))?true:false;var G=getEvalFieldVal("severity").trim();var w=headerDataAsJson.Severity.trim();var z=((G!=w)&&(w!=""))?true:false;var f=getEvalFieldVal("HWAddr1").trim();var C=headerDataAsJson.HWAddr1.trim();var W=((f!=C)&&(C!=""))?true:false;var b=getEvalFieldVal("HWAddr2").trim();var P=headerDataAsJson.HWAddr2.trim();var V=((b!=P)&&(P!=""))?true:false;var v=getEvalFieldVal("HWAddressIntegrationId").trim();var K=headerDataAsJson.HWAddressIntegrationId.trim();var m=((v!=K)&&(K!=""))?true:false;var I=getEvalFieldVal("HWCity").trim();var g=headerDataAsJson.HWCity.trim();var s=((I!=g)&&(g!=""))?true:false;var y=getEvalFieldVal("HWCounty").trim();var S=headerDataAsJson.HWCounty.trim();var U=((y!=S)&&(S!=""))?true:false;var q=getEvalFieldVal("HWPCode").trim();var a=headerDataAsJson.HWPCode.trim();var o=((q!=a)&&(a!=""))?true:false;var H=getEvalFieldVal("HWProvince").trim();var L=headerDataAsJson.HWProvince.trim();var Y=((H!=L)&&(L!=""))?true:false;var O=getEvalFieldVal("HWState").trim();var F=headerDataAsJson.HWState.trim();var M=((O!=F)&&(F!=""))?true:false;var p=getEvalFieldVal("HWTZ").trim();var u=headerDataAsJson.HWTZ.trim();var R=((p!=u)&&(u!=""))?true:false;var x=getEvalFieldVal("HWCountry").trim();var h=headerDataAsJson.HWCountry.trim();var B=(x!=h)?true:false;var E=isOpenSR(l);var X=isHardwareSR();if(E&&X&&A&&f&&G){dojo.style("OnsiteSLAIcon","display","");if(Q||z||W||V||m||s||U||o||Y||M||R){console.log("chgsvcLvl="+Q+", chgSeverity="+z+", chgHWAddr1="+W+", chgHWAddr2="+V+", chgHWAddressIntegrationId="+m+", chgHWCity="+s+", chgHWCounty="+U+", chgHWPCode="+o+", chgHWProvince="+Y+", chgHWState="+M);D.setValue("")}}else{dojo.style("OnsiteSLAIcon","display","none");if(D.getValue()!=""){D.setValue("")}}}}catch(J){console.log("***This is happening on SRCreate Ask Jesse to look into this")}}function isOpenSR(a){var b;if(a=="create"){b=getEvalFieldVal("srStatus")}else{if(a=="update"){b=getEvalFieldVal("status")}}return((b=="Closed")?false:true)}function getOnsiteSLA(){var b=validateFormFldsX("hwpane");if(b.opStatus==-1){displayErrors(b);errHandlingUtil.processErrFlds();return 1}var u=getEvalFieldVal("svcLvl");var o=getEvalFieldVal("severity");var q=getEvalFieldVal("serialNumAssetNumber");var p=getEvalFieldVal("HWAddr1");var g=getEvalFieldVal("HWAddr2");var a=getEvalFieldVal("HWCity");var l=getEvalFieldVal("HWState");var f=getEvalFieldVal("HWProvince");var v=getEvalFieldVal("HWPCode");var h=getEvalFieldVal("HWCountry");var s=getEvalFieldVal("HWCounty");var m=getEvalFieldVal("HWAddressIntegrationId");if(u&&o&&q&&p){dijit.byId("pleasewait").show();dojo.xhrPost({url:"../../../SRHeaderRequest",preventCache:true,content:{action:"getOnsiteSLA",svcLvl:u,srseverity:o,assetNumber:q,HWStreetAddress:p,HWStreetAddress2:g,HWCity:a,HWState:l,HWPostalCode:v,HWCountry:h,HWProvince:f,HWCounty:s,HWAddressIntegrationId:m},handleAs:"json",load:function(y,x){if(dijit.byId("pleasewait")&&dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(y.opStatus==1){displayErrors(y)}else{var w=y.onsiteSLA;var z=y.onsiteSLA_txnSts;var B=y.onsiteSLA_txnMsg;var A=dijit.byId("OnsiteSLA");if(A){A.setValue(w);if(z=="E"){alert("Error: Get Onsite SLA returned an error ... "+B)}else{if(z=="S"&&(w=="")){alert("Warning: Get Onsite SLA returned no value.")}}}}},timeout:60000,error:function(y,x){dijit.byId("pleasewait").hide();var z=" Error getting OnsiteSLA::  "+y.message;var w=getDisplayMessageObj(z,ERROR);displayErrors(w);console.error(z)}})}else{alert("Level of Service, Severity, Hardware Address fields must have valid values")}}function validateFormFldsX(u,E){var G=null;var w=new Object();var D=new Array();w.opStatus=0;w.opResult=D;var g=(dijit.byId("MaximizedSRHeaderDialog")!=null)?true:false;if(E!=undefined){G=E}else{if(u!=undefined&&u!=""&&g==true){G=dojo.query("input, textarea",u)}else{var A=dojo.filter(dojo.query(".onsitesla"),function(M,l){return(M.nodeName=="INPUT"&&M.id!="")});var z=dojo.filter(dojo.query(".onsitesla input"),function(M,l){return(M.id!="")});G=A.concat(z)}}if(G==null){return}var x=dojo.query(".HWDivArea");for(var K=0;K<G.length;K++){var h=dojo.attr(G[K],"id");var C=dojo.attr(G[K],"name");var b=dojo.attr(G[K],"title");var m=dojo.attr(G[K],"type");if(dijit.byId(h)){b=dijit.byId(h).title}var B=dojo.attr(G[K],"required");var I=dojo.style(G[K],"display");var p=dojo.attr(G[K],"disabled");var J=dojo.attr(G[K],"readOnly");var o=dijit.byId(h);var f=false;if(o){B=o.required;f=(o.declaredClass=="dijit.form.FilteringSelect")?true:false}if(!B&&!f){continue}var s=(b!=null&&b!="")?b:h;var v="";if(x!=undefined&&x.length>0){for(j=0;j<x.length;j++){var y=x[j];var H=dojo.query("#"+h,y);if(H!=undefined&&H.length>0){v=dojo.style(y,"display");if(v=="none"){break}}}}var F=dijit.byId(h);if(B&&((!f&&(F.value==undefined||F.value==""))||(f&&dijit.byId(h).getDisplayedValue()==""))&&v!="none"&&I!="none"&&p!=true&&J!=true&&m!="hidden"){w.opStatus=-1;var q={};q.messageType=2;q.message=s+" is missing.";var a={};a.errFldId=h;q.messageParams=a;D.push(q)}if(f&&dijit.byId(h).getDisplayedValue()!=""&&v!="none"&&I!="none"&&p!=true&&J!=true&&m!="hidden"){var L=o.validate(false);if(!L){w.opStatus=-1;var q={};q.messageType=2;q.message=s+" has invalid value.";var a={};a.errFldId=h;q.messageParams=a;D.push(q)}}}return w}function onchangeOnsiteSLA(){if(initMode){return}var a=200;var b=dijit.byId("OnsiteSLA");if(b){var f=dojo.string.trim(b.getValue());if(f&&f.length>a){alert("The OnsiteSLA value has a storage limit of "+a+" chars and is being truncated to this "+a+" limit.");b.setValue(f.substring(0,a-2)+"..")}}}function getEnvNamePicklistColumns(){var b=[{cellStyles:"",field:"name",headerStyles:"text-align:center",hidden:"false",name:"Environment",width:"20%"},{cellStyles:"",field:"version",headerStyles:"text-align:center",hidden:"false",name:"Environment Version",width:"20%"},{cellStyles:"",field:"lifecycle",headerStyles:"text-align:center",hidden:"false",name:"Environment Lifecycle",width:"20%"},{cellStyles:"",field:"cloudService",headerStyles:"text-align:center",hidden:"false",name:"Environment Service",width:"20%"},{cellStyles:"display:none;",field:"guid",headerStyles:"display:none;",hidden:"true",name:"Environment Guid",width:"0%",styles:"display: none;"},{cellStyles:"display:none;",field:"emUrl",headerStyles:"display: none;",hidden:"true",name:"EM URL",width:"0%",styles:"display: none;"}];var g=new Array();g.push(b);var h={cells:g};var f=[{id:"name",name:"Environment"},{id:"version",name:"Environment Version"},{id:"lifecycle",name:"Environment Lifecycle"}];var a={gridId:"ENV_NAME",normalCell:h,searchStore:{identifier:"id",items:f},queryCol:null};return a}function onSelectEnvName(){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null){var g=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[g];setEnvironmentRelatedFields(f);var a=dijit.byId("lovDialog");if(a!=null&&a.open){a.hide()}}}function setEnvironmentRelatedFields(b,a){if(a==undefined){a=true}if(b!=undefined){if(dijit.byId("envName_lovHidden")!=undefined){dijit.byId("envName_lovHidden").setValue((b.name!=undefined)?dojo.string.trim(b.name):"")}if(dijit.byId("envName")!=undefined){dijit.byId("envName").setValue((b.name!=undefined)?dojo.string.trim(b.name):"")}if(dijit.byId("envGuid")!=undefined){dijit.byId("envGuid").setValue((b.guid!=undefined)?dojo.string.trim(b.guid):"")}if(dijit.byId("envVersion")!=undefined){dijit.byId("envVersion").setValue((b.version!=undefined)?dojo.string.trim(b.version):"")}if(dijit.byId("envLifecycle")!=undefined){dijit.byId("envLifecycle").setValue((b.lifecycle!=undefined)?dojo.string.trim(b.lifecycle):"")}if(dijit.byId("envEmUrl")!=undefined){if(b.emUrl!=undefined&&dojo.string.trim(b.emUrl)!=""){dijit.byId("envEmUrl").setValue(b.emUrl);var f=dojo.byId("envEmUrlLink");if(f!=undefined){f.style.visibility="visible"}}else{dijit.byId("envEmUrl").setValue("");var f=dojo.byId("envEmUrlLink");if(f!=undefined){f.style.visibility="hidden"}}}if(a){defaultProductVersion(getEvalFieldVal("product"),b.version)}}return}function retrievePodCloudConfigUsingJSONP(b,h,a){var s=new Array();var g=dojo.string.trim(getPageSytemParamValue("SRM_CLOUD_CONFIG_URL"));var p=undefined;var q=undefined;var o=undefined;var m=undefined;var f=undefined;var u=false;var v=undefined;dojo.forEach(h,function(w){if(w.lookupId=="csiNumber"){p=w.lookupValue}if(w.lookupId=="guid"){q=w.lookupValue}if(w.lookupId=="version"){o=w.lookupValue}if(w.lookupId=="lifecycle"){m=w.lookupValue}if(w.lookupId=="name"){f=w.lookupValue}if(w.lookupId=="fromInputField"){u=true}if(w.lookupId=="subscriptionId"){v=w.lookupValue}});if(p==undefined||dojo.string.trim(p)==""){throw new Exception("CSI is a required field")}else{g=g.replace("%%REFID%%",encodeURIComponent(p))}if(q!=undefined&&dojo.string.trim(q)!=""){g+="&guid="+encodeURIComponent(q)}if(o!=undefined&&dojo.string.trim(o)!=""){g+="&version="+encodeURIComponent(o)}if(m!=undefined&&dojo.string.trim(m)!=""){g+="&lifecycle="+encodeURIComponent(m)}if(f!=undefined&&dojo.string.trim(f)!=""){g+="&name="+encodeURIComponent(f)}if(v!=undefined&&dojo.string.trim(v)!=""){g+="&subscriptionId="+encodeURIComponent(v)}var l={url:g,callbackParamName:"callback",preventCache:true,timeout:1200000,load:function(B){if(!dojo.isArray(B)){if(B.httpStatus=="400"){console.log("http400 encountered rest ws "+g);console.log(B);ajaxLoadingError(B.title,undefined,"rowCount")}}B=sanitizePodData(B);if(b!=undefined){console.log("Success in fetching POD cloud Config for csi:"+p+", guid:"+q+" , version:"+o+" ,lifecycle:"+m);if(B!=undefined&&B.length>0){console.log("Data is avialable"+B);if(dojo.isArray(B)){outputPODArray=B}if(B!=undefined&&B.length>1&&u==true){inputCapableEnvironmentRelated(true,undefined)}var A={identifier:"guid",label:"Environment Guid",items:outputPODArray};var x=new dojo.data.ItemFileReadStore({data:A});var w=new dojox.grid.data.DojoData(null,x,{jsId:"gmodel",query:{guid:"*"},clientSort:true});b.setModel(w);b.model.refresh();if(B!=undefined&&B.length==1&&u==true){b.selection.select(0);onSelectEnvName()}}else{if(B!=undefined&&B.length==0){if(u==true){var z=dijit.byId("lovDialog");if(z!=null&&z.open){z.hide()}alert("No matching data found. Please enter valid Environment name");inputCapableEnvironmentRelated(true,undefined);setEnvNameLov()}else{var A={identifier:"guid",label:"Environment Guid",items:new Array()};var x=new dojo.data.ItemFileReadStore({data:A});var w=new dojox.grid.data.DojoData(null,x,{jsId:"gmodel",query:{guid:"*"},clientSort:true});b.setModel(w);b.model.refresh()}}}ajaxLoadingOff(b.model,"rowCount","ENV_NAME")}else{if(B!=undefined&&B.length>0){console.log("Data is available using csi and guid only"+B);if(a!=undefined&&a=="getEmUrl"){showhideEmUrl(B)}else{if(a!=undefined&&a=="defaultEnvIfSinglePOD"){defaultEnvironmentWithPod(B)}else{if(a!=undefined&&a=="getEnvFieldsUsingSubId"){console.log("%%%%%%%%% getEnvFieldsUsingSubId so I'm defaulting the pod with the first result");var y=false;setEnvironmentRelatedFields(B[0],y)}}}}}return B},error:function(w){ajaxLoadingError(w,undefined,"rowCount");console.log("Warning: Problem Encountered Fetching Cloud Config List, timed out")}};ajaxLoadingOn("rowCount");dojo.io.script.get(l)}function showOutputOnlyEnvFieldsForCloud(f){var a=(f!=undefined&&f===true)?true:false;var g=true;var h=dojo.byId("SRProductSubscriptionRow");if(h!=undefined&&dojo.style(h)!=undefined){var b=dojo.style(h);if(b.display!=undefined&&b.display=="none"){g=false}}outputOnlyEnvironmentRelated(a,g);if(dojo.byId("envNameLovLink")!=undefined){dojo.byId("envNameLovLink").style.visibility="hidden"}}function showhideEmUrl(f){if(f.length==1){var g=f[0];if(g.emUrl!=undefined&&dojo.string.trim(g.emUrl)!=""){if(dijit.byId("envEmUrl")!=undefined){var a=g.emUrl;dijit.byId("envEmUrl").setValue(a)}if(dojo.byId("envEmUrlLink")!=undefined){var b=dojo.byId("envEmUrlLink");b.style.visibility="visible"}}else{if(dojo.byId("envEmUrlLink")!=undefined){var b=dojo.byId("envEmUrlLink");b.style.visibility="hidden"}}}}function defaultEnvironmentWithPod(a){if(a.length==1){console.log("%%%%%%%%% defaultEnvironmentWithPodthere is only 1 . so im defualting the pod without having user to pick it");setEnvironmentRelatedFields(a[0])}else{console.log("%%%%%%%% defaultEnvironmentWithPod there is >1 pod . User has to pick")}}function getCloudConfigEmURL(){var f=new Array();var b=getEvalFieldVal(CSI);var a=getEvalFieldVal(REF_CSI_FID);var g=new Object();g.lookupId="csiNumber";g.lookupValue=(isPartnerSR())?a:b;f.push(g);var g=new Object();g.lookupId="guid";g.lookupValue=getEvalFieldVal("envGuid");f.push(g);retrievePodCloudConfigUsingJSONP(undefined,f,"getEmUrl")}function punchoutCloudConfigEM(){var a=getEvalFieldVal("envEmUrl");window.open(a,"_blank")}function evalEffectOnEnvFields(h,b,g){g=(g!=undefined&&g==true)?true:false;var a=true;try{a=!getInitMode()}catch(f){console.log("getInitmode is not found in srcreate")}if(isEligibleForCloudConfig(h.trim())){inputCapableEnvironmentRelated((a||g),b)}else{if(h==="Cloud"){showOutputOnlyEnvFieldsForCloud(g)}else{outputOnlyEnvironmentRelated(a||g,false)}}beenTo_InEvalEffectOnEnvFields=true}function isEligibleForCloudConfig(g){isEligible=false;var b=dojo.string.trim(getPageSytemParamValue("SRM_CLOUD_CONFIG_PRODUCT_CLASS"));console.log("Eligible Product Classes for Cloud Config SRM_CLOUD_CONFIG_PRODUCT_CLASS: "+b);if(b!=undefined&&b!=""){b=b.replace(/\s/g,"");var f=b.split(",");var a=dojo.indexOf(f,g);if(a>=0){isEligible=true}}console.log("Is "+g+" elgible for Cloud Config: "+isEligible);return isEligible}function outputOnlyEnvironmentRelated(a,f){if(f===undefined){f=false}var b=["envName","envGuid","envEmUrl","envVersion","envLifecycle"];dojo.forEach(b,function(h){var g=dijit.byId(h);if(a==true){g.setValue("")}dojo.attr(g.domNode,"disabled","true");dojo.attr(g.domNode,"readOnly","readonly");dojo.addClass(g.domNode,"readOnly");dojo.addClass(g.domNode,"dijitTextBoxReadOnly");dojo.addClass(g.domNode,"dijitReadOnly");showHideEnvironmentFields(h,f)});if(dojo.byId("envNameLovLink")!=undefined){dojo.byId("envNameLovLink").style.visibility="hidden"}if(dojo.byId("envEmUrlLink")!=undefined){dojo.byId("envEmUrlLink").style.visibility="hidden"}}function inputCapableEnvironmentRelated(a,f){var b=["envName"];dojo.forEach(b,function(l){var h=dijit.byId(l);if(a==true){h.setValue("")}dojo.removeAttr(h.domNode,"disabled");dojo.removeAttr(h.domNode,"readOnly");dojo.removeClass(h.domNode,"readOnly");dojo.removeClass(h.domNode,"dijitTextBoxReadOnly");dojo.removeClass(h.domNode,"dijitReadOnly");showHideEnvironmentFields(l,true)});var g=["envGuid","envEmUrl","envVersion","envLifecycle"];dojo.forEach(g,function(l){var h=dijit.byId(l);if(a==true){h.setValue("")}showHideEnvironmentFields(l,true)});if(dojo.byId("envNameLovLink")!=undefined){dojo.byId("envNameLovLink").style.visibility="visible"}if(dojo.byId("envEmUrlLink")!=undefined){dojo.byId("envEmUrlLink").style.visibility="hidden"}}function showHideEnvironmentFields(l,h){var g="";if(h!=undefined&&h==true){g=""}else{g="none"}var b=self.location.href;var f=(b!=undefined&&(b.indexOf("SRCreate.jspx")!=-1))?CREATE_OP:UPDATE_OP;if(f==CREATE_OP||(f==UPDATE_OP&&dijit.byId("MaximizedSRHeaderDialog"))){if(l=="envName"||l=="envVersion"||l=="envLifecycle"){var a=dojo.byId(l+"Row");dojo.style(a,{display:g})}}}function defaultProductVersion(f,b){var a="../../../SRHeaderRequest";var g={action:"ACTION_GET_PRODUCT_VERSIONS",productId:f};dijit.byId("pleasewait").show();var h=genericTalkToServer(a,g,"json",true,null,"get");h.addCallback(function(p,u){dijit.byId("pleasewait").hide();if(p.opStatus!=0){displayErrors(p)}var v=p.productVersions;var q=false;var w=false;var s=undefined;var l=undefined;var m="productVersion,productVersionDescription";dojo.forEach(v,function(x){if(x!=undefined&&x.productVersion==b){q=true;s=x}if(x!=undefined&&x.productVersion=="N/A"){w=true;l=x}});if(q==true){setTargetFieldVals(m,s)}else{if(w==true){setTargetFieldVals(m,l)}else{if(v.length>1){var o={productVersion:"",productVersionDescription:""};setTargetFieldVals(m,o)}}}});h.addErrback(function(m,l){hidePleaseWaitDialog();displayErrors(m)})}function sanitizePodData(a){dojo.forEach(a,function(b){if(b.version==undefined){b.version=""}if(b.lifecycle==undefined){b.lifecycle=""}if(b.cloudService==undefined){b.cloudService=""}if(b.targetType==undefined){b.targetType=""}if(b.emUrl==undefined){b.emUrl=""}if(b.subscriptionId==undefined){b.subscriptionId=""}if(b.csi==undefined){b.csi=""}});return a}HWAddrUtil.locateAddrFieldsMap=new Map();HWAddrUtil.locateAddrFieldsMap.put(HW_ADDR1_FID,"streetAddress1");HWAddrUtil.locateAddrFieldsMap.put(HW_ADDR2_FID,"streetAddress2");HWAddrUtil.locateAddrFieldsMap.put(HW_CITY_FID,"city");HWAddrUtil.locateAddrFieldsMap.put(HW_STATE_FID,"state");HWAddrUtil.locateAddrFieldsMap.put(HW_PROVINCE_FID,"province");HWAddrUtil.locateAddrFieldsMap.put(HW_POSTAL_CODE_FID,"postalCode");HWAddrUtil.locateAddrFieldsMap.put(HW_COUNTRY_FID,"country");HWAddrUtil.locateAddrFieldsMap.put(HW_COUNTY_FID,"county");var excludedCountryVerificationCode=undefined;HWAddrUtil.getLocateFormAddressFieldsArray=function(){var a=HWAddrUtil.locateAddrFieldsMap.keySet();return a};HWAddrUtil.loqateCaseInsCompareFieldArray=[HW_COUNTRY_FID];HWAddrUtil.confirmHWAddr=function(u,s,q){excludedCountryVerificationCode=dojo.string.trim(getPageSytemParamValue("SRM_EDQ_COUNTRY_EXCLUDED_VERIFICATION_CODE"));var a=false;if(u!=undefined){a=true}var f=validateFormFldsX("hwpane",HWAddrUtil.getLocateFormAddressFieldsArray());if(f.opStatus==-1){displayErrors(f);errHandlingUtil.processErrFlds();return 1}var v=getEvalFieldVal(HW_ADDR1_FID);var h=getEvalFieldVal(HW_ADDR2_FID);var b=getEvalFieldVal(HW_CITY_FID);var o=getEvalFieldVal(HW_STATE_FID);var g=getEvalFieldVal(HW_PROVINCE_FID);var x=getEvalFieldVal(HW_POSTAL_CODE_FID);var m=getEvalFieldVal(HW_COUNTRY_FID);var w=getEvalFieldVal(HW_COUNTY_FID);var l={streetAddress1:v,streetAddress2:h,city:b,state:o,province:g,postalCode:x,county:w,countryCode:(HWAddrUtil.getCountryCode(m)!=undefined)?HWAddrUtil.getCountryCode(m):"undefined"};var p=loqateAddressVerification(l);p.addCallback(function(A){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(A==undefined||A.businessAddress==undefined){throw ("Address Validation Service returned an unexpected object;  GSI EDQ Address Validation Service may be down")}A.businessAddress.ispOriginalAddress=l;A.businessAddress.ispOriginalCountryName=m;if(!a){HWAddrUtil.promptLoqateAddressVerification(A.businessAddress)}else{var B=A.businessAddress;if(B.verificationcode!=undefined&&B.verificationcode==excludedCountryVerificationCode){if(u&&(typeof u=="function")){return(u.apply(null,[s,q]))}}else{if(B.verified!=undefined&&B.verified=="true"&&B.countryCode==B.ispOriginalAddress.countryCode){B.country=B.ispOriginalCountryName;var z=HWAddrUtil.loopAndCompareOrigSuggested(B);if(z.length==0){if(u&&(typeof u=="function")){return(u.apply(null,[s,q]))}}else{var y={destFunction:u,destParam1:s,destParam2:q};HWAddrUtil.promptLoqateAddressVerification(A.businessAddress,y)}}else{var y={destFunction:u,destParam1:s,destParam2:q};HWAddrUtil.promptLoqateAddressVerification(A.businessAddress,y)}}}});p.addErrback(function(A,z){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(!a){console.log("Error: Address was not validated. Exception Encountered in Address Validation Service. Please report this to the admin.\n\nException Details: "+A);HWAddrUtil.promptLoqateAddressVerification()}else{var B=dojo.string.trim(getPageSytemParamValue("SRM_EDQ_ADDRESS_SAVE_WS_DOWN_WARNING"));if(B!=undefined&&B=="true"){console.log("Warning: Address was not validated. Exception Encountered in Address Validation Service. Please report this to the admin.\n\nException Details: "+A+"\n\nClick OK to continue to Save");var y={destFunction:u,destParam1:s,destParam2:q};HWAddrUtil.promptLoqateAddressVerification(undefined,y)}else{if(u&&(typeof u=="function")){return(u.apply(null,[s,q]))}}}})};function loqateAddressVerification(f){var g=dojo.string.trim(getPageSytemParamValue("SRM_EDQ_ADDRESS_VERIFY_URL"));if(g==""){alert("Address Verification Service url is not configured correctly. Can not perform HW Address verification.");console.log("SRM_EDQ_ADDRESS_VERIFY_URL is blank. Can not perform HW Address verification. ")}var b=dojo.string.trim(getPageSytemParamValue("SRM_EDQ_ADDRESS_WS_TIMEOUT_MILLIS"));var h=parseInt(b);if(isNaN(h)||h<=0){h=15000}var a={url:g,callbackParamName:"callback",content:f,preventCache:true,timeout:h};dijit.byId("pleasewait").show();return dojo.io.script.get(a)}HWAddrUtil.getCountryCode=function(a){var b=countryCodeMap.get(a);return b};HWAddrUtil.applyCaseInsCompareLogic=function(g,f,b){var l=b;var a=dojo.indexOf(HWAddrUtil.loqateCaseInsCompareFieldArray,g);if(a>=0){var h=(f!=undefined)?f.toLowerCase():"";var m=(b!=undefined)?b.toLowerCase():"";if(h==m){l=f}else{l=b}}return l};HWAddrUtil.loadLoqateDialogData=function(p,l){var o=p+"_orig";var b=p+"_suggested";var a=p+"_suggested_realVal";var h=undefined;if(dijit.byId(p)!=undefined){h=dijit.byId(p).getValue()}if(dojo.byId(o)!=undefined){var m=h.replace(/\s/g,"&nbsp;");dojo.byId(o).innerHTML=m}l=HWAddrUtil.applyCaseInsCompareLogic(p,h,l);if(dijit.byId(a)!=undefined){dijit.byId(a).setValue(l)}if(dojo.byId(b)!=undefined){var g=l.replace(/\s/g,"&nbsp;");dojo.byId(b).innerHTML=g}var f=dojo.byId(b);if(h!=l&&f!=undefined){if(dojo.isIE){dojo.style(f,{"font-weight":"bold",border:"1px solid #cfffcf","background-color":"#cfffcf"})}else{f.setAttribute("style","font-weight: bold; border: 1px solid #cfffcf ;  background-color:#cfffcf; ")}}};HWAddrUtil.copySuggestedAddressToForm=function(f){var g=f;var a=f+"_suggested_realVal";var b=undefined;if(dijit.byId(a)!=undefined){b=dijit.byId(a).getValue()}if(dijit.byId(g)!=undefined){dijit.byId(g).setValue(b)}};var LOCATE_ADDRESS_VERIFICATION_DIALOG="locateAddressVerficationDialog";var partialMatchDialogLabel="Address Verification: More Accurate Address Found";var failureMatchDialogLabel="Address Verification: Address Could Not Be Validated";var perfectMatchDialogLabel="Address Verification: Address Is Validated";var notVerifiedDialogLabel="Address Verification: Address Validation Not Supported";HWAddrUtil.promptLoqateAddressVerification=function(f,p){cleanupDialog(LOCATE_ADDRESS_VERIFICATION_DIALOG);var m=createDialog(LOCATE_ADDRESS_VERIFICATION_DIALOG,"Address Verification:","",false);dojo.connect(m,"hide",function(){initMode=false;HWAddrUtil.closeLoqateDialog()});dojo.addClass(m,OP_DIALOG_CLASS);var s=document.createElement("table");var b={cellSpacing:6,cellPadding:6};dojo.attr(s,b);var l=document.createElement("tbody");s.appendChild(l);var o=document.createElement("tr");var g=document.createElement("td");dojo.attr(g,{colSpan:2});l.appendChild(o);var h=document.createElement("span");dojo.addClass(h,OP_DIALOG_TABLE_COL_CLASS);o.appendChild(h);g.appendChild(h);o.appendChild(g);dojo.attr(o,{align:"left"});var a="../srview/loqateAddressVerification.html"+getVersion();var q=genericTalkToServer(a,null,"text",false,null,"get");q.addBoth(function(v,u){h.innerHTML=v;dojo.parser.parse(h);HWAddrUtil.displayHWAddressVerifyResult(f,m,p)});h.innerHTML="Loading ...";m.setContent(s);setTimeout(function(){m.show();var w=dojo.coords("confirmHWAddressButton");var x=dojo.coords(LOCATE_ADDRESS_VERIFICATION_DIALOG);if(x.x>(w.x+200)){var u=x.x-(w.x+200);var v=x.x-u;dojo.style(m.domNode,"left",(v+"px"))}},5)};HWAddrUtil.closeLoqateDialog=function(){dojo.forEach(HWAddrUtil.getLocateFormAddressFieldsArray(),function(a){var b=dijit.byId(a+"_suggested_realVal");b.destroy()});closeDialog(LOCATE_ADDRESS_VERIFICATION_DIALOG)};HWAddrUtil.displayHWAddressVerifyResult=function(l,s,w){var b=dojo.byId("hwAddrLoqateDialogPerfect");dojo.style(b,{display:"none"});var g=dojo.byId("hwAddrLoqateDialogPartial");dojo.style(g,{display:"none"});var p=dojo.byId("hwAddrLoqateDialogFailure");dojo.style(p,{display:"none"});var a=dojo.byId("implicitHwAddrLoqateDialogFailure");dojo.style(a,{display:"none"});var m=dojo.byId("hwAddrLoqateDialogNotVerified");dojo.style(m,{display:"none"});var v=undefined;var o="";if(l==undefined){s.setTitle(failureMatchDialogLabel);showAddressCantBeVerifiedMsg(o,w);return}if(l.verificationcode!=undefined&&l.verificationcode==excludedCountryVerificationCode){o="not_verified";s.setTitle(notVerifiedDialogLabel)}else{if(l.verified!=undefined&&l.verified=="true"&&l.countryCode==l.ispOriginalAddress.countryCode){l.country=l.ispOriginalCountryName;v=HWAddrUtil.loopAndCompareOrigSuggested(l);if(v.length==0){o="perfect";s.setTitle(perfectMatchDialogLabel)}else{o="partial";s.setTitle(partialMatchDialogLabel)}}else{o="failure";s.setTitle(failureMatchDialogLabel);try{if(l.countryCode!=l.ispOriginalAddress.countryCode){HWAddrUtil.logProblemToServer(l)}}catch(h){console.log("Exception while logging the loqate data problem: "+h)}}}if(o!=""){if(o.toLowerCase()=="perfect"){dojo.style(b,{display:""})}else{if(o.toLowerCase()=="failure"){showAddressCantBeVerifiedMsg(o,w)}else{if(o.toLowerCase()=="partial"){dojo.forEach(HWAddrUtil.getLocateFormAddressFieldsArray(),function(x){var y=HWAddrUtil.locateAddrFieldsMap.get(x);var z=(l[y]!=undefined)?l[y]:"";HWAddrUtil.loadLoqateDialogData(x,z)});var q=dijit.byId("acceptSuggested");var f=dijit.byId("rejectSuggested");dojo.connect(q,"onClick",function(){HWAddrUtil.takeSuggestedAddress();HWAddrUtil.goToFinalSaveDestination(w)});dojo.connect(f,"onClick",function(){HWAddrUtil.goToFinalSaveDestination(w)});dojo.style(g,{display:""})}else{if(o.toLowerCase()=="not_verified"){var u=dojo.string.trim(getPageSytemParamValue("SRM_EDQ_COUNTRY_EXCLUDED_NO_VERIFY_MSG"));HWAddrUtil.copyAddressToVerifyFailureDialog("notVerifiedMsg","notVerifiedAddress",u);var m=dojo.byId("hwAddrLoqateDialogNotVerified");dojo.style(m,{display:""})}}}}}};HWAddrUtil.closeHWAddressVerifyDialog=function(){closeDialog(LOCATE_ADDRESS_VERIFICATION_DIALOG)};HWAddrUtil.takeSuggestedAddress=function(){var a=dojo.attr(dojo.byId(HW_ADDR1_FID),"readOnly");if(a==true){console.log("input disabled");HWAddrUtil.HWNewAddr(HWAddrUtil.getValidationClearFldsArr())}else{console.log("input capable")}dojo.forEach(HWAddrUtil.getLocateFormAddressFieldsArray(),function(b,f){HWAddrUtil.copySuggestedAddressToForm(b)})};HWAddrUtil.loopAndCompareOrigSuggested=function(b){var a=new Array();dojo.forEach(HWAddrUtil.getLocateFormAddressFieldsArray(),function(g){var h=HWAddrUtil.locateAddrFieldsMap.get(g);var l=(b!=undefined&&b[h]!=undefined)?b[h]:"";var f=undefined;if(dijit.byId(g)!=undefined){f=dijit.byId(g).getValue()}l=HWAddrUtil.applyCaseInsCompareLogic(g,f,l);if(f!=l){a.push(g)}});return a};HWAddrUtil.goToFinalSaveDestination=function(a){if(a!=undefined){var b=a.destFunction;var g=a.destParam1;var f=a.destParam2;if(b&&(typeof b=="function")){closeDialog(LOCATE_ADDRESS_VERIFICATION_DIALOG);return(b.apply(null,[g,f]))}}closeDialog(LOCATE_ADDRESS_VERIFICATION_DIALOG)};HWAddrUtil.copyAddressToVerifyFailureDialog=function(b,g,l){var a=dojo.byId(g);var h=document.createElement("table");h.setAttribute("width","100%");a.appendChild(h);var f=document.createElement("tbody");h.appendChild(f);if(b!=undefined&&dojo.string.trim(l)!=""){dojo.byId(b).innerHTML=l}dojo.forEach(HWAddrUtil.getLocateFormAddressFieldsArray(),function(q){if(dijit.byId(q)!=undefined&&dojo.string.trim(dijit.byId(q).getValue())!=""){var m=document.createElement("tr");var o=document.createElement("td");o.setAttribute("align","left");var s=document.createElement("div");var p=dijit.byId(q).getValue().replace(/\s/g,"&nbsp;");s.innerHTML=p;m.appendChild(o);o.appendChild(s);f.appendChild(m)}})};HWAddrUtil.logProblemToServer=function(g){var a="../../../SRRequest";var b={action:"logLoqateDataProblem",loqateResponse:dojo.toJson(g)};var f=genericTalkToServer(a,b,"json",true,null,"post");f.addBoth(function(l,h){console.log("loqate data problem - logged the problem in midtier")})};function openCmdbMenu(g){var b;if(!g){var g=window.event}if(g.target){b=g.target}else{if(g.srcElement){b=g.srcElement}}if(b.nodeType==3){b=b.parentNode}var l=getEvalFieldVal("cmdbConfig");var h=cmdbInstanceHostsMap.get(l);if(h.length==0){return}if(h.length==1){var a=h[0];openProjConfigHostViewer("cmdbHost",a.name,a.hostId);console.log("one line; view csmlink for cmdb:"+a.name+"_"+a.hostId);return}var f=showHostsForCMDBInstance(h);f._openMyself(g)}function showHostsForCMDBInstance(a){cmdbMenu=new dijit.Menu({});dojo.forEach(a,function(b,f){cmdbMenu.addChild(new dijit.MenuItem({label:b.name,onClick:function(g){console.log("from a list; view csmlink for cmdb:"+b.name+"_"+b.hostId);openProjConfigHostViewer("cmdbHost",b.name,b.hostId)}}))});cmdbMenu.startup();return cmdbMenu}function showHideCmdbCmsLink(){var a=self.location.href;var b=(a!=undefined&&(a.indexOf("SRCreate.jspx")!=-1))?CREATE_OP:UPDATE_OP;if((b===UPDATE_OP&&!getInitMode()&&!initCMDBConfigLoad)||(b===CREATE_OP&&!initCMDBConfigLoad)){if(b===UPDATE_OP){console.log("$$$$$$$$$$$ showHideCmdbCmsLink getInitMode: "+getInitMode()+"; initCMDBConfigLoad: "+initCMDBConfigLoad)}if(b===CREATE_OP){console.log("$$$$$$$$$$$ showHideCmdbCmsLink  initCMDBConfigLoad: "+initCMDBConfigLoad)}var h=getEvalFieldVal("cmdbConfig");var g=dijit.byNode(dojo.byId("privateDataFlg"));if(h===undefined||h.trim()===""){g.setValue("true")}else{g.setValue("true");if(CMDS_INSTANCE_PRIVACY_DATA_FLG_MAP!=null&&CMDS_INSTANCE_PRIVACY_DATA_FLG_MAP!=undefined){var f=CMDS_INSTANCE_PRIVACY_DATA_FLG_MAP.get(h);if(f==null||f==undefined){g.setValue("true")}else{g.setValue(f)}}}console.log("$$$$$$$$$$$$$ Change of cmdbconfig detected : value of privateDataFlg is "+g.getValue())}else{if(b===UPDATE_OP){console.log("&&&&&&&&&&&&& In showHideCmdbCmsLink but initCMDBConfigLoad is true ; getInitMode: "+getInitMode())}if(b===CREATE_OP){console.log("&&&&&&&&&&&&& In showHideCmdbCmsLink but initCMDBConfigLoad is true")}}if(dojo.byId("cmdbCmsLink")==undefined||dijit.byId("cmdbConfig")==undefined){return}var f=cmdbInstanceHostsMap.get(h);if(f==null||f==undefined){dojo.style(dojo.byId("cmdbCmsLink"),{display:"none"})}else{dojo.style(dojo.byId("cmdbCmsLink"),{display:""})}}function showAddressCantBeVerifiedMsg(b,a){if(a==undefined){var l=dojo.string.trim(getPageSytemParamValue("SRM_EDQ_ADDRESS_CANNOT_VERIFY_MSG"));if(b==undefined||dojo.string.trim(b)==""){l=dojo.string.trim(getPageSytemParamValue("SRM_EDQ_ADDRESS_WSDOWN_CANNOT_VERIFY_MSG"))}HWAddrUtil.copyAddressToVerifyFailureDialog("msg","errorMsgAddress",l);var m=dojo.byId("hwAddrLoqateDialogFailure");dojo.style(m,{display:""})}else{var o=dojo.string.trim(getPageSytemParamValue("SRM_EDQ_ADDRESS_CANNOT_VERIFY_CONFIRM_SAVE_MSG"));if(b==undefined||dojo.string.trim(b)==""){o=dojo.string.trim(getPageSytemParamValue("SRM_EDQ_ADDRESS_WSDOWN_CONFIRM_SAVE_MSG"))}HWAddrUtil.copyAddressToVerifyFailureDialog("implicitErrorMsg","implicitErrorMsgAddress",o);var h=dijit.byId("implicitCancelSave");var f=dijit.byId("implicitContinueSave");dojo.connect(h,"onClick",function(){HWAddrUtil.closeHWAddressVerifyDialog()});dojo.connect(f,"onClick",function(){HWAddrUtil.goToFinalSaveDestination(a)});var g=dojo.byId("implicitHwAddrLoqateDialogFailure");dojo.style(g,{display:""})}}function hideShowCXTicket(g){var a=dojo.byId("cxTicketNumberRow");var b=self.location.href;var f=(b!=undefined&&(b.indexOf("SRCreate.jspx")!=-1))?CREATE_OP:UPDATE_OP;if(f==UPDATE_OP){if(a){dojo.style(a,{display:""})}if(dijit.byId("MaximizedSRHeaderDialog")){if(a){dojo.style(a,{display:"none"})}if(SRCloud.isCloudProductSelected()||isEligibleForCloudConfig(g)){if(a){dojo.style(a,{display:""})}}}}}var shuttleLovTemplate;function setShuttleLovDialog(h,m,b,a,l,g){var f={url:"../../../SRPickLovRequest",content:{action:"getShuttleLov",source:h,lookupParam:dojo.toJson(m),identifier:dojo.toJson(b)},preventCache:true,handleAs:"json",load:function(o){dijit.byId("pleasewait").hide();displayShuttleLov(o,h,b,a,l,g,m);return o},error:function(p){dijit.byId("pleasewait").hide();var o=getDisplayMessageObj("Operation to create pick list for "+l+" timed out.",2);displayErrors(o)},timeout:120000};dijit.byId("pleasewait").show();dojo.xhrGet(f)}function displayShuttleLov(h,g,b,a,m,f,l){if(shuttleLovTemplate==null){dojo.xhrGet({url:"srLOVShuttle.html"+getVersion(),load:function(o){shuttleLovTemplate=o;createShuttleLovWidget(h,g,b,a,m,f,l)},error:function(o){console.debug("Failed to load Shuttle LOV Template")},timeout:120000})}else{createShuttleLovWidget(h,g,b,a,m,f,l)}}function createShuttleLovWidget(data,source,identifier,targetFields,title,onselect,params){var jsonObj=new Object();jsonObj.params=params;jsonObj.data=data;jsonObj.source=source;jsonObj.targetFields=targetFields;jsonObj.title=title;jsonObj.onselect=onselect;var queryCol=data.queryCol;var queryStr="{"+queryCol+': "*"}';var queryObj=eval("("+queryStr+")");var dstore=null;var gmodel=null;var clientSidePaging=false;dstore=getDynamicQueryItemStore(clientSidePaging);dojo.connect(dstore,"errorHandler",this,dojo.hitch(this,function(error,request){ajaxLoadingError(error,request,"srowCount")}));var t=(new Date()).getTime();gmodel=new srmdojoc.data.SPHomeDojoData(null,dstore,{jsId:"gmodel",rowsPerPage:100,clientSort:false,cache:false,query:{action:"getModel",source:source,t:t,lookupParam:dojo.toJson(params)}});dojo.connect(gmodel,"spHomePreRequestRows",this,dojo.hitch(this,ajaxLoadingOn,"srowCount"));dojo.connect(gmodel,"processRows",this,dojo.hitch(this,ajaxLoadingOff,gmodel,"srowCount"));var identifierId="";if(source=="activityContact"){identifierId="contactId"}else{if(source=="employee"){identifierId="empEmail"}}var selectedData=data.selectedData;var powner=selectedData.activityOwner;console.debug("owner:"+powner);var dstore2=new dojo.data.ItemFileWriteStore({data:{identifier:identifierId,items:selectedData.items}});var gmodel2=new dojox.grid.data.DojoData(null,dstore2,{jsId:"gmodel2",query:queryObj,clientSort:true});var modelObservers2={modelChange:function(){dojo.byId("srowCount2").innerHTML="Row count: "+gmodel2.count;if(gmodel2.count<=1){dijit.byId("removeBtn").setDisabled(true);dijit.byId("removeAllBtn").setDisabled(true)}else{dijit.byId("removeBtn").setDisabled(false);dijit.byId("removeAllBtn").setDisabled(false)}}};gmodel2.observer(modelObservers2);var dialog=dijit.byId("shuttleLovdialog");if(dialog!=null){dialog.destroyRecursive();closeDialog("shuttleLovdialog")}var node=document.createElement("div");dialog=new dijit.Dialog({id:"shuttleLovdialog",style:"width: 98%;background-color:#FFFFEE; border:2px;z-index:1;",title:"Pick "+title,preventCache:true,refocus:false,execute:processShuttleLovDialogInput},node);dojo.connect(dialog,"hide",function(){if(gmodel!=undefined){gmodel.clearData(false)}});dojo.body().appendChild(node);if(dijit.byId("availableGrid")!=null){dijit.byId("availableGrid").destroyRecursive()}if(dijit.byId("selectedGrid")!=null){dijit.byId("selectedGrid").destroy()}dialog.setContent(shuttleLovTemplate);var grid1=dijit.byId("availableGrid");var grid2=dijit.byId("selectedGrid");dojo.connect(grid2,"onCellClick","gridCellClick");var rowbar={type:"dojox.GridRowView",width:"20px"};var normalCell=data.normalCell;var selectedCells=data.selectedCells;var normalCellL={cells:normalCell.cells};var layout=[normalCellL];var firstObj={name:"Primary",field:"isPrimary",width:"10%",cellStyles:"text-align:center;",editorClass:"dijit.form.RadioButton",editor:dojox.grid.editors.Bool};var newOArr=new Array();var newArr=new Array();newArr.push(firstObj);var cells=selectedCells.cells;if(cells.length==1){var cellArr=cells[0];for(var i=0;i<cellArr.length;i++){newArr.push(cellArr[i])}}newOArr.push(newArr);var selectedCellsL={cells:newOArr};var layout2=[selectedCellsL];grid1.setStructure(layout);grid2.setStructure(layout2);grid1.setModel(gmodel);grid2.setModel(gmodel2);if(dojo.byId("addBtn")){dojo.connect(dijit.byId("addBtn"),"onClick",function(event){eval("("+onselect+")")})}if(dojo.byId("removeBtn")){dojo.connect(dijit.byId("removeBtn"),"onClick",function(event){removeSelected()})}if(dojo.byId("removeAllBtn")){dojo.connect(dijit.byId("removeAllBtn"),"onClick",function(event){removeSelectedAll()})}if(dojo.byId("cancelBtn")){dojo.connect(dijit.byId("cancelBtn"),"onClick",function(event){cancelShuttleDialog()})}if(dojo.byId("hsource")){dojo.byId("hsource").value=source}if(dojo.byId("hidentifiers")){dojo.byId("hidentifiers").value=dojo.toJson(identifier)}if(dojo.byId("htargetFields")){dojo.byId("htargetFields").value=targetFields}if(dojo.byId("activityOwnerFld")&&powner!=undefined){dojo.byId("activityOwnerFld").value=powner}grid1.update();if(dojo.byId("shuttleBtnCell")){var button=new dijit.form.Button({label:"Go",name:"Go",onClick:function(e){searchQueue(source,params)}});dojo.byId("shuttleBtnCell").appendChild(button.domNode)}if(dojo.byId("shuttleFindLovCell")){var searchStore=data.searchStore;var cstore=new dojo.data.ItemFileReadStore({id:"shuttlelovStore",jsId:"shuttlelovStore",data:{identifier:searchStore.identifier,items:searchStore.items}});var combo=dijit.byId("findlov");if(combo!=null){combo.destroyRecursive()}var cinput=document.createElement("input");combo=new dijit.form.FilteringSelect({id:"findlov",name:"findlov",searchAttr:"name",labelAttr:"name",labelType:"text",store:cstore},cinput);dojo.byId("shuttleFindLovCell").appendChild(combo.domNode)}dijit.byId("availableC").resize();dijit.byId("selectedC").resize();dijit.byId("shuttleLovdialog").show()}function processShuttleLovDialogInput(v){dijit.byId("pleasewait").show();var b=v.hsource;var u=v.hidentifiers;var f=v.htargetFields;var g=dijit.byId("selectedGrid");var s=g.model.data;if(s==undefined||s==null){s=[]}var a=new Array();if(s.length==0){dijit.byId("pleasewait").hide();alert("Please make sure you have one row selected.");return false}if(s.length>0){var l=0;dojo.forEach(s,function(x){var y=getIsPrimaryVal(l);console.debug("isPrimary:"+y);var w=new Object();if(b=="activityContact"){console.debug("selected.isPrimary"+x.isPrimary);w={contactLastName:encodeURIComponent(x.contactLastName),contactId:x.contactId,contactEmail:encodeURIComponent(x.contactEmail),contactFirstName:encodeURIComponent(x.contactFirstName),isPrimary:y};a.push(w)}if(b=="employee"){console.debug("selected.isPrimary"+x.isPrimary);w={empId:x.empId,empFName:encodeURIComponent(x.empFName),empLName:encodeURIComponent(x.empLName),empEmail:encodeURIComponent(x.empEmail),empPhone:x.empPhone,empTitle:x.empTitle,empTZ:x.empTZ,functionalManager:x.functionalManager,geoDivCountry:x.geoDivCountry,primaryPositionId:x.primaryPositionId,primaryPosition:x.primaryPosition,isPrimary:y};a.push(w)}l++})}var q=getActiveSrId();var p=getQueryTabName();var h=getSrModId();var o=getSrNumber();var m={url:"../../../SRPickLovRequest",content:{action:"saveShuttleData",source:b,identifier:u,items:dojo.toJson(a),srId:q,queryTabName:p,modId:h,activeSR:o},handleAs:"json",load:function(x){dijit.byId("pleasewait").hide();if(x.opStatus==0){var z="";if(x.ownerFld!=undefined){z=x.ownerFld}if(dijit.byId(f)&&b=="activityContact"){var y="";var w=0;dojo.forEach(s,function(A){var B=getIsPrimaryVal(w);if(B=="true"){y=y+A.contactFirstName+" "+A.contactLastName}w++});y=removeLastDelimiter(y,",");dijit.byId(f).setValue(y)}else{if(dijit.byId(f)&&b=="employee"){var y="";var w=0;dojo.forEach(s,function(A){var B=getIsPrimaryVal(w);if(B=="true"){y=(A.empEmail!=""&&A.empEmail!=null)?A.empEmail.toUpperCase():A.empEmail;if(z!=""&&z!=null&&dijit.byId(z)&&A.empEmail!=""){dijit.byId(z).setValue(y)}}w++});y=removeLastDelimiter(y,",");dijit.byId(f).setValue(y)}}}else{displayErrors(x)}},error:function(x){var w=getDisplayMessageObj("Save "+b+" operation for an activity failed or timed out.",2);displayErrors(w);console.debug("Save operation failed or timed out.",x)}};dojo.xhrGet(m)}function removeLastDelimiter(b,a){var f=b.lastIndexOf(a);if(f!=-1&&f==b.length-1){b=b.substring(0,b.length-1)}return b}function getIsPrimaryVal(b){var a=dojo.query(".dojoxGrid-input");console.debug("x.len"+a.length);if(a!=undefined&&a.length>b){var f=a[b];if(f.type=="checkbox"&&f.checked){return"true"}}return"false"}function gridCellClick(g){console.debug("gridCellClick");var a=dijit.byId("selectedGrid");if(g&&g.cellIndex==0){var o=g.rowIndex;var l=dojo.query(".dojoxGrid-input");var m=false;if(l!=undefined&&l.length>o){var p=l[o];if(p.type=="checkbox"&&p.checked){m=true}if(m){for(var f=0;f<l.length;f++){var h=l[f];var b=a.model.data[f];if(f!=o){if(h.type=="checkbox"&&h.checked){h.checked=false;b.isPrimary=false}a.doApplyCellEdit(b.isPrimary,f,0)}}}}}}function onSelectActivityContact(){var a=dijit.byId("availableGrid");var f=dijit.byId("selectedGrid");if(a!=null&&a.selection!=null&&a.selection.getSelected()!=null&&a.selection.getSelected()!=undefined&&a.selection.getSelected().length>0){var p=a.selection.getSelected()[0];var g=a.model.data[p];var q={contactLastName:g.contactLastName,contactId:g.contactId,contactEmail:g.contactEmail,contactFirstName:g.contactFirstName,isPrimary:false};var h=checkIfContactExists(q.contactId);if(h){return}f.addRow(q);f.model.store.save();f.model.refresh();var l=f.model.data.length;var m=dojo.query(".dojoxGrid-input");if(l>0){var b=l-1;if(m!=undefined&&m.length==l){var o=m[b];if(o.type=="checkbox"&&!o.checked){o.checked=false}}}}}function onSelectActivityEmployee(){var a=dijit.byId("availableGrid");var f=dijit.byId("selectedGrid");if(a!=null&&a.selection!=null&&a.selection.getSelected()!=undefined&&a.selection.getSelected()!=null&&a.selection.getSelected().length>0){var p=a.selection.getSelected()[0];var g=a.model.data[p];var q={empId:g.empId,empFName:g.empFName,empLName:g.empLName,empEmail:g.empEmail,empPhone:g.empPhone,empTitle:g.empTitle,empTZ:g.empTZ,functionalManager:g.functionalManager,geoDivCountry:g.geoDivCountry,primaryPositionId:g.primaryPositionId,primaryPosition:g.primaryPosition,isPrimary:false};var h=checkIfEmpExists(q.contactEmail);if(h){return}f.addRow(q);f.model.store.save();f.model.refresh();var l=f.model.data.length;if(l>0){var b=l-1;var m=dojo.query(".dojoxGrid-input");if(m!=undefined&&m.length==l){var o=m[b];if(o.type=="checkbox"&&!o.checked){o.checked=false}}}}}function removeSelected(){var h="";var f="";if(dijit.byId("activityOwnerFld")){h=dijit.byId("activityOwnerFld").getValue()}if(dijit.byId("hsource")){f=dijit.byId("hsource").getValue()}var b=dijit.byId("selectedGrid");if(b!=null&&b.selection!=null&&b.selection.getSelected()!=null&&b.selection.getSelected().length>0){var g=b.selection.getSelected()[0];var a=b.model.data[g];if(a!=undefined){if(f=="employee"&&a.empId!=undefined&&a.empId==h){alert("The employee "+a.empEmail+" is the primary owner of the activity in the Orion and therefore can not be removed. First change the primary owner of the activity, and then click on save. After that remove this employee.");return}b.removeSelectedRows();b.model.store.save();b.model.refresh()}}}function removeSelectedAll(){var f=dijit.byId("selectedGrid");var a=f.model.data;var l="";var g="";if(dijit.byId("activityOwnerFld")){l=dijit.byId("activityOwnerFld").getValue()}if(dijit.byId("hsource")){g=dijit.byId("hsource").getValue()}if(a!=undefined&&a.length>0){for(var b=a.length-1;b>=0;b--){var h=f.model.data[b];if(g=="employee"&&h.empId!=undefined&&h.empId==l){alert("The employee "+h.empEmail+" is the primary owner of the activity and can not be removed. First change the primary owner of the activity, and then click on save. After that remove this employee.");continue}f.selection.addToSelection(b)}if(f.selection.getSelected()!=null&&f.selection.getSelected().length>0){f.removeSelectedRows();f.model.store.save();f.model.refresh()}}}function cancelShuttleDialog(){if(dijit.byId("shuttleLovdialog")){dijit.byId("shuttleLovdialog").hide();dijit.byId("shuttleLovdialog").destroyRecursive()}}var LIKE_REQUIRES_3_NONWILDCARD_CHARS=1;function searchQueue(source,params){console.debug("searchQueue for: "+source);var combo=dijit.byId("findlov");if(combo!=null){var comboVal=combo.getValue();var comboDisplayedVal=combo.getDisplayedValue();if(comboVal==""||comboVal==null){alert('Plese select value for "Find".');return}var text1=dijit.byId("searchTB");var textVal="";if(text1!=null){textVal=encodeURIComponent(text1.getValue())}if(textVal==""||textVal==null){alert('Plese provide value for "Value" field.');return}if(textVal!=null&&textVal!=""){if(source=="activityContact"){var rule=LIKE_REQUIRES_3_NONWILDCARD_CHARS;var rcode=restrictQuery(comboDisplayedVal,textVal,rule);if(rcode==-1){return}}var paramStr="";if(params!=null&&params.length>0){for(i=0;i<params.length;i++){if(i>0){paramStr=paramStr+","}var obj=params[i];paramStr=paramStr+obj.lookupId+': "'+encodeURIComponent(obj.lookupValue)+'"'}paramStr=paramStr+","}var queryStr="{"+paramStr+comboVal+': "'+textVal+'"}';var grid=dijit.byId("availableGrid");var queryObj=eval("("+queryStr+")");var dstore=getDynamicQueryItemStore(false);dojo.connect(dstore,"errorHandler",this,dojo.hitch(this,function(error,request){ajaxLoadingError(error,request,"srowCount")}));var t=(new Date()).getTime();grid.model.query={queryObj:dojo.toJson(queryObj),action:"getModel",t:t,source:source};if(grid!=null){grid.model.refresh()}}}}function setActivityContactLov(p,l,f,q){var b="activityContact";var s=new Object();var h=new Array();s.lookupId="accountId";s.lookupValue="";if(s.lookupValue==""&&dijit.byId(l)){s.lookupValue=dijit.byId(l).getValue()}h.push(s);var m="";if(dojo.byId(f)){m=dojo.byId(f).value}var a=getActiveSrId();var o={activityId:m,srId:a};var g=q;setShuttleLovDialog(b,h,o,g,"Contact","onSelectActivityContact()")}function setActivityEmployeeLov(f,o){var a="employee";var p=new Object();var h=new Array();var l="";if(dojo.byId(f)){l=dojo.byId(f).value}var b=getActiveSrId();var m={activityId:l,srId:b};var g=o;setShuttleLovDialog(a,h,m,g,"Employee","onSelectActivityEmployee()")}function checkIfContactExists(h){var g=dijit.byId("selectedGrid");var a=g.model.data;if(a!=undefined&&a.length>0){for(var b=a.length-1;b>=0;b--){var f=g.model.data[b];if(f.contactId==h){return true}}}return false}function checkIfEmpExists(h){var g=dijit.byId("selectedGrid");var a=g.model.data;if(a!=undefined&&a.length>0){for(var b=a.length-1;b>=0;b--){var f=g.model.data[b];if(f.empEmail==h){return true}}}return false}var SRM_KEYBOARD_SHORTCUT_SRNAV="SRM_KEYBOARD_SHORTCUT_SRNAV";var saveKeyCombArray=new Array();var cancelKeyCombArray=new Array();dojo.require("dijit.Dialog");dojo.extend(dijit.Dialog,{setTitle:function(a){this.titleNode.innerHTML=a||""}});var toolbarMap=new Map();var templateMap=new Map();var TOOLBAR_NODE="toolbarNode";function dontCloseDialog(b){var a=(window.event)?event.keyCode:b.keyCode;if(a==dojo.keys.ESCAPE){if(dijit.byId("templateDialog")!=null&&dijit.byId("templateDialog").open){event.returnValue=false}else{event.returnValue=true}}}function submitDialogOnEnter(f){var b=(window.event)?event.keyCode:f.keyCode;if(b==dojo.keys.ENTER){var a=dijit.byId("templateDialog");if(a!=null&&a.open){a.execute(a.getValues())}}}var ESCALATION_ACTIVITY_TYPE="Escalation";function selectTemplate(m){var g=dijit.byId("grid");if(g!=null&&g.selection.getSelected()!=null){var l=dijit.byId("grid").selection.getSelected()[0];var h=dijit.byId("grid").model.data[l];var f=h.templateId;var o=dijit.byId("hText");if(o!=undefined&&f!=undefined){var a=o.getValue();var b="";if(dijit.byId("activityId")!=undefined){b=dijit.byId("activityId").getValue()}performAfterSelect(a,b,f,m)}}closeDialog("templateDialog")}function performAfterSelect(a,b,f,g){if(b!=undefined&&b!=""){updateActivityWT(b,f)}else{requestTemplate(f,a,g)}}var TEMPLATE_DATA="tData";var TEMPLATE_ID="templateId";function setDialog(data,activityType,activityId,autoselectTemplate,odmLot){var items=data.model;var queryCol=data.queryCol;var queryStr="{"+queryCol+': "*"}';var queryObj=eval("("+queryStr+")");var gridId=data.gridId;var source=data.gridId;var thandles=new Array();var normalCell=data.normalCell;var normalCellL={cells:normalCell.cells};var gmodel=null;var modelObservers=null;var dstore=new dojo.data.ItemFileReadStore({data:items});templateMap.put(source,dstore);if(dijit.byId("grid")!=null){dijit.byId("grid").destroy()}if(data.rowCount==1){if(data[TEMPLATE_DATA]!=undefined&&items[TEMPLATE_ID]!=undefined){processTemplateData(data[TEMPLATE_DATA],items[TEMPLATE_ID],odmLot)}else{dstore.fetch({onItem:function(item){performAfterSelect(activityType,activityId,item.templateId,odmLot)}})}return}modelObservers={modelChange:function(){if(dojo.byId("arowCount")&&dijit.byId("grid")){dojo.byId("arowCount").innerHTML="Row count: "+dijit.byId("grid").model.count}}};gmodel=new dojox.grid.data.DojoData(null,dstore,{jsId:"gmodel",query:queryObj,clientSort:true});if(dijit.byId("templateDialog")){dijit.byId("templateDialog").destroyRecursive()}var dialog=new dijit.Dialog({id:"templateDialog",style:"width:90%;height:400px;font-family:verdana;font-size:8pt;z-index:1;background-color:#FFFFEE; border:2px outset #AAAAAA;",title:"Pick Activity Template for "+activityType,refocus:false,preventCache:true});dialog.startup();thandles.push(dojo.connect(dialog,"hide",this,dojo.hitch(this,templateDHide,dialog,gmodel,thandles,modelObservers)));var table=document.createElement("table");table.setAttribute("width","100%");table.setAttribute("id","lovtb");dialog.setContent(table);var tbody=document.createElement("tbody");table.appendChild(tbody);var tr=document.createElement("tr");tr.setAttribute("width","100%");tbody.appendChild(tr);var td=document.createElement("td");td.setAttribute("width","100%");td.setAttribute("valign","top");tr.appendChild(td);var htextbox=new dijit.form.TextBox({id:"hText",type:"hidden",value:activityType,name:"hText"});td.appendChild(htextbox.domNode);if(activityId!=undefined&&activityId!=""){var activityIdTextbox=new dijit.form.TextBox({id:"activityId",type:"hidden",value:activityId,name:"activityId"});td.appendChild(activityIdTextbox.domNode)}td.appendChild(document.createTextNode("Find "));var searchStore=data.searchStore;var cstore=new dojo.data.ItemFileReadStore({data:searchStore});var combo=new dijit.form.FilteringSelect({id:"tcombo1",name:"tcombo1",autoComplete:false,store:cstore,searchAttr:"name",labelAttr:"name",labelType:"text"});td.appendChild(combo.domNode);td.appendChild(document.createTextNode("    "));td.appendChild(document.createTextNode("Value "));var textbox=new dijit.form.TextBox({id:"tsearchText",name:"tsearchText"});td.appendChild(textbox.domNode);var divB=document.createElement("div");divB.setAttribute("width","10%");var buttonDynamic=new dijit.form.Button({label:"Go",onClick:function(){filterD(source,templateMap)}},divB);td.appendChild(buttonDynamic.domNode);td.appendChild(document.createTextNode("    "));var img=document.createElement("img");img.setAttribute("src","../images/tip.gif");img.setAttribute("alt","Tip");td.appendChild(img);var tipText=document.createTextNode("Use * as wild card character in search.");var font=document.createElement("font");font.setAttribute("color","#336699");font.appendChild(tipText);td.appendChild(font);var etr=document.createElement("tr");tbody.appendChild(etr);var etd=document.createElement("td");etd.setAttribute("align","right");var div=document.createElement("div");div.setAttribute("id","arowCount");dojo.style(div,"float","right");etd.appendChild(div);etr.appendChild(etd);var tr2=document.createElement("tr");tbody.appendChild(tr2);var td2=document.createElement("td");tr2.appendChild(td2);var gridDiv=document.createElement("div");gridDiv.setAttribute("id","gridDiv");td2.appendChild(gridDiv);var layout=[normalCellL];gmodel.observer(modelObservers);var grid=new dojox.Grid({id:"grid",elasticview:"2",model:gmodel,structure:layout,rowSelector:true});gridDiv.appendChild(grid.domNode);thandles.push(dojo.connect(grid,"onRowClick",function(event){selectTemplate(odmLot)}));grid.startup();grid.render();grid.refresh();if(autoselectTemplate==undefined){dialog.show()}else{setTimeout(function(){autoselectTemplateRow(dialog,grid,autoselectTemplate,odmLot)},100)}}function autoselectTemplateRow(g,f,h,o){if(h!=undefined){console.debug("autoselectTemplate:",h);console.debug("grid.model.data.length:",f.model.data.length);var b=f.model.data.length;if(b>0){var l=false;if(h=="_first_"){f.selection.select(0);l=true}else{for(var a=0;a<b;a++){var m=f.model.data[a];if(m.templateName==h){console.debug("Found it:",m);f.selection.select(a);l=true}}}if(l){selectTemplate(o)}else{if(!l&&g!=undefined){g.show()}}}else{console.debug("No templates to select from!")}}}function templateDHide(g,a,f,h){templateMap=new Map();if(h!=null){delete h.modelChange}if(f.length>0){for(var b=0;b<f.length;b++){dojo.disconnect(f[b])}}if(a!=undefined&&a!=null){a.clearData(false)}if(dijit.byId("grid")!=null){dijit.byId("grid").model.clearData(false);dijit.byId("grid").destroyRecursive()}g.destroyRecursive()}function createActivity(a,g,m){if(m){var h=confirm("You have selected new line of thinking for phase "+a+", therefore any existing activities for the phases that start after this line of thinking will be marked internal.");if(!h){return}}var f=SRUtils.showOtherSectionModified("");if(f!=0){return}dijit.byId("pleasewait").show();var o=new SRIdentity;o.operation="getTemplateList";o.activityType=a;var b={url:"../../../TemplateRequest",content:o,handleAs:"json",load:function(q,p){dijit.byId("pleasewait").hide();if(q.opStatus!=undefined&&q.opStatus==1){displayErrors(q)}else{console.debug("activityType:",a);setDialog(q,a,"",g,m)}return q},error:function(q,p){dijit.byId("pleasewait").hide();xhrErrHandler(q,p,"Request to open Activity Template Selection");return q},timeout:1200000};try{dojo.xhrPost(b)}catch(l){console.error("Error!",l);b.error(l,{args:b})}}function updateActivity(a){updateActivityWT(a,"")}function updateActivityWT(f,g){var a=SRUtils.showOtherSectionModified("activity_"+f);if(a!=0){return}dijit.byId("pleasewait").show();var o=new Date().getTimezoneOffset();if(g==null){g=""}var b=getActiveSrId();var m=getQueryTabName();var h=getSrModId();var l=getSrNumber();var p=dojo.xhrPost({url:"../../../TemplateRequest",preventCache:true,content:{operation:"update",tzOffset:o,activityId:f,templateId:g,srId:b,queryTabName:m,modId:h,activeSR:l},handleAs:"json",load:function(u,s){dijit.byId("pleasewait").hide();var q=u.opStatus;if(q==0){dijit.byId("pleasewait").hide();displayTemplate(u);populate(u);if(u.templateId!=undefined){processDefaultTMenuData(u,u.templateId);processQMenuData(u,u.templateId)}addOnBlurForActivityFlds(u);ActivityFocus.setFocusNode(u);setTimeout(ActivityFocus.setPositionInFocusNode,1000)}else{if(u.showTemplateDialog=="true"){f=u.activityId;activityType=u.activityType;choiceNode=u.choiceNode;setDialog(choiceNode,activityType,f)}else{displayErrors(u)}}return u},error:function(u,s){dijit.byId("pleasewait").hide();var q=getDisplayMessageObj("Request to open SR Activity for update failed or timed out.",2);displayErrors(q);console.debug("Request to open SR Activity for update failed or timed out.",u)}});p.addCallback(function(q){setTimeout(populateResolutionAfterCategory(q),1000);return q})}function processToolbarItem(item,parentMenu){var separator=false;if(item.separator!=null){separator=item.separator}var label=item.label;var menuId=item.menuId;var children=null;if(item.children!=null){children=item.children[0]}var disabled=false;var toolTip="";if(item.disabled!=null){disabled=item.disabled}if(item.toolTip!=null){toolTip=item.toolTip}if(separator){parentMenu.addChild(new dijit.MenuSeparator())}else{if(children==null){var action=item.onClick;var mi=dijit.byId(menuId+"menuItem");var miDiv=dijit.byId(menuId+"menuItemDiv");if(miDiv!=null){miDiv.destroyRecursive()}if(mi!=null){mi.destroyRecursive()}miDiv=dojo.doc.createElement("div");miDiv.setAttribute("id",menuId+"miDiv");mi=new dijit.MenuItem({id:menuId+"menuItem",label:label,disabled:disabled,parentMenu:parentMenu,onClick:function(){eval(action.toString())},_onHover:function(){showTooltip2(toolTip,menuId+"menuItem");this.getParent().onItemHover(this)}},miDiv);parentMenu.addChild(mi)}else{var oldSubM=dijit.byId(menuId+"SubMenu");if(oldSubM!=null){oldSubM.destroyRecursive()}var pSubMenu=new dijit.Menu({id:menuId+"SubMenu",parentMenu:parentMenu});for(var j=0;j<children.length;j++){var child=children[j];processToolbarItem(child,pSubMenu)}var popupM=dijit.byId("popup"+menuId);if(popupM!=null){popupM.destroy()}parentMenu.addChild(new dijit.PopupMenuItem({label:label,popup:pSubMenu,id:"popup"+menuId}))}}}var displayError=function(a,b){alert(a)};function processToolbarData(b){var a=b.toolbarNode;if(a==undefined){return}var g="srDetail";var f=document.getElementById("toolbar1");if(f==null){return}f.innerHTML="";dojo.forEach(a,function(w){var v=w.label;var u=w.iconClass;var o=true;var q=w.menuId;var h=document.createElement("div");h.setAttribute("style","overflow:auto");var m=new dijit.Menu({},h);var s=dijit.byId(q+"Button");if(s!=null){s.destroyRecursive()}var y=new dijit.form.DropDownButton({id:q+"Button",label:v,showLabel:o,dropDown:m});f.appendChild(y.domNode);var x={identifier:"menuId",label:"menuId",items:w.children[0]};var p=dijit.byId(q+"pmenu");if(p!=null){p.destroyRecursive()}p=new dijit.Menu({id:q+"pmenu"});y.addChild(p);var l=new dojo.data.ItemFileReadStore({data:x});l.fetch({onItem:function(z,A){processToolbarItem(z,m)},onError:displayError,queryOptions:{deep:true}});m.startup()})}function loadToolbarData(o,m){var b=SRMJSTimer.startTimer("refreshSRDetail_loadODMToolbarData_"+getSrNumber());buildMouseShortcuts();buildTopBottomKeyboardShortcuts();var p=toolbarMap.findIt("toolbar");m=(m!=undefined&&m===true)?true:false;toggleODMRefreshIndicator(true,false,"");if(p==-1||o||m){toolbarMap.remove("toolbar");var a=getActiveSrId();var h=getQueryTabName();var f=getSrModId();var g=getSrNumber();dojo.xhrPost({url:"../../../ToolbarRequest",preventCache:true,content:{srId:a,queryTabName:h,modId:f,activeSR:g,resetODM:m},handleAs:"json",preventCache:true,load:function(v,s){if(v!=undefined&&v.error!=undefined){var q=(v.error!=undefined)?v.error.opResult:v.opResult;var u=(q!=undefined&&q.length>0&&q[0].message!=undefined)?q[0].message:"Failed to retrieve data for building ODM Train and Create Activity Menus.";toggleODMRefreshIndicator(false,true,u)}else{toggleODMRefreshIndicator(false,false,"")}processToolbarData(v);buildODMTrain(v);if(v!=undefined&&v.error==undefined){toolbarMap.put("toolbar",v)}SRMJSTimer.endTimer(b);return v},error:function(q,s){toggleODMRefreshIndicator(false,true,"Failed to retrieve data for building ODM Train and Create Activity Menus.")}})}else{var l=toolbarMap.get("toolbar");processToolbarData(l);buildODMTrain(l);SRMJSTimer.endTimer(b);toggleODMRefreshIndicator(false,false,"")}}function buildMouseShortcuts(){document.body.focus();var b=dojo.byId("mouse_shortcuts");b.innerHTML="";var g=document.createElement("table");var f=document.createElement("tbody");g.appendChild(f);g.setAttribute("width","130px");g.setAttribute("cellSpacing","0px");g.setAttribute("cellPadding","0px");setMouseShortcutsNodeStyle(g);if(b!=undefined){b.appendChild(g)}var a=!SRUtils.isSRClosed();var h=document.createElement("tr");f.appendChild(h);l=document.createElement("td");setMouseShortcutsNodeStyle(l);addShortcut(l,"AP","Create Activity: ODM Action Plan","createActivity('ODM Action Plan', '_first_')",a);h.appendChild(l);var l=document.createElement("td");setMouseShortcutsNodeStyle(l);addShortcut(l,"CB","Create Activity: Collaboration","createActivity('Collaboration', '_first_')",a);h.appendChild(l);l=document.createElement("td");setMouseShortcutsNodeStyle(l);addShortcut(l,"CF","Create Activity: ODM Customer Feedback","createActivity('ODM Customer Feedback', '_first_')",a);h.appendChild(l);l=document.createElement("td");setMouseShortcutsNodeStyle(l);addShortcut(l,"CI","Create Activity: Call Inbound","createActivity('Call - Inbound', '_first_')",a);h.appendChild(l);l=document.createElement("td");setMouseShortcutsNodeStyle(l);addShortcut(l,"TC","Create Activity: ODM Test Case","createActivity('ODM Test Case', '_first_')",a);h.appendChild(l);h=document.createElement("tr");f.appendChild(h);l=document.createElement("td");setMouseShortcutsNodeStyle(l);addShortcut(l,"Note","Create Activity: Notes","createActivity('Notes', 'Generic Note')",a);h.appendChild(l);l=document.createElement("td");setMouseShortcutsNodeStyle(l);addShortcut(l,"DC","Create Activity: ODM Data Collection","createActivity('ODM Data Collection', 'ODM Data Collection 2')",a);h.appendChild(l);l=document.createElement("td");setMouseShortcutsNodeStyle(l);addShortcut(l,"CO","Create Activity: Call Outbound","createActivity('Call - Outbound', '_first_')",a);h.appendChild(l);l=document.createElement("td");setMouseShortcutsNodeStyle(l);addShortcut(l,"RE","Create Activity: ODM Research","createActivity('ODM Research', '_first_')",a);h.appendChild(l);l=document.createElement("td");setMouseShortcutsNodeStyle(l);if(SRUtils.isSRClosed()){addShortcut(l,"EM","Create Activity: Email Outbound","createActivity('Email - Outbound', 'Email - Outbound: Conclude SR')",true)}else{addShortcut(l,"EM","Create Activity: Email Outbound","createActivity('Email - Outbound', 'Email - Outbound: Update SR')",true)}h.appendChild(l)}function setMouseShortcutsNodeStyle(a){a.setAttribute("class","odmTrain");if(dojo.isIE){a.className="odmTrain"}}function addShortcut(node,text,tooltip,onclick,enabled){if(enabled){try{var keyCombArray=getKBShortcutArray(text);if(keyCombArray!=undefined&&keyCombArray!=null&&dojo.isArray(keyCombArray)&&keyCombArray.length>0){addKeyboardShortcutMultiple(keyCombArray,onclick)}}catch(Exception){console.log("Error encountered in creating keyboard shortcuts for the activity shortcut! Proceeding ...")}var anchor=document.createElement("a");anchor.appendChild(document.createTextNode(text));node.appendChild(anchor);dojo.connect(anchor,"onclick",function(event){console.debug("Execute shortcut:",onclick);eval(onclick)});anchor.setAttribute("href","#");anchor.setAttribute("title",tooltip);anchor.setAttribute("alt",tooltip)}else{var textNode=document.createTextNode(text);node.appendChild(textNode);node.setAttribute("title",tooltip)}}function getKBShortcutArray(b){var a=new Array();var f=getPageSytemParamValue(SRM_KEYBOARD_SHORTCUT_SRNAV);var g=f[b];var a=(g!=undefined&&dojo.isArray(g)&&g.length>0)?g:(new Array());return a}function addKeyboardShortcutMultiple(keyCombArray,invokeFunction,target,isPropagate){var doPropagate=false;if(isPropagate!=undefined&&(isPropagate==true||isPropagate=="true")){doPropagate=true}if(keyCombArray!=undefined&&keyCombArray!=null&&keyCombArray.length>0&&invokeFunction!=undefined&&invokeFunction!=null&&dojo.string.trim(invokeFunction)!=""){dojo.forEach(keyCombArray,function(keyCombination){shortcut.remove(keyCombination);shortcut.add(keyCombination,function(event){console.log(keyCombination+" key combination was just invoked");return eval(invokeFunction)},{type:"keydown",disable_in_input:false,propagate:doPropagate,target:(target==undefined)?document.documentElement:target})})}}function buildODMTrain(data,trainDiv,showlinks,showConsultative,showCorrective){var trainDiv=(trainDiv!=undefined&&trainDiv!=null)?trainDiv:dojo.byId("train1");var trainNode=data.trainNode;if(trainNode==undefined){return}trainDiv.innerHTML="";var table=document.createElement("table");var tbody=document.createElement("tbody");table.appendChild(tbody);table.setAttribute("width","180px");table.setAttribute("class","odmTrain");table.setAttribute("cellSpacing","0px");table.setAttribute("cellPadding","0px");if(dojo.isIE){table.className="odmTrain"}var rows=trainNode.rows;var fixedCells=trainNode.nonSeqCell;showConsultative=(showConsultative==undefined)?true:showConsultative;showCorrective=(showCorrective==undefined)?true:showCorrective;window.count=0;if(dojo.isArray(rows)){var counter=0;dojo.forEach(rows,function(item){if((counter==0&&showCorrective)||(counter==1&&showConsultative)){var tr=document.createElement("tr");tbody.appendChild(tr);var cells=item.cells;dojo.forEach(cells,function(citem){var td=document.createElement("td");var text=citem.cellText;var cellcolor=citem.color;var onclick=citem.onclick;var rowspan=citem.rowspan;var colspan=citem.colspan;var toolTip=citem.toolTip;var anchor=document.createElement("a");anchor.appendChild(document.createTextNode(text));td.appendChild(anchor);if(onclick!=undefined&&onclick!=""&&!SRUtils.isSRClosed()){anchor.setAttribute("href","#");dojo.connect(anchor,"onclick",function(event){eval(onclick)})}if(data.buildODMForClosure!=undefined&&data.buildODMForClosure==true&&(showlinks==undefined||(showlinks!=undefined&&showlinks))){anchor.setAttribute("href","#");dojo.connect(anchor,"onclick",function(event){SRClosureProcess.odmTrainOnClick(citem.activityType)})}anchor.setAttribute("title",toolTip);anchor.setAttribute("alt",toolTip);if(cellcolor!=undefined&&cellcolor!=""){td.setAttribute("bgcolor",cellcolor)}td.setAttribute("rowspan",rowspan);td.setAttribute("colspan",colspan);td.setAttribute("class","odmTrain");if(dojo.isIE){td.className="odmTrain";td.colSpan=colspan;td.rowSpan=rowspan;td.style.backgroundColor=cellcolor}tr.appendChild(td)});if(counter==0){dojo.forEach(fixedCells,function(fitem){var td=document.createElement("td");var text=fitem.cellText;var cellcolor=fitem.color;var onclick=fitem.onclick;var rowspan=fitem.rowspan;var colspan=fitem.colspan;var toolTip=fitem.toolTip;if(onclick!=undefined&&onclick!=""&&!SRUtils.isSRClosed()){var anchor=document.createElement("a");anchor.setAttribute("title",toolTip);anchor.setAttribute("alt",toolTip);anchor.appendChild(document.createTextNode(text));anchor.setAttribute("href","#");td.appendChild(anchor);dojo.connect(anchor,"onclick",function(event){eval(onclick)})}else{var anchor=document.createElement("a");anchor.setAttribute("title",toolTip);anchor.setAttribute("alt",toolTip);anchor.appendChild(document.createTextNode(text));td.appendChild(anchor);if(data.buildODMForClosure!=undefined&&data.buildODMForClosure==true&&(showlinks==undefined||(showlinks!=undefined&&showlinks))){anchor.setAttribute("href","#");dojo.connect(anchor,"onclick",function(event){SRClosureProcess.odmTrainOnClick(fitem.activityType)})}}if(cellcolor!=undefined&&cellcolor!=""){td.setAttribute("bgcolor",cellcolor)}td.setAttribute("rowspan",rowspan);td.setAttribute("colspan",colspan);td.setAttribute("class","odmTrain");if(dojo.isIE){td.className="odmTrain";td.colSpan=colspan;td.rowSpan=rowspan;td.style.backgroundColor=cellcolor}tr.appendChild(td)})}}counter++})}if(trainDiv!=undefined){trainDiv.appendChild(table)}}var refreshOnClick=null;var ODM_TRAIN_REFRESH_IMG="odmTrainRefreshImg";var ODM_TRAIN_LOADING_IMG="odmTrainLoadingImg";var ODM_TRAIN_ERROR_TOOLTIP="odmTrainErrorToolTip";var ODM_TRAIN_REFRESH_MSG="odmTrainRefreshMsg";function refreshODMTrainNode(){if(refreshOnClick!=null){dojo.disconnect(refreshOnClick)}var f=document.createElement("table");var b=document.createElement("tbody");f.appendChild(b);var g=document.createElement("tr");b.appendChild(g);var l=document.createElement("td");g.appendChild(l);var a=document.createElement("img");dojo.attr(a,{src:"../images/repeating_status.gif",id:ODM_TRAIN_REFRESH_IMG,title:"Refresh ODM Train & Workflow menu"});dojo.style(a,{"vertical-align":"middle","padding-left":"1px","margin-left":"1px"});l.appendChild(a);refreshOnClick=dojo.connect(a,"onclick","refreshODMTrain");var h=document.createElement("img");dojo.attr(h,{src:"../images/ajax-loader.gif",id:ODM_TRAIN_LOADING_IMG,title:"Loading data to build ODM Train & Workflow Menu"});dojo.style(h,{display:"none","vertical-align":"middle","padding-left":"1px","margin-left":"1px"});l.appendChild(h);return f}function refreshODMTrain(){if(window.activityInProgress==true){alert("SR Activity Update is in progress, ODM refresh is not allowed during this time.");return}loadToolbarData(true,true)}function toggleODMRefreshIndicator(a,g,b){if(!dojo.byId(ODM_TRAIN_REFRESH_IMG)){return}if(dijit.byId(ODM_TRAIN_ERROR_TOOLTIP)){dijit.byId(ODM_TRAIN_ERROR_TOOLTIP).destroyRecursive()}if(a===true){dojo.style(dojo.byId(ODM_TRAIN_REFRESH_IMG),"display","none");dojo.style(dojo.byId(ODM_TRAIN_LOADING_IMG),"display","")}else{if(a===false){dojo.style(dojo.byId(ODM_TRAIN_REFRESH_IMG),"display","");dojo.style(dojo.byId(ODM_TRAIN_LOADING_IMG),"display","none")}}if(g===true&&b!=undefined){var f=new dijit.Tooltip({id:ODM_TRAIN_ERROR_TOOLTIP,label:b,connectId:[ODM_TRAIN_REFRESH_MSG]});dojo.byId(ODM_TRAIN_REFRESH_MSG).title=b;if(dojo.byId(ODM_TRAIN_REFRESH_MSG)){dojo.byId(ODM_TRAIN_REFRESH_MSG).innerHTML="Error "}dojo.style(dojo.byId(ODM_TRAIN_REFRESH_MSG),"display","")}else{if(g==undefined||g==false){if(dojo.byId(ODM_TRAIN_REFRESH_MSG)){dojo.byId(ODM_TRAIN_REFRESH_MSG).innerHTML=""}dojo.style(dojo.byId(ODM_TRAIN_REFRESH_MSG),"display","none")}}}function filterD(source,lmap){var combo=dijit.byId("tcombo1");if(combo!=null){var comboVal=combo.getValue();var text1=dijit.byId("tsearchText");var textVal;if(text1!=null){textVal=text1.getValue()}if(textVal!=null&&textVal!=""){var result=lmap.findIt(source);if(result!=-1){var dstore=lmap.get(source);var queryStr="{"+comboVal+': "'+textVal+'"}';var queryObj=eval("("+queryStr+")");var grid=dijit.byId("grid");if(grid!=null){grid.model.query=queryObj;grid.model.refresh()}}}}}function highlight(b){var a=dojo.byId(ACTIVITY_ID_ANCHOR+b);if(b!=null&&b!=""){dijit.scrollIntoView(a);a.focus()}var g=dojo.byId(ACTIVITY_DIV_ID_PREFIX+b);if(g!=undefined&&g!=null){var f=dojo.query("div.dijitTitlePaneContentInner");dojo.forEach(f,function(h){if(dojo.isDescendant(h,g)){var l=dojo.animateProperty({node:h,duration:10000,properties:{backgroundColor:{start:"#FFFF88",end:"#FFFF88"}}});l.play()}else{var l=dojo.animateProperty({node:h,duration:10000,properties:{backgroundColor:{start:"#FFFFFF",end:"#FFFFFF"}}});l.play()}})}}function showTooltip2(b,a){if(b==undefined||b==""){return}var g=dijit.byId("menuToolTip");if(g!=null){g.destroy()}var f=dojo.doc.createElement("span");g=new dijit.Tooltip({id:"menuToolTip",label:b,connectId:[a]},f)}function hideTooltip(){var a=dijit.byId("menuToolTip");if(a!=undefined){a.hide();a.destroy()}}function buildTopBottomKeyboardShortcuts(){try{var g=getKBShortcutArray("PAGE_BOTTOM");addKeyboardShortcutMultiple(g,"scrollToBottom()");var h=getKBShortcutArray("PAGE_TOP");addKeyboardShortcutMultiple(h,"scrollToTop()");var f=getKBShortcutArray("DO_NOTHING");addKeyboardShortcutMultiple(f,"doNothingX(event)");var b=getKBShortcutArray("MAX_SRHEADER");addKeyboardShortcutMultiple(b,"hotKeyMaxSrHeader()");var a=getKBShortcutArray("OPEN_REF");addKeyboardShortcutMultiple(a,"hotKeyOpenReference('elementsAccordion')");saveKeyCombArray=getKBShortcutArray("SAVE");addKeyboardShortcutMultiple(saveKeyCombArray,"saveInContext(event)");cancelKeyCombArray=getKBShortcutArray("CANCEL");addKeyboardShortcutMultiple(cancelKeyCombArray,"cancelInContext(event)")}catch(l){console.log("Problem encountered setting up keyboard shortcuts in buildTopBottomKeyboardShortcuts. Proceeing...."+l)}}function scrollToBottom(){window.scrollTo(0,document.body.scrollHeight)}function scrollToTop(){window.scrollTo(0,0)}function doNothingX(a){console.debug("invoked doNothingX() function");dojo.stopEvent(a);return false}function saveInContext(l){var h=l.target?l.target:l.srcElement;var f=dojo.isDescendant(h,"activityTemplateTable");var a=dojo.isDescendant(h,"unmaximizedSRHeaderTable");var g=dojo.isDescendant(h,"MaximizedSRHeaderDialog");var o=dojo.isDescendant(h,"addEditSRChildrenDialog");var m=dojo.isDescendant(h,"bugDialog");var b=dojo.isDescendant(h,UNSET_24x7_REASON_CODE_DIALOG);if(f){simulateClick("saveButtonX",dojo.byId("activityTemplateTable"))}else{if(a){saveSRHeader()}else{if(g){simulateClick("saveButtonX",dijit.byId("MaximizedSRHeaderDialog").domNode)}else{if(o){simulateClick("saveButtonX",dijit.byId("addEditSRChildrenDialog").domNode)}else{if(m){simulateClick("saveButtonX",dijit.byId("bugDialog").domNode)}else{if(b){simulateClick("saveButtonX",dijit.byId(UNSET_24x7_REASON_CODE_DIALOG).domNode)}}}}}}}function cancelInContext(l){var h=l.target?l.target:l.srcElement;var f=dojo.isDescendant(h,"activityTemplateTable");var a=dojo.isDescendant(h,"unmaximizedSRHeaderTable");var g=dojo.isDescendant(h,"MaximizedSRHeaderDialog");var o=dojo.isDescendant(h,"addEditSRChildrenDialog");var m=dojo.isDescendant(h,"bugDialog");var b=dojo.isDescendant(h,UNSET_24x7_REASON_CODE_DIALOG);if(f){simulateClick("cancelButtonX",dojo.byId("activityTemplateTable"))}else{if(a){resetSRHeader()}else{if(g){simulateClick("cancelButtonX",dijit.byId("MaximizedSRHeaderDialog").domNode)}else{if(o){simulateClick("cancelButtonX",dijit.byId("addEditSRChildrenDialog").domNode)}else{if(m){simulateClick("cancelButtonX",dijit.byId("bugDialog").domNode)}else{if(b){simulateClick("cancelButtonX",dijit.byId(UNSET_24x7_REASON_CODE_DIALOG).domNode)}}}}}}}function simulateClick(f,g){var b=dojo.query("."+f,g);if(b!=undefined&&b[0]!=undefined){var l=b[0];var a=dijit.byNode(l);var h=a.onClick;h.call(undefined)}}function hotKeyMaxSrHeader(){var b=dijit.byId("srHeader");var a=b.resizeImgNode;a.click();console.log("max")}function hotKeyOpenReference(h){var b=dijit.byId(h);var a=b.getChildren();if(a!=undefined&&dojo.isArray(a)&&a.length>0&&a[0]!=undefined){var g=a[0];var f=g._onTitleClick;f.call(g);console.log("open ref "+h)}}var DEFECT_DWB_URL="DEFECT_DWB_URL";var DEFECT_BUGDB_URL="DEFECT_BUGDB_URL";var DEFECT_EBIZ_URL="DEFECT_EBIZ_URL";var DEFECT_ICE_URL="DEFECT_ICE_URL";var DEFECT_BUGDB_ESC_URL="DEFECT_BUGDB_ESC_URL";var DEFECT_BUGDB_P1_URL="DEFECT_BUGDB_P1_URL";var DEFECT_BUGDB_OOB_URL="DEFECT_BUGDB_OOB_URL";var DEFECT_BUGTRAQ_URL="DEFECT_BUGTRAQ_URL";var DEFECT_SUNOTHER_URL="DEFECT_SUNOTHER_URL";var CHILD_TYPE_DEFECT="Defect";function launchExternalBugApp(a,b){var f=evaluateExternalBugAppURL(a,b);if(f!=null&&dojo.string.trim(f)!=""){if(b=="eBiz"&&!dojo.isIE){if(confirm("Your browser is not Internet Explorer. The Ebiz Application works only with Internet Explorer. \nClick cancel, right click on the same bug icon to view the url. Copy and paste it in an Internet Explorer session.\nDo you still want to continue opening this link using your non IE browser ?")){window.open(f,b)}}else{window.open(f,b)}}else{alert("External Defect Application cannot be launched due to incorrect URL provided. Please report this problem to the System Administrator")}}function evaluateExternalBugAppURL(b,g){var l=null;var h=vlinkHrefMap;var f=null;if(g=="IBug"){f=DEFECT_DWB_URL}else{if(g=="BugDB"){f=DEFECT_BUGDB_URL}else{if(g=="eBiz"){f=DEFECT_EBIZ_URL}else{if(g=="ICE"){f=DEFECT_ICE_URL}else{if(g=="SunBugTraq"){f=DEFECT_BUGTRAQ_URL}else{if(g=="SunOther"){f=DEFECT_SUNOTHER_URL}}}}}}var a=h.get(f);if(a!=null&&a.href!=null&&dojo.string.trim(a.href)!=""&&b!=null&&dojo.string.trim(b)!=null){l=a.href.replace("%%REFID%%",b)}return l}function applyContextMenuAction(){dojo.query(".externalBugIcon").forEach(function(a){dojo.connect(a,"oncontextmenu",function(p){p.preventDefault();var b=a.title;var s=a.name;if(dijit.byId(s+"tt")!=null){dijit.byId(s+"tt").destroyRecursive()}var u=new dijit.TooltipDialog({id:s+"tt"});dojo.addClass(u.domNode,"dijitInline");var v=document.createElement("table");var o=document.createElement("tbody");v.appendChild(o);var l=document.createElement("tr");o.appendChild(l);var g=document.createElement("td");var q=document.createElement("label");q.innerHTML=b;g.appendChild(q);l.appendChild(g);var h=document.createElement("tr");o.appendChild(h);var f=document.createElement("td");h.appendChild(f);dojo.attr(f,{align:"left"});var m=new dijit.form.Button({label:"Close"});dojo.connect(m,"onClick",this,dojo.hitch(this,closeButton,u));dojo.connect(u,"onBlur",this,dojo.hitch(this,closeButton,u));u.setContent(v);f.appendChild(m.domNode);m.focus();u.startup();dijit.popup.open({popup:u,around:a})})});dojo.query(".externalBugIconMenu").forEach(function(l){var a=l.title;var h=l.id;var g=dijit.byId("bugDBMenu_"+h);if(g!=null){dijit.byId("bugDBMenu_"+h).destroyRecursive()}var b=new dijit.Menu({targetNodeIds:[h],id:"bugDBMenu_"+h,leftClickToOpen:true});var f={};f.nodeId=h;f.url=a;b.params=f;b=addExternalBugMenuOptions(b);b.startup()});dojo.query(".externalEbizIconMenu").forEach(function(l){var b=l.title;var h=l.id;var a=l.name;var g=dijit.byId("eBizMenu_"+h);if(g!=null){dijit.byId("eBizMenu_"+h).destroyRecursive()}var f=new dijit.Menu({targetNodeIds:[h],id:"eBizMenu_"+h,leftClickToOpen:true});f.addChild(new dijit.MenuItem({label:"Refresh",onClick:function(m){refreshEbizDefect(h,headerDataAsJson.SRId)}}));f.addChild(new dijit.MenuItem({label:"Open in Ebiz",onClick:function(m){launchExternalBugApp(a,"eBiz")}}));f.startup()})}function addExternalBugMenuOptions(a){if(a==undefined){return}a.addChild(new dijit.MenuItem({label:"Update Defect",onClick:function(b){bugDBPunchOut("update",this.getParent().params.url)}}));a.addChild(new dijit.MenuItem({label:"Escalate",onClick:function(b){bugDBPunchOut(DEFECT_BUGDB_ESC_URL,this.getParent().params.nodeId)}}));a.addChild(new dijit.MenuItem({label:"Severity 1",onClick:function(b){bugDBPunchOut(DEFECT_BUGDB_P1_URL,this.getParent().params.nodeId)}}));a.addChild(new dijit.MenuItem({label:"One Off Backport",onClick:function(b){bugDBPunchOut(DEFECT_BUGDB_OOB_URL,this.getParent().params.nodeId)}}));return a}function closeButton(a){dijit.popup.close(a);a.destroyRecursive()}function bugDBPunchOut(b,a){var f=getBugDBPunchOutUrl(b,a);if(f!=false){window.open(f)}}function getBugDBPunchOutUrl(g,f){var l=null;var h=vlinkHrefMap;var b=null;if(g=="update"){l=f}else{if(g==DEFECT_BUGDB_ESC_URL&&headerDataAsJson.Escalation!="Escalated"&&headerDataAsJson.Severity!="1-Critical"){alert("You are trying to escalate this defect, but the SR is not yet escalated and not Severity 1. The SR must be escalated or Severity 1 in order to escalate the related defect.");return false}if(g==DEFECT_BUGDB_P1_URL&&headerDataAsJson.Severity!="1-Critical"){alert("You are trying to raise this defect to a Severity 1, but the SR is not Severity 1. The SR must be Severity 1 in order to request a Severity 1 on the related defect.");return false}var a=h.get(g);if(a!=null&&a.href!=null&&dojo.string.trim(a.href)!=""&&f!=null&&dojo.string.trim(f)!=null){l=a.href.replace("%%REFID%%",f);l=l.replace("%%SRNO%%",headerDataAsJson.SRNumber)}}return l}function refreshEbizDefect(b,a){var f={url:"../../../SRDefectRequest",content:{action:"refreshEbizDefect",srid:a,id:b},handleAs:"json",load:function(g){if(g!=null&&g.status=="SUCCESS"){var h=SRReferences.refreshReference(true,CHILD_TYPE_DEFECT);h.addCallback(function(){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}alert("Refresh successful")})}else{if(g!=null&&g.status=="FAIL"){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}alert("Refresh Failed: "+g.data)}}},error:function(g){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(g.opStatus!=null){alert(g.opStatus)}displayErrors(g);return g}};if(!dijit.byId("pleasewait").open){dijit.byId("pleasewait").show()}dojo.xhrPost(f)}var SHOW_PREV_CLASSIFIED_ITEMS="Show Previously Classified Items";var HIDE_PREV_CLASSIFIED_ITEMS="Hide Previously Classified Items";var relatedBugStore=null;var relatedSrStore=null;var RELATED_TO_ISSUE="Related to Issue";var REFERENCED="Referenced";var UNDO="undo";var TAG_AS_RELATED_TO_ISSUE='Tag as "'+RELATED_TO_ISSUE+'"';var GRP_ASG_RESOURCES="GRPAsgResources";var transferContext={};var MOSSP_SRCLOSE_CP="MOSSP_SRCLOSE_CP";var MOSSP_SRCLOSE_IFRAME_ID="mossp_srclose_iframe";var useRewriteSRClose=false;function copySR(){dijit.byId("pleasewait").show();dojo.xhrPost({url:"../../../SRHeaderRequest",preventCache:true,content:{action:"copysr",queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()},handleAs:"json",load:function(h,f){dijit.byId("pleasewait").hide();if(isObjectErroneous(h)){displayErrors(h)}else{console.debug(h);var b=h.opResult[0].message;console.log(b);var g="<p>The Service Request # <b>"+b+'</b> was created.<p><div align="right"><input dojoType="dijit.form.Button" label="Click here to load the new SR #'+b+'" onclick="refreshSR(getSRQstr(\''+b+'\'));dijit.byId(\'SRcopiedDialog\').hide()" /> &nbsp &nbsp<input dojoType="dijit.form.Button" label="Close" onclick="dijit.byId(\'SRcopiedDialog\').hide();"/></div>';var a=dijit.byId("SRcopiedDialog");if(a!=null){a.destroyRecursive()}a=new dijit.Dialog({refocus:false,id:"SRcopiedDialog",title:"SR Copy",style:"width: 400px; height: 150px; z-index:1;"});a.setContent(g);a.startup();setTimeout(function(){a.show()},"50")}},error:function(b,a){dijit.byId("pleasewait").hide();alert("Failed to copy sr")}})}var TransferUtils={};TransferUtils.servlet="../../../SRTransfer";TransferUtils.initMode=true;TransferUtils.startSRTransfer=function(){TransferUtils.loadContext()};TransferUtils.showWindow=function(){var f;if(TransferUtils.getContext().max_no_transfer_allowed_reached==true){var b=confirm("This Service Request has already reached the recommended maximum number of transfers. Do you want to proceed?");if(!b){return}}dijit.byId("pleasewait").show();dojo.xhrGet({url:"transferTemplateStep.html"+getVersion(),load:function(g){if("Non-Technical"==SRUtils.getCurrentSR().SRType){f=g.replace(/SUBCATEGLOVURLPLACEHOLDER/,"../../../SRHeaderRequest?action=loadlov&amp;lov=SR_SUBCATEGORY_CD")}else{if("Technical"==SRUtils.getCurrentSR().SRType){f=g.replace(/SUBCATEGLOVURLPLACEHOLDER/,"")}}a();dijit.byId("pleasewait").hide()},error:function(g){dijit.byId("pleasewait").hide();console.log("Failed to load transfer template")}});function a(){var s=getLargePopupDimensions();var p=s.width-50;var q=s.height-50;var l=dijit.byId("transferDialog");if(l==null){l=new dijit.Dialog({refocus:false,id:"transferDialog",title:"",style:"width: 770px; height: "+q+"px;z-index:1;"})}l.setContent(f);var g=dojo.byId("transfer_type");if(TransferUtils.getContext().security_sr==false){g.remove(5)}else{if(TransferUtils.getContext().security_sr==true){g.remove(1);g.remove(1);g.remove(1);g.remove(1)}}l.startup();setTimeout(function(){l.show()},"0");var h=" ";dojo.byId("transfer_sr_summary").innerHTML=headerDataAsJson.Summary;dojo.byId("transfer_srnumber").innerHTML=headerDataAsJson.SRNumber;dojo.byId("transfer_counter").innerHTML=headerDataAsJson.TransferCounter;dojo.byId("transfer_support_group").innerHTML=headerDataAsJson.Group;dojo.byId("transfer_owner").innerHTML=headerDataAsJson.Owner;dojo.byId("transfer_srtype").innerHTML=headerDataAsJson.SRType;dojo.byId("transfer_srsubtype").innerHTML=headerDataAsJson.SubType;dojo.byId("transfer_product").innerHTML=headerDataAsJson.Product;dojo.byId("transfer_product_version").innerHTML=headerDataAsJson.ProductVersion;dojo.byId("transfer_component").innerHTML=headerDataAsJson.Component;dojo.byId("transfer_subcomponent").innerHTML=headerDataAsJson.SubComponent;dojo.byId("transfer_category").innerHTML=headerDataAsJson.CategoryDescription;var o=dojo.byId("transfer_new_category_id").value;if(o){var m=getTransferClarificationCount(o);if(m>0){dojo.byId("transfer_mandatory_clarification").style.visibility="visible"}else{dojo.byId("transfer_mandatory_clarification").style.visibility="hidden"}}dojo.byId("transfer_subcategory").innerHTML=headerDataAsJson.SubCategory;dojo.byId("transfer_clarification").innerHTML=headerDataAsJson.clarificationName;dojo.byId("transfer_severity").innerHTML=headerDataAsJson.Severity;dojo.byId("transfer_outage").innerHTML=headerDataAsJson.OutageType;if(headerDataAsJson.FullSupport=="true"){dojo.byId("transfer_24x7").innerHTML="Yes"}else{dojo.byId("transfer_24x7").innerHTML="No"}dojo.byId("transfer_language").innerHTML=headerDataAsJson.Language;dojo.byId("transfer_sr_number").value=headerDataAsJson.SRNumber}};TransferUtils.fillFormNewFields=function(){dojo.byId("transfer_new_support_group").value=headerDataAsJson.Group;dijit.byId("transfer_new_sub_type").setValue(headerDataAsJson.SubType);dijit.byId("transfer_new_sr_type").setValue(headerDataAsJson.SRType);dojo.byId("transfer_new_product").value=headerDataAsJson.Product;dojo.byId("transfer_new_product_id").value=headerDataAsJson.ProductId;dojo.byId("transfer_new_product_version").value=headerDataAsJson.ProductVersion;dojo.byId("transfer_new_component").value=headerDataAsJson.Component;dojo.byId("transfer_new_component_id").value=headerDataAsJson.ComponentId;dojo.byId("transfer_new_subcomponent").value=headerDataAsJson.SubComponent;dojo.byId("transfer_new_subcomponent_id").value=headerDataAsJson.SubComponentId;dojo.byId("transfer_new_category_id").value=headerDataAsJson.Category;dojo.byId("transfer_new_category").value=headerDataAsJson.CategoryDescription;var b=dojo.byId("transfer_new_category_id").value;if(b){var a=getTransferClarificationCount(b);if(a>0){dojo.byId("transfer_mandatory_clarification").style.visibility="visible"}else{dojo.byId("transfer_mandatory_clarification").style.visibility="hidden"}}dojo.byId("transfer_new_clarification_id").value=headerDataAsJson.clarificationId;dojo.byId("transfer_new_clarification").value=headerDataAsJson.clarificationName;dijit.byId("transfer_new_subcategory").setValue(headerDataAsJson.SubCategory);dijit.byId("transfer_new_severity").setValue(headerDataAsJson.Severity);dijit.byId("transfer_new_outage").setValue(headerDataAsJson.OutageType);if(headerDataAsJson.FullSupport=="true"){dojo.byId("transfer_new_24x7").checked="checked"}dojo.byId("transfer_new_language").value=headerDataAsJson.Language;dojo.byId("transfer_new_language_id").value=headerDataAsJson.LanguageId};function hideTransferDialog(){dijit.byId("transferDialog").hide()}TransferUtils.getTransferType=function(){var a=dojo.byId("transfer_type");return a.options[a.selectedIndex].value};function transferGoToStep(u){var z=dojo.byId("transfer_current_step");var b=z.value;var x=parseInt(b)+u;if((x<1)||(x>4)){console.log("next step is "+x+". THIS SHOULD NEVER HAPPEN!");return}function q(F,E,D,C,B,A){return{type1:F,type2:E,type3:D,type4:C,type5:B,type6:A}}var v={transfer_picker_owner:q("Y","Y","N","N","N","Y"),transfer_picker_product:q("N","Y","N","Y","N","N"),transfer_picker_product_version:q("N","Y","N","Y","N","N"),transfer_picker_component:q("N","Y","N","Y","N","N"),transfer_picker_subcomponent:q("N","Y","N","Y","N","N"),transfer_picker_category:q("N","Y","N","Y","N","N"),transfer_picker_clarification:q("N","Y","N","Y","N","N"),transfer_picker_language:q("N","Y","N","Y","N","N")};var p=dojo.byId("transfer_type").value;if(b==1){m();TransferUtils.fillFormNewFields();TransferUtils.initMode=false;if(isODTechSR()){if((p==2)||(p==3)||(p==4)||(p==6)){console.log("sev Outage listenerz attached");var g=false;function w(){if(g==true){console.log("NOT gonna run sev listener");return}g=true;var B=dijit.byId("transfer_new_severity").getValue();var A=dijit.byId("transfer_new_outage").getValue();console.log("S severity: "+B);console.log("S outage"+A);if((B=="1-Critical")||(B=="2-Significant")){}else{dijit.byId("transfer_new_outage").setValue("");dojo.byId("transfer_new_24x7").checked=""}g=false}function y(){if(g==true){console.log("NOT gonna run outage listener");return}g=true;var B=dijit.byId("transfer_new_severity").getValue();var A=dijit.byId("transfer_new_outage").getValue();console.log("O severity: "+B);console.log("O outage"+A);if(A==""){if(B=="1-Critical"){alert(OD_SEV_RULE_MSG)}dojo.byId("transfer_new_24x7").checked="";dijit.byId("transfer_new_severity").setValue("2-Significant")}else{dojo.byId("transfer_new_24x7").checked="checked";if((B!="1-Critical")&&(B!="2-Significant")){alert(OD_SEV_RULE_MSG);dijit.byId("transfer_new_severity").setValue("1-Critical")}}g=false}dojo.connect(dijit.byId("transfer_new_severity"),"onChange",w);dojo.connect(dijit.byId("transfer_new_outage"),"onChange",y)}}if("Technical"!=SRUtils.getCurrentSR().SRType){dojo.style(dojo.byId("transfer_mandatory_product"),"display","none");dojo.style(dojo.byId("transfer_mandatory_product_version"),"display","none");dojo.style(dojo.byId("transfer_mandatory_comp"),"display","none")}if("Non-Technical"!=SRUtils.getCurrentSR().SRType){dojo.style(dojo.byId("transfer_mandatory_category"),"display","none");dojo.style(dojo.byId("transfer_mandatory_subcategory"),"display","none");dojo.style(dojo.byId("transfer_mandatory_clarification"),"display","none")}if((p==2)||(p==4)||(p==5)||(p==6)){dojo.byId("transfer_new_support_group").value="Unassigned"}else{dojo.byId("transfer_new_support_group").value=headerDataAsJson.Group}if((p==1)||(p==2)){dojo.style(dojo.byId("transfer_mandatory_owner"),"display","inline")}else{dojo.style(dojo.byId("transfer_mandatory_owner"),"display","none")}if(p==5){dijit.byId("transfer_new_sub_type").setValue("Security Group")}if(p==6){dijit.byId("transfer_new_sub_type").setValue("")}dojo.style(dojo.byId("transfer_sr_data"),"display","block");dojo.style(dojo.byId("transfer_message_step_1"),"display","none");dojo.style(dojo.byId("transfer_message_step_2"),"display","block");dojo.byId("transfer_actions_previous").disabled="";dojo.style(dojo.byId("transfer_information_1"),"display","none");dojo.style(dojo.byId("transfer_information_2"),"display","block")}else{if(b==2){if(x==1){dojo.style(dojo.byId("transfer_sr_data"),"display","none");dojo.style(dojo.byId("transfer_message_step_1"),"display","block");dojo.style(dojo.byId("transfer_message_step_2"),"display","none");dojo.byId("transfer_actions_previous").disabled="disabled";dojo.style(dojo.byId("transfer_information_2"),"display","none");dojo.style(dojo.byId("transfer_information_1"),"display","block")}else{if(x==3){if((p==1)||(p==2)){if(dojo.byId("transfer_new_owner").value.length==0){alert("The Owner is mandatory!");return}}if(isODTechSR()&&((p==2)||(p==4)||(p==6))){if(dojo.byId("transfer_new_product").value.length==0){alert("The Product is mandatory!");return}if(dojo.byId("transfer_new_component").value.length==0){alert("The Component is mandatory!");return}}var o=dojo.byId("transfer_new_category_id").value;var f=dojo.byId("transfer_new_clarification_id").value;if(!isTechnicalSR()){if((o)&&(getTransferClarificationCount(o))>0&&(f==""||f=="undefined")){alert("The clarification is mandatory!");return}}var l=dijit.byId("transfer_reason").getValue();if(l.length==0){alert("The reason is mandatory!");return}var s=dojo.byId("transfer_justification").value.length;if(s==0){alert("The justification is mandatory!");return}else{if(s>2000){alert("You have entered "+s+" characters as justification!\nYou can not enter more than 2000 characters as justification.");return}}h();dojo.style(dojo.byId("transfer_information_2"),"display","none");dojo.style(dojo.byId("transfer_information_3"),"display","block");dojo.style(dojo.byId("transfer_page_header"),"display","none");dojo.style(dojo.byId("transfer_page_header_3"),"display","block");dojo.byId("transfer_actions_next").value="Finish";dojo.byId("transfer_reason_readonly").innerHTML=l;dojo.byId("transfer_justification_readonly").innerHTML=dojo.byId("transfer_justification").value}}}else{if(b==3){if(x==2){dojo.style(dojo.byId("transfer_information_3"),"display","none");dojo.style(dojo.byId("transfer_information_2"),"display","block");dojo.style(dojo.byId("transfer_page_header_3"),"display","none");dojo.style(dojo.byId("transfer_page_header"),"display","block");dojo.byId("transfer_actions_next").value="Next";m()}else{if(x==4){x=3;TransferUtils.performTransfer()}}}}}z.value=x;function a(){alert("Transfer Complete. reloading SR...");dijit.byId("pleasewait").hide();dijit.byId("transferDialog").destroyRecursive()}function m(){var A=TransferUtils.getTransferType();for(var B in v){var C=dojo.byId(B);if(v[B]["type"+A]=="Y"){dojo.style(C,"display","inline")}else{dojo.style(C,"display","none")}}if(A==1||A==6){dojo.removeClass(dojo.byId("transfer_new_owner"),"transfer_information_attribute_value");dijit.byId("transfer_new_owner").setDisabled(false);dijit.byId("transfer_new_sr_type").setDisabled(true);dijit.byId("transfer_new_sub_type").setDisabled(true);dojo.addClass(dojo.byId("transfer_new_product"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_product_version"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_component"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_subcomponent"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_category"),"transfer_information_attribute_value");dijit.byId("transfer_new_subcategory").setDisabled(true);dojo.byId("transfer_new_clarification").disabled="enabled";dijit.byId("transfer_new_severity").setDisabled(true);dijit.byId("transfer_new_outage").setDisabled(true);dojo.byId("transfer_new_24x7").disabled="disabled";dojo.addClass(dojo.byId("transfer_new_language"),"transfer_information_attribute_value")}else{if(A==2){dojo.removeClass(dojo.byId("transfer_new_owner"),"transfer_information_attribute_value");dijit.byId("transfer_new_owner").setDisabled(false);dijit.byId("transfer_new_sr_type").setDisabled(true);dijit.byId("transfer_new_sub_type").setDisabled(true);dojo.removeClass(dojo.byId("transfer_new_product"),"transfer_information_attribute_value");dojo.removeClass(dojo.byId("transfer_new_product_version"),"transfer_information_attribute_value");dojo.removeClass(dojo.byId("transfer_new_component"),"transfer_information_attribute_value");dojo.removeClass(dojo.byId("transfer_new_subcomponent"),"transfer_information_attribute_value");dojo.removeClass(dojo.byId("transfer_new_category"),"transfer_information_attribute_value");dijit.byId("transfer_new_subcategory").setDisabled(false);dojo.byId("transfer_new_clarification").disabled="disabled";dijit.byId("transfer_new_severity").setDisabled(false);if(isODTechSR()){dijit.byId("transfer_new_outage").setDisabled(false)}else{dijit.byId("transfer_new_outage").setDisabled(true)}dojo.byId("transfer_new_24x7").disabled="";dojo.removeClass(dojo.byId("transfer_new_language"),"transfer_information_attribute_value")}else{if(A==3){dojo.addClass(dojo.byId("transfer_new_owner"),"transfer_information_attribute_value");dijit.byId("transfer_new_owner").setDisabled(true);dijit.byId("transfer_new_sr_type").setDisabled(true);dijit.byId("transfer_new_sub_type").setDisabled(true);dojo.addClass(dojo.byId("transfer_new_product"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_product_version"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_component"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_subcomponent"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_category"),"transfer_information_attribute_value");dijit.byId("transfer_new_subcategory").setDisabled(true);dojo.byId("transfer_new_clarification").disabled="enabled";dijit.byId("transfer_new_severity").setDisabled(false);if(isODTechSR()){dijit.byId("transfer_new_outage").setDisabled(false)}else{dijit.byId("transfer_new_outage").setDisabled(true)}dojo.byId("transfer_new_24x7").disabled="";dojo.addClass(dojo.byId("transfer_new_language"),"transfer_information_attribute_value")}else{if(A==4){dojo.addClass(dojo.byId("transfer_new_owner"),"transfer_information_attribute_value");dijit.byId("transfer_new_owner").setDisabled(true);dijit.byId("transfer_new_sr_type").setDisabled(true);dijit.byId("transfer_new_sub_type").setDisabled(true);dojo.removeClass(dojo.byId("transfer_new_product"),"transfer_information_attribute_value");dojo.removeClass(dojo.byId("transfer_new_product_version"),"transfer_information_attribute_value");dojo.removeClass(dojo.byId("transfer_new_component"),"transfer_information_attribute_value");dojo.removeClass(dojo.byId("transfer_new_subcomponent"),"transfer_information_attribute_value");dojo.removeClass(dojo.byId("transfer_new_category"),"transfer_information_attribute_value");dijit.byId("transfer_new_subcategory").setDisabled(false);dojo.byId("transfer_new_clarification").disabled="disabled";dijit.byId("transfer_new_severity").setDisabled(false);if(isODTechSR()){dijit.byId("transfer_new_outage").setDisabled(false)}else{dijit.byId("transfer_new_outage").setDisabled(true)}dojo.byId("transfer_new_24x7").disabled="";dojo.removeClass(dojo.byId("transfer_new_language"),"transfer_information_attribute_value")}else{if(A==5){h()}}}}}}function h(){dojo.addClass(dojo.byId("transfer_new_owner"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_product"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_product_version"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_component"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_subcomponent"),"transfer_information_attribute_value");dojo.addClass(dojo.byId("transfer_new_category"),"transfer_information_attribute_value");dijit.byId("transfer_new_owner").setDisabled(true);dijit.byId("transfer_new_subcategory").setDisabled(true);dijit.byId("transfer_new_severity").setDisabled(true);dijit.byId("transfer_new_outage").setDisabled(true);dojo.byId("transfer_new_clarification").disabled="enabled";dojo.byId("transfer_new_24x7").disabled="disabled";dojo.addClass(dojo.byId("transfer_new_language"),"transfer_information_attribute_value");for(var A in v){dojo.style(dojo.byId(A),"display","none")}}}TransferUtils.getPickAppletSelectedRow=function(){var b=dijit.byId("grid");if(b!=null&&b.selection.getSelected()!=null){var g=dijit.byId("grid").selection.getSelected()[0];var f=dijit.byId("grid").model.data[g];var a=dijit.byId("lovDialog");if(a!=null&&a.open){a.hide()}return f}};TransferUtils.loadContext=function(){dojo.xhrPost({url:TransferUtils.servlet,content:{action:"get_transfer_context",queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()},handleAs:"json",load:function(b,a){if(isObjectErroneous(b)){displayErrors(b)}else{transferContext=b;TransferUtils.showWindow()}},error:function(b,a){alert("Failed to load the transfer context. ");console.log("Failed to load the transfer context")}})};TransferUtils.getContext=function(){return transferContext};TransferUtils.resetContext=function(){transferContext={}};TransferUtils.prepareTransferData=function(){var b={};b.sr_number=TransferUtils.getContext().sr_number;var a=dojo.byId("transfer_type").value;b.transfer_type=a;b.reason=dijit.byId("transfer_reason").getValue();b.justification=dojo.byId("transfer_justification").value;b.queryTabName=getQueryTabName();b.modId=getSrModId();b.activeSR=getSrNumber();if(a==1){b.owner=dojo.byId("transfer_new_owner").value}else{if(a==2){b.owner=dojo.byId("transfer_new_owner").value;b.product=dojo.byId("transfer_new_product").value;b.productId=dojo.byId("transfer_new_product_id").value;b.productVersion=dojo.byId("transfer_new_product_version").value;b.productVersionId=dojo.byId("transfer_new_product_version_id").value;b.component=dojo.byId("transfer_new_component").value;b.componentId=dojo.byId("transfer_new_component_id").value;b.subcomponent=dojo.byId("transfer_new_subcomponent").value;b.subcomponentId=dojo.byId("transfer_new_subcomponent_id").value;b.category=dojo.byId("transfer_new_category_id").value;b.subcategory=dijit.byId("transfer_new_subcategory").getValue();b.clarificationId=dojo.byId("transfer_new_clarification_id").value;b.severity=dijit.byId("transfer_new_severity").getValue();b.outage_type=dijit.byId("transfer_new_outage").getValue();b["24x7"]=dojo.byId("transfer_new_24x7").checked;b.language=dojo.byId("transfer_new_language_id").value}else{if(a==3){b.severity=dijit.byId("transfer_new_severity").getValue();b["24x7"]=dojo.byId("transfer_new_24x7").checked}else{if(a==4){b.product=dojo.byId("transfer_new_product").value;b.productId=dojo.byId("transfer_new_product_id").value;b.productVersion=dojo.byId("transfer_new_product_version").value;b.productVersionId=dojo.byId("transfer_new_product_version_id").value;b.component=dojo.byId("transfer_new_component").value;b.componentId=dojo.byId("transfer_new_component_id").value;b.subcomponent=dojo.byId("transfer_new_subcomponent").value;b.subcomponentId=dojo.byId("transfer_new_subcomponent_id").value;b.category=dojo.byId("transfer_new_category_id").value;b.subcategory=dijit.byId("transfer_new_subcategory").getValue();b.clarificationId=dojo.byId("transfer_new_clarification_id").value;b.severity=dijit.byId("transfer_new_severity").getValue();b.outage_type=dijit.byId("transfer_new_outage").getValue();b["24x7"]=dojo.byId("transfer_new_24x7").checked;b.language=dojo.byId("transfer_new_language_id").value}else{if(a==5){}else{if(a==6){b.owner=dojo.byId("transfer_new_owner").value}}}}}}b.transferType=a;return b};TransferUtils.pauseTransfer=function(){var a=TransferUtils.prepareTransferData();a.action="pause_transfer";dijit.byId("pleasewait").show();dojo.xhrPost({url:TransferUtils.servlet,content:a,handleAs:"json",load:function(f,b){console.debug(f);if(isObjectErroneous(f)){dijit.byId("pleasewait").hide();displayErrors(f)}else{alert("The SR was paused.");dijit.byId("pleasewait").hide()}},error:function(f,b){console.log("Failed to pause the SR")}})};TransferUtils.performTransfer=function(){var a=TransferUtils.prepareTransferData();a.action="transfer_sr";dijit.byId("pleasewait").show();dojo.xhrPost({url:TransferUtils.servlet,content:a,handleAs:"json",load:function(f,b){if(isObjectErroneous(f)){dijit.byId("pleasewait").hide();displayErrors(f)}else{var g={};g.transferType=a.transferType;g.srNumber=a.activeSR;TransferUtils.afterTransferCompleted(g)}},error:function(f,b){console.log("Failed to transfer SR")}})};TransferUtils.afterTransferCompleted=function(a){TransferUtils.resetContext();dijit.byId("transferDialog").destroyRecursive();var b=confirm("The SR # "+a.srNumber+" was transferred.\n\nDo you want to return to this SR?");if(b==true){refreshSRDetail("?refresh=true","",true,false)}else{dijit.byId("pleasewait").hide();removeActiveSR("activeSrList")}};TransferUtils.getOwnerPickApplet=function(){setLovDialog("employee",new Array(),"","","Owner","TransferUtils.ownerPickAppletCallback()")};TransferUtils.ownerPickAppletCallback=function(){var a=TransferUtils.getPickAppletSelectedRow();dojo.byId("transfer_new_owner").value=a.empEmail};TransferUtils.getProductPickApplet=function(){var l=new Array();if(isHardwareSR()&&!(serialNumberUtil.isEmptySN())){var b=getFieldVal(CSI);var h=getFieldVal(SERIAL_NUM_ID);var g=getFieldVal(CSI_ID);var f=getFieldVal(REF_CSI_ID_FID);var a=getFieldVal(REF_CSI_FID);if(isEmptyVal(h)){alert(ENTER_SN_MSG);return}var m=new Object();m.lookupId=CSI;m.lookupValue=(isPartnerSR())?a:b;l.push(m);var m=new Object();m.lookupId=CSI_ID;m.lookupValue=(isPartnerSR())?f:g;l.push(m);var m=new Object();m.lookupId=HW_FLG_FID;m.lookupValue=isHardwareSR().toString();l.push(m);var m=new Object();m.lookupId=SERIAL_NUM_ID;m.lookupValue=(dijit.byId(SERIAL_NUM_ID))?h:"";l.push(m);var m=new Object();m.lookupId=SERIAL_NUM_PROD_CLASS;m.lookupValue=getFieldVal(SERIAL_NUM_PROD_CLASS);l.push(m);var m=new Object();m.lookupId=SERIAL_NUM_STATUS;m.lookupValue=getFieldVal(SERIAL_NUM_STATUS);l.push(m);var m=new Object();m.lookupId=SN_CSI_CONTIGENCY_STATUS;m.lookupValue=getFieldVal(SN_CSI_CONTIGENCY_STATUS);l.push(m);setLovDialog("LICENSED_PRODUCT",l,"","","Licensed Product","TransferUtils.productPickAppletCallback()")}else{if(srLOVUtil.isInternalCollab()){var m=new Object();m.lookupId="isInternalCollab";m.lookupValue="true";l.push(m)}setLovDialog("PRODUCT",l,"","","Product","TransferUtils.productPickAppletCallback()")}};TransferUtils.productPickAppletCallback=function(){var a=TransferUtils.getPickAppletSelectedRow();dojo.byId("transfer_new_product").value=a.productDescription;dojo.byId("transfer_new_product_id").value=a.product;dojo.byId("transfer_new_product_version").value="";dojo.byId("transfer_new_product_version_id").value="";dojo.byId("transfer_new_component").value="";dojo.byId("transfer_new_component_id").value="";dojo.byId("transfer_new_subcomponent").value="";dojo.byId("transfer_new_subcomponent_id").value=""};TransferUtils.getProductVersionPickApplet=function(){var a=dojo.byId("transfer_new_product_id").value;if(a.length==0){alert("Please provide a Product on the form.");return}var b=new Array();var f=new Object();f.lookupId="productId";f.lookupValue=a;b.push(f);setLovDialog("PRODUCT_VERSION",b,"","","Product Version","TransferUtils.productVersionPickAppletCallback()")};TransferUtils.productVersionPickAppletCallback=function(){var a=TransferUtils.getPickAppletSelectedRow();dojo.byId("transfer_new_product_version").value=a.productVersion;dojo.byId("transfer_new_product_version_id").value=a.productVersionId};TransferUtils.getComponentPickApplet=function(){var b=new Array();var a=dojo.byId("transfer_new_product_id");if(a.value==""){alert("Please provide a Product first.");return}jsonObj={};jsonObj.lookupId="productId";jsonObj.lookupValue=a.value;b.push(jsonObj);setLovDialog("COMPONENT",b,"","","Component","TransferUtils.componentPickAppletCallback()")};TransferUtils.componentPickAppletCallback=function(){var a=TransferUtils.getPickAppletSelectedRow();dojo.byId("transfer_new_component").value=a.componentDescription;dojo.byId("transfer_new_component_id").value=a.component;dojo.byId("transfer_new_subcomponent").value="";dojo.byId("transfer_new_subcomponent_id").value=""};TransferUtils.getSubcomponentPickApplet=function(){var a=dojo.byId("transfer_new_component_id");if(a.value==""){alert("Please provide a Component first.");return}var f=new Array();var b=dojo.byId("transfer_new_product_id");if(b.value==""){alert("Please provide a Product first.");return}var g=new Object();g.lookupId="productId";g.lookupValue=b.value;f.push(g);g=new Object();g.lookupId="componentId";g.lookupValue=a.value;f.push(g);setLovDialog("SUB_COMPONENT",f,"","","SubComponent","TransferUtils.subcomponentPickAppletCallback()")};TransferUtils.subcomponentPickAppletCallback=function(){var a=TransferUtils.getPickAppletSelectedRow();dojo.byId("transfer_new_subcomponent").value=a.subcomponentDescription;dojo.byId("transfer_new_subcomponent_id").value=a.subcomponent};TransferUtils.getLanguagePickApplet=function(){setLovDialog("LANGUAGE",new Array(),"","","Language","TransferUtils.languagePickAppletCallback()")};TransferUtils.languagePickAppletCallback=function(){var a=TransferUtils.getPickAppletSelectedRow();dojo.byId("transfer_new_language").value=a.languageName;dojo.byId("transfer_new_language_id").value=a.languageCode};TransferUtils.getCategoryPickApplet=function(){var f=false;var h="CATEGORY";var b=SRUtils.getCurrentSR().SRType;var m=new Object();var l=new Array();if(b){var m=new Object();m.lookupId="srType";m.lookupValue=b;l.push(m)}var m=new Object();m.lookupId="TemplateType";m.lookupValue="Product Template";l.push(m);var m=new Object();m.lookupId="Active";m.lookupValue="Y";l.push(m);var g="";if(f!=undefined&&f){if(dijit.byId("categoryDescription")&&dijit.byId("categoryDescription").getValue()!=""){g="categoryDescription:"+dijit.byId("categoryDescription").getValue()}}var a="category,categoryDescription,clarificationCount,sev1Type";setLovDialog(h,l,g,a,"Category","TransferUtils.categoryPickAppletCallback()")};TransferUtils.categoryPickAppletCallback=function(){var b=TransferUtils.getPickAppletSelectedRow();console.debug(b);dojo.byId("transfer_new_category").value=b.categoryDescription;dojo.byId("transfer_new_category_id").value=b.category;dojo.byId("transfer_new_clarification").value="";dojo.byId("transfer_new_clarification_id").value="";var f=dojo.byId("transfer_new_category_id").value;if(f){var a=getTransferClarificationCount(f);if(a>0){dojo.byId("transfer_mandatory_clarification").style.visibility="visible"}else{dojo.byId("transfer_mandatory_clarification").style.visibility="hidden"}}};TransferUtils.getClarificationPickApplet=function(){var b=new Object();b.lookupId="categoryId";b.lookupValue=dojo.byId("transfer_new_category_id").value;var a=new Array();a.push(b);setLovDialog("PRODUCT_TEMPLATE_CLARIFICATION",a,"","","Clarification","TransferUtils.clarificationPickAppletCallback()")};TransferUtils.clarificationPickAppletCallback=function(){var a=TransferUtils.getPickAppletSelectedRow();console.debug(a);dojo.byId("transfer_new_clarification").value=a.clarificationDesc;dojo.byId("transfer_new_clarification_id").value=a.clarificationId};TransferUtils.assignToMe=function(){console.log("assign to me");dijit.byId("pleasewait").show();var a=getSRData().srNumber;dojo.xhrPost({url:TransferUtils.servlet,content:{action:"assign_sr_to_me",queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()},handleAs:"json",preventCache:true,load:function(f,b){if(isObjectErroneous(f)){dijit.byId("pleasewait").hide();displayErrors(f)}else{alert("The SR was transferred.");dijit.byId("pleasewait").hide();refreshSR(getSRQstr(a))}},error:function(f,b){console.log("Failed to 'assign to me'")}})};function translateSR(){console.log("translate SR");dijit.byId("pleasewait").show();dojo.xhrPost({url:"../../../SRHeaderRequest",content:{action:"translate_sr",queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()},handleAs:"json",preventCache:true,load:function(b,a){if(isObjectErroneous(b)){dijit.byId("pleasewait").hide();displayErrors(b)}else{alert("The SR was translated.");dijit.byId("pleasewait").hide();refreshSR(getSRQstr(getSrNumber()))}},error:function(b,a){console.log("Failed to translate SR")}})}var MGR_EMP_ID="mgrEmpId";var MGR_EMP_ID_COL="Employee ID";var MGR_FNAME="mgrEmpFname";var MGR_FNAME_COL="First Name";var MGR_LNAME="mgrEmpLname";var MGR_ROLE="mgrRole";var MGR_ROLE_COL="Owner Role";var MGR_LNAME_COL="Last Name";var MGR_AVAILABILITY="mgrEmpAvail";var MGR_AVAILABILITY_COL="Availability";var IDENTIFIER_COL="identifierCol";var DATA_ROWS="dataRows";var DATA_COLS="dataCols";var COL_NAME="name";var COL_WIDTH="width";var COL_ID="id";var ESC_LVL="escLvl";var ESC_OWNER="escOwner";var ESC_OWNER_ROLE="escOwnerRole";var ESC_ACTIVITIES="escActivities";var ESC_MGR_LIST="mgrList";var ACTIVITY_ID="activityId";var HIDDEN_FORM_ACTIVITY_ID="escActivityId";var ACTIVITY_TYPE="activityType";var ESC_ACTIVITY_LVL="escActivityLvl";var ESC_ACTIVITY_OWNER="escActivityOwner";var ESC_ACTIVITY_STATUS="escActivityStatus";var ESC_ACTIVITY_CREATED="escActivityCreated";var ESC_ACTIVITY_UPDATED="escActivityUpdated";var ESC_ACTIVITY_ID="activityId";var ESC_ACTIVITY_OP="escActivityOp";var MGR_AVAILABILITY="mgrEmpAvail";var SR_ID="srId";var START_ESCALATION_OPERATION="startEscalation";var SHOW_ESCALATION_OWNER_OPERATION="showEscalationOwners";var escMap=new Map();var ESC_KEY="ESC";var ESC_ACTIVITIES_KEY="ESCActivities";var ESC_CTX_KEY="ESCCONTEXT";var MGR_PHONE_COL="Phone";var MGR_PHONE="mgrPhone";var MGR_EMAIL_COL="Email";var MGR_EMAIL="mgrEmail";var MGR_ALT_EMAIL_COL="Alt Email";var MGR_ALT_EMAIL="mgrAltEmail";var BUSY_ICON="../images/busy_status.gif";var AVAILABLE_ICON="../images/available_ind.gif";var ESCALATION_RESOLVED="Escalation Resolved";var TEMPLATE_DATA="tData";var TEMPLATE_ID="templateId";function escalateSR(){var b=getActiveSrId();if(b==""||b==undefined){alert("No active SR found.");return}dijit.byId("pleasewait").show();var a=getQueryTabName();var g=getSrModId();var f=getSrNumber();console.debug("activeSrId"+b);dojo.xhrGet({url:"../../../TemplateRequest",content:{operation:START_ESCALATION_OPERATION,srId:b,queryTabName:a,modId:g,activeSR:f},handleAs:"json",preventCache:true,load:function(q,p){console.debug(dojo.toJson(q));dijit.byId("pleasewait").hide();if(q.opStatus==0){var h=q.opResult;if(dojo.isObject(h)){var l=h[ESC_ACTIVITIES];if(dojo.isObject(l)&&l.rowCount>0){showOptions(h)}else{var o=h[TEMPLATE_DATA];var m=h[TEMPLATE_ID];if(o!=undefined&&m!=undefined){processTemplateData(o,m)}else{callCreateActivity()}}}}else{displayErrors(q,"","callCreateActivity()")}return q},error:function(m,l){dijit.byId("pleasewait").hide();var h=getDisplayMessageObj("Failed to start Escalation process.",2);displayErrors(h);console.debug("Failed to start escalation.",m)},timeout:200000})}var EscalationUtils={};var escContext={};var escActivityContext={};function getEscContext(){return escContext}function setEscContext(b,a){escContext[b]=a}function getEscActivityContext(){return escActivityContext}function setEscActivityContext(b,a){escActivityContext[b]=a}function initEscContext(){escContext={};escContext.srId=="";escContext.activityId="";escContext.activityCurrLvl="";escContext.templateId="";escContext.activityType="Escalation";escContext.selectedEscOwner="";escContext.selectedEscOwnerId="";escContext.selectedEscLvl="";escContext.assignedLvls=[];escContext.operation="assign"}function initEscActivityContext(){escActivityContext={}}function getGRPData(o,p,b,g,f){initEscContext();if(dijit.byId(o)!=undefined){setEscContext("activityId",dijit.byId(o).getValue());if(dijit.byId(o).getValue()!=undefined&&dijit.byId(o).getValue()!=""){setEscContext("operation","reAssign")}else{setEscContext("operation","assign")}}if(dijit.byId(p)!=undefined){setEscContext("activityCurrLvl",dijit.byId(p).getValue());setEscContext("lvlFld",p)}if(dijit.byId(b)!=undefined){setEscContext("ownerFld",b)}if(dijit.byId(g)!=undefined){setEscContext("ownerRoleFld",g)}var a=getActiveSrId();if(a==""||a==undefined){alert("No active SR found.");return -1}dijit.byId("pleasewait").show();var m=getQueryTabName();var h=getSrModId();var l=getSrNumber();console.debug("Active SrId"+a);dojo.xhrGet({url:"../../../TemplateRequest",content:{operation:SHOW_ESCALATION_OWNER_OPERATION,srId:a,queryTabName:m,modId:h,activeSR:l},handleAs:"json",preventCache:true,load:function(w,v){console.debug(dojo.toJson(w));dijit.byId("pleasewait").hide();if(w.opStatus==0){var q=w.opResult;if(dojo.isObject(q)){var s=getEscContext();setEscContext("srId",getActiveSrId());setEscContext("sendEmail",f);escMap.put(ESC_KEY,q);var u=q[ESC_ACTIVITIES];showEscChart()}else{displayErrors(w)}}return 0},error:function(u,s){dijit.byId("pleasewait").hide();var q=getDisplayMessageObj("Failed to retrieve GRP data.",2);displayErrors(q);console.debug("Failed to retrieve GRP data.",u);return -1},timeout:200000})}function getEscResult(){var b=escMap.findIt(ESC_KEY);if(b!=-1){var a=escMap.get(ESC_KEY);return a}return null}function getEscActivitiesResult(){var b=escMap.findIt(ESC_ACTIVITIES_KEY);if(b!=-1){var a=escMap.get(ESC_ACTIVITIES_KEY);return a}return null}function getEscActivitiesObj(){var a=getEscResult();if(a!=null){if(a[ESC_ACTIVITIES]!=undefined){return a[ESC_ACTIVITIES]}}return null}function showOptions(a){if(a==undefined){return}closeDialog("escDialog");cleanupDialog("escDialog");var g=createDialog("escDialog","Escalation","width:90%;height:400px;font-family:verdana;font-size:8pt;background-color:#FFFFEE; border:2px outset #AAAAAA;z-index:1;");var b=getExistingEscActivities(a);g.setContent(b);var f=dijit.byId("grid");f.render();f.update();setTimeout(function(){g.show()},"0")}function showEscChart(){var a=getEscResult();closeDialog("escDialog");cleanupDialog("escDialog");if(a==undefined||a[DATA_ROWS]==undefined||a[DATA_ROWS].length==0){alert("NO GRP Data Found!");return}var f=createDialog("escDialog","Escalation","width:90%;height:400px;font-family:verdana;font-size:8pt;background-color:#FFFFEE; border:2px outset #AAAAAA;z-index:1;");var b=getAssignEscOwnerChart(a);f.setContent(b);setTimeout(function(){f.show()},"0")}function getExistingEscActivities(s){var C=s[ESC_ACTIVITIES];if(C.rowCount==0){return}var E=document.createElement("table");E.setAttribute("width","100%");var b=document.createElement("tbody");E.appendChild(b);var z=document.createElement("tr");var G=document.createElement("td");b.appendChild(z);var B=document.createElement("span");B.style.cssText="font-family:Arial,Helvetica,Geneva,sans-serif;color:black;font-weight:bold;font-size:10pt;margin-top:5pt;";var u=document.createTextNode("Existing Escalations");B.appendChild(u);G.appendChild(B);z.appendChild(G);G.setAttribute("align","center");var h=document.createElement("tr");var x=document.createElement("td");b.appendChild(h);h.appendChild(x);var y=new dijit.form.Button({label:"Cancel"});dojo.connect(y,"onClick",function(){closeDialog("escDialog")});x.appendChild(y.domNode);var f=new dijit.form.Button({label:"Create Escalation"});dojo.connect(f,"onClick",function(){callCreateActivity()});x.appendChild(f.domNode);var p=document.createElement("tr");var A=document.createElement("td");b.appendChild(p);p.appendChild(A);var m=new dojo.data.ItemFileReadStore({data:C.data});var D=new dojox.grid.data.DojoData(null,m,{jsId:"gmodel",query:{activityId:"*"},clientSort:true});var l={modelAllChange:function(){console.debug("row data")}};D.observer(l);if(dijit.byId("grid")!=null){dijit.byId("grid").destroy()}var o=document.createElement("div");o.setAttribute("id","gridDiv");var w=C.normalCells;var v={cells:w.cells};var F=[v];var a=new dojox.Grid({id:"grid",elasticview:"2",model:D,structure:F,rowSelector:false});o.appendChild(a.domNode);A.appendChild(o);var g=document.createElement("tr");var q=document.createElement("td");b.appendChild(g);q.appendChild(getInstructionImgNode());q.setAttribute("valign","middle");var B=document.createElement("span");B.style.cssText="font-family:Arial,Helvetica,Geneva,sans-serif;font-weight:normal;font-size:small;color:#00478A;";var u=document.createTextNode("Only one open Activity is allowed for each escalation level.");B.appendChild(u);q.appendChild(B);g.appendChild(q);return E}function assignEscOwner(){console.debug("assignEscOwner");var a=dijit.byId("escDialog").getValues();console.debug(dojo.toJson(a));var z=getEscContext();var y=a[HIDDEN_FORM_ACTIVITY_ID];var D=a[ESC_LVL];var p=a[ESC_OWNER];var f=a[ESC_OWNER_ROLE];var B=a.selectedRb;if(B==""){alert("Please select escalation owner.");return}setEscContext("selectedEscLvl",D);setEscContext("selectedEscOwner",p);setEscContext("selectedEscOwnerId",B);setEscContext("selectedEscOwnerRole",f);if(z.operation=="reAssign"&&z.activityCurrLvl!=""&&z.activityCurrLvl!=null&&z.activityCurrLvl!=D){var o=new Object();o.opStatus=-1;var q=new Array();o.opResult=q;var l={};l.messageType=2;l.message="Only one open Activity is allowed for each escalation level. The selected escalation Level does not match with the level used in existing activity.";q.push(l);displayErrors(o)}else{var A=getEscActivitiesObj();var u=false;if(z.operation=="assign"&&A!=null&&A.rowCount>0){var x=A.data.items;console.debug(x.length);dojo.every(x,function(I){var E=I[ESC_ACTIVITY_ID];var K=I[ESC_ACTIVITY_STATUS];var G=I[ESC_ACTIVITY_LVL];console.debug(G+"_"+D);if(G==D&&K!=ESCALATION_RESOLVED){var F=new Object();F.opStatus=-1;var H=new Array();F.opResult=H;var J={};J.messageType=2;J.message="Only one Activity can be open for each escalation level.Activity for level "+G+" already exists. Activity Status: "+K+'. Click on Escalation button again to see existing activities. You can create new escalation activity after updating the status of existing activity to "Escalation Resolved".';H.push(J);displayErrors(F);u=true;return false}return true})}if(!u){closeDialog("escDialog");var s=z.lvlFld;var C=z.ownerFld;var m=z.ownerIdFld;var g=z.ownerRoleFld;if(s!=undefined&&dijit.byId(s)!=undefined){dijit.byId(s).setValue(D)}if(C!=undefined&&dijit.byId(C)!=undefined){dijit.byId(C).setValue(p)}if(g!=undefined&&dijit.byId(g)!=undefined){dijit.byId(g).setValue(f)}var v=getEscActivityContext();if(v.operation=="save"){var w=v.aprofile;var b=v.tprofile;var h=z.sendEmail;if(h&&h==true){submitPane(w,b,true)}else{submitPane(w,b,false)}}}}}function escWfCheck(l,p,a,h,m,f,g){var b=true;var o=0;initEscActivityContext();if(p!=undefined&&dijit.byId(p)!=undefined&&dijit.byId(p).getValue()==""){b=false}if(a!=undefined&&dijit.byId(a)!=undefined&&dijit.byId(a).getValue()==""){b=false}if(h!=undefined&&dijit.byId(h)!=undefined&&dijit.byId(h).getValue()==""){b=false}if(!b){setEscActivityContext("operation","save");setEscActivityContext("aprofile",m);setEscActivityContext("tprofile",f);o=getGRPData(l,p,a,h,g)}else{submitPane(m,f,g)}}function callCreateActivity(){console.debug("call create activity");initEscContext();setEscContext("activityId","");closeDialog("escDialog");createActivity("Escalation")}function getAssignEscOwnerChart(D){console.debug("getAssignEscOwnerChart");var B=document.createElement("table");B.setAttribute("width","100%");var a=document.createElement("tbody");B.appendChild(a);B.setAttribute("cellSpacing","6");B.setAttribute("cellPadding","6");var F=D[DATA_COLS];var E=D[DATA_ROWS];var f=D[IDENTIFIER_COL];var y=document.createElement("tr");var C=document.createElement("td");a.appendChild(y);var A=document.createElement("span");A.style.cssText="font-family:Arial,Helvetica,Geneva,sans-serif;color:black;font-weight:bold;font-size:10pt;margin-top:5pt;";y.appendChild(A);var v=document.createTextNode("Select Escalation Owner");A.appendChild(v);C.appendChild(A);y.appendChild(C);y.setAttribute("align","center");var g=document.createElement("tr");var u=document.createElement("td");a.appendChild(g);g.appendChild(u);var s=new dijit.form.TextBox({type:"hidden",id:"selectedRb",name:"selectedRb"});u.appendChild(s.domNode);var z="";if(getEscContext()!=null&&getEscContext().activityId!=undefined){z=getEscContext().activityId}var q=new dijit.form.TextBox({type:"hidden",value:z,id:HIDDEN_FORM_ACTIVITY_ID,name:HIDDEN_FORM_ACTIVITY_ID});u.appendChild(q.domNode);var p=new dijit.form.TextBox({type:"hidden",value:"",id:"escLvl",name:"escLvl"});u.appendChild(p.domNode);var m=new dijit.form.TextBox({type:"hidden",value:"",id:"escOwner",name:"escOwner"});u.appendChild(m.domNode);var l=new dijit.form.TextBox({type:"hidden",value:"",id:"escOwnerRole",name:"escOwnerRole"});u.appendChild(l.domNode);var o="Select";var h=document.createElement("tr");var w=document.createElement("td");a.appendChild(h);h.appendChild(w);var b=new dijit.form.Button({label:o});dojo.connect(b,"onClick",function(){assignEscOwner()});w.appendChild(b.domNode);var x=new dijit.form.Button({label:"Cancel"});dojo.connect(x,"onClick",function(){closeDialog("escDialog")});w.appendChild(x.domNode);dojo.forEach(E,function(K){var H=K[ESC_LVL];var O=K[ESC_MGR_LIST];var M=getEscalationLevelRow(H);a.appendChild(M);var L=document.createElement("tr");var G=document.createElement("td");a.appendChild(L);L.appendChild(G);var N=document.createElement("table");N.setAttribute("cellSpacing","4");N.setAttribute("cellPadding","4");var J=document.createElement("tbody");N.appendChild(J);G.appendChild(N);var P=getOPTableColumnRow(F);if(P==-1){console.debug("Unexpected Error");return -1}J.appendChild(P);var I=getEscalationDataRow(O,f,H,F);if(dojo.isArray(I)){dojo.forEach(I,function(Q){J.appendChild(Q)})}});return B}function getEscalationLevelRow(a){var f=document.createElement("tr");f.style.cssText="background-color:#cccccc;";var h=document.createElement("td");f.appendChild(h);var b=document.createElement("span");b.style.cssText="font-family:Arial,Helvetica,Geneva,sans-serif;color:black;font-weight:bold;font-size:8pt;margin-top:25pt;";h.appendChild(b);var g=document.createTextNode(a);b.appendChild(g);return f}function getOPTableColumnRow(b){if(!dojo.isArray(b)){console.debug("Argument of this function should be array.");return -1}var f=document.createElement("tr");var h=document.createElement("td");dojo.addClass(h,OP_DIALOG_TABLE_HEADER_CLASS);dojo.addClass(h,OP_DIALOG_BC_CLASS);f.appendChild(h);var a=document.createElement("span");h.appendChild(a);dojo.attr(h,{width:"5%"});var g=document.createTextNode("Select");a.appendChild(g);dojo.forEach(b,function(l){var p=document.createElement("td");dojo.addClass(p,OP_DIALOG_TABLE_HEADER_CLASS);dojo.addClass(p,OP_DIALOG_BC_CLASS);var m=document.createElement("span");dojo.attr(p,{width:l[COL_WIDTH]});var o=document.createTextNode(l[COL_NAME]);m.appendChild(o);p.appendChild(m);if(l[COL_WIDTH]!="0"){f.appendChild(p)}});return f}function getOPTableDataRows(g,h,f){var b=document.createDocumentFragment();var a=0;dojo.forEach(f,function(o){var m=document.createElement("tr");var l=document.createElement("td");dojo.attr(l,{width:"5%",align:"center"});m.appendChild(l);dojo.forEach(h,function(q){var s=q[COL_ID];var v=o[s];if(s!=g){var u=q[COL_WIDTH];var p=getDataCell(v);dojo.attr(p,{width:u,align:"center"});m.appendChild(p)}else{l.appendChild(getSelectNode(g,v,false,a))}});b.appendChild(m);a++});return b}function getSelectNode(f,l,g,b){var a=document.createElement("input");a.setAttribute("type","radio");var h=new dijit.form.RadioButton({name:"rb",value:l,onClick:function(){var m=dijit.byId(f);var o=dijit.byId("rowIndex");if(m!=undefined){m.setValue(l)}if(o!=undefined){o.setValue(b)}}},a);return h.domNode}function getEscalationSelectNode(f,m,h,a,g){var b=document.createElement("input");b.setAttribute("type","radio");var l=new dijit.form.RadioButton({name:"rb",value:f,onClick:function(){var p=dijit.byId("selectedRb");if(p!=undefined){p.setValue(f)}var o=dijit.byId("escOwner");if(o!=undefined){o.setValue(m)}var q=dijit.byId("escLvl");if(q!=undefined){q.setValue(h)}var s=dijit.byId("escOwnerRole");if(s!=undefined){s.setValue(a)}}},b);return l.domNode}function getDataCell(b){var f=document.createElement("td");var a=document.createElement("span");f.appendChild(a);a.innerHTML=b;return f}function getEscalationDataRow(f,b,h,g){console.debug("getEscalationDataRow for "+h);if(!dojo.isArray(f)){console.debug("Argument of this function should be list.");return -1}var a=new Array();dojo.forEach(f,function(v){var u=document.createElement("tr");var m=document.createElement("td");m.setAttribute("align","center");m.setAttribute("width","5%");m.style.cssText="font-family:Arial,Helvetica,Geneva,sans-serif;font-weight:normal;font-size:small;color:#000000;background-color:#ffffff;";u.appendChild(m);var q;var s;var l;var o=false;dojo.forEach(g,function(z){var y="";var x=z[COL_ID];if(v[x]!=undefined){y=v[x]}if(x==MGR_AVAILABILITY){if(y=="true"){y='<img src="'+AVAILABLE_ICON+'" />'}else{y='<img src="'+BUSY_ICON+'" />'}}var w=getDataCell(y);w.setAttribute("width","10%");if(x==MGR_AVAILABILITY){w.setAttribute("align","center")}w.style.cssText="font-family:Arial,Helvetica,Geneva,sans-serif;font-weight:normal;font-size:8pt;color:#000000;background-color:#ffffff;";if(x==b){q=y}if(x==MGR_EMAIL){s=y;w.setAttribute("width","20%")}if(x==MGR_ROLE){l=y}u.appendChild(w)});var p=getEscalationSelectNode(q,s,h,l,o);m.appendChild(p);a.push(u)});return a}function navigateFromSRNAVToKM(a){var b=a.document;b.getElementById("activeSR").value=getSrNumber();b.getElementById("srId").value=getActiveSrId();b.getElementById("modId").value=getSrModId();b.getElementById("queryTabName").value=getQueryTabName();b.getElementById("kmform").submit()}function linkKM(){if(!SRUtils.isCurrentSRLoaded()){alert("No active SR found.");return}var a=window.open("SRNAVtoKM.html");a.focus()}var SRCollaboration={};SRCollaboration.start=function(){var a=dijit.byId("collaborationDialog");if(a!=null){a.destroyRecursive();a=null}a=new dijit.Dialog({refocus:false,id:"collaborationDialog",title:"Create Collaboration",style:"width: 300px; height: 150px;z-index:1;"});dijit.byId("pleasewait").show();dojo.xhrGet({url:"newCollaborationSRTemplate.html"+getVersion(),load:function(f){dijit.byId("pleasewait").hide();var b=(SRUtils.getCurrentSR().odFlag==="true")?"od":"gcs";var g=f.replace(/CSI_TYPE_VAR/,b);a.setContent(g);a.startup();setTimeout(function(){a.show()},"0")},error:function(b){dijit.byId("pleasewait").hide();console.log("Failed to load collaboration template")}})};SRCollaboration.create=function(){UIUtils.showLoader();var f=dijit.byId("collabType").getValue();var a=dijit.byId("collabCSI").getValue();var b={url:"../../../SRHeaderRequest",content:{collaborationType:f,csi:a,queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber(),action:"COLLABORATION_CREATE"},handleAs:"json",load:function(h){if(isObjectErroneous(h)){displayErrors(h);UIUtils.hideLoader()}else{refreshSR(getSRQstr(SRUtils.getCurrentSR().SRNumber));SRCollaboration.cancelUI();var g=h.srNumber;alert("The collaboration # "+g+" was created.")}},error:function(g){console.log("An error occurred: "+g)},timeout:120000};dojo.xhrPost(b)};SRCollaboration.cancelUI=function(){var a=dijit.byId("collaborationDialog");if(a!=null){a.destroyRecursive()}};var UIUtils={};UIUtils.showLoader=function(){dijit.byId("pleasewait").show()};UIUtils.hideLoader=function(){dijit.byId("pleasewait").hide()};function authWiz(){OrionParameters.getParameters(["ENABLE_AWIZ","AWIZ_HOSTNAME","AWIZ_CONTEXT"],true,function(){var b=getSRData().srNumber;var a="../../km/authoring/AuthoringWizard.jspx?sr="+b+"&closeable=1";if("true"==OrionParameters.values.ENABLE_AWIZ){a=OrionParameters.values.AWIZ_HOSTNAME+OrionParameters.values.AWIZ_CONTEXT+"?sr="+b}window.open(a)})}function viewGRPAssignmentHistory(){var g="GRP Asg/Resources URL is not set up; Please contact your Administrator to report this problem";var b=SRUtils.getCurrentSR().SRNumber;var f=evaluateSRMContextTextURL(vlinkHrefMap,GRP_ASG_RESOURCES,b);if(f!=null&&f!=undefined&&dojo.string.trim(f)!=""){var a=vlinkHrefMap.get(GRP_ASG_RESOURCES);if(a!=null&&a.hrefTarget!=null&&dojo.string.trim(a.hrefTarget)=="_blank"){window.open(f,"GRP ASG/Resources")}else{if(a!=null&&a.hrefTarget!=null&&dojo.string.trim(a.hrefTarget)=="_self"){this.location.href=f}else{this.location.href=f}}}else{alert(g)}}function callSRCreateMisc(a){var g=getActiveSrId();if(g==""||g==undefined){alert("No active SR found.");return}console.debug("callSRCreateMisc()...");var h=getSRData().srNumber;var f=getQueryTabName();var b="/secure/srm/sr/SRCreate.jspx?srNumber="+escape(h)+"&queryTabName="+escape(f);b=b+"&srcreateOp="+escape(a);popupDirtyPage("/oip/faces",b,"true")}function openSRKMClickstream(){invokeURLForRef("KM_CLICKSTREAM",getSRData().srNumber,"Clickstream")}var STD_TRANSFER_OPT_LABEL="Standard Transfer";var LIVE_GROUP_TRANSFER_OPT_LABEL="Assign Work Group NOW!";var LIVE_ENG_TRANSFER_OPT_LABEL="Assign an Engineer NOW!";var LIVE_ENG_TRANSFER_ID="liveEngTransfer";var LIVE_GROUP_TRANSFER_ID="liveGrpTransfer";var STD_TRANSFER_ID="stdTransfer";var TRANSFER_ICON_AREA="transferIconArea";var TRANSFER_LABEL="Transfer";var GRP_ASSIGNING_GRP_NOW_MSG="The system is trying to assign a work group for SR <SR> NOW, so please wait till the assignment is finished.";var GRP_ASSIGNING_ENG_NOW_MSG="The system is trying to assign the selected owner for SR <SR> NOW, so please wait till the assignment is finished.";var GRP_FINDING_ENG_NOW_MSG="The system is trying to find available support engineers based on the schedules in the GRP for SR <SR> NOW, so please wait.<br/><br/>Important!!!<br/>Do NOT click the X of this pop-up message to cancel now. If you need to cancel the operation, please wait till the 'Warm Transfer Candidate' page is displayed and click the 'Cancel' button from there.";var GRP_ASSIGNED_MSG="SR <SR> has been successfully assigned the work group of <group>";var GRP_OWNER_ASSIGNED_MSG="SR <SR> has been successfully assigned the <owner> in the work group of <group>";var ASSIGN_ENG_NOW_DIALOG="assignEngNowDialog";var ASSIGN_NOW_LABEL="Assign Now";var CANCEL_OP_LABEL="Cancel";var ENG_EMAIL_COL_ID="engEmail";TransferUtils.buildSRTransferOptions=function(f){var g=dijit.byId(TRANSFER_ICON_AREA);if(g&&(g instanceof srmdojoc.layout.CustomDropDownButton)){var a=g.domNode.parentNode;g.destroyRecursive();var h={onClick:function(){var l=SRUtils.showPageModifiedAlert();if(l==0){TransferUtils.startSRTransfer()}},label:TRANSFER_LABEL,"class":"sropButton",title:"Transfer SR",style:"vertical-align:middle",name:TRANSFER_ICON_AREA,id:TRANSFER_ICON_AREA};var b=new srmdojoc.layout.CustomButton(h);b.startup();dojo.place(b.domNode,a,"first")}return};TransferUtils.addSRTransferOptions=function(){var a=new Array();var g={showLabel:true,label:STD_TRANSFER_OPT_LABEL,title:STD_TRANSFER_OPT_LABEL,name:STD_TRANSFER_ID,id:STD_TRANSFER_ID,onClick:function(){TransferUtils.onSelectTransfer(this)}};var f={showLabel:true,label:LIVE_GROUP_TRANSFER_OPT_LABEL,title:LIVE_GROUP_TRANSFER_OPT_LABEL,name:LIVE_GROUP_TRANSFER_ID,id:LIVE_GROUP_TRANSFER_ID,onClick:function(){TransferUtils.onSelectTransfer(this)}};var b={showLabel:true,label:LIVE_ENG_TRANSFER_OPT_LABEL,title:LIVE_ENG_TRANSFER_OPT_LABEL,name:LIVE_GROUP_TRANSFER_ID,id:LIVE_ENG_TRANSFER_ID,onClick:function(){TransferUtils.onSelectTransfer(this)}};a.push(g);a.push(f);a.push(b);return a};TransferUtils.onSelectTransfer=function(b){var a=SRUtils.showPageModifiedAlert();if(a!=0){return}if(b.id==LIVE_GROUP_TRANSFER_ID){TransferUtils.assignGroupNow()}else{if(b.id==LIVE_ENG_TRANSFER_ID){TransferUtils.getEngForAssignNow()}else{if(b.id==STD_TRANSFER_ID){TransferUtils.startSRTransfer()}}}};TransferUtils.assignGroupNow=function(){var a=GRP_ASSIGNING_GRP_NOW_MSG.replace("<SR>",getSrNumber());showCustomStatusDialog(a);var b=new SRIdentity;b.action="assignGroupNow";dojo.xhrGet({url:TransferUtils.servlet,content:b,handleAs:"json",preventCache:true,load:function(h,g){hideCustomStatusDialog();if(isObjectErroneous(h)){displayErrors(h)}else{if(h.group!=undefined){var f=GRP_ASSIGNED_MSG.replace("<SR>",getSrNumber());f=f.replace("<group>",h.group);alert(f)}}if(h.srData!=undefined){refreshAfterSROp(h.srData,true,false,false)}},error:function(g,f){hideCustomStatusDialog();alert("Failed to assign group. ");console.log("Failed to assign group. ")}})};TransferUtils.assignEngNow=function(b,f,a){var g=GRP_ASSIGNING_ENG_NOW_MSG.replace("<SR>",getSrNumber());showCustomStatusDialog(g);var h=new SRIdentity;h.action="assignEngNow";h.ownerId=b;h.ownerEmail=f;h.oldAssignStatus=a;dojo.xhrGet({url:TransferUtils.servlet,content:h,handleAs:"json",preventCache:true,load:function(o,m){hideCustomStatusDialog();if(isObjectErroneous(o)){displayErrors(o)}else{if(o.owner!=undefined){var l=GRP_OWNER_ASSIGNED_MSG.replace("<SR>",getSrNumber());var l=l.replace("<group>",o.group);var l=l.replace("<owner>",o.owner);alert(l)}}if(o.srData!=undefined){refreshAfterSROp(o.srData,true,false,false)}},error:function(m,l){hideCustomStatusDialog();alert("Failed to assign Engineer.");console.log("Failed to assign Engineer.")}})};TransferUtils.abortAssignNow=function(a){var b=new SRIdentity;b.action="abortAssignNow";b.assignStatus=a;dojo.xhrGet({url:TransferUtils.servlet,content:b,preventCache:true,handleAs:"json",load:function(g,f){if(isObjectErroneous(g)){displayErrors(g)}if(g.srData!=undefined){refreshAfterSROp(g.srData,true,false,false)}},error:function(g,f){alert("Failed to abort assign now operation. ");console.log("Failed to abort assign now operation. ")}})};TransferUtils.getEngForAssignNow=function(){var a=GRP_FINDING_ENG_NOW_MSG.replace("<SR>",getSrNumber());showCustomStatusDialog(a,null,"opStatusDialogMedium");var b=new SRIdentity;b.action="getEngForAssignNow";dojo.xhrGet({url:TransferUtils.servlet,content:b,handleAs:"json",load:function(g,f){hideCustomStatusDialog();if(isObjectErroneous(g)){displayErrors(g)}else{TransferUtils.displayAvailableCandidates(g)}if(g.srData!=undefined){refreshAfterSROp(g.srData,true,false,false)}},error:function(g,f){hideCustomStatusDialog();alert("Failed to retrieve the candidates for warm transfer.");console.log("Failed to retrieve candidates for warm transfer.")}})};TransferUtils.displayAvailableCandidates=function(R){cleanupDialog(ASSIGN_ENG_NOW_DIALOG);var O=createDialog(ASSIGN_ENG_NOW_DIALOG,"Warm Transfer Candidate","");dojo.connect(O,"onCancel",function(){var T=R.oldAssignStatus;TransferUtils.abortAssignNow(T)});dojo.addClass(O,OP_DIALOG_CLASS);var v=document.createElement("table");dojo.attr(v,OP_DIALOG_TABLE_ATTR);var J=document.createElement("tbody");v.appendChild(J);var P=document.createElement("tr");var a=document.createElement("td");J.appendChild(P);var w=document.createElement("span");dojo.addClass(w,OP_DIALOG_TABLE_COL_CLASS);P.appendChild(w);var E=document.createTextNode("The following support engineers are available based on the schedules in the GRP. Please contact and confirm which of the engineers is available to take the live call now.");w.appendChild(E);a.appendChild(w);P.appendChild(a);dojo.attr(P,{align:"left"});var F=document.createElement("tr");dojo.attr(F,{align:"left"});var l=document.createElement("td");J.appendChild(F);F.appendChild(l);var N=document.createElement("span");dojo.addClass(N,OP_DIALOG_TABLE_HEADER_CLASS);var q=document.createElement("span");dojo.addClass(q,OP_DIALOG_TABLE_COL_CLASS);var y=document.createTextNode(ASSIGN_NOW_LABEL+":");var D=document.createTextNode(" After confirmation, please click the radio button and then the Assign Now button to have the system assign the person as SR owner.");N.appendChild(y);q.appendChild(D);l.appendChild(N);l.appendChild(q);var C=document.createElement("tr");dojo.attr(C,{align:"left"});var h=document.createElement("td");J.appendChild(C);C.appendChild(h);var M=document.createElement("span");dojo.addClass(M,OP_DIALOG_TABLE_HEADER_CLASS);var S=document.createElement("span");dojo.addClass(S,OP_DIALOG_TABLE_COL_CLASS);var x=document.createTextNode(CANCEL_OP_LABEL+":");var p=document.createTextNode(" If you do not want to proceed at this point, please click the Cancel button to back out.");M.appendChild(x);S.appendChild(p);h.appendChild(M);h.appendChild(S);var L=document.createElement("tr");var Q=document.createElement("td");J.appendChild(L);L.appendChild(Q);var g=new dijit.form.TextBox({type:"hidden",id:R.identifierCol,name:R.identifierCol});var f=new dijit.form.TextBox({type:"hidden",id:"rowIndex",name:"rowIndex"});Q.appendChild(g.domNode);Q.appendChild(f.domNode);var H=document.createElement("tr");var K=document.createElement("td");J.appendChild(H);H.appendChild(K);var b=new dijit.form.Button({label:ASSIGN_NOW_LABEL});dojo.connect(b,"onClick",function(){var W=dijit.byId(ASSIGN_ENG_NOW_DIALOG).getValues();var U=W[R.identifierCol];var Y=W.rowIndex;var V="";var T=R.oldAssignStatus;if(R.dataRows!=undefined&&Y!=undefined&&Y!=""&&Y>=0){var X=R.dataRows[Y];V=X[ENG_EMAIL_COL_ID]}if(isEmptyVal(U)){alert("Please select a support engineer.");return}cleanupDialog(ASSIGN_ENG_NOW_DIALOG);TransferUtils.assignEngNow(U,V,T)});K.appendChild(b.domNode);var m=new dijit.form.Button({label:CANCEL_OP_LABEL});var A=headerDataAsJson.assignmentStatus;dojo.connect(m,"onClick",function(){TransferUtils.abortAssignNow(A);closeDialog(ASSIGN_ENG_NOW_DIALOG)});K.appendChild(m.domNode);var u=document.createElement("tr");var B=document.createElement("td");J.appendChild(u);u.appendChild(B);var o=document.createElement("table");dojo.attr(o,OP_DIALOG_TABLE_ATTR);var z=document.createElement("tbody");o.appendChild(z);B.appendChild(o);var G=R.dataCols;var s=getOPTableColumnRow(G);z.appendChild(s);var I=getOPTableDataRows(R.identifierCol,G,R.dataRows);z.appendChild(I);O.setContent(v);setTimeout(function(){O.show()},"0")};var SR_CLOSURE_DIALOG="srClosureDialog";var SRClosureUtil={};var cols=2;var reqFldsForClosure=[{id:"sub-Status",field:"sub-Status",required:true},{field:"SRRootcause",id:"SRRootcause",required:true},{field:"knownIssue",id:"knownIssue",required:true},{field:"resolutionCode",id:"resolutionCode",required:true},{field:"owner",id:"owner",required:true},{field:"SRHIFlag",id:"SRHIFlag"}];var hiddenFldsForClosure=[{id:"SRType",value:""},{id:"status",value:"Closed"}];SRClosureUtil.invokeLastSRClosureStep=function(){window.hiddenFldsForClosure=[{id:"SRType",value:""},{id:"status",value:"Closed"}];cleanupDialog(SR_CLOSURE_DIALOG);var o=createSRMDialog(SR_CLOSURE_DIALOG,"Close SR Final Step","",undefined,undefined);dojo.connect(o,"onCancel",function(){initMode=false;cleanupDialog(SR_CLOSURE_DIALOG)});dojo.connect(o,"hide",function(){SRUtils.unmarkDialogChanges("srHeader");cleanupDialog(SR_CLOSURE_DIALOG)});dojo.addClass(o,OP_DIALOG_CLASS);var y=document.createElement("table");dojo.attr(y,OP_DIALOG_TABLE_ATTR);var h=document.createElement("tbody");y.appendChild(h);var z=document.createElement("tr");var m=document.createElement("td");dojo.attr(m,{colSpan:cols});h.appendChild(z);z.appendChild(m);var u=new dijit.form.Button({label:"Save"});dojo.connect(u,"onClick",function(){initMode=false;var C=dijit.byId(SR_CLOSURE_DIALOG).getValues();var B={};for(var A in C){var D=C[A];if(dijit.byId(A)&&dijit.byId(A).type=="checkbox"){D=(dijit.byId(A).checked)?"true":"false"}A=A.replace(/Cloned/g,"");B[A]=D}SRClosureUtil.invokeCloseSRFinalXhrReq(B)});m.appendChild(u.domNode);var p=document.createElement("span");dojo.style(p,"padding","1px");m.appendChild(p);var q=new dijit.form.Button({label:CANCEL_OP_LABEL});dojo.connect(q,"onClick",this,function(){initMode=false;var A=SRUtils.showDialogModifiedAlert(dijit.byId(SR_CLOSURE_DIALOG).domNode);if(A==0){closeDialog(SR_CLOSURE_DIALOG)}});m.appendChild(q.domNode);var g=document.createElement("tr");var x=document.createElement("td");dojo.attr(x,{colSpan:cols});h.appendChild(g);var s=document.createElement("span");dojo.addClass(s,OP_DIALOG_TABLE_COL_CLASS);g.appendChild(s);var w=document.createTextNode("Please provide following data to close SR");s.appendChild(w);x.appendChild(s);g.appendChild(x);dojo.attr(g,{align:"left"});var b=0;var v=[];var a=0;dojo.forEach(reqFldsForClosure,function(D){var A;var B=getFieldLayout(D,true);if(B!=""){if(b==0){A=document.createElement("tr");a=a+1;h.appendChild(A);v.push(A)}else{A=v[a-1]}var C=document.createElement("td");dojo.attr(C,{nowrap:"nowrap",valign:"top",align:"left"});A.appendChild(C);C.innerHTML=B;b=b+1;if(b==cols){b=0}}});if(b>0&&b<cols&&v.length>1){for(i=b;i<b;i++){var f=v[v.length-1];var l=document.createElement("td");dojo.attr(l,{nowrap:"nowrap",valign:"top",align:"left"});f.appendChild(l)}b=0}dojo.forEach(hiddenFldsForClosure,function(D){if(D.value==""){D.value=getFieldVal(SRUtils.mapFormFldForCustom(D.id))}var B=getHiddenFieldLayout(D,true);if(B!=""){var A=document.createElement("tr");h.appendChild(A);var C=document.createElement("td");dojo.attr(C,{nowrap:"nowrap",valign:"top",align:"left",colSpan:cols});A.appendChild(C);C.innerHTML=B}});o.setContent(y);setTimeout(function(){o.show();SRClosureUtil.setStyle(reqFldsForClosure);SRClosureUtil.populateClosureForm()},"0")};SRClosureUtil.setStyle=function(f){dojo.forEach(f,function(v){var q=(v.required!=undefined)?v.required:false;if(v.id=="knownIssue"&&(!isTechnicalSR()||isHardwareSR()||isODSR())){q=false}if(q==true){var s=SRUtils.getMappedFormFldId(v,true);var o=s+"Row";var p=dijit.byId(s);var x=false;if(p!=undefined){x=dojo.attr(p.domNode,"readOnly")}var u=(x!=undefined&&x==true)?false:dojo.attr(p,"required");if(u!=true&&dojo.byId(o)!=undefined){}p.required=true;var m=dojo.query(".reqImgNode",dojo.byId(o));if(m!=undefined&&m.length>0){var w=m[0];w.innerHTML="";w.innerHTML='<img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/>'}}});var l=dijit.byId("HIAcknowledgeCloned");var h="HIAcknowledgeClonedRow";if(dojo.byId("shiImg")&&headerDataAsJson.HIAcknowledge=="false"){if(dojo.byId(h)){var a=dojo.query(".picklistNode",dojo.byId(h));if(a!=undefined&&a.length>0){var g=getSHIImgNode(true);var b=a[0];b.innerHTML="";dojo.style(g,{"vertical-align":"middle","padding-left":"2px","margin-left":"2px"});b.appendChild(g);dojo.connect(g,"onclick",function(){window.showSHI(true)})}}}else{if(dojo.byId(h)){dojo.style(dojo.byId(h),{display:"none"})}}};var dconnectHandle;SRClosureUtil.populateClosureForm=function(){initMode=true;setFieldVal("statusCloned","Closed");setFieldVal("empEmailCloned",headerDataAsJson.Owner);if(headerDataAsJson.HIAcknowledge=="true"){dijit.byId("HIAcknowledgeCloned").setAttribute("checked",true)}var a=loadSubstatusLOV(true);if(a!=undefined){a.addCallback(function(f){var b=loadRootCause(UPDATE_OP,true);b.addCallback(function(h){if(window.headerDataAsJson.RootCause==undefined||window.headerDataAsJson.RootCause==""){window.initMode=false;SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_DIALOG).domNode)}dijit.byId("rootCauseCloned").setValue(window.headerDataAsJson.RootCause);var g=loadReasonCodeLOV(true);if(g!=undefined){g.addErrback(function(){window.initMode=false;SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_DIALOG).domNode)})}g.addCallback(function(){setFieldVal("reasonCodeCloned",window.headerDataAsJson.ReasonCode);window.initMode=false;SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_DIALOG).domNode)})});b.addErrback(function(){initMode=false;SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_DIALOG).domNode)})});a.addErrback(function(){initMode=false;SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_DIALOG).domNode)})}setFieldVal("knownIssueCloned",window.headerDataAsJson.knownIssue)};SRClosureUtil.validateClosureForm=function(){validateFormFlds(SR_CLOSURE_DIALOG)};SRClosureUtil.invokeCloseSRFinalXhrReq=function(g){dijit.byId("pleasewait").show();errHandlingUtil.clearErrFlds(dijit.byId(SR_CLOSURE_DIALOG).domNode);var f=validateFormFlds(SR_CLOSURE_DIALOG);if(f.opStatus==-1){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}errHandlingUtil.errs=f.opResult;setTimeout("errHandlingUtil.processErrFlds(true)",10);return}var a=getActiveSrId();var b=getQueryTabName();var l=getSrModId();var h=getSrNumber();g.action="closeSRFinalStep";g.queryTabName=b;g.modId=l;g.activeSR=h;g.srId=a;g.stepId="Final";dojo.xhrPost({url:"../../../SRHeaderRequest",content:g,handleAs:"json",preventCache:true,load:function(o,m){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(o.opStatus==1){o.cancelLabel="Cancel";displayErrors(o)}if(o.srData!=undefined){SRUtils.unmarkDialogChanges(SR_CLOSURE_DIALOG);closeDialog(SR_CLOSURE_DIALOG);setHeaderJSONFromResponse(o.srData);processSRData(o.srData,"",true,false,"?refresh=true")}},error:function(o,m){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}}})};var reqFldsForReopen=[{id:"sub-Status",field:"sub-Status",required:true},{field:"SRHIFlag",id:"SRHIFlag"}];var hiddenFldsForReopen=[{id:"status",value:"Open"}];SRClosureUtil.reopenXhrReq=function(g){dijit.byId("pleasewait").show();errHandlingUtil.clearErrFlds(dijit.byId(SR_CLOSURE_DIALOG).domNode);var f=validateFormFlds(SR_CLOSURE_DIALOG);if(f.opStatus==-1){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}errHandlingUtil.errs=f.opResult;setTimeout("errHandlingUtil.processErrFlds(true)",10);return}var a=getActiveSrId();var b=getQueryTabName();var l=getSrModId();var h=getSrNumber();g.action="reopenSR";g.queryTabName=b;g.modId=l;g.activeSR=h;g.srId=a;dojo.xhrGet({url:"../../../SRHeaderRequest",content:g,handleAs:"json",preventCache:true,load:function(o,m){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(o.opStatus==1){errHandlingUtil.errs=o.opResult;setTimeout("errHandlingUtil.processErrFlds(true)",10);o.cancelLabel="Cancel";displayErrors(o)}if(o.srData!=undefined){closeDialog(SR_CLOSURE_DIALOG);setHeaderJSONFromResponse(o.srData);processSRData(o.srData,"",true,false,"?refresh=true")}},error:function(o,m){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}}})};SRClosureUtil.reopenSR=function(){cleanupDialog(SR_CLOSURE_DIALOG);var x=createDialog(SR_CLOSURE_DIALOG,"Reopen SR","",false);dojo.connect(x,"onCancel",function(){});dojo.connect(x,"hide",function(){initMode=false;errHandlingUtil.clearErrFlds(SR_CLOSURE_DIALOG);cleanupDialog(SR_CLOSURE_DIALOG)});dojo.addClass(x,OP_DIALOG_CLASS);var y=document.createElement("table");dojo.attr(y,OP_DIALOG_TABLE_ATTR);var a=document.createElement("tbody");y.appendChild(a);var f=document.createElement("tr");var p=document.createElement("td");dojo.attr(p,{colSpan:cols});a.appendChild(f);f.appendChild(p);var h=new dijit.form.Button({label:"Save"});dojo.connect(h,"onClick",function(){var D=dijit.byId(SR_CLOSURE_DIALOG).getValues();var C={};for(var B in D){var E=D[B];if(dijit.byId(B)&&dijit.byId(B).type=="checkbox"){E=(dijit.byId(B).checked)?"true":"false"}B=B.replace(/Cloned/g,"");C[B]=E}SRClosureUtil.reopenXhrReq(C)});p.appendChild(h.domNode);var g=document.createElement("span");dojo.style(g,"padding","1px");p.appendChild(g);var q=new dijit.form.Button({label:CANCEL_OP_LABEL});var w=headerDataAsJson.assignmentStatus;dojo.connect(q,"onClick",function(){errHandlingUtil.clearErrFlds(SR_CLOSURE_DIALOG);closeDialog(SR_CLOSURE_DIALOG)});p.appendChild(q.domNode);var s=document.createElement("tr");var A=document.createElement("td");dojo.attr(A,{colSpan:cols});a.appendChild(s);var v=document.createElement("span");dojo.addClass(v,OP_DIALOG_TABLE_COL_CLASS);s.appendChild(v);var o=document.createTextNode("Please provide following data to reopen SR");v.appendChild(o);A.appendChild(v);s.appendChild(A);dojo.attr(s,{align:"left"});var u=0;var b=[];dojo.forEach(hiddenFldsForReopen,function(E){if(E.value==""){E.value=getFieldVal(SRUtils.mapFormFldForCustom(E.id))}var C=getHiddenFieldLayout(E,true);if(C!=""){var B=document.createElement("tr");a.appendChild(B);var D=document.createElement("td");dojo.attr(D,{nowrap:"nowrap",valign:"top",align:"left",colSpan:cols});B.appendChild(D);D.innerHTML=C}});var l=0;dojo.forEach(reqFldsForReopen,function(E){var B;var C=getFieldLayout(E,true);if(C!=""){if(u==0){B=document.createElement("tr");l=l+1;a.appendChild(B);b.push(B)}else{B=b[l-1]}var D=document.createElement("td");dojo.attr(D,{nowrap:"nowrap",valign:"top",align:"left"});B.appendChild(D);D.innerHTML=C;u=u+1;if(u==cols){u=0}}});if(u>0&&u<cols&&b.length>1){for(i=u;i<u;i++){var m=b[b.length-1];var z=document.createElement("td");dojo.attr(z,{nowrap:"nowrap",valign:"top",align:"left"});m.appendChild(z)}u=0}x.setContent(y);setTimeout(function(){x.show();SRClosureUtil.setStyle(reqFldsForReopen);SRClosureUtil.populateReopenForm()},"0")};SRClosureUtil.populateReopenForm=function(){if(headerDataAsJson.HIAcknowledge=="true"){dijit.byId("HIAcknowledgeCloned").setAttribute("checked",true)}loadSubstatusLOV(true)};var SRQueue={};SRQueue.queue=new Array();SRQueue.lastSRLoadingTimestamp=null;SRQueue.put=function(l,h){if(l!==null&&l!==undefined&&l.length>0){SRQueue.queue.push(l);if(h==undefined){h=true}var a="/oip/faces/secure/srm/srview/SRNavLoadSRFromQueue.html";var g=undefined;if(h==true){var f=window.open(a);g=f.document}else{g=window.document;window.self.location.href=(a)}g.open();var b="<html><body>loading SR "+l+' ...<form action="/oip/faces/secure/srm/srview/SRTechnical.jspx" method="GET" id="srNavForm"><input type="hidden" id="srNumber" name="srNumber" value="'+l+'" /></form><script type="text/javascript">if (window.opener) { window.opener.focus(); }';if(h==true){b+='function pingOpenerOrStartLoading() { if (window.opener && window.opener.SRQueue != undefined) {window.opener.SRQueue.pingFromLoader(window); } else { clearInterval(pingInterval); document.getElementById("srNavForm").submit(); }}'}else{b+='function pingOpenerOrStartLoading() { clearInterval(pingInterval); document.getElementById("srNavForm").submit();}'}b+='var pingInterval = setInterval("pingOpenerOrStartLoading()", 1000);<\/script></body></html>';g.write(b);g.close()}};SRQueue.pingFromLoader=function(a){var f=a.document;var b=f.getElementById("srNumber").value;if(SRQueue.isSRLoadable(b)){SRQueue.lastSRLoadingTimestamp=(new Date()).getTime();SRQueue.queue.shift();a.clearInterval(a.pingInterval);f.getElementById("srNavForm").submit()}};SRQueue.isSRLoadable=function(a){if(SRQueue.queue[0]==a&&(SRQueue.lastSRLoadingTimestamp==null||((new Date()).getTime()>(SRQueue.lastSRLoadingTimestamp+30000)))){return true}return false};SRQueue.resetTimestamp=function(){try{if(window.opener){if(window.opener.SRQueue){window.opener.SRQueue.lastSRLoadingTimestamp=null}}else{}}catch(a){console.log("SRQueue.resetTimestamp failed")}};var UNSET_24x7_REASON_CODE_DIALOG="unset24x7ReasonCodeDialog";var SR_CWW_Util={};var reqFldsForUnset24x7ReasonCode=[{id:"unset24x7ReasonCode",field:"requestFullSupportReasonCode",required:true}];var hiddenFldsForUnset24x7ReasonCode=[{}];SR_CWW_Util.promptUnset24x7ReasonCode=function(){cleanupDialog(UNSET_24x7_REASON_CODE_DIALOG);var o=createDialog(UNSET_24x7_REASON_CODE_DIALOG,"Enter Unset 24 x 7 Reason Code","",false);dojo.connect(o,"onCancel",function(){var A=alert("Warning: Cancel will revert 24 x7 to true");dijit.byId("fld24x7").setValue(true)});dojo.connect(o,"hide",function(){initMode=false;errHandlingUtil.clearErrFlds(dijit.byId(UNSET_24x7_REASON_CODE_DIALOG).domNode);closeDialog(UNSET_24x7_REASON_CODE_DIALOG)});dojo.addClass(o,OP_DIALOG_CLASS);var y=document.createElement("table");dojo.attr(y,OP_DIALOG_TABLE_ATTR);var h=document.createElement("tbody");y.appendChild(h);var z=document.createElement("tr");var m=document.createElement("td");dojo.attr(m,{colSpan:cols});h.appendChild(z);z.appendChild(m);var u=new dijit.form.Button({label:"Save","class":"saveButtonX"});dojo.connect(u,"onClick",function(){var G=0;var C=dijit.byId(UNSET_24x7_REASON_CODE_DIALOG).getValues();for(var B in C){var E=C[B];var F=dijit.byId(B);var D=validateSPDialogWidgetCopy(F);if(D){if(F&&F.type=="checkbox"){E=(F.checked)?"true":"false"}B=B.replace(/Cloned/g,"");var A=dijit.byId(B);if(A!=undefined){A.setValue(E)}}else{F.focus();G++}}if(G==0){saveSRHeader();errHandlingUtil.clearErrFlds(dijit.byId(UNSET_24x7_REASON_CODE_DIALOG).domNode);closeDialog(UNSET_24x7_REASON_CODE_DIALOG)}});m.appendChild(u.domNode);var p=document.createElement("span");dojo.style(p,"padding","1px");m.appendChild(p);var q=new dijit.form.Button({label:CANCEL_OP_LABEL,"class":"cancelButtonX"});dojo.connect(q,"onClick",function(){var A=confirm("Cancel will revert 24 x7 to true. Do you want to proceed ?");if(A){dijit.byId("fld24x7").setValue(true);errHandlingUtil.clearErrFlds(dijit.byId(UNSET_24x7_REASON_CODE_DIALOG).domNode);closeDialog(UNSET_24x7_REASON_CODE_DIALOG)}});m.appendChild(q.domNode);var g=document.createElement("tr");var x=document.createElement("td");dojo.attr(x,{colSpan:cols});h.appendChild(g);var s=document.createElement("span");dojo.addClass(s,OP_DIALOG_TABLE_COL_CLASS);g.appendChild(s);var w=document.createTextNode("Please provide a valid reason code for unsetting 24 x 7 ");s.appendChild(w);x.appendChild(s);g.appendChild(x);dojo.attr(g,{align:"left"});var b=0;var v=[];dojo.forEach(hiddenFldsForUnset24x7ReasonCode,function(D){if(D.value==""){D.value=getFieldVal(SRUtils.mapFormFldForCustom(D.id))}var B=getHiddenFieldLayout(D,true);if(B!=""){var A=document.createElement("tr");h.appendChild(A);var C=document.createElement("td");dojo.attr(C,{nowrap:"nowrap",valign:"top",align:"left",colSpan:cols});A.appendChild(C);C.innerHTML=B}});var a=0;dojo.forEach(reqFldsForUnset24x7ReasonCode,function(D){var A;var B=getFieldLayout(D,true);if(B!=""){if(b==0){A=document.createElement("tr");a=a+1;h.appendChild(A);v.push(A)}else{A=v[a-1]}var C=document.createElement("td");dojo.attr(C,{nowrap:"nowrap",valign:"top",align:"left"});A.appendChild(C);C.innerHTML=B;b=b+1;if(b==cols){b=0}}});if(b>0&&b<cols&&v.length>1){for(i=b;i<b;i++){var f=v[v.length-1];var l=document.createElement("td");dojo.attr(l,{nowrap:"nowrap",valign:"top",align:"left"});f.appendChild(l)}b=0}o.setContent(y);setTimeout(function(){o.show();SR_CWW_Util.setStyle(reqFldsForUnset24x7ReasonCode)},"0")};SR_CWW_Util.populateForm=function(){};SR_CWW_Util.setStyle=function(a){dojo.forEach(a,function(p){var l=(p.required!=undefined)?p.required:false;var f=p.id;if(l==true){var o=f+"Cloned";var g=o+"Row";var h=dijit.byId(o);if(l===true&&dojo.byId(g)!=undefined){}h.required=true;var b=dojo.query(".reqImgNode",dojo.byId(g));if(b!=undefined&&b.length>0){var q=b[0];q.innerHTML="";q.innerHTML='<img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/>'}}var m=dijit.byId(o);m.setAttribute("readOnly",false);m._setStateClass()})};function onchange_unset24x7ReasonCode(a){if(initMode){return}var g=(a!=undefined&&a==true)?"unset24x7ReasonCodeCloned":"unset24x7ReasonCode";var f=dijit.byId(g);var b=f.getValue();if(b.toLowerCase()===UNSET_24x7_REASON_CODE_CUST_DOWNGRADE.toLowerCase()&&dijit.byId("severity").getValue()===SEV_1){displayErrors(getDisplayMessageObj(ERROR_MSG_CUST_DOWNGRADE_SEV1,2));f.setValue("");f.focus()}}function showEscMgrs(){var b=getSrNumber();var a="../../../secure/grp/sr/srCurrentResources.jspx?requestNum="+b;window.open(a)}function getTransferClarificationCount(b){var a=0;dojo.xhrGet({url:"../../../SRHeaderRequest",content:{action:"getClarificationCount",category:b},handleAs:"json",preventCache:true,sync:true,load:function(f){if(f!=undefined&&f.clarificationCount!=undefined){a=f.clarificationCount}},error:function(f){console.error("An error occurred: ",f)},timeout:10000});return a}var step1Cols=1;var SR_CLOSURE_WIZARD="srClosureWizard";var SRClosureProcess={};var reqFldsForClosureWiz=[{id:"sub-Status",field:"sub-Status",required:true},{field:"resolutionCode",id:"resolutionCode",required:true},{field:"knownIssue",id:"knownIssue",required:true},{field:"SROutageType",id:"SROutageType",required:false},{field:"SROutageStartDate",id:"SROutageStartDate",required:false},{field:"SROutageEndDate",id:"SROutageEndDate",required:false},{field:"SROutagePercentage",id:"SROutagePercentage",required:false}];var hiddenFldsForClosureWiz=[{id:"SRType",value:""},{id:"status",value:"Closed"},{id:"SRRootcause",value:""}];var WIZ_DIALOG_CLASS="wizDialogClass";var SR_CLOSURE_STEP1_ID="srClosureStep1";var SR_CLOSURE_STEP2_ID="srClosureStep2";var SR_CLOSURE_STEP3_ID="srClosureStep3";var SR_CLOSURE_STEP4_ID="srClosureStep4";var SR_CLOSURE_STEP5_ID="srClosureStep5";var SR_CLOSURE_STEP6_ID="srClosureStep6";var SR_CLOSURE_STEP7_ID="srClosureStep7";var SR_CLOSURE_STEP8_ID="srClosureStep8";var SR_CLOSURE_BUTTON_BAR_ID="srClosureTabButtons";var SR_CLOSURE_TAB_CONTAINER_ID="srClosureTabContainer";var SR_CLOSURE_CONTENT_PANE_ID="srClosureTabCP";var CUSTOMER_ABANDONED_STATUS="Customer Abandoned";var AWAITING_FIELD_AUTO_CLOSE_STATUS="Awaiting Field Auto-Close";var DUPLICATE_STATUS="Duplicate";var SOLVED_SR_CLASSIFICATION="Solved SR";var SOLUTION_FROM_DUPLICATE_CHECK="Solution From Similarity Check";var CREATED_FROM_SR_CLASSIFICATION="Created From SR";var ENGINEER_RESEARCH="Engineer Research";var CUSTOMER_RESEARCH="Customer Research";var substatusForAutoSrClose=new Array("Customer Abandoned","Duplicate","Not Entitled","No fault found");var substatusForKnownBugIssue=new Array("Defect Pending","Enhancement Request");var substatusForKnownSolutionIssue=new Array("Resolved with Solution","Resolved with Workaround");var substatusForNoOdm=new Array("Customer Abandoned","No fault found","Defect Pending","Enhancement Request","Not Entitled","Duplicate");var CLOSURE_DIALOG_TABLE_ATTR={width:"100%",cellSpacing:3,cellPadding:3};var CLOSURE_DIALOG_NESTED_TABLE_ATTR={width:"100%",cellSpacing:5,cellPadding:1};var TAB_REASON_FOR_CLOSE="Reason For SR Close";var TAB_ODM="ODM";var ODM_TITLE="Oracle Diagnostic Methodology";var TAB_CLOSE_ESC="Close Escalations";var TAB_CLOSE_COLLABS="Close Collaborations";var TAB_CLASSIFY_RELATED="Classify Related";var TAB_IDENTIFY_SOLUTION="Identify SR Solution";var TAB_TAG_ERRORS="Tag Errors";var TAB_FINAL_REVIEW="Close SR";var EXTERNAL_COLLAB_SR="External Collaboration SR";var INTERNAL_COLLAB_SR="Internal Collaboration SR";var tabMap=new Map();var SR_LAST_UPDATED_SPAN_ID="srLastUpdated";SRClosureProcess.getRootcause=function(){if(headerDataAsJson.SRType=="Non-Technical"){return""}var b=getFieldVal("productClassification");var a=getFieldVal("productClass");if(b=="Hardware"||b=="Integrated Software"){return"Hardware"}else{if(b=="Software"&&(a=="Cloud"||a=="CloudNS")){return"Cloud"}else{return"Software"}}};SRClosureProcess.isRestrictedOrSecure=function(){var a=(headerDataAsJson.secureSr&&headerDataAsJson.secureSr=="true")?true:false;var b=(headerDataAsJson.restrictedSRFlag&&headerDataAsJson.restrictedSRFlag=="true")?true:false;console.info("isSecure :"+a+" ; is Restricted :"+b);return(a||b)};SRClosureProcess.maxSummaryLimit=100;SRClosureProcess.maxCommentsLimit=250;SRClosureProcess.windowTitleNode=function(){var B=document.createElement("table");dojo.attr(B,{width:"98%"});var f=document.createElement("tbody");var g=document.createElement("tr");var p=document.createElement("td");var m=document.createElement("td");dojo.attr(m,{align:"right"});dojo.style(m,{width:"20%"});var a=30;var b=truncateString(window.headerDataAsJson.Summary,SRClosureProcess.maxSummaryLimit);var o="Close "+getSrNumber()+" "+b;var v=document.createTextNode(o);var z=document.createElement("span");z.appendChild(v);dojo.addClass(z,"opDialogHeaderClass");dojo.style(z,{padding:"3px",margin:"3px"});p.appendChild(z);var A="Last Updated "+window.headerDataAsJson.UpdatedRelativeDate;var q=document.createTextNode(A);var w=document.createElement("span");dojo.attr(w,{id:SR_LAST_UPDATED_SPAN_ID});w.appendChild(q);m.appendChild(w);g.appendChild(p);g.appendChild(m);f.appendChild(g);var C=document.createElement("tr");var l=document.createElement("td");var s=headerDataAsJson.ContactEmail+", "+headerDataAsJson.Substatus;var u=document.createTextNode(s);var x=document.createElement("span");dojo.style(x,{padding:"3px",margin:"3px"});x.appendChild(u);var h=document.createElement("td");dojo.attr(h,{align:"right"});dojo.style(h,{width:"20%"});l.appendChild(x);var y=document.createElement("span");dojo.addClass(y,"statusNode");h.appendChild(y);C.appendChild(l);C.appendChild(h);f.appendChild(C);B.appendChild(f);return B};SRClosureProcess.setMesssage=function(f){var a=dojo.query(".statusNode",dijit.byId(SR_CLOSURE_CONTENT_PANE_ID).domNode);if(a!=undefined&&a.length==1){var b=a[0];b.innerHTML=f}};SRClosureProcess.getStepName=function(a){if(a==SR_CLOSURE_STEP1_ID){return TAB_REASON_FOR_CLOSE}if(a==SR_CLOSURE_STEP2_ID){return TAB_ODM}if(a==SR_CLOSURE_STEP3_ID){return TAB_CLOSE_ESC}if(a==SR_CLOSURE_STEP4_ID){return TAB_CLOSE_COLLABS}if(a==SR_CLOSURE_STEP5_ID){return TAB_CLASSIFY_RELATED}if(a==SR_CLOSURE_STEP6_ID){return TAB_TAG_ERRORS}if(a==SR_CLOSURE_STEP7_ID){return TAB_IDENTIFY_SOLUTION}if(a==SR_CLOSURE_STEP8_ID){return TAB_FINAL_REVIEW}return""};SRClosureProcess.setPaneContent=function(){tabMap.put(SR_CLOSURE_STEP1_ID,new dijit.layout.ContentPane({id:SR_CLOSURE_STEP1_ID,style:"height:auto;",title:TAB_REASON_FOR_CLOSE},dojo.doc.createElement("div")));tabMap.put(SR_CLOSURE_STEP2_ID,new dijit.layout.ContentPane({id:SR_CLOSURE_STEP2_ID,style:"height:auto;",title:TAB_ODM},dojo.doc.createElement("div")));tabMap.put(SR_CLOSURE_STEP3_ID,new dijit.layout.ContentPane({id:SR_CLOSURE_STEP3_ID,style:"height:auto;",title:TAB_CLOSE_ESC},dojo.doc.createElement("div")));tabMap.put(SR_CLOSURE_STEP4_ID,new dijit.layout.ContentPane({id:SR_CLOSURE_STEP4_ID,style:"height:auto;",title:TAB_CLOSE_COLLABS},dojo.doc.createElement("div")));tabMap.put(SR_CLOSURE_STEP5_ID,new dijit.layout.ContentPane({id:SR_CLOSURE_STEP5_ID,style:"height:auto;",title:TAB_CLASSIFY_RELATED},dojo.doc.createElement("div")));tabMap.put(SR_CLOSURE_STEP6_ID,new dijit.layout.ContentPane({id:SR_CLOSURE_STEP6_ID,style:"height:auto;",title:TAB_TAG_ERRORS},dojo.doc.createElement("div")));tabMap.put(SR_CLOSURE_STEP7_ID,new dijit.layout.ContentPane({id:SR_CLOSURE_STEP7_ID,style:"height:auto;",title:TAB_IDENTIFY_SOLUTION},dojo.doc.createElement("div")));tabMap.put(SR_CLOSURE_STEP8_ID,new dijit.layout.ContentPane({id:SR_CLOSURE_STEP8_ID,style:"height:auto;",title:TAB_FINAL_REVIEW},dojo.doc.createElement("div")));return tabMap};SRClosureProcess.cleanup=function(){if(dijit.byId(SR_CLOSURE_STEP1_ID)){dijit.byId(SR_CLOSURE_STEP1_ID).destroyRecursive()}if(dijit.byId(SR_CLOSURE_STEP2_ID)){dijit.byId(SR_CLOSURE_STEP2_ID).destroyRecursive()}if(dijit.byId(SR_CLOSURE_STEP3_ID)){dijit.byId(SR_CLOSURE_STEP3_ID).destroyRecursive()}if(dijit.byId(SR_CLOSURE_STEP4_ID)){dijit.byId(SR_CLOSURE_STEP4_ID).destroyRecursive()}if(dijit.byId(SR_CLOSURE_STEP5_ID)){dijit.byId(SR_CLOSURE_STEP5_ID).destroyRecursive()}if(dijit.byId(SR_CLOSURE_STEP6_ID)){dijit.byId(SR_CLOSURE_STEP6_ID).destroyRecursive()}if(dijit.byId(SR_CLOSURE_STEP7_ID)){dijit.byId(SR_CLOSURE_STEP7_ID).destroyRecursive()}if(dijit.byId(SR_CLOSURE_STEP8_ID)){dijit.byId(SR_CLOSURE_STEP8_ID).destroyRecursive()}if(dijit.byId(SR_CLOSURE_BUTTON_BAR_ID)){dijit.byId(SR_CLOSURE_BUTTON_BAR_ID).destroyRecursive()}if(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID)){dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).destroyRecursive()}if(dijit.byId(SR_CLOSURE_CONTENT_PANE_ID)){dijit.byId(SR_CLOSURE_CONTENT_PANE_ID).destroyRecursive()}cleanupDialog(SR_CLOSURE_WIZARD);SRClosureProcess.availableTabs=new Array();SRClosureProcess.openSrRefs={};SRClosureProcess.dataMap.clear();SRClosureProcess.publicDoneKmId=""};SRClosureProcess.tabContainerHandling=function(){dojo.connect(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),"_transition",function(h,g){if(dijit.byId(SR_CLOSURE_BUTTON_BAR_ID)){dijit.byId(SR_CLOSURE_BUTTON_BAR_ID).destroyDescendants()}dijit.byId(SR_CLOSURE_BUTTON_BAR_ID).domNode.innerHTML="";setTimeout(function(){SRClosureProcess.setWizButtons(f)},"0");var f=h.id;var a=g.id;var b=h.containerNode.hasChildNodes();if(!b){if(f==SR_CLOSURE_STEP1_ID){setTimeout(function(){SRClosureProcess.step1()},"0")}else{if(f==SR_CLOSURE_STEP2_ID){setTimeout(function(){SRClosureProcess.step2()},"0")}else{if(f==SR_CLOSURE_STEP3_ID){setTimeout(function(){SRClosureProcess.step3()},"0")}else{if(f==SR_CLOSURE_STEP4_ID){setTimeout(function(){SRClosureProcess.step4()},"0")}else{if(f==SR_CLOSURE_STEP5_ID){setTimeout(function(){SRClosureProcess.step5()},"0")}else{if(f==SR_CLOSURE_STEP6_ID){setTimeout(function(){SRClosureProcess.step6()},"0")}else{if(f==SR_CLOSURE_STEP7_ID){setTimeout(function(){SRClosureProcess.step7()},"0")}}}}}}}}else{setTimeout(function(){SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);if(f!=SR_CLOSURE_STEP8_ID&&f!=SR_CLOSURE_STEP7_ID&&f!=SR_CLOSURE_STEP5_ID&&f!=SR_CLOSURE_STEP6_ID){SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_WIZARD).domNode)}},"0")}if(f==SR_CLOSURE_STEP8_ID){h.destroyDescendants();setTimeout(function(){SRClosureProcess.step8()},"0")}if(a==SR_CLOSURE_STEP2_ID){setTimeout(function(){SRClosureProcess.setOdmTrainInTab(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),g)},"0")}if(f==SR_CLOSURE_STEP7_ID){setTimeout(function(){SRClosureProcess.step7();dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=true},"0")}if(a==SR_CLOSURE_STEP7_ID){setTimeout(function(){SRClosureProcess.step7_refreshAndCheckForCompletion()},"0")}else{if(a==SR_CLOSURE_STEP5_ID){setTimeout(function(){SRClosureProcess.step5_refreshAndCheckForCompletion()},"0")}else{if(a==SR_CLOSURE_STEP6_ID){setTimeout(function(){SRClosureProcess.step6_refreshAndCheckForCompletion()},"0")}else{if(a==SR_CLOSURE_STEP3_ID){setTimeout(function(){SRClosureProcess.step3_checkForCompletion()},"0")}else{setTimeout(function(){SRClosureProcess.setStepStatus(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),g,SRClosureProcess.getStepStatus(g))},"0")}}}}})};SRClosureProcess.isCloseButtonAvailable=function(a){if(a==SR_CLOSURE_STEP8_ID){return true}return false};SRClosureProcess.setWizButtons=function(g){var b=dojo.indexOf(SRClosureProcess.availableTabs,g);var h=false;var a=false;if(!isEmptyVal(SRClosureProcess.getNextStep(g))){h=true}if(!isEmptyVal(SRClosureProcess.getPreviousStep(g))){a=true}var l=SRClosureProcess.isCloseButtonAvailable(g);var f=SRClosureProcess.buildButtonToolbar(g,a,h,l);dijit.byId(SR_CLOSURE_BUTTON_BAR_ID).domNode.appendChild(f);if(dijit.byId(SR_CLOSURE_STEP1_ID+"_next")){dojo.connect(dijit.byId(SR_CLOSURE_STEP1_ID+"_next"),"onClick",function(){if(!SRUtils.isDialogModified(dijit.byId(SR_CLOSURE_WIZARD).domNode)){SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP1_ID,"next");return}SRClosureProcess.saveStep1("next")})}if(dijit.byId(SR_CLOSURE_STEP2_ID+"_next")){dojo.connect(dijit.byId(SR_CLOSURE_STEP2_ID+"_next"),"onClick",function(){if(!SRUtils.isDialogModified(dijit.byId(SR_CLOSURE_WIZARD).domNode)){SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP2_ID,"next");return}initMode=false;var m=SRClosureProcess.getStep2Json();SRClosureProcess.invokeStep2XhrReq(m,"next")})}if(dijit.byId(SR_CLOSURE_STEP2_ID+"_previous")){dojo.connect(dijit.byId(SR_CLOSURE_STEP2_ID+"_previous"),"onClick",function(){if(!SRUtils.isDialogModified(dijit.byId(SR_CLOSURE_WIZARD).domNode)){SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP2_ID,"previous");return}initMode=false;var m=SRClosureProcess.getStep2Json();SRClosureProcess.invokeStep2XhrReq(m,"previous")})}if(dijit.byId(SR_CLOSURE_STEP3_ID+"_next")){dojo.connect(dijit.byId(SR_CLOSURE_STEP3_ID+"_next"),"onClick",function(){SRClosureProcess.invokeStep3Nav("next")})}if(dijit.byId(SR_CLOSURE_STEP3_ID+"_previous")){dojo.connect(dijit.byId(SR_CLOSURE_STEP3_ID+"_previous"),"onClick",function(){SRClosureProcess.invokeStep3Nav("previous")})}if(dijit.byId(SR_CLOSURE_STEP4_ID+"_next")){dojo.connect(dijit.byId(SR_CLOSURE_STEP4_ID+"_next"),"onClick",function(){SRClosureProcess.invokeStep4Nav("next")})}if(dijit.byId(SR_CLOSURE_STEP4_ID+"_previous")){dojo.connect(dijit.byId(SR_CLOSURE_STEP4_ID+"_previous"),"onClick",function(){SRClosureProcess.invokeStep4Nav("previous")})}if(dijit.byId(SR_CLOSURE_STEP5_ID+"_next")){dojo.connect(dijit.byId(SR_CLOSURE_STEP5_ID+"_next"),"onClick",function(){SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP5_ID,"next")})}if(dijit.byId(SR_CLOSURE_STEP5_ID+"_previous")){dojo.connect(dijit.byId(SR_CLOSURE_STEP5_ID+"_previous"),"onClick",function(){SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP5_ID,"previous")})}if(dijit.byId(SR_CLOSURE_STEP6_ID+"_next")){dojo.connect(dijit.byId(SR_CLOSURE_STEP6_ID+"_next"),"onClick",function(){SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP6_ID,"next")})}if(dijit.byId(SR_CLOSURE_STEP6_ID+"_previous")){dojo.connect(dijit.byId(SR_CLOSURE_STEP6_ID+"_previous"),"onClick",function(){SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP6_ID,"previous")})}if(dijit.byId(SR_CLOSURE_STEP7_ID+"_next")){dojo.connect(dijit.byId(SR_CLOSURE_STEP7_ID+"_next"),"onClick",function(){SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP7_ID,"next")})}if(dijit.byId(SR_CLOSURE_STEP7_ID+"_previous")){dojo.connect(dijit.byId(SR_CLOSURE_STEP7_ID+"_previous"),"onClick",function(){SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP7_ID,"previous")})}if(dijit.byId(SR_CLOSURE_STEP8_ID+"_previous")){dojo.connect(dijit.byId(SR_CLOSURE_STEP8_ID+"_previous"),"onClick",function(){SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP8_ID,"previous")})}if(dijit.byId(SR_CLOSURE_STEP8_ID+"_closeSr")){dojo.connect(dijit.byId(SR_CLOSURE_STEP8_ID+"_closeSr"),"onClick",function(){SRClosureProcess.step8XhrReq()})}};SRClosureProcess.availableTabs=new Array();SRClosureProcess.isHardwareSr=function(){if(isTechnicalSR()){return isHardwareSR()}else{return HWSRUtil.isNonTechSRHardware()}};var COMPLETED_STEP_STATUS="completed";var REQUIRED_INCOMPLETE_STEP_STATUS="required_incomplete";var OPTIONAL_INCOMPLETE_STEP_STATUS="optional_incomplete";SRClosureProcess.setTabIcons=function(){for(tabcnt=0;tabcnt<SRClosureProcess.availableTabs.length;tabcnt++){var f=SRClosureProcess.availableTabs[tabcnt];var b=dijit.byId(f);if(f==SR_CLOSURE_STEP7_ID){SRClosureProcess.setStepStatus(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),dijit.byId(SR_CLOSURE_STEP7_ID),SRClosureProcess.step7_isError()?REQUIRED_INCOMPLETE_STEP_STATUS:OPTIONAL_INCOMPLETE_STEP_STATUS)}else{var a=SRClosureProcess.getStepStatus(b);SRClosureProcess.setStepStatus(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),b,a)}}SRClosureProcess.setOdmTrainInTab(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),dijit.byId(SR_CLOSURE_STEP2_ID))};SRClosureProcess.setClosureTabs=function(f,o,g,h){var b=SRClosureProcess.readSubstatus();var l=window.headerDataAsJson.knownIssue;SRClosureProcess.loadTLCM(headerDataAsJson.productClass);if(SRClosureProcess.isOdmCompliant()&&isEmptyVal(SRClosureProcess.publicDoneKmId)){SRClosureProcess.createKMForOdmCompliance()}var m={};m.retrieveAll=true;m.sync=true;m.scanAndAssociateAll=true;var a=SRClosureProcess.loadOpenSrRefs(m);if(a!=undefined){a.addBoth(function(q){f.addChild(tabMap.get(SR_CLOSURE_STEP1_ID));SRClosureProcess.availableTabs.push(SR_CLOSURE_STEP1_ID);f.addChild(tabMap.get(SR_CLOSURE_STEP2_ID));SRClosureProcess.availableTabs.push(SR_CLOSURE_STEP2_ID);if(SRClosureProcess.hasFakeOpenEscalations()){f.addChild(tabMap.get(SR_CLOSURE_STEP3_ID));SRClosureProcess.availableTabs.push(SR_CLOSURE_STEP3_ID)}if(SRClosureProcess.hasOpenCollab()||SRClosureProcess.hasOpenRfcs()){f.addChild(tabMap.get(SR_CLOSURE_STEP4_ID));SRClosureProcess.availableTabs.push(SR_CLOSURE_STEP4_ID)}if(SRClosureProcess.hasOpenDefects()||SRClosureProcess.hasOpenRelatedSrs()){f.addChild(tabMap.get(SR_CLOSURE_STEP5_ID));SRClosureProcess.availableTabs.push(SR_CLOSURE_STEP5_ID)}if(SRClosureProcess.hasOpenErrMsgs()){f.addChild(tabMap.get(SR_CLOSURE_STEP6_ID));SRClosureProcess.availableTabs.push(SR_CLOSURE_STEP6_ID)}f.addChild(tabMap.get(SR_CLOSURE_STEP7_ID));f.addChild(tabMap.get(SR_CLOSURE_STEP8_ID));SRClosureProcess.availableTabs.push(SR_CLOSURE_STEP7_ID);SRClosureProcess.availableTabs.push(SR_CLOSURE_STEP8_ID);var p=SRClosureProcess.windowTitleNode();o.containerNode.appendChild(p);o.containerNode.appendChild(f.domNode);o.containerNode.appendChild(h.domNode);g.setContent(o.domNode);f.startup();f.layout();SRClosureProcess.tabContainerHandling();dojo.connect(f,"tabOnClickRequest",function(){SRClosureProcess.onChangeTab()});setTimeout(function(){g.show();SRClosureProcess.step1();SRClosureProcess.setTabIcons()},"0");setTimeout(function(){SRClosureProcess.hideOrShowOutageFields()},"10")})}};SRClosureProcess.invokeSRClosureWiz=function(){if(useRewriteSRClose==true&&isBrowserSupportedNSP==true){SRClosureProcess.mosspSRClose();return -1}var h=getPageSytemParamValue("SRM_MOSSP_SRCLOSE_IS_DEFAULT_CLOSE");if(h!=undefined&&h=="true"&&isBrowserSupportedNSP==false){if(dijit.byId("pleasewait")){dijit.byId("pleasewait").hide()}var f=getPageSytemParamValue("SRM_IE_SRCLOSE_NOT_SUPPORTED_MSG")!=undefined?getPageSytemParamValue("SRM_IE_SRCLOSE_NOT_SUPPORTED_MSG"):"Internet Explorer is not a supported browser for SR Close from the new Support Portal. Please use another browser.";var a=[{message:f}];SRClosureProcess.displayNSPBrowser(f);return -1}SRClosureProcess.cleanup();SRClosureProcess.setPaneContent();loadKnownIssue();var l=SRClosureProcess.getRootcause();window.hiddenFldsForClosureWiz=[{id:"SRType",value:""},{id:"status",value:"Closed"},{id:"SRRootcause",value:l}];var g=createSRMDialog(SR_CLOSURE_WIZARD,"SR Close Wizard","",undefined,undefined);dojo.addClass(g,WIZ_DIALOG_CLASS);dojo.style(g.domNode,{width:"1000px","min-height":"550px",overflow:"hidden"});var o=new dijit.layout.ContentPane({id:SR_CLOSURE_CONTENT_PANE_ID,style:"width: 100%;min-height: 500px;overflow:hidden;padding: 1px; margin: 1px;"},dojo.doc.createElement("div"));var b=new srm.TabContainer({id:SR_CLOSURE_TAB_CONTAINER_ID,preventCache:true,tabPosition:"left-h",style:"width: 98%;min-height:450px;padding: 1px; margin: 1px;"},dojo.doc.createElement("div"));var m=new dijit.layout.ContentPane({id:SR_CLOSURE_BUTTON_BAR_ID,style:"height:40px;overflow:hidden;background-color:#A9E2F3;"},dojo.doc.createElement("div"));SRClosureProcess.setClosureTabs(b,o,g,m)};SRClosureProcess.setButtonBarPosition=function(a,b){var g=dojo.marginBox(a);var f=dojo.contentBox(a);dojo.style(b,{width:f.w+"px",left:g.l+"px",position:"relative"})};SRClosureProcess.displayNSPBrowser=function(v){if(v!=""){var o=getPageSytemParamValue("SRM_DISPLAY_NSP_BROWSER_VALID_BROWSERS_URL");var q=htmlDecode(v);var s=new dijit.Dialog({title:"Browser Migration Required",style:"width:20%; font-family:verdana;z-index:255;  text-align:middle; background-color: #FFFFFF; border:2px solid rgb(153,187,232);"});var p=new dijit.layout.LayoutContainer({style:"width: 100%; overflow:hidden; height: 100px; "});var g=new dijit.layout.ContentPane({layoutAlign:"client",style:"width: 98%; overflow:hidden; height: 75px; border: 0px; margin-bottom: 1px; padding: 1px; border: 0px solid #D8D8D8;"});var a=new dijit.layout.ContentPane({layoutAlign:"bottom",style:"width: 99.9%; overflow:hidden; height: 20px; margin-bottom: 1px; padding: 1px; border: 0px solid gray;"});p.addChild(g);p.addChild(a);var l=document.createElement("span");l.innerHTML=q;var m=new dijit.form.Button({label:"Review Browsers",onClick:function(w){window.open(o);s.hide();s.destroyRecursive()}});g.containerNode.appendChild(l);var u=document.createElement("table");u.setAttribute("width","100%");u.setAttribute("align","center");var h=document.createElement("tbody");u.appendChild(h);a.containerNode.appendChild(u);var f=document.createElement("tr");h.appendChild(f);var b=document.createElement("td");b.setAttribute("colSpan","3");b.setAttribute("align","right");f.appendChild(b);b.appendChild(m.domNode);s.containerNode.appendChild(p.domNode);s.show()}};SRClosureProcess.toggleReasonCodeLov=function(b){var g="reasonCodeClonedRow";var a=dojo.query("a",dojo.byId(g));setFieldVal("rootCauseCloned",b);setFieldVal("reasonCodeCloned","");if(a!=undefined){for(i=0;i<a.length;i++){var f=a[i];var h="none";if(f.text=="Show Hardware"){h=(b!=undefined&&b=="Software")?"":"none"}if(f.text=="Show Software"){h=(b!=undefined&&b=="Hardware")?"":"none"}dojo.style(f,{display:h})}}if(headerDataAsJson.SRType=="Non-Technical"){return SRClosureProcess.loadRootcauseReasoncodeLOV(true)}return loadReasonCodeLOV(true,b)};SRClosureProcess.pageTitleHelp=function(h){var f=getPageSytemParamValue(SRM_CLOSURE_HELP_DOC_URL);var b=SRClosureProcess.removeSpaces(SRClosureProcess.getStepName(h));f=f+"#"+b;var g=document.createElement("a");dojo.attr(g,{onclick:function(){window.open(f,"helpWindow")}});var a=document.createElement("img");dojo.attr(a,{src:"../images/help_alta_16.png",height:"18",width:"18",title:"Help",alt:"Help",style:"vertical-align:middle;padding-left:3px;margin-left:3px;"});g.appendChild(a);return g};SRClosureProcess.step1=function(){var b=document.createDocumentFragment();var G=document.createElement("table");dojo.attr(G,CLOSURE_DIALOG_TABLE_ATTR);var f=document.createElement("tbody");var x=document.createElement("tr");var y=document.createElement("td");dojo.attr(y,{colSpan:step1Cols});f.appendChild(x);var o=document.createElement("span");dojo.style(o,"padding","3px");var F=document.createElement("span");dojo.addClass(F,"closureStepHeaderClass");var v=document.createTextNode("Reason for Closing SR");F.appendChild(v);dojo.style(F,{"vertical-align":"middle"});y.appendChild(o);y.appendChild(F);var J=SRClosureProcess.pageTitleHelp(SR_CLOSURE_STEP1_ID);y.appendChild(J);x.appendChild(y);dojo.attr(x,{align:"left"});var C=document.createElement("tr");var a=document.createElement("td");dojo.attr(a,{colSpan:step1Cols});f.appendChild(C);var B=document.createElement("span");dojo.style(B,"padding","50px;");dojo.style(B,"margin","50px;");a.appendChild(B);C.appendChild(a);var s=document.createElement("tr");var l=document.createElement("td");dojo.attr(l,{colSpan:step1Cols});var h=document.createElement("span");dojo.style(h,"padding","3px");l.appendChild(h);var A=document.createElement("span");var q=document.createTextNode("Fill out the required fields to close the SR. Help Oracle by completing more steps.");A.appendChild(q);l.appendChild(A);s.appendChild(l);dojo.attr(s,{align:"left"});f.appendChild(s);var D=0;var g=[];var p=0;dojo.forEach(reqFldsForClosureWiz,function(N){var K;var L=SRClosureProcess.getFieldLayout(N);if(L!=""){if(D==0){K=document.createElement("tr");p=p+1;f.appendChild(K);g.push(K)}else{K=g[p-1]}var M=document.createElement("td");dojo.attr(M,{nowrap:"nowrap",valign:"top",align:"left"});K.appendChild(M);M.innerHTML=L;D=D+1;if(D==step1Cols){D=0}}});if(D>0&&D<step1Cols&&g.length>1){for(i=D;i<D;i++){var u=g[g.length-1];var H=document.createElement("td");dojo.attr(H,{nowrap:"nowrap",valign:"top",align:"left"});u.appendChild(H)}D=0}dojo.forEach(hiddenFldsForClosureWiz,function(N){if(N.value==""){N.value=getFieldVal(SRUtils.mapFormFldForCustom(N.id))}var L=getHiddenFieldLayout(N,true);if(L!=""){var K=document.createElement("tr");f.appendChild(K);var M=document.createElement("td");dojo.attr(M,{nowrap:"nowrap",valign:"top",align:"left",colSpan:step1Cols});K.appendChild(M);M.innerHTML=L}});G.appendChild(f);b.appendChild(G);if(SRClosureProcess.hasOpenFsTask()){var E=document.createElement("table");dojo.attr(E,{width:"100%"});dojo.addClass(E,"closureErrorBox");var z=document.createElement("tbody");var m=SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK].length;if(m>2){var w=document.createElement("tr");var I=document.createElement("td");I.appendChild(SRClosureProcess.showManyOpenFsTaskMessage(m));w.appendChild(I);z.appendChild(w)}else{var w=document.createElement("tr");var I=document.createElement("td");I.appendChild(SRClosureProcess.showOpenFsTaskForUpdate());w.appendChild(I);z.appendChild(w)}E.appendChild(z);b.appendChild(E)}if(dijit.byId(SR_CLOSURE_STEP1_ID)){dijit.byId(SR_CLOSURE_STEP1_ID).setContent(b)}dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout();if(window.headerDataAsJson.SRType!=NONTECHNICAL){SRClosureProcess.setStep1Style(reqFldsForClosureWiz)}SRClosureProcess.populateClosureForm();setTimeout(function(){SRClosureProcess.setButtonBarPosition(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).containerNode,dijit.byId(SR_CLOSURE_BUTTON_BAR_ID).domNode)},"1000");if(dijit.byId("substatusCloned")){dojo.connect(dijit.byId("substatusCloned"),"onChange",function(){SRClosureProcess.handleSubstatusOnChange()})}SRClosureProcess.setWizButtons(SR_CLOSURE_STEP1_ID)};SRClosureProcess.step1_hasChangedFsTask=function(){if(SRClosureProcess.hasOpenFsTask()&&SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK].length<=2){for(i=0;i<SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK].length;i++){var b=SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK][i];var a=b.id;if(SRUtils.isModifiedNode(SR_CLOSURE_WIZARD+SRClosureProcess.getInputTextFldId(a))){return true}}}return false};SRClosureProcess.step1_unmarkFsTaskChanges=function(){if(SRClosureProcess.hasOpenFsTask()&&SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK].length<=2){for(i=0;i<SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK].length;i++){var b=SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK][i];var a=b.id;SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD+SRClosureProcess.getInputTextFldId(a),false)}}};SRClosureProcess.showOpenTranslationForUpdate=function(){var A=document.createElement("table");dojo.attr(A,CLOSURE_DIALOG_NESTED_TABLE_ATTR);var a=document.createElement("tbody");var q=document.createElement("tr");var x=document.createElement("td");dojo.style(x,{width:"16px"});var B=document.createElement("img");dojo.attr(B,{src:"../images/error_16.png",height:"16",width:"16",title:"Error",style:"padding-right:3px;margin-right:3px;"});x.appendChild(B);q.appendChild(x);var m=document.createElement("td");var s=document.createElement("span");dojo.style(s,"padding","2px");var g="Translation SR is Open.";var v=document.createTextNode(g);s.appendChild(v);m.appendChild(s);q.appendChild(m);var f=document.createElement("td");dojo.style(f,{width:"160px"});var l=SRClosureProcess.viewChildLinkNode(CHILD_TYPE_CHILDREN_SR,"Exit Wizard, View Translation SR");f.appendChild(l);q.appendChild(f);dojo.attr(q,{align:"left"});a.appendChild(q);var o=document.createElement("tr");var w=document.createElement("td");dojo.style(w,{width:"16px"});o.appendChild(w);var z=document.createElement("td");dojo.attr(z,{colSpan:2});var p=document.createElement("span");dojo.style(p,"padding","2px");var y=document.createElement("span");var u=document.createTextNode("You can post a public update from here, if you think Translation SR should be closed, but this SR cannot be closed without closing Translation SR.");y.appendChild(u);z.appendChild(y);o.appendChild(z);dojo.attr(o,{align:"left"});a.appendChild(o);if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[TRANSLATION_SR]!=undefined&&SRClosureProcess.openSrRefs[TRANSLATION_SR].length==1){var b=SRClosureProcess.openSrRefs[TRANSLATION_SR][0];var h=SRClosureProcess.displayOpenTranslationData(b);a.appendChild(h)}A.appendChild(a);return A};SRClosureProcess.displayOpenTranslationData=function(f){if(f==undefined){return}var a=f.id;var x=f.name;var p=document.createElement("tr");var I=document.createElement("td");dojo.style(I,{width:"16px"});p.appendChild(I);var b=document.createElement("td");dojo.attr(b,{colSpan:2});var s=document.createElement("table");var w=document.createElement("tbody");dojo.attr(s,CLOSURE_DIALOG_NESTED_TABLE_ATTR);var G=document.createElement("tr");var l=document.createElement("td");dojo.attr(l,{align:"left",width:"80px"});dojo.addClass(l,"srHeaderLabel");l.appendChild(document.createTextNode("Last Update:"));G.appendChild(l);var v=document.createElement("td");dojo.attr(v,{id:SRClosureProcess.getLatestDateCellId(a),align:"left",nowrap:"nowrap"});v.appendChild(document.createTextNode(f.lastUpdated));G.appendChild(v);w.appendChild(G);var G=document.createElement("tr");var l=document.createElement("td");dojo.style(l,{padding:"5px 0px 5px"});dojo.attr(l,{id:SRClosureProcess.getLatestTextCellId(a),colSpan:2});G.appendChild(l);w.appendChild(G);SRClosureProcess.retrieveChildSrLastActivity(a,x);var o=document.createElement("tr");dojo.attr(o,{id:SRClosureProcess.getInputTextRowId(a)});var l=document.createElement("td");dojo.attr(l,{colSpan:2});var g=document.createElement("table");var B=document.createElement("tbody");var D=document.createElement("tr");var A=document.createElement("td");dojo.attr(A,{colSpan:2});var F=new dijit.form.CheckBox({id:SRClosureProcess.getStatusChkBoxId(a),name:SRClosureProcess.getStatusChkBoxId(a),value:"Review Update",checked:false},"checkBox");A.appendChild(F.domNode);A.appendChild(document.createTextNode("\xa0\xa0Set Translation "));var q=document.createElement("a");dojo.attr(q,{style:"vertical-align:top;",href:f.href,target:f.href_target});var H=document.createTextNode("SR "+x);q.appendChild(H);A.appendChild(q);A.appendChild(document.createTextNode(" to 'Review Update' "));D.appendChild(A);B.appendChild(D);var C=document.createElement("tr");var z=document.createElement("td");dojo.attr(z,{align:"left",nowrap:"nowrap",width:"95%"});var h=createSimpleTextArea(SRClosureProcess.getInputTextFldId(a),"width:98%;","3");z.appendChild(h.domNode);C.appendChild(z);var y=document.createElement("td");dojo.attr(y,{align:"left",width:"120px"});var u=new dijit.form.Button({label:"Update SR"});y.appendChild(u.domNode);dojo.connect(u,"onClick",function(){SRClosureProcess.updateChildSr(a,x,TRANSLATION_SR)});C.appendChild(y);B.appendChild(C);g.appendChild(B);l.appendChild(g);o.appendChild(l);w.appendChild(o);var D=document.createElement("tr");dojo.attr(D,{id:SRClosureProcess.getStatusTextRowId(a)});dojo.style(D,"display","none");var A=document.createElement("td");dojo.attr(A,{colSpan:2});var E=SRClosureProcess.displaySuccessNote(a);A.appendChild(E);var m=createHiddenTextbox(SRClosureProcess.getHiddenFldId(a),"");A.appendChild(m.domNode);D.appendChild(A);w.appendChild(D);s.appendChild(w);b.appendChild(s);p.appendChild(b);return p};SRClosureProcess.showManyOpenFsTaskMessage=function(z){var y=document.createElement("table");dojo.attr(y,CLOSURE_DIALOG_NESTED_TABLE_ATTR);var o=document.createElement("tbody");var g=document.createElement("tr");var q=document.createElement("td");dojo.style(q,{width:"16px"});var p=document.createElement("img");dojo.attr(p,{src:"../images/error_16.png",height:"16",width:"16",title:"Error",style:"padding-right:3px;margin-right:3px;"});q.appendChild(p);g.appendChild(q);o.appendChild(g);var m=document.createElement("td");var x=document.createElement("span");var w=document.createTextNode("SR Cannot be Closed, Multiple ("+z+") Field Service Tasks are still Open.");x.appendChild(w);m.appendChild(x);g.appendChild(m);var b=document.createElement("tr");var f=document.createElement("td");dojo.style(f,{width:"16px"});b.appendChild(f);var l=document.createElement("td");var v=document.createElement("span");var u=document.createTextNode("This SR cannot be closed without closing these "+z+" Field Service Tasks first. Exit the wizard and review the open Field Service Tasks, if needed. You can continue to use the wizard to complete other steps of the SR close process.");v.appendChild(u);l.appendChild(v);b.appendChild(l);o.appendChild(b);var a=document.createElement("tr");var h=document.createElement("td");dojo.attr(h,{align:"right",colSpan:2});var s=SRClosureProcess.viewChildLinkNode(CHILD_TYPE_FSTASK,"Exit Wizard, View FS Tasks");h.appendChild(s);a.appendChild(h);o.appendChild(a);y.appendChild(o);return y};SRClosureProcess.showOpenFsTaskForUpdate=function(){var o=SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK].length;var E=document.createElement("table");dojo.attr(E,CLOSURE_DIALOG_NESTED_TABLE_ATTR);var a=document.createElement("tbody");var w=document.createElement("tr");var A=document.createElement("td");dojo.style(A,{width:"16px"});var G=document.createElement("img");dojo.attr(G,{src:"../images/error_16.png",height:"16",width:"16",title:"Error",style:"padding-right:3px;margin-right:3px;"});A.appendChild(G);w.appendChild(A);var q=document.createElement("td");var x=document.createElement("span");dojo.style(x,"padding","2px");var l=(o>=2)?"SR Cannot be Closed, Field Service Tasks are open.":"SR Cannot be Closed, Field Service Task is open.";var y=document.createTextNode(l);x.appendChild(y);q.appendChild(x);w.appendChild(q);var b=document.createElement("td");dojo.style(b,{width:"130px"});var F=(o>=2)?"Exit Wizard, View FS Tasks":"Exit Wizard, View FS Task";var p=SRClosureProcess.viewChildLinkNode(CHILD_TYPE_FSTASK,F);b.appendChild(p);w.appendChild(b);dojo.attr(w,{align:"left"});a.appendChild(w);var s=document.createElement("tr");var z=document.createElement("td");dojo.style(z,{width:"16px"});s.appendChild(z);var C=document.createElement("td");dojo.attr(C,{colSpan:2});var v=document.createElement("span");dojo.style(v,"padding","2px");var B=document.createElement("span");C.appendChild(B);s.appendChild(C);dojo.attr(s,{align:"left"});a.appendChild(s);if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK]!=undefined){var m=true;for(i=0;i<SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK].length;i++){var h=SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK][i];var g=h.id;var f=h.name;var D=h.intgStatus;if(D=="Failed"||D=="Submitted"){a.appendChild(SRClosureProcess.displayIncompleteIntgFsTaskMessage(g,D))}else{m=false;if(!isEmptyVal(f)){a.appendChild(SRClosureProcess.displayFsTaskNumber(g,f))}a.appendChild(SRClosureProcess.displayFsTaskLastUpdated(g,h.UpdatedRelativeDate));a.appendChild(SRClosureProcess.displayFsTaskSummary(g,h.summary));a.appendChild(SRClosureProcess.displayLastFsTaskNote(g));a.appendChild(SRClosureProcess.displayFsTaskClosureComments(g));a.appendChild(SRClosureProcess.addFsTaskLastNoteFld(g,""))}if(SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK].length>1){a.appendChild(SRClosureProcess.createSeparator())}}var y=(m)?("This SR cannot be closed without closing "+((o>=2)?"these tasks. ":"the Field Service Task. ")):("This SR cannot be closed without closing "+((o>=2)?"these tasks. ":"the Field Service Task. ")+"You can post a public update from here to the task owner requesting task closure.");var u=document.createTextNode(y);B.appendChild(u)}E.appendChild(a);return E};SRClosureProcess.displayFsTaskLastUpdated=function(m,l){var q=document.createElement("tr");var f=document.createElement("td");dojo.style(f,{width:"16px"});q.appendChild(f);var p=document.createElement("td");dojo.attr(p,{colSpan:2});var o=document.createElement("table");var a=document.createElement("tbody");var h=document.createElement("tr");var b=document.createElement("td");dojo.attr(b,{align:"left",width:"80px"});dojo.addClass(b,"srHeaderLabel");b.appendChild(document.createTextNode("Last Update:"));h.appendChild(b);var g=document.createElement("td");dojo.attr(g,{id:SRClosureProcess.getLatestDateCellId(m),align:"left",width:"150px",nowrap:"nowrap"});g.appendChild(document.createTextNode(l));h.appendChild(g);a.appendChild(h);o.appendChild(a);p.appendChild(o);q.appendChild(p);return q};SRClosureProcess.displayFsTaskSummary=function(m,o){var q=truncateString(o,SRClosureProcess.maxSummaryLimit);var g=SRClosureProcess.seeDetailsNode();var u=document.createElement("tr");var f=document.createElement("td");dojo.style(f,{width:"16px"});u.appendChild(f);var s=document.createElement("td");dojo.attr(s,{colSpan:2});var p=document.createElement("table");var a=document.createElement("tbody");var l=document.createElement("tr");var b=document.createElement("td");dojo.attr(b,{align:"left",width:"80px"});dojo.addClass(b,"srHeaderLabel");b.appendChild(document.createTextNode("Summary:"));l.appendChild(b);var h=document.createElement("td");h.innerHTML=q;if(q.length!=o.length){h.appendChild("\xa0\xa0\xa0\xa0");h.appendChild(g);dojo.connect(g,"onclick",function(){var v=g.parentNode;if(v!=undefined){v.innerHTML=o}})}l.appendChild(h);p.appendChild(l);s.appendChild(p);u.appendChild(s);return u};SRClosureProcess.displayIncompleteIntgFsTaskMessage=function(p,h){var w=getPageSytemParamValue("SRM_FSTASK_INTG_ERROR_URL");var x=document.createElement("tr");var g=document.createElement("td");dojo.style(g,{width:"16px"});x.appendChild(g);var v=document.createElement("td");dojo.attr(v,{colSpan:2});var s=document.createElement("table");var a=document.createElement("tbody");var o=document.createElement("tr");var f=document.createElement("td");dojo.attr(f,{colSpan:2});f.innerHTML="<b>Field Service task </b> "+p+" <b> has an error.</b>";o.appendChild(f);a.appendChild(o);var q=document.createElement("tr");var m=document.createElement("td");dojo.attr(m,{valign:"middle"});var b="The task has a task integration error of '"+h+"'. This task integration error will need to be resolved before you are able to close this SR.";m.appendChild(document.createTextNode(b));var l=document.createElement("td");dojo.attr(l,{valign:"middle"});var u=document.createElement("a");dojo.attr(u,{style:"white-space:nowrap;vertical-align:top;padding-left:3px;margin-left:3px;",href:w,target:"_blank",title:"Learn how to resolve task errors"});u.appendChild(document.createTextNode("Learn how to resolve task errors."));l.appendChild(u);q.appendChild(m);q.appendChild(l);a.appendChild(q);s.appendChild(a);v.appendChild(s);x.appendChild(v);return x};SRClosureProcess.displayFsTaskNumber=function(f,g){var h=document.createElement("tr");var b=document.createElement("td");dojo.style(b,{width:"16px"});h.appendChild(b);var a=document.createElement("td");dojo.attr(a,{colSpan:2});a.innerHTML="<b>Field Service task </b> <a onClick=\"invokeURLForRef('SPHome-dnFSTask', '"+f+"', 'Field Service Task')\" href=\"#\" >"+g+"</a> <b> is still open</b>";h.appendChild(a);return h};SRClosureProcess.displayLastFsTaskNote=function(f){var m=document.createElement("tr");var b=document.createElement("td");dojo.style(b,{width:"16px"});m.appendChild(b);var a=document.createElement("td");dojo.attr(a,{colSpan:2});var l=document.createElement("table");var g=document.createElement("tbody");var h=document.createElement("tr");var o=document.createElement("td");dojo.attr(o,{id:SRClosureProcess.getLatestTextCellId(f)});h.appendChild(o);g.appendChild(h);l.appendChild(g);a.appendChild(l);m.appendChild(a);SRClosureProcess.retrieveLastFstaskNote(f);return m};SRClosureProcess.retrieveLastFstaskNote=function(b){var g="-created";var a="../../../DNFSTaskRequest";var f={action:"queryOneFSTaskNote",fsTaskId:b,sortString:g};var h=genericTalkToServer(a,f,"json",true,120000,"post");h.addCallback(function(m,l){SRClosureProcess.processTaskNotes(b,m)})};SRClosureProcess.processTaskNotes=function(p,g){var b=SRClosureProcess.getLatestTextCellId(p);var m=g.items;if(m!=undefined&&m.length>=1){var h=m[0];var l=(h.taskNoteDescription);var o=truncateString(l,SRClosureProcess.maxCommentsLimit);var f=(o.length==l.length)?null:SRClosureProcess.seeDetailsNode();var a=dojo.byId(b);a.innerHTML=o.replace(/\n/g,"<br/>");if(f!=null){a.appendChild(document.createTextNode("\xa0\xa0\xa0\xa0"));a.appendChild(f);dojo.connect(f,"onclick",function(){var q=f.parentNode;if(q!=undefined){q.innerHTML=l.replace(/\n/g,"<br/>")}})}}};SRClosureProcess.displayFsTaskClosureComments=function(q){var w=document.createElement("tr");var h=SRClosureProcess.getInputTextRowId(q);dojo.attr(w,{id:h});var g=document.createElement("td");dojo.style(g,{width:"16px"});w.appendChild(g);var v=document.createElement("td");dojo.attr(v,{colSpan:2});var u=document.createElement("table");dojo.style(u,{width:"100%"});var b=document.createElement("tbody");var p=document.createElement("tr");var f=document.createElement("td");dojo.attr(f,{align:"left",width:"150px",title:"Field Service Update"});dojo.addClass(f,"srHeaderLabel");f.appendChild(document.createTextNode("Field Service Update (Public)"));p.appendChild(f);b.appendChild(p);var s=document.createElement("tr");dojo.style(s,{"vertical-align":"base-line"});var o=document.createElement("td");dojo.attr(o,{align:"left",nowrap:"nowrap",width:"95%"});var l=createSimpleTextArea(SRClosureProcess.getInputTextFldId(q),"width:98%;","3");o.appendChild(l.domNode);s.appendChild(o);var m=document.createElement("td");dojo.attr(m,{align:"left",width:"120px"});var a=new dijit.form.Button({label:"Update Task"});m.appendChild(a.domNode);dojo.connect(a,"onClick",function(){SRClosureProcess.updateFsTask(q)});s.appendChild(m);b.appendChild(s);u.appendChild(b);v.appendChild(u);w.appendChild(v);return w};SRClosureProcess.displaySuccessNote=function(a){var m=document.createElement("table");dojo.style(m,{width:"95%"});var g=document.createElement("tbody");var l=document.createElement("tr");var o=document.createElement("td");dojo.attr(o,{align:"left",width:"150px",title:"Update was sent"});var b=document.createElement("img");dojo.attr(b,{src:"../images/check_16.png",height:"16",width:"16",title:"Success",alt:"Success",style:"padding-right:2px;margin-right:2px;"});o.appendChild(b);dojo.addClass(o,"successMsg");o.appendChild(document.createTextNode("Your update was sent."));l.appendChild(o);var f=document.createElement("td");dojo.attr(f,{align:"left"});var h=document.createElement("a");dojo.attr(h,{style:"vertical-align:middle",href:"#"});h.appendChild(document.createTextNode("Send another update."));dojo.connect(h,"onclick",function(){var q=SRClosureProcess.getInputTextRowId(a);var p=SRClosureProcess.getStatusTextRowId(a);if(!isEmptyVal(q)&&dojo.byId(q)){dojo.style(dojo.byId(q),"display","")}if(!isEmptyVal(p)&&dojo.byId(p)){dojo.style(dojo.byId(p),"display","none")}});f.appendChild(h);l.appendChild(f);g.appendChild(l);m.appendChild(g);return m};SRClosureProcess.updateFsTask=function(b){var a="../../../DNFSTaskRequest";var f={action:"createFSTaskNote",fsTaskId:b,taskNoteType:"Action Required",taskNoteDescription:(getFieldVal(SRClosureProcess.getInputTextFldId(b))),audience:"Public"};var g=genericTalkToServer(a,f,"json",null,120000,"post");g.addCallback(function(o,l){setFieldVal(SRClosureProcess.getHiddenFldId(b),"");setFieldVal(SRClosureProcess.getInputTextFldId(b),"");if(o.status=="SUCCESS"){dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=true;setFieldVal(SRClosureProcess.getHiddenFldId(b),o.fsTaskId);SRClosureProcess.retrieveChildById(getActiveSrId(),getSrNumber(),b,CHILD_TYPE_FSTASK);SRClosureProcess.retrieveLastFstaskNote(b);var m=SRClosureProcess.getInputTextRowId(b);var h=SRClosureProcess.getStatusTextRowId(b);if(!isEmptyVal(m)&&dojo.byId(m)){dojo.style(dojo.byId(m),"display","none")}if(!isEmptyVal(h)&&dojo.byId(h)){dojo.style(dojo.byId(h),"display","")}SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD+SRClosureProcess.getInputTextFldId(b),false)}})};SRClosureProcess.getLatestTextCellId=function(a){return"textcell_"+a};SRClosureProcess.getLatestDateCellId=function(a){return"datecell_"+a};SRClosureProcess.getLatestStatusCellId=function(a){return"substatuscell_"+a};SRClosureProcess.getHiddenFldId=function(a){return"hidden_"+a};SRClosureProcess.getInputTextFldId=function(a){return"input_"+a};SRClosureProcess.getInputTextRowId=function(a){return"inputrow_"+a};SRClosureProcess.getStatusTextRowId=function(a){return"statusrow_"+a};SRClosureProcess.getStatusChkBoxId=function(a){return"statuschkbox_"+a};SRClosureProcess.updateSRLastUpdated=function(a){if(!isEmptyVal(a)&&dojo.byId(SR_LAST_UPDATED_SPAN_ID)){var b="Last Updated "+a;dojo.byId(SR_LAST_UPDATED_SPAN_ID).innerHTML=b}};SRClosureProcess.addFsTaskLastNoteFld=function(f,h){var m=document.createElement("tr");dojo.attr(m,{id:SRClosureProcess.getStatusTextRowId(f)});dojo.style(m,"display","none");var b=document.createElement("td");dojo.style(b,{width:"16px"});m.appendChild(b);var a=document.createElement("td");var g=SRClosureProcess.displaySuccessNote(f);a.appendChild(g);var l=createHiddenTextbox(SRClosureProcess.getHiddenFldId(f),h);a.appendChild(l.domNode);m.appendChild(a);return m};SRClosureProcess.isStep1Completed=function(){var b=true;var a=true;if(SRClosureProcess.hasOpenFsTask()&&!SRClosureProcess.isAwaitingFieldAutoClose()){return false}dojo.forEach(reqFldsForClosureWiz,function(h){var l=h.id;if(h.required){if(l=="knownIssue"){var g=SRClosureProcess.getKnownIssueValue();if(SRClosureProcess.isKnownIssueRequired()&&isEmptyVal(g)){b=false}}else{var f=SRUtils.getMappedFormFldId(h,true);var g=getFieldVal(f);if(isEmptyVal(g)){b=false}}}if(l=="SROutageType"){if(SRClosureProcess.isOutageInfoRequired(headerDataAsJson.productClass)){a=SRClosureProcess.confirmIfOutageFieldsPopulated(getFieldVal("SROutageTypeCloned"))}}});return(b&&a)};SRClosureProcess.setOdmTrainInTab=function(b,a){if(b!=undefined&&a!=undefined){var h=a.title;var f=dojo.query(".tabLabel",b.domNode);dojo.forEach(f,function(p){var o=p.innerHTML;if(o==h){var m=dojo.query(".tabInfo",p.parentNode);if(m!=undefined&&m.length==1){var q=m[0];var s=SRClosureProcess.dataMap.get(ODM_TRAIN);buildODMTrain(s,q,false)}}});var g=dojo.query("#"+SRClosureProcess.getTabListId(),b.domNode);if(g!=undefined&&g.length==1){var l=g[0];dojo.parser.parse(l)}b.startup();b.resize()}};SRClosureProcess.getTabListId=function(){return SR_CLOSURE_TAB_CONTAINER_ID+"_tablist"};SRClosureProcess.setStepStatus=function(b,a,g){if(b!=undefined&&a!=undefined){var l=a.title;var f=dojo.query(".tabLabel",b.domNode);dojo.forEach(f,function(s){var q=s.innerHTML;if(q==l){var p=dojo.query(".tabImage",s.parentNode);if(p!=undefined&&p.length==1){var o=p[0];SRClosureProcess.setStepStatusImgAttr(o,g)}}});var h=dojo.query("#"+SRClosureProcess.getTabListId(),b.domNode);if(h!=undefined&&h.length==1){var m=h[0];dojo.parser.parse(m)}b.startup();b.resize()}};SRClosureProcess.setStepStatusImgAttr=function(b,a){if(COMPLETED_STEP_STATUS==a){dojo.attr(b,{src:"../images/check_16.png",title:"Completed Step",alt:"Completed Step"})}else{if(REQUIRED_INCOMPLETE_STEP_STATUS==a){dojo.attr(b,{src:"../images/error_16.png",title:"Required Incomplete Step",alt:"Required Incomplete Step"})}else{if(OPTIONAL_INCOMPLETE_STEP_STATUS==a){dojo.attr(b,{src:"../images/alert_16.png",title:"Optional Incomplete Step",alt:"Optional Incomplete Step"})}}}};SRClosureProcess.getStepStatus=function(a){if(a==undefined){return null}if(a.id==SR_CLOSURE_STEP1_ID){return(SRClosureProcess.isStep1Completed())?COMPLETED_STEP_STATUS:REQUIRED_INCOMPLETE_STEP_STATUS}if(a.id==SR_CLOSURE_STEP2_ID){return SRClosureProcess.isOdmCompliant()?COMPLETED_STEP_STATUS:OPTIONAL_INCOMPLETE_STEP_STATUS}if(a.id==SR_CLOSURE_STEP3_ID){return SRClosureProcess.hasFakeOpenEscalations()?REQUIRED_INCOMPLETE_STEP_STATUS:COMPLETED_STEP_STATUS}if(a.id==SR_CLOSURE_STEP4_ID){return(SRClosureProcess.hasOpenRfcs()||SRClosureProcess.hasOpenCollab())?OPTIONAL_INCOMPLETE_STEP_STATUS:COMPLETED_STEP_STATUS}if(a.id==SR_CLOSURE_STEP5_ID){return(SRClosureProcess.hasOpenDefects()||SRClosureProcess.hasOpenRelatedSrs())?REQUIRED_INCOMPLETE_STEP_STATUS:COMPLETED_STEP_STATUS}if(a.id==SR_CLOSURE_STEP6_ID){return(SRClosureProcess.hasOpenErrMsgs())?OPTIONAL_INCOMPLETE_STEP_STATUS:COMPLETED_STEP_STATUS}if(a.id==SR_CLOSURE_STEP7_ID){return(SRClosureProcess.step7_isError())?REQUIRED_INCOMPLETE_STEP_STATUS:COMPLETED_STEP_STATUS}if(a.id==SR_CLOSURE_STEP8_ID){return REQUIRED_INCOMPLETE_STEP_STATUS}};SRClosureProcess.step2=function(){var f;var b=SRClosureProcess.dataMap.findIt(ODM_TRAIN);if(b==-1){var a=SRClosureProcess.getTrainData(false,false);a.addCallback(function(g){SRClosureProcess.buildStep2(g)})}else{f=SRClosureProcess.dataMap.get(ODM_TRAIN);SRClosureProcess.buildStep2(f)}};var ODM_TRAIN_DIV_ID="train2";var QA_TRAIN_SWITCH_ID="qaswitch";var PROBLEM_TRAIN_SWITCH_ID="problemswitch";var CONSULTATIVE_TRAIN="consultative";var CORRECTIVE_TRAIN="corrective";var CONSULTATIVE_TEMPLATE_NODE="qaTemplate";var CORRECTIVE_TEMPLATE_NODE="problemTemplate";var ODM_DATA_TABLE="odmDataTable";var ODM_LINK_CLASS="linkClass";var INDICATOR_CLASS="loadingIndicator";SRClosureProcess.invokeStep2XhrReq=function(f,g){dijit.byId("pleasewait").show();var a=getActiveSrId();var b=getQueryTabName();var l=getSrModId();var h=getSrNumber();return dojo.xhrPost({url:"../../../SaveActivityRequest",content:{corrective:(f.corrective!=undefined?dojo.toJson(f.corrective):""),consultative:(f.consultative!=undefined?dojo.toJson(f.consultative):""),action:"saveOdmTemplates",srId:a,queryTabName:b,modId:l,activeSR:h},handleAs:"json",preventCache:true,load:function(u,q){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}var p=u.opStatus;if(p==0){dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=true;if(u.warning!=undefined&&u.warning=="No data found"){SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP2_ID,g);if(SRClosureProcess.isOdmCompliant()&&isEmptyVal(SRClosureProcess.publicDoneKmId)){SRClosureProcess.createKMForOdmCompliance()}}else{SRClosureProcess.setMesssage("ODM saved to SR");SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);var s=u.newActivities;SRClosureProcess.setNewOdmActivity(s);SRClosureProcess.highlightIncompleteOdmSteps(CONSULTATIVE_TRAIN);SRClosureProcess.highlightIncompleteOdmSteps(CORRECTIVE_TRAIN);if(u.items!=undefined){var o={};o.items=u.items;setHeaderJSONFromResponse(o);SRClosureProcess.updateSRLastUpdated(window.headerDataAsJson.UpdatedRelativeDate)}var m=SRClosureProcess.getTrainData(true,true);m.addCallback(function(x){var y=x.trainNode;var w=dojo.byId(ODM_TRAIN_DIV_ID);var v=(SRClosureProcess.step2Mode==CONSULTATIVE_TRAIN)?true:false;buildODMTrain(x,w,true,v,!v);SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP2_ID,g);if(SRClosureProcess.isOdmCompliant()&&isEmptyVal(SRClosureProcess.publicDoneKmId)){SRClosureProcess.createKMForOdmCompliance()}})}}else{displayErrors(u)}return u},error:function(o,m){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}console.error("An error occurred: ",o)}})};SRClosureProcess.setNewOdmActivity=function(l){var g=dojo.byId(ODM_DATA_TABLE);if(g==undefined||l==undefined){return}for(i=0;i<l.length;i++){var h=l[i];var a=h.activityType;var b=h.activityId;var m=SRClosureProcess.removeSpaces(a);var f=dojo.byId("td_"+m);dojo.query("[type=hidden]",f).forEach(function(o){var p=o.value;if(p!=undefined&&p.contains("activityId")){o.value="activityId_"+b}})}};SRClosureProcess.getStep2Json=function(){var g={};var f=dojo.byId(ODM_DATA_TABLE);var b=dojo.query("."+CORRECTIVE_TEMPLATE_NODE,f);if(b!=undefined&&b.length>0){g.corrective=SRClosureProcess.getODMFormData(b)}var a=dojo.query("."+CONSULTATIVE_TEMPLATE_NODE,f);if(a!=undefined&&a.length>0){g.consultative=SRClosureProcess.getODMFormData(a)}return g};SRClosureProcess.getODMFormData=function(a){var g=new Array();for(i=0;i<a.length;i++){var b={};var f=a[i];dojo.query("[type=hidden]",f).forEach(function(h){var l=h.value;if(l!=undefined&&l.contains("activityType")){l=l.replace("activityType_","");b.activityType=l}if(l!=undefined&&l.contains("templateId")){l=l.replace("templateId_","");b.templateId=l}if(l!=undefined&&l.contains("activityId")){l=l.replace("activityId_","");b.activityId=l}});dojo.query("[type=checkbox]",f).forEach(function(h){b.audience=(h.checked)?"Public":"Internal"});dojo.query("textarea",f).forEach(function(l){var o=l.id;var m="";if(dijit.byId(o)){m=dijit.byId(o).getValue().replace(/\s*$/g,"");m=encodeURIComponent(m)}var h=(dojo.isIE)?window._IE_editor_filters:window._filters;m=filterTags(h,m,false);b.comments=m;if(o.contains("textarea_")){o=o.replace("textarea_","");b.questionId=o}g.push(b)})}return g};SRClosureProcess.step2Mode="";SRClosureProcess.switchTrain=function(g){var f=dojo.byId(ODM_TRAIN_DIV_ID);var b=dojo.byId(QA_TRAIN_SWITCH_ID);var m=dojo.byId(PROBLEM_TRAIN_SWITCH_ID);var l=dojo.byId(CONSULTATIVE_TEMPLATE_NODE);var a=dojo.byId(CORRECTIVE_TEMPLATE_NODE);var h=SRClosureProcess.dataMap.get(ODM_TRAIN);SRClosureProcess.retrieveOdmTemplate(g);if(g==CONSULTATIVE_TRAIN){if(f!=undefined){f.innerHTML="";buildODMTrain(h,f,true,true,false);if(b){dojo.style(b,"display","none")}if(m){dojo.style(m,"display","")}SRClosureProcess.changeHeaderText();SRClosureProcess.hideOdmLinks()}SRClosureProcess.step2Mode=CONSULTATIVE_TRAIN}else{if(g==CORRECTIVE_TRAIN){var f=dojo.byId(ODM_TRAIN_DIV_ID);if(f!=undefined){f.innerHTML="";buildODMTrain(h,f,true,false,true);if(b){dojo.style(b,"display","")}if(m){dojo.style(m,"display","none")}SRClosureProcess.changeHeaderText();SRClosureProcess.hideOdmLinks()}SRClosureProcess.step2Mode=CORRECTIVE_TRAIN}}};SRClosureProcess.checkIfOdmTemplateLoaded=function(f){var g=dojo.byId(ODM_DATA_TABLE);if(g==undefined){return}var b=(f!=undefined&&f==CONSULTATIVE_TRAIN)?CONSULTATIVE_TEMPLATE_NODE:CORRECTIVE_TEMPLATE_NODE;var a=dojo.query("."+b,g);if(a!=undefined&&a.length>0){return true}return false};SRClosureProcess.retrieveOdmTemplate=function(b){if(SRClosureProcess.checkIfOdmTemplateLoaded(b)){SRClosureProcess.displayOdmTemplate(b);SRClosureProcess.setDefaultFocusForStep2(b);return}SRClosureProcess.toggleStep2LoadingIndicator(true);var a="../../../TemplateRequest";var f={operation:"getOdmTemplate",trainName:b,srId:getActiveSrId(),queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()};var g=genericTalkToServer(a,f,"json",true,3000000,"post");g.addCallback(function(l,h){SRClosureProcess.toggleStep2LoadingIndicator(false);SRClosureProcess.processOdmTemplate(b,l);SRClosureProcess.displayOdmTemplate(b);SRClosureProcess.setDefaultFocusForStep2(b)})};SRClosureProcess.publicDoneKmId="";SRClosureProcess.createKMForOdmCompliance=function(){var a="../../../SaveActivityRequest";var b={action:"createKmForOdmCompliance",srId:getActiveSrId(),queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()};var f=genericTalkToServer(a,b,"json",true,3000000,"post");f.addCallback(function(m,l){var h=m.opStatus;if(h==0){SRClosureProcess.publicDoneKmId=m.lastKmId;if(m.items!=undefined){var g={};g.items=m.items;setHeaderJSONFromResponse(g)}}else{console.log("Failed to create KM activity during SR Closure")}return m})};var DEFAULT_TEMPLATE_ID="-9999";var DEFAULT_TEMPLATE_QUESTION_ID="comments";SRClosureProcess.removeSpaces=function(b,a){if(a==undefined){a=""}if(!isEmptyVal(b)){return b.replace(/ /ig,a)}};SRClosureProcess.processOdmTemplate=function(f,h){var b=h.odmData;if(b==undefined){return}var g=dojo.byId(ODM_DATA_TABLE);if(g==undefined){return}var a=g.firstChild;if(dojo.isArray(b)){dojo.forEach(b,function(A){var o=A.templateId;var C=A.activityType;var u=A.templateJson;var m=A.activityId;var q=A.fdata;var v=A.audience;var w=u.uiNode;var x=SRClosureProcess.removeSpaces(C);if(o===DEFAULT_TEMPLATE_ID){o=o+"_"+x;w=w.replace("TemplateFLD_comments","textarea_"+x)}var B=document.createElement("tr");dojo.addClass(B,(f==CORRECTIVE_TRAIN)?CORRECTIVE_TEMPLATE_NODE:CONSULTATIVE_TEMPLATE_NODE);var s=document.createElement("td");dojo.attr(s,{id:"td_"+x});dojo.addClass(s,x);s.innerHTML=w;var F=new dijit.form.TextBox({type:"hidden",value:"templateId_"+o});var E=new dijit.form.TextBox({type:"hidden",value:"activityType_"+C});var D=new dijit.form.TextBox({type:"hidden",value:"activityId_"+m});s.appendChild(F.domNode);s.appendChild(E.domNode);s.appendChild(D.domNode);B.appendChild(s);a.appendChild(B);var z=dojo.query(".labelFld",s);if(z!=undefined&&z.length==1){var y=z[0];var p=SRClosureProcess.getOdmLabels(C);y.innerHTML=p}});dojo.parser.parse(dijit.byId(SR_CLOSURE_STEP2_ID).domNode);dojo.forEach(b,function(A){var p=A.templateId;var v=A.tData;var w=A.audience;var z=A.comments;processQMenuData(A,p,true);populate(A);var x=SRClosureProcess.removeSpaces(A.activityType);var u=dojo.byId("td_"+x);if(u!=undefined){var m=dojo.query(".audienceFld",u);if(m!=undefined&&m.length==1){var y=m[0];var s=dojo.query("input",y);if(s!=undefined&&s.length==1){var B=s[0];if(w!=undefined){var o=B.id;if(o!=undefined&&dojo.byId(o)){dijit.byId(o).setValue(w)}}}}var C=dojo.query("textarea",u);if(C!=undefined&&C.length==1&&!isEmptyVal(z)){var q=dijit.byId(C[0].id);if(q.editNode!=undefined&&dojo.isIE){dojo.style(q.editNode,"whiteSpace","pre")}if(q!=undefined){q.setValue(z)}}}});var l=dijit.byId(SR_CLOSURE_STEP2_ID).domNode;SRClosureProcess.connectOdmTextAreaEvent(l,32767);SRClosureProcess.highlightIncompleteOdmSteps(CONSULTATIVE_TRAIN);SRClosureProcess.highlightIncompleteOdmSteps(CORRECTIVE_TRAIN);SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_WIZARD).domNode)}};SRClosureProcess.getOdmLabels=function(a){if(isEmptyVal(a)){return""}if(a=="ODM Proposed Solution(s)"){return"Solution"}else{if(a=="ODM Proposed Solution Justif"){return"Solution Justification"}else{return a.replace(/ODM/ig,"")}}};SRClosureProcess.toggleStep2LoadingIndicator=function(a){var g=dojo.byId(ODM_DATA_TABLE);if(g==undefined){return}var h=(a)?"":"none";var f=dojo.query("."+INDICATOR_CLASS,g);if(f!=undefined&&f.length==1){var b=f[0];dojo.style(b,"display",h)}};SRClosureProcess.hideOdmLinks=function(){var f=dojo.byId(ODM_DATA_TABLE);if(f==undefined){return}var a=dojo.query("."+ODM_LINK_CLASS,f);if(a!=undefined&&a.length>0){for(i=0;i<a.length;i++){var b=a[i];dojo.style(b,"display","none")}}};SRClosureProcess.changeHeaderText=function(){var b=dojo.byId(ODM_DATA_TABLE);if(b==undefined){return}var g=dojo.query(OP_DIALOG_TABLE_COL_CLASS,b);if(g!=undefined&&g.length==1){var a=g[0];a.innerHTML="";var h="Share your wisdom with customers and colleagues, complete the missing steps.";var f=document.createTextNode(h);a.appendChild(f)}};SRClosureProcess.displayOdmTemplate=function(b){var g=dojo.byId(ODM_DATA_TABLE);if(g==undefined){return}var a="none";var l="none";if(!isEmptyVal(b)&&b==CORRECTIVE_TRAIN){a=""}if(!isEmptyVal(b)&&b==CONSULTATIVE_TRAIN){l=""}var m=dojo.query("."+CORRECTIVE_TEMPLATE_NODE,g);if(m!=undefined&&m.length>0){for(i=0;i<m.length;i++){var f=m[i];dojo.style(f,"display",a)}}var h=dojo.query("."+CONSULTATIVE_TEMPLATE_NODE,g);if(h!=undefined&&h.length>0){for(i=0;i<h.length;i++){var f=h[i];dojo.style(f,"display",l)}}};SRClosureProcess.buildStep2=function(R){if(R==undefined){return}var m=R.trainNode;var o=(m.odmFlow=="none");var J=R.odmCompliant;if(dijit.byId(SR_CLOSURE_STEP2_ID)){var I=dijit.byId(SR_CLOSURE_STEP2_ID).title}var x=document.createElement("table");dojo.attr(x,OP_DIALOG_TABLE_ATTR);var K=document.createElement("tbody");var L=document.createElement("tr");dojo.style(L,{"vertical-align":"top"});var u=document.createElement("td");dojo.style(u,{width:"85%","vertical-align":"top"});dojo.attr(u,"vAlign","top");var s=document.createElement("td");dojo.style(s,{width:"15%","vertical-align":"top"});dojo.attr(s,"vAlign","top");var w=document.createElement("table");dojo.attr(w,OP_DIALOG_TABLE_ATTR);dojo.attr(w,{id:ODM_DATA_TABLE});dojo.style(w,{"vertical-align":"top"});var N=document.createElement("tbody");var v=document.createElement("table");dojo.attr(v,OP_DIALOG_TABLE_ATTR);dojo.style(v,{"vertical-align":"top"});var M=document.createElement("tbody");var G=document.createElement("tr");var l=document.createElement("td");var C=document.createElement("span");dojo.addClass(C,"closureStepHeaderClass");dojo.style(C,{"vertical-align":"middle"});C.appendChild(document.createTextNode(ODM_TITLE));l.appendChild(C);var p=SRClosureProcess.pageTitleHelp(SR_CLOSURE_STEP2_ID);l.appendChild(p);G.appendChild(l);N.appendChild(G);var D=document.createElement("tr");var g=document.createElement("td");var A=document.createElement("span");dojo.addClass(A,OP_DIALOG_TABLE_COL_CLASS);var h="Share your wisdom with customers and colleagues, "+((o)?"pick a path.":"complete the missing steps.");var F=document.createTextNode(h);A.appendChild(F);g.appendChild(A);D.appendChild(g);N.appendChild(D);var S=(m.consultative==true)&&(m.corrective==true);var H=(o)?"Start the Q&A Track":"Finish the Q&A Track";var E=(o)?"Start the Problem Track":"Finish the Problem Track";if(o||S){var B=document.createElement("tr");var f=document.createElement("td");var Q=document.createElement("a");dojo.attr(Q,"href","javascript:void(0);");Q.appendChild(document.createTextNode(H));dojo.connect(Q,"onclick",function(){SRClosureProcess.switchTrain(CONSULTATIVE_TRAIN)});dojo.addClass(Q,ODM_LINK_CLASS);f.appendChild(Q);B.appendChild(f);N.appendChild(B)}if(o||S){var z=document.createElement("tr");var b=document.createElement("td");var P=document.createElement("a");dojo.attr(P,"href","javascript:void(0);");dojo.addClass(P,ODM_LINK_CLASS);P.appendChild(document.createTextNode(E));dojo.connect(P,"onclick",function(){SRClosureProcess.switchTrain(CORRECTIVE_TRAIN)});b.appendChild(P);z.appendChild(b);N.appendChild(z)}var y=document.createElement("tr");var a=document.createElement("td");var O=document.createElement("div");dojo.style(O,{color:"blue",display:"none"});dojo.addClass(O,INDICATOR_CLASS);var q="Loading....";O.appendChild(document.createTextNode(q));a.appendChild(O);y.appendChild(a);N.appendChild(y);var B=document.createElement("tr");dojo.attr(B,{id:PROBLEM_TRAIN_SWITCH_ID});var f=document.createElement("td");var Q=document.createElement("a");dojo.attr(Q,"href","javascript:void(0);");Q.appendChild(document.createTextNode("Switch to Problem Track"));dojo.connect(Q,"onclick",function(){SRClosureProcess.switchTrain(CORRECTIVE_TRAIN)});f.appendChild(Q);B.appendChild(f);M.appendChild(B);var G=document.createElement("tr");dojo.attr(G,{align:"right"});var l=document.createElement("td");dojo.attr(l,{align:"left"});var O=document.createElement("div");dojo.attr(O,{id:ODM_TRAIN_DIV_ID});if(o){buildODMTrain(R,O,true)}else{buildODMTrain(R,O,true,m.consultative,m.corrective)}l.appendChild(O);G.appendChild(l);M.appendChild(G);var z=document.createElement("tr");dojo.attr(z,{id:QA_TRAIN_SWITCH_ID});var b=document.createElement("td");dojo.attr(z,{align:"right"});dojo.attr(b,{align:"left"});var P=document.createElement("a");dojo.attr(P,"href","javascript:void(0);");P.appendChild(document.createTextNode("Switch to Q&A"));dojo.connect(P,"onclick",function(){SRClosureProcess.switchTrain(CONSULTATIVE_TRAIN)});b.appendChild(P);z.appendChild(b);M.appendChild(z);w.appendChild(N);v.appendChild(M);u.appendChild(w);s.appendChild(v);L.appendChild(u);L.appendChild(s);K.appendChild(L);x.appendChild(K);if(dijit.byId(SR_CLOSURE_STEP2_ID)){dijit.byId(SR_CLOSURE_STEP2_ID).setContent(x)}dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout();if((!o&&!S)&&m.consultative==true){SRClosureProcess.switchTrain(CONSULTATIVE_TRAIN)}if((!o&&!S)&&m.corrective==true){SRClosureProcess.switchTrain(CORRECTIVE_TRAIN)}if(o||m.corrective==true){dojo.style(dojo.byId(PROBLEM_TRAIN_SWITCH_ID),"display","none")}if(o||m.consultative==true){dojo.style(dojo.byId(QA_TRAIN_SWITCH_ID),"display","none")}};SRClosureProcess.seeDetailsNode=function(){var a=document.createElement("a");dojo.attr(a,"href","javascript:void(0);");a.appendChild(document.createTextNode("See Details"));return a};SRClosureProcess.showManyOpenEscalationMessage=function(x){var z=document.createElement("table");dojo.attr(z,CLOSURE_DIALOG_NESTED_TABLE_ATTR);var o=document.createElement("tbody");var g=document.createElement("tr");var q=document.createElement("td");dojo.style(q,{width:"16px"});var p=document.createElement("img");dojo.attr(p,{src:"../images/error_16.png",height:"16",width:"16",title:"Error",style:"padding-right:3px;margin-right:3px;"});q.appendChild(p);g.appendChild(q);o.appendChild(g);var m=document.createElement("td");var y=document.createElement("span");var w=document.createTextNode("SR Cannot be Closed, Multiple ("+x+") Escalations are still Open.");y.appendChild(w);m.appendChild(y);g.appendChild(m);var b=document.createElement("tr");var f=document.createElement("td");dojo.style(f,{width:"16px"});b.appendChild(f);var l=document.createElement("td");var v=document.createElement("span");var u=document.createTextNode("This SR cannot be closed without closing these "+x+" Escalations first. Exit the wizard and review the open Escalations, if needed. You can continue to use the wizard to complete other steps of the SR close process.");v.appendChild(u);l.appendChild(v);b.appendChild(l);o.appendChild(b);var a=document.createElement("tr");var h=document.createElement("td");dojo.attr(h,{align:"right",colSpan:2});var s=SRClosureProcess.viewChildLinkNode("Escalation","Exit Wizard, View Escalations");h.appendChild(s);a.appendChild(h);o.appendChild(a);z.appendChild(o);return z};SRClosureProcess.step3=function(){var D=document.createElement("table");dojo.attr(D,CLOSURE_DIALOG_TABLE_ATTR);var b=document.createElement("tbody");var w=document.createElement("tr");var x=document.createElement("td");dojo.attr(x,{colSpan:step1Cols});var m=document.createElement("span");dojo.style(m,"padding","3px");x.appendChild(m);var C=document.createElement("span");dojo.addClass(C,"closureStepHeaderClass");dojo.style(C,{"vertical-align":"middle"});var u=document.createTextNode("Close Escalations");C.appendChild(u);x.appendChild(C);var F=SRClosureProcess.pageTitleHelp(SR_CLOSURE_STEP3_ID);x.appendChild(F);w.appendChild(x);dojo.attr(w,{align:"left"});b.appendChild(w);var q=document.createElement("tr");dojo.attr(q,{align:"left"});var l=document.createElement("td");dojo.attr(l,{colSpan:step1Cols});var f=document.createElement("span");dojo.style(f,"padding","3px");l.appendChild(f);var z=document.createElement("span");var p=document.createTextNode("Open Escalations. Confirm closure with escalation manager, update as needed with resolution and close it as resolved, when approved by escalation manager.");z.appendChild(p);l.appendChild(z);q.appendChild(l);b.appendChild(q);if(SRClosureProcess.fetchFakeOpenEscalations()!=undefined&&SRClosureProcess.fetchFakeOpenEscalations().length>2){var v=document.createElement("tr");var E=document.createElement("td");E.appendChild(SRClosureProcess.showManyOpenEscalationMessage(SRClosureProcess.openSrRefs.Escalations.length));v.appendChild(E);b.appendChild(v)}if(SRClosureProcess.fetchFakeOpenEscalations()!=undefined&&SRClosureProcess.fetchFakeOpenEscalations().length<=2){var a=SRClosureProcess.fetchFakeOpenEscalations();var g=a.length;for(i=0;i<g;i++){var A=a[i];var y=A.activityId;var o=document.createElement("tr");var B=document.createElement("td");var h=document.createElement("table");dojo.attr(h,{id:"srEsc_"+y,width:"100%"});var s=document.createElement("tbody");s.appendChild(SRClosureProcess.displayResolvedEscStatus(y));s.appendChild(SRClosureProcess.displayEscManager(y,A.escActivityOwner));s.appendChild(SRClosureProcess.displayCategoryResolution(y,A.escCategory,A.escResolution));s.appendChild(SRClosureProcess.displayEscResolution(y,A.escCategory,A.escResolution));s.appendChild(SRClosureProcess.displayEscLastUpdated(y,A.CreatedRelativeDate));s.appendChild(SRClosureProcess.displayEscInstruction(y,A.instruction));s.appendChild(SRClosureProcess.displayEscClosureComments(y,A.escActivityStatus));s.appendChild(SRClosureProcess.addInstructionIdFld(y,""));h.appendChild(s);B.appendChild(h);o.appendChild(B);b.appendChild(o);if(g>1&&i<(g-1)){b.appendChild(SRClosureProcess.createSeparator())}}}D.appendChild(b);if(dijit.byId(SR_CLOSURE_STEP3_ID)){dijit.byId(SR_CLOSURE_STEP3_ID).setContent(D)}dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout();SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_WIZARD).domNode)};SRClosureProcess.formatActivityComments=function(a){a=a.replace(/\s*$/g,"");a=a.replace(/\n/g,"<br/>");if(dojo.isIE){a=a.replace(/\t/g," &nbsp; &nbsp; ")}return a};SRClosureProcess.step3_checkForCompletion=function(){var f=true;if(!dijit.byId(SR_CLOSURE_STEP3_ID)){return}var a=dojo.query("[type=checkbox]",dijit.byId(SR_CLOSURE_STEP3_ID).domNode);if(a!=undefined&&a.length>0){for(i=0;i<a.length;i++){var b=a[i];var g=b.id;if(g.indexOf("escalationStatus")!=-1&&dijit.byId(g)&&!dijit.byId(g).checked){f=false;break}}}SRClosureProcess.setStepStatus(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),dijit.byId(SR_CLOSURE_STEP3_ID),(f?COMPLETED_STEP_STATUS:REQUIRED_INCOMPLETE_STEP_STATUS))};SRClosureProcess.invokeStep3Nav=function(b){var a=SRUtils.showDialogModifiedAlert(dijit.byId(SR_CLOSURE_WIZARD).domNode);if(a==-1){return}SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP3_ID,b)};SRClosureProcess.step7=function(){var b=document.createElement("iframe");var a=evaluateSRMContextTextURL(getLinkHrefMap(),"KM_AWIZ",getSrNumber());b.src=a;b.style.width="99%";b.style.height="98%";b.id=SR_CLOSURE_STEP7_ID+"_frame";dojo.style(b,{overflow:"auto"});b.frameBorder="0";dojo.parser.parse(b);if(dijit.byId(SR_CLOSURE_STEP7_ID)){dijit.byId(SR_CLOSURE_STEP7_ID).setContent(b)}dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout()};SRClosureProcess.getKnownIssueValue=function(){return getFieldVal("knownIssueCloned")};SRClosureProcess.setKnownIssueValue=function(a){setFieldVal("knownIssueCloned",a)};SRClosureProcess.setKnownIssueRequired=function(){var l="knownIssueCloned";var g=l+"Row";if(dojo.byId(g)!=undefined){}var h=dojo.query("input",dojo.byId("knownIssueDiv"));for(i=0;i<h.length;i++){var b=h[i];b.required=true}var a=dojo.query(".reqImgNode",dojo.byId(g));if(a!=undefined&&a.length>0){var f=a[0];f.innerHTML="";f.innerHTML='<img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/>'}};SRClosureProcess.getStep1Json=function(){var a={};dojo.forEach(reqFldsForClosureWiz,function(f){var h=SRUtils.getMappedFormFldId(f,true);var b=dijit.byId(h);var g;if(h=="SROutageStartDateCloned"||h=="SROutageEndDateCloned"||h=="SROutagePercentageCloned"){g=b.focusNode.value}else{g=getFieldVal(h)}if(dijit.byId(h)&&dijit.byId(h).type=="checkbox"){g=(dijit.byId(h).checked)?"true":"false"}h=h.replace(/Cloned/g,"");if(h=="substatus"){a.tempSubstatusForClosure=g}else{a[h]=g}});dojo.forEach(hiddenFldsForClosureWiz,function(b){var g=SRUtils.getMappedFormFldId(b,true);var f=getFieldVal(g);if(dijit.byId(g)&&dijit.byId(g).type=="checkbox"){f=(dijit.byId(g).checked)?"true":"false"}g=g.replace(/Cloned/g,"");if(g=="status"){}else{a[g]=f}});return a};SRClosureProcess.isKnownIssueRequired=function(){return(!isTechnicalSR()||isHardwareSR()||isODSR()||("Cloud"==dijit.byId("productClass").getValue()||"CloudNS"==dijit.byId("productClass").getValue()))?false:true};SRClosureProcess.setStep1Style=function(f){dojo.forEach(f,function(v){var q=(v.required!=undefined)?v.required:false;if(v.id=="knownIssue"&&!SRClosureProcess.isKnownIssueRequired()){q=false}if(q==true){var s=SRUtils.getMappedFormFldId(v,true);var o=s+"Row";var p=dijit.byId(s);var x=false;if(p!=undefined){x=dojo.attr(p.domNode,"readOnly")}var u=(x!=undefined&&x==true)?false:dojo.attr(p,"required");if(u!=true&&dojo.byId(o)!=undefined){}p.required=true;var m=dojo.query(".reqImgNode",dojo.byId(o));if(m!=undefined&&m.length>0){var w=m[0];w.innerHTML="";w.innerHTML='<img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/>'}}});var l=dijit.byId("HIAcknowledgeCloned");var h="HIAcknowledgeClonedRow";if(dojo.byId("shiImg")&&window.headerDataAsJson.HIAcknowledge=="false"){if(dojo.byId(h)){var a=dojo.query(".picklistNode",dojo.byId(h));if(a!=undefined&&a.length>0){var g=getSHIImgNode(true);var b=a[0];b.innerHTML="";dojo.style(g,{"vertical-align":"middle","padding-left":"2px","margin-left":"2px"});b.appendChild(g);dojo.connect(g,"onclick",function(){window.showSHI(true)})}}}else{if(dojo.byId(h)){dojo.style(dojo.byId(h),{display:"none"})}}};SRClosureProcess.readSubstatus=function(){return window.headerDataAsJson.tempSubstatusForClosure};SRClosureProcess.populateClosureForm=function(){window.initMode=true;setFieldVal("statusCloned","Closed");var f=isEmptyVal(window.headerDataAsJson.RootCause)?SRClosureProcess.getRootcause():window.headerDataAsJson.RootCause;setFieldVal("rootCauseCloned",f);var a=SRClosureProcess.readSubstatus();var b=loadSubstatusLOV(true);if(b!=undefined){b.addCallback(function(h){setFieldVal("substatusCloned",a);SRClosureProcess.setKnownIssueValue(window.headerDataAsJson.knownIssue);var g=SRClosureProcess.toggleReasonCodeLov(f);g.addErrback(function(){window.initMode=false;SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_WIZARD).domNode)});g.addCallback(function(){setFieldVal("reasonCodeCloned",window.headerDataAsJson.ReasonCode);window.initMode=false;SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_WIZARD).domNode);SRClosureProcess.setStepStatus(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),dijit.byId(SR_CLOSURE_STEP1_ID),SRClosureProcess.getStepStatus(dijit.byId(SR_CLOSURE_STEP1_ID)))})});b.addErrback(function(){window.initMode=false;SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_WIZARD).domNode)})}else{setFieldVal("substatusCloned",a);SRClosureProcess.setKnownIssueValue(window.headerDataAsJson.knownIssue);setFieldVal("reasonCodeCloned",window.headerDataAsJson.ReasonCode);window.initMode=false;SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_WIZARD).domNode)}};SRClosureProcess.validateKnownIssue=function(){if(SRClosureProcess.isKnownIssueRequired()&&isEmptyVal(SRClosureProcess.getKnownIssueValue())){var f=dojo.byId("knownIssueClonedRow");if(f!=undefined){var b=dojo.query(".srattribute,.srHeaderAttribute,.srHeaderLabel",f);if(b!=undefined&&b.length>0){dojo.addClass(b[0],"errorLabel")}var a=".errorDiv";var g=dojo.query(a,f);if(g!=null&&g.length>0){dojo.addClass(g[0],"errorHighlight")}}return FAILURE_STATUS}return SUCCESS_STATUS};SRClosureProcess.validateReasonCode=function(){if(window.headerDataAsJson.SRType=="Non-Technical"&&isEmptyVal(getFieldVal("reasonCodeCloned"))){var f=dojo.byId("reasonCodeClonedRow");if(f!=undefined){var b=dojo.query(".srattribute,.srHeaderAttribute,.srHeaderLabel",f);if(b!=undefined&&b.length>0){dojo.addClass(b[0],"errorLabel")}var a=".errorDiv";var g=dojo.query(a,f);if(g!=null&&g.length>0){dojo.addClass(g[0],"errorHighlight")}}return FAILURE_STATUS}return SUCCESS_STATUS};SRClosureProcess.validateStep1=function(){errHandlingUtil.clearErrFlds(dijit.byId(SR_CLOSURE_STEP1_ID).domNode);var a=SRClosureProcess.validateFormFlds(SR_CLOSURE_STEP1_ID);if(a.opStatus==-1){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}errHandlingUtil.errs=a.opResult;setTimeout("errHandlingUtil.processErrFlds(true)",10);return FAILURE_STATUS}return SUCCESS_STATUS};SRClosureProcess.validateFormFlds=function(f){var a=new Object();var l=new Array();a.opStatus=0;a.opResult=l;for(i=0;i<reqFldsForClosureWiz.length;i++){var m=reqFldsForClosureWiz[i];var b=SRUtils.getMappedFormFldId(m,true);var h=dijit.byId(b);if(h!=undefined&&h.store&&h.getValue()!=null&&h.getValue()!=""){var g=dojo.clone(h.query);g.name=h.getValue();h.store.fetch({query:g,queryOptions:{deep:true},onComplete:function(o,q){var u=(h.title!=null&&h.title!="")?h.title:b;if(!o.length&&h.invalidMessage!=undefined&&h.invalidMessage!=""){a.opStatus=-1;var s={};s.messageType=2;s.message=u+" has invalid value.";var p={};p.errFldId=b;s.messageParams=p;l.push(s)}},onError:function(o){console.error("dijit.form.combobox: "+o)}})}}return a};SRClosureProcess.saveStep1=function(b){if(SRClosureProcess.step1_hasChangedFsTask()){if(!confirm("You have field service updates. Those changes will not be saved if you continue. Please click on 'Update Task' button to save field service updates.")){return FAILURE_STATUS}SRClosureProcess.step1_unmarkFsTaskChanges()}var a=SRClosureProcess.getStep1Json();return SRClosureProcess.invokeStep1XhrReq(a,b)};SRClosureProcess.invokeStep1XhrReq=function(h,l){var b=SRClosureProcess.validateStep1();if(b==FAILURE_STATUS){return FAILURE_STATUS}dijit.byId("pleasewait").show();var f=getActiveSrId();var g=getQueryTabName();var o=getSrModId();var m=getSrNumber();h.action="closeSRFinalStep";h.queryTabName=g;h.modId=o;h.activeSR=m;h.srId=f;h.stepId="1";var a=dojo.xhrPost({url:"../../../SRHeaderRequest",content:h,handleAs:"json",preventCache:true,load:function(s,q){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(s.opStatus==1){s.cancelLabel="Cancel";displayErrors(s);return FAILURE_STATUS}if(s.srData!=undefined){SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);setHeaderJSONFromResponse(s.srData);SRClosureProcess.updateSRLastUpdated(window.headerDataAsJson.UpdatedRelativeDate);SRClosureProcess.setMesssage("Reason for Closing saved to SR");if(l!=undefined&&"next"===l){var p=SRClosureProcess.getNextStep(SR_CLOSURE_STEP1_ID);if(!isEmptyVal(p)){dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).selectChild(dijit.byId(p))}}}return s},error:function(q,p){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}var s={};s.opStatus=1;return s}});return a};SRClosureProcess.getStep3Json=function(b){var f={};var a=dojo.query("input",dijit.byId(SR_CLOSURE_STEP3_ID).domNode);dojo.forEach(a,function(g){var m=g.id;if(isEmptyVal(b)||(!isEmptyVal(b)&&m.contains(b))){var l=g.value;var h=g.type;if(h=="checkbox"&&dijit.byId(m)){if(dijit.byId(m).checked){f[m]=l}}else{f[m]=l}}});var a=dojo.query("textarea",dijit.byId(SR_CLOSURE_STEP3_ID).domNode);dojo.forEach(a,function(g){var l=g.name;if(isEmptyVal(b)||(!isEmptyVal(b)&&l.contains(b))){var h=dijit.byId(l).getValue();h=h.replace(/\s*$/g,"");h=encodeURIComponent(h);if(!isEmptyVal(l)&&!isEmptyVal(h)){f[l]=h}}});return f};SRClosureProcess.handleTabNavigation=function(a,f){var b;if(f!=undefined&&f=="next"){b=SRClosureProcess.getNextStep(a)}if(f!=undefined&&f=="previous"){b=SRClosureProcess.getPreviousStep(a)}if(!isEmptyVal(b)){dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).selectChild(dijit.byId(b))}};SRClosureProcess.getNextStep=function(b){var a=dojo.indexOf(SRClosureProcess.availableTabs,b);if(a>=0&&a<SRClosureProcess.availableTabs.length-1){return SRClosureProcess.availableTabs[a+1]}return""};SRClosureProcess.getPreviousStep=function(b){var a=dojo.indexOf(SRClosureProcess.availableTabs,b);if(a>0&&a<SRClosureProcess.availableTabs.length){return SRClosureProcess.availableTabs[a-1]}return""};SRClosureProcess.dataMap=new Map();var ODM_TRAIN="odmTrainData";SRClosureProcess.getTrainData=function(f,g){SRClosureProcess.dataMap.remove(ODM_TRAIN);var b=getActiveSrId();var a=getQueryTabName();var l=getSrModId();var h=getSrNumber();return dojo.xhrPost({url:"../../../ToolbarRequest",preventCache:true,sync:(f!=undefined)?f:false,content:{srId:b,queryTabName:a,modId:l,activeSR:h,refreshODM:(g==undefined)?false:g,buildODMForClosure:true},handleAs:"json",preventCache:true,load:function(p,o){if(p!=undefined&&p.error!=undefined){var m=getDisplayMessageObj("Failed to build ODM train.",2);displayErrors(m)}if(p!=undefined&&p.error==undefined){SRClosureProcess.dataMap.put(ODM_TRAIN,p)}return p},error:function(m,o){}})};SRClosureProcess.isOdmCompliant=function(){var a=SRClosureProcess.dataMap.findIt(ODM_TRAIN);if(a!=-1){var b=SRClosureProcess.dataMap.get(ODM_TRAIN);if(b!=undefined&&b.odmCompliant){return true}return false}SRClosureProcess.getTrainData(true,false);var b=SRClosureProcess.dataMap.get(ODM_TRAIN);if(b!=undefined&&b.odmCompliant){return true}return false};SRClosureProcess.isAwaitingFieldAutoClose=function(){return getFieldVal("substatus")==AWAITING_FIELD_AUTO_CLOSE_STATUS?true:false};SRClosureProcess.isOdmStepVisible=function(a,b){if(SRClosureProcess.isOdmCompliant()||(a!=undefined&&substatusForNoOdm.contains(a))||(b!=undefined&&SRClosureProcess.hasSolvedSRKm()&&"Yes"==b)){return false}return true};SRClosureProcess.addremoveOdmStep=function(){var a=getFieldVal("substatusCloned");if(!SRClosureProcess.isOdmStepVisible(a,SRClosureProcess.getKnownIssueValue())&&dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID)&&SRClosureProcess.availableTabs.contains(SR_CLOSURE_STEP2_ID)){SRClosureProcess.availableTabs.remove(SR_CLOSURE_STEP2_ID);dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).removeChild(dijit.byId(SR_CLOSURE_STEP2_ID));dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout()}else{if(SRClosureProcess.isOdmStepVisible(a,SRClosureProcess.getKnownIssueValue())&&!SRClosureProcess.availableTabs.contains(SR_CLOSURE_STEP2_ID)){if(SRClosureProcess.availableTabs.length>1){for(i=1;i<SRClosureProcess.availableTabs.length;i++){var b=SRClosureProcess.availableTabs[i];dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).removeChild(dijit.byId(b));dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout()}}dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).addChild(tabMap.get(SR_CLOSURE_STEP2_ID));if(SRClosureProcess.availableTabs.length>1){for(i=1;i<SRClosureProcess.availableTabs.length;i++){var b=SRClosureProcess.availableTabs[i];dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).addChild(tabMap.get(b))}}SRClosureProcess.availableTabs.insert(1,SR_CLOSURE_STEP2_ID);dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout()}}};SRClosureProcess.handleSubstatusOnChange=function(){var a=getFieldVal("substatusCloned");var b=(window.substatusForAutoSrClose.contains(a))?COMPLETED_STEP_STATUS:((SRClosureProcess.step7_completed())?OPTIONAL_INCOMPLETE_STEP_STATUS:REQUIRED_INCOMPLETE_STEP_STATUS);SRClosureProcess.setStepStatus(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),dijit.byId(SR_CLOSURE_STEP7_ID),b);if(getInitMode()){return}if(NONTECHNICAL!=window.headerDataAsJson.SRType){setFieldVal("reasonCodeCloned","");if(CUSTOMER_ABANDONED_STATUS===a||DUPLICATE_STATUS===a){setFieldVal("reasonCodeCloned","Undetermined")}}SRClosureProcess.setKnownIssueValue("");if(window.substatusForAutoSrClose.contains(a)){SRClosureProcess.setKnownIssueValue("Uncertain")}if(window.substatusForKnownBugIssue.contains(a)){SRClosureProcess.setKnownIssueValue(SRClosureProcess.hasDefectsForSR()?"Yes":"")}if(window.substatusForKnownSolutionIssue.contains(a)){SRClosureProcess.setKnownIssueValue((SRClosureProcess.hasKmSolutionForSR()||SRClosureProcess.hasSolutionUrlForSR())?"Yes":"")}};SRClosureProcess.hasSolvedSRKm=function(){if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_KM]==undefined){return false}var b=SRClosureProcess.openSrRefs[CHILD_TYPE_KM];for(i=0;i<b.length;i++){var a=b[i];if(a.classification===SOLVED_SR_CLASSIFICATION){return true}}return false};SRClosureProcess.hasSolvedSRSolutionUrl=function(){if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_SOLUTION_URL]==undefined){return false}var b=SRClosureProcess.openSrRefs[CHILD_TYPE_SOLUTION_URL];for(i=0;i<b.length;i++){var a=b[i];if(a.classification===SOLVED_SR_CLASSIFICATION){return true}}return false};SRClosureProcess.step7_hasUnclassifiedKmUrl=function(){if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_SOLUTION_URL]==undefined){return false}var b=SRClosureProcess.openSrRefs[CHILD_TYPE_SOLUTION_URL];for(i=0;i<b.length;i++){var a=b[i];if(a.classification===ENGINEER_RESEARCH||a.classification===CUSTOMER_RESEARCH){return true}}var g=SRClosureProcess.openSrRefs[CHILD_TYPE_KM];for(i=0;i<g.length;i++){var f=g[i];if(f.classification===ENGINEER_RESEARCH||f.classification===CUSTOMER_RESEARCH){return true}}return false};SRClosureProcess.step7_refreshAndCheckForCompletion=function(){var b={};b.refresh=true;b.retrieveAll=false;b.referenceType=new Array(CHILD_TYPE_KM,CHILD_TYPE_SOLUTION_URL);var a=SRClosureProcess.loadOpenSrRefs(b);a.addCallback(function(f){SRClosureProcess.setStepStatus(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),dijit.byId(SR_CLOSURE_STEP7_ID),((SRClosureProcess.step7_isError())?REQUIRED_INCOMPLETE_STEP_STATUS:COMPLETED_STEP_STATUS))});return a};SRClosureProcess.step7_isError=function(){var a=SRClosureProcess.readSubstatus();if(window.substatusForAutoSrClose.contains(a)){return false}if(SRClosureProcess.step7_completed()){return false}return true};SRClosureProcess.step7_completed=function(){if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_SOLUTION_URL]==undefined){return false}if(SRClosureProcess.step7_hasUnclassifiedKmUrl()){return false}var b=SRClosureProcess.openSrRefs[CHILD_TYPE_SOLUTION_URL];for(i=0;i<b.length;i++){var a=b[i];if(a.classification===SOLVED_SR_CLASSIFICATION||a.classification===CREATED_FROM_SR_CLASSIFICATION||a.classification===SOLUTION_FROM_DUPLICATE_CHECK){return true}}var g=SRClosureProcess.openSrRefs[CHILD_TYPE_KM];for(i=0;i<g.length;i++){var f=g[i];if(f.classification===SOLVED_SR_CLASSIFICATION||f.classification===CREATED_FROM_SR_CLASSIFICATION||f.classification===SOLUTION_FROM_DUPLICATE_CHECK){return true}}return false};SRClosureProcess.hasKmSolutionForSR=function(){if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_KM]==undefined){return false}var b=SRClosureProcess.openSrRefs[CHILD_TYPE_KM];for(i=0;i<b.length;i++){var a=b[i];if(a.classification===SOLVED_SR_CLASSIFICATION||a.classification===CREATED_FROM_SR_CLASSIFICATION){return true}}return false};SRClosureProcess.hasSolutionUrlForSR=function(){if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_SOLUTION_URL]==undefined){return false}var b=SRClosureProcess.openSrRefs[CHILD_TYPE_SOLUTION_URL];for(i=0;i<b.length;i++){var a=b[i];if(a.classification===SOLVED_SR_CLASSIFICATION||a.classification===CREATED_FROM_SR_CLASSIFICATION){return true}}return false};SRClosureProcess.hasDefectsForSR=function(){if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_BUG]==undefined){return false}var b=SRClosureProcess.openSrRefs[CHILD_TYPE_BUG];for(i=0;i<b.length;i++){var a=b[i];if(a.classification===SOLVED_SR_CLASSIFICATION){return true}}return false};SRClosureProcess.getCookieKey=function(){return window.loggedInUser.toUpperCase()+"_"+getSrNumber()};SRClosureProcess.buildButtonToolbar=function(p,g,h,a){var v=document.createElement("table");dojo.attr(v,"width","100%");dojo.attr(v,"align","right");var b=document.createElement("tbody");v.appendChild(b);var l=document.createElement("tr");var o=document.createElement("td");dojo.attr(o,{align:"left"});b.appendChild(l);l.appendChild(o);var m=document.createElement("a");dojo.attr(m,"href","#");var y=document.createTextNode("Exit Wizard");m.appendChild(y);o.appendChild(m);dojo.connect(m,"onclick",function(){SRClosureProcess.exitWizardCallback()});var q=document.createElement("td");dojo.attr(q,{align:"right"});l.appendChild(q);var x=(g?false:true);var z=new dijit.form.Button({id:p+"_previous",label:"Previous",disabled:x});q.appendChild(z.domNode);var B=document.createElement("span");dojo.style(B,"padding","2px");q.appendChild(B);var w=(h?false:true);var s=new dijit.form.Button({id:p+"_next",label:"Next",disabled:w});q.appendChild(s.domNode);var A=document.createElement("span");dojo.style(A,"padding","2px");q.appendChild(A);var u=(a?"":"display:none");var f=new dijit.form.Button({id:p+"_closeSr",label:"Close",style:u,disabled:true});q.appendChild(f.domNode);return v};SRClosureProcess.hasOpenEscalations=function(){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs.Escalations!=undefined&&SRClosureProcess.openSrRefs.Escalations.length>=1){return true}else{if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs.Escalations==undefined){var b={};b.retrieveAll=false;b.referenceType=new Array("Escalations");var a=SRClosureProcess.loadOpenSrRefs(b);if(a!=undefined){a.addCallback(function(f){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs.Escalations!=undefined&&SRClosureProcess.openSrRefs.Escalations.length>=1){return true}})}}}return false};SRClosureProcess.hasOpenFsTask=function(){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK]!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK].length>=1){return true}else{if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK]==undefined){var b={};b.retrieveAll=false;b.referenceType=new Array(CHILD_TYPE_FSTASK);var a=SRClosureProcess.loadOpenSrRefs(b);if(a!=undefined){a.addCallback(function(f){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK]!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_FSTASK].length>=1){return true}})}}}return false};SRClosureProcess.hasOpenTranslation=function(){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[TRANSLATION_SR]!=undefined&&SRClosureProcess.openSrRefs[TRANSLATION_SR].length>=1){return true}else{if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[TRANSLATION_SR]==undefined){var b={};b.retrieveAll=false;b.referenceType=new Array(TRANSLATION_SR);var a=SRClosureProcess.loadOpenSrRefs(b);if(a!=undefined){a.addCallback(function(f){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[TRANSLATION_SR]!=undefined&&SRClosureProcess.openSrRefs[TRANSLATION_SR].length>=1){return true}})}}}return false};SRClosureProcess.hasOpenCollab=function(){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_CHILDREN_SR]!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_CHILDREN_SR].length>=1){return true}else{if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_CHILDREN_SR]==undefined){var b={};b.retrieveAll=false;b.referenceType=new Array(CHILD_TYPE_CHILDREN_SR);var a=SRClosureProcess.loadOpenSrRefs(b);if(a!=undefined){a.addCallback(function(f){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_CHILDREN_SR]!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_CHILDREN_SR].length>=1){return true}})}}}return false};SRClosureProcess.hasOpenRfcs=function(){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_RFC]!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_RFC].length>=1){return true}else{if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_RFC]==undefined){var b={};b.retrieveAll=false;b.referenceType=new Array(CHILD_TYPE_RFC);var a=SRClosureProcess.loadOpenSrRefs(b);if(a!=undefined){a.addCallback(function(f){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_RFC]!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_RFC].length>=1){return true}})}}}return false};SRClosureProcess.hasOpenDefects=function(){return SRClosureProcess.hasEngineerResearchDefects()};SRClosureProcess.hasEngineerResearchDefects=function(){var a=ENGINEER_RESEARCH;return SRClosureProcess.fetchRelatedDefectsOfClass(a)};SRClosureProcess.hasAllExceptEngineerResearchDefects=function(){var a=ENGINEER_RESEARCH;return SRClosureProcess.fetchRelatedDefectsOfClass(a,false)};SRClosureProcess.fetchRelatedDefectsOfClass=function(b,g){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_BUG]!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_BUG].length>=1){if(b==undefined){return true}var f=SRClosureProcess.filterBugs(b,g);if(f!=null&&f.length>=1){return true}return false}else{if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_BUG]==undefined){var h={};h.retrieveAll=false;h.referenceType=new Array(CHILD_TYPE_BUG);var a=SRClosureProcess.loadOpenSrRefs(h);if(a!=undefined){a.addCallback(function(m){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_BUG]!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_BUG].length>=1){if(b==undefined){return true}var l=SRClosureProcess.filterBugs(b,g);if(l!=null&&l.length>=1){return true}return false}})}}}return false};SRClosureProcess.filterBugs=function(a,g){if(g==undefined||(g!=undefined&&g==true)){g=true}else{g=false}if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_BUG]==undefined){return null}var f=new Array();var h=SRClosureProcess.openSrRefs[CHILD_TYPE_BUG];for(i=0;i<h.length;i++){var b=h[i];if(a==undefined){f.push(b)}else{if(a!=undefined&&g==true&&b.classification===a){f.push(b)}else{if(a!=undefined&&g==false&&b.classification!=a){f.push(b)}}}}return f};SRClosureProcess.hasOpenRelatedSrs=function(){return SRClosureProcess.hasEngineerResearchSrs()};SRClosureProcess.hasEngineerResearchSrs=function(){var a=ENGINEER_RESEARCH;return SRClosureProcess.fetchRelatedSrsOfClass(a)};SRClosureProcess.hasAllExceptEngineerResearchSrs=function(){var a=ENGINEER_RESEARCH;return SRClosureProcess.fetchRelatedSrsOfClass(a,false)};SRClosureProcess.fetchRelatedSrsOfClass=function(b,g){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_SR]!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_SR].length>=1){if(b==undefined){return true}var f=SRClosureProcess.filterSrs(b,g);if(f!=null&&f.length>=1){return true}return false}else{if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_SR]==undefined){var h={};h.retrieveAll=false;h.referenceType=new Array(CHILD_TYPE_SR);var a=SRClosureProcess.loadOpenSrRefs(h);if(a!=undefined){a.addCallback(function(m){if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_SR]!=undefined&&SRClosureProcess.openSrRefs[CHILD_TYPE_SR].length>=1){if(b==undefined){return true}var l=SRClosureProcess.filterSrs(b,g);if(l!=null&&l.length>=1){return true}return false}})}}}return false};SRClosureProcess.filterSrs=function(a,f){if(f==undefined||(f!=undefined&&f==true)){f=true}else{f=false}if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_SR]==undefined){return null}var b=new Array();var h=SRClosureProcess.openSrRefs[CHILD_TYPE_SR];for(i=0;i<h.length;i++){var g=h[i];if(a===undefined){b.push(g)}else{if(a!=undefined&&f==true&&g.classification===a){b.push(g)}else{if(a!=undefined&&f==false&&g.classification!=a){b.push(g)}}}}return b};SRClosureProcess.hasLinkedKmSolution=function(){if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_KM]==undefined){return false}var a=SRClosureProcess.openSrRefs[CHILD_TYPE_KM];if(a.length>0){return true}return false};SRClosureProcess.hasLinkedSolutionURL=function(){if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_SOLUTION_URL]==undefined){return false}var a=SRClosureProcess.openSrRefs[CHILD_TYPE_SOLUTION_URL];if(a.length>0){return true}return false};SRClosureProcess.openSrRefs={};SRClosureProcess.loadOpenSrRefs=function(g){g=g||{};if((g.referenceType==undefined||!dojo.isArray(g.referenceType))&&g.retrieveAll!=true){return}if(g.referenceType==undefined||!dojo.isArray(g.referenceType)){g.referenceType=new Array()}var a=(g.sync!=undefined)?g.sync:false;var f=(g.retrieveAll!=undefined&&g.retrieveAll==true)?true:false;var b={url:"../../../SRRequest",preventCache:true,sync:a,content:{action:"action_open_refs",refreshRef:g.refresh,srId:getActiveSrId(),activeSR:getSrNumber(),modId:getSrModId(),queryTabName:getQueryTabName(),referenceType:dojo.toJson(g.referenceType),retrieveAll:f,scanAndAssociateAll:g.scanAndAssociateAll,preventCache:true},handleAs:"json",load:function(m,h){if(m.error!=undefined||(m.opStatus!=undefined&&m.opStatus==1)){return m}SRClosureProcess.openSrRefs=SRClosureProcess.openSrRefs||{};if(m!=undefined){for(var l in m){if(l=="refAddedByParsing"){if(m[l]!=undefined&&(m[l]=="true"||m[l]==true)){dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=true}}else{SRClosureProcess.openSrRefs[l]=m[l]}}}return m},error:function(l,h){}};return dojo.xhrPost(b)};SRClosureProcess.getFieldLayout=function(b){var a="";if(b!=undefined){var f=b.field;switch(f){case"sub-Status":a=SRClosureProcess.displaySubstatus();break;case"knownIssue":a=SRClosureProcess.displayKnownIssue();break;case"resolutionCode":a=SRClosureProcess.displayReasoncode();break;case"SRPlatformSpecific":a=SRClosureProcess.displayPlatformSpecific();break;case"SROutageType":a=SRClosureProcess.displaySROutageType();break;case"SROutageStartDate":a=SRClosureProcess.displaySROutageStartDate();break;case"SROutageEndDate":a=SRClosureProcess.displaySROutageEndDate();break;case"SROutagePercentage":a=SRClosureProcess.displaySROutagePercentage();break;default:break}return a}};SRClosureProcess.displayKnownIssue=function(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:650px;"><tbody><tr id="knownIssueClonedRow">');a.append('<td nowrap="nowrap"  align="right" title="Known Issue" valign="middle" class="bigSrHeaderAttribute srHeaderLabel" >Known Issue</td>');a.append('<td align="right" width="16px" class="reqImgNode" nowrap="nowrap"></td>');a.append('<td width="150px" align="left" nowrap="nowrap" valign="middle">');a.append('<div  id="ckiStoreCloned" dojoType="dojo.data.ItemFileReadStore" jsId="ckiStoreCloned" url="../../../SRHeaderRequest?action=loadlov&lov=SR_KNOWN_ISS"></div>');a.append('<div class="errorDiv"><input class="srHeaderInput" title="Known Issue"  onBlur="validateCombo(this);"  invalidMessage="Invalid value for Known Issue" dojoType="dijit.form.ComboBox" store="ckiStoreCloned"  value="" name="knownIssueCloned" id="knownIssueCloned"></input></div></td>');a.append("<td></td>");a.append("</tr></tbody></table>");return a.toString()};SRClosureProcess.displaySubstatus=function(){var f="substatusCloned";var b="onchange_updSubstatus(true)";var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:650px;"><tbody><tr id="'+f+'Row">');a.append('<td title="Substatus"   align="right" class="bigSrHeaderAttribute srHeaderLabel" ><span id="SRAttr'+f+'Label">What was the outcome of the SR?</span></td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input class="srHeaderInput" title="Substatus" onBlur="validateCombo(this);"  required="true" invalidMessage="Invalid value for Substatus" dojoType="dijit.form.ComboBox" id="'+f+'" name="'+f+'" onChange="'+b+'"></input></div></td>');a.append('<td nowrap="nowrap">(Will update the SR when SR is actually closed.)</td>');a.append("</tr></tbody></table>");return a.toString()};SRClosureProcess.displayPlatformSpecific=function(){var b="platformSpecificFlagCloned";var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:650px;"><tbody><tr id="'+b+'Row">');a.append('<td title="Platform Specific"  valign="middle" class="bigSrHeaderAttribute srHeaderLabel" ><span id="SRAttr'+b+'Label">Platform Specific<span></td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="checkbox"  dojoType="dijit.form.CheckBox"  id="'+b+'" name="'+b+'"/>');a.append("</td>");a.append("<td></td>");a.append("</tr></tbody></table>");return a.toString()};SRClosureProcess.displayReasoncode=function(){var b="reasonCodeCloned";var a=new StringBuffer();if(headerDataAsJson.SRType=="Non-Technical"){a.append('<table  style="table-layout:fixed;width:650px;"><tbody><tr id="'+b+'Row">');a.append('<td title="Reason Code" valign="middle" class="bigSrHeaderAttribute srHeaderLabel" >Reason Code</td>');a.append('<td  class="reqImgNode" align="right" width="16px" nowrap="nowrap"><img style="vertical-align:middle;" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="300px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><div id="dropDownButtonContainer"></div></div>');a.append('<input dojoType="dijit.form.TextBox" type="hidden" id="'+b+'" name="'+b+'"></input>');a.append("</td>");a.append('<td valign="middle" style="vertical-align:middle;"></td>');a.append("</tr></tbody></table>")}else{a.append('<table  style="table-layout:fixed;width:650px;"><tbody><tr id="'+b+'Row">');a.append('<td title="Reason Code" valign="middle" class="bigSrHeaderAttribute srHeaderLabel" >Reason Code</td>');a.append('<td  class="reqImgNode" align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input class="srHeaderInput" onBlur="validateCombo(this);"  title="Reason Code" invalidMessage="Invalid value for Reason Code" dojoType="dijit.form.ComboBox" id="'+b+'" name="'+b+'" ></input></div>');a.append("</td>");a.append('<td valign="middle" style="vertical-align:middle;"><a style="display:none;vertical-align:middle;" title="Switch to display hardware reason codes" href="#"  onclick="SRClosureProcess.toggleReasonCodeLov(\'Hardware\');">Show Hardware</a><a style="display:none;vertical-align:middle;"  href="#" title="Switch to display software reason codes" onclick="SRClosureProcess.toggleReasonCodeLov(\'Software\');">Show Software</a></td>');a.append("</tr></tbody></table>")}return a.toString()};SRClosureProcess.displayEscResolution=function(v,m,x){var a="resolutionCode_"+v;var w=a+"Row";var g=new dojo.data.ItemFileReadStore({url:"../../../ActivityLovRequest?q=ACT_RESOLUTION_CD&type=Escalation&parentLovVal="+m+"&rev="+enabledLOVServlets.get("SRHeaderRequest")});var h=document.createElement("tr");dojo.attr(h,{id:w});var b=document.createElement("td");var l=document.createElement("table");dojo.style(l,{tableLayout:"fixed",width:"320px"});var s=document.createElement("tbody");var z=document.createElement("tr");var f=document.createElement("td");dojo.attr(f,{width:"130px"});dojo.addClass(f,"srHeaderLabel");f.appendChild(document.createTextNode("Resolution"));z.appendChild(f);var q=document.createElement("td");dojo.addClass(q,"reqImgNode");dojo.attr(q,{align:"right",width:"16px",nowrap:"nowrap"});var A=document.createElement("img");A.src="../images/requiredicon.gif";q.appendChild(A);z.appendChild(q);var p=document.createElement("td");dojo.attr(p,{align:"left",width:"175px",nowrap:"nowrap"});var u=document.createElement("div");dojo.addClass(u,"errorDiv");var o=document.createElement("input");SRClosureProcess.setSubCategoryLOV(m,v);var y=new dijit.form.FilteringSelect({id:a,name:a,required:true,pageSize:20,value:(x&&x!=="")?x:"",autoComplete:false,store:g,searchAttr:"lovVal",invalidMessage:"Invalid value",labelType:"text"},o);(m&&m!=="")?dijit.byId(y).setDisabled(false):dijit.byId(y).setDisabled(true);u.appendChild(y.domNode);p.appendChild(u);z.appendChild(p);s.appendChild(z);l.appendChild(s);b.appendChild(l);h.appendChild(b);return h};SRClosureProcess.displayCategoryResolution=function(w,v,u){var a="category_"+w;var x=a+"Row";var g=new dojo.data.ItemFileReadStore({url:"../../../ActivityLovRequest?q=FS_ACTIVITY_CLASS&type=Escalation&rev="+enabledLOVServlets.get("SRHeaderRequest")});var h=document.createElement("tr");dojo.attr(h,{id:x});var b=document.createElement("td");var l=document.createElement("table");dojo.style(l,{tableLayout:"fixed",width:"320px"});var q=document.createElement("tbody");var z=document.createElement("tr");var f=document.createElement("td");dojo.attr(f,{width:"130px"});dojo.addClass(f,"srHeaderLabel");f.appendChild(document.createTextNode("Category"));z.appendChild(f);var p=document.createElement("td");dojo.addClass(p,"reqImgNode");dojo.attr(p,{align:"right",width:"16px",nowrap:"nowrap"});var A=document.createElement("img");A.src="../images/requiredicon.gif";p.appendChild(A);z.appendChild(p);var o=document.createElement("td");dojo.attr(o,{align:"left",width:"175px",nowrap:"nowrap"});var s=document.createElement("div");dojo.addClass(s,"errorDiv");var m=document.createElement("input");var y=new dijit.form.FilteringSelect({id:a,name:a,required:true,pageSize:20,value:(v!=undefined&&v.substr(0,3)==="ESC")?v:"",autoComplete:false,store:g,searchAttr:"lovVal",invalidMessage:"Invalid value",labelType:"text"},m);dojo.connect(y,"onChange",function(B){SRClosureProcess.setSubCategoryLOV(y,w)});s.appendChild(y.domNode);o.appendChild(s);z.appendChild(o);q.appendChild(z);l.appendChild(q);b.appendChild(l);h.appendChild(b);return h};SRClosureProcess.sendEmail=function(b,g){var a="mailto:"+b+"?subject=SR/TAR "+g;var f=window.open(a,"email_window");if(f&&f.open&&!f.closed){f.close()}};SRClosureProcess.startChat=function(b){var a="xmpp:"+b;var f=window.open(a,"chat_window");if(f&&f.open&&!f.closed){f.close()}};SRClosureProcess.displayEscManager=function(x,a){var b="primaryOwner_"+x;var h=document.createElement("tr");var f=document.createElement("td");var o=document.createElement("table");var w=document.createElement("tbody");var z=document.createElement("tr");var g=document.createElement("td");dojo.attr(g,{width:"130px"});dojo.addClass(g,"srHeaderLabel");g.appendChild(document.createTextNode("Escalation Manager"));z.appendChild(g);var v=document.createElement("td");dojo.addClass(v,"reqImgNode");dojo.attr(v,{align:"right",width:"16px",nowrap:"nowrap"});var y=document.createElement("span");v.appendChild(y);z.appendChild(v);var u=document.createElement("td");dojo.attr(u,{align:"left",nowrap:"nowrap"});var m=document.createElement("a");dojo.attr(m,{style:"vertical-align:middle",href:"javascript:void(0);"});var A=document.createTextNode(a);m.appendChild(A);dojo.connect(m,"onclick",function(){SRClosureProcess.sendEmail(a,getSrNumber())});u.appendChild(m);var q=document.createElement("a");dojo.attr(q,{style:"vertical-align:middle",href:"javascript:void(0);"});var l=document.createElement("img");dojo.attr(l,{src:"../images/chat_16.png",height:"16",width:"16",title:"Send Instant Message",style:"vertical-align:middle;padding-left:2px;margin-left:2px;"});q.appendChild(l);dojo.connect(q,"onclick",function(){SRClosureProcess.startChat(a)});u.appendChild(q);z.appendChild(u);var s=document.createElement("td");dojo.attr(s,{width:"15%",align:"right",nowrap:"nowrap"});var p=SRClosureProcess.viewChildLinkNode("Escalation","Exit Wizard, View Escalations");s.appendChild(p);z.appendChild(s);w.appendChild(z);o.appendChild(w);f.appendChild(o);h.appendChild(f);return h};SRClosureProcess.displayResolvedEscStatus=function(b){var m="closedEsc_"+b;var l=document.createElement("tr");dojo.attr(l,{id:m});dojo.style(l,{display:"none"});var a=document.createElement("td");var h=document.createElement("table");dojo.style(h,{width:"100%"});var f=document.createElement("tbody");var g=document.createElement("tr");var o=document.createElement("td");o.appendChild(document.createTextNode("Escalation is Resolved"));dojo.addClass(o,"successMsg");g.appendChild(o);f.appendChild(g);h.appendChild(f);a.appendChild(h);l.appendChild(a);return l};SRClosureProcess.displayEscLastUpdated=function(a,o){var g="updated_"+a;var u=document.createElement("tr");dojo.attr(u,{id:"updatedrow_"+a});if(isEmptyVal(o)){dojo.style(u,{display:"none"})}var s=document.createElement("td");var p=document.createElement("table");dojo.style(p,{tableLayout:"fixed",width:"300px"});var b=document.createElement("tbody");var m=document.createElement("tr");var f=document.createElement("td");dojo.attr(f,{width:"130px"});dojo.addClass(f,"srHeaderLabel");f.appendChild(document.createTextNode("Last Escalation Activity:"));m.appendChild(f);var l=document.createElement("td");dojo.addClass(l,"reqImgNode");dojo.attr(l,{align:"right",width:"16px",nowrap:"nowrap"});var q=document.createElement("span");l.appendChild(q);m.appendChild(l);var h=document.createElement("td");dojo.attr(h,{id:SRClosureProcess.getLatestDateCellId(a),align:"left",width:"150px",nowrap:"nowrap"});h.appendChild(document.createTextNode((isEmptyVal(o)?"None":o)));m.appendChild(h);b.appendChild(m);p.appendChild(b);s.appendChild(p);u.appendChild(s);return u};SRClosureProcess.createSeparator=function(b){var f=document.createElement("tr");var a=document.createElement("td");if(b!=undefined&&!isNaN(b)){dojo.attr(a,{colSpan:b})}a.appendChild(document.createElement("hr"));f.appendChild(a);return f};SRClosureProcess.displayEscInstruction=function(f,b){var m=document.createElement("tr");dojo.attr(m,{id:"instructionrow_"+f});if(isEmptyVal(b)){dojo.style(m,{display:"none"})}var a=document.createElement("td");var l=document.createElement("table");dojo.attr(l,{width:"100%",cellSpacing:"2"});var g=document.createElement("tbody");var h=document.createElement("tr");var o=document.createElement("td");dojo.attr(o,{id:"instruction_"+f});SRClosureProcess.attachDetailNodeCell(o,isEmptyVal(b)?"":b);h.appendChild(o);g.appendChild(h);l.appendChild(g);a.appendChild(l);m.appendChild(a);return m};SRClosureProcess.attachDetailNodeCell=function(f,b){if(f==undefined){return}var a=truncateString(b,SRClosureProcess.maxCommentsLimit);var g=(a.length==b.length)?null:SRClosureProcess.seeDetailsNode();f.innerHTML=a;if(g!=null){f.appendChild(document.createTextNode("\xa0\xa0\xa0\xa0"));f.appendChild(g);SRClosureProcess.connectToSeeDetailsNode(g,b)}};SRClosureProcess.connectToSeeDetailsNode=function(b,a){dojo.connect(b,"onclick",function(){var f=b.parentNode;if(f!=undefined){f.innerHTML=a}})};SRClosureProcess.addInstructionIdFld=function(a,u){var g="instructionId_"+a;var x=document.createElement("tr");dojo.addClass(x,"statusRow");dojo.style(x,"display","none");var v=document.createElement("td");var p=document.createElement("table");var b=document.createElement("tbody");var o=document.createElement("tr");var f=document.createElement("td");dojo.attr(f,{align:"left",width:"18px",title:"Update was sent"});var h=document.createElement("img");dojo.attr(h,{src:"../images/check_16.png",height:"16",width:"16",title:"Success",alt:"Success",style:"padding-right:2px;margin-right:2px;"});f.appendChild(h);o.appendChild(f);var m=document.createElement("td");dojo.attr(m,{align:"left"});dojo.addClass(m,"successMsg");var l=document.createElement("td");dojo.attr(l,{align:"left",width:"130px",nowrap:"nowrap"});var q=document.createElement("a");dojo.attr(q,{style:"vertical-align:top;",href:"#"});var s=document.createElement("span");s.appendChild(document.createTextNode("Send another update."));dojo.style(s,{padding:"5px",margin:"5px"});q.appendChild(s);dojo.connect(q,"onclick",function(){SRClosureProcess.toggleEscalationInput(a,true)});l.appendChild(q);var w=createHiddenTextbox(g,u);l.appendChild(w.domNode);o.appendChild(m);o.appendChild(l);b.appendChild(o);p.appendChild(b);v.appendChild(p);x.appendChild(v);return x};SRClosureProcess.displayEscClosureComments=function(C,y){var a="instructionText_"+C;var p=document.createElement("tr");dojo.addClass(p,"inputRow");var b=document.createElement("td");var q=document.createElement("table");dojo.style(q,{width:"98%"});var w=document.createElement("tbody");var D=document.createElement("tr");var l=document.createElement("td");dojo.attr(l,{align:"left",title:"Update Escalation",valign:"bottom"});var B=document.createElement("span");dojo.addClass(B,"srHeaderLabel");B.appendChild(document.createTextNode("Update as 'Escalation Action Plan'"));dojo.style(B,{display:"inline-block","float":"left"});l.appendChild(B);var x=document.createElement("div");dojo.style(x,{"float":"right"});var g=new dijit.form.CheckBox({id:"publishInstruction_"+C,name:"publishInstruction_"+C,value:"true",checked:false},"checkBox");x.appendChild(g.domNode);var A=document.createElement("span");dojo.style(A,{padding:"2px",margin:"2px"});A.appendChild(document.createTextNode("Public"));dojo.attr(A,{title:"Making this public will add an escalation activity visible to the customer."});x.appendChild(A);var s=new dijit.form.Button({label:"Update Escalation"});var f=new dijit.form.CheckBox({id:"escalationStatus_"+C,name:"escalationStatus_"+C,value:"Escalation Resolved",onChange:function(){var E=dijit.byId("escalationStatus_"+C);B.innerHTML=(E!=undefined&&E.checked)?"Update as 'Escalation Closed'":"Update as 'Escalation Action Plan'";s.setLabel((E!=undefined&&E.checked)?"Close Escalation":"Update Escalation")},checked:(y=="Escalation Resolved"?true:false)},"checkBox");x.appendChild(f.domNode);var z=document.createElement("span");dojo.style(z,{padding:"2px",margin:"2px"});z.appendChild(document.createTextNode("Change to 'Escalation Resolved'"));x.appendChild(z);l.appendChild(x);D.appendChild(l);w.appendChild(D);var o=document.createElement("tr");dojo.style(o,{"vertical-align":"baseline"});var v=document.createElement("td");dojo.attr(v,{align:"left",nowrap:"nowrap"});var h=createSimpleTextArea(a,"width:99%;","4");v.appendChild(h.domNode);o.appendChild(v);w.appendChild(o);var m=document.createElement("tr");var u=document.createElement("td");dojo.attr(u,{align:"left",width:"105px"});u.appendChild(s.domNode);dojo.connect(s,"onClick",function(){SRClosureProcess.updateEscalation(C)});m.appendChild(u);w.appendChild(m);q.appendChild(w);b.appendChild(q);p.appendChild(b);return p};SRClosureProcess.unmarkStep3Flds=function(f){var g=dojo.byId("srEsc_"+f);var a=dojo.query("input, textarea",g);if(a!=undefined){for(i=0;i<a.length;i++){var b=a[i];var h=b.id;SRUtils.unmarkChanges(SR_CLOSURE_WIZARD+h)}}};SRClosureProcess.updateEscalation=function(b){dijit.byId("pleasewait").show();var a=SRClosureProcess.getStep3Json(b);var l=dojo.byId("srEsc_"+b);errHandlingUtil.clearErrFlds(l);var g=validateFormFlds(l);if(g.opStatus==-1){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}errHandlingUtil.errs=g.opResult;setTimeout("errHandlingUtil.processErrFlds(true)",10);return}var f="../../../SaveActivityRequest";var h={action:"updateSrEscalation",json:dojo.toJson(a),srId:getActiveSrId(),queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber(),activityId:b};var m=genericTalkToServer(f,h,"json",null,120000,"post");m.addCallback(function(z,B){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(z.opStatus==0){dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=true;SRClosureProcess.setMesssage("Escalation is Updated");if(z.srData!=undefined){setHeaderJSONFromResponse(z.srData);SRClosureProcess.updateSRLastUpdated(window.headerDataAsJson.UpdatedRelativeDate)}var u=z.activities;if(u!=undefined&&u.length>0){for(i=0;i<u.length;i++){var y=u[i];var q=y.activityId;SRClosureProcess.toggleEscalationInput(q,false);var s="";if(y.category!=undefined){s="Category updated to '"+y.category+"'"}if(y.resolutionCode!=undefined){s=(s.length!=0)?(s+", Resolution updated to '"+y.resolutionCode+"'"):("Resolution updated to '"+y.resolutionCode+"'")}if(s.length==0){s="Escalation is updated."}var p=dojo.query(".successMsg",l);if(p!=undefined&&p.length==2){var v=p[1];v.innerHTML=s}if(y.instruction!=undefined){var E=dojo.byId("instructionrow_"+q);if(E!=undefined){dojo.style(E,"display","")}var w=dojo.byId("instruction_"+q);if(w!=undefined){SRClosureProcess.attachDetailNodeCell(w,y.instruction)}var A=dojo.byId("updatedrow_"+q);if(A!=undefined){dojo.style(A,"display","")}var x=SRClosureProcess.getLatestDateCellId(q);if(dojo.byId(x)){dojo.byId(x).innerHTML=y.CreatedRelativeDate}}if(y.escalationStatus=="Escalation Resolved"){var D=dojo.byId("escalationStatus_"+q);if(D!=undefined){D.disabled=true}var o="closedEsc_"+q;dojo.style(dojo.byId(o),{display:""})}var C="instructionText_"+q;if(dijit.byId(C)){setFieldVal(C,"")}if(dijit.byId("publishInstruction_"+q)){dijit.byId("publishInstruction_"+q).setAttribute("checked",false)}}}SRClosureProcess.unmarkStep3Flds(b)}else{displayErrors(z)}});m.addErrback(function(o){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}console.error("An error occurred: ",o)})};SRClosureProcess.toggleEscalationInput=function(b,a){var g=dojo.byId("srEsc_"+b);var f=dojo.query(".inputRow",g);if(f!=undefined){for(i=0;i<f.length;i++){var h=f[i];dojo.style(h,"display",(a?"":"none"))}}var f=dojo.query(".statusRow",g);if(f!=undefined){for(i=0;i<f.length;i++){var h=f[i];dojo.style(h,"display",(!a?"":"none"))}}};SRClosureProcess.step5=function(){var y=document.createElement("table");dojo.attr(y,CLOSURE_DIALOG_TABLE_ATTR);var M=document.createElement("tbody");var R=document.createElement("tr");var h=document.createElement("td");dojo.attr(h,{colSpan:step1Cols});var G=document.createElement("span");dojo.style(G,"padding","3px");h.appendChild(G);var z=document.createElement("span");dojo.addClass(z,"closureStepHeaderClass");dojo.style(z,{"vertical-align":"middle"});var F=document.createTextNode("Classify Related Defects and SRs");z.appendChild(F);h.appendChild(z);var o=SRClosureProcess.pageTitleHelp(SR_CLOSURE_STEP5_ID);h.appendChild(o);R.appendChild(h);dojo.attr(R,{align:"left"});M.appendChild(R);var l=document.createElement("tr");dojo.attr(l,{align:"left"});var p=document.createElement("td");dojo.attr(p,{colSpan:step1Cols});var D=document.createElement("span");dojo.style(D,"padding","3px");p.appendChild(D);var C=document.createElement("span");var I=document.createTextNode("Please categorize the following links that were detected or attached to the SR");C.appendChild(I);p.appendChild(C);l.appendChild(p);M.appendChild(l);var L=SRClosureProcess.step5_createAddNewButtonsRow();M.appendChild(L);var a=SRClosureProcess.step5_createAddNewTCRow();M.appendChild(a);M.appendChild(SRClosureProcess.createSeparator());var s=SRClosureProcess.step5_createTableWithId("EngRsr_Bug",M);var q=s.firstChild;var S=SRClosureProcess.step5_createTableWithId("EngRsr_RelSr",M);var u=S.firstChild;M.appendChild(SRClosureProcess.createSeparator());var A=new srmdojoc.layout.SRTechTitlePane({title:"show"});A.startup();dojo.connect(A,"toggle",function(){SRClosureProcess.step5_setClassifiedTitlePane(this)});var E=document.createElement("tr");var K=document.createElement("td");K.appendChild(A.domNode);E.appendChild(K);M.appendChild(E);var x=SRClosureProcess.step5_createTableWithId("NonEngRsr_Bug");var v=x.firstChild;A.setContent(x);var O=SRClosureProcess.step5_createTableWithId("NonEngRsr_RelSr");var B=O.firstChild;A.containerNode.appendChild(O);A.refresh();A.toggle();y.appendChild(M);if(dijit.byId(SR_CLOSURE_STEP5_ID)){dijit.byId(SR_CLOSURE_STEP5_ID).setContent(y)}dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout();var b=SRClosureProcess.loadClassifications("DEFECT_CLASSIFICATION");if(b!=undefined){b.addCallback(function(W){var T=function(){var ae=dojo.filter(W.items,function(af){return af.id!=ENGINEER_RESEARCH});return ae};relatedBugStore=new dojo.data.ItemFileReadStore({id:"relatedBugStore",jsId:"relatedBugStore",data:{identifier:W.identifier,items:T()}});var aa=dijit.byId("addMissingBCCenter_"+CHILD_TYPE_BUG);aa.setContent(SRClosureProcess.step5_addInputForAddMissing(CHILD_TYPE_BUG));var V=dijit.byId("addMissingBugSr_TC");var ab=dijit.byId("addMissingCP_"+CHILD_TYPE_BUG);ab.resize();V.layout();if(SRClosureProcess.hasOpenDefects()==true){var U=SRClosureProcess.filterBugs(ENGINEER_RESEARCH);for(i=0;i<U.length;i++){var ac=U[i];var Z=ac.id;var Y=ac.abstractText;var X=ac.classification;var ad=ac.originalNumber;q.appendChild(SRClosureProcess.step5_displayUnclassifiedBugsSrs(relatedBugStore,Y,Z,X,CHILD_TYPE_BUG,ad))}}})}var f=SRClosureProcess.loadClassifications("RELATEDSR_CLASSIFICATION");if(f!=undefined){f.addCallback(function(V){var T=function(){var ac=dojo.filter(V.items,function(ad){return ad.id!=ENGINEER_RESEARCH});return ac};relatedSrStore=new dojo.data.ItemFileReadStore({id:"relatedSrStore",jsId:"relatedSrStore",data:{identifier:V.identifier,items:T()}});var Y=dijit.byId("addMissingBCCenter_"+CHILD_TYPE_SR);Y.setContent(SRClosureProcess.step5_addInputForAddMissing(CHILD_TYPE_SR));Y.resize();var U=dijit.byId("addMissingBugSr_TC");U.layout();var aa=SRClosureProcess.filterSrs(ENGINEER_RESEARCH);if(aa!=null){for(i=0;i<aa.length;i++){var ab=aa[i];var X=ab.name;var Z=ab.summary;var W=ab.classification;u.appendChild(SRClosureProcess.step5_displayUnclassifiedBugsSrs(relatedSrStore,Z,X,W,CHILD_TYPE_SR,null))}}})}if(SRClosureProcess.hasAllExceptEngineerResearchSrs()==true){var w=SRClosureProcess.filterSrs(ENGINEER_RESEARCH,false);if(w!=null&&w.length>0){for(i=0;i<w.length;i++){var J=w[i];var P=J.summary;var Q=J.classification;var N=J.name;B.appendChild(SRClosureProcess.step5_displayClassifiedBugsSrs(P,N,Q,CHILD_TYPE_SR,null))}}}if(SRClosureProcess.hasAllExceptEngineerResearchDefects()==true){var g=SRClosureProcess.filterBugs(ENGINEER_RESEARCH,false);if(g!=null&&g.length>0){for(i=0;i<g.length;i++){var H=g[i];var P=H.abstractText;var Q=H.classification;var N=H.id;var m=H.originalNumber;v.appendChild(SRClosureProcess.step5_displayClassifiedBugsSrs(P,N,Q,CHILD_TYPE_BUG,m))}}}};SRClosureProcess.loadClassifications=function(a){var b={url:"../../../SRHeaderRequest",content:{lov:a,action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(f){return f}};return dojo.xhrGet(b)};SRClosureProcess.displayDefectClassification=function(l,s,q,a){var h="defectClassification_"+a;var b=h+"Row";var v=document.createElement("tr");dojo.attr(v,{id:b});var u=document.createElement("td");var p=document.createElement("table");dojo.style(p,{width:"100%"});var f=document.createElement("tbody");var o=document.createElement("tr");var g=document.createElement("td");dojo.attr(g,{align:"left"});dojo.style(g,"width","20%");dojo.addClass(g,"srHeaderLabel");g.appendChild(document.createTextNode(s));o.appendChild(g);var m=document.createElement("td");dojo.attr(m,{align:"left",width:"80%",nowrap:"nowrap"});dojo.forEach(l.items,function(z){if(z.id!=ENGINEER_RESEARCH){var w=document.createElement("input");var y=new dijit.form.RadioButton({name:h,checked:(!isEmptyVal(q)&&z.id==q)?true:false,value:z.id},w);m.appendChild(y.domNode);var x=document.createElement("label");x.innerHTML=z.name;m.appendChild(x)}});o.appendChild(m);f.appendChild(o);p.appendChild(f);u.appendChild(p);v.appendChild(u);return v};SRClosureProcess.displaySrClassification=function(m,v,a){var h="srClassification_"+a;var b=h+"Row";var x=document.createElement("tr");dojo.attr(x,{id:b});var w=document.createElement("td");var q=document.createElement("table");dojo.style(q,{width:"100%"});var f=document.createElement("tbody");var p=document.createElement("tr");var g=document.createElement("td");dojo.attr(g,{align:"left"});dojo.style(g,"width","10%");dojo.addClass(g,"srHeaderLabel");g.appendChild(document.createTextNode("Classify SR"));p.appendChild(g);var o=document.createElement("td");dojo.attr(o,{align:"left",width:"20%",nowrap:"nowrap"});var u=document.createElement("input");var s=new dijit.form.FilteringSelect({id:h,name:h,searchAttr:"id",store:m},u);o.appendChild(s.domNode);p.appendChild(o);var l=document.createElement("td");dojo.attr(l,{align:"left",width:"70%",nowrap:"nowrap"});l.appendChild(document.createTextNode(v));p.appendChild(l);f.appendChild(p);q.appendChild(f);w.appendChild(q);x.appendChild(w);return x};SRClosureProcess.retrieveChildSrLastActivity=function(b,g){var a="../../../SRRequest";var f={action:"queryChildSrLastActivity",srId:b,srNumber:g};var h=genericTalkToServer(a,f,"json",true,120000,"post");h.addCallback(function(m,l){SRClosureProcess.processChildSrActivity(b,m)})};SRClosureProcess.processChildSrActivity=function(f,h){var m=SRClosureProcess.getLatestTextCellId(f);var b=h.items;if(h!=undefined&&h.detail!=undefined){var l=h.detail;var a=truncateString(l,SRClosureProcess.maxCommentsLimit);var g=(a.length==l.length)?null:SRClosureProcess.seeDetailsNode();var o=dojo.byId(m);o.innerHTML=a.replace(/\n/g,"<br/>");if(g!=null){o.appendChild(document.createTextNode("\xa0\xa0\xa0\xa0"));o.appendChild(g);dojo.connect(g,"onclick",function(){var p=g.parentNode;if(p!=undefined){p.innerHTML=l.replace(/\n/g,"<br/>")}})}}};SRClosureProcess.updateChildSr=function(b,h,f){dijit.byId("pleasewait").show();var m=dijit.byId(SRClosureProcess.getStatusChkBoxId(b)).getValue();var a="../../../SRRequest";var g={action:"updateChildSr",srId:b,srNumber:h,substatus:(m!=false)?m:"",comments:getFieldVal(SRClosureProcess.getInputTextFldId(b))};var l=genericTalkToServer(a,g,"json",true,120000,"post");l.addCallback(function(q,o){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}setFieldVal(SRClosureProcess.getInputTextFldId(b),"");if(q.status=="SUCCESS"){dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=true;if(!isEmptyVal(f)){SRClosureProcess.setMesssage(f+" is Updated")}setFieldVal(SRClosureProcess.getHiddenFldId(b),q.activityId);SRClosureProcess.retrieveChildById(getActiveSrId(),getSrNumber(),b,CHILD_TYPE_CHILDREN_SR);var u="addUpdate_"+b;if(dojo.byId(u)){dojo.style(dojo.byId(u),{display:""});dojo.byId(u).innerHTML="Send Another Update"}var p=SRClosureProcess.getInputTextRowId(b);if(!isEmptyVal(p)&&dojo.byId(p)){dojo.style(dojo.byId(p),{display:"none"})}var s=SRClosureProcess.getStatusImgId(b);if(dojo.byId(s)){dojo.style(dojo.byId(s),{display:""})}SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD+SRClosureProcess.getInputTextFldId(b),false);SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD+SRClosureProcess.getStatusChkBoxId(b),false)}else{displayErrors(q)}});l.addErrback(function(o){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}console.error("An error occurred: ",o)})};SRClosureProcess.retrieveChildById=function(f,l,h,a){var b="../../../SRRequest";var g={action:"queryChildById",srId:f,srNumber:l,childId:h,refType:a};var m=genericTalkToServer(b,g,"json",true,120000,"post");m.addCallback(function(p,o){if(p.status=="SUCCESS"){SRClosureProcess.processChildLastUpdate(h,p);SRClosureProcess.processChildLastSubstatus(h,p)}})};SRClosureProcess.processChildLastUpdate=function(h,g){if(g!=undefined){var b=g.UpdatedRelativeDate;b=isEmptyVal(g.dateStr)?g.lastUpdated:b;var f=SRClosureProcess.getLatestDateCellId(h);var a=dojo.byId(f);if(a!=undefined){a.innerHTML=b}}};SRClosureProcess.processChildLastSubstatus=function(g,f){if(f!=undefined){var h="\xa0\xa0("+f.substatus+")\xa0\xa0";var b=SRClosureProcess.getLatestStatusCellId(g);var a=dojo.byId(b);if(a!=undefined){a.innerHTML=h}}};SRClosureProcess.viewChildLinkNode=function(f,a){var b=document.createElement("a");dojo.attr(b,{style:"vertical-align:middle",href:"javascript:void(0);"});var a=document.createTextNode(a);b.appendChild(a);dojo.connect(b,"onclick",function(){SRClosureProcess.closeAndPositionChild(f)});return b};SRClosureProcess.closeAndPositionChild=function(a){if(dijit.byId(SR_CLOSURE_WIZARD)!=undefined){dijit.byId(SR_CLOSURE_WIZARD).hide()}if(a==CHILD_TYPE_FSTASK){referencePaneGroupFocus=CHILD_TYPE_FSTASK;refreshLastUsedReferencePaneArea()}else{if(a==CHILD_TYPE_CHILDREN_SR){referencePaneGroupFocus==CHILD_TYPE_CHILDREN_SR;refreshLastUsedReferencePaneArea()}else{if(a=="Escalation"){escalateSR()}}}};SRClosureProcess.connectOdmTextAreaEvent=function(a,f){if(a==undefined||isNaN(f)){return}var b=dojo.query("textarea",a);dojo.forEach(b,function(h){dojo.style(h,{height:"80px"});var l=function(){SRClosureProcess.limitText(h,f)};h.onkeyup=l;h.onkeydown=l;var g=function(){dojo.style(h,{height:"80px"})};h.onblur=g})};SRClosureProcess.limitText=function(b,a){if(b==undefined||isNaN(a)){return}if(b.value.length>a){b.value=b.value.substring(0,a)}};SRClosureProcess.step5_displayUnclassifiedBugsSrs=function(z,q,F,a,G,m){var D="";var I="";if(G==CHILD_TYPE_BUG){D="Classify Bug";I="bug_"}else{if(G==CHILD_TYPE_SR){D="Classify SR ";I="relatedSr_"}}var u=SRClosureProcess.step5_evaluateBugSrLabel(G,F,q,a,m);var f=I+F;var J=f+"_Row";var p=document.createElement("tr");dojo.attr(p,{id:J});var g=document.createElement("td");var s=document.createElement("table");dojo.style(s,{width:"100%"});var C=document.createElement("tbody");var K=document.createElement("tr");var l=document.createElement("td");dojo.attr(l,{align:"right"});dojo.style(l,{width:"70px"});dojo.addClass(l,"srHeaderLabel");l.appendChild(document.createTextNode(D));K.appendChild(l);var o=document.createElement("td");dojo.attr(o,{align:"right",width:"16px",nowrap:"nowrap"});var L=document.createElement("img");dojo.style(L,{"vertical-align":"middle"});dojo.attr(L,{src:"../images/requiredicon.gif",alt:"Required"});o.appendChild(L);K.appendChild(o);var B=document.createElement("td");dojo.attr(B,{align:"left",width:"180px",nowrap:"nowrap"});var x=document.createElement("input");var E=new dijit.form.FilteringSelect({id:f,name:f,searchAttr:"id",store:z},x);var H=true;if(a!=ENGINEER_RESEARCH){E.setValue(a)}dojo.connect(E,"onChange",this,dojo.hitch(this,SRClosureProcess.step5_classifyMe,H,G,f));B.appendChild(E.domNode);K.appendChild(B);var y=document.createElement("td");dojo.attr(y,{id:f+"_desc",align:"left"});y.appendChild(document.createTextNode(u));K.appendChild(y);var w=document.createElement("td");dojo.attr(w,{align:"left"});dojo.style(w,{display:"none"});var h=new dijit.form.TextBox({type:"hidden",id:(f+"_childType"),name:(f+"_childType"),value:G});w.appendChild(h.domNode);K.appendChild(w);var v=new dijit.form.TextBox({type:"hidden",id:(f+"_childNumber"),name:(f+"_childNumber"),value:F});w.appendChild(v.domNode);var A=new dijit.form.TextBox({type:"hidden",id:(f+"_summary"),name:(f+"_summary"),value:q});w.appendChild(A.domNode);var b=new dijit.form.TextBox({type:"hidden",id:(f+"_externalDefectNumber"),name:(f+"_externalDefectNumber"),value:m});w.appendChild(b.domNode);C.appendChild(K);s.appendChild(C);g.appendChild(s);p.appendChild(g);return p};SRClosureProcess.step5_displayClassifiedBugsSrs=function(p,o,h,l,u){var a="";if(l==CHILD_TYPE_BUG){a="Bug"}else{if(l==CHILD_TYPE_SR){a="SR"}}var s=SRClosureProcess.step5_evaluateBugSrLabel(l,o,p,h,u);var b="classified"+a+"_"+o+"Row";var w=document.createElement("tr");dojo.attr(w,{id:b});var v=document.createElement("td");var q=document.createElement("table");dojo.style(q,{width:"100%"});var f=document.createElement("tbody");var m=document.createElement("tr");var g=document.createElement("td");dojo.attr(g,{align:"left",width:"10%",nowrap:"nowrap"});g.appendChild(document.createTextNode(s));m.appendChild(g);f.appendChild(m);q.appendChild(f);v.appendChild(q);w.appendChild(v);return w};SRClosureProcess.step5_createTableWithId=function(l,b){var g=document.createElement("table");g.width="100%";g.id=l;var a=document.createElement("tbody");a.id=l+"_tbody";g.appendChild(a);var f=document.createElement("tr");dojo.attr(f,{align:"left"});var h=document.createElement("td");h.colspan=1;h.appendChild(g);f.appendChild(h);if(b!=undefined&&b!=null){b.appendChild(f)}return g};SRClosureProcess.step5_getNumberOfClassfiedItems=function(){var f=0;var a=0;var g=SRClosureProcess.filterSrs(ENGINEER_RESEARCH,false);if(g!=null&&g.length>0){a=g.length}var h=SRClosureProcess.filterBugs(ENGINEER_RESEARCH,false);if(h!=null&&h.length>0){f=h.length}var b=a+f;return b};SRClosureProcess.step5_setClassifiedTitlePane=function(a){var b=SRClosureProcess.step5_getNumberOfClassfiedItems();if(a.open==true){a.setTitle(HIDE_PREV_CLASSIFIED_ITEMS+" ("+b+")")}else{a.setTitle(SHOW_PREV_CLASSIFIED_ITEMS+" ("+b+")")}return};SRClosureProcess.step5_classifyMe=function(m,f,l,b){var g=dijit.byId(l+"_childType").getValue();var a={};a.childType=g;a.childNumber=dijit.byId(l+"_childNumber").getValue();a.externalDefectNumber=dijit.byId(l+"_externalDefectNumber").getValue();a.summary=dijit.byId(l+"_summary").getValue();a.classification=b;a.fsWidgetId=l;var h=a.childNumber;if((g==CHILD_TYPE_BUG)&&(m==true)){SRClosureProcess.step5_classifyDefect(h,b,a)}else{SRClosureProcess.step5_classifySrBug(true,g,h,b,a)}};SRClosureProcess.step5_classifyDefect=function(f,g,a){var b=false;dijit.byId("pleasewait").show();console.log("req mod id "+getSrModId());dojo.xhrPost({url:"../../../SRDefectRequest",content:{action:"updateClassificationOnly",id:f,classification:g,activeSR:getSrNumber(),modId:getSrModId(),queryTabName:getQueryTabName()},handleAs:"json",load:function(l,h){if(l.success=="true"){if(l.modId!=undefined){headerDataAsJson.modId=l.modId;setSrModId(headerDataAsJson.modId);console.log("mod id coming back "+getSrModId())}SRReferences.refreshReference(true,CHILD_TYPE_BUG);SRClosureProcess.step5_reloadUnclassifiedSection(a);dijit.byId("pleasewait").hide()}else{dijit.byId("pleasewait").hide();displayErrors(l)}},error:function(m,l){dijit.byId("pleasewait").hide();var h=getDisplayMessageObj("Failed to save classification data or operation timed out.",2);displayErrors(h);console.error("Failed to save classification data.")}})};SRClosureProcess.step5_classifySrBug=function(h,a,b,g,f){dijit.byId("pleasewait").show();dojo.xhrPost({url:"../../../SRHeaderRequest",preventCache:true,content:{action:(h?"update_sr_reference_link":"create_sr_reference_link"),referenceType:a,referenceLink:b,classification:g,queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber(),defectSource:(a==CHILD_TYPE_BUG&&h==false)?"BugDB":""},handleAs:"json",load:function(o,l){dijit.byId("pleasewait").hide();if(isObjectErroneous(o)){displayErrors(o)}else{isReferencePaneUpdate=true;SRReferences.refreshReference(true,a);if(h){SRClosureProcess.step5_reloadUnclassifiedSection(f)}else{SRClosureProcess.step5_hideAddMissingTC();var m=SRClosureProcess.step56_retrieveChildById(getActiveSrId(),getSrNumber(),b,a);m.addCallback(function(w){if(w.item!=undefined){if(a==CHILD_TYPE_SR){var u=w.item;var x=dojo.byId("EngRsr_RelSr_tbody");var v=SRClosureProcess.step5_displayUnclassifiedBugsSrs(relatedSrStore,u.summary,u.srNumber,u.classification,CHILD_TYPE_SR,null);dojo.place(v,x,"first")}else{if(a==CHILD_TYPE_BUG){var p=w.item;var s=dojo.byId("EngRsr_Bug_tbody");var q=SRClosureProcess.step5_displayUnclassifiedBugsSrs(relatedBugStore,p.summary,p.id,p.classification,CHILD_TYPE_BUG,p.externalDefectNumber);dojo.place(q,s,"first")}}}})}}},error:function(m,l){dijit.byId("pleasewait").hide();console.error("Failed to update/create related sr link")}})};SRClosureProcess.step5_reloadUnclassifiedSection=function(a){if(a!=undefined){var f=a.fsWidgetId+"_desc";var g=dojo.byId(f);var b=SRClosureProcess.step5_evaluateBugSrLabel(a.childType,a.childNumber,a.summary,a.classification,a.externalDefectNumber);g.innerHTML=b;return}};SRClosureProcess.step5_evaluateBugSrLabel=function(g,h,f,l,a){var m="";if(g==CHILD_TYPE_BUG){m="Bug";labelNumber=a}else{m="SR";labelNumber=h}var b=m+" "+labelNumber+" "+f+" ("+l+")";return b};SRClosureProcess.step5_createAddNewButtonsRow=function(){var g=document.createElement("tr");dojo.attr(g,{align:"left",id:"addMissingButtonsTR"});var h=document.createElement("td");dojo.attr(h,{align:"left"});var f=new dijit.form.Button({label:"Add Missing SR...",id:"addMissingSrButton",onClick:function(){SRClosureProcess.step5_displayAddMissingTC(CHILD_TYPE_SR)}});var b=new dijit.form.Button({label:"Add Missing Bug...",id:"addMissingBugButton",onClick:function(){SRClosureProcess.step5_displayAddMissingTC(CHILD_TYPE_BUG)}});h.appendChild(f.domNode);var a=dojo.doc.createElement("span");dojo.style(a,"paddingLeft","5px");dojo.style(a,"marginLeft","5px");dojo.parser.parse(a);h.appendChild(a);h.appendChild(b.domNode);g.appendChild(h);return g};SRClosureProcess.step5_createAddNewTCRow=function(){var b=new dijit.layout.TabContainer({id:"addMissingBugSr_TC",preventCache:true,style:"width: 610px; height: 150px;padding: 3px; margin: 3px;"});var g=document.createElement("tr");dojo.attr(g,{align:"left",width:"100%",id:"addMissingTabContainerTR"});var a=document.createElement("td");dojo.attr(a,{align:"left",width:"100%",id:"addMissingTabContainerTD"});a.appendChild(b.domNode);g.appendChild(a);var h=SRClosureProcess.step5_createAddNewTCContentPane(CHILD_TYPE_SR);b.addChild(h);h.startup;var f=SRClosureProcess.step5_createAddNewTCContentPane(CHILD_TYPE_BUG);b.addChild(f);f.startup;b.startup();b.layout();dojo.style(g,{display:"none"});return g};SRClosureProcess.step5_createAddMissingFS=function(f,b){var a=new dijit.form.FilteringSelect({id:"addMissingFS_"+f,name:"addMissingFS_"+f,searchAttr:"id",store:b});var g=dojo.byId("addMissingFSTd_"+f);g.appendChild(a.domNode);return a};SRClosureProcess.step5_associateArtifact=function(a,b,f){SRClosureProcess.step5_classifySrBug(false,a,b,f,null)};SRClosureProcess.step5_displayAddMissingTC=function(b){var a=dijit.byId("addMissingBugSr_TC");var f=dijit.byId("addMissingCP_"+b);a.selectChild(f);SRClosureProcess.step5_clearAddMissingSRBugUI(b);dojo.style(dojo.byId("addMissingTabContainerTR"),{display:"inline"});dojo.style(dojo.byId("addMissingButtonsTR"),{display:"none"});a.layout();SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_WIZARD).domNode)};SRClosureProcess.step5_hideAddMissingTC=function(){dojo.style(dojo.byId("addMissingTabContainerTR"),{display:"none"});dojo.style(dojo.byId("addMissingButtonsTR"),{display:"inline"});SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD,false)};SRClosureProcess.step56_retrieveChildById=function(g,l,a,f){var b="../../../SRRequest";var h={action:"queryChildById",srId:g,srNumber:l,refType:f};if(f==CHILD_TYPE_ERRMSG){h.childId=a}else{if(f==CHILD_TYPE_SR||f==CHILD_TYPE_BUG){h.childNumber=a}}console.log("request : "+h);var m=genericTalkToServer(b,h,"json",true,120000,"post");return m};SRClosureProcess.odmTrainOnClick=function(b){var g=SRClosureProcess.removeSpaces(b);var f=dojo.byId("td_"+g);if(f==undefined){return}var a=dojo.query("textarea",f);dojo.forEach(a,function(h){setTimeout(function(){h.focus()},0)})};SRClosureProcess.highlightIncompleteOdmSteps=function(h){var m=(h==CONSULTATIVE_TRAIN)?CONSULTATIVE_TEMPLATE_NODE:CORRECTIVE_TEMPLATE_NODE;var p=dojo.byId(ODM_DATA_TABLE).domNode;var s=dojo.query("."+m,p);for(i=0;i<s.length;i++){var g=false;var q=s[i];var a=dojo.query("[type=checkbox]",q);if(a!=undefined&&a.length==1){var l=a[0];var b=l.id;if(dijit.byId(b)&&!dijit.byId(b).checked){g=true}}var f=dojo.query(".commentsFld",q);if(f!=undefined&&f.length==1){var o=f[0];if(g){dojo.addClass(o,"warningHighlight")}else{dojo.removeClass(o,"warningHighlight")}}}};SRClosureProcess.setDefaultFocusForStep2=function(g){var m=(g==CONSULTATIVE_TRAIN)?CONSULTATIVE_TEMPLATE_NODE:CORRECTIVE_TEMPLATE_NODE;var u=dojo.byId(ODM_DATA_TABLE).domNode;var w=dojo.query("."+m,u);for(i=0;i<w.length;i++){var f=false;var v=w[i];var a=dojo.query("[type=checkbox]",v);if(a!=undefined&&a.length==1){var h=a[0];var b=h.id;if(dijit.byId(b)&&!dijit.byId(b).checked){f=true}}var l=dojo.query("[type=hidden]",v);if(l!=undefined&&l.length>0){for(n=0;n<l.length;n++){var s=l[n];var q=s.value;if(q!=undefined&&q.contains("activityId_")){q=q.replace(/activityId_/ig,"");if(isEmptyVal(q)){f=true}}}}if(f==true){var o=dojo.query("textarea",v);if(o!=undefined&&o.length==1){var p=o[0];setTimeout(function(){p.focus()},0);break}}}};var step4Cols=2;SRClosureProcess.step4=function(){var x=document.createElement("table");dojo.attr(x,{width:"100%",cellSpacing:6,cellPadding:3});var h=document.createElement("tbody");var g=document.createElement("tr");var f=document.createElement("td");dojo.attr(f,{colSpan:step4Cols});var l=document.createElement("span");dojo.style(l,"padding","3px");f.appendChild(l);var s=document.createElement("span");dojo.addClass(s,"closureStepHeaderClass");dojo.style(s,{"vertical-align":"middle"});var v=document.createTextNode("Close Collaboration/Translation SRs and RFCs");s.appendChild(v);f.appendChild(s);var m=SRClosureProcess.pageTitleHelp(SR_CLOSURE_STEP4_ID);f.appendChild(m);g.appendChild(f);dojo.attr(g,{align:"left"});h.appendChild(g);var u=document.createElement("tr");dojo.attr(u,{align:"left"});var o=document.createElement("td");dojo.attr(o,{colSpan:step4Cols});var q=document.createElement("span");dojo.style(q,"padding","3px");o.appendChild(q);var w=document.createElement("span");var b=document.createTextNode("Collaborations will be auto-updated that this SR is being closed. Optionally, add additional details. RFCs can remain open, if needed.");w.appendChild(b);o.appendChild(w);u.appendChild(o);h.appendChild(u);if(SRClosureProcess.hasOpenCollab()){for(i=0;i<SRClosureProcess.openSrRefs[CHILD_TYPE_CHILDREN_SR].length;i++){var a=SRClosureProcess.openSrRefs[CHILD_TYPE_CHILDREN_SR][i];var z=SRClosureProcess.step4_getCollabTranslationRow(a);var p=SRClosureProcess.step4_getCollabTranslationUpdateRow(a);h.appendChild(z);h.appendChild(p)}}if(SRClosureProcess.hasOpenRfcs()&&SRClosureProcess.hasOpenCollab()){h.appendChild(SRClosureProcess.createSeparator(step4Cols))}if(SRClosureProcess.hasOpenRfcs()){h.appendChild(SRClosureProcess.step4_getRfcHeaderRow());for(i=0;i<SRClosureProcess.openSrRefs[CHILD_TYPE_RFC].length;i++){var y=SRClosureProcess.openSrRefs[CHILD_TYPE_RFC][i];var z=SRClosureProcess.step4_getRfcRow(y);h.appendChild(z)}}x.appendChild(h);if(dijit.byId(SR_CLOSURE_STEP4_ID)){dijit.byId(SR_CLOSURE_STEP4_ID).setContent(x)}dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout();SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_WIZARD).domNode)};SRClosureProcess.getStatusImgId=function(a){return"statusImg_"+a};SRClosureProcess.step4_getCollabTranslationRow=function(l){if(l==undefined){return}var a=l.id;var m=l.name;var g=l.substatus;var o=l.type;var x=document.createElement("tr");var u=document.createElement("td");dojo.attr(u,{width:"16px"});var v=document.createElement("td");if(l.summary!=undefined&&l.substatus!=undefined){var h=document.createElement("img");dojo.attr(h,{id:SRClosureProcess.getStatusImgId(a),src:"../images/check_16.png",height:"16",width:"16",title:"Success",alt:"Success",style:"vertical-align:top;"});dojo.style(h,"display","none");u.appendChild(h);var q=document.createElement("a");dojo.attr(q,{style:"vertical-align:top;padding:2px;margin:2px;",href:l.href,target:l.href_target});var w=SRClosureProcess.step4_getRowLabel(o);q.appendChild(document.createTextNode("("+w+") "+l.summary));v.appendChild(q);var s=document.createElement("span");var f=SRClosureProcess.getLatestStatusCellId(a);dojo.attr(s,{id:f});var b="("+l.substatus+")";s.appendChild(document.createTextNode("\xa0\xa0"+b+"\xa0\xa0"));v.appendChild(s);var p=document.createElement("a");dojo.attr(p,{id:"addUpdate_"+a,style:"vertical-align:top;padding:2px;margin:2px;",href:"#",onclick:function(){dojo.style(p,{display:"none"});var y=SRClosureProcess.getInputTextRowId(a);dojo.style(dojo.byId(y),{display:""});SRClosureProcess.step4_resetCollabInput(a,o)}});p.appendChild(document.createTextNode("Add an Update Now"));v.appendChild(p)}x.appendChild(u);x.appendChild(v);return x};SRClosureProcess.step4_getRowLabel=function(a){if(a==INTERNAL_COLLAB_SR){return"Internal Collaboration"}else{if(a==EXTERNAL_COLLAB_SR){return"External Collaboration"}else{if(a==TRANSLATION_SR){return"Translation"}}}};SRClosureProcess.step4_setDefaultText=function(h){var g=h.type;var f=h.id;var b=(g==TRANSLATION_SR)?"translation":"collaboration";var a="The main SR "+getSrNumber()+" is being closed. Consider if this "+b+" SR can now be closed.";setFieldVal(SRClosureProcess.getInputTextFldId(f),a)};SRClosureProcess.step4_isChildSRStatusUpdatable=function(a,b){if(isEmptyVal(a)||isEmptyVal(b)){return false}var f=true;if((a==EXTERNAL_COLLAB_SR||a==INTERNAL_COLLAB_SR)&&AWAITING_FIELD_AUTO_CLOSE_STATUS==b){f=false}return f};SRClosureProcess.step4_getCollabTranslationUpdateRow=function(G){if(G==undefined){return}var F=G.id;var x=G.name;var y=G.substatus;var m=G.type;var p=document.createElement("tr");dojo.style(p,{display:"none"});var z=document.createElement("td");dojo.style(z,{width:"16px"});p.appendChild(z);var A=SRClosureProcess.getInputTextRowId(F);dojo.attr(p,{id:A});var g=document.createElement("td");var C=document.createElement("table");dojo.attr(C,{width:"100%",padding:"2px",margin:"2px"});var b=document.createElement("tbody");var B=SRClosureProcess.step4_isChildSRStatusUpdatable(m,y);var a=(m==INTERNAL_COLLAB_SR)?"Close Initiated":"Review Update";var u=document.createTextNode("Set "+m+" to '"+a+"' ");var f=document.createElement("tr");var l=document.createElement("td");if(B){var D=new dijit.form.CheckBox({id:SRClosureProcess.getStatusChkBoxId(F),value:a,checked:true},"checkBox");l.appendChild(D.domNode);l.appendChild(document.createTextNode("\xa0\xa0"));l.appendChild(u)}f.appendChild(l);var h=document.createElement("td");dojo.attr(h,{width:"120px"});var q=document.createElement("a");dojo.attr(q,{style:"",href:"#",onclick:function(){dojo.style(p,{display:"none"});var H="addUpdate_"+F;dojo.style(dojo.byId(H),{display:""});SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD+SRClosureProcess.getInputTextFldId(F),false);SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD+SRClosureProcess.getStatusChkBoxId(F),false)}});q.appendChild(document.createTextNode("Cancel"));h.appendChild(q);f.appendChild(h);b.appendChild(f);var E=document.createElement("tr");var w=document.createElement("td");var o=createSimpleTextArea(SRClosureProcess.getInputTextFldId(F),"width:95%;","3");w.appendChild(o.domNode);var v=document.createElement("td");dojo.attr(v,{width:"120px"});var s=new dijit.form.Button({label:"Update"});dojo.connect(s,"onClick",function(){SRClosureProcess.updateChildSr(F,x,m)});v.appendChild(s.domNode);E.appendChild(w);E.appendChild(v);b.appendChild(E);C.appendChild(b);g.appendChild(C);p.appendChild(g);return p};SRClosureProcess.step4_resetCollabInput=function(a,f){var h=SRClosureProcess.getInputTextFldId(a);var b=SRClosureProcess.getStatusChkBoxId(a);if(dijit.byId(b)){dijit.byId(b).setAttribute("checked",true)}if(dijit.byId(h)){var g={};g.id=a;g.type=f;SRClosureProcess.step4_setDefaultText(g)}};SRClosureProcess.step4_getRfcRow=function(l){if(l==undefined){return}var o=document.createElement("tr");var b=document.createElement("td");dojo.style(b,{width:"16px"});o.appendChild(b);var a=document.createElement("td");if(l.name!=undefined){var g=document.createElement("a");dojo.attr(g,{style:"vertical-align:top;padding:2px;margin:2px;",href:l.href,target:l.href_target});var h="RFC "+l.name+"  "+l.description+" ("+l.type+")";g.appendChild(document.createTextNode(h));a.appendChild(g);var f=document.createElement("span");var m="\xa0\xa0("+l.substatus+")\xa0\xa0";f.appendChild(document.createTextNode(m));a.appendChild(f)}o.appendChild(a);return o};SRClosureProcess.step4_getRfcHeaderRow=function(){var g=document.createElement("tr");var a=document.createElement("td");dojo.attr(a,{colSpan:step4Cols});var b=document.createElement("span");dojo.style(b,"padding","2px");var f="Following RFCs are related. No action is required on the RFCs to close this SR";b.appendChild(document.createTextNode(f));a.appendChild(b);g.appendChild(a);return g};SRClosureProcess.invokeStep4Nav=function(b){var a=SRUtils.showDialogModifiedAlert(dijit.byId(SR_CLOSURE_WIZARD).domNode);if(a==-1){return}SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);SRClosureProcess.handleTabNavigation(SR_CLOSURE_STEP4_ID,b)};SRClosureProcess.step6=function(){var y=document.createElement("table");dojo.attr(y,CLOSURE_DIALOG_TABLE_ATTR);var a=document.createElement("tbody");var u=document.createElement("tr");var v=document.createElement("td");dojo.attr(v,{colspan:step1Cols});var o=document.createElement("span");dojo.style(o,"padding","3px");v.appendChild(o);var x=document.createElement("span");dojo.addClass(x,"closureStepHeaderClass");dojo.style(x,{"vertical-align":"middle"});var s=document.createTextNode("Tag Errors");x.appendChild(s);v.appendChild(x);var A=SRClosureProcess.pageTitleHelp(SR_CLOSURE_STEP6_ID);v.appendChild(A);u.appendChild(v);dojo.attr(u,{align:"left"});a.appendChild(u);var q=document.createElement("tr");dojo.attr(q,{align:"left"});var m=document.createElement("td");dojo.attr(m,{colSpan:step1Cols});var h=document.createElement("span");dojo.style(h,"padding","3px");m.appendChild(h);var w=document.createElement("span");var p=document.createTextNode("Tag to help us track errors that were related to this issue. Engineers will thank you.");w.appendChild(p);m.appendChild(w);q.appendChild(m);a.appendChild(q);var b=SRClosureProcess.step6_createAddNewButtonsRow();a.appendChild(b);var l=SRClosureProcess.step6_createAddNewErrorTCRow();a.appendChild(l);a.appendChild(SRClosureProcess.createSeparator());var z=SRClosureProcess.step5_createTableWithId("All_Error",a);var g=z.firstChild;var f=SRClosureProcess.getErrors();dojo.forEach(f,function(B){g.appendChild(SRClosureProcess.step6_displayError(B))});y.appendChild(a);if(dijit.byId(SR_CLOSURE_STEP6_ID)){dijit.byId(SR_CLOSURE_STEP6_ID).setContent(y)}dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout();SRClosureProcess.step6_addMissingErrorInputWidgets(CHILD_TYPE_ERRMSG)};SRClosureProcess.step6_createAddNewButtonsRow=function(){var b=document.createElement("tr");dojo.attr(b,{align:"left",id:"addMissingErrorButtonsTR"});var f=document.createElement("td");dojo.attr(f,{align:"left"});var a=new dijit.form.Button({label:"Add Missing Error...",id:"addMissingErrorButton",onClick:function(){SRClosureProcess.step6_displayAddMissingTC(CHILD_TYPE_ERRMSG)}});f.appendChild(a.domNode);b.appendChild(f);return b};SRClosureProcess.getErrors=function(){if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_ERRMSG]==undefined){return null}var a=new Array();var f=SRClosureProcess.openSrRefs[CHILD_TYPE_ERRMSG];for(i=0;i<f.length;i++){var b=f[i];a.push(b)}return a};SRClosureProcess.step6_displayError=function(x){var a=(new Date()).getTime().toString();var E=x.uid.replace(validIdRegExp,"");var z="error_";var b=z+a+"_"+E;var A=b+"_Row";var s=b+"_Tag";var g=b+"_Untag";var m=document.createElement("tr");dojo.attr(m,{id:A});var f=document.createElement("td");var o=document.createElement("table");dojo.style(o,{width:"100%"});var v=document.createElement("tbody");var C=document.createElement("tr");var h=document.createElement("td");dojo.attr(h,{align:"left",width:"15%",valign:"top",id:(b+"_actionTd")});dojo.addClass(h,"srHeaderLabel");var D=SRClosureProcess.step6Actions(x,b);h.appendChild(D);C.appendChild(h);var B=document.createElement("td");dojo.attr(B,{align:"left",width:"5px",valign:"top"});C.appendChild(B);var u=document.createElement("td");dojo.attr(u,{align:"left",valign:"top"});u.appendChild(document.createTextNode(x.id+" - "+x.summary));C.appendChild(u);var y=x.href;var l=x.href_target;var p=document.createElement("img");dojo.attr(p,{style:"vertical-align: middle;",src:"../images/read_16.png",alt:"View Error Message Details"});var w=document.createElement("a");dojo.attr(w,{href:y,target:l,title:"View Error Message Details"});w.appendChild(p);var q=document.createElement("span");dojo.style(q,"padding","2px");if(y!=undefined){u.appendChild(q);u.appendChild(w)}v.appendChild(C);o.appendChild(v);f.appendChild(o);m.appendChild(f);return m};SRClosureProcess.step56_classifyOneReference=function(h,a,b,g){dijit.byId("pleasewait").show();var f="../../../SRHeaderRequest";var l={action:(h?"update_sr_reference_link":"create_sr_reference_link"),referenceType:a,referenceLink:b,classification:g,queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber(),defectSource:(a==CHILD_TYPE_BUG&&h==false)?"BugDB":""};var m=genericTalkToServer(f,l,"json",true,null,"post");m.addCallback(function(p,o){dijit.byId("pleasewait").hide();if(isObjectErroneous(p)){displayErrors(p)}else{isReferencePaneUpdate=true;SRReferences.refreshReference(true,a)}return p});m.addErrback(function(p,o){hidePleaseWaitDialog();displayErrors(p);console.debug("Failed to update/create related sr link "+p.status);return p});return m};SRClosureProcess.step6Actions=function(a,m){var b=m+"_Tag";var f=m+"_Untag";var l=m+"_ActionSpan";var p=document.createElement("span");dojo.attr(p,{style:"vertical-align:top",id:l});var s=document.createElement("span");dojo.attr(s,{id:b});dojo.style(s,{"vertical-align":"top",display:((a.classification!=RELATED_TO_ISSUE)?"":"none")});var u=document.createElement("a");dojo.attr(u,{href:"#"});dojo.addClass(u,"SRClosureStep6ActionLink");u.onclick=dojo.hitch(this,function(x,A,y){var z=SRClosureProcess.step56_classifyOneReference(true,CHILD_TYPE_ERRMSG,x.uid,RELATED_TO_ISSUE);z.addCallback(function(C,B){hidePleaseWaitDialog();if(C.opStatus==SUCCESS_STATUS){SRClosureProcess.step6_makeSpanActionTag(A,false)}return C})},a,m);u.innerHTML=TAG_AS_RELATED_TO_ISSUE;s.appendChild(u);p.appendChild(s);var q=document.createElement("span");dojo.attr(q,{id:f});dojo.style(q,{"vertical-align":"top",display:((a.classification==RELATED_TO_ISSUE)?"":"none")});var h=document.createElement("img");dojo.attr(h,{style:"vertical-align:middle;",src:"../images/check_16.png",alt:RELATED_TO_ISSUE});var w=document.createElement("span");dojo.style(w,"padding","2px");var g=document.createTextNode(RELATED_TO_ISSUE);var o=document.createElement("a");dojo.attr(o,{href:"#"});dojo.addClass(o,"SRClosureStep6ActionLink");o.onclick=dojo.hitch(this,function(x,A,y){var z=SRClosureProcess.step56_classifyOneReference(true,CHILD_TYPE_ERRMSG,x.uid,REFERENCED);z.addCallback(function(C,B){hidePleaseWaitDialog();if(C.opStatus==SUCCESS_STATUS){SRClosureProcess.step6_makeSpanActionTag(A,true)}return C})},a,m);o.innerHTML=UNDO;var v=document.createElement("span");dojo.style(v,"padding","2px");q.appendChild(h);q.appendChild(w);q.appendChild(g);q.appendChild(v);q.appendChild(o);p.appendChild(q);return p};SRClosureProcess.step6_makeSpanActionTag=function(m,h){var l=m+"_Tag";var o=m+"_Untag";if(h==true){var g=dojo.byId(l);if(g!=undefined){dojo.style(g,{display:""})}var f=dojo.byId(o);if(f!=undefined){dojo.style(f,{display:"none"})}}else{var g=dojo.byId(l);if(g!=undefined){dojo.style(g,{display:"none"})}var f=dojo.byId(o);if(f!=undefined){dojo.style(f,{display:""})}}return};SRClosureProcess.step6_createAddNewErrorTCRow=function(){var g=document.createElement("tr");dojo.attr(g,{align:"left",width:"100%",id:"addMissingErrorTabContainerTR"});var b=document.createElement("td");dojo.attr(b,{align:"left",width:"100%"});var f=new dijit.layout.ContentPane({id:"addMissingCP_"+CHILD_TYPE_ERRMSG,title:"Add Missing Error ...",style:"width: 550px;height: 110px;padding: 1px; margin: 2px;overflow:hidden;"});var a=new dijit.layout.TabContainer({id:"addMissingError_TC",preventCache:true,style:"width: 580px; height: 150px;padding: 3px; margin: 3px;"});f.setContent(SRClosureProcess.step6_createAddMissingErrorPC(CHILD_TYPE_ERRMSG));a.addChild(f);b.appendChild(a.domNode);g.appendChild(b);a.startup();a.layout();dojo.style(g,{display:"none"});return g};SRClosureProcess.step6_createAddMissingErrorPC=function(w){var y="Error #";var A="Add Error";var B=document.createElement("table");dojo.attr(B,CLOSURE_DIALOG_TABLE_ATTR);var a=document.createElement("tbody");var u=document.createElement("tr");var x=document.createElement("td");dojo.attr(x,{colSpan:3,cellpadding:"5px",width:"100%"});var g=document.createElement("div");dojo.style(g,{padding:"2px",height:"20px"});x.appendChild(g);u.appendChild(x);dojo.attr(u,{align:"left"});a.appendChild(u);var q=document.createElement("tr");dojo.attr(q,{align:"left",id:"addMissingInput_"+w});a.appendChild(q);var p=document.createElement("tr");dojo.attr(p,{id:"addMissingErrorMsgTR_"+w});var v=document.createElement("td");dojo.attr(v,{colSpan:3,cellpadding:"5px",width:"100%"});var b=document.createElement("div");var z="";var h=document.createTextNode(z);dojo.attr(b,{id:"addMissingErrorMsgSpan_"+w});dojo.style(b,{padding:"2px",height:"25px"});b.appendChild(h);v.appendChild(b);p.appendChild(v);dojo.attr(p,{align:"left"});a.appendChild(p);var f=document.createElement("tr");dojo.attr(f,{align:"left"});var m=document.createElement("td");dojo.attr(m,{align:"left",nowrap:"nowrap",colspan:"2"});var s=new dijit.form.Button({label:"Cancel"});dojo.connect(s,"onClick",this,dojo.hitch(this,SRClosureProcess.step6_hideAddMissingTC,w));m.appendChild(s.domNode);var l=document.createElement("td");dojo.attr(l,{align:"right",nowrap:"nowrap"});var o=new dijit.form.Button({id:"addButton_"+w,label:A});dojo.connect(o,"onClick",this,dojo.hitch(this,function(I,C){var K=dijit.byId("addMissingNumber_"+w);var H=K.getValue();var F="";if(dojo.string.trim(H)==""){F+=y+" is required. "}if(dojo.string.trim(F)!=""){var D=dojo.byId("addMissingErrorMsgSpan_"+w);var E=document.createTextNode(F);D.innerHTML="";D.appendChild(E);return}if(dijit.byId("addMissingId_"+w)!=null){var G=dijit.byId("addMissingId_"+w);var J=SRClosureProcess.step56_classifyOneReference(false,CHILD_TYPE_ERRMSG,G.getValue(),RELATED_TO_ISSUE);J.addCallback(function(N,L){hidePleaseWaitDialog();if(N.opStatus==SUCCESS_STATUS){SRClosureProcess.step6_hideAddMissingTC();var M=SRClosureProcess.step56_retrieveChildById(getActiveSrId(),getSrNumber(),G.getValue(),CHILD_TYPE_ERRMSG);M.addCallback(function(Q){if(Q.opStatus==SUCCESS_STATUS&&Q.item!=undefined){var O=Q.item;var R=dojo.byId("All_Error_tbody");var P=SRClosureProcess.step6_displayError(O);dojo.place(P,R,"first")}})}return N})}},w));dojo.style(o.domNode,{display:"none"});l.appendChild(o.domNode);f.appendChild(m);f.appendChild(l);a.appendChild(f);B.appendChild(a);return B};SRClosureProcess.step6_addMissingErrorInputWidgets=function(p,a){var f="Error#";if(p==CHILD_TYPE_ERRMSG){f="Error# "}var w=document.createElement("span");var y=document.createTextNode(f);w.appendChild(y);var v=document.createElement("td");dojo.attr(v,{align:"left",nowrap:"nowrap"});v.appendChild(w);var m=document.createElement("img");dojo.style(m,{"vertical-align":"middle"});dojo.attr(m,{src:"../images/requiredicon.gif",alt:"Required"});v.appendChild(m);var g=new dijit.form.TextBox({id:"addMissingNumber_"+p,trim:"true",disabled:true});dojo.style(g.domNode,{width:"300px","font-weight":"normal","font-size":"8pt","padding-top":"5px"});var h=document.createElement("span");h.appendChild(g.domNode);v.appendChild(h);var s=new dijit.form.TextBox({id:"addMissingId_"+p,trim:"true",disabled:true,onChange:function(){if(dojo.string.trim(this.getValue())!=""){var z=dijit.byId("addButton_"+p);dojo.style(z.domNode,{display:""})}}});dojo.style(s.domNode,{display:"none"});var b=document.createElement("span");b.appendChild(s.domNode);v.appendChild(b);var o="addMissingInput_"+p;var x=dojo.byId(o);x.appendChild(v);var l=document.createElement("td");dojo.attr(l,{align:"middle",width:"1px",nowrap:"nowrap"});x.appendChild(l);var u=document.createElement("td");dojo.attr(u,{align:"right",nowrap:"nowrap"});if(p==CHILD_TYPE_ERRMSG){var q=new srmdojoc.layout.CustomButton({id:"browseErrorMessageBtn",label:"Browse Error Messages"});dojo.connect(q,"onClick",function(){SRClosureProcess.step6_getErrMsg()});u.appendChild(q.domNode)}x.appendChild(u)};SRClosureProcess.step6_onSelectErrMsg=function(){var g=dijit.byId("grid");if(g!=null&&g.selection.getSelected()!=null){var m=dijit.byId("grid").selection.getSelected()[0];var l=dijit.byId("grid").model.data[m];var h="addMissingId_"+CHILD_TYPE_ERRMSG;var a="addMissingNumber_"+CHILD_TYPE_ERRMSG;if(dijit.byId(h)!=undefined){dijit.byId(h).setValue(l.messageId)}if(dijit.byId(a)!=undefined){dijit.byId(a).setValue(l.messageNumber);dijit.byId(a).setAttribute("title",l.messageNumber+" - "+l.messageText)}var f="addMissingErrorMsgSpan_"+CHILD_TYPE_ERRMSG;dojo.byId(f).innerHTML=l.messageText;dojo.byId(f).title=l.messageText;var b=dijit.byId("lovDialog");if(b!=null&&b.open){b.hide()}}};SRClosureProcess.step6_getErrMsg=function(){var b="errorMessage";var a="SRClosureProcess.step6_onSelectErrMsg()";setLovDialog(b,[],"","","Error Message",a)};SRClosureProcess.step6_displayAddMissingTC=function(g){var p=dijit.byId("addMissingError_TC");var m=dijit.byId("addMissingCP_"+g);p.selectChild(m);var q=dijit.byId("addMissingNumber_"+g);q.reset();var l=dijit.byId("addMissingId_"+g);l.reset();var a=dojo.byId("addMissingErrorMsgSpan_"+g);a.innerHTML="";a.title="";dojo.style(dojo.byId("addMissingErrorTabContainerTR"),{display:"inline"});dojo.style(dojo.byId("addMissingErrorButtonsTR"),{display:"none"});var f="addButton_"+g;var o=dijit.byId(f);if(o!=undefined){dojo.style(o.domNode,{display:"none"})}var h=dijit.byId("browseErrorMessageBtn");if(h!=undefined){h.focusNode.focus()}p.layout();SRUtils.addOnChangeForOPDialog(dijit.byId(SR_CLOSURE_WIZARD).domNode)};SRClosureProcess.step6_hideAddMissingTC=function(){dojo.style(dojo.byId("addMissingErrorTabContainerTR"),{display:"none"});dojo.style(dojo.byId("addMissingErrorButtonsTR"),{display:""});SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD,false)};SRClosureProcess.step6_refreshAndCheckForCompletion=function(){var b={};b.refresh=true;b.retrieveAll=false;b.referenceType=new Array(CHILD_TYPE_ERRMSG);var a=SRClosureProcess.loadOpenSrRefs(b);a.addCallback(function(f){SRClosureProcess.setStepStatus(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),dijit.byId(SR_CLOSURE_STEP6_ID),((SRClosureProcess.hasOpenErrMsgs())?OPTIONAL_INCOMPLETE_STEP_STATUS:COMPLETED_STEP_STATUS))});return a};SRClosureProcess.loadRootcauseReasoncodeLOV=function(){var a={url:"../../../SRHeaderRequest",content:{lov:"ROOTCAUSE_REASONCODE",action:"loadLovRootcauseReasoncode",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(b){SRClosureProcess.setRootcauseReasoncodeMenu(b);return b},error:function(b){console.error("An error occurred: "+b);return b},timeout:20000};return dojo.xhrGet(a)};SRClosureProcess.setRootcauseReasoncodeMenu=function(b){var q=b;var m=b.items;var l=document.createElement("div");l.setAttribute("style","overflow:auto");if(dijit.byId("mainMenu")!=undefined){dijit.byId("mainMenu").destroyRecursive()}var v=new dijit.Menu({id:"mainMenu"},l);var u=((window.headerDataAsJson.RootCause!=null)&&(window.headerDataAsJson.RootCause!=""))?window.headerDataAsJson.RootCause:"";var o=((window.headerDataAsJson.ReasonCode!=null)&&(window.headerDataAsJson.ReasonCode!=""))?window.headerDataAsJson.ReasonCode:"Select reason code";var p=u+"--"+o;if(dijit.byId("rootcauseReasoncodeButtonDD")!=undefined){dijit.byId("rootcauseReasoncodeButtonDD").destroyRecursive()}var a=new dijit.form.DropDownButton({id:"rootcauseReasoncodeButtonDD",label:p,showLabel:true,dropDown:v});if(dijit.byId("dropDownButtonContainer")!=undefined){dijit.byId("dropDownButtonContainer").destroyRecursive()}dojo.byId("dropDownButtonContainer").appendChild(a.domNode);for(var x=0;x<m.length;x++){var g=m[x];var f=g.menuname;var s=g.menuitems;if(dijit.byId(f+"M")!=undefined){dijit.byId(f+"M").destroyRecursive()}var y=new dijit.Menu({parentMenu:"mainMenu",id:f+"M",label:f});for(var w=0;w<s.length;w++){var A=s[w];if(dijit.byId(A.menuname+"MI")!=undefined){dijit.byId(A.menuname+"MI").destroyRecursive()}var z=new dijit.MenuItem({id:A.menuname+"MI",parentMenu:y,label:A.menuname,onClick:function(B){var C=getFieldVal("reasonCodeCloned");var E=this["label"];var D=SR_CLOSURE_WIZARD+"reasonCodeCloned";if(E!=C){window.modifiedFlds.put(D,"true")}setFieldVal("rootCauseCloned",this["parentMenu"]["label"]);setFieldVal("reasonCodeCloned",E);dijit.byId("rootcauseReasoncodeButtonDD").setLabel(this["parentMenu"]["label"]+"--"+E)}});y.addChild(z)}if(dijit.byId(f+"PMI")!=undefined){dijit.byId(f+"PMI").destroyRecursive()}var h=new dijit.PopupMenuItem({id:f+"PMI",parentMenu:v,label:f,popup:y});v.addChild(h)}v.startup()};SRClosureProcess.getStepName=function(a){if(a==SR_CLOSURE_STEP1_ID){return TAB_REASON_FOR_CLOSE}if(a==SR_CLOSURE_STEP2_ID){return TAB_ODM}if(a==SR_CLOSURE_STEP3_ID){return TAB_CLOSE_ESC}if(a==SR_CLOSURE_STEP4_ID){return TAB_CLOSE_COLLABS}if(a==SR_CLOSURE_STEP5_ID){return TAB_CLASSIFY_RELATED}if(a==SR_CLOSURE_STEP6_ID){return TAB_TAG_ERRORS}if(a==SR_CLOSURE_STEP7_ID){return TAB_IDENTIFY_SOLUTION}if(a==SR_CLOSURE_STEP8_ID){return TAB_FINAL_REVIEW}return""};SRClosureProcess.warningFound=false;SRClosureProcess.errorFound=false;var step8Cols=2;SRClosureProcess.step8=function(){var p=headerDataAsJson.knownIssue;var y=window.headerDataAsJson.ReasonCode;var z=SRClosureProcess.readSubstatus();SRClosureProcess.errorFound=false;SRClosureProcess.warningFound=false;dijit.byId(SR_CLOSURE_STEP8_ID+"_closeSr").setAttribute("disabled",true);var H=document.createElement("table");dojo.attr(H,CLOSURE_DIALOG_TABLE_ATTR);var a=document.createElement("tbody");var B=document.createElement("tr");var D=document.createElement("td");dojo.attr(D,{colSpan:step8Cols});dojo.style(D,{padding:"5px"});var s=document.createElement("span");D.appendChild(s);var G=document.createElement("span");dojo.addClass(G,"closureStepHeaderClass");dojo.style(G,{"vertical-align":"middle"});var A=document.createTextNode("Review & Close SR");G.appendChild(A);D.appendChild(G);var K=SRClosureProcess.pageTitleHelp(SR_CLOSURE_STEP8_ID);D.appendChild(K);B.appendChild(D);dojo.attr(B,{align:"left"});a.appendChild(B);var x=document.createElement("tr");var o=document.createElement("td");dojo.attr(o,{colSpan:step8Cols});dojo.style(o,{padding:"5px"});var g=document.createElement("span");o.appendChild(g);var F=document.createElement("span");var w=document.createTextNode("Review and fix open issues.");F.appendChild(w);o.appendChild(F);x.appendChild(o);a.appendChild(x);if(!isEmptyVal(z)){var q=document.createElement("tr");var E=document.createElement("td");dojo.attr(E,{colSpan:step8Cols});dojo.style(E,{padding:"5px"});var v=document.createElement("span");var h=document.createTextNode("Substatus\xa0\xa0\xa0");dojo.addClass(v,"srHeaderLabel");v.appendChild(h);E.appendChild(v);var l=z+"\xa0\xa0\xa0";var C=document.createTextNode(l);E.appendChild(C);var m=SRClosureProcess.step8_fixErrorLink("Edit on Step '"+TAB_REASON_FOR_CLOSE+"'");dojo.connect(m,"onclick",function(){dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).selectChild(dijit.byId(SR_CLOSURE_STEP1_ID))});E.appendChild(m);q.appendChild(E);a.appendChild(q)}var J=document.createElement("tr");var f=document.createElement("td");dojo.attr(f,{colSpan:step8Cols});dojo.style(f,{padding:"5px"});var b=document.createElement("div");dojo.style(b,{color:"blue"});dojo.addClass(b,INDICATOR_CLASS);var u="Loading....";b.appendChild(document.createTextNode(u));f.appendChild(b);J.appendChild(f);a.appendChild(J);var I=SRClosureProcess.step8_refreshForCheck();if(I!=undefined){I.addCallback(function(M){dojo.style(b,{display:"none"});if(SRClosureProcess.isOdmStepVisible()){var T=SRClosureProcess.step8_createRow("Note: Share your experience with customer and colleagues by completing the missing steps.","WARNING",true,"Fill them in on Step '"+TAB_ODM+"'",SR_CLOSURE_STEP2_ID);a.appendChild(T)}if(SRClosureProcess.hasOpenCollab()){var T=SRClosureProcess.step8_createRow("Note: Collaboration SRs are pending review or closure. However, you can still close this SR.","WARNING",false,"",SR_CLOSURE_STEP4_ID);a.appendChild(T)}if(SRClosureProcess.hasOpenRfcs()){var T=SRClosureProcess.step8_createRow("Note: RFCs are pending review or closure. However, you can still close this SR.","WARNING",false,"",SR_CLOSURE_STEP4_ID);a.appendChild(T)}if(SRClosureProcess.isOutageInfoRequired(headerDataAsJson.productClass)&&!SRClosureProcess.confirmIfOutageFieldsPopulated(getFieldVal("SROutageTypeCloned"))){var T=SRClosureProcess.step8_createRow("Error: This SR cannot be closed until the mandatory Outage information has been filled.","ERROR",true,"Change it on Step '"+TAB_REASON_FOR_CLOSE+"'",SR_CLOSURE_STEP1_ID);a.appendChild(T)}if(isEmptyVal(z)||isEmptyVal(y)||isEmptyVal(p)&&SRClosureProcess.isKnownIssueRequired()){var T=SRClosureProcess.step8_createRow("Error: This SR cannot be closed until the mandatory information has been filled.","ERROR",true,"Change it on Step '"+TAB_REASON_FOR_CLOSE+"'",SR_CLOSURE_STEP1_ID);a.appendChild(T);SRClosureProcess.errorFound=true}if(SRClosureProcess.hasOpenFsTask()){var L=document.createElement("tr");var S=document.createElement("td");dojo.attr(S,{width:"18px"});dojo.style(S,{padding:"5px"});var R=document.createElement("td");var N=SRClosureProcess.errorImg();S.appendChild(N);var Q=document.createTextNode("Error: This SR cannot be closed until field service tasks are closed.");var P=document.createElement("span");P.appendChild(Q);var O=SRClosureProcess.viewChildLinkNode(CHILD_TYPE_FSTASK,"Exit Wizard, View FS Tasks");R.appendChild(P);R.appendChild(document.createTextNode("\xa0\xa0\xa0"));R.appendChild(O);L.appendChild(S);L.appendChild(R);a.appendChild(L);SRClosureProcess.errorFound=true}if(SRClosureProcess.hasFakeOpenEscalations()){var T=SRClosureProcess.step8_createRow("Error: Open Escalations. Confirm closure with escalation manager, update as required with resolutions, and closed it when escalations are resolved and approved by escalation manager.","ERROR",true,"Review and send updates on Step '"+TAB_CLOSE_ESC+"'",SR_CLOSURE_STEP3_ID);a.appendChild(T)}if(SRClosureProcess.hasOpenDefects()){var T=SRClosureProcess.step8_createRow("Error: Categorize the bugs that are attached to the SR.","ERROR",true,"Edit these on Step '"+TAB_CLASSIFY_RELATED+"'",SR_CLOSURE_STEP5_ID);a.appendChild(T)}if(SRClosureProcess.hasOpenRelatedSrs()){var T=SRClosureProcess.step8_createRow("Error: Categorize the SR links that are attached to the SR.","ERROR",true,"Edit these on Step '"+TAB_CLASSIFY_RELATED+"'",SR_CLOSURE_STEP5_ID);a.appendChild(T)}if(!window.substatusForAutoSrClose.contains(z)&&SRClosureProcess.step7_hasUnclassifiedKmUrl()){var T=SRClosureProcess.step8_createRow("Error: All URLs and Knowledge documents that are attached to the SR must be categorized.","ERROR",true,"Edit these on Step '"+TAB_IDENTIFY_SOLUTION+"'",SR_CLOSURE_STEP7_ID);a.appendChild(T)}if(!window.substatusForAutoSrClose.contains(z)&&!SRClosureProcess.step7_hasUnclassifiedKmUrl()&&!SRClosureProcess.step7_completed()){var T=SRClosureProcess.step8_createRow("Error: Resolved SRs require that a URL or document containing the solution be identified or the solution must be flagged as customer specific.","ERROR",true,"Edit these on Step '"+TAB_IDENTIFY_SOLUTION+"'",SR_CLOSURE_STEP7_ID);a.appendChild(T)}if(!SRClosureProcess.errorFound&&!SRClosureProcess.warningFound){F.innerHTML="The SR can be closed by clicking on 'Close' button."}if(!SRClosureProcess.errorFound&&dijit.byId(SR_CLOSURE_STEP8_ID+"_closeSr")){dijit.byId(SR_CLOSURE_STEP8_ID+"_closeSr").setAttribute("disabled",false)}})}H.appendChild(a);if(dijit.byId(SR_CLOSURE_STEP8_ID)){dijit.byId(SR_CLOSURE_STEP8_ID).setContent(H)}dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).layout()};SRClosureProcess.step8_createRow=function(u,l,b,a,h){var f=document.createElement("tr");var s=document.createElement("td");dojo.attr(s,{width:"18px"});dojo.style(s,{padding:"5px"});var q=document.createElement("td");var g=(l!=undefined&&l=="ERROR")?SRClosureProcess.errorImg():SRClosureProcess.warningImg();s.appendChild(g);var p=document.createTextNode(u);var o=document.createElement("span");o.appendChild(p);q.appendChild(o);if(b){var m=SRClosureProcess.step8_fixErrorLink(a);dojo.connect(m,"onclick",function(){dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).selectChild(dijit.byId(h))});q.appendChild(document.createTextNode("\xa0\xa0\xa0"));q.appendChild(m)}f.appendChild(s);f.appendChild(q);if(l=="ERROR"){SRClosureProcess.errorFound=true}else{if(l=="WARNING"){SRClosureProcess.warningFound=true}}return f};SRClosureProcess.step8_fixErrorLink=function(f){var b=document.createElement("a");dojo.attr(b,{style:"vertical-align:top;",href:"#"});var a=document.createTextNode(f);b.appendChild(a);return b};SRClosureProcess.warningImg=function(){var a=document.createElement("img");dojo.attr(a,{src:"../images/alert_16.png",height:"16",width:"16",title:"Warning",alt:"Warning",style:"padding-right:3px;margin-right:3px;"});return a};SRClosureProcess.errorImg=function(){var a=document.createElement("img");dojo.attr(a,{src:"../images/error_16.png",height:"16",width:"16",title:"Error",alt:"Error",style:"padding-right:3px;margin-right:3px;"});return a};SRClosureProcess.step8_refreshForCheck=function(){var b={};b.retrieveAll=true;b.sync=false;b.refresh=true;b.scanAndAssociateAll=false;var a=SRClosureProcess.loadOpenSrRefs(b);return a};SRClosureProcess.step8XhrReq=function(){dijit.byId("pleasewait").show();var a=SRClosureProcess.readSubstatus();var b="../../../SRHeaderRequest";var f={action:"closeSRFinalStep",stepId:"8",status:"Closed",substatus:encodeURIComponent(a),srId:getActiveSrId(),queryTabName:getQueryTabName(),modId:getSrModId(),activeSR:getSrNumber()};var g=genericTalkToServer(b,f,"json",true,3000000,"post");g.addCallback(function(l,h){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(l.opStatus==1){displayErrors(l)}else{dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=true;if(l.srData!=undefined){SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);closeDialog(SR_CLOSURE_WIZARD);setHeaderJSONFromResponse(l.srData)}}return l});g.addErrback(function(h){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}console.error("An error occurred: ",h)})};SRClosureProcess.hasOpenErrMsgs=function(){var a=false;var b=SRClosureProcess.filterErrMsg(RELATED_TO_ISSUE,false);if(b!=undefined&&b!=null&&b.length>0){a=true}return a};SRClosureProcess.filterErrMsg=function(b,h){if(h==undefined||(h!=undefined&&h==true)){h=true}else{h=false}if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs[CHILD_TYPE_ERRMSG]==undefined){return null}var g=new Array();var f=SRClosureProcess.openSrRefs[CHILD_TYPE_ERRMSG];for(i=0;i<f.length;i++){var a=f[i];if(b==undefined){g.push(a)}else{if(b!=undefined&&h==true&&a.classification===b){g.push(a)}else{if(b!=undefined&&h==false&&a.classification!=b){g.push(a)}}}}return g};SRClosureProcess.step5_createAddNewTCContentPane=function(a){var g="***";if(a==CHILD_TYPE_BUG){g="Bug"}else{if(a==CHILD_TYPE_SR){g="SR"}}var f=new dijit.layout.ContentPane({id:"addMissingCP_"+a,title:("Add Missing "+g+"..."),style:"width: 99%;height: 110px;padding: 1px; margin: 2px;overflow:hidden;"});dojo.connect(f,"onShow",this,dojo.hitch(this,function(l,m){SRClosureProcess.step5_clearAddMissingSRBugUI(l);var h=dijit.byId("addMissingNumber_"+l);if(h!=undefined){h.focus()}},a));var b=SRClosureProcess.step5_createBorderContainer(a);f.setContent(b.domNode);return f};SRClosureProcess.step5_createBorderContainer=function(a){var g=new dijit.layout.BorderContainer({id:"addMissingBC_"+a,style:"width:550px; height: 90px;padding: 3px; margin: 3px;"});var h=new dijit.layout.ContentPane({region:"top",style:"width: 99%;height: 5px;padding: 1px; margin: 2px;overflow:hidden;"});var f=new dijit.layout.ContentPane({id:"addMissingBCCenter_"+a,region:"center",style:"width: 99%;height: 50px;padding: 1px; margin: 2px;overflow:hidden;"});var b=new dijit.layout.ContentPane({id:"addMissingBCControl_"+a,region:"bottom",style:"width: 95%;height: 25px;padding: 1px; margin: 2px;overflow:hidden;"});b.setContent(SRClosureProcess.step5_addButtonsForAddMissing(a));g.addChild(h);g.addChild(f);g.addChild(b);g.startup();g.layout();return g};SRClosureProcess.step5_addInputForAddMissing=function(B){var C="SR";if(B==CHILD_TYPE_BUG){C="Bug # "}else{C="SR # "}var I=document.createElement("table");dojo.attr(I,CLOSURE_DIALOG_TABLE_ATTR);var b=document.createElement("tbody");var f=document.createElement("tr");dojo.attr(f,{align:"left",id:"addMissingInput_"+B});var s=document.createElement("td");var K=document.createElement("td");dojo.attr(s,{align:"left",nowrap:"nowrap"});dojo.attr(K,{align:"right",nowrap:"nowrap"});f.appendChild(s);f.appendChild(K);var N=document.createElement("table");dojo.attr(N,CLOSURE_DIALOG_TABLE_ATTR);var J=document.createElement("tbody");var v=document.createElement("tr");var E=document.createElement("span");var x=document.createTextNode(C);E.appendChild(x);var G=document.createElement("td");dojo.attr(G,{align:"left",nowrap:"nowrap",width:"15%"});G.appendChild(E);v.appendChild(G);var H=document.createElement("td");dojo.attr(H,{align:"right",width:"1%"});var q=document.createElement("img");dojo.attr(q,{style:"vertical-align:middle",src:"../images/requiredicon.gif",alt:"Required"});H.appendChild(q);v.appendChild(H);var o=document.createElement("td");dojo.attr(o,{align:"left",nowrap:"nowrap",width:"84%"});var M=new dijit.form.TextBox({id:"addMissingNumber_"+B,trim:"true",style:{width:"100%","font-weight":"normal","font-size":"8pt","padding-top":"5px"},required:true,onChange:function(Q){var P=dijit.byId("addMissingId_"+B);if(B==CHILD_TYPE_SR){P.setValue("");SRClosureProcess.step5_updateErrMsg(B,"")}else{if(B==CHILD_TYPE_BUG){P.setValue(this.getValue());SRClosureProcess.step5_updateErrMsg(B,"")}}if(B==CHILD_TYPE_SR){if(this.getValue()!=""){var R=SRClosureProcess.step5_getSRHeaderOnly(this.getValue());R.addCallback(function(U,T){if(U.opStatus==SUCCESS_STATUS){var S=U.item;if(S!=null&&S!=undefined){P.setValue(S.id);SRClosureProcess.step5_updateErrMsg(B,S.summary)}}else{if(isObjectErroneous(U)){displayErrors(U)}}})}}else{}}});o.appendChild(M.domNode);v.appendChild(o);J.appendChild(v);N.appendChild(J);s.appendChild(N);var m=new dijit.form.TextBox({id:"addMissingId_"+B,trim:"true",disabled:true,onChange:function(P){SRClosureProcess.step5_showHideAddSRBugButton(B,P)}});dojo.style(m.domNode,{display:"none"});var w=document.createElement("td");w.appendChild(m.domNode);v.appendChild(w);var F=document.createElement("table");dojo.attr(F,CLOSURE_DIALOG_TABLE_ATTR);var y=document.createElement("tbody");var D=document.createElement("tr");dojo.attr(D,{align:"right"});var L=document.createElement("span");var A=document.createTextNode("Classification");L.appendChild(A);var l=document.createElement("td");dojo.attr(l,{align:"left",nowrap:"nowrap",width:"10%"});l.appendChild(L);D.appendChild(l);var u=document.createElement("td");dojo.attr(u,{align:"right",width:"1%"});var p=document.createElement("img");dojo.attr(p,{style:"vertical-align:middle",src:"../images/requiredicon.gif",alt:"Required"});u.appendChild(p);D.appendChild(u);var h=document.createElement("td");dojo.attr(h,{align:"left",nowrap:"nowrap",width:"70%"});var O=(B!=undefined&&B!=null&&B==CHILD_TYPE_SR)?relatedSrStore:relatedBugStore;var z=new dijit.form.FilteringSelect({id:"addMissingFS_"+B,name:"addMissingFS_"+B,searchAttr:"id",store:O,required:true,onChange:function(P){SRClosureProcess.step5_showHideAddSRBugButton(B,P)}});h.appendChild(z.domNode);D.appendChild(h);y.appendChild(D);F.appendChild(y);K.appendChild(F);f.appendChild(s);f.appendChild(K);b.appendChild(f);var g=document.createElement("tr");dojo.attr(g,{align:"left",id:"addMissingInputErr_"+B});var a=document.createElement("td");dojo.attr(a,{colspan:"3"});g.appendChild(a);a.appendChild(SRClosureProcess._step5_getErrorMessageLine(B));b.appendChild(g);I.appendChild(b);return I};SRClosureProcess._step5_getErrorMessageLine=function(g){var l=document.createElement("table");dojo.attr(l,CLOSURE_DIALOG_TABLE_ATTR);var f=document.createElement("tbody");var m=document.createElement("tr");dojo.attr(m,{id:"addMissingErrorMsgTR_"+g});var o=document.createElement("td");dojo.attr(o,{cellpadding:"5px",width:"100%"});var b=document.createElement("div");var a="";var h=document.createTextNode(a);dojo.attr(b,{id:"addMissingErrorMsgSpan_"+g});dojo.style(b,{padding:"2px",height:"25px"});b.appendChild(h);o.appendChild(b);m.appendChild(o);dojo.attr(m,{align:"left"});f.appendChild(m);l.appendChild(f);return l};SRClosureProcess.step5_addButtonsForAddMissing=function(h){var b="SR";var f="Add";if(h==CHILD_TYPE_BUG){b="Bug# ";f="Add Bug"}else{b="SR# ";f="Add SR"}var q=document.createElement("table");dojo.attr(q,CLOSURE_DIALOG_TABLE_ATTR);var g=document.createElement("tbody");var p=document.createElement("tr");dojo.attr(p,{align:"center"});var m=document.createElement("td");dojo.attr(m,{align:"left",nowrap:"nowrap"});var o=new dijit.form.Button({label:"Cancel"});dojo.connect(o,"onClick",this,dojo.hitch(this,SRClosureProcess.step5_hideAddMissingTC,h));m.appendChild(o.domNode);p.appendChild(m);var l=document.createElement("td");dojo.attr(l,{align:"right",nowrap:"nowrap"});var a=new dijit.form.Button({id:"addToSrButton_"+h,label:f});dojo.style(a.domNode,{display:"none"});dojo.connect(a,"onClick",this,dojo.hitch(this,function(C,s){var D=dijit.byId("addMissingNumber_"+h);var B=D.getValue();var A=dijit.byId("addMissingFS_"+h);var y=A.getValue();var z="";if(dojo.string.trim(B)==""){z+=b+" is required. "}if(dojo.string.trim(y)==""){z+="Classification is required. "}if(dojo.string.trim(z)!=""){var u=dojo.byId("addMissingErrorMsgSpan_"+h);var x=document.createTextNode(z);u.innerHTML="";u.appendChild(x);return}var w=SRClosureProcess.step5_associateArtifact(h,B,y)},h));l.appendChild(a.domNode);p.appendChild(l);g.appendChild(p);q.appendChild(g);return q};SRClosureProcess.step5_showHideAddSRBugButton=function(f,l){var b="addMissingId_"+f;var g=dijit.byId("addMissingId_"+f);var o=g.getValue();var a=dijit.byId("addMissingFS_"+f);var m=a.getValue();var h=dijit.byId("addToSrButton_"+f);if(o!=undefined&&o!=""&&m!=undefined&&dojo.string.trim(m)!=""){dojo.style(h.domNode,{display:""})}else{dojo.style(h.domNode,{display:"none"})}};SRClosureProcess.step5_getSRHeaderOnly=function(f){var a="../../../SRRequest";var b={action:"querySRHeaderOnly",srNumber:f};var g=genericTalkToServer(a,b,"json",true,120000,"post");return g};SRClosureProcess.step5_updateErrMsg=function(b,f){var a=dojo.byId("addMissingErrorMsgSpan_"+b);if(a!=undefined){var g=document.createTextNode(f);a.innerHTML="";a.appendChild(g)}};SRClosureProcess.step5_clearAddMissingSRBugUI=function(h){var f=dijit.byId("addMissingNumber_"+h);if(f!=undefined){f.reset()}var g=dijit.byId("addMissingId_"+h);if(g!=undefined){g.reset}var a=dijit.byId("addMissingFS_"+h);if(a!=undefined){a._setValue("");a.reset()}var b=dojo.byId("addMissingErrorMsgSpan_"+h);if(b!=undefined){b.innerHTML=""}};SRClosureProcess.step5_refreshAndCheckForCompletion=function(){var b={};b.refresh=true;b.retrieveAll=false;b.referenceType=new Array(CHILD_TYPE_BUG,CHILD_TYPE_SR);var a=SRClosureProcess.loadOpenSrRefs(b);a.addCallback(function(f){SRClosureProcess.setStepStatus(dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID),dijit.byId(SR_CLOSURE_STEP5_ID),((SRClosureProcess.hasOpenDefects()||SRClosureProcess.hasOpenRelatedSrs())?REQUIRED_INCOMPLETE_STEP_STATUS:COMPLETED_STEP_STATUS))});return a};SRClosureProcess.exitWizardCallback=function(){if(dijit.byId(SR_CLOSURE_STEP1_ID).selected&&SRUtils.isDialogModified(dijit.byId(SR_CLOSURE_WIZARD).domNode)){var b=SRClosureProcess.saveStep1();if(b!=undefined&&typeof b=="number"&&b==FAILURE_STATUS){return}if(b!=undefined&&b!=null&&typeof b=="object"){b.addCallback(dojo.hitch(this,function(f){if(f==undefined||f.opStatus==undefined||(f.opStatus!=undefined&&f.opStatus!=1)){dijit.byId(SR_CLOSURE_WIZARD).hide()}}))}}else{if(dijit.byId(SR_CLOSURE_STEP2_ID).selected&&SRUtils.isDialogModified(dijit.byId(SR_CLOSURE_WIZARD).domNode)){var a=SRClosureProcess.getStep2Json();var b=SRClosureProcess.invokeStep2XhrReq(a);if(b!=undefined&&b!=null&&typeof b=="object"){b.addCallback(dojo.hitch(this,function(f){if(f==undefined||f.opStatus==undefined||(f.opStatus!=undefined&&f.opStatus!=1)){dijit.byId(SR_CLOSURE_WIZARD).hide()}}))}}else{dijit.byId(SR_CLOSURE_WIZARD).hide()}}refreshSRDetail("?refresh=true","",true,false)};SRClosureProcess.onChangeTab=function(){if(dijit.byId(SR_CLOSURE_STEP1_ID).selected){if(!SRUtils.isDialogModified(dijit.byId(SR_CLOSURE_WIZARD).domNode)){dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).tabOnClickRequestParam.stopProp=false;return}var l=SRClosureProcess.saveStep1();if(l!=undefined&&typeof l=="number"&&l==FAILURE_STATUS){dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).tabOnClickRequestParam.stopProp=true;return}if(l!=undefined&&typeof l=="object"){dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).tabOnClickRequestParam.stopProp=false;dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).tabOnClickRequestParam.deferred=l}}else{if(dijit.byId(SR_CLOSURE_STEP2_ID).selected){if(!SRUtils.isDialogModified(dijit.byId(SR_CLOSURE_WIZARD).domNode)){dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).tabOnClickRequestParam.stopProp=false;return false}var f=SRClosureProcess.getStep2Json();var l=SRClosureProcess.invokeStep2XhrReq(f);if(l!=undefined&&typeof l=="object"){dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).tabOnClickRequestParam.stopProp=false;dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).tabOnClickRequestParam.deferred=l}}else{dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).tabOnClickRequestParam.deferred=null;var h=dijit.byId(SR_CLOSURE_WIZARD).domNode;var g=SRUtils.showDialogModifiedAlert(h);if(g==0){SRUtils.unmarkChanges(SR_CLOSURE_WIZARD);var a=window.modifiedFlds.keySet();for(i=0;i<a.length;i++){var b=a[i];if(b.startsWith(SR_CLOSURE_WIZARD)){SRUtils.unmarkChanges(b)}}dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).tabOnClickRequestParam.stopProp=false}else{dijit.byId(SR_CLOSURE_TAB_CONTAINER_ID).tabOnClickRequestParam.stopProp=true}}}};SRClosureProcess.fetchFakeOpenEscalations=function(){var b=new Array();if(SRClosureProcess.openSrRefs!=undefined&&SRClosureProcess.openSrRefs.Escalations!=undefined&&SRClosureProcess.openSrRefs.Escalations.length>0){b=SRClosureProcess.filterOpenEscalations();return b}else{if(SRClosureProcess.openSrRefs==undefined||SRClosureProcess.openSrRefs.Escalations==undefined){var f={};f.retrieveAll=false;f.referenceType=new Array("Escalations");var a=SRClosureProcess.loadOpenSrRefs(f);if(a!=undefined){a.addCallback(function(g){b=SRClosureProcess.filterOpenEscalations();return b})}}}return b};SRClosureProcess.hasFakeOpenEscalations=function(){var a=(SRClosureProcess.fetchFakeOpenEscalations()!=undefined&&SRClosureProcess.fetchFakeOpenEscalations().length>0);return a};SRClosureProcess.filterOpenEscalations=function(){var b=new Array();var a=SRClosureProcess.openSrRefs.Escalations;var b=dojo.filter(a,function(g,f){var h=false;h=(dojo.string.trim(g.escActivityStatus)!="Escalation Resolved"&&(dojo.string.trim(g.escCategory)==""||dojo.string.trim(g.escResolution)==""));return h});return b};SRClosureProcess.mosspSRClose=function(){var f=SRClosureProcess.isRestrictedOrSecure();iframeHeight="652px";if(f==true){iframeHeight="674px"}var a=createSRMDialog(SR_CLOSURE_WIZARD,"SR Close Wizard","",MOSSP_SRCLOSE_IFRAME_ID,"mosspSRClose_hideDialog");dojo.style(a.containerNode,{padding:"0px"});dojo.addClass(a,WIZ_DIALOG_CLASS);dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=true;dojo.style(a.domNode,{width:"870px",height:iframeHeight,overflow:"hidden",padding:"0px"});var b=dojo.doc.createElement("div");var g=new dijit.layout.ContentPane({id:MOSSP_SRCLOSE_CP,style:"width:100%; height:"+iframeHeight+"; overflow:hidden; padding:0px; margin:0px;"},b);SRClosureProcess.mossp_srclose();a.setContent(g.domNode);dijit.byId(MOSSP_SRCLOSE_CP).resize();setTimeout(function(){a.show()},"0");return};SRClosureProcess.mossp_srclose=function(){var v=document.createElement("a");dojo.attr(v,{style:"vertical-align:middle; float:right;",href:"javascript:void(0);"});var g=document.createTextNode("Switch to Classic SR Close Wizard");v.appendChild(g);dojo.connect(v,"onclick",function(){var x="Are you sure you want to switch back to the Classic SR Close Wizard?";if(confirm(x)){refreshSR(getSRQstr(getSrNumber()));userOverrideWhiteListSRClose=true;SRClosureProcess.saveUserWhiteListOverride(userOverrideWhiteListSRClose);saveSRHeader(false,"close")}});var w=document.createElement("table");w.setAttribute("width","100%");var p=document.createElement("tbody");w.appendChild(p);var q=document.createElement("tr");p.appendChild(q);var l=document.createElement("td");q.appendChild(l);var o=document.createElement("tr");p.appendChild(o);var h=document.createElement("td");o.appendChild(h);if(window.addEventListener){window.addEventListener("message",SRClosureProcess.IFrameMessageHandler)}else{if(window.attachEvent){window.attachEvent("onmessage",SRClosureProcess.IFrameMessageHandler)}}var b=document.createElement("iframe");var m="MOSSP_SRCLOSE";var f=evaluateSRMContextTextURL(getLinkHrefMap(),m,getSrNumber());var a=getEvalFieldVal("subType","SubType");var s=(a!=undefined&&dojo.string.trim(a)=="Security Group")?"true":"false";f+="?secureSr="+s;var u=getEvalFieldVal("productClass");if(u!=undefined&&u!=""){f+="&productClass="+encodeURIComponent(u)}b.src=f;b.style.width="100%";b.style.height="98%";b.id=MOSSP_SRCLOSE_IFRAME_ID;dojo.style(b,{overflow:"hidden",margin:"0",padding:"0"});b.frameBorder="0";dojo.parser.parse(b);if(dijit.byId(MOSSP_SRCLOSE_CP)){dijit.byId(MOSSP_SRCLOSE_CP).containerNode.appendChild(b)}};SRClosureProcess.IFrameMessageHandler=function(a){console.log("Message from child frame received: "+a.data);if((a.data=="mosspSRClose_exitWiz"||a.data=="mosspSRClose_closeSr")&&dijit.byId(SR_CLOSURE_WIZARD)!=undefined){dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=false;dijit.byId(SR_CLOSURE_WIZARD).hide();refreshSR(getSRQstr(getSrNumber()))}else{if(a.data=="mosspSRClose_exitFsTask"&&dijit.byId(SR_CLOSURE_WIZARD)!=undefined){dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=false;dijit.byId(SR_CLOSURE_WIZARD).hide();SRClosureProcess.closeAndPositionChild(CHILD_TYPE_FSTASK);var b=refreshSR(getSRQstr(getSrNumber()))}else{if(a.data=="mosspSRClose_exitEscalation"&&dijit.byId(SR_CLOSURE_WIZARD)!=undefined){dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=false;dijit.byId(SR_CLOSURE_WIZARD).hide();var b=refreshSR(getSRQstr(getSrNumber()));b.addCallback(function(g,f){SRClosureProcess.closeAndPositionChild("Escalation")})}else{if(a.data=="mosspSRClose_hideDialogOk"&&dijit.byId(SR_CLOSURE_WIZARD)!=undefined){dijit.byId(SR_CLOSURE_WIZARD).refreshOnHide=false;SRUtils.unmarkDialogChanges(SR_CLOSURE_WIZARD);errHandlingUtil.clearErrFlds(SR_CLOSURE_WIZARD);cleanupDialog(SR_CLOSURE_WIZARD);refreshSR(getSRQstr(getSrNumber()))}}}}};SRClosureProcess.saveUserWhiteListOverride=function(a){var b="../../../SRRequest";var f={action:"saveUserWhiteListObj",userOverrideWhiteListSRClose:a};console.log("request : "+f);var g=genericTalkToServer(b,f,"json",true,120000,"post");dijit.byId("pleasewait").show();g.addBoth(function(l,h){dijit.byId("pleasewait").hide();console.log("user white list override SR Close ended.")});return g};SRClosureProcess.setSubCategoryLOV=function(g,a){var l=g.value;var f=dijit.byId("resolutionCode_"+a);var b=g._lastDisplayedValue;if((l==="")){if(f){f.setValue("");f.setDisabled(true)}}if(l===""&&f){f.setDisabled(true)}if(l&&l!==b&&f){f.setValue("")}if(f&&(l!=="")){var h={url:"../../../ActivityLovRequest",content:{q:"ACT_RESOLUTION_CD",type:"Escalation",parentLovVal:l},handleAs:"json",preventCache:true,load:function(m){var o=new dojo.data.ItemFileReadStore({data:m});if(f){f.store=o}},error:function(m){console.error("An error occurred: "+m)},timeout:30000};dojo.xhrGet(h)}if(f&&l===""){f.setValue("");f.setDisabled(true)}else{if(f&&l!==""){f.setDisabled(false)}}};SRClosureProcess.displaySROutageType=function(){var a=new StringBuffer();var b="SROutageTypeCloned";a.append('<table  style="table-layout:fixed;width:650px;"><tbody><tr id="'+b+'Row" style="display:none">');a.append('<td nowrap="nowrap"  align="right" title="Outage (Impact)" valign="middle" class="bigSrHeaderAttribute srHeaderLabel">Outage (Impact)</td>');a.append('<td  class="reqImgNode" align="right" width="16px" nowrap="nowrap"><img style="vertical-align:middle;" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px" align="left" nowrap="nowrap" valign="middle">');a.append('<div  id="SROutageTypeStoreCloned" dojoType="dojo.data.ItemFileReadStore" jsId="lovSROutageTypeStore" url="../../../SRHeaderRequest?action=loadlov&lov=OUTAGE_TYPE"></div>');a.append('<div class="errorDiv"><input class="srHeaderInput" title="Outage Impact" value="'+headerDataAsJson.SROutageType+'" onBlur="validateCombo(this);" onChange="SRClosureProcess.onchange_OutageImpact();" invalidMessage="Invalid value for Outage Impact" dojoType="dijit.form.ComboBox" store="lovSROutageTypeStore"  value="" name="SROutageTypeCloned" id="SROutageTypeCloned" ></input></div></td>');a.append("<td></td>");a.append("</tr></tbody></table>");return a.toString()};SRClosureProcess.displaySROutageStartDate=function(){var a=new StringBuffer();var b="SROutageStartDateCloned";a.append('<table  style="table-layout:fixed;width:650px;"><tbody><tr id="'+b+'Row" style="display:none">');a.append('<td nowrap="nowrap"  align="right" title="Outage (Impact) Start Date/Time" valign="middle" class="bigSrHeaderAttribute srHeaderLabel">Outage Start Date/Time</td>');a.append('<td  class="reqImgNode" align="right" width="16px" nowrap="nowrap"><img style="vertical-align:middle;" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px" align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" disabled="disabled" lang="en-us" dojoType="srmdojoc.form.DateTimeCombo" promptMessage="Please enter date in format: 03-Feb-2008 12:00:00 PM" constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}"  class="srHeaderInput" id="'+b+'" value="'+headerDataAsJson.SROutageStartDate+'" onBlur="SRClosureProcess.checkOutageDates();" onChange="SRClosureProcess.checkOutageDates();"/></div>');a.append("</td>");a.append('<td nowrap="nowrap">(GMT+00:00)</td>');a.append("</tr></tbody></table>");return a.toString()};SRClosureProcess.displaySROutageEndDate=function(){var a=new StringBuffer();var b="SROutageEndDateCloned";a.append('<table  style="table-layout:fixed;width:650px;"><tbody><tr id="'+b+'Row" style="display:none">');a.append('<td nowrap="nowrap"  align="right" title="Outage (Impact) End Date/Time" valign="middle" class="bigSrHeaderAttribute srHeaderLabel">Outage End Date/Time</td>');a.append('<td  class="reqImgNode" align="right" width="16px" nowrap="nowrap"><img style="vertical-align:middle;" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px" align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" disabled="disabled" lang="en-us" dojoType="srmdojoc.form.DateTimeCombo" promptMessage="Please enter date in format: 03-Feb-2008 12:00:00 PM" constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}"  class="srHeaderInput" id="'+b+'" value="'+headerDataAsJson.SROutageEndDate+'" onBlur="SRClosureProcess.checkOutageDates();" onChange="SRClosureProcess.checkOutageDates();"/></div>');a.append("</td>");a.append('<td nowrap="nowrap">(GMT+00:00)</td>');a.append("</tr></tbody></table>");return a.toString()};SRClosureProcess.displaySROutagePercentage=function(){var a=new StringBuffer();var b="SROutagePercentageCloned";a.append('<table  style="table-layout:fixed;width:650px;"><tbody><tr id="'+b+'Row" style="display:none">');a.append('<td nowrap="nowrap"  align="right" title="Outage (Impact) Percentage" valign="middle" class="bigSrHeaderAttribute srHeaderLabel">Outage Percent</td>');a.append('<td  class="reqImgNode" align="right" width="16px" nowrap="nowrap"><img style="vertical-align:middle;" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px" align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" disabled="disabled" lang="en-us" dojoType="dijit.form.NumberSpinner" smallDelta="1" constraints={min:0,max:100} class="srHeaderInput" id="'+b+'" value="'+headerDataAsJson.SROutagePercentage+'" onChange="SRClosureProcess.checkPercentage();" onBlur="SRClosureProcess.checkPercentage();"/></div>');a.append("</td>");a.append("<td></td>");a.append("</tr></tbody></table>");return a.toString()};SRClosureProcess.onchange_OutageImpact=function(){SRClosureProcess.processServiceOutageFields()};var SVC_NO_OUTAGE="No Outage";var SVC_IMPACT_OUTAGE="Service Impact Outage";var SVC_FULL_OUTAGE="Full Outage-Network Element";var SVC_PARTIAL_OUTAGE="Partial Outage-Network Element";SRClosureProcess.processServiceOutageFields=function(){var a=getEvalFieldVal("SROutageTypeCloned");dojo.style(dojo.byId("SROutageStartDateClonedRow"),{display:"none"});dojo.style(dojo.byId("SROutageEndDateClonedRow"),{display:"none"});dojo.style(dojo.byId("SROutagePercentageClonedRow"),{display:"none"});dijit.byId("SROutageStartDateCloned").setDisabled(false);dijit.byId("SROutageEndDateCloned").setDisabled(false);dijit.byId("SROutagePercentageCloned").setDisabled(false);if(a==SVC_NO_OUTAGE){dojo.byId("SROutageStartDateCloned").value="";dojo.byId("SROutageEndDateCloned").value="";dojo.byId("SROutagePercentageCloned").value=""}else{if(a==SVC_IMPACT_OUTAGE){dojo.style(dojo.byId("SROutageStartDateClonedRow"),{display:""});dojo.style(dojo.byId("SROutageEndDateClonedRow"),{display:""});dojo.byId("SROutageStartDateCloned").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDateCloned").value=headerDataAsJson.SROutageEndDate;dojo.byId("SROutagePercentageCloned").value=""}else{if(a==SVC_FULL_OUTAGE){dijit.byId("SROutagePercentageCloned").setDisabled(true);dojo.style(dojo.byId("SROutageStartDateClonedRow"),{display:""});dojo.style(dojo.byId("SROutageEndDateClonedRow"),{display:""});dojo.style(dojo.byId("SROutagePercentageClonedRow"),{display:""});dojo.byId("SROutageStartDateCloned").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDateCloned").value=headerDataAsJson.SROutageEndDate;dojo.byId("SROutagePercentageCloned").value=100}else{if(a==SVC_PARTIAL_OUTAGE){dojo.style(dojo.byId("SROutageStartDateClonedRow"),{display:""});dojo.style(dojo.byId("SROutageEndDateClonedRow"),{display:""});dojo.style(dojo.byId("SROutagePercentageClonedRow"),{display:""});dojo.byId("SROutageStartDateCloned").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDateCloned").value=headerDataAsJson.SROutageEndDate;var b=(headerDataAsJson.SROutagePercentage)?((headerDataAsJson.SROutagePercentage==100)?50:headerDataAsJson.SROutagePercentage):50;dojo.byId("SROutagePercentageCloned").value=b}else{if(a==""){dojo.byId("SROutageEndDateCloned").value="";dojo.byId("SROutageStartDateCloned").value="";dojo.byId("SROutagePercentageCloned").value=""}}}}}};SRClosureProcess.hideOrShowOutageFields=function(){dojo.style(dojo.byId("SROutageStartDateClonedRow"),{display:"none"});dojo.style(dojo.byId("SROutageEndDateClonedRow"),{display:"none"});dojo.style(dojo.byId("SROutagePercentageClonedRow"),{display:"none"});dojo.style(dojo.byId("SROutageTypeClonedRow"),{display:"none"});if(TLCM==headerDataAsJson.productClass){dojo.style(dojo.byId("SROutageTypeClonedRow"),{display:""});dojo.byId("SROutageTypeCloned").value=headerDataAsJson.SROutageType;var a=headerDataAsJson.SROutageType;if(SRClosureProcess.isOutageInfoRequired(headerDataAsJson.productClass)){if(a==SVC_NO_OUTAGE){dojo.byId("SROutageStartDateCloned").value="";dojo.byId("SROutageEndDateCloned").value="";dojo.byId("SROutagePercentageCloned").value="";dijit.byId("SROutageStartDateCloned").setDisabled(true);dijit.byId("SROutageEndDateCloned").setDisabled(true);dijit.byId("SROutagePercentageCloned").setDisabled(true)}else{if(a==SVC_IMPACT_OUTAGE){dojo.byId("SROutageStartDateCloned").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDateCloned").value=headerDataAsJson.SROutageEndDate;dojo.style(dojo.byId("SROutageStartDateClonedRow"),{display:""});dojo.style(dojo.byId("SROutageEndDateClonedRow"),{display:""});dijit.byId("SROutageStartDateCloned").setDisabled(false);dijit.byId("SROutageEndDateCloned").setDisabled(false);dijit.byId("SROutagePercentageCloned").setDisabled(true)}else{if(a==SVC_FULL_OUTAGE){dojo.byId("SROutageStartDateCloned").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDateCloned").value=headerDataAsJson.SROutageEndDate;dojo.byId("SROutagePercentageCloned").value=headerDataAsJson.SROutagePercentage;dojo.style(dojo.byId("SROutageStartDateClonedRow"),{display:""});dojo.style(dojo.byId("SROutageEndDateClonedRow"),{display:""});dojo.style(dojo.byId("SROutagePercentageClonedRow"),{display:""});dijit.byId("SROutageStartDateCloned").setDisabled(false);dijit.byId("SROutageEndDateCloned").setDisabled(false);dijit.byId("SROutagePercentageCloned").setDisabled(true)}else{if(a==SVC_PARTIAL_OUTAGE){dojo.byId("SROutageStartDateCloned").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDateCloned").value=headerDataAsJson.SROutageEndDate;var b=(headerDataAsJson.SROutagePercentage)?((headerDataAsJson.SROutagePercentage==100)?50:headerDataAsJson.SROutagePercentage):50;dojo.byId("SROutagePercentageCloned").value=b;dojo.style(dojo.byId("SROutageStartDateClonedRow"),{display:""});dojo.style(dojo.byId("SROutageEndDateClonedRow"),{display:""});dojo.style(dojo.byId("SROutagePercentageClonedRow"),{display:""});dijit.byId("SROutageStartDateCloned").setDisabled(false);dijit.byId("SROutageEndDateCloned").setDisabled(false);dijit.byId("SROutagePercentageCloned").setDisabled(false)}}}}}}else{dojo.style(dojo.byId("SROutageTypeClonedRow"),{display:"none"});dojo.style(dojo.byId("SROutageStartDateClonedRow"),{display:"none"});dojo.style(dojo.byId("SROutageEndDateClonedRow"),{display:"none"});dojo.style(dojo.byId("SROutagePercentageClonedRow"),{display:"none"})}};SRClosureProcess.isOutageInfoRequired=function(a){return(a==TLCM)?true:false};SRClosureProcess.checkOutageDates=function(b){var h=dijit.byId("SROutageStartDateCloned");var a=dijit.byId("SROutageEndDateCloned");if(a&&!isEmptyVal(a.focusNode.value)&&(h&&isEmptyVal(h.focusNode.value))){alert("The Outage Start Date/Time should be set prior to setting the Outage End Date/Time.");dijit.byId("SROutageStartDateCloned").focus()}var g;var f;if(a&&h){if(h.textbox.value!==""){g=getParsedDateVal(h.textbox.value).getTime()}if(a.textbox.value!==""){f=getParsedDateVal(a.textbox.value).getTime()}if(f&&g&&(f<=g)){alert("The Outage End Date/Time must be set to a value that is 'after' the Outage Start Date/Time.");dojo.byId("SROutageStartDateCloned").value=headerDataAsJson.SROutageStartDate;dojo.byId("SROutageEndDateCloned").value=headerDataAsJson.SROutageEndDate;dijit.byId("SROutageEndDateCloned").focus()}}};var TLCM;SRClosureProcess.loadTLCM=function(b){var f={url:"../../../SRHeaderRequest",content:{lov:"TLCM_PRODUCT_CLASS",action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",sync:true,load:function(h){for(var g=0;g<h.items.length;g++){if(h.items[g].name==b){TLCM=h.items[g].name}}return h}};var a=dojo.xhrGet(f)};SRClosureProcess.confirmIfOutageFieldsPopulated=function(b){if(b==undefined||b==""){return false}if(b!=SVC_NO_OUTAGE){var g=dojo.byId("SROutageStartDateCloned").value;if(g==undefined||g==""){return false}var a=dojo.byId("SROutageEndDateCloned").value;if(a==undefined||a==""){return false}}if(b==SVC_FULL_OUTAGE){var f=dojo.byId("SROutagePercentageCloned").value;if(f==undefined||f==""||f!=100){return false}}if(b==SVC_PARTIAL_OUTAGE){var f=dojo.byId("SROutagePercentageCloned").value;if(f==undefined||f==""||f=="NaN"){return false}}return true};SRClosureProcess.checkPercentage=function(){var b=dijit.byId("SROutagePercentageCloned");var a=dijit.byId("SROutageTypeCloned");var f;if(b&&b.textbox.value!==""){f=b.textbox.value;if(isNaN(f)){alert(f+" is not a number.")}else{if((parseInt(f)>=100||parseInt(f)<=0)&&(a.value===SVC_PARTIAL_OUTAGE)){alert("SROutage Percentage must be between 1 and 99");dojo.byId("SROutagePercentageCloned").value="50"}else{if(a==SVC_FULL_OUTAGE){dojo.byId("SROutagePercentageCloned").value=100}}}}else{if(!f){alert("SROutage Percentage is invalid.")}}};var SRSessionPreferences={REFERENCE_PANE_MINIMIZED_PREFERENCE:"refpane",SR_HEADER_MINIMIZED_PREFERENCE:"srheader",preferences:{}};SRSessionPreferences.savePreference=function(b,a){if(SRSessionPreferences.getPreference(b)!==a){SRSessionPreferences.setPreference(b,a);dojo.xhrPost({url:"../../../SRSessionPreferences",preventCache:true,content:{action:"save_preference",type:b,value:a},handleAs:"json",load:function(f){},error:function(f){console.log("Failed to save preference")}})}};SRSessionPreferences.getPreference=function(a){return SRSessionPreferences.preferences[a]};SRSessionPreferences.setPreference=function(b,a){SRSessionPreferences.preferences[b]=a};SRSessionPreferences.setPreferences=function(a){SRSessionPreferences.preferences=a};SRSessionPreferences.apply=function(){if(SRSessionPreferences.getPreference(SRSessionPreferences.REFERENCE_PANE_MINIMIZED_PREFERENCE)===true){toggle(true)}var a=dijit.byId("srHeader");if(a){var b=!a.open;if(b!==SRSessionPreferences.getPreference(SRSessionPreferences.SR_HEADER_MINIMIZED_PREFERENCE)){a.toggle()}}};var DYNAMIC_QUERY_TAB="Dynamic Query";var CP1ID="cp1Id";var TABSID="tabs";var SRTECHDIV="srTechDiv";var DIV="div";var TABLE="TABLE";var TR="TR";var TD="TD";var TBODY="TBODY";var ALIGN="align";var RIGHT="right";var LOCATE_SR=" Locate SR ";var INPUT="input";var SPAN="span";var ID="id";var INPUT_ID="inputId";var GO_LABEL="Go";var SEARCH_SR_ID="searchSRId";var COMBO_ID="comboId";var ACTIVE_SRS="Active SRs ";var SR="SR";var HTML="html";var GET_ACTIVE_SR_URL="../../../SRRequest?action=activeSRsList";var REMOVE_ACTIVE_SR_URL="../../../SRRequest?action=removeActiveSR";var IMG="img";var ANCHOR="a";var CLOSE_SR_IMG_URL="../images/close_icon.gif";var CLOSE_SR_ALT_TEXT="Remove SR from Active SRs List";var PREVIOUS_SR_IMG_URL="../images/previous.JPG";var PREVIOUS_SR_ALT_TEXT="Previous SR";var NEXT_SR_IMG_URL="../images/next.JPG";var NEXT_SR_ALT_TEXT="Next SR";var DISABLED_PREVIOUS_SR_IMG_URL="../images/previous-disabled.JPG";var DISABLED_NEXT_SR_IMG_URL="../images/next-disabled.JPG";var HEADERDIV="headerDiv";var HEADERCDIV="headerCDiv";var NAME="name";var LABEL="label";var SELECT_INPUT_ID="selectInputId";var MAINAREACONTAINER="mainAreaContainer";var NO_ACTIVE_SR="No Active SR";var handleArr=new Array();var handle2Arr=new Array();function getSRDetails(g){if(g!=undefined&&g!=null){var b=dijit.byId(g);if(b!=undefined){if(!dijit.byId("pleasewait").open){}dijit.byId("pleasewait").show();var f=b.getValue();if(f==""){alert("Please provide SR Number.");if(dijit.byId("pleasewait").open){}dijit.byId("pleasewait").hide();return}var a=getSRQstr(f);refreshSR(a)}}}function removeActiveSR(g){if(g!=undefined){var b=dijit.byId(g);if(b!=undefined){var f=b.getValue();var a=getQueryTabName();if(f==NO_ACTIVE_SR||f==""){alert("No active SR found.")}if(!dijit.byId("pleasewait").open){}dijit.byId("pleasewait").show();dojo.xhrGet({url:"../../../SRRequest",content:{action:"removeActiveSR",srNumber:f,queryTabName:a},preventCache:true,handleAs:"json",load:function(o,l){headerDataAsJson={};var m=getSRQstr(o.srNumber);if(o.srNumber==NO_ACTIVE_SR){var h=cleanupQStr();if(!h){window.location.reload(true)}return o}refreshSR(m,"",true,true);if(!dijit.byId("pleasewait").open){}dijit.byId("pleasewait").hide();return o},timeout:60000,error:function(m,l){var h=getDisplayMessageObj("Operation to remove SR from active list failed or timed out.",2);displayErrors(h);dijit.byId("pleasewait").hide();return m}})}}}function setActiveSRVal(f,b){if(b!=undefined&&!b){return}var a=SRMJSTimer.startTimer("refreshSRDetail_refreshActiveSrsList");if(f.srNumber!=undefined){var g=f.srNumber}handlePrevNextButtons(f);refreshActiveSrList(f.srNumber);SRMJSTimer.endTimer(a)}function handlePrevNextButtons(h){if(h!=undefined){var m=dojo.byId("nextB");cleanHandle();var g;var f;if(h.next!=undefined){var a=h.next;dojo.attr(m,{src:NEXT_SR_IMG_URL,width:16,height:16});dojo.style(m,"cursor:hand;");g=dojo.connect(m,"onclick",function(){var o=SRUtils.showPageModifiedAlert();if(o!=0){return}if(!dijit.byId("pleasewait").open){}dijit.byId("pleasewait").show();var p=getSRQstr(a);refreshSR(p);dojo.disconnect(g);if(f!=undefined){dojo.disconnect(f)}});handleArr.push(g)}else{dojo.attr(m,{src:DISABLED_NEXT_SR_IMG_URL,width:16,height:16})}var l=dojo.byId("previousB");if(h.previous!=undefined){var b=h.previous;dojo.attr(l,{src:PREVIOUS_SR_IMG_URL,width:16,height:16});dojo.style(l,"cursor:hand;");var f=dojo.connect(l,"onclick",function(){var o=SRUtils.showPageModifiedAlert();if(o!=0){return}if(!dijit.byId("pleasewait").open){}dijit.byId("pleasewait").show();var p=getSRQstr(b);refreshSR(p);dojo.disconnect(f);if(g!=undefined){dojo.disconnect(g)}});handle2Arr.push(f)}else{dojo.attr(l,{src:DISABLED_PREVIOUS_SR_IMG_URL,width:16,height:16})}}}function cleanHandleArr(){if(handle2Arr!=undefined){handle2Arr=new Array()}if(handleArr!=undefined){handleArr=new Array()}}function cleanHandle(){if(handle2Arr!=undefined&&handle2Arr.length>0){for(var b=0;b<handle2Arr.length;b++){var a=handle2Arr[b];if(a!=undefined){dojo.disconnect(a)}}}handle2Arr=new Array();if(handleArr!=undefined&&handleArr.length>0){for(var b=0;b<handleArr.length;b++){var f=handleArr[b];if(f!=undefined){dojo.disconnect(f)}}}handleArr=new Array()}function refreshActiveSrList(f){var a=SRMJSTimer.startTimer("refreshSRDetail_refreshActiveSrsList_xhrRequest_"+f);var h=dijit.byId("activeSrList");var g=h.getValue();if(h!=undefined){h.setValue("Loading...");h.destroyDescendants();var b=GET_ACTIVE_SR_URL+"&queryTabName="+getQueryTabName();dojo.xhrGet({url:b,preventCache:true,handleAs:"json",load:function(o,m){SRMJSTimer.endTimer(a);if(o.listData.items!=undefined){var l=new dojo.data.ItemFileReadStore({data:{identifier:o.listData.identifier,items:o.listData.items}});h.store=l;h.setValue(f)}else{h.setValue(g)}handlePrevNextButtons(o.buttonData);return o},timeout:120000,error:function(o,m){h.setValue(g);SRMJSTimer.endTimer(a);var l=getDisplayMessageObj("Failed to refresh the active SR list.",2);displayErrors(l);return o}})}}function getSRQstr(f){var a="";if(f==NO_ACTIVE_SR){f=""}var b=getQueryTabName();if(f!=undefined&&f!=""){a="?srNumber="+f+"&refresh=true"}if(b!=undefined&&b!=""){a=a+"&queryTabName="+b}return a}function onChangeSr(g){if(g!=undefined&&g!=null){var b=dijit.byId(g);if(b!=undefined){var f=b.getValue();if(f.indexOf("[")){f=f.substring(0,f.indexOf("["))}if(!isEmptyVal(f)&&!checkSRLoaded(f)&&f!=NO_ACTIVE_SR){if(!dijit.byId("pleasewait").open){}dijit.byId("pleasewait").show();if(dijit.byId("srTBox")){dijit.byId("srTBox").setValue("")}var a=getSRQstr(f);refreshSRDetail(a,"",true,false)}}}}dojo.require("dijit.Menu");dojo.require("dijit.Declaration");var menuStore;var pMenu;var d=dojo;var menus=new Map();d.addOnLoad(function(){var a="tundra";if(!d.hasClass(d.body(),a)){d.addClass(d.body(),a)}});function requestSR(b){var f=dijit.byId("mainTabContainer");console.debug(f);var a=new dijit.layout.ContentPane({title:"View SR "+b,closable:true,refreshOnShow:true,href:"SRViewPart.jspx?sr="+b});f.addChild(a)}function processMenuItem(item,parentMenu,linkId){var label=menuStore.getValue(item,"label");var icon=menuStore.getValue(item,"icon");var outerCArr=menuStore.getValue(item,"children");var children=null;if(outerCArr!=null&&outerCArr.length>0){children=outerCArr[0]}var disabled=menuStore.getValue(item,"disabled");var xpath=menuStore.getValue(item,"menuXpath");if(children==null){var dest=menuStore.getValue(item,"destination");var target=menuStore.getValue(item,"target");var onclick=menuStore.getValue(item,"onclick");if(dest!=null&&dest!=""){var section=menuStore.getValue(item,"section");var outerArr=menuStore.getValues(item,"params");var params=outerArr[0];if(params!=null){dest+="?";for(var k=0;k<params.length;k++){var param=params[k];dest+=param.pname;dest+="=";dest+=param.pval;if(k<params.length-1){dest+="&"}}}var mi=new dijit.MenuItem({label:label,disabled:disabled,parentMenu:parentMenu,onClick:function(){if(target=="_blank"){if(dest.indexOf("%%REFID%%")!=-1){dest=dest.replace("%%REFID%%",linkId)}window.open(dest)}}});parentMenu.addChild(mi)}else{if(onclick!=null&&onclick!=""){var outerArr=menuStore.getValues(item,"params");var params=null;if(outerArr!=null&&outerArr.length>0){params=outerArr[0]}onclick+="(";if(params!=null){for(var k=0;k<params.length;k++){var param=params[k];onclick+="'"+param.pval+"'";if(k<params.length-1){onclick+=","}}}onclick+=");";parentMenu.addChild(new dijit.MenuItem({label:label,disabled:disabled,onClick:function(){if(onclick.indexOf("%%REF%%")!=-1){onclick=onclick.replace("%%REF%%",linkId)}eval(onclick)},parentMenu:parentMenu}))}}}else{var pSubMenu=new dijit.Menu({parentMenu:parentMenu,id:xpath+"SubMenu"});for(var j=0;j<children.length;j++){var child=children[j];processMenuItem(child,pSubMenu)}parentMenu.addChild(new dijit.PopupMenuItem({label:label,popup:pSubMenu,id:"popup"+xpath}))}}var displayError=function(a,b){alert(a)};function processMenuData(f,a,m){var b=f.menuName;var h=f.description;var l=f.icon;var g=a+"progMenu";var p=dijit.byId(a);if(p!=null){p.oncontextmenu=null}if(pMenu!=null){pMenu.destroyRecursive()}pMenu=null;pMenu=new dijit.Menu({targetNodeIds:[a],id:g,style:"display: none;"});var o={identifier:"menuXpath",label:"menuXpath",items:f.children[0]};menuStore=new dojo.data.ItemFileReadStore({data:o});menuStore.fetch({onItem:function(s,q){processMenuItem(s,pMenu,m)},onError:displayError,queryOptions:{deep:true}})}function loadMenuData(g,f,h){var a=menus.findIt(h);if(a==-1){dojo.xhrPost({url:"../../../MenuRequest",content:{menuId:h},handleAs:"json",load:function(m,l){menus.put(h,m);processMenuData(m,g,f)}})}else{var b=menus.get(h);processMenuData(b,g,f)}}function createMenu(f,b,a){loadMenuData(a,b,f);if(pMenu!=null){pMenu.startup()}}function destroyMenu(){}var ACTIVITY_FLD_PREFIX="ActivityFld_";var TEMPLATE_FLD_PREFIX="TemplateFLD_";var ACTIVITY_ID_FLD="activityId";var TEMPLATE_ID_FLD="templateId";var EMAIL_OUTBOUND_ACTIVITY_TYPE="Email - Outbound";var TEMPLATE_CLASS=".tempFldClass";var TEMPLATE_TABLE_ID="structTemplateTb";var ACTIVITY_TYPE_FLD="activityType";var ACTIVITY_COMMENTS_FLD="comments";var ACTIVITY_AUDIENCE_FLD="audience";var AUDIENCE_PUBLIC="Public";var AUDIENCE_INTERNAL="Internal";var TEXT_PREFIX="text_";var CHK_PREFIX="chk_";var errorMsg_EscalationActivityOpen="Please Save or Cancel out of the open Escalation Activity before making Escalation Activity Updates";var tinit=false;dojo.declare("custom.Dialog",dijit.Dialog,{hideD:true,modId:"",hide:function(){if(dijit.byId("instructionDOp")){var b=dijit.byId("instructionDOp").getValue();if(b==""){var a=SRUtils.showActivityInstructionModifiedAlert(this.modId);if(a==0){this.inherited(arguments)}}else{this.inherited(arguments)}}else{this.inherited(arguments)}}});function requestTemplate(h,b,l){if(!dijit.byId("pleasewait").open){}dijit.byId("pleasewait").show();var g=getActiveSrId();var f=getQueryTabName();var o=getSrModId();var m=getSrNumber();var a=dojo.xhrPost({url:"../../../TemplateRequest",content:{operation:"create",templateId:h,activityType:b,srId:g,queryTabName:f,modId:o,activeSR:m},handleAs:"json",load:function(q,p){dijit.byId("pleasewait").hide();return q},error:function(s,q){dijit.byId("pleasewait").hide();var p=getDisplayMessageObj("Request to create new SR Activity failed or timed out.",2);displayErrors(p);console.debug("Request to create new SR Activity failed or timed out.",s);return s},timeout:1200000});a.addCallback(function(p){processTemplateData(p,h,l);return p})}function processTemplateData(f,b,g){var a=f.opStatus;if(a==0){displayTemplate(f,g);populate(f);processDefaultTMenuData(f,b);processQMenuData(f,b);addOnBlurForActivityFlds(f);ActivityFocus.setFocusNode(f);setTimeout(ActivityFocus.setPositionInFocusNode,1000)}else{displayErrors(f)}}function populate(b){var a=b.fdata;tinit=false;if(a!=null){tinit=true;dojo.forEach(a,function(u){var h=u.fieldId;var p=u.fieldValue;var q=u.fieldType;var o=u.buscomp;var m=u.buscompFld;var f=u.buscompOp;var l=dijit.byId(h);if(l!=null){if(o!=null&&o=="Service Request"&&f!="create"){l.setDisabled(true);m=m.replace(/\s+/g,"");m=m.substring(0,1).toLowerCase()+m.substring(1);var g=m+"LovBtn";if(document.getElementById(g)){dojo.style(g,"display","none");if(p){dojo.style(dojo.byId(h),"width",(parseInt(p.length)*0.6).toString()+"em")}}}if(p!=null&&p!=""){if(document.getElementById(h).type=="checkbox"){if(p=="true"){l.setValue(true)}}else{if(q!=null&&q=="Date"){var s=dojo.date.locale.parse(p,{datePattern:"dd-MMM-yyyy",timePattern:"hh:mm:ss a",selector:"",locale:"en-us"});if(s!=null){l.setValue(s)}}else{if(l.editNode!=undefined&&dojo.isIE){dojo.style(l.editNode,"whiteSpace","pre")}l.setValue(p)}}}}});tinit=false}}function setInteractiveData(b){for(var g=0;g<b.length;g++){var h=b[g];var f=a(h.fieldLabel);if(f!=undefined&&h.fieldValue!=undefined){dijit.byId(f.id).setValue(h.fieldValue)}}function a(m){var o=dojo.query(TEMPLATE_CLASS);var l;dojo.forEach(o,function(p){if(p.title==m){l=p}});return l}}function TemplateFieldObj(){this.fieldId="";this.fieldValue="";this.fieldType="";this.buscomp="";this.buscompFld="";this.buscompOp=""}function getTemplateInitMode(){return tinit}function displayTemplate(o,v){var a=getActionUpdateNode();a.destroyDescendants();a.containerNode.innerHTML="";var s=a.domNode;var q=getCPaneNode();var z=getActionDataNode();var u=getBC1Node();dojo.style(s,"height","350px");dojo.style(s,"visibility","visible");dojo.style(s,"overflow","auto");var w=o.templateJson;var h=w.uiNode;a.setContent(h);var g=dojo.contentBox(a.domNode);if(v!=undefined&&v=="true"&&dijit.byId("odmLot")!=undefined){setFieldVal("odmLot","true")}var b=getSubstatusTemplateFldId();if(b!=""&&dijit.byId(b)){var m="";if(dijit.byId("status")){m=dijit.byId("status").getValue()}var y=new dojo.data.ItemFileReadStore({url:"../../../SRHeaderRequest?action=loadlov&parentValue="+m+"&lov=SR_SUB_STATUS&rev="+enabledLOVServlets.get("SRHeaderRequest")});if(store!=undefined){dijit.byId(b).store=y}}var l=dijit.byId("activityType");var p=l.value;if(p==="Escalation"){var x=dijit.byId("ActivityFld_categoryEscalationfs");if(x){var f=new dojo.data.ItemFileReadStore({url:"../../../ActivityLovRequest?q=FS_ACTIVITY_CLASS&type=Escalation"});if(f){x.store=f}if(x.value!==""){setCategoryResolutionLOV(x)}}}dojo.parser.parse("actionUpdate")}function getSubstatusTemplateFldId(){var a=(dijit.byId("TemplateFLD_subStatus"))?dijit.byId("TemplateFLD_subStatus").getValue():"";return a}var saveActivityWarningCBFunc;var saveActivityCancelCBFunc;function submitPane(o,m,p,g){var f=getFieldVal("activityId");f=(f=="")?"newActivity":"activity_"+f;var a=SRUtils.showOtherSectionModified(f);if(a!=0){return}dijit.byId("pleasewait").show();var h="";h+=checkProfile(o);if(h!=null&&h!=""){h+="\n"}h+=checkProfile(m);if(h!=null&&h!=""){h+="\n"}h+=checkEscalationResolved();if(h!=null&&h!=""){dijit.byId("pleasewait").hide();alert("Validation Error:\n"+h);return false}var b=validateTemplateData();if(b!=undefined&&b.opStatus==FAILURE_STATUS){dijit.byId("pleasewait").hide();window.saveActivityWarningCBFunc=function(){dijit.byId("pleasewait").show();var q=postAForm("form1");invokeSave(q,false,p)};window.saveActivityCancelCBFunc=function(){if(dijit.byId(MESSAGE_DIALOG_ID)){dijit.byId(MESSAGE_DIALOG_ID).hide()}};displayErrors(b,window.saveActivityWarningCBFunc,window.saveActivityCancelCBFunc);return false}var l=postAForm("form1");invokeSave(l,false,p,g)}function postInvokeSave(){dijit.byId("pleasewait").show();var a;a=postAForm("form1");invokeSave(a,true)}var activityInProgress=false;function invokeSave(l,f,s,g){activityInProgress=true;var a=getActiveSrId();var q=getQueryTabName();var m=getSrModId();var p=getSrNumber();if(s==undefined){s=false}var b=SRMJSTimer.startTimer("saveActivity_"+p);var o={url:"../../../SaveActivityRequest",content:{formStr:dojo.toJson(l),srId:a,queryTabName:q,modId:m,activeSR:p,skipValidation:f,sendemail:s,sendEmailDetailed:g},handleAs:"json",load:function(z){activityInProgress=false;SRMJSTimer.endTimer(b);var C=SRMJSTimer.startTimer("saveActivity_renderActivity_"+p);dijit.byId("pleasewait").hide();var y=z.opStatus;if(y==0){var E=getActionDataNode();var A=false;var D=getResultProperty(z,"odmMenuRefresh");if(D!=undefined&&D==true){A=true}var v=getResultProperty(z,"refActivityId");var x=getResultProperty(z,"srData");var w=getResultProperty(z,"autoEmailExc");var B=getResultProperty(z,"refreshActivityExc");closePane(v);var u=false;if(v=="newActivity"){u=true}if(w!=undefined&&w!=""){alert(w)}if(B!=undefined&&B!=""){alert(B);return}if(x!=undefined){partialHeaderNActivityRefresh(x,A,u)}}else{displayErrors(z,"postInvokeSave()")}SRMJSTimer.endTimer(C);return z},error:function(u,v){activityInProgress=false;SRMJSTimer.endTimer(b);dijit.byId("pleasewait").hide();if(u.opStatus!=null){displayErrors(u)}else{xhrErrHandler(u,v,(ERROR_WHILE_SAVING_ACTIVITY+escape("<br/>")))}return u},timeout:300000};var h=dojo.xhrPost(o)}function createActivityPlan(g){dijit.byId("pleasewait").show();var a=new Date().getTimezoneOffset();var f=getActiveSrId();var b=getQueryTabName();var m=getSrModId();var l=getSrNumber();var h={url:"../../../SaveActivityRequest",content:{tzOffset:a,action:"createActivityPlan",activityPlan:dojo.toJson(g),srId:f,queryTabName:b,modId:m,activeSR:l},handleAs:"json",load:function(u){dijit.byId("pleasewait").hide();var o=u.opStatus;if(o==0){var s=getActionDataNode();var v=false;var q=getResultProperty(u,"odmMenuRefresh");if(q!=undefined&&q==true){v=true}var p=getResultProperty(u,"srData");if(p!=undefined){refreshAfterSROp(p,true,v,true)}s.refresh()}else{displayErrors(u)}return u},error:function(p){dijit.byId("pleasewait").hide();var o=getDisplayMessageObj("Request to create new activity plan Failed or Timed out.",2);displayErrors(o);return p},timeout:1200000};dojo.xhrPost(h)}function checkEscalationResolved(){var h="";var a=dijit.byId("ActivityFld_statusEscalationfs");var g=(a&&a.getValue()==="Escalation Resolved")?true:false;if(g){var f=dijit.byId("ActivityFld_resolutionCodeEscalationfs");var b="Resolution";if(f!=undefined&&(f.getValue()==null||f.getValue()==""||f.getValue()=="\n"||(/^\s*$/).test(f.getValue()))&&f.type!="checkbox"){h+=b+" is required field. Please provide valid value.\n"}f=dijit.byId("ActivityFld_categoryEscalationfs");b="Category";if(f!=undefined&&(f.getValue()==null||f.getValue()==""||f.getValue()=="\n"||(/^\s*$/).test(f.getValue()))&&f.type!="checkbox"){h+=b+" is required field. Please provide valid value.\n"}}return h}function checkProfile(h){var l="";if(h==null||h==""){return true}var f=h.required;var b=h.date;var a=h.number;var g=h.combo;if(dojo.isArray(f)){dojo.forEach(f,function(p){var q=p.fieldId;var m=p.label;var o=dijit.byId(q);if(o!=undefined&&(o.getValue()==null||o.getValue()==""||o.getValue()=="\n"||(/^\s*$/).test(o.getValue()))&&o.type!="checkbox"){l+=m+" is required field. Please provide valid value.\n"}})}if(dojo.isArray(b)){dojo.forEach(b,function(p){var q=p.fieldId;var m=p.label;var o=dijit.byId(q);if(o!=undefined&&o.getValue()!=null&&o.getValue()!=""&&!dojo.validate.isValidDate(o.getValue())){l+=m+" is not a valid date format.\n"}})}if(dojo.isArray(g)){dojo.forEach(g,function(q){var s=q.fieldId;var o=q.label;var p=dijit.byId(s);try{if(p!=undefined&&p.getValue()!=null&&p.getValue()!=""&&!p.isValid()){l+=o+" is not a valid value. Select from drop down list.\n"}}catch(m){console.log(m)}})}return l}function validateTemplateData(){var a=getFieldVal(ACTIVITY_TYPE_FLD);var g=new Array();var b=getSuccessMessageObj(g);if(a==EMAIL_OUTBOUND_ACTIVITY_TYPE){var f=dojo.query(TEMPLATE_CLASS,TEMPLATE_TABLE_ID);var h=false;dojo.forEach(f,function(l){if(l.title=="Email To"){var s=l.id;var p=dijit.byId(s).getValue();if(p!=undefined){var m=p.indexOf("@");var o=p.lastIndexOf(".");if(m==-1||o==-1){var q=createMessageObject("Email address is not valid.",WARNING);g.push(q)}}if(isPartnerSR()&&p.toUpperCase().indexOf(headerDataAsJson.indirectContEmail.toUpperCase())!=-1&&!PartnerSRUtil.hasAccessForIndirectCont()&&(!isEmptyVal(headerDataAsJson.indirectContEmail)&&headerDataAsJson.indirectContEmail.toUpperCase()!=headerDataAsJson.ContactEmail.toUpperCase())){h=true;var q=createMessageObject("End Customer does not have access to view the SR, therefore end customer email address is not allowed in 'Email To' field. Please check End Customer Visibility field stamped on the SR.",ERROR);g.push(q)}}})}if(g!=null&&g.length>0){b=(h)?getErrMessageObj(g):getWarningMessageObj(g)}return b}function closePane(h){if(h==""||h==null){h="newActivity"}SRUtils.unmarkChanges(h);var a=getActionUpdateNode();var g=getCPaneNode();if(a!=null){var f=dojo.contentBox(a.domNode);if(f!=0){a.destroyDescendants();a.containerNode.innerHTML="";var b=0;dojo.style(a.domNode,"height",b+"px");dojo.style(a.domNode,"visibility","hidden");dojo.style(a.domNode,"overflow","hidden");g.refresh()}}}function setEditorFormVal(b,a){document.getElementById(b).value=dijit.byId(a).getValue(false)}function setFSVal(q,b){try{var a=q.id;var o=q.activityType;var p=dijit.byId(a);var f=p.getDisplayedValue();var m=document.getElementById(b);m.value=f;var h=dijit.byId("saveAndSendEmail_HeaderRow");var g=dijit.byId("saveAndSendEmail_ButtonRow");if(g){if((b=="ActivityFld_audience")&&(m.value=="Internal")){h.setAttribute("disabled",true);h.style.backgroundColor="CCCCCC";g.setAttribute("disabled",true);g.style.backgroundColor="#CCCCCC"}else{h.setAttribute("disabled",false);h.style.backgroundColor="transparent";g.setAttribute("disabled",false);g.style.backgroundColor="transparent"}}}catch(l){console.log(l)}}var defaultTMenubar;var defaultTMenu;var defaultTMenuStore;function processDefaultTMenuItem(v,m,f){var u=v.defaultMenuName;var q=v.defaultMenuId;var g=null;if(v.children!=null){g=v.children[0]}var l=false;if(g==null){var o=new dijit.MenuItem({label:u,disabled:l,parentMenu:m,onClick:function(){substituteText(f,q,u,"","default")}});m.addChild(o)}else{var a=dijit.byId(q+"SubMenu");if(a!=null){a.destroyRecursive()}var s=new dijit.Menu({id:q+"SubMenu",parentMenu:m});for(var h=0;h<g.length;h++){var b=g[h];processDefaultTMenuItem(b,s,f)}var p=dijit.byId("popup"+q);if(p!=null){p.destroy()}m.addChild(new dijit.PopupMenuItem({label:u,popup:s,id:"popup"+q}))}}function processDefaultTMenuData(g,b){var m=g.templateJson.defaultMenuNode;if(m==null||m.items==null||m.items[0]==null||m.items[0].length==0){return}var q="Default";var l="defaultTMenu";if(defaultTMenu!=null){defaultTMenu.destroyRecursive()}var p=document.getElementById("defaultTMenuC");if(p==null){return}p.setAttribute("class","box");var a=document.createElement("div");a.setAttribute("style","overflow:auto;");var h=new dijit.Menu({},a);var o=dijit.byId(l+"Button");if(o!=null){o.destroyRecursive()}var f=new dijit.form.DropDownButton({id:l+"Button",label:q,showLabel:true,dropDown:h});p.appendChild(f.domNode);var s={identifier:"defaultMenuId",label:"defaultMenuId",items:m.items[0]};defaultTMenu=new dijit.Menu({id:l+"pmenu"});f.addChild(defaultTMenu);defaultTMenuStore=new dojo.data.ItemFileReadStore({data:s});defaultTMenuStore.fetch({onItem:function(v,u){processDefaultTMenuItem(v,h,b)},onError:displayError,queryOptions:{deep:true}});h.startup()}function substituteText(f,o,g,q,p,b){var a=getActiveSrId();var m=getQueryTabName();var h=getSrModId();var l=getSrNumber();dojo.xhrPost({url:"../../../TemplateRequest",content:{operation:"substituteText",templateId:f,menuId:o,menuName:g,questionId:q,menuType:p,srId:a,queryTabName:m,modId:h,activeSR:l},handleAs:"json",load:function(w,v){var s=w.opStatus;if(s==0){var u=w.substituteTextJson.textValues[0];if(dojo.isArray(u)){dojo.forEach(u,function(y){var z=(b!=undefined&&b)?"textarea_"+y.questionId:"TemplateFLD_"+y.questionId;var x=y.questionValue;if(dijit.byId(z)!=null&&x!=null){dijit.byId(z).setValue(x);dijit.byId(z).domNode.focus()}})}}else{displayErrors(w)}return w},error:function(v,u){dijit.byId("pleasewait").hide();var s=getDisplayMessageObj("Request to substitute text failed or timed out.",2);displayErrors(s);return v}})}function processQMenuData(g,b,a){var f=g.templateJson.qMenuNode;if(dojo.isArray(f)){dojo.forEach(f,function(o){var l=o.questionId;var m=o.children[0];var h=(a)?"autofill_"+l:l+"_TMenuC";var p=document.getElementById(h);if(p==null){return}p.setAttribute("class","box");dojo.forEach(m,function(A){var y=A.menuName;var w=A.menuId;var q=document.createElement("div");q.setAttribute("style","overflow:auto;");var u=new dijit.Menu({},q);var x=dijit.byId(w+"Button");if(x!=null){x.destroyRecursive()}var z=new dijit.form.DropDownButton({id:w+"Button",label:y,showLabel:true,dropDown:u});p.appendChild(z.domNode);var B={identifier:"menuId",label:"menuId",items:A.children[0]};var s=dijit.byId(w+"pmenu");if(s!=null){s.destroyRecursive()}s=new dijit.Menu({id:w+"pmenu"});z.addChild(s);var v=new dojo.data.ItemFileReadStore({data:B});v.fetch({onItem:function(C,D){processQMenuItem(C,u,b,a)},onError:displayError,queryOptions:{deep:true}});u.startup()})})}}function processQMenuItem(x,o,g,b){var w=x.menuName;var s=x.menuId;var u=x.questionId;var h=null;if(x.children!=null){h=x.children[0]}var m=false;if(h==null){var p=new dijit.MenuItem({label:w,disabled:m,parentMenu:o,onClick:function(){substituteText(g,s,w,u,"qmenu",b)}});o.addChild(p)}else{var a=dijit.byId(s+"SubMenu");if(a!=null){a.destroyRecursive()}var v=new dijit.Menu({id:s+"SubMenu",parentMenu:o});for(var l=0;l<h.length;l++){var f=h[l];processDefaultTMenuItem(f,v,g)}var q=dijit.byId("popup"+s);if(q!=null){q.destroy()}o.addChild(new dijit.PopupMenuItem({label:w,popup:v,id:"popup"+s}))}}function fetchAttachmentUrls(g){var f="";var a="stop";for(var b=0;b<g.length;b++){if(g.charAt(b-7)=="F"&&g.charAt(b-6)=="i"&&g.charAt(b-5)=="l"&&g.charAt(b-4)=="e"&&g.charAt(b-3)=="N"&&g.charAt(b-2)=="a"&&g.charAt(b-1)=="m"&&g.charAt(b)=="e"){a="start"}if(g.charAt(b)=="F"&&g.charAt(b+1)=="i"&&g.charAt(b+2)=="l"&&g.charAt(b+3)=="e"&&g.charAt(b+4)=="C"&&g.charAt(b+5)=="o"&&g.charAt(b+6)=="m"&&g.charAt(b+7)=="m"&&g.charAt(b+8)=="e"&&g.charAt(b+9)=="n"&&g.charAt(b+10)=="t"){a="stop";f=f+"~~~"}if(a=="start"){f=f+g.charAt(b)}}return f}function replaceHrefsWithUrls(l,m){var h;var a;var f;var g=l.split("~~~");for(var b=0;b<g.length;b++){h=g[b];a=h.substring(h.indexOf('_blank">')+8,h.indexOf("</a>"));f=h.substring(h.indexOf("href=")+6,h.indexOf('" target='))+"~~~";m=m.replace(a,"key="+a+"val="+f)}return m}function saveActivityComments(b,h){var a=SRUtils.showOtherSectionModified("activity_"+b);if(a!=0){return}dijit.byId("pleasewait").show();var o=new Array();var f="";var l=TEXT_PREFIX+b;var u=dijit.byId(l);f=dijit.byId(l).getValue();var p=f.substring(f.indexOf("FileName")+8,f.indexOf("FileComment"));var g;var m="no";if(p.indexOf("href=")!=-1){g=fetchAttachmentUrls(f);m="yes"}if(dojo.isIE){f=filterTags(window._IE_editor_filters,f,true)}else{f=filterTags(window._filters,f,true)}if(h!=undefined&&h!=""&&h!="-9999"){var s=confirm("This activity has template associated. Updating activity comments directly will overwrite the previous template used.");if(!s){dijit.byId("pleasewait").hide();return}}if(m=="yes"){f=replaceHrefsWithUrls(g,f)}var q=new Object();q.name=TEMPLATE_FLD_PREFIX+ACTIVITY_COMMENTS_FLD;q.value=encodeURIComponent(f);o.push(q);var q=new Object();q.name=TEMPLATE_ID_FLD;q.value="-9999";o.push(q);var q=new Object();q.name=ACTIVITY_ID_FLD;q.value=b;o.push(q);invokeSave(o,false)}function onChangeText(b){var a=TEXT_PREFIX+b;var f=dijit.byId(a);f.style.cssText="font-color: orange; font-weight:bold;"}function toggleAudience(l,a){var g=SRUtils.showPageModifiedAlert();if(g!=0){return}dijit.byId("pleasewait").show();var h=new Array();var f=l.checked;var b=dojo.byId(CHK_PREFIX+a);var m="";if(f){m=AUDIENCE_PUBLIC}else{m=AUDIENCE_INTERNAL}var o=new Object();o.name=ACTIVITY_FLD_PREFIX+ACTIVITY_AUDIENCE_FLD;o.value=m;h.push(o);var o=new Object();o.name=ACTIVITY_ID_FLD;o.value=a;h.push(o);invokeSave(h,false)}function getActivityAudit(b){var f={url:"../../../SRRequest",content:{action:"loadActivityAudit",activityId:b},preventCache:true,handleAs:"json",load:function(l,h){if(l.opStatus==0){var g=new Object();g.Id=b;g.bcomp="Action";displayAuditdialog(l,g);return l}else{displayErrors(l)}},error:function(l,h){var g=getDisplayMessageObj("Request to retrieve SR Activity audit details failed or timed out.",2);displayErrors(g)},timeout:6000};var a=dojo.xhrPost(f)}function displayAuditdialog(I,u){if(dijit.byId("auditGrid")!=null){dijit.byId("auditGrid").destroyRecursive()}var s=new Array();var a=I.opResult;if(dojo.isArray(a)&&a.length>0){var B=a[0];var H=new srmdojoc.data.SPHomeQueryReadStore({url:"../../../SRRequest",urlPreventCache:true,clearOnClose:true,requestMethod:"get",jsId:"auditStore",doClientPaging:false,doClientSorting:false});dojo.connect(H,"errorHandler",this,dojo.hitch(this,function(J,K){ajaxLoadingError(J,K,"auditRowCount")}));var f=u.bcomp;var v="";var G="";var D="";var l="";var y="";var C="";if(f=="Action"){v=u.Id}if(f=="SR"){G=u.Id;l=u.tabName;C=getSrModId();y=getSrNumber()}if(f=="SROutage"){D=u.Id}var m=(new Date()).getTime();var z=new srmdojoc.data.SPHomeDojoData(null,H,{jsId:"gmodel",rowsPerPage:100,clientSort:false,cache:false,query:{action:"getAuditData",bcomp:f,activityId:v,SROutageId:D,srId:G,queryTabName:l,modId:C,activeSR:y,t:m}});s.push(dojo.connect(z,"spHomePreRequestRows",this,dojo.hitch(this,auditLoadingOn)));s.push(dojo.connect(z,"processRows",this,dojo.hitch(this,auditLoadingOff,z)));var p={cells:B.cells};var E=[p];var x=new dojox.Grid({id:"auditGrid",elasticview:"2",model:z,structure:E,canSort:canSort,rowSelector:true});var o=dojo.byId("gridC");var A=B.searchStore;var F=dijit.byId("auditCombo");var g=new dojo.data.ItemFileReadStore({id:"auditLovStore",jsId:"auditLovStore",data:{identifier:A.identifier,items:A.items}});if(F!=null){F.store=g}var w=dijit.byId("auditSearch");if(w!=null){w.setValue("")}var h=dijit.byId("auditGo");var b=dijit.byId("auditClose");var q=new Array();if(h!=null){q.push(dojo.connect(h,"onClick",function(){filterAudits(u)}))}if(b!=null){q.push(dojo.connect(b,"onClick",function(){dijit.byId("auditDialog").hide()}))}o.appendChild(x.domNode);x.render();x.update();s.push(dojo.connect(dijit.byId("auditDialog"),"hide",function(){if(z!=undefined&&z!=null){z.clearData(false)}if(dijit.byId("auditGrid")!=null){dijit.byId("auditGrid").destroyRecursive()}disconnectSavedHandles(q);F.store=null;disconnectSavedHandles(s)}));dijit.byId("auditDialog").show()}return}function canSort(a){if(a==5){alert("Sorting is not allowed on New Value column.");return false}if(a==4){alert("Sorting is not allowed on Old  Value column.");return false}if(a==2){alert("Sorting is not allowed on Field column.");return false}return true}function filterAudits(qdata){var combo=dijit.byId("auditCombo");if(combo!=null){var comboVal=combo.getValue();var comboDisplayedVal=combo.getDisplayedValue();if(comboVal==""||comboVal==null){alert('Please select value for "Find".');return}var text1=dijit.byId("auditSearch");var textVal;if(text1!=null){textVal=encodeURIComponent(text1.getValue())}if(textVal==""||textVal==null){alert('Please provide value for "Value".');return}if(textVal!=null&&textVal!=""){var bcomp=qdata.bcomp;var activityId="";var srId="";var SROutageId="";var qtabName="";var activeSrNumber="";var modId="";if(bcomp=="Action"){activityId=qdata.Id}if(bcomp=="SR"){srId=qdata.Id;qtabName=qdata.tabName;modId=getSrModId();activeSrNumber=getSrNumber()}if(bcomp=="SROutage"){SROutageId=qdata.Id}var queryStr="{"+comboVal+': "'+textVal+'"}';var grid=dijit.byId("auditGrid");var queryObj=eval("("+queryStr+")");if(grid!=null){grid.model.store.errorMsg="";var t=(new Date()).getTime();grid.model.query={action:"getAuditData",bcomp:bcomp,activityId:activityId,SROutageId:SROutageId,srId:srId,queryTabName:qtabName,modId:modId,activeSR:activeSrNumber,queryObj:dojo.toJson(queryObj),t:t};grid.model.refresh()}}}}function auditLoadingOn(){if(dojo.byId("auditRowCount")){dojo.byId("auditRowCount").innerHTML="Loading ...."}}function auditLoadingOff(a){if(dojo.byId("auditRowCount")){dojo.byId("auditRowCount").innerHTML=(a.store.getServerRowCount()==-1)?"WS Error":"Total: "+a.store.getRealRowCount()+" Row count: "+a.store.getServerRowCount()}}var activityUpdatesMap=new Map();function getActivityUpdates(b){var l=SRUtils.showOtherSectionModified("");if(l!=0){return}dijit.byId("pleasewait").show();var g=getActiveSrId();var f=getQueryTabName();var o=getSrModId();var m=getSrNumber();var h={url:"../../../SRRequest",content:{action:"loadActivityInstructions",activityId:b,srId:g,queryTabName:f,modId:o,activeSR:m},preventCache:true,handleAs:"json",load:function(w,u){dijit.byId("pleasewait").hide();if(w.opStatus==0){if(w.isEscalationActivity){var p=getActionUpdateNode();var q=p.domNode;var s=dojo.style(q);var v=dijit.byId("activityType");var x=dijit.byId("activityId");if((v!=undefined&&v.getValue()=="Escalation")&&(x!=undefined&&x.getValue()==b)&&(s!=undefined&&s.visibility!=undefined&&s.visibility=="visible")){alert(errorMsg_EscalationActivityOpen);return}displayActivityInstructionDialog(w,b,"Escalation")}else{displayActivityInstructionDialog(w,b)}return w}else{displayErrors(w)}},error:function(s,q){dijit.byId("pleasewait").hide();var p=getDisplayMessageObj("Request to load SR Activity Updates failed or timed out.",2);displayErrors(p)},timeout:120000};var a=dojo.xhrPost(h)}function displayActivityInstructionDialog(l,f,h){var w=undefined;if(l.activityHeaderFields!=undefined){w=l.activityHeaderFields}var v=l.opResult;if(dojo.isArray(v)&&v.length>0){var x=v[0];if(x.data!=undefined&&x.data!=null){var u=new dojo.data.ItemFileReadStore({data:x.data});activityUpdatesMap.put("activityUpdates",x.data);var g=new dojox.grid.data.DojoData(null,u,{jsId:"gmodel",query:{instructionId:"*"},clientSort:true});var s={modelAllChange:function(){dojo.byId("updRowCount").innerHTML="Row count: "+g.count}};g.observer(s);var q={cells:x.cells};var o=[q];if(dijit.byId("updatesGrid")!=null){dijit.byId("updatesGrid").destroy()}if(dijit.byId("newInstructionBtn")!=null){dijit.byId("newInstructionBtn").destroy()}var b=dojo.byId("gridUpd");var m=new dojox.Grid({id:"updatesGrid",elasticview:"2",model:g,structure:o,rowSelector:true});b.appendChild(m.domNode);m.render();m.update();if(dojo.byId("instructionBtnCell")){var a=getActiveSrId();var p=new dijit.form.Button({label:"New",name:"new",id:"newInstructionBtn",onClick:function(y){if(h){displayInstructionForUpdate(f,a,"",h,w)}else{displayInstructionForUpdate(f,a,"")}}});dojo.byId("instructionBtnCell").appendChild(p.domNode)}if(!dijit.byId("activityInstructionDialog").open){dijit.byId("activityInstructionDialog").show()}}}return}function displayInstructionForUpdate(ab,o,v,Y,S){if(dijit.byId("instructionUpdateDialog")){dijit.byId("instructionUpdateDialog").destroyRecursive()}var q="newInstruction";var at="instruction_";if(v!=null&&v!=""){q=at+v}if(Y!=undefined&&Y!=""){var an=new custom.Dialog({refocus:false,title:"Escalation Activity Updates",execute:processInstructionDialogInput,id:"instructionUpdateDialog",style:"z-index: 2;"})}else{var an=new custom.Dialog({refocus:false,title:"Update Activity Updates - Internal only / not published",execute:processInstructionDialogInput,id:"instructionUpdateDialog",style:"z-index: 2;"})}var ao=5;an.modId=q;if(dijit.byId("activityInstructionDialog")){var P=dijit.byId("activityInstructionDialog").domNode.style.zIndex;ao=parseInt(P)+10}dijit.byId("instructionUpdateDialog").domNode.style.zIndex=parseInt(ao);var O=document.createElement("table");var af=document.createElement("tbody");O.appendChild(af);var ar=document.createElement("tr");af.appendChild(ar);var b=document.createElement("td");dojo.attr(b,{nowrap:"nowrap"});ar.appendChild(b);dojo.attr(b,{colSpan:2});var G=new dijit.form.Button({label:"Cancel",name:"cancel",onClick:function(w){SRUtils.unmarkChanges(q);an.hide()}});var z=new dijit.form.Button({label:"Save",name:"save",type:"submit",onClick:function(){if(dijit.byId("instructionDOp")){dijit.byId("instructionDOp").setValue("save")}}});if(Y!=undefined&&Y!=""){var x=new dijit.form.Button({label:"Save and Publish",name:"saveAndPublish",type:"submit",onClick:function(){if(dijit.byId("instructionDOp")){dijit.byId("instructionDOp").setValue("saveAndPublish")}}});dojo.attr(b,{colSpan:3})}b.appendChild(G.domNode);b.appendChild(z.domNode);if(Y!=undefined&&Y!=""){b.appendChild(x.domNode)}var ak=document.createElement("tr");af.appendChild(ak);var ap=createLabelCell("Type:",true,"10%");ak.appendChild(ap);var N=document.createElement("td");ak.appendChild(N);var s=document.createElement("input");var A=fsTaskLOVMap.get(fsNoteTypeParentSupportLOVName);var a=new dojo.data.ItemFileReadStore({data:A});var ae=new dijit.form.FilteringSelect({name:"instructionType",id:"instructionType",autoComplete:true,searchAttr:"id",labelAttr:"name",store:a},s);N.appendChild(ae.domNode);var aj=document.createElement("tr");af.appendChild(aj);var ac=createLabelCell("Updates:",true,"10%");aj.appendChild(ac);var K=document.createElement("td");aj.appendChild(K);var p=document.createElement("textarea");var ah=new dijit.form.SimpleTextarea({id:"instructionText",name:"instructionText",style:"width:400px;",value:""},p);ah.startup();K.appendChild(ah.domNode);if(Y!=undefined&&Y!=""){var al=new dojo.data.ItemFileReadStore({url:"../../../ActivityLovRequest?q=EVENT_STATUSActivityEscalation&type=Escalation&rev="+enabledLOVServlets.get("SRHeaderRequest")});var h=document.createElement("input");var ai=new dijit.form.FilteringSelect({name:"activityHeader_status",id:"activityHeader_status",autoComplete:true,searchAttr:"lovVal",labelAttr:"display",required:true,store:al},h);var Q=document.createElement("tr");af.appendChild(Q);var X=createLabelCell("Status:",true,"10%");Q.appendChild(X);var M=document.createElement("td");Q.appendChild(M);M.appendChild(ai.domNode);dojo.connect(ai,"onChange",function(){var au=createLabelCellNotRequired("Category:","10%");var az=createLabelCellNotRequired("Resolution:","10%");if(ai.getDisplayedValue()=="Escalation Resolved"){var au=createLabelCell("Category:",true,"10%");var az=createLabelCell("Resolution:",true,"10%")}var aA=dojo.byId("activityInstComboCategory");var aE=aA.childNodes;var ay=aE[0];var ax=aE[1];var av=aE[2];dojo._destroyElement(ay);dojo._destroyElement(ax);dojo.place(au,av,"before");var w=dojo.byId("activityInstComboResolution");var aC=w.childNodes;var aB=aC[0];var aw=aC[1];var aD=aC[2];dojo._destroyElement(aB);dojo._destroyElement(aw);dojo.place(az,aD,"before");setEscalationStatusLOV(ai)});var y=new dojo.data.ItemFileReadStore({url:"../../../ActivityLovRequest?q=FS_ACTIVITY_CLASS&type=Escalation&rev="+enabledLOVServlets.get("SRHeaderRequest")});var m=document.createElement("input");var g=new dijit.form.FilteringSelect({name:"activityHeader_category",id:"activityHeader_category",autoComplete:true,searchAttr:"lovVal",onChange:function(){setFSVal(this,"activityHeader_category");setCategoryResolutionLOV(this)},labelAttr:"display",required:true,store:y},m);g.store=y;var D=document.createElement("tr");dojo.attr(D,{id:"activityInstComboCategory"});af.appendChild(D);var am=createLabelCellNotRequired("Category:","10%");D.appendChild(am);var F=document.createElement("td");D.appendChild(F);F.appendChild(g.domNode);var J=new dojo.data.ItemFileReadStore({url:"../../../ActivityLovRequest?q=ACT_RESOLUTION_CD&type=Escalation&rev="+enabledLOVServlets.get("SRHeaderRequest")});var l=document.createElement("input");var C=new dijit.form.FilteringSelect({name:"activityHeader_resolution",id:"activityHeader_resolution",autoComplete:true,searchAttr:"lovVal",labelAttr:"display",required:true,store:J},l);var L=document.createElement("tr");dojo.attr(L,{id:"activityInstComboResolution"});af.appendChild(L);var f=createLabelCellNotRequired("Resolution:","10%");L.appendChild(f);var B=document.createElement("td");L.appendChild(B);B.appendChild(C.domNode);if(S!=undefined){dijit.byId("activityHeader_category").setValue(S.activityHeader_category);dijit.byId("activityHeader_resolution").setValue(S.activityHeader_resolution);dijit.byId("activityHeader_status").setValue(S.activityHeader_status)}}var aa=createHiddenTextbox("hiddenActivityId",ab);var Z=createHiddenTextbox("hiddenSrId",o);var W=createHiddenTextbox("hiddenInstructionId",v);var R=createHiddenTextbox("hiddenIsEscalationType",(Y!=undefined&&Y!=""));var ad="";var E;var ag="";var u="";if(v!=undefined&&v!=""){ad="update";var I=activityUpdatesMap.findIt("activityUpdates");if(I!=-1){var aq=activityUpdatesMap.get("activityUpdates");E=getInstructionItem(aq,v);if(E!=null&&E.instructionId){ag=E.instructionText;u=E.instructionType;dijit.byId("instructionText").setValue(E.instructionText);dijit.byId("instructionType").setValue(E.instructionType);if(dijit.byId("activityHeader_category")!=undefined){dijit.byId("activityHeader_category").setValue(E.activityHeader_category)}if(dijit.byId("activityHeader_resolution")!=undefined){dijit.byId("activityHeader_resolution").setValue(E.activityHeader_resolution)}if(dijit.byId("activityHeader_status")!=undefined){dijit.byId("activityHeader_status").setValue(E.activityHeader_status)}populateResolutionAfterCategory2(E)}}}else{ad="create";if(S!=undefined){populateResolutionAfterCategory2(S)}}var U=createHiddenTextbox("operation",ad);var T=createHiddenTextbox("instructionDOp","");K.appendChild(aa.domNode);K.appendChild(Z.domNode);K.appendChild(W.domNode);K.appendChild(U.domNode);K.appendChild(T.domNode);K.appendChild(R.domNode);var V=new Object();V.detail=escape(u);dojo.connect(ae,"onChange",function(){if(ae.getDisplayedValue()!=u){SRUtils.onChangeFld(ae,q,u)}});var H=new Object();H.detail=escape(ag);dojo.connect(ah,"onBlur",function(){SRUtils.onChangeFld(ah,q,ag)});an.setContent(O);SRUtils.unmarkChanges(q);an.show()}function getInstructionItem(f,g){var a;if(f!=undefined&&f.items!=undefined){var b=f.items;dojo.forEach(b,function(h){if(h.instructionId==g){a=h}})}return a}function deleteInstruction(a,b,g){var f={hiddenActivityId:a,hiddenSrId:b,hiddenInstructionId:g,operation:"delete"};processInstructionDialogInput(f)}var parentActivityData=null;function setParentActivityData(a){parentActivityData=a}function refreshParentActivity(){if(parentActivityData!=null&&parentActivityData!=undefined){partialHeaderNActivityRefresh(parentActivityData,false,false);setParentActivityData(null)}}function processInstructionDialogInput(g){dijit.byId("pleasewait").show();var f=getActiveSrId();var b=getQueryTabName();var m=getSrModId();var l=getSrNumber();var h={url:"../../../SaveActivityRequest",content:{action:"saveActivityInstructions",json:dojo.toJson(g),srId:f,queryTabName:b,modId:m,activeSR:l},preventCache:true,handleAs:"json",load:function(q,p){dijit.byId("pleasewait").hide();if(q.opStatus=="0"){var o="newInstruction";if(q.srData!=undefined){setParentActivityData(q.srData)}if(g!=undefined&&g.hiddenInstructionId){o="instruction_"+g.hiddenInstructionId}SRUtils.unmarkChanges(o);if(dijit.byId("instructionUpdateDialog")){dijit.byId("instructionUpdateDialog").hide()}if(q.srData!=undefined){partialHeaderNActivityRefresh(q.srData,false,false)}if(g!=undefined&&g.hiddenActivityId){getActivityUpdates(g.hiddenActivityId)}return q}else{displayErrors(q)}},error:function(q,p){var o=getDisplayMessageObj("Request to save SR Activity Updates failed or timed out.",2);displayErrors(o)}};var a=dojo.xhrPost(h)}function displayAPTemplate(l){var a=SRUtils.showOtherSectionModified("");if(a!=0){return}var s=dijit.byId("apTemplateDialog");if(s!=null){closeDialog("apTemplateDialog");s.destroyRecursive()}var w="Enter Activity Plan Details";var g=document.createElement("div");s=new dijit.Dialog({id:"apTemplateDialog",style:"width: 90%;background-color:#FFFFEE;border:2px;z-index:5;",title:w,onExecute:saveAPTemplate},g);dojo.body().appendChild(g);var o=dojo.connect(s,"hide",function(){dojo.disconnect(o);s.setContent(null);s.destroyRecursive()});var z=document.createElement("table");s.setContent(z);z.setAttribute("width","100%");z.setAttribute("id","apTemplateTb");var m=document.createElement("tbody");z.appendChild(m);var b=l.name;var v=document.createElement("tr");m.appendChild(v);var h=document.createElement("td");h.setAttribute("colSpan",2);h.setAttribute("align","center");var x=createHeader(b);h.appendChild(x);v.appendChild(h);var v=document.createElement("tr");m.appendChild(v);var h=createSaveCancelButtonCell(s);v.appendChild(h);var v=document.createElement("tr");m.appendChild(v);var h=createLabelCell("Planned Start Date",false,"30%");v.appendChild(h);var f=createDateTextBoxCell("planPlannedDate");v.appendChild(f);var v=document.createElement("tr");m.appendChild(v);var h=createLabelCell("Description",false,"30%");v.appendChild(h);var y=createSimpleTextAreaCell("planDescription","width: 600px;",5);v.appendChild(y);var v=document.createElement("tr");m.appendChild(v);var h=document.createElement("td");h.setAttribute("colSpan","2");var u=createHiddenTextbox("planId",l.id);var q=createHiddenTextbox("planName",l.name);var p=createHiddenTextbox("planType",l.type);h.appendChild(u.domNode);h.appendChild(q.domNode);h.appendChild(p.domNode);v.appendChild(h);var v=document.createElement("tr");m.appendChild(v);var h=createSaveCancelButtonCell(s);v.appendChild(h);s.show();addUserTZ("apTemplateTb")}function getNextResponseFromActivityDiaglog(){if(dijit.byId("TemplateFLD_subStatus")){var a=dijit.byId("TemplateFLD_subStatus").getValue();if(dijit.byId(a)){onchange_buscomp(dijit.byId(a),"Sub-Status");return}}}function onchange_buscomp(s,h){if(h=="Sub-Status"){if(dijit.byId("activityId")!=undefined&&dijit.byId("activityId").getValue()!=""){return}var g=s.getValue();if(dijit.byId("TemplateFLD_nextResponseDue")){if(g==""){var f=getDisplayMessageObj("Unable to calculate the Next Response Due Date when SR Substatus is empty.",2);displayErrors(f)}var q=dojo.string.trim(getPageSytemParamValue("SRM_NEXT_RESPONSE_DUE_TIMEOUT_MILLIS"));var l=parseInt(q);if(isNaN(l)||l<=0){l=10000}var m=dijit.byId("TemplateFLD_nextResponseDue").getValue();if(dijit.byId(m)&&dijit.byId("severity")){var u=dijit.byId("severity").getValue();if((g==""||u=="")&&dijit.byId(m)){dijit.byId(m).setValue("")}var a=getActiveSrId();var p=new Date().getTimezoneOffset();var o=(dijit.byId("fld24x7").getValue()===false?"false":"true");var b={url:"../../../SRHeaderRequest",content:{srId:a,severity:u,substatus:g,fullSupportFlag:o,tzOffset:p,action:"getNextResponse"},handleAs:"json",load:function(v){dijit.byId("pleasewait").hide();if(v.opStatus==0){if(v.nextResponseDate!=undefined&&v.nextResponseDate!=null&&v.nextResponseDate!=""){var w=dojo.date.locale.parse(v.nextResponseDate,{datePattern:"dd-MMM-yyyy",timePattern:"hh:mm:ss a",selector:"",locale:"en-us"});dijit.byId(m).setValue(w)}}else{if(v.opStatus!=0){displayErrors(v)}}},error:function(w){dijit.byId("pleasewait").hide();var v=getDisplayMessageObj("Request to retrieve next response due date failed or timed out.",2);displayErrors(v)},timeout:l};dijit.byId("pleasewait").show();dojo.xhrPost(b)}}}}function saveAPTemplate(){var b={};b.desc=encodeURIComponent(dijit.byId("planDescription").getValue());b.type=encodeURIComponent(dijit.byId("planType").value);b.name=encodeURIComponent(dijit.byId("planName").value);b.planId=encodeURIComponent(dijit.byId("planId").value);b.plannedDate=dojo.byId("planPlannedDate").value;var a=dijit.byId("apTemplateDialog");if(a!=null){a.destroyRecursive();closeDialog("apTemplateDialog")}createActivityPlan(b)}function createSaveCancelButtonCell(h){var g=document.createElement("td");var l=document.createElement("div");l.setAttribute("width","10%");var b=new dijit.form.Button({label:"Save",type:"submit",onClick:function(){if(dijit.byId("instructionDOp")){dijit.byId("instructionDOp").setValue("save")}}},l);g.appendChild(b.domNode);var f=document.createElement("div");f.setAttribute("width","10%");var a=new dijit.form.Button({label:"Cancel",onClick:function(){if(dijit.byId("instructionDOp")){dijit.byId("instructionDOp").setValue("cancel")}h.hide()}},f);g.setAttribute("colSpan","2");g.appendChild(a.domNode);return g}function addOnBlurForActivityFlds(f){var a="";if(f!=undefined&&f.refActivityId){a=f.refActivityId}var b=dojo.query("select, input, textarea","activityTemplateTable");dojo.forEach(b,function(q){var o=dojo.attr(q,"id");o=(o==""||o==null)?dojo.attr(q,"name"):o;var p=dojo.attr(q,"readonly");var h=dojo.attr(q,"type");if(o!=null||o!=""||!p){var l=dijit.byId(o);if(l!=undefined&&l!=null){var g=l.getValue();var m=new Object();m.detail=escape(g);dojo.connect(l,"onBlur",function(){SRUtils.onBlurFld(l,m,a)})}}})}function createEmail(){if(!dijit.byId("pleasewait").open){}dijit.byId("pleasewait").show();var b=getActiveSrId();var a=getQueryTabName();var g=getSrModId();var f=getSrNumber();dojo.xhrPost({url:"../../../TemplateRequest",content:{operation:"createEmail",srId:b,queryTabName:a,modId:g,activeSR:f},handleAs:"json",load:function(m,l){dijit.byId("pleasewait").hide();var h=m.opStatus;if(h==0){displayTemplate(m);populate(m);processDefaultTMenuData(m,m.templateId);processQMenuData(m,m.templateId);addOnBlurForActivityFlds(m)}else{displayErrors(m)}return m},error:function(m,l){dijit.byId("pleasewait").hide();var h=getDisplayMessageObj("Request to create new SR Activity failed or timed out.",2);displayErrors(h);console.debug("Request to create new SR Activity failed or timed out.",m);return m},timeout:1200000})}function createOWC(b,g,a){if(!dijit.byId("pleasewait").open){}dijit.byId("pleasewait").show();if(g!=undefined&&g!=null){g=g.replace("<title>",getSrNumber());g=g.replace("<password>",headerDataAsJson.csi)}if(a!=undefined&&a!=null){a=a.replace("<password>",headerDataAsJson.csi)}var f=window.open(g);setTimeout(function(){getConfData(f,g,a)},0)}function getConfData(h,u,g){var v=new Array();var s=u.indexOf("password=");var o="password=".length;var l=(s!=-1)?u.substring(s+o):"";var f=new TemplateFieldObj();f.fieldLabel=getPageSytemParamValue("SRM_CONF_KEY_LABEL");f.fieldValue=l;v.push(f);var b=getPageSytemParamValue("SRM_REPLACE_CONF_URL_SWITCH");if(g!=undefined&&g!=""&&b!=undefined&&b=="ON"){var w=new TemplateFieldObj();w.fieldLabel=getPageSytemParamValue("SRM_CONF_URL_LABEL");w.fieldValue=g;v.push(w)}var a=getActiveSrId();var q=getQueryTabName();var m=getSrModId();var p=getSrNumber();dojo.xhrPost({url:"../../../TemplateRequest",content:{operation:"createOWC",srId:a,queryTabName:q,modId:m,activeSR:p},handleAs:"json",load:function(z,y){dijit.byId("pleasewait").hide();var x=z.opStatus;if(x==0){displayTemplate(z);populate(z);setInteractiveData(v);processDefaultTMenuData(z,z.templateId);processQMenuData(z,z.templateId);addOnBlurForActivityFlds(z);ActivityFocus.setFocusNode(z);setTimeout(ActivityFocus.setPositionInFocusNode,1000)}else{displayErrors(z)}return z},error:function(z,y){dijit.byId("pleasewait").hide();var x=getDisplayMessageObj("Request to create new SR Activity failed or timed out.",2);displayErrors(x);console.debug("Request to create new SR Activity failed or timed out.",z);return z},timeout:1200000})}var ActivityFocus={};ActivityFocus.focusInActivity;ActivityFocus.setFocusNode=function(g){ActivityFocus.focusInActivity=undefined;if(ActivityFocus.focusInActivity==undefined){for(var b=0;b<g.fdata.length;b++){var f=g.fdata[b];var a=f.buscompFld;var h=f.fieldId;if(a!=undefined&&a=="Comments"){ActivityFocus.focusInActivity=h;break}}}if(ActivityFocus.focusInActivity==undefined){ActivityFocus.focusInActivity="TemplateFLD_comments"}};ActivityFocus.setPositionInFocusNode=function(){var a=dijit.byId(ActivityFocus.focusInActivity);a.domNode.focus();ActivityFocus.focusStart(a)};ActivityFocus.focusStart=function(b){if(typeof b.domNode.selectionStart=="number"){b.domNode.selectionStart=b.domNode.selectionEnd=0}else{if(typeof b.createTextRange!="undefined"){b.focus();var a=b.createTextRange();a.collapse(true);a.select()}}};ActivityFocus.setActivityFocus=function(a){var a=dijit.byId(ActivityFocus.focusInActivity);ActivityFocus.focusStart(a)};function getSROutageAudit(){var b=dijit.byId("SROutageId").value;var f={url:"../../../SRRequest",content:{action:"loadSROutageAudit",SROutageId:b},preventCache:true,handleAs:"json",load:function(l,h){if(l.opStatus==0){var g=new Object();g.Id=b;g.bcomp="SROutage";displayAuditdialog(l,g);return l}else{displayErrors(l)}},error:function(l,h){var g=getDisplayMessageObj("Request to retrieve SR Outage audit details failed or timed out.",2);displayErrors(g)},timeout:6000};var a=dojo.xhrPost(f)}function setCategoryResolutionLOV(g){var m=g.value;var a=g.id;var f=g._lastDisplayedValue;var b=dijit.byId("ActivityFld_resolutionCodeEscalationfs");var h=dijit.byId("activityHeader_resolution");if((m==="")||m!==f){if(b){b.setValue("");b.setDisabled(true)}if(h){h.setValue("");h.setDisabled(true)}}if(a&&(a==="ActivityFld_categoryEscalationfs"||a==="activityHeader_category")){if(m&&m.substr(0,3)==="ESC"){var l={url:"../../../ActivityLovRequest",content:{q:"ACT_RESOLUTION_CD",type:"Escalation",parentLovVal:m},handleAs:"json",sync:true,preventCache:true,load:function(o){var p=new dojo.data.ItemFileReadStore({data:o});if(b){b.store=p;b.setDisabled(false)}if(h){h.store=p;h.setDisabled(false)}},error:function(o){console.error("An error occurred: "+o)},timeout:30000};dojo.xhrGet(l)}}}function setCategoryResolutionValue(g,a,m,h){var s=a;var l=m;var o=dijit.byId(g);if(o){var p=o._lastDisplayedValue;var u=dijit.byId("ActivityFld_resolutionCodeEscalationfs");var f=dijit.byId("activityHeader_resolution");if((s==="")){if(u){u.setValue("");u.setDisabled(true)}if(f){f.setValue("");f.setDisabled(true)}}if(s===""&&u){u.setDisabled(true)}if(s===""&&f){f.setDisabled(true)}if(s&&s!==p&&u){u.setValue("")}if(s&&s!==p&&f){f.setValue("")}if(s){var b={url:"../../../ActivityLovRequest",content:{q:"ACT_RESOLUTION_CD",type:"Escalation",parentLovVal:s},handleAs:"json",sync:false,preventCache:true,load:function(v){var w=new dojo.data.ItemFileReadStore({data:v});if(u){u.store=w}if(f){f.store=w}},error:function(v){console.error("An error occurred: "+v)},timeout:30000};var q=dojo.xhrGet(b);q.addCallback(function(v){if(u){u.setValue(l.trim());u.setDisabled(false)}if(f){f.setValue(l);f.setDisabled(false)}})}}}function populateResolutionAfterCategory(g){var f=g.fdata;var h="";var a="";var l="";var b="";if(f!=null){dojo.forEach(f,function(o){var q=o.fieldId;var p=o.fieldValue;var m=dijit.byId(q);if(m!=null){if(q==="ActivityFld_categoryEscalationfs"){h=q;a=p}else{if(q==="ActivityFld_resolutionCodeEscalationfs"){l=p;l=l.trim()}else{if(q==="ActivityFld_statusEscalationfs"){b=p}}}}});setCategoryResolutionValue(h,a,l,b)}}function populateResolutionAfterCategory2(f){var l=f;var g="activityHeader_category";var a=l.activityHeader_category;var h=l.activityHeader_resolution;var b=l.activityHeader_status;setCategoryResolutionValue(g,a,h,b)}function setEscalationStatusLOV(b){var a=b;var h=dijit.byId("ActivityFld_categoryEscalationfs");var o=dijit.byId("activityHeader_category");var l=dijit.byId("ActivityFld_resolutionCodeEscalationfs");var m=dijit.byId("activityHeader_resolution");if(a.value==="Escalation Resolved"){var f=document.getElementById("rqdActivityField_categoryEscalation");if(f){f.style.display=""}var g=document.getElementById("rqdActivityField_resolutionCodeEscalation");if(g){g.style.display=""}}else{var f=document.getElementById("rqdActivityField_categoryEscalation");if(f){f.style.display="none"}var g=document.getElementById("rqdActivityField_resolutionCodeEscalation");if(g){g.style.display="none"}}}dojo.require("srmdojoc.layout.DACTree");dojo.require("srmdojoc.layout.CONFTree");dojo.require("dojox.data.QueryReadStore");dojo.require("srmdojoc.layout.LazyLoadMetricsStore");dojo.require("dijit.form.Button");dojo.require("dijit.form.CheckBox");dojo.require("dijit.Tooltip");var jsQuo=String.fromCharCode(39);var TEMPLATE_FLD_TEXT="TemplateFLD_";var ACTIVITY_FLD_TEXT="ActivityFld_";var WAIT_DIV="pleasewait";var showISSTab=true;var CONFIGURATION_ACCESS_PRIV="CONFIGURATION_ACCESS_PRIV";var DAC_TAB_ID="DACTab";var ISS_TAB_ID="ISSTab";var CONF_TAB_ID="CONFTab";var AQA_TAB_ID="AQATab";var PUBLIC_TEXT="Public";var INTERNAL_TEXT="Internal";var WARNMSGID=1;var ERRMSGID=2;var subWin;var srNo;var attCount;var DACTabcp;var DACLogTree;var DACLogStore;var DACLogModel;var CONFTabcp;var CONFLogTree;var CONFStore;var CONFModel;var DCRModel;var ISSTabcp;var ISSstore;var ISSurl;var ISSPackGrid;var ISSPackStore;var ISSPackModel;var HCDetailsGrid;var HCDetailsStore;var HCDetailsModel;var ISSLogStore;var ISSLogModel;var ISSLogTree;var MetricsGridStore;var MetricsGridModel;var MetricsGrid;var HCGridStore;var HCGridModel;var HCGrid;var AQATabcp;var AQABox;var archivefilecount=0;var archivefilename;var archivefileurl;var sortByType;function buildThisSRDetailsURL(){var a=getActiveSrId();var b=getQueryTabName();var f=getSrModId();console.debug("srId="+a+"&queryTabName="+b+"&modId="+f);return("srId="+a+"&queryTabName="+b+"&modId="+f)}function displayAttachments(){console.debug("displayAttachments");var a="";var b="../../../SRAttachmentsRequest?type=fetchattachmentssortbyorder&"+buildThisSRDetailsURL();dojo.xhrPost({url:b,handleAs:"json",load:function(g,f){a=g.items[0].sortByString;if(a!=null&&a!="exception"){sortByType=a}else{sortByType="uploaddatedsc"}setupDACData()}})}function setupDACData(){console.debug("setupDACData ...");var a=getActiveSrId();var b=getQueryTabName();var g=getSrModId();if(a!=null&&a!=""&&b!=null&&b!=""&&g!=null&&g!=""){var f="../../../SRAttachmentsRequest?type=sr_sess&"+buildThisSRDetailsURL();if(!dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).show()}dojo.xhrPost({url:f,handleAs:"json",load:function(l,h){success=l.items[0].success;results=l.items[0].results;srNo=l.items[0].srNo;attCount=l.items[0].attachments*1;if(srNo==""||srNo==null){showMsg("No active SR!",ERRMSGID)}else{if(!dijit.byId("DACISSmainContainer")){setupTabs();renderDAC("attachments",null,null)}}if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}},error:function(h){if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}showMsg("Error determining current session SR information: "+h)}})}else{showMsg("No active SR!",ERRMSGID)}}function setupTabs(){console.debug("setupTabs ...");var f=isVisibleForUser(CONFIGURATION_ACCESS_PRIV);var b=new dijit.layout.BorderContainer({style:"overflow:auto;",id:"DACISSmainContainer"});var g=new dijit.layout.TabContainer({region:"center",id:"DACTabContainer",style:"width:auto; overflow:auto;"});b.addChild(g);if(dijit.byId(DAC_TAB_ID)){dijit.byId(DAC_TAB_ID).destroy()}DACTabcp=new dijit.layout.BorderContainer({title:"Attachments",id:DAC_TAB_ID,style:"overflow: auto;",alt:""});g.addChild(DACTabcp);if(showISSTab&&(f==true)){if(dijit.byId(ISS_TAB_ID)){dijit.byId(ISS_TAB_ID).destroy()}ISSTabcp=new dijit.layout.BorderContainer({title:"ISS",id:ISS_TAB_ID,style:"overflow: auto;",alt:""});g.addChild(ISSTabcp)}if(dijit.byId(AQA_TAB_ID)){dijit.byId(AQA_TAB_ID).destroy()}AQATabcp=new dijit.layout.BorderContainer({title:"Data Request",id:AQA_TAB_ID,style:"overflow: auto;",alt:""});g.addChild(AQATabcp);if(f==true){if(dijit.byId(CONF_TAB_ID)){dijit.byId(CONF_TAB_ID).destroy()}CONFTabcp=new dijit.layout.BorderContainer({title:"Configuration",id:CONF_TAB_ID,style:"overflow: auto;",alt:""});g.addChild(CONFTabcp)}if(dijit.byId("DACTabButtons")){dijit.byId("DACTabButtons").destroy()}if(dijit.byId("DACLogTree")){dijit.byId("DACLogTree").destroy()}if(dijit.byId("DACTabData")){dijit.byId("DACTabData").destroy()}var o=new dijit.layout.ContentPane({id:"DACTabButtons",region:"top",style:"position:relative; width:100%; height:45px; overflow:hidden;"});var l=new dijit.layout.ContentPane({id:"DACTabData",region:"center",style:"position:relative; width:100%; height:235px; overflow:auto;"});DACTabcp.addChild(o);DACTabcp.addChild(l);if(showISSTab&&(f==true)){if(dijit.byId("ISSTabButtons")){dijit.byId("ISSTabButtons").destroy()}if(dijit.byId("ISSTabData")){dijit.byId("ISSTabData").destroy()}var h=new dijit.layout.ContentPane({id:"ISSTabButtons",region:"top",style:"position:relative; width:100%; height:45px; overflow:hidden;"});var m=new dijit.layout.ContentPane({id:"ISSTabData",region:"center",style:"position:relative; width:100%; height:235px; overflow:auto;"});ISSTabcp.addChild(h);ISSTabcp.addChild(m)}displayForm(b);g.startup();var a=dojo.style(b.domNode,"height");if(a==0){dojo.style(b.domNode,"height","350px");b.resize()}dojo.connect(dijit.byId("DACTabContainer"),"selectChild",function(p){tabSelected(p)})}function tabSelected(b){console.debug("tabSelected: ",b);var a="../../../SRAttachmentsRequest?type=issws&infotype=logicalview&packagetype=url&"+buildThisSRDetailsURL();if(b.id==ISS_TAB_ID&&showISSTab){dijit.byId("ISSTabButtons").setContent("");dijit.byId("ISSTabData").setContent("");if(!dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).show()}dojo.xhrPost({url:a,handleAs:"json",load:function(g,f){ISSurl=g.items[0].issviewer;if(ISSurl=="empty"||ISSurl=="exception"){var h="";h+='<table width="100%">';h+="<tr>";h+='<td valign="top" align="left">';h+='<button class="negative" dojoType="dijit.form.Button" id="ISSretSR" onClick="returnToSR()" alt="Return To SR">';h+="Cancel";h+="</button>";h+="</td>";h+="</tr>";h+="</table>";dijit.byId("ISSTabButtons").setContent(h);if(ISSurl=="empty"){dijit.byId("ISSTabData").setContent("<center>No ISS Content exists for this SR.</center>")}else{dijit.byId("ISSTabData").setContent("<center>Unable to determine ISS Content</center>")}}else{renderISS()}if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}},error:function(f){showMsg("Error capturing ISS content details. ",ERRMSGID);if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}}})}if(b.id==DAC_TAB_ID){renderDAC("attachments",null,null)}if(b.id==AQA_TAB_ID){renderAQA()}if(b.id==CONF_TAB_ID){renderConfiguration()}}function loadISSViewer(){if(showISSTab){if(ISSurl!=""&&ISSurl!=null&&ISSurl!="no_url"){subWin=window.open(ISSurl,"mywindow","width=800,height=600,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,copyhistory=no,resizable=yes")}else{dijit.byId("ISSTabData").setContent("<center>There is no ADR content uploaded to this SR.</center>")}}}function renderISS(){console.debug("renderISS ...");if(showISSTab){var b="";b+='<table width="100%">';b+="<tr>";b+='<td valign="top" align="left">';b+='<button class="negative" dojoType="dijit.form.Button" id="ISSretSR" onClick="returnToSR()" alt="Return To SR">';b+="Cancel";b+="</button>";b+="&nbsp;";b+='<button class="negative" dojoType="dijit.form.Button" id="ISSViewer" onClick="loadISSViewer()" alt="ISS Viewer">';b+="Viewer";b+="</button>";b+="&nbsp;";b+='<button class="negative" dojoType="dijit.form.Button" id="ISSLogView" onClick="displayIssLogicalView()" alt="ISS Logical View">';b+="Logical View";b+="</button>";b+="&nbsp;";b+='<button class="negative" dojoType="dijit.form.Button" id="ISSPackView" onClick="displayISSPackageNames();" alt="ISS Package View">';b+="Package View";b+="</button>";b+="</td>";b+="</tr>";b+="</table>";dijit.byId("ISSTabButtons").setContent(b);var a="<center>";a+="ISS ADR content has been uploaded to this SR. ";a+="To view, please use the buttons.";a+="</center>";dijit.byId("ISSTabData").setContent(a);ISSTabcp.startup();ISSTabcp.resize()}}function renderAQA(){console.debug("renderAQA ...");if(dijit.byId("AQABox")){dijit.byId("AQABox").destroy()}AQABoxCp=new dijit.layout.BorderContainer({title:"Tools",id:"AQABox",style:"height: 585px; width: 1520px;",alt:""});AQATabcp.addChild(AQABoxCp);if(dijit.byId("availablePane")){dijit.byId("availablePane").destroy()}if(dijit.byId("buttonPane")){dijit.byId("buttonPane").destroy()}if(dijit.byId("selectedPane")){dijit.byId("selectedPane").destroy()}if(dijit.byId("selectedPaneTitle")){dijit.byId("selectedPaneTitle").destroy()}if(dijit.byId("buttonContainer")){dijit.byId("buttonContainer").destroy()}if(dijit.byId("buttonPaneTop")){dijit.byId("buttonPaneTop").destroy()}var g=new dijit.layout.ContentPane({id:"buttonPaneTop",region:"top",style:"position:relative; width:100%; height:30px; overflow:hidden;"});var l=new dijit.layout.ContentPane({id:"availablePane",title:"Available",region:"left",style:"height: 550px; width: 700px;"});var h=new dijit.layout.ContentPane({id:"buttonPane",title:"Controls",style:"position: absolute; left:720px; top: 50px; height: 500px; width: 80px;"});var b=new dijit.layout.ContentPane({id:"buttonContainer"});var f=new dijit.layout.AccordionContainer({id:"selectedPaneTitle",region:"right"});var a=new dijit.layout.AccordionPane({id:"selectedPane",title:"Tools On The Request",content:"hello",selected:true,style:"height: 550px; width: 700px;"});f.addChild(a);h.domNode.appendChild(b.domNode);AQABoxCp.addChild(g);AQABoxCp.addChild(l);AQABoxCp.addChild(h);AQABoxCp.addChild(f);prepareHrefMap();readDACShuttlePage();AQATabcp.startup();AQATabcp.resize()}function renderConfiguration(){console.debug("renderConfiguration ...");if(dijit.byId("MetricsGrid")){dijit.byId("MetricsGrid").destroy()}if(dijit.byId("HCGrid")){dijit.byId("HCGrid").destroy()}if(dijit.byId("DCRGrid")){dijit.byId("DCRGrid").destroy()}if(dijit.byId("CONFLogTree")){dijit.byId("CONFLogTree").destroy()}if(dijit.byId("CONFretSR")){dijit.byId("CONFretSR").destroy()}if(dijit.byId("CONFDCR")){dijit.byId("CONFDCR").destroy()}if(dijit.byId("CONFTabButtons")){dijit.byId("CONFTabButtons").destroy()}var a=new dijit.layout.ContentPane({id:"CONFTabButtons",region:"top",style:"position:relative; width:100%; height:45px; overflow:hidden;"});CONFTabcp.addChild(a);if(dijit.byId("CONFTabData")){dijit.byId("CONFTabData").destroy()}var b=new dijit.layout.ContentPane({id:"CONFTabData",region:"center",style:"position:relative; width:100%; height:235px; overflow:auto;"});CONFTabcp.addChild(b);if(!dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).show()}var f="../../../SRAttachmentsRequest?type=configuration&"+buildThisSRDetailsURL();CONFStore=new srmdojoc.layout.LazyLoadMetricsStore({data:"items",url:f});CONFModel=new dijit.tree.ForestStoreModel({store:CONFStore,query:{type:"parent"},rootId:"config",rootLabel:"Config & Project Data",childrenAttrs:["children"],labelAttr:"name"});CONFLogTree=new srmdojoc.layout.CONFTree({model:CONFModel,id:"CONFLogTree"})}function emptyCONFTree(){var a="";a+='<table width="100%">';a+="<tr>";a+='<td valign="top" align="left">';a+='<button class="negative" dojoType="dijit.form.Button" id="CONFretSR" onClick="returnToSR()" alt="Return To SR">';a+="Cancel";a+="</button>";a+="</td>";a+="</tr>";a+="</table>";dijit.byId("CONFTabButtons").setContent(a);dijit.byId("CONFTabData").setContent(CONFLogTree.domNode);dijit.byId("CONFTabData").setContent("<center>No project and configuration data exist for this SR.</center>");CONFTabcp.startup();CONFTabcp.resize();if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}}function nonEmptyCONFTree(){var a="";a+='<table width="100%">';a+="<tr>";a+='<td valign="top" align="left">';a+='<button class="negative" dojoType="dijit.form.Button" id="CONFretSR" onClick="returnToSR()" alt="Return To SR">';a+="Cancel";a+="</button>";a+="&nbsp;";a+='<button class="negative" dojoType="dijit.form.Button" id="CONFDCR" onClick="createDCR('+jsQuo+"CONF"+jsQuo+')" alt="Data Collection Record">';a+="Data Collection Record";a+="</button>";a+="</td>";a+="</tr>";a+="<tr>";a+='<td valign="top" align="left">';a+='<a href="javascript:expandAll('+jsQuo+"CONFLogTree"+jsQuo+');">Expand All</a>';a+="&nbsp;";a+="|";a+="&nbsp;";a+='<a href="javascript:collapseAll('+jsQuo+"CONFLogTree"+jsQuo+');">Collapse All</a>';a+="</td>";a+="</tr>";a+="</table>";dijit.byId("CONFTabButtons").setContent(a);dijit.byId("CONFTabData").setContent(CONFLogTree.domNode);CONFTabcp.startup();CONFTabcp.resize();if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}}function displayForm(f){var a=getActionUpdateNode();a.destroyDescendants();a.containerNode.innerHTML="";var m=a.domNode;var l=getCPaneNode();var v=getActionDataNode();var q=getMenuBarNode();var u=getRefDataNode();var s=getBC1Node();dojo.style(m,"height","350px");dojo.style(m,"visibility","visible");a.setContent(f.domNode);var p=dojo.contentBox(q.domNode);var o=dojo.contentBox(v.domNode);var h=dojo.contentBox(q.domNode);var g=dojo.contentBox(u.domNode);var b=dojo.contentBox(a.domNode);dojo.parser.parse("actionUpdate")}function returnToSR(){console.debug("returnToSR ...");var a=getActionUpdateNode();var h=a.domNode;var g=getCPaneNode();var u=getActionDataNode();var m=getMenuBarNode();var p=getRefDataNode();var o=getBC1Node();var q=dojo.contentBox(m.domNode);var s=dojo.contentBox(u.domNode);var b=dojo.contentBox(a.domNode);var l=dojo.contentBox(g.domNode);var v=dojo.contentBox(p.domNode);var f=dojo.contentBox(o.domNode);if(dijit.byId("DACTabButtons")){dijit.byId("DACTabButtons").destroyRecursive()}if(dijit.byId("DACTabData")){dijit.byId("DACTabData").destroyRecursive()}if(dijit.byId("ISSTabButtons")){dijit.byId("ISSTabButtons").destroyRecursive()}if(dijit.byId("ISSTabData")){dijit.byId("ISSTabData").destroyRecursive()}if(dijit.byId("buttonPaneTop")){dijit.byId("buttonPaneTop").destroyRecursive()}if(dijit.byId("availablePane")){dijit.byId("availablePane").destroyRecursive()}if(dijit.byId("buttonPane")){dijit.byId("buttonPane").destroyRecursive()}if(dijit.byId("selectedPane")){dijit.byId("selectedPane").destroyRecursive()}if(dijit.byId("selectedPaneTitle")){dijit.byId("selectedPaneTitle").destroyRecursive()}if(dijit.byId(DAC_TAB_ID)){dijit.byId(DAC_TAB_ID).destroyRecursive()}if(dijit.byId(ISS_TAB_ID)){dijit.byId(ISS_TAB_ID).destroyRecursive()}if(dijit.byId(AQA_TAB_ID)){dijit.byId(AQA_TAB_ID).destroyRecursive()}if(dijit.byId("DACTabContainer")){dijit.byId("DACTabContainer").destroyRecursive()}if(dijit.byId("DACISSmainContainer")){dijit.byId("DACISSmainContainer").destroyRecursive()}a.destroyDescendants();a.containerNode.innerHTML="";dojo.style(h,"height","0px");dojo.style(h,"visibility","hidden");dojo.parser.parse("actionUpdate")}function sortBy(a){sortByType=a;var b="../../../SRAttachmentsRequest?type=storeattachmentssortbyorder&attachmentssortbyorder="+sortByType+"&"+buildThisSRDetailsURL();dojo.xhrPost({url:b,handleAs:"json",load:function(g,f){if(g.items[0].save_status=="success"){renderDAC("attachments",null,null)}}})}function renderDAC(h,b,f){console.debug("renderDAC ...");if(h=="drilldown"){setArchiveFileName(b);setArchiveFileUrl(f)}else{setArchiveFileName("Service Request")}if(dojo.byId("DACLogTree")){dijit.byId("DACLogTree").destroy()}if(dijit.byId("DACretSR")){dijit.byId("DACretSR").destroy()}if(dijit.byId("DACcrDCR")){dijit.byId("DACcrDCR").destroy()}if(dijit.byId("DACupload")){dijit.byId("DACupload").destroy()}if(dijit.byId("DACref")){dijit.byId("DACref").destroy()}if(!dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).show()}var g;if(h=="attachments"){g="../../../SRAttachmentsRequest?sortBy="+sortByType+"&"+buildThisSRDetailsURL()}else{g="../../../SRAttachmentsRequest?type=callperlscripts&archivefilename="+b+"&"+buildThisSRDetailsURL()}DACLogStore=new dojo.data.ItemFileReadStore({data:"items",url:g});DACLogModel=new dijit.tree.ForestStoreModel({store:DACLogStore,query:{type:"parent"},rootId:"servicerequest",rootLabel:"Service Request",childrenAttrs:["children"],labelAttr:"name"});if(attCount>0){DACLogTree=new srmdojoc.layout.DACTree({model:DACLogModel,id:"DACLogTree"})}var a="";a+='<table width="100%">';a+="<tr>";a+='<td valign="top" align="left">';if(h=="attachments"){a+='<button class="negative" dojoType="dijit.form.Button" id="DACretSR" onClick="returnToSR()" alt="Return To SR">'}else{a+='<button class="negative" dojoType="dijit.form.Button" id="DACretSR" onClick="renderDAC('+jsQuo+"attachments"+jsQuo+', null, null)" alt="Return To DAC">'}a+="Cancel";a+="</button>";if(attCount>0){a+="&nbsp;";a+='<button class="negative" dojoType="dijit.form.Button" id="DACcrDCR" onClick="createDCR('+jsQuo+"DAC"+jsQuo+')" alt="Create Data Collection Record">';a+="Data Collection Record";a+="</button>"}if(h=="attachments"){a+="&nbsp;";a+='<button class="negative" dojoType="dijit.form.Button" id="DACupload" onClick="uploadFile()" alt="Upload a File">';a+="Upload a File";a+="</button>";a+="&nbsp;";a+='<button class="negative" dojoType="dijit.form.Button" id="DACref" onClick="createRef()" alt="Create File Reference">';a+="Create File Reference";a+="</button>"}if(attCount>0){a+="&nbsp;";a+='<button class="negative" dojoType="dijit.form.Button" id="DACmultifiledownloads" onClick="displayAttachment()" alt="Multiple File Downloads">';a+="ISS Viewer";a+="</button>"}a+="</td>";a+="</tr>";if(h=="attachments"&&attCount>0){a+="<tr>";a+='<td valign="top" align="left">';a+="Sort By: ";a+='<input dojoType="dijit.form.RadioButton" id="attachsradio1" name="attachgroup" '+((sortByType=="filenameasc")?"checked":"")+' value="filenameasc" type="radio" onClick="sortBy('+jsQuo+"filenameasc"+jsQuo+')"/><label for="attachsradio1"> File Name Ascending</label>';a+='<input dojoType="dijit.form.RadioButton" id="attachsradio2" name="attachgroup" '+((sortByType=="filenamedsc")?"checked":"")+' value="filenamedsc" type="radio" onClick="sortBy('+jsQuo+"filenamedsc"+jsQuo+')"/><label for="attachsradio2"> File Name Descending</label>';a+='<input dojotype="dijit.form.RadioButton" id="attachsradio3"  name="attachgroup" '+((sortByType=="uploaddateasc")?"checked":"")+' value="uploaddateasc" type="radio" onClick="sortBy('+jsQuo+"uploaddateasc"+jsQuo+')" /><label for="attachsradio3"> Upload Date Ascending</label>';a+='<input dojotype="dijit.form.RadioButton" id="attachsradio4"  name="attachgroup" '+((sortByType=="uploaddatedsc")?"checked":"")+' value="uploaddatedsc" type="radio" onClick="sortBy('+jsQuo+"uploaddatedsc"+jsQuo+')" /><label for="attachsradio4"> Upload Date Descending</label>';a+="</td>";a+="</tr>"}a+="</table>";dijit.byId("DACTabButtons").setContent(a);if(attCount>0){dijit.byId("DACTabData").setContent(DACLogTree.domNode);dijit.byId("DACcrDCR").reset();if(h=="attachments"){dijit.byId("DACupload").reset()}}dijit.byId("DACretSR").reset();if(h=="attachments"){dijit.byId("DACref").reset()}dojo.byId("DACTabButtons").style.height="45px";dojo.byId("DACTabData").style.visibility="visible";dojo.byId("DACTabData").style.height="235px";dojo.byId("DACTabData").style.width="100%";DACTabcp.resize();if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}}function setArchiveFileName(a){archivefilename=a}function getArchiveFileName(){return archivefilename}function setArchiveFileUrl(a){archivefileurl=a}function getArchiveFileUrl(){return archivefileurl}function drilldownArchive(b,a){renderDAC("drilldown",b,a)}function expandMetricTypes(b,f,a,g){displayMetricsData(b,f,a,g)}function expandHCDetails(b,a,f,g){displayHCDetails(b,a,f,g)}function selAll(o,m){var l=dijit.byId(m);var g;var b;if(m=="ISSLogTree"&&showISSTab){g=l.model.store._arrayOfAllItems.length;for(b=0;b<g;b++){f=l.model.store._arrayOfAllItems[b];fileid=f.id;var h=dojo.byId(fileid);if(h!=null){h.setChecked(o)}}}else{g=l.model.count;for(b=0;b<g;b++){var f=l.model.data[b];f.select=o}l.resize()}}function downloadAttachment(a){if(a!=""&&a!=null){var b="../../../SRAttachmentsRequest?type=open&file="+a+"&"+buildThisSRDetailsURL();if(subWin!=null&&subWin.open){subWin.close()}subWin=window.open(b,"mywindow","width=400,height=200,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,copyhistory=no,resizable=yes")}}var ISS_FILE_VIEWER_URL_TEXT="ISS_FILE_VIEWER_URL";function displayAttachment(a){var b=new Map();b.put("REFID",getSrNumber());invokeURLwithMultiParam(ISS_FILE_VIEWER_URL_TEXT,b)}function multiFileDownload(){displayAttachment()}function uploadFile(){if(SRUtils.isHeaderModifiedDirty()){var a=SRUtils.showHeaderModifiedAlert();if(a<0){return}else{resetSRHeader()}}var b="../../../SRAttachmentsRequest?type=upload&"+buildThisSRDetailsURL();if(subWin!=null&&subWin.open){subWin.close()}subWin=window.open(b,"mywindow","width=800,height=200,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,copyhistory=no,resizable=yes")}function createRef(){if(!dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).show()}dojo.xhrPost({url:"../../../SRAttachmentsRequest?type=id_vals&template=ref&"+buildThisSRDetailsURL(),handleAs:"json",load:function(b,a){if(b.items[0].count>=4){renderRefForm(b.items)}else{showMsg("Activity template does not contain sufficient questions ("+b.items[0].count+") for creating reference activity.",ERRMSGID)}if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}},error:function(a){if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}showMsg("Error in createRef: "+a)}})}function createAQARef(a){if(!dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).show()}dojo.xhrPost({url:"../../../SRAttachmentsRequest?type=id_vals&template=aqa&"+buildThisSRDetailsURL(),handleAs:"json",load:function(f,b){if(f.items[0].count>=3){renderAQARefForm(f.items,a)}else{showMsg("Activity template does not contain sufficient questions ("+f.items[0].count+") for creating reference activity.",ERRMSGID)}if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}},error:function(b){if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}showMsg("Error in createAQARef: "+b)}})}function renderRefForm(f){if(dijit.byId("backToDAC")){dijit.byId("backToDAC").destroy()}if(dijit.byId("saveDCR")){dijit.byId("saveDCR").destroy()}var a=f[0].templateId;var l=f[0].useremail;var b=f[0].qId;var o=f[1].qId;var m=f[2].qId;var h=f[3].qId;var g="";g+='<table width="100%">';g+="<tr>";g+='<td colspan="2" valign="center" align="left">';if(getArchiveFileName()=="Service Request"){g+='<button class="negative" dojoType="dijit.form.Button" id="backToDAC" onClick="renderDAC('+jsQuo+"attachments"+jsQuo+', null, null)">'}else{g+='<button class="negative" dojoType="dijit.form.Button" id="backToDAC" onClick="renderDAC('+jsQuo+"drilldown"+jsQuo+", "+jsQuo+getArchiveFileName()+jsQuo+", "+jsQuo+getArchiveFileUrl()+jsQuo+')">'}g+="Cancel";g+="</button>";g+="&nbsp;";g+='<button class="negative" dojoType="dijit.form.Button" id="saveDCR" onClick="saveRef(document.getElementById('+jsQuo+"REFtemplateNameField"+jsQuo+").value, document.getElementById("+jsQuo+"REFtemplateCommentField"+jsQuo+").value, "+jsQuo+TEMPLATE_FLD_TEXT+h+jsQuo+')">';g+="Save";g+="</button>";g+="</td>";g+="</tr>";g+='<input name="templateId" type="hidden" value="'+a+'"/>';g+='<input name="activityId" type="hidden" value=""/>';g+='<input name="activityType" type="hidden" value="ODM Data Collection"/>';g+='<input name="'+ACTIVITY_FLD_TEXT+'audience" id="'+ACTIVITY_FLD_TEXT+'audience" type="hidden"/>';g+='<input name="'+ACTIVITY_FLD_TEXT+'audiencefs" id="'+ACTIVITY_FLD_TEXT+'audiencefs" type="hidden"/>';g+='<input name="'+ACTIVITY_FLD_TEXT+'primaryOwner" id="'+ACTIVITY_FLD_TEXT+'primaryOwner" type="hidden" value="'+l+'"/>';g+="<tr>";g+='<td valign="center" align="right">Visible to Customer</td>';g+='<td valign="center" align="left"><input name="makePublic" id="makePublic" type="checkbox"/></td>';g+="</tr>";g+="<tr>";g+='<td valign="center" align="right"><img src="../images/requiredicon.gif" border="0"/>&nbsp;Name</td>';g+='<td valign="center" align="left"><input name="'+TEMPLATE_FLD_TEXT+b+'" id="REFtemplateNameField" type="text" style="width:600px;" value="ODM Data Collection - File Reference"/></td>';g+="</tr>";g+="<tr>";g+='<td valign="center" align="right">Filename</td>';g+='<td valign="center" align="left"><input name="'+TEMPLATE_FLD_TEXT+m+'" id="'+TEMPLATE_FLD_TEXT+m+'" type="text" style="width:600px;"/></td>';g+="</tr>";g+="<tr>";g+='<td valign="center" align="right">URL</td>';g+='<td valign="center" align="left"><input name="'+TEMPLATE_FLD_TEXT+h+'" id="'+TEMPLATE_FLD_TEXT+h+'" type="text" style="width:600px;"/></td>';g+="</tr>";g+="<tr>";g+='<td valign="center" align="right"><img src="../images/requiredicon.gif" border="0"/>&nbsp;Comment</td>';g+='<td valign="center" align="left"><textarea height="100px" style="width:600px;" rows="3" name="'+TEMPLATE_FLD_TEXT+o+'" id="REFtemplateCommentField"></textarea></td>';g+="</tr>";g+="</table>";g+='<input name="event" type="hidden" value=""/>';g+='<input name="source" type="hidden" value=""/>';dijit.byId("DACTabButtons").setContent(g);dojo.byId("DACTabButtons").style.height="280px";dojo.byId("DACTabData").style.visibility="hidden";DACTabcp.resize();dijit.byId("backToDAC").reset();dijit.byId("saveDCR").reset()}function renderAQARefForm(o,g){if(dijit.byId("backToAQA")){dijit.byId("backToAQA").destroy()}if(dijit.byId("saveAQA")){dijit.byId("saveAQA").destroy()}var w=o[0].templateId;var l=o[0].useremail;var p=o[0].qId;var u=o[1].qId;var f=o[2].qId;var v=o[0].qDesc;var b=o[1].qDesc;var s=o[2].qDesc;var h=o[0].qDefVal;var q=(o[2].qDefVal).replace("[Service Request.Owner Email Addr]",l);var a="";if(g!=undefined&&g!=null&&g.length>0){dojo.forEach(g,function(x,y){a+="Note "+x.documentId+" "+x.title+"\n"})}var m="";m+='<table width="100%">';m+="<tr>";m+='<td colspan="2" valign="center" align="left">';m+='<button class="negative" dojoType="dijit.form.Button" id="backToAQA" onClick="renderAQA()">';m+="Cancel";m+="</button>";m+="&nbsp;";m+='<button class="negative" dojoType="dijit.form.Button" id="saveAQA" onClick="saveAQARef(document.getElementById('+jsQuo+"REFtemplateIntroField"+jsQuo+").value, document.getElementById("+jsQuo+"REFtemplateToolField"+jsQuo+").value, document.getElementById("+jsQuo+"REFtemplateEndField"+jsQuo+').value)">';m+="Save";m+="</button>";m+="</td>";m+="</tr>";m+='<input name="templateId" type="hidden" value="'+w+'"/>';m+='<input name="activityId" type="hidden" value=""/>';m+='<input name="activityType" type="hidden" value="ODM Action Plan"/>';m+='<input name="'+ACTIVITY_FLD_TEXT+'audience" id="'+ACTIVITY_FLD_TEXT+'audience" type="hidden"/>';m+='<input name="'+ACTIVITY_FLD_TEXT+'audiencefs" id="'+ACTIVITY_FLD_TEXT+'audiencefs" type="hidden"/>';m+='<input name="'+ACTIVITY_FLD_TEXT+'primaryOwner" id="'+ACTIVITY_FLD_TEXT+'primaryOwner" type="hidden" value="'+l+'"/>';m+="<tr>";m+='<td valign="center" align="right">Visible to Customer</td>';m+='<td valign="center" align="left"><input name="makePublic" id="makePublic" type="checkbox" checked/></td>';m+="</tr>";m+="<tr>";m+='<td valign="center" align="right"><img src="../images/requiredicon.gif" border="0"/>&nbsp;'+v+"</td>";m+='<td valign="center" align="left"><textarea height="100px" style="width:1000px;" rows="3" name="'+TEMPLATE_FLD_TEXT+p+'" id="REFtemplateIntroField">'+h+"</textarea></td>";m+="</tr>";m+="<tr>";m+='<td valign="center" align="right"><img src="../images/requiredicon.gif" border="0"/>'+b+"</td>";m+='<td valign="center" align="left"><textarea height="100px" style="width:1000px;" rows="3" name="'+TEMPLATE_FLD_TEXT+u+'" id="REFtemplateToolField">'+a+"</textarea></td>";m+="</tr>";m+="<tr>";m+='<td valign="center" align="right"><img src="../images/requiredicon.gif" border="0"/>&nbsp;</td>';m+='<td valign="center" align="left"><textarea height="100px" style="width:1000px;" rows="3" name="'+TEMPLATE_FLD_TEXT+f+'" id="REFtemplateEndField">'+q+"</textarea></td>";m+="</tr>";m+="</table>";m+='<input name="event" type="hidden" value=""/>';m+='<input name="source" type="hidden" value=""/>';dijit.byId("buttonPaneTop").setContent(m);dojo.byId("buttonPaneTop").style.height="280px";dojo.byId("buttonPaneTop").style.width="100%";if(dijit.byId("availablePane")){dijit.byId("availablePane").destroy()}if(dijit.byId("buttonPane")){dijit.byId("buttonPane").destroy()}if(dijit.byId("selectedPane")){dijit.byId("selectedPane").destroy()}if(dijit.byId("selectedPaneTitle")){dijit.byId("selectedPaneTitle").destroy()}if(dijit.byId("buttonContainer")){dijit.byId("buttonContainer").destroy()}AQATabcp.resize();dijit.byId("backToAQA").reset();dijit.byId("saveAQA").reset()}var confGridSel;var confGridId;function getGridRowValue(f){var b;if(f=="metrics"){b=dijit.byId("MetricsGrid")}else{b=dijit.byId("HCGrid")}var l=b.selection.getSelected()[0];var a=b.model.data[l];var g=a.select;var h=a.rowVal;var m=a.id;if(g){confGridSel.push(h);confGridId.push(m)}}var attachmentsNameUrl;function createDCR(o){if(!dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).show()}var y;var p;var G;var q;var D;var l;var f;var A;var E;var C;if(o=="DAC"){y="DACLogTree";p="DACTabData";G="DACTabButtons";q="Element Name";l="id";f="name";A="comment"}if(o=="CONF"){y="CONFLogTree";p="CONFTabData";G="CONFTabButtons";q="Element Name";l="id";f="name";A="comment"}if(o=="MetricsGrid"){y="MetricsGrid";p="CONFTabData";G="CONFTabButtons";q="Name";l="id";f="rowVal";A="comment"}if(o=="HCGrid"){y="HCGrid";p="CONFTabData";G="CONFTabButtons";q="Package Name";l="id";f="rowVal";A="comment"}if(o=="ISSPack"&&showISSTab){y="ISSPackGrid";p="ISSTabData";G="ISSTabButtons";q="Package Name";l="packageid";f="packagename";A="packagecomment"}if(o=="ISSLV"&&showISSTab){y="ISSLogTree";p="ISSTabData";G="ISSTabButtons";q="Element Name";l="id";f="name";A="comment"}var B=dijit.byId(y);var m;if((o=="ISSLV"||o=="DAC"||o=="CONF")&&showISSTab){m=B.model.store._arrayOfAllItems.length}else{m=B.model.count}var v=0;var u=new Array();var g;var b;var z="yes";attachmentsNameUrl=new Array();var F=0;if(o!="MetricsGrid"&&o!="HCGrid"){for(var I=0;I<m;I++){if((o=="ISSLV"||o=="DAC"||o=="CONF")&&showISSTab){b=B.model.store._arrayOfAllItems[I];fileid=b.id;var s=document.getElementById(fileid);if(s!=null){selected=s.checked;if(selected){filename=s.value;if(o=="DAC"){attachmentsNameUrl[F]=filename;F++;filename="<a>"+filename.substring(filename.indexOf("key=")+4,filename.indexOf("val="))+"</a>"}else{filename="<a>"+filename+"</a>"}filecomment="";g=new Array(3);g[0]=filename;g[1]=filecomment;g[2]=fileid;g[3]=o;u[v]=g;v++}}}else{if(o=="ISSPack"){z=verifyMetricsGrid(o);if(z=="yes"){b=B.model.data[I];selected=b.select;if(selected){filename=b[f];filecomment=b[A];fileid=b[l];g=new Array(3);g[0]="<a>"+filename+"</a>";g[1]=filecomment;g[2]=fileid;g[3]=o;u[v]=g;v++}}}}}}else{z=verifyMetricsGrid(o);if(z=="yes"){for(var x=0;x<confGridSel.length;x++){filename=confGridSel[x];filecomment="";fileid=confGridId[x];g=new Array(3);g[0]="<a>"+filename+"</a>";g[1]=filecomment;g[2]=fileid;g[3]=o;u[v]=g;v++}}}if(z=="yes"){DCRModel=new dojox.grid.data.Table(null,u);if(v>0){if(dijit.byId("DCRGrid")){dijit.byId("DCRGrid").destroy()}if(dijit.byId("CONFLogTree")){dijit.byId("CONFLogTree").destroy()}if(dijit.byId("HCGrid")){dijit.byId("HCGrid").destroy()}if(dijit.byId("MetricsGrid")){dijit.byId("MetricsGrid").destroy()}if(o=="DAC"||o=="CONF"){E={noscroll:true,cells:[[{name:q,width:"350px",formatter:formatOpenUrl}]]}}if(((o=="ISSPack"||o=="ISSLV")&&showISSTab)||o=="MetricsGrid"||o=="HCGrid"){E={noscroll:true,cells:[[{name:q,width:"350px"}]]}}C={cells:[[{name:"Comment",width:"auto",editor:dojox.grid.editors.Editor}]]};var w=[E,C];var h=new dojox.Grid({jsId:"DCRGridWidget",id:"DCRGrid",model:DCRModel,structure:w,style:"overflow:hidden;"});dojo.xhrPost({url:"../../../SRAttachmentsRequest?type=id_vals&template=dcr&"+buildThisSRDetailsURL(),handleAs:"json",load:function(J,a){if(J.items[0].count>=4){renderDCRForm(o,v,J.items);dijit.byId(p).setContent(h.domNode);dojo.byId(G).style.height="140px";dojo.byId(p).style.width="90%";if(o=="DAC"){DACTabcp.resize()}if(o=="CONF"||o=="MetricsGrid"||o=="HCGrid"){CONFTabcp.resize()}if(o=="ISSPack"||o=="ISSLV"){ISSTabcp.resize()}h.resize()}else{showMsg("Activity template does not contain sufficient questions ("+J.items[0].count+") for creating data collection record activity.",ERRMSGID)}if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}},error:function(a){if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}showMsg("error in createDCR: "+a)}})}else{if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}var H="You must select rows before clicking on the 'Data Collection Record' button.";H+="\n\nHint: Click the check box next to the "+q+" you wish to create a data collection entry for.";showMsg(H,ERRMSGID)}}}function verifyMetricsGrid(f){var b;if(f=="MetricsGrid"){b=dijit.byId("MetricsGrid").model.data[0]}else{if(f=="ISSPack"){b=dijit.byId("ISSPackGrid").model.data[0]}else{b=dijit.byId("HCGrid").model.data[0]}}var a;if(f=="ISSPack"){a=b.packagename}else{a=b.field0}if(a=="No metrics data exist for this metric type"||a=="Exception raised while fetching metric data"||a=="No Packages Found"){if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}if(f!="ISSPack"){dijit.byId("CONFDCR").setDisabled(true)}showMsg("DCR creation not allowed",ERRMSGID);return"no"}else{return"yes"}}function renderDCRForm(o,m,u){var w;var q;var b;var h;var p;var B="";var f;var s;var y;var z;var x;var l;var v;for(var A=0;A<m;A++){f=TEMPLATE_FLD_TEXT+h;s=TEMPLATE_FLD_TEXT+p;fileIdref="File"+A;commIdref="Comm"+A;if(dijit.byId(fileIdref)){dijit.byId(fileIdref).destroy()}if(dijit.byId(commIdref)){dijit.byId(commIdref).destroy()}}if(u[0].count>=4){v=u[0].useremail;w=u[0].templateId;q=u[0].qId;b=u[1].qId;h=u[2].qId;p=u[3].qId}else{v="UNKNOWN";w="3-DZ2CTU";q="3-DYVKPZ";b="3-DYVKQ0";h="3-DZ2CUU";p="3-DZ2CUV"}if(o=="DAC"){if(getArchiveFileName()=="Service Request"){x="renderDAC('attachments', null, null)"}else{x="renderDAC('drilldown', getArchiveFileName(), getArchiveFileUrl())"}l="DACTabButtons"}if(o=="MetricsGrid"){x="displayMetricsData('"+mName+"', '"+mType+"', '"+tId+"', '"+nodeVal+"')";l="CONFTabButtons"}if(o=="HCGrid"){x="displayHCDetails('"+categName+"', '"+targId+"', '"+sevrtyId+"', '"+hcVal+"')";l="CONFTabButtons"}if(o=="CONF"){x="renderConfiguration()";l="CONFTabButtons"}if(o=="ISSPack"&&showISSTab){x="displayISSPackageNames()";l="ISSTabButtons"}if(o=="ISSLV"&&showISSTab){x="displayIssLogicalView()";l="ISSTabButtons"}for(var A=0;A<m;A++){f=TEMPLATE_FLD_TEXT+h;s=TEMPLATE_FLD_TEXT+p;fileIdref="File"+A;commIdref="Comm"+A;B+='<input dojoType="dijit.form.TextBox" name="'+f+'" id="'+fileIdref+'" type="hidden" value=""/>';B+='<input dojoType="dijit.form.TextBox" name="'+s+'" id="'+commIdref+'" type="hidden" value=""/>'}if(dijit.byId("backToDAC")){dijit.byId("backToDAC").destroy()}if(dijit.byId("saveDCR")){dijit.byId("saveDCR").destroy()}var g="";g+='<table width="100%">';g+="<tr>";g+='<td colspan="2" valign="center" align="left">';g+='<button class="negative" dojoType="dijit.form.Button" id="backToDAC" onClick="'+x+'">';g+="Cancel";g+="</button>";g+="&nbsp;";g+='<button class="negative" dojoType="dijit.form.Button" id="saveDCR" onClick="saveDCR(document.getElementById('+jsQuo+o+"templateNameField"+jsQuo+").value, document.getElementById("+jsQuo+o+"templateCommentField"+jsQuo+').value);">';g+="Save";g+="</button>";g+='&nbsp;<img src="../images/tip.gif" alt=""/>&nbsp;Hint: Double click the comment field next to each filename to enter file specific comments.';g+="</td>";g+="</tr>";g+='<input name="templateId" type="hidden" value="'+w+'"/>';g+='<input name="activityId" type="hidden" value=""/>';g+='<input name="activityType" type="hidden" value="ODM Data Collection"/>';g+='<input name="'+ACTIVITY_FLD_TEXT+'audience" id="'+ACTIVITY_FLD_TEXT+'audience" type="hidden"/>';g+='<input name="'+ACTIVITY_FLD_TEXT+'audiencefs" id="'+ACTIVITY_FLD_TEXT+'audiencefs" type="hidden"/>';g+='<input name="'+ACTIVITY_FLD_TEXT+'primaryOwner" id="'+ACTIVITY_FLD_TEXT+'primaryOwner" type="hidden" value="'+v+'"/>';g+="<tr>";g+='<td valign="center" align="right">Visible to Customer</td>';g+='<td valign="center" align="left"><input name="makePublic" id="makePublic" type="checkbox"/></td>';g+="</tr>";g+="<tr>";g+='<td valign="center" align="right"><img src="../images/requiredicon.gif" border="0"/>&nbsp;Name</td>';g+='<td valign="center" align="left"><input name="'+TEMPLATE_FLD_TEXT+q+'" id="'+o+'templateNameField" type="text" style="width:600px;" value="ODM Data Collection"/></td>';g+="</tr>";g+="<tr>";g+='<td valign="center" align="right"><img src="../images/requiredicon.gif" border="0"/>&nbsp;Comment</td>';g+='<td valign="center" align="left"><textarea height="100px" style="width:600px;" rows="3" name="'+TEMPLATE_FLD_TEXT+b+'" id="'+o+'templateCommentField"></textarea></td>';g+="</tr>";g+="</table>";g+=B;g+='<input name="event" type="hidden" value=""/>';g+='<input name="source" type="hidden" value=""/>';dijit.byId(l).setContent(g);dijit.byId("backToDAC").reset();dijit.byId("saveDCR").reset()}function saveDCR(x,u){dijit.byId(WAIT_DIV).show();if(x!=""){if(u!=""){var o=document.getElementById("makePublic");var l=dojo.byId(ACTIVITY_FLD_TEXT+"audience");var g=dojo.byId(ACTIVITY_FLD_TEXT+"audiencefs");if(o.checked){l.value=PUBLIC_TEXT;g.value=PUBLIC_TEXT}else{l.value=INTERNAL_TEXT;g.value=INTERNAL_TEXT}var m=dijit.byId("DCRGrid");m.edit.apply();var s=m.model.count;for(var A=0;A<s;A++){var z=m.model.data[A];var f;var w=z[0].substring(3,z[0].lastIndexOf("<"));var y="";if(z!=undefined&&z.length>3){y=z[3]}if(y=="DAC"||y=="ISSPack"){w=getDataCollectedRecordFilenamePattern(w)}else{w=searchAttachment(w)}if(w.indexOf("Metrics")!=-1){f="Metrics"}else{if(w.indexOf("Health Recommendations")!=-1){f="Health Recommendations"}}var B;if(w.indexOf("TARGET")!=-1){B=w.substring(0,w.indexOf(":TARGET"));if(w.indexOf(f)!=-1){B=B+"\n"+w.substring(w.indexOf("TARGET"),w.indexOf(":"+f))+"\n"+w.substring(w.indexOf(f),w.length)}else{B=B+"\n"+w.substring(w.indexOf("TARGET"),w.length)}w=B}var C=w;var h=z[1];var p="File"+A;var v=dojo.byId(p);v.value=C;var q="Comm"+A;var a=dojo.byId(q);a.value=h}formObj=postAForm("form1");invokeSave(formObj)}else{dijit.byId(WAIT_DIV).hide();showMsg("You must enter a DCR Comment before saving",ERRMSGID)}}else{dijit.byId(WAIT_DIV).hide();showMsg("You must enter a DCR Name before saving",ERRMSGID)}}function searchAttachment(b){for(var a=0;a<attachmentsNameUrl.length;a++){if(b==attachmentsNameUrl[a].substring(attachmentsNameUrl[a].indexOf("key=")+4,attachmentsNameUrl[a].indexOf("val="))){b=attachmentsNameUrl[a];break}}return b}function saveRef(h,l,f){dijit.byId(WAIT_DIV).show();if(h!=""){if(l!=""){var a=document.getElementById("makePublic");var b=dojo.byId(ACTIVITY_FLD_TEXT+"audience");var g=dojo.byId(ACTIVITY_FLD_TEXT+"audiencefs");if(a.checked){b.value=PUBLIC_TEXT;g.value=PUBLIC_TEXT}else{b.value=INTERNAL_TEXT;g.value=INTERNAL_TEXT}if(dojo.byId(f).value!=""&&dojo.byId(f).value.substring(0,7).toLowerCase()!="http://"){if(dojo.byId(f).value!=""&&dojo.byId(f).value.substring(0,8).toLowerCase()!="https://"){dojo.byId(f).value="http://"+dojo.byId(f).value}}formObj=postAForm("form1");invokeSave(formObj)}else{dijit.byId(WAIT_DIV).hide();showMsg("You must enter a Reference Comment before saving",ERRMSGID)}}else{dijit.byId(WAIT_DIV).hide();showMsg("You must enter a Reference Name before saving",ERRMSGID)}}function saveAQARef(b,l,f){dijit.byId(WAIT_DIV).show();if(b!=""){if(l!=""){if(f!=""){var a=document.getElementById("makePublic");var g=dojo.byId(ACTIVITY_FLD_TEXT+"audience");var h=dojo.byId(ACTIVITY_FLD_TEXT+"audiencefs");if(a.checked){g.value=PUBLIC_TEXT;h.value=PUBLIC_TEXT}else{g.value=INTERNAL_TEXT;h.value=INTERNAL_TEXT}formObj=postAForm("form1");invokeSave(formObj)}else{dijit.byId(WAIT_DIV).hide();showMsg("You must enter Data Request End text before saving",ERRMSGID)}}else{dijit.byId(WAIT_DIV).hide();showMsg("You must enter Diagnostic / Data Collection Tool Name text before saving",ERRMSGID)}}else{dijit.byId(WAIT_DIV).hide();showMsg("You must enter Data Request Introduction text before saving",ERRMSGID)}}function formatOpenUrl(b){var a='<a href="javascript: downloadAttachment('+jsQuo+b+jsQuo+')">'+b+"</a>";return a}function showMsg(m,v){var w=dijit.byId("messageDialog");var x=document.createElement("table");x.setAttribute("width","100%");x.setAttribute("align","center");x.setAttribute("cellSpacing","10");x.style.cssText="padding-top:3px; padding-bottom:3px; padding-left:4px;padding-right:4px;";var b=document.createElement("tbody");x.appendChild(b);w.setContent(x);var f=document.createElement("tr");b.appendChild(f);var l=document.createElement("td");var A=document.createElement("img");if(v==WARNMSGID){A.setAttribute("src","../images/warningicon.gif")}if(v==ERRMSGID){A.setAttribute("src","../images/erroricon.gif")}l.setAttribute("align","left");l.setAttribute("valign","top");l.appendChild(A);f.appendChild(l);var g=document.createElement("td");var p=document.createElement("span");p.innerHTML=m;g.appendChild(p);g.setAttribute("align","left");g.setAttribute("valign","top");f.appendChild(g);var y=document.createElement("tr");b.appendChild(y);var h=document.createElement("td");h.setAttribute("colSpan","2");h.setAttribute("align","center");y.appendChild(h);var q=document.createElement("table");q.setAttribute("align","center");q.setAttribute("width","25%");h.appendChild(q);var s=document.createElement("tbody");q.appendChild(s);var z=document.createElement("tr");s.appendChild(z);var u=document.createElement("td");z.appendChild(u);var a=document.createElement("div");a.setAttribute("width","10%");var o=new dijit.form.Button({label:"Close",onClick:function(){w.hide()}},a);u.appendChild(o.domNode);w.startup();w.show()}function displayIssLogicalView(){if(showISSTab){if(!dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).show()}ISSLogStore=new dojo.data.ItemFileReadStore({data:"items",url:"../../../SRAttachmentsRequest?type=issws&infotype=logicalview&"+buildThisSRDetailsURL()});ISSLogModel=new dijit.tree.ForestStoreModel({store:ISSLogStore,query:{type:"parent"},rootId:"servicerequest",rootLabel:"Service Request",childrenAttrs:["children"],labelAttr:"name"});ISSLogTree=new srmdojoc.layout.DACTree({model:ISSLogModel,id:"ISSLogTree"});if(dijit.byId("ISSLVRetISS")){dijit.byId("ISSLVRetISS").destroy()}var a="";a+='<table width="100%">';a+="<tr>";a+='<td valign="top" align="left">';a+='<button class="negative" dojoType="dijit.form.Button" id="ISSLVRetISS" onClick="renderISS()" alt="Return To SR">';a+="Cancel";a+="</button>";a+="&nbsp;";a+="</td>";a+="</tr>";a+="</table>";dijit.byId("ISSTabButtons").setContent(a);dijit.byId("ISSTabData").setContent(ISSLogTree.domNode);dojo.byId("ISSTabButtons").style.height="45px";dojo.byId("ISSTabData").style.visibility="visible";dojo.byId("ISSTabData").style.height="235px";dojo.byId("ISSTabData").style.width="100%";ISSTabcp.resize();if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}}}function displayISSPackageNames(){if(showISSTab){if(!dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).show()}var f={noscroll:true,cells:[[{name:"Select",field:"select",width:"40px",styles:"text-align: center;",editor:dojox.grid.editors.Bool},{name:"Package Name",field:"packagename",width:"240px"}]]};var b={noscroll:true,cells:[[{name:"Modified Time",field:"modifiedtime",width:"auto"}]]};var a=[f,b];ISSPackStore=new dojox.data.QueryReadStore({url:"../../../SRAttachmentsRequest?type=issws&infotype=packageview&packagetype=packagenames&"+buildThisSRDetailsURL(),handleAs:"json",requestMethod:"post"});ISSPackModel=new dojox.grid.data.DojoData(null,null,{store:ISSPackStore});if(dijit.byId("ISSPackGrid")){dijit.byId("ISSPackGrid").destroy()}ISSPackGrid=new dojox.Grid({jsId:"ISSPackGridWidget",id:"ISSPackGrid",model:ISSPackModel,structure:a,style:"overflow:hidden;"});if(dijit.byId("ISSPackRetISS")){dijit.byId("ISSPackRetISS").destroy()}if(dijit.byId("ISSPackCrDCR")){dijit.byId("ISSPackCrDCR").destroy()}var g="";g+='<table width="100%">';g+="<tr>";g+='<td valign="top" align="left">';g+='<button class="negative" dojoType="dijit.form.Button" id="ISSPackRetISS" onClick="renderISS()" alt="Return To SR">';g+="Cancel";g+="</button>";g+="&nbsp;";g+='<button class="negative" dojoType="dijit.form.Button" id="ISSPackCrDCR" onClick="createDCR('+jsQuo+"ISSPack"+jsQuo+')" alt="Create Data Collection Record">';g+="Data Collection Record";g+="</button>";g+="</td>";g+="</tr>";g+="<tr>";g+="<td>";g+='<a href="javascript: selAll(true,'+jsQuo+"ISSPackGrid"+jsQuo+');">Select All</a>&nbsp;|&nbsp;<a href="javascript: selAll(false,'+jsQuo+"ISSPackGrid"+jsQuo+');">Select None</a>';g+="</td>";g+="</tr>";g+="</table>";dijit.byId("ISSTabButtons").setContent(g);dijit.byId("ISSTabData").setContent(ISSPackGrid.domNode);dojo.byId("ISSTabButtons").style.height="45px";dojo.byId("ISSTabData").style.visibility="visible";dojo.byId("ISSTabData").style.height="235px";dojo.byId("ISSTabData").style.width="90%";ISSTabcp.resize();if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}}}var mName;var mType;var tId;var nodeVal;function displayMetricsData(b,f,a,m){mName=b;mType=f;tId=a;nodeVal=m;confGridSel=new Array();confGridId=new Array();if(dijit.byId("CONFretSR")){dijit.byId("CONFretSR").destroy()}if(dijit.byId("CONFDCR")){dijit.byId("CONFDCR").destroy()}if(dijit.byId("CONFTabButtons")){dijit.byId("CONFTabButtons").destroy()}var g=new dijit.layout.ContentPane({id:"CONFTabButtons",region:"top",style:"position:relative; width:100%; height:45px; overflow:hidden;"});CONFTabcp.addChild(g);if(dijit.byId("CONFTabData")){dijit.byId("CONFTabData").destroy()}var h=new dijit.layout.ContentPane({id:"CONFTabData",region:"center",style:"position:relative; width:100%; height:235px; overflow:auto;"});CONFTabcp.addChild(h);var l="";l+='<table width="100%">';l+="<tr>";l+='<td valign="top" align="left">';l+='<button class="negative" dojoType="dijit.form.Button" id="CONFretSR" onClick="renderConfiguration()" alt="Return To SR">';l+="Cancel";l+="</button>";l+="&nbsp;";l+='<button class="negative" dojoType="dijit.form.Button" id="CONFDCR" onClick="createDCR('+jsQuo+"MetricsGrid"+jsQuo+')" alt="Data Collection Record">';l+="Data Collection Record";l+="</button>";l+="</td>";l+="</tr>";l+="</table>";dijit.byId("CONFTabButtons").setContent(l);renderMetricsGrid(b,f,a,m);CONFTabcp.startup();CONFTabcp.resize();if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}}function renderMetricsGrid(f,h,b,l){var g={url:"../../../SRAttachmentsRequest?"+buildThisSRDetailsURL(),content:{type:"metricsgridlayout",metricsName:f},preventCache:true,handleAs:"json",load:function(p,o){if(p.opStatus==0){var m=new Object();m.metricsType=h;m.targetId=b;m.val=l;displayMetricsGrid(p,m);return p}else{if(p.opStatus==1){dijit.byId("CONFDCR").setDisabled(true);dijit.byId("MetricsTabData").setContent("<center>No metrics data exists for this Configuration.</center>")}else{dijit.byId("CONFDCR").setDisabled(true);dijit.byId("MetricsTabData").setContent("<center>Exception raised while fetching metrics data.</center>")}}},error:function(p,o){var m=getDisplayMessageObj("Request to retrieve Metrics data for this Metrics Type failes.",2);showMsg(m,p)},timeout:10000};var a=dojo.xhrPost(g)}function displayMetricsGrid(l,p){if(dijit.byId("MetricsGrid")!=null){dijit.byId("MetricsGrid").destroyRecursive()}var w=new Array();var u=l.opResult;if(dojo.isArray(u)&&u.length>0){var x=u[0];var f=new srmdojoc.data.SPHomeQueryReadStore({url:"../../../SRAttachmentsRequest?type=metricsgridmodel&metricsType="+p.metricsType+"&targetId="+p.targetId+"&rowVal="+p.val+"&"+buildThisSRDetailsURL(),urlPreventCache:true,clearOnClose:true,requestMethod:"get",jsId:"MetricsGridStore",doClientPaging:false,doClientSorting:false});var a=new srmdojoc.data.SPHomeDojoData(null,f,{jsId:"gmodel",rowsPerPage:100,clientSort:false,cache:false});var b=new Array();var h=[{name:"Select",field:"select",width:"40px",styles:"text-align: center;",editor:dojox.grid.editors.Bool}];var v=x.cells;if(v.length==1){var s=v[0];for(var g=0;g<s.length;g++){h.push(s[g])}}b.push(h);var m={cells:b};var o=[m];var q=new dojox.Grid({id:"MetricsGrid",elasticview:"1",model:a,structure:o,canSort:canSort,rowSelector:true});dijit.byId("CONFTabData").setContent(q.domNode);dojo.connect(q,"onRowClick",function(y){getGridRowValue("metrics")});q.refresh();q.render();q.update()}}var categName;var targId;var sevrtyId;var hcVal;function displayHCDetails(h,b,l,m){categName=h;targId=b;sevrtyId=l;hcVal=m;confGridSel=new Array();confGridId=new Array();if(dijit.byId("CONFretSR")){dijit.byId("CONFretSR").destroy()}if(dijit.byId("CONFDCR")){dijit.byId("CONFDCR").destroy()}if(dijit.byId("CONFTabButtons")){dijit.byId("CONFTabButtons").destroy()}var f=new dijit.layout.ContentPane({id:"CONFTabButtons",region:"top",style:"position:relative; width:100%; height:45px; overflow:hidden;"});CONFTabcp.addChild(f);if(dijit.byId("CONFTabData")){dijit.byId("CONFTabData").destroy()}var g=new dijit.layout.ContentPane({id:"CONFTabData",region:"center",style:"position:relative; width:100%; height:235px; overflow:auto;"});CONFTabcp.addChild(g);var a="";a+='<table width="100%">';a+="<tr>";a+='<td valign="top" align="left">';a+='<button class="negative" dojoType="dijit.form.Button" id="CONFretSR" onClick="renderConfiguration()" alt="Return To SR">';a+="Cancel";a+="</button>";a+="&nbsp;";a+='<button class="negative" dojoType="dijit.form.Button" id="CONFDCR" onClick="createDCR('+jsQuo+"HCGrid"+jsQuo+')" alt="Data Collection Record">';a+="Data Collection Record";a+="</button>";a+="</td>";a+="</tr>";a+="</table>";dijit.byId("CONFTabButtons").setContent(a);renderHCGrid(h,b,l,m);CONFTabcp.startup();CONFTabcp.resize();if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}}function renderHCGrid(h,f,l,m){var g=[{name:"Select",field:"select",width:"40px",styles:"text-align: center;",editor:dojox.grid.editors.Bool},{name:"Finding",field:"finding",width:"auto"},{name:"Risk",field:"risk",width:"auto"},{name:"Recommendation",field:"recommendation",width:"auto"}];var b={rows:[g]};var a=[b];HCGridStore=new dojox.data.QueryReadStore({url:"../../../SRAttachmentsRequest?type=hcdetails&categoryName="+h+"&targetId="+f+"&severityId="+l+"&rowVal="+m+"&"+buildThisSRDetailsURL(),handleAs:"json",requestMethod:"post"});HCGridModel=new dojox.grid.data.DojoData(null,null,{store:HCGridStore});if(dijit.byId("HCGrid")){dijit.byId("HCGrid").destroy()}HCGrid=new dojox.Grid({jsId:"HCGridWidget",id:"HCGrid",model:HCGridModel,structure:a});dijit.byId("CONFTabData").setContent(HCGrid.domNode);dojo.connect(HCGrid,"onRowClick",function(o){getGridRowValue("hc")});HCGrid.resize()}function audienceForSRAttachment(h,f,b){var l;if(dijit.byId("backToDAC")){dijit.byId("backToDAC").destroy()}if(dijit.byId("saveAud")){dijit.byId("saveAud").destroy()}if(dojo.byId("DACLogTree")){dijit.byId("DACLogTree").destroy()}if(dijit.byId("DACretSR")){dijit.byId("DACretSR").destroy()}if(dijit.byId("DACcrDCR")){dijit.byId("DACcrDCR").destroy()}if(dijit.byId("DACupload")){dijit.byId("DACupload").destroy()}if(dijit.byId("DACref")){dijit.byId("DACref").destroy()}var a="";a+='<table width="100%">';a+="<tr>";a+='<td colspan="2" valign="center" align="left">';a+='<button class="negative" dojoType="dijit.form.Button" id="backToDAC" onClick="renderDAC('+jsQuo+"attachments"+jsQuo+', null, null)">';a+="Cancel";a+="</button>";a+="&nbsp;";a+='<button class="negative" dojoType="dijit.form.Button" id="saveAud" onClick="var t=((document.getElementById('+jsQuo+"intaud"+jsQuo+").checked==true)?"+jsQuo+"Internal"+jsQuo+":"+jsQuo+"Public"+jsQuo+"); saveAudience(document.getElementById("+jsQuo+"attachId"+jsQuo+").value, t , "+jsQuo+b+jsQuo+')">';a+="Save";a+="</button>";a+="</td>";a+="</tr>";a+="<tr>";a+="</table>";var g="";g+="<table>";g+='<tr><td colspan="2"><input name="attachId" id="attachId" type="hidden" value="'+h+'"/></td></tr>';g+='<tr><td valign="center" align="left">File Name :</td><td><b>'+f+"</b></td></tr>";g+='<tr><td valign="center" align="left">Audience :</td>';g+="<td>";l=((b=="Internal")?"checked":"");g+='<input type="radio" name="audience" id="intaud" '+l+' value="Internal">&nbsp;Internal';g+="<br>";l=((b=="Public")?"checked":"");g+='<input type="radio" name="audience" id="pubaud" '+l+' value="Public">&nbsp;Public';g+="</td>";g+="</tr>";g+="</table>";dijit.byId("DACTabButtons").setContent(a);dijit.byId("DACTabData").setContent(g);DACTabcp.resize();dijit.byId("backToDAC").reset();dijit.byId("saveAud").reset()}function saveAudience(a,l,h){console.debug("saveAudience...");console.debug("Id=>"+a+"< aud=>"+l+"< preSelAud=>"+h+"<");var g=new Boolean();var b="";var f="../../../SRAttachmentsRequest?type=setaud&attachId="+a+"&audience="+l+"&"+buildThisSRDetailsURL();console.debug("theURL=>"+f+"<");if(h!=l){if(!dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).show()}dojo.xhrPost({url:f,handleAs:"json",load:function(o,m){g=o.items[0].success;b=o.items[0].results;if(!g){showMsg("Failed to update attachment audience successfully:\n\n"+b)}refreshSRDetail("","",true,false);if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}},error:function(m){if(dijit.byId(WAIT_DIV).open){dijit.byId(WAIT_DIV).hide()}showMsg("Unable to Update Attachment audience. ",m)}})}}function expandAll(b){var f=dijit.byId(b);var a=f.rootNode.getChildren();expandChildNode(a,f)}function expandChildNode(b,g){for(var a=0;a<b.length;a++){var f=b[a];if(f.isExpandable&&!f.isExpanded){g._expandNode(f)}var h=f.getChildren();if(h.length>0){expandChildNode(h,g)}}}function collapseAll(b){var f=dijit.byId(b);var a=f.rootNode.getChildren();collapseChildNode(a,f)}function collapseChildNode(b,g){for(var a=0;a<b.length;a++){var f=b[a];if(f.isExpanded){g._collapseNode(f)}var h=f.getChildren();if(h.length>0){collapseChildNode(h,g)}}}function displayMetrics(a){windowOpener("/oip/faces/secure/ml3/csm/detailedUI/metricDefaultDetail.jspx");var b="../../../SRAttachmentsRequest?type=metrics&targetId="+a+"&"+buildThisSRDetailsURL();dojo.xhrPost({url:b,load:function(g,f){windowOpener("/oip/faces/secure/ml3/csm/detailedUI/metricDefaultDetail.jspx")},handleAs:"json"})}function displayHCsummary(a){windowOpener("/oip/faces/secure/ml3/csm/detailedUI/hc_summary.jspx");var b="../../../SRAttachmentsRequest?type=hcsummary&targetId="+a+"&"+buildThisSRDetailsURL();dojo.xhrPost({url:b,load:function(g,f){windowOpener("/oip/faces/secure/ml3/csm/detailedUI/hc_summary.jspx")},handleAs:"json"})}function loadHCFinding(){var l=location.search;var g=l.substring(l.indexOf("targetId=")+9,l.indexOf("&"));var h=l.substring(l.indexOf("categoryName=")+13,l.length);var f={noscroll:true,cells:[[{name:"Finding",field:"finding",width:"40px"},{name:"Risk",field:"risk",width:"240px"}]]};var b={noscroll:true,cells:[[{name:"Recommendation",field:"recommendation",width:"auto"}]]};var a=[f,b];HCDetailsStore=new dojox.data.QueryReadStore({url:"../../../SRAttachmentsRequest?type=hcdetailspopup&targetId="+g+"&categoryName="+h+"&"+buildThisSRDetailsURL(),handleAs:"json",requestMethod:"post"});HCDetailsModel=new dojox.grid.data.DojoData(null,null,{store:HCDetailsStore});if(dijit.byId("HCDetailsGrid")){dijit.byId("HCDetailsGrid").destroy()}HCDetailsGrid=new dojox.Grid({jsId:"HCDetailsGridWidget",id:"HCDetailsGrid",model:HCDetailsModel,structure:a,style:"overflow:hidden;"});dijit.byId("HCDetailsGridData").setContent(HCDetailsGrid.domNode)}var popupWin;function windowOpener(a){if(typeof(popupWin)!="object"){popupWin=window.open(a,"conf","height=auto,width=auto,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,status=no,dependant=yes")}else{if(!popupWin.closed){popupWin.location.href=a}else{popupWin=window.open(a,"conf","height=auto,width=auto,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,status=no,dependant=yes")}}popupWin.focus()}function readDACShuttlePage(){custWidgetTableMap=new Map();custModelMap=new Map();custWidgetMap=new Map();custComponentListMap=new Map();custViewMap=new Map();manageViewMap=new Map();globalDashBoardAdmin=false;GLOBAL_ADMIN_VAR=null;artifactListSelectorSlaveMap=new Map();dijit.byId(WAIT_DIV).show();var a=new dojox.data.QueryReadStore({url:"../../../CustRequest",requestMethod:"post"});var b=function(o){dojo.forEach(o,function(y){var A=y.i.componentList;buildComponentListMap(A);readOtherInfo(y);GLOBAL_ADMIN_VAR=y.i.subject;var z;var B=y.i.widgetList;dojo.forEach(B,function(C){custModelMap.put(C.id,C);z=createWidget(C);custWidgetMap.put(C.id,z.domNode)})});var w=custWidgetMap.valSet()[0];resizeDijitNode(dijit.byNode(w),"520px");dijit.byId("availablePane").setContent(w);var g=getSlaveObject(w);dijit.byId("selectedPane").setContent(g.slaveGrid.domNode);var u=dojo.byId("buttonContainer");dojo.forEach(u.childNodes,function(y){dojo._destroyElement(y)});var s=document.createElement("div");u.appendChild(s);s.appendChild(g.selectButton.domNode);s.appendChild(g.deselectButton.domNode);var q=dojo.byId("buttonPaneTop");dojo.forEach(q.childNodes,function(y){dojo._destroyElement(y)});var p=new dijit.form.Button({label:"Cancel",alt:"Return To SR",onClick:function(){returnToSR()}});var m=document.createElement("table");m.setAttribute("width","100%");var h=document.createElement("tbody");var l=document.createElement("tr");h.appendChild(l);var v=document.createElement("td");v.setAttribute("valign","top");v.setAttribute("align","left");v.appendChild(p.domNode);var x=document.createElement("span");x.innerHTML="&nbsp;";v.appendChild(x);v.appendChild(g.submitButton.domNode);l.appendChild(v);m.appendChild(h);q.appendChild(m);dojo.connect(null,"artifactListSelector_submit_response",null,"myNextAction");dijit.byId(WAIT_DIV).hide()};var f=function(g){dijit.byId(WAIT_DIV).hide();alert("The request to the customization store to get DAC shuttle page failed. "+g)};a.fetch({onComplete:b,query:{action:"get",view:"DAC Default View",subject:GLOBAL_ADMIN_VAR},onError:f})}function getSlaveObject(h){var a=dojo.query(".dojoxGrid",h);var b=custWidgetTableMap.get(a[0].id);var f=b.originalContentId;var g=artifactListSelectorSlaveMap.get(f);return g}function myNextAction(a,b){console.debug("response "+a);if(b!=undefined&&b!=null&&b.length>0){dojo.forEach(b,function(f,g){console.debug("documentId "+f.documentId);console.debug("title "+f.title)})}createAQARef(b)}function prepareHrefMap(){loadHrefMap()}var OrionParameters={};OrionParameters.values={};OrionParameters.getParameter=function(b,a,f){OrionParameters.getParameters([b],a,f)};OrionParameters.getParameters=function(b,a,f){dojo.xhrPost({url:"../../../SRRequest",content:{action:"get_orion_params",params_name:b},preventCache:true,handleAs:"json",load:function(h){if(true===a){for(var g=0;g<b.length;g++){OrionParameters.values[b[g]]=h[b[g]]}}if(typeof(f)=="function"){f.call(h)}},error:function(g){console.error("Error Encountered while loading orion parameters: ",g)}})};function viewFile(g,b){var a="ISS_VIEWER_DOWNLOAD_FILE_URL";var f=new Map();f.put("REFID",g);f.put("FILENAME",b);invokeURLwithMultiParam(a,f)}function getDataCollectedRecordFilenamePattern(b){var a=(b!=undefined)?dojo.string.trim(b):"";if(a!=""){a="Attachment: <"+a+"> "}return a}dojo.require("dojo.parser");dojo.require("dijit.layout.TabContainer");dojo.require("srmdojoc.grid.SPGrid");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.TitlePane");dojo.require("dijit.layout.LayoutContainer");dojo.require("dojo.string");dojo.require("dijit.Menu");dojo.registerModulePath("srmdojoc","../srmdojoc");dojo.require("srmdojoc.layout.ImageAccordion");dojo.require("srmdojoc.data.SPHomeQueryReadStore");dojo.require("dijit.form.FilteringSelect");dojo.require("dojo.data.ItemFileReadStore");dojo.require("srmdojoc.data.SPHomeDojoData");dojo.require("dojox.uuid.generateRandomUuid");var pageArgs=null;var custWidgetTableMap=new Map();var custModelMap=new Map();var custWidgetMap=new Map();var custComponentListMap=new Map();var custViewMap=new Map();var manageViewMap=new Map();function displayAdmin(){if(getSRData()==undefined||getSRData().srNumber==undefined){alert("No active SR");return}var b="SR_Activity_Admin";var a="SR Activity Admin";readAdminCust(b,a)}function readAdminCust(l,h){dijit.byId("pleasewait").show();var f=null;var a=new dojox.data.QueryReadStore({url:"../../../SRViewCustRequest",requestMethod:"get"});var b=function(m,o){dojo.forEach(m,function(p){var s=p.i.componentList;buildComponentListMap(s);readOtherInfo(p);GLOBAL_ADMIN_VAR=p.i.subject;var q;var v;var u=p.i.widgetList;dojo.forEach(u,function(w){custModelMap.put(w.id,w);q=createWidget(w);custWidgetMap.put(w.id,q.domNode);f=q})});dijit.byId("pleasewait").hide();createAdminDialogFramework(f,l,h)};var g=function(m,o){dijit.byId("pleasewait").hide();alert("The request to the customization store failed. "+m.message+" : "+m.lineNumber+" : "+m.name)};a.fetch({onComplete:b,query:{action:"get",subject:GLOBAL_ADMIN_VAR,srNumber:getSRData().srNumber,view:"SR Activity Admin"},onError:g});console.log("done reading CustRequest admin group customization.... ")}function createAdminDialogFramework(b,g,f){var a=new dijit.Dialog({refocus:false,title:f,style:"width: 99%; height: 90%;font-size: 8pt;"});dojo.connect(a,"hide",function(){closeActivityAdminDialog(a)});a.setContent(b.domNode);a.domNode.style.zIndex="1";a.startup;dojo.connect(a,"show",this,dojo.hitch(this,resizeGrid,b.domNode));setTimeout(function(){a.show()},"10")}function closeActivityAdminDialog(a){srViewAdminCleanup(a);refreshActivityFilterList(getSRData())}function srViewAdminCleanup(b){var a=dojo.query(".dijitDropDownButton",b.containerNode.firstChild);dojo.forEach(a,function(g){var l=dijit.byNode(g);var h=l.dropDown;h.destroyRecursive()});var f=dojo.query(".dojoxGrid",b.containerNode.firstChild.firstChild);dojo.forEach(f,function(g){deleteGridIdFromInternalMaps(g.id)});b.destroyRecursive();cleanUpManageViewDiagRef()}function resizeGrid(f){var a=dijit.byNode(f);f.style.height="";a.layout();var b=dojo.query(".dojoxGrid",f);if(b!=null&&b.length>0){dijit.byNode(b[0]).resize()}}function cleanUpManageViewDiagRef(){dojo.forEach(manageViewMap.valArray,function(a){a.manageViewDialogRef=null})}var srTechCustomData={};var custDataMap=new Map();var custFieldArray=new Array();var manageFormViewMap=new Map();var customizableFlds=new Array();var naCustomizableFlds=new Array();function loadHeaderFields(){var a=SRMJSTimer.startTimer("refreshSRDetail_processSRHeaderData_loadSRHeaderCustomization_xhrRequest");dojo.xhrGet({url:"../../../LandingCustRequest",preventCache:true,content:{action:"get",view:"SR Navigator Default View"},handleAs:"json",load:function(l){SRMJSTimer.endTimer(a);var g=l.identifier;dojo.forEach(l.items,function(m){var o=m.componentList;if(o.length>0){dojo.forEach(o,function(p){window.custDataMap.put(p.type,p)})}});custFieldArray=new Array();var h=window.custDataMap.findIt(HEADER_BC_FORM);if(h!=-1){var f=custDataMap.get(HEADER_BC_FORM);var b=f.fields;if(b){dojo.forEach(b,function(m){if(m.position!=undefined){custFieldArray.push(m)}})}displaySRHeader()}},timeout:120000,error:function(b){SRMJSTimer.endTimer(a);console.debug("Error Loading SR header customizable data "+b)}})}var HEADER_BC_FORM="bcForm";var ACTIVITIES_BC_FORM="srActivitiesForm";var SR_ALL_FIELDS="allFields";var SR_FIELDS="fields";var FLD_POS="position";var FLD_ID="field";var FLD_NAME="name";var COLUMN_COUNT="columnCount";var DEFAULT_COLUMN_COUNT=5;function processTitle(){var b=custDataMap.get(HEADER_BC_FORM);var m=b.showSRViewerLink;var l=b.title;var g=getFieldVal(ACCOUNT_ID);var h=(m!=undefined&&m==true)?"<a class='nonactiveSRLink'  title='Open SR in SR Viewer' style='vertical-align:middle;font-size: 6pt;' href='#' onclick='openSrViewerWithSrNumber(\""+getSrNumber()+"\");'><img style='vertical-align:middle;' height='16' width='16' src='../images/viewrights.gif' alt='Open SR in SR Viewer'/></a>":"";if(l!=undefined&&l!=""&&l!="SR Navigator"){var a=formatTitleXhr(l,false);if(a!=undefined){a.addCallback(function(w){if(w!=undefined&&w.title!=undefined&&w.title!=""){var q=dijit.byId("srHeader");var p="";var u="";platinumConfigLevelIdentifier=getPageSytemParamValue("PLATINUM_SR_IDENTIFIER");var s=getPageSytemParamValue("SRM_CRITICAL_SYSTEM_SR_IDENTIFIER");if(s==undefined||dojo.string.trim(s)==""){s=CRITICAL_SYSTEM}if(headerDataAsJson.configLevel!=undefined&&headerDataAsJson.configLevel!=null&&platinumConfigLevelIdentifier!=null&&headerDataAsJson.configLevel==platinumConfigLevelIdentifier){p=platinumConfigLevelIdentifier+"  "}if(headerDataAsJson!=undefined&&headerDataAsJson.CSICriticalFlg=="true"){p+=s+"  "}if(p!=undefined&&dojo.string.trim(p)!=""){u="<span class='PlatinumCriticalSystemTitleText'>"+p+"</span>"}var v=u+"<span style='vertical-align:middle;'>"+w.title+"</span>";q.titleNode.innerHTML="";var o="";if(headerDataAsJson!=undefined&&(headerDataAsJson.configuration!=""||headerDataAsJson.Host!="")){o="<a class='nonactiveSRLink'  title='View CSM Configuration Details' style='vertical-align:middle;font-size: 6pt;' href='#' onclick='openProjConfigHostViewer(\"config\");'><img style='vertical-align:middle;' height='16' width='16' src='../images/config.gif' alt='View CSM Configuration Details'/></a>"}else{if(headerDataAsJson!=undefined&&(headerDataAsJson.Host!="")){o="<a class='nonactiveSRLink'  title='View CSM Host Details' style='vertical-align:middle;font-size: 6pt;' href='#' onclick='openProjConfigHostViewer(\"host\");'><img style='vertical-align:middle;' height='16' width='16' src='../images/config.gif' alt='View CSM Host Details'/></a>"}}var x="<span style='vertical-align:middle;' class='AcctClassificationText'></span>";if(headerDataAsJson!=undefined&&headerDataAsJson.Escalation!=""&&headerDataAsJson.Escalation=="Escalated"){v="<span style='vertical-align:middle;' class='EscalationText'>"+v+"</span>"}q.titleNode.innerHTML=h+o+x+v;if(acctClassification!=undefined&&acctClassification.accountId!=undefined&&acctClassification.showAcctIndicator!=undefined&&acctClassification.accountId==g){showAcctIndicator(acctClassification.showAcctIndicator,acctClassification.indicatorAcctClassification)}}})}}else{if(h!=undefined&&h!=""){var f=dijit.byId("srHeader");f.titleNode.innerHTML="";f.titleNode.innerHTML=h+getTitleStr(getSRData());if(acctClassification!=undefined&&acctClassification.accountId!=undefined&&acctClassification.showAcctIndicator!=undefined&&acctClassification.accountId==g){showAcctIndicator(acctClassification.showAcctIndicator,acctClassification.indicatorAcctClassification)}}}}function displayCustomSRFlds(){var o=custDataMap.findIt(HEADER_BC_FORM);if(o==-1){loadHeaderFields();o=custDataMap.findIt(HEADER_BC_FORM)}if(o!=-1){var b=dijit.byId("srHeaderC");var a=SRMJSTimer.startTimer("refreshSRDetail_processSRHeaderData_displayCustomizedHeaderData_"+getSrNumber());var p=custDataMap.get(HEADER_BC_FORM);var h=p.layout;if(h=="transposed"){var m=getRowLayout();b.setContent(m)}else{var g=getColumnLayout();b.setContent(g.toString())}dojo.style(b.domNode,{height:"auto"});populateSRHeader();limitText("description",2000);disableSRHeaderFields("unmaximizedSRHeaderTable");addUserTZ("unmaximizedSRHeaderTable");calTimePrefUtil.addUserCalTimePrefs("unmaximizedSRHeaderTable");var l=dojo.byId("unmaximizedSRHeaderTable");if(dojo.isIE>=6){if(l.clientHeight!=null){b.containerNode.style.height=l.clientHeight+20}}var f=dijit.byId("srHeader");if(f!=undefined&&(dojo.isFF||(dojo.isIE>=7))){f.containerNode.focus()}SRMJSTimer.endTimer(a)}}function getColumnLayout(){window.fldFoundObj={};var f=new StringBuffer();f.append("<table style='width:100%;' cellSpacing='0' cellPadding='0' id='unmaximizedSRHeaderTable'>");f.append("<tbody>");var a=custDataMap.get(HEADER_BC_FORM);var h=a.columnCount;if(h==undefined){h=DEFAULT_COLUMN_COUNT}if(custFieldArray.length>0){var l=1;var g=0;initFldFoundObj();dojo.forEach(custFieldArray,function(o){setFldFound(o);var m=getFieldLayout(o);if(m!=""){if(g==0){f.append(createStartRow())}f.append("<td nowrap='nowrap' valign='top' align='left'>"+m.toString()+"</td>");g=g+1;if(g==h){f.append(createEndRow());g=0}}});if(g>0&&g<h){for(i=g;i<h;i++){f.append("<td/>")}f.append(createEndRow());g=0}if(window.fldFoundObj.descriptionFound){f.append('<tr><td colSpan="'+h+'">');f.append(displayDescription2(a));f.append("</td></tr>")}f.append('<tr><td colSpan="'+h+'"  style="display:none;" >');var b=getNotFoundFldHtml(window.fldFoundObj);f.append(b);f.append("</td>");f.append("</tr>")}f.append("</tbody>");f.append("</table>");return f}var fldFoundObj={};function getRowLayout(){window.fldFoundObj={};var u=document.createElement("table");dojo.attr(u,{width:"100%",id:"unmaximizedSRHeaderTable",cellSpacing:"0",cellPadding:"0"});var g=document.createElement("tbody");u.appendChild(g);var v=custDataMap.get(HEADER_BC_FORM);var p=v.columnCount;if(p==undefined){p=DEFAULT_COLUMN_COUNT}if(custFieldArray.length>0){var a=0;var s=new Array();var m=0;var o=new Array();initFldFoundObj();dojo.forEach(custFieldArray,function(A){setFldFound(A);var y=getFieldLayout(A);if(y!=""){var w;if(a==0||a<p){w=document.createElement("tr");g.appendChild(w);s.push(w);o.push(1);a=a+1}else{w=s[m];if(o.length>m){var x=o[m];o[m]=x+1}m=m+1;if(m>=p){m=0}}var z=document.createElement("td");w.appendChild(z);z.innerHTML=y.toString()}});var f=1;if(o.length>0){f=o[0];for(i=1;i<o.length;i++){var q=o[i];if(q<f){var b=s[i];for(j=q+1;j<=f;j++){var l=document.createElement("td");b.appendChild(l)}}}}if(window.fldFoundObj.descriptionFound){var b=document.createElement("tr");g.appendChild(b);var l=document.createElement("td");dojo.attr(l,{colSpan:f});b.appendChild(l);l.innerHTML=displayDescription2(v)}var b=document.createElement("tr");g.appendChild(b);var l=document.createElement("td");dojo.attr(l,{colSpan:f});dojo.style(l,{display:"none"});b.appendChild(l);var h=getNotFoundFldHtml(window.fldFoundObj);l.innerHTML=h}return u}function initFldFoundObj(){window.fldFoundObj.statusFldFound=false;window.fldFoundObj.csiFldFound=false;window.fldFoundObj.losFldFound=false;window.fldFoundObj.slaFlagFldFound=false;window.fldFoundObj.accountFldFound=false;window.fldFoundObj.accountNumberFldFound=false;window.fldFoundObj.accountClassificationFldFound=false;window.fldFoundObj.srTypeFldFound=false;window.fldFoundObj.altContactLastNameFldFound=false;window.fldFoundObj.altContactFirstNameFldFound=false;window.fldFoundObj.altContactEmailFldFound=false;window.fldFoundObj.altContactPhoneFldFound=false;window.fldFoundObj.altContactTZFldFound=false;window.fldFoundObj.contactEmailFldFound=false;window.fldFoundObj.contactPhoneFldFound=false;window.fldFoundObj.primaryContactCountryFldFound=false;window.fldFoundObj.SRHIFlagFound=false;window.fldFoundObj.outageTypeFound=false;window.fldFoundObj.SRProductClass=false;window.fldFoundObj.SRProductSubscription=false;window.fldFoundObj.productIdFound=false;window.fldFoundObj.productLineFldFound=false;window.fldFoundObj.firstResponseDateFldFound=false;window.fldFoundObj.projectFldFound=false;window.fldFoundObj.configFldFound=false;window.fldFoundObj.milestoneFldFound=false;window.fldFoundObj.milestoneDateFldFound=false;window.fldFoundObj.hostFldFound=false;window.fldFoundObj.platformFldFound=false;window.fldFoundObj.platformVersionFldFound=false;window.fldFoundObj.databaseFldFound=false;window.fldFoundObj.databaseVersionFldFound=false;window.fldFoundObj.databasePlatformFldFound=false;window.fldFoundObj.databasePlatformVersionFldFound=false;window.fldFoundObj.toolsVersionFldFound=false;window.fldFoundObj.prodLangFldFound=false;window.fldFoundObj.productVersionFldFound=false;window.fldFoundObj.componentFldFound=false;window.fldFoundObj.subcomponentFldFound=false;window.fldFoundObj.categoryFldFound=false;window.fldFoundObj.clarificationFldFound=false;window.fldFoundObj.subcategoryFldFound=false;window.fldFoundObj.partnerFlagFldFound=false;window.fldFoundObj.indirectContAccountFound=false;window.fldFoundObj.indirectCSIFound=false;window.fldFoundObj.indirectCustVFound=false;window.fldFoundObj.indirectContTZFound=false;window.fldFoundObj.indirectContPhoneFound=false;window.fldFoundObj.indirectContEmailFound=false;window.fldFoundObj.indirectContLastNameFound=false;window.fldFoundObj.indirectContFirstNameFound=false;window.fldFoundObj.hwCountryFound=false;window.fldFoundObj.hwStateFound=false;window.fldFoundObj.hwCityFound=false;window.fldFoundObj.hwProvinceFound=false;window.fldFoundObj.hwCountyFound=false;window.fldFoundObj.hwAddr1Found=false;window.fldFoundObj.hwAddr2Found=false;window.fldFoundObj.hwPCFound=false;window.fldFoundObj.hwMCFound=false;window.fldFoundObj.serialNumFound=false;window.fldFoundObj.hostDescFound=false;window.fldFoundObj.hwHostFound=false;window.fldFoundObj.hwTimeZoneFound=false;window.fldFoundObj.descriptionFound=false;window.fldFoundObj.odFlagFound=false;window.fldFoundObj.srClass=false;window.fldFoundObj.srMetal=false;window.fldFoundObj.csiName=false;window.fldFoundObj.ASRDistributionListEmailFound=false;window.fldFoundObj.criticalSystemFlgFound=false;window.fldFoundObj.srMilestoneNameFldFound=false;window.fldFoundObj.srMilestoneDateFldFound=false;window.fldFoundObj.csiMilestoneNameFldFound=false;window.fldFoundObj.csiMilestoneDateFldFound=false;window.fldFoundObj.HWAddressIntegrationIdFound=false;window.fldFoundObj.envName=false;window.fldFoundObj.envVersion=false;window.fldFoundObj.envLifecycle=false;window.fldFoundObj.restrictedSRFlag=false;window.fldFoundObj.SROutageType=false;window.fldFoundObj.SROutageStartDate=false;window.fldFoundObj.SROutageEndDate=false;window.fldFoundObj.SROutagePercentage=false;window.fldFoundObj.cxTicketNumberFlag=false}function setFldFound(a){if(a==undefined||a.field==undefined||window.fldFoundObj==undefined){return}if(a.field=="status"){window.fldFoundObj.statusFldFound=true}if(a.field=="CSI"){window.fldFoundObj.csiFldFound=true}if(a.field=="levelofService"){window.fldFoundObj.losFldFound=true}if(a.field=="serviceLevelAgreementFlag"){window.fldFoundObj.slaFlagFldFound=true}if(a.field=="partnerFlag"){window.fldFoundObj.partnerFlagFldFound=true}if(a.field=="account"){window.fldFoundObj.accountFldFound=true}if(a.field=="accountNumber"){window.fldFoundObj.accountNumberFldFound=true}if(a.field=="classification"){window.fldFoundObj.accountClassificationFldFound=true}if(a.field=="SRType"){window.fldFoundObj.srTypeFldFound=true}if(a.field=="SRHIFlag"){window.fldFoundObj.SRHIFlagFound=true}if(a.field=="SRContactEmail"){window.fldFoundObj.contactEmailFldFound=true}if(a.field=="SRContactPhone"){window.fldFoundObj.contactPhoneFldFound=true}if(a.field=="primaryContactCountry"){window.fldFoundObj.primaryContactCountryFldFound=true}if(a.field=="SRProductClass"){window.fldFoundObj.SRProductClass=true}if(a.field=="SRProductSubscription"){window.fldFoundObj.SRProductSubscription=true}if(a.field=="product"){window.fldFoundObj.productIdFound=true}if(a.field=="productLine"){window.fldFoundObj.productLineFldFound=true}if(a.field=="firstResponseDate"){window.fldFoundObj.firstResponseDateFldFound=true}if(a.field=="outageType"){window.fldFoundObj.outageTypeFound=true}if(a.field=="projectName"){window.fldFoundObj.projectFldFound=true}if(a.field=="configurationId"){window.fldFoundObj.configFldFound=true}if(a.field=="projectMilestone"){window.fldFoundObj.milestoneFldFound=true}if(a.field=="projectMilestoneDate"){window.fldFoundObj.milestoneDateFldFound=true}if(a.field=="hostId"){window.fldFoundObj.hostFldFound=true}if(a.field=="platform"){window.fldFoundObj.platformFldFound=true}if(a.field=="platformVersion"){window.fldFoundObj.platformVersionFldFound=true}if(a.field=="databaseProduct"){window.fldFoundObj.databaseFldFound=true}if(a.field=="component"){window.fldFoundObj.componentFldFound=true}if(a.field=="subComponent2"){window.fldFoundObj.subcomponentFldFound=true}if(a.field=="productVersion2"){window.fldFoundObj.productVersionFldFound=true}if(a.field=="databaseVersion"){window.fldFoundObj.databaseVersionFldFound=true}if(a.field=="databasePlatform"){window.fldFoundObj.databasePlatformFldFound=true}if(a.field=="databasePlatformVersion"){window.fldFoundObj.databasePlatformVersionFldFound=true}if(a.field=="toolsVersion"){window.fldFoundObj.toolsVersionFldFound=true}if(a.field=="SRProdLang"){window.fldFoundObj.prodLangFldFound=true}if(a.field=="category"){window.fldFoundObj.categoryFldFound=true}if(a.field=="clarificationName"){window.fldFoundObj.clarificationFldFound=true}if(a.field=="subCategory"){window.fldFoundObj.subcategoryFldFound=true}if(a.field=="alternateContactBusinessPhone"){window.fldFoundObj.altContactPhoneFldFound=true}if(a.field=="alternateContactEmail"){window.fldFoundObj.altContactEmailFldFound=true}if(a.field=="alternateContactLastName"){window.fldFoundObj.altContactLastNameFldFound=true}if(a.field=="alternateContactFirstName"){window.fldFoundObj.altContactFirstNameFldFound=true}if(a.field=="alternateContactTimeZone"){window.fldFoundObj.altContactTZFldFound=true}if(a.field=="indirectContactAccount"){window.fldFoundObj.indirectContAccountFound=true}if(a.field=="indirectCSI"){window.fldFoundObj.indirectCSIFound=true}if(a.field=="indirectCustomerVisibility"){window.fldFoundObj.indirectCustVFound=true}if(a.field=="indirectContactTimeZone"){window.fldFoundObj.indirectContTZFound=true}if(a.field=="indirectContactPhone"){window.fldFoundObj.indirectContPhoneFound=true}if(a.field=="indirectContactEmail"){window.fldFoundObj.indirectContEmailFound=true}if(a.field=="indirectContactLastName"){window.fldFoundObj.indirectContLastNameFound=true}if(a.field=="indirectContactFirstName"){window.fldFoundObj.indirectContFirstNameFound=true}if(a.field=="HWCountry"){window.fldFoundObj.hwCountryFound=true}if(a.field=="HWState"){window.fldFoundObj.hwStateFound=true}if(a.field=="HWCounty"){window.fldFoundObj.hwCountyFound=true}if(a.field=="HWProvince"){window.fldFoundObj.hwProvinceFound=true}if(a.field=="HWCity"){window.fldFoundObj.hwCityFound=true}if(a.field=="HWStreetAddress"){window.fldFoundObj.hwAddr1Found=true}if(a.field=="HWStreetAddress2"){window.fldFoundObj.hwAddr2Found=true}if(a.field=="HWPostalCode"){window.fldFoundObj.hwPCFound=true}if(a.field=="HWTimeZone"){window.fldFoundObj.hwTimeZoneFound=true}if(a.field=="missionCriticalFlag"){window.fldFoundObj.hwMCFound=true}if(a.field=="serialNumber"){window.fldFoundObj.serialNumFound=true}if(a.field=="assetProductClass"){window.fldFoundObj.assetProductClassFound=true}if(a.field=="HWDescr"){window.fldFoundObj.hostDescFound=true}if(a.field=="HWHostname"){window.fldFoundObj.hwHostFound=true}if(a.field=="description"){window.fldFoundObj.descriptionFound=true}if(a.field=="ODFlag"){window.fldFoundObj.odFlagFound=true}if(a.field=="serviceRequestType"){window.fldFoundObj.srClass=true}if(a.field=="SRMetal"){window.fldFoundObj.srMetal=true}if(a.field=="CSIName"){window.fldFoundObj.csiNameFound=true}if(a.field=="ASRDistributionListEmail"){window.fldFoundObj.ASRDistributionListEmailFound=true}if(a.field=="CSICriticalFlg"){window.fldFoundObj.criticalSystemFlgFound=true}if(a.field=="SRMilestoneName"){window.fldFoundObj.srMilestoneNameFldFound=true}if(a.field=="SRMilestoneDate"){window.fldFoundObj.srMilestoneDateFldFound=true}if(a.field=="CSIMilestoneName"){window.fldFoundObj.csiMilestoneNameFldFound=true}if(a.field=="CSIMilestoneDate"){window.fldFoundObj.csiMilestoneDateFldFound=true}if(a.field=="HWAddressIntegrationId"){window.fldFoundObj.HWAddressIntegrationIdFound=true}if(a.field=="envName"){window.fldFoundObj.envName=true}if(a.field=="envVersion"){window.fldFoundObj.envVersion=true}if(a.field=="envLifecycle"){window.fldFoundObj.envLifecycle=true}if(a.field=="restrictedSRFlag"){window.fldFoundObj.restrictedSRFlag=true}if(a.field=="SROutageType"){window.fldFoundObj.SROutageType=true}if(a.field=="SROutageStartDate"){window.fldFoundObj.SROutageStartDate=true}if(a.field=="SROutageEndDate"){window.fldFoundObj.SROutageEndDate=true}if(a.field=="SROutagePercentage"){window.fldFoundObj.SROutagePercentage=true}if(a.field=="CXTicket"){window.fldFoundObj.cxTicketNumberFlag=true}}function getNotFoundFldHtml(b){var a=new StringBuffer();a.append('<input style="display:none;" dojoType="dijit.form.TextBox" value=""  id="srNumber" />');a.append('<input id="HWFlg" name="HWFlg" style="display:none;" type="checkbox" value="" dojoType="dijit.form.CheckBox" /> ');a.append('<input id="HW_SW" name="HW_SW" style="display:none;" type="text" value="" dojoType="dijit.form.TextBox" /> ');a.append('<input id="indirectHWFlg" name="indirectHWFlg" style="display:none;" type="checkbox" value="" dojoType="dijit.form.CheckBox"  />');a.append('<input id="indirectHW_SW" name="indirectHW_SW" style="display:none;" type="text" value="" dojoType="dijit.form.TextBox"  />');a.append('<input id="privateDataFlg" name="privateDataFlg" style="display:none;" type="text" value="" dojoType="dijit.form.TextBox" /> ');if(!b.statusFldFound){a.append('<input style="display:none;"  dojoType="dijit.form.TextBox" id="status" name="status" />')}if(!b.csiFldFound){a.append('<input style="display:none;" dojoType="dijit.form.TextBox" name="csi" title="CSI"  id="csi" /><input id="csiId" name="csiId" style="display:none;" dojoType="dijit.form.TextBox"/> <input id="csiContacId" name="csiContactId" style="display:none;" dojoType="dijit.form.TextBox"/>')}if(!b.losFldFound){a.append('<input style="display:none;" type="text" dojoType="dijit.form.TextBox" value="" id="svcLvl" />')}if(!b.slaFlagFldFound){a.append('<input type="checkbox" style="display:none;"  dojoType="dijit.form.CheckBox" name="svcLvlFlag" id="svcLvlFlag"/>')}if(!b.partnerFlagFldFound){a.append('<input type="checkbox" title="Partner" style="display:none;" dojoType="dijit.form.CheckBox" readonly="readonly"  onChange="PartnerSRUtil.onchange_partnerFlag(\'update\');" id="partnerFlag"/>')}if(!b.odFlagFound){a.append('<input type="checkbox" title="On-Demand" style="display:none;" onChange="onchange_odFlag(\'update\');" dojoType="dijit.form.CheckBox" readonly="readonly" id="odFlag"/>')}if(!b.accountFldFound){a.append('<input title="Account" dojoType="dijit.form.TextBox" style="display:none;" onChange="onchangeLov_fld(\'accountName\');" value="" id="accountName" />');a.append('<input id="accountId" value="" name="accountId" style="display:none;" onChange="onchange_account(\'update\');" dojoType="dijit.form.TextBox" />');a.append('<input id="accountIntegId" name="accountIntegId" type="hidden" value=""  dojoType="dijit.form.TextBox"/>')}if(!b.accountNumberFldFound){a.append('<input type="text" style="display:none;" dojoType="dijit.form.TextBox"  value="" id="accountNumber" />')}if(!b.accountClassificationFldFound){a.append('<input id="classification" style="display:none;" name="classification" readonly="readonly" type="text"  onChange="onchange_acctClassfication(this);" dojoType="dijit.form.TextBox">')}if(!b.productIdFound){a.append('<input title="Product"  dojoType="dijit.form.TextBox" style="display:none;"  value="" name="product" id="product" />');a.append('<input dojoType="dijit.form.TextBox" style="display:none;"  name="productClass" id="productClass" onChange="processProductClass(this.value, \'pheaderUpdate\');"/>');a.append('<input type="hidden" id="hasProdPlatform" name="hasProdPlatform"  dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="productClassification" name="productClassification" dojoType="dijit.form.TextBox"/>')}if(!b.productLineFldFound){a.append('<input dojoType="dijit.form.TextBox" style="display:none;"  value="" name="productLine" id="productLine" />')}if(!b.srTypeFldFound){a.append('<input title="SR Type" type="hidden" dojoType="dijit.form.TextBox" onChange="onchange_type(\'update\');" id="srType" name="srType"></input>')}if(!b.altContactLastNameFldFound){a.append('<input style="display:none;" dojoType="dijit.form.TextBox" id="alternateContactId" name="alternateContactId"></input>');a.append('<input style="display:none;" title="Alternate Contact Last Name" dojoType="dijit.form.TextBox" id="alternateContactLastName" name="alternateContactLastName"></input>')}if(!b.altContactFirstNameFldFound){a.append('<input style="display:none;" dojoType="dijit.form.TextBox" id="alternateContactFirstName" name="alternateContactFirstName"></input>')}if(!b.altContactPhoneFldFound){a.append('<input style="display:none;" dojoType="dijit.form.TextBox" id="alternateContactPhone" name="alternateContactPhone"></input>')}if(!b.altContactTZFldFound){a.append('<input style="display:none;" dojoType="dijit.form.TextBox" id="alternateContactTimeZone" name="alternateContactTimeZone"></input>')}if(!b.altContactEmailFldFound){a.append('<input style="display:none;" dojoType="dijit.form.TextBox" id="alternateContactEmail" name="alternateContactEmail"></input>')}if(!b.SRHIFlagFound){a.append('<input style="display:none;" type="checkbox" dojoType="dijit.form.CheckBox" name="HIAcknowledge" id="HIAcknowledge"/>')}if(!b.contactEmailFldFound){a.append('<input title="Contact Email"  style="display:none;" dojoType="dijit.form.TextBox" id="contactEmail" name="contactEmail"></input>')}if(!b.contactPhoneFldFound){a.append('<input title="Contact Phone#"  style="display:none;" dojoType="dijit.form.TextBox" id="contactPhone" name="contactPhone"></input>')}if(!b.primaryContactCountryFldFound){a.append('<input type="text" dojoType="dijit.form.TextBox" style="display:none;"  value="" id="country" />')}if(!b.firstResponseDateFldFound){a.append('<input title="Initial Response Done" style="display:none;" dojoType="dijit.form.TextBox" value="" id="responseDone" ></input>')}if(!b.outageTypeFound){a.append('<input style="display:none;" title="On-Demand Outage Type" dojoType="dijit.form.ComboBox" value="" id="outageType" ></input>')}if(!b.projectFldFound){a.append('<input dojoType="dijit.form.TextBox" title="Project" style="display:none;"  name="projectName" id="projectName" />');a.append('<input dojoType="dijit.form.TextBox" style="display:none;"  name="project" id="project" />')}if(!b.configFldFound){a.append('<input dojoType="dijit.form.TextBox" style="display:none;" title="Configuration"  name="configurationName" id="configurationName" />');a.append('<input dojoType="dijit.form.TextBox" style="display:none;"   name="configuration" id="configuration" />')}if(!b.milestoneFldFound){a.append('<input dojoType="dijit.form.TextBox" title="Project Milestone"  style="display:none;" onChange="onchangeLov_fld(\'milestone\');" name="milestone" id="milestone" />');a.append('<input dojoType="dijit.form.TextBox" style="display:none;" name="milestoneId" id="milestoneId" />')}if(!b.milestoneDateFldFound){a.append('<input dojoType="dijit.form.TextBox" style="display:none;"  name="milestoneDate" id="milestoneDate" />')}if(!b.srMilestoneNameFldFound){a.append('<input dojoType="dijit.form.TextBox" title="SR Milestone"  style="display:none;"  name="srMilestoneName" id="srMilestoneName" />')}if(!b.srMilestoneDateFldFound){a.append('<input dojoType="dijit.form.TextBox" style="display:none;"  name="srMilestoneDate" id="srMilestoneDate" />')}if(!b.csiMilestoneNameFldFound){a.append('<input dojoType="dijit.form.TextBox" title="Current Milestone"  style="display:none;"  name="csiMilestoneName" id="csiMilestoneName" />')}if(!b.csiMilestoneDateFldFound){a.append('<input dojoType="dijit.form.TextBox" style="display:none;"  name="csiMilestoneDate" id="csiMilestoneDate" />')}if(!b.hostFldFound){a.append('<input dojoType="dijit.form.TextBox" style="display:none;"   name="hostId" id="hostId" />')}if(!b.platformFldFound){a.append('<input style="display:none;" title="Platform/Hardware Architecture" id="platformDescription" name="platformDescription" onChange="onchangeLov_fld(\'platformDescription\');"  dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="platform" name="platform" dojoType="dijit.form.TextBox"/>')}if(!b.platformVersionFldFound){a.append('<input style="display:none;" title="Platform Version" id="platformVersionDescription" name="platformVersionDescription"  dojoType="dijit.form.TextBox"/>')}if(!b.databaseFldFound){a.append('<input  style="display:none;" title="Database" id="databaseDescription" name="databaseDescription" onChange="onchangeLov_fld(\'databaseDescription\');"  dojoType="dijit.form.TextBox"/>');a.append('<input  style="display:none;" id="database" name="database"   dojoType="dijit.form.TextBox"/>')}if(!b.databaseVersionFldFound){a.append('<input style="display:none;" title="Database Version" id="databaseVersion" name="databaseVersion"   class="srHeaderInput" dojoType="dijit.form.TextBox"/>')}if(!b.databasePlatformFldFound){a.append('<input style="display:none;" title="Database Platform" id="databasePlatformDesc" name="databasePlatformDesc" onChange="onchangeLov_fld(\'databasePlatformDesc\');" dojoType="dijit.form.TextBox"/>');a.append('<input style="display:none;" id="databasePlatform" name="databasePlatform" dojoType="dijit.form.TextBox"/>')}if(!b.databasePlatformVersionFldFound){a.append('<input style="display:none;" title="Database Platform Version" id="databasePlatformVersionDesc" name="databasePlatformVersionDesc"  dojoType="dijit.form.TextBox"/>');a.append('<input style="display:none;" id="databasePlatformVersion" name="databasePlatformVersion" dojoType="dijit.form.TextBox"/>')}if(!b.toolsVersionFldFound){a.append('<input style="display:none;" title="Tools Version" id="toolsVersionVersion" name="toolsVersionVersion" onChange="onchangeLov_fld(\'toolsVersionVersion\');" dojoType="dijit.form.TextBox"/>');a.append('<input style="display:none;" id="toolsVersion" name="toolsVersion" dojoType="dijit.form.TextBox"/>')}if(!b.prodLangFldFound){a.append('<input style="display:none;" title="SR Product Languages" id="productLanguagesDesc" name="productLanguagesDesc" dojoType="dijit.form.TextBox"/>')}if(!b.productVersionFldFound){a.append('<input style="display:none;" title="Product Version"  id="productVersion" name="productVersion"  dojoType="dijit.form.TextBox"/>');a.append('<input style="display:none;" id="productVersionDescription" name="productVersionDescription" dojoType="dijit.form.TextBox"/>')}if(!b.componentFldFound){a.append('<input style="display:none;" title="Component"   id="componentDescription" name="componentDescription"  onChange="onchangeLov_fld(\'componentDescription\');" dojoType="dijit.form.TextBox"/>');a.append('<input style="display:none;"  id="component" name="component" dojoType="dijit.form.TextBox"/>')}if(!b.subcomponentFldFound){a.append('<input style="display:none;" title="Sub Component"  id="subcomponentDescription" onChange="onchangeLov_fld(\'subcomponentDescription\');" name="subcomponentDescription"  dojoType="dijit.form.TextBox"/>');a.append('<input style="display:none;"  id="subcomponent" name="subcomponent" dojoType="dijit.form.TextBox"/>')}if(!b.categoryFldFound){a.append('<input style="display:none;" title="Category" id="categoryDescription" name="categoryDescription" onChange="onchangeLov_fld(\'categoryDescription\');" dojoType="dijit.form.TextBox" />');a.append('<input title="Sub Category" type="hidden" id="category" name="category" dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="clarificationCount" name="clarificationCount" dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="sev1Type" name="sev1Type" dojoType="dijit.form.TextBox"/>')}if(!b.clarificationFldFound){a.append('<input style="display:none;" title="Clarification" id="clarificationName" name="clarificationName" onChange="onchangeLov_fld(\'clarificationName\');" dojoType="dijit.form.TextBox" />');a.append('<input title="Clarification Id" type="hidden" id="clarificationId" name="clarificationId" dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="parentTemplateSev1Type" name="parentTemplateSev1Type" dojoType="dijit.form.TextBox"/>')}if(!b.subcategoryFldFound){a.append('<input title="Sub Category" style="display:none;" id="subCategory" name="subCategory" dojoType="dijit.form.TextBox"/>')}if(!b.indirectContAccountFound){a.append('<input type="hidden"  title="Indirect Contact Account" id="indirectContAcct"  dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="indirectContAcctId" name="indirectContAcctId" dojoType="dijit.form.TextBox"/>')}if(!b.indirectCSIFound){a.append('<input title="Reference CSI" type="hidden" dojoType="dijit.form.TextBox"  id="refCSI"/>');a.append('<input type="hidden" id="refCSIId" name="refCSIId" dojoType="dijit.form.TextBox"/>')}if(!b.indirectCustVFound){a.append('<input type="hidden"  title="End Customer Visibility"  id="indirectCustV" name="indirectCustV"  dojoType="dijit.form.TextBox"/>')}if(!b.indirectContTZFound){a.append('<input  type="hidden" dojoType="dijit.form.TextBox" name="indirectContTZ"  id="indirectContTZ"/>');a.append('<input type="hidden" id="indirectContTZId" name="indirectContTZId" dojoType="dijit.form.TextBox"/>')}if(!b.indirectContPhoneFound){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="indirectContPhone"  id="indirectContPhone"/>')}if(!b.indirectContEmailFound){a.append('<input  title="Indirect Contact Email" type="hidden"  dojoType="dijit.form.TextBox" name="indirectContEmail"  id="indirectContEmail"/>')}if(!b.indirectContLastNameFound){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="indirectContLast"  id="indirectContLast"/>');a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="indirectContId"  id="indirectContId"/>');a.append('<input type="hidden" id="indirect_csiContactStatus" name="indirect_csiContactStatus" dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="indirect_srViewFlag" name="indirect_srViewFlag" dojoType="dijit.form.TextBox"/>')}if(!b.indirectContFirstNameFound){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="indirectContFirst"  id="indirectContFirst"/>')}if(!b.hwCountryFound){a.append('<input  type="hidden"  title="Hardware Country" dojoType="dijit.form.TextBox" name="HWCountry"  id="HWCountry"/>')}if(!b.hwStateFound){a.append('<input  type="hidden"  title="Hardware State" dojoType="dijit.form.TextBox" name="HWState"  id="HWState"/>')}if(!b.hwCityFound){a.append('<input  type="hidden"  title="Hardware City" dojoType="dijit.form.TextBox" name="HWCity"  id="HWCity"/>')}if(!b.hwCountyFound){a.append('<input  type="hidden"  title="Hardware County" dojoType="dijit.form.TextBox" name="HWCounty"  id="HWCounty"/>')}if(!b.hwProvinceFound){a.append('<input  type="hidden"  title="Hardware Province" dojoType="dijit.form.TextBox" name="HWProvince"  id="HWProvince"/>')}if(!b.hwAddr1Found){a.append('<input  type="hidden"  title="Hardware Address Line1" dojoType="dijit.form.TextBox" name="HWAddr1"  id="HWAddr1"/>');a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="HWAddrId"  id="HWAddrId"/>')}if(!b.HWAddressIntegrationIdFound){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="HWAddressIntegrationId"  id="HWAddressIntegrationId"/>')}if(!b.hwAddr2Found){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="HWAddr2"  id="HWAddr2"/>')}if(!b.hwPCFound){a.append('<input  type="hidden"  title="Hardware Postal Code" dojoType="dijit.form.TextBox" name="HWPCode"  id="HWPCode"/>')}if(!b.hwMCFound){a.append('<input  type="checkbox" style="display:none;" dojoType="dijit.form.CheckBox" name="HWMC"  id="HWMC"/>')}if(!b.hwTimeZoneFound){a.append('<input type="hidden" title="Hardware Time Zone" id="HWTZ" name="HWTZ" dojoType="dijit.form.TextBox"/>');a.append('<input  id="HWTZId" name="HWTZId" type="hidden" dojoType="dijit.form.TextBox"/>')}if(!b.serialNumFound){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="serialNumId"  id="serialNumId"/>');a.append('<input  type="hidden"  title="Serial Number" dojoType="dijit.form.TextBox" name="serialNum"  id="serialNum"/>');a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="serialNumStatus"  id="serialNumStatus"/>');a.append('<input id="SNCSICStatus" name="SNCSICStatus" type="hidden"  dojoType="dijit.form.TextBox"/>');a.append('<input id="serialNumGCSIId" name="serialNumGCSIId" type="hidden"  dojoType="dijit.form.TextBox"/>');a.append('<input id="serialNumGCSI" name="serialNumGCSI" type="hidden"  dojoType="dijit.form.TextBox"/>')}if(!b.assetProductClassFound){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="serialNumProdClass"  id="serialNumProdClass"/>')}if(!b.hostDescFound){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="HWDesc"  id="HWDesc"/>')}if(!b.hwHostFound){a.append('<input title="Hardware Asset Name" type="hidden"  dojoType="dijit.form.TextBox" name="HWHost"  id="HWHost"/>')}if(!b.srClass){a.append('<input title="SR class" type="hidden"  dojoType="dijit.form.TextBox" name="srClass"  id="srClass"/>')}if(!b.srMetal){a.append('<input style="display:none;" title="Level" onChange="onchange_configLevel();" dojoType="dijit.form.TextBox" value="" id="configLevel" ></input>')}if(!b.csiNameFound){a.append('<input type="hidden" title="SI Name"  dojoType="dijit.form.TextBox" id="csiName" name="csiName" ></input>')}if(!b.ASRDistributionListEmailFound){a.append('<input type="hidden" dojoType="dijit.form.TextBox" id="ASRDistributionListEmail" name="ASRDistributionListEmail"/>')}if(!fldFoundObj.criticalSystemFlgFound){a.append('<input style="display:none;" type="checkbox" dojoType="dijit.form.CheckBox" name="criticalSystemFlg" id="criticalSystemFlg"/>')}if(!b.envName){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="envName"  id="envName"/>');a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="envGuid"  id="envGuid"/>');a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="envEmUrl"  id="envEmUrl"/>')}if(!b.envVersion){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="envVersion"  id="envVersion"/>')}if(!b.envLifecycle){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="envLifecycle"  id="envLifecycle"/>')}if(!b.restrictedSRFlag){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="restrictedSRFlag"  id="restrictedSRFlag"/>')}if(!b.cxTicketNumberFlag){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox"  id="cxTicketNumber" name="cxTicketNumber"/>')}if(!b.SROutageType){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="SROutageType"  id="SROutageType"/>');a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="SROutageId"  id="SROutageId"/>')}if(!b.SROutageStartDate){a.append('<input type="hidden"  type="text" dojoType="srmdojoc.form.DateTimeCombo" constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}" lang="en-us"  name="SROutageStartDate"  id="SROutageStartDate"/>')}if(!b.SROutageEndDate){a.append('<input  type="hidden" type="text" dojoType="srmdojoc.form.DateTimeCombo"   constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}" lang="en-us"   name="SROutageEndDate"  id="SROutageEndDate"/>')}if(!b.SROutagePercentage){a.append('<input  type="hidden"  dojoType="dijit.form.TextBox" name="SROutagePercentage"  id="SROutagePercentage"/>')}return a.toString()}function compareByPos(l,h){var g=l.position;var f=h.position;if(g==null&&f!=null){return -1}if(g!=null&&f==null){return 1}if(g==null&&f==null){return 0}if(g<f){return -1}if(g>f){return 1}if(g==f){return 0}}function compareByName(l,h){var g=l.name;var f=h.name;if(g==null&&f!=null){return -1}if(g!=null&&f==null){return 1}if(g==null&&f==null){return 0}if(g<f){return -1}if(g>f){return 1}if(g==f){return 0}}function createStartRow(){return"<TR>"}function createEndRow(){return"</TR>"}function getFieldLayout(f,a){var b="";if(f!=undefined){var g=f.field;switch(g){case"SRNumber":break;case"SRHIs":b=displaySRHIs();break;case"summary":b=displaySummary();break;case"severity":b=displaySeverity();break;case"requestFullSupportFlg":b=displayFullSuppFlg();break;case"status":b=displayStatus();break;case"sub-Status":b=displaySubstatus(a);break;case"esclStatus":b=displayEsclStatus();break;case"contactFirstName":b=displayContactFirstName();break;case"contactLastName":b=displayContactLastName();break;case"contactTimeZone":b=displayContactTZ();break;case"SRContactMethod":b=displayContactMethod();break;case"knownIssue":b=displayKnownIssue(a);break;case"alternateContactFirstName":b=displayAlternateContactFirstName();break;case"alternateContactLastName":b=displayAlternateContactLastName();break;case"alternateContactTimeZone":b=displayAlternateContactTZ();break;case"alternateContactEmail":b=displayAlternateContactEmail();break;case"alternateContactBusinessPhone":b=displayAlternateContactPhone();break;case"commitTime":b=displayCommitTime();break;case"nextResponseDue":b=displayNextResponseDue(a);break;case"CSI":b=displayCSI();break;case"levelofService":b=displaySvcLvl();break;case"serviceLevelAgreementFlag":b=displaySvcLvlFlag();break;case"classification":b=displayClassification();break;case"SRHIFlag":b=displaySRHIFlag(a);break;case"CEAccountManager":b=displayCEAccountMgr();break;case"CETemperature":b=displayCETemperature();break;case"CETargetDate":b=displayCETargetDate();break;case"CEEngagementStatus":b=displayCEEngagementStatus();break;case"CEEngagementTeam":b=displayCEEngagementTeam();break;case"CEEngagementId":b=displayCEEngagementId();break;case"created":b=displayCreated();break;case"openDate":b=displayOpenDate();break;case"closedDate":b=displayClosedDate();break;case"adjustedPriorityScore":b=displayAdjustedScore();break;case"description":b="";break;case"outageType":b=displayOdOutageType();break;case"owner":b=displayOwner(a);break;case"ownerGroup":b=displayOwnerGroup();break;case"esclOwner":b=displayEsclOwner();break;case"escalationLevel":b=displayEsclLevel();break;case"account":b=displayAccount();break;case"SRContactPhone":b=displayContactPhone();break;case"SRContactEmail":b=displayContactEmail();break;case"primaryContactCountry":b=displayContactCountry();break;case"updated":b=displayUpdated();break;case"updatedBy":b=displayUpdatedBy();break;case"lastPublicActivityCreatedDate":b=displayLastPubActivityCreated();break;case"lastPublicActivityCreatedBy":b=displayLastPubActivityCreatedBy();break;case"SRType":b=displaySRType();break;case"SRSubType":b=displaySRSubType();break;case"category":b=displayCategory();break;case"clarificationName":b=displayClarification();break;case"subCategory":b=displaySubcategory();break;case"productLine":b=displayProductLine();break;case"product":b=displayProduct();break;case"SRProductClass":b=displaySRProductClass();break;case"serviceName":b=displaySRProductSubscription();break;case"subscriptionDataCenter":b=displaySRProductSubscriptionDataCenter();break;case"serviceVersion":b=displaySRProductSubscriptionServiceVersionRow();break;case"component":b=displayComponent();break;case"subComponent2":b=displaySubcomponent();break;case"productVersion2":b=displayProductVersion();break;case"platform":b=displayPlatform();break;case"platformVersion":b=displayPlatformVersion();break;case"databaseProduct":b=displayDatabase();break;case"databaseVersion":b=displayDatabaseVersion();break;case"databasePlatform":b=displayDatabasePlatform();break;case"databasePlatformVersion":b=displayDatabasePlatformVersion();break;case"collaborationType":b=displayCollaborationType();break;case"toolsVersion":b=displayToolsVersion();break;case"firstResponseDate":b=displayInitialResponseDone();break;case"source":b=displaySource();break;case"SRSubmitDate":b=displaySubmitDate();break;case"dateReopened":b=displayDateReopened();break;case"createdBy":b=displayCreatedBy();break;case"accountNumber":b=displayAccountNumber();break;case"SRLanguage":b=displaySRLanguage();break;case"migratedSR":b=displayMigratedSR();break;case"updatesfromCustomer":b=displayUpdatesFromCustomer();break;case"cmdbConfig":b=displayCMDBConfig();break;case"ocmConfig":b=displayOCMConfig();break;case"configurationId":b=displayConfiguration();break;case"projectName":b=displayProject();break;case"projectMilestone":b=displayMilestone();break;case"projectMilestoneDate":b=displayMilestoneDate();break;case"hostId":b=displayHost();break;case"SRRootcause":b=displayRootcause(a);break;case"resolutionCode":b=displayResolutionCode(a);break;case"solutionImpDate":b=displaySolImpDate();break;case"problemSolutionODMTags":b=displayProbSolODMTags();break;case"consultativeODMTags":b=displayConsultativeODMTags();break;case"solutionOfferedDate":b=displaySolOfferedDate();break;case"transferCount":b=displayTransferCount();break;case"assignmentType":b=displayAssignType();break;case"assignmentStatus":b=displayAssignStatus();break;case"initialSolutionOfferedDate":b=displayInitSolOfferedDate();break;case"surveyNotificationDate":b=displaySurveyNotificationDate();break;case"partnerFlag":b=displayPartnerFlag();break;case"SRPlatformSpecific":b=displaySRPlatformSpecificFlag(a);break;case"ODMCompliantFlag":b=displayODMCompliantFlag();break;case"updatesfromCustomer":b=displayUpdatesfromCustomer();break;case"SRTranslation":b=displaySRTranslation();break;case"SRErrorMessage":b=displaySRErrorMessage();break;case"customerRefNumber":b=displayCustomerRefNumber();break;case"serviceTeam":b=displayServiceTeam();break;case"SRProdLang":b=displaySRProdLang();break;case"indirectContactAccount":b=displayIndirectContAcct();break;case"indirectCSI":b=displayRefCSI();break;case"indirectCustomerVisibility":b=displayIndirectCustVisibility();break;case"indirectContactTimeZone":b=displayIndirectContTZ();break;case"indirectContactPhone":b=displayIndirectContPhone();break;case"indirectContactLastName":b=displayIndirectContLastName();break;case"indirectContactFirstName":b=displayIndirectContFirstName();break;case"indirectContactEmail":b=displayIndirectContEmail();break;case"HWState":b=displayHWState();break;case"HWProvince":b=displayHWProvince();break;case"HWStreetAddress":b=displayHWAddrLine1();break;case"HWStreetAddress2":b=displayHWAddrLine2();break;case"HWCity":b=displayHWCity();break;case"HWPostalCode":b=displayHWPostalCode();break;case"HWCountry":b=displayHWCountry();break;case"HWCounty":b=displayHWCounty();break;case"HWHostname":b=displayHWHost();break;case"serialNumber":b=displaySerialNumber();break;case"assetProductClass":b=displayAssetProductClass();break;case"HWDescr":b=displayHWDesc();break;case"HWTimeZone":b=displayHWTZ();break;case"missionCriticalFlag":b=displayHWMC();break;case"permAddressChgFlag":b=displayPermAddrChg();break;case"liveTransferCount":b=displayLiveTransferCnt();break;case"SRIntegrationStatus":b=displayFSIntegStatus();break;case"SRIntegrationErrorMessage":b=displayFSIntegMessage();break;case"SRIntegrationDate":b=displayFSIntegDate();break;case"serviceRequestType":b=displaySRClass();break;case"ODFlag":b=displayODFlag();break;case"SRHardwareSoftware":b=displaySRHWFlag();break;case"SRMetal":b=displayConfigLevel();break;case"PLAType":b=displayPlaType();break;case"requestFullSupportReasonCode":b=displayUnset24x7ReasonCode(a);break;case"outageStatus":b=displayOutageStatus();break;case"CSIName":b=displayCSIName();break;case"ASRDistributionListEmail":b=displayASRDistributionListEmail();break;case"CSICriticalFlg":b=displayCriticalSystemFlg();break;case"SRMilestoneName":b=displaySRMilestoneName();break;case"SRMilestoneDate":b=displaySRMilestoneDate();break;case"CSIMilestoneName":b=displayCSIMilestoneName();break;case"CSIMilestoneDate":b=displayCSIMilestoneDate();break;case"HWOnsiteSLA":b=displayOnsiteSLA();break;case"evaluatedSeverity":b=displayEvaluatedSeverity();break;case"SROutageType":b=displaySROutageType();break;case"SROutageStartDate":b=displaySROutageStartDate();break;case"SROutageEndDate":b=displaySROutageEndDate();break;case"SROutagePercentage":b=displaySROutagePercentage();break;case"envName":b=displayEnvName();break;case"envVersion":b=displayEnvVersion();break;case"envLifecycle":b=displayEnvLifecycle();break;case"CXTicket":b=displayCXTicketNumber();break;case"ATLastFlowStatus":b=displayATLastFlowStatus();break;case"shortName":b=displaySRProductSubscriptionShortNameRow();break;case"DBName":b=displaySRProductSubscriptionDBNameRow();break;case"restrictedSRFlag":b=displayRestrictedSRFlagRow();break;case"subscriptionCloudType":b=displaySRProductSubscriptionCloudTypeRow();break;case"subscriptionOperationalPolicy":b=displaySRProductSubscriptionOperPolicyRow();break}return b}}function displaySRNumber(){}function displaySRSHIs(){}function displayCSI(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="csiRow">');a.append('<td  align="right" title="CSI" valign="middle" class="srHeaderAttribute srHeaderLabel" >CSI:</td> ');a.append('<td valign="middle"  align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle;" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px"  align="left" valign="middle"> <div class="errorDiv"><input title="CSI" required="true" dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" name="csi" id="csi" trim="true" onChange="setCsiNameTitle(); onchange_csi(\'update\');" readonly="readonly"/></div><input id="csiId" name="csiId" type="hidden" dojoType="dijit.form.TextBox"/><input id="csiContactId" name="csiContactId" type="hidden" dojoType="dijit.form.TextBox"/></td>');a.append('<td width="18px"><a style="vertical-align:middle" href="#" onClick="setCSILov();">');a.append('<img title="Pick CSI"  height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"><a class="nonactiveSRLink" href="#" onclick="invokeUrl(\'SPHome-dnCsi\',\'csiId\',\'CSI\' );">');a.append('<img title="View CSI Details"  src="../images/infoicon.gif" /></a></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySvcLvl(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td  align="right" title="Level Of Service" valign="middle" class="srHeaderAttribute srHeaderLabel" >LOS: </td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"   class="srHeaderInput readonly" readonly="readonly" value="" id="svcLvl" onChange="setTimeout(function(){onsiteSLACheck(\'update\')}, 10);"/>');a.append('</td><td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySvcLvlFlag(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td   align="right" title="Service Level Agreement"  valign="middle" class="srHeaderAttribute srHeaderLabel" >SLA:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" valign="middle">');a.append('<input type="checkbox" class="dijitButtonDisabled" dojoType="dijit.form.CheckBox" readonly="readonly"  name="svcLvlFlag" id="svcLvlFlag"/>');a.append('</td><td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAdjustedScore(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td nowrap="nowrap" title="Priority Score"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Priority Score:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox" style="vertical-align:middle;" class="srHeaderInput readonly" readonly="readonly" value="" id="adjustedPriorityScore" /></td>');a.append('<td width="18px" nowrap="nowrap" ><a id="tpslink" class="nonactiveSRLink" style="visibility:hidden;" href="#" onclick="invokeURLForTPS(\'SPHome-GPAMtpscore\', SRUtils.getCurrentSR().SRId, \'TPS\' );">TPS</a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayClassification(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td nowrap="nowrap"   align="right" title="Classification" valign="middle" class=" srHeaderAttribute srHeaderLabel">Classification:</td> ');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left"  valign="middle">');a.append('<span id="noclassification" style="display:none;vertical-align:middle;"></span>');a.append('<input id="classification" style="vertical-align:middle;" name="classification" readonly="readonly" type="text" class="srHeaderInput readonly" onChange="onchange_acctClassfication(this);" dojoType="dijit.form.TextBox"></input>');a.append("</td>");a.append('<td width="18px"><a class="nonactiveSRLink" id="classificationSearch" style="visibility:visible;" href="#" onclick="setAccountClassificationLov();"><img title="View other Classifications" height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRLanguage(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="languageDescriptionRow">');a.append('<td title="Language"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Language:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text"  style="vertical-align:middle;" title="Language"  class="srHeaderInput" onFocus="clearLovHiddenFld(\'languageDescription\');" onChange="onchangeLov_fld(\'languageDescription\');" id="languageDescription"  name="languageDescription" dojoType="dijit.form.TextBox"/></div>');a.append('<input id="languageDescription_lovHidden" name="languageDescription_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle;" href="#" onclick="setLanguageLov(\'update\');"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayDateReopened(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="dateReopenedRow">');a.append('<td nowrap="nowrap"   align="right" title="Date Reopened" valign="middle" class="srHeaderAttribute srHeaderLabel">Reopened:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text"  dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="dateReopened" /></div></td>');a.append('<td width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCommitTime(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="responseDueRow">');a.append('<td  nowrap="nowrap"  align="right" title="Initial Response Due" valign="middle" class="srHeaderAttribute srHeaderLabel" >Init Resp Due:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td  width="150px"  align="left" nowrap="nowrap" valign="middle" >');a.append('<div class="errorDiv"><input type="text" align="left" dojoType="dijit.form.TextBox" style="vertical-align:middle;"  class="srHeaderInput readonly" readonly="readonly" value="" id="responseDue" name="responseDue"/></div></td>');a.append('<td width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayNextResponseDue(a){var f=(a!=undefined&&a==true)?"nextResponseCloned":"nextResponse";var b=new StringBuffer();b.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="'+f+'Row">');b.append('<td class="srHeaderAttribute srHeaderLabel" align="right" title="Next Response Due" nowrap="nowrap" valign="middle">Next Resp Due:</td>');b.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="SrResponseReqHidden"/></td>');b.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');b.append('<div class="errorDiv"><input type="text"  lang="en-us" dojoType="srmdojoc.form.DateTimeCombo" promptMessage="Please enter date in format: 03-Feb-2008 12:00:00 PM"   constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}"  class="srHeaderInput" value="" id="'+f+'" /></div>');b.append("</td>");b.append('<td width="60px" nowarp="nowrap" ><span id ="recalcNextResponseDueDate">');b.append('<a class="nonactiveSRLink" href="#" onclick="getNextResponse()" title = "Recalculate Next Response Due Date"  style="vertical-align: middle;" >');b.append('<img width="15" height="15" src="../images/repeating_status.gif" alt="Recalculate Next Response Due Date" style="vertical-align:middle;" /></a>');b.append("</span>");b.append('<span class="tzclass"></span></td>');b.append("</tr></tbody></table>");return b.toString()}function displayInitialResponseDone(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="responseDoneRow">');a.append('<td nowrap="nowrap"    align="right" title="Initial Response Done" valign="middle"  class="srHeaderAttribute srHeaderLabel" >Init Resp Done:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" dojoType="dijit.form.TextBox" lang="en-us" class="srHeaderInput readonly" readonly="readonly" value="" id="responseDone" /></div></td>');a.append('<td width="56px"><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySubmitDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="submitDateRow">');a.append('<td nowrap="nowrap"   align="right" title="Submit Date" valign="middle" class="srHeaderAttribute srHeaderLabel" >Submitted:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="submitDate" /></div></td>');a.append('<td width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRHIFlag(a){var f=(a!=undefined&&a==true)?"HIAcknowledgeCloned":"HIAcknowledge";var b=new StringBuffer();b.append('<table   style="table-layout:fixed;width:375px;" align="left"><tbody><tr id="'+f+'Row">');b.append('<td title="HI Acknowledged"  nowrap="nowrap" align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Handling Instructions Ack:</td>');b.append('<td  class="reqImgNode" align="right" width="16px" nowrap="nowrap"><span></span></td>');b.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');b.append('<div class="errorDiv"><input  type="checkbox" dojoType="dijit.form.CheckBox" name="'+f+'" id="'+f+'"/></div><a style="vertical-align:middle" class="picklistNode"></a>');b.append('</td><td  width="18px"></td><td width="18px"></td>');b.append('<td width="18px"></td>');b.append("</tr></tbody></table>");return b.toString()}function displaySRHIs(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td  title="Handling Instructions"   align="right" valign="middle" nowrap="nowrap" class="srHeaderAttribute srHeaderLabel" >Handling Instructions:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px" align="left" nowrap="nowrap" valign="middle"><table width="100%"><tr><td width="82%" id="shiTD"/><td width="18%" id="accountGcmLinkTD"/></tr></table></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayMigratedSR(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Migrated SR #"   align="right" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Migrated SR #:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="migratedSr" /></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayOdOutageType(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="outageTypeRow">');a.append('<td title="Outage Type"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Outage Type: </td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadSimpleLov2&lov=OD_OUTAGE_TYPE" jsId="outageTypeStore"></div>');a.append('<div class="errorDiv"><input dojoType="dijit.form.ComboBox" onBlur="validateCombo(this);" invalidMessage="Invalid value for Outage Type" class="srHeaderInput" onFocus="onfocus_outageType(\'outageType\');" onChange="onchange_outageType(\'update\');" id="outageType" store="outageTypeStore"></input></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCMDBConfig(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="cmdbConfigRow">');a.append('<td title="CMDB Configuration"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >CMDB Config:  </td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input id="cmdbConfig" name="cmdbConfig"  labelAttr="name" labelType="html" class="srHeaderInput" dojoType="dijit.form.FilteringSelect"  onChange="showHideCmdbCmsLink();"/></div>');a.append("</td>");a.append('<td  width="18px"><div id="cmdbConfigLoading" style="color:blue; display:none;">Loading ...</div>');a.append('<a class="nonactiveSRLink" id="cmdbCmsLink"  title="View Host Details in Employee Portal" style="vertical-align:middle;font-size:6pt;display:none;" href="#" onclick="openCmdbMenu(arguments[0])">View Host</a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayODFlag(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="OD Flag" valign="middle"   align="right" class="srHeaderAttribute srHeaderLabel" ><span id="SRAttrODFlagLabel">On Demand</span>:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="checkbox" onChange="onchange_odFlag(\'update\');" class="readonly dijitButtonDisabled" dojoType="dijit.form.CheckBox" readonly="readonly" id="odFlag"/>');a.append('<a class="nonactiveSRLink" id="olmlink" style="visibility:hidden;" href="#" onclick="invokeUrl(\'OLM\',\'csi\',\'OLM\' );">OLM</a>');a.append('&nbsp;&nbsp;<a class="nonactiveSRLink" id="otslink" style="vertical-align:middle;visibility:hidden;" href="#" onclick="invokeOTSURL();">OTS</a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRHWFlag(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SRHWFlgRow">');a.append('<td title="SR HW Flag" valign="middle"   align="right" class="srHeaderAttribute srHeaderLabel" >Hardware:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="SR Hardware Flag" type="checkbox" class="dijitButtonDisabled"  dojoType="dijit.form.CheckBox" readonly="readonly"  id="SRHWFlg"/></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAccount(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="accountNameRow">');a.append('<td title="Account"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Account:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" readonly="readonly" value="" id="accountName" onChange="onchangeLov_fld(\'accountName\');" /></div>');a.append('<input id="accountId" name="accountId" value="" onChange="onchange_account(\'update\');"  type="hidden" dojoType="dijit.form.TextBox"/>');a.append('<input id="accountIntegId" name="accountIntegId" type="hidden" value=""  dojoType="dijit.form.TextBox"/>');a.append("</td>");a.append('<td width="18px"><a class="nonactiveSRLink" href="#" onclick="invokeUrl(\'SPHome-dnAcct\',\'accountId\',\'Account\' );"><img title="View Account Details"  src="../images/infoicon.gif" /></a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAccountNumber(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Account #"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Account #:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="accountNumber" /></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySeverity(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="severityRow">');a.append('<td title="Severity"   align="right" class="srHeaderAttribute srHeaderLabel" ><span id="SRAttrSeverityLabel">Severity</span>: </td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadlov&lov=SR_SEVERITY" jsId="lovSeverityStore"></div> <div class="errorDiv"><input class="srHeaderInput" required="true" invalidMessage="Invalid value for Severity" dojoType="dijit.form.ComboBox" id="severity"  name="severity" onFocus="onfocus_severity(\'severity\');" onBlur="validateCombo(this);"  onChange="onchange_severity(\'update\')" store="lovSeverityStore" >  </input></div> </td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySummary(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="summaryRow">');a.append('<td title="Summary"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Summary:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/> </td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div class="errorDiv"><input maxLength="100" title="Summary - Max of 100 characters"  invalidMessage="Required Field and Max of 100 characters" required="true" type="text" dojoType="dijit.form.ValidationTextBox" regExp=".{1,100}" class="srHeaderInput" value="" id="summary" /></div></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}var LINE_HEIGHT=1.33;function displayDescription2(b){console.debug("displayDescription2 ===>");var l=b.descriptionCollapsed;var f=b.descriptionRowCount;if(f==undefined){f=3}if(f>=0&&f<3){f=3}var a=f*LINE_HEIGHT+"em";var g=getDescToggleNode(l,f);var h=new StringBuffer();h.append('<table style="table-layout:fixed;" ><tbody><tr id="descriptionRow">');h.append('<td title="Description"  width="135px" style="white-space:nowrap;text-align:right;padding-left:4px;margin-left:4px;" align="right" valign="top" class="srHeaderAttribute srHeaderLabel" >');h.append('<span id="deschideshowtd" style="padding-right:5px;margin-right:5px;vertical-align:top;text-align:right;" >'+g+"</span>");h.append("Description:</td>");h.append('<td align="right" valign="top" width="16px" ><img style="vertical-align:top;" src="../images/requiredicon.gif" alt="Required"/></td>');h.append('<td  align="left" nowrap="nowrap" valign="middle"><div id="desctextareatd" style="paading-left:1px;margin-left:1px;" class="errorDiv">');if(!l){h.append('<textarea title="Description - Max of 2000 characters" id="description" name="description" required="true" dojoType="dijit.form.Textarea" height="" style="white-space:pre-wrap;width: 850px;min-height:'+a+';"></textarea>')}else{h.append('<textarea title="Description - Max of 2000 characters" id="description" name="description" required="true" dojotype="dijit.form.SimpleTextarea" rows="'+f+'" cols="" style="width: 850px;height:'+a+';"></textarea>')}h.append("</div></td>");h.append("</tr></tbody></table>");return h.toString()}function setToggleForDescription(h,s,f,o){if(s!=undefined&&s!=null){dojo._destroyElement(s.firstChild);var q=getDescToggleNode(h,o);s.innerHTML=q;var m=f.getValue();if(f&&f.declaredClass=="dijit.form.Textarea"){m=simpleHtmlEntityDecode(m)}var l=new Object();l.detail=m;var p=o*LINE_HEIGHT+"em";var b=3*LINE_HEIGHT+"em";if(h){f.destroy();var a="width: 850px;height:"+p+";";var g=new dijit.form.SimpleTextarea({id:"description",name:"description",rows:o,cols:"",style:a,value:m});g.startup();dojo.byId("desctextareatd").appendChild(g.domNode);dojo.connect(g,"onBlur",function(){SRUtils.onBlurFld(g,l,"srHeader")});limitText("description",2000);if(SRUtils.isSRClosed()){g.setAttribute("readOnly",true);dojo.addClass(g.domNode,"dijitTextBoxReadOnly")}}else{f.destroy();var a="white-space:pre-wrap;width: 850px;min-height:"+p+";";var g=new dijit.form.Textarea({id:"description",name:"description",height:"",style:a,value:m});g.startup();dojo.byId("desctextareatd").appendChild(g.domNode);dojo.connect(g,"onBlur",function(){SRUtils.onBlurFld(g,l,"srHeader")});limitText("description",2000);if(SRUtils.isSRClosed()){g.setAttribute("readOnly",true);dojo.addClass(g.domNode,"dijitTextBoxReadOnly")}}if(!(dojo.isIE<7)){if(dijit.byId("srHeader")){dijit.byId("srHeader").resize()}}}}function getDescToggleNode(b,a){console.debug("getDescToggleNode ===>");if(b){return'<img width="16" height="16" style="vertical-align:top" onclick="setToggleForDescription(false, dojo.byId(\'deschideshowtd\'),dijit.byId(\'description\'),'+a+')" src="../images/hideshow_infohidden.gif" alt="Show"/>'}else{return'<img   width="16" height="16" style="vertical-align:top" onclick="setToggleForDescription(true, dojo.byId(\'deschideshowtd\'),dijit.byId(\'description\'),'+a+')" src="../images/hideshow_infoshown.gif" alt="Hide"/>'}}function displaySRErrorMessage(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Error Message" valign="middle" class="srHeaderAttribute srHeaderLabel" >Error Message: </td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput" value="" id="custErrorMessage" /></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayFullSuppFlg(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="fld24x7Row">');a.append('<td title="24x7"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >24x7: </td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><input type="hidden" dojoType="dijit.form.TextBox" id="original24x7" /></td>');a.append('<td align="left" width="150px"  valign="top"><div class="errorDiv"><input dojoType="dijit.form.CheckBox"  type="checkbox" onClick="onChangeFullSupportFlag(this);" id="fld24x7" /></div><label for="fld24x7"><span id="fullSupportLabel"></span></label></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayStatus(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="statusRow">');a.append('<td title="Status"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" ><span id="SRAttrStatusLabel">Status</span>: </td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadlov&lov=SR_STATUS"  jsId="lovStatusStore"></div>');a.append('<div class="errorDiv"><input class="srHeaderInput readonly"  readonly="readonly"  dojoType="dijit.form.TextBox" id="status" name="status"></input></div></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySubstatus(a){var g=(a!=undefined&&a==true)?"substatusCloned":"substatus";var f=(a!=undefined&&a==true)?"onchange_updSubstatus(true)":"onchange_updSubstatus()";var b=new StringBuffer();b.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="'+g+'Row">');b.append('<td title="Substatus"   align="right" class="srHeaderAttribute srHeaderLabel" ><span id="SRAttr'+g+'Label">Substatus</span>: </td>');b.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/></td>');b.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');b.append('<div class="errorDiv"><input class="srHeaderInput" title="Substatus" onBlur="validateCombo(this);"  required="true" invalidMessage="Invalid value for Substatus" dojoType="dijit.form.ComboBox" id="'+g+'" name="'+g+'" onChange="'+f+'"></input></div></td>');b.append('<td width="18px"></td><td width="18px"></td>');b.append('<td width="18px"></td>');b.append("</tr></tbody></table>");return b.toString()}function displayContactLastName(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="contactLastNameRow">');a.append('<td title="Contact Last Name"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel">Last Name:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle;"  src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Contact Last Name" required="true" onFocus="clearLovHiddenFld(\'contactLastName\');" onChange="onchangeLov_fld(\'contactLastName\');onchange_primary(\'update\');" dojoType="dijit.form.TextBox"  class="srHeaderInput" id="contactLastName"></input></div>');a.append('<input id="contactId" name="contactId"  type="hidden" dojoType="dijit.form.TextBox" />');a.append('<input id="contactLastName_lovHidden"   name="contactLastName_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle;" href="#" onclick="setContactLov(\'update\');"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"><a class="nonactiveSRLink" href="#" onclick="invokeUrl(\'SPHome-dnContact\',\'contactId\',\'Primary Contact\' );"><img title="View Primary Contact Details"  src="../images/infoicon.gif" /></a></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayContactFirstName(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="contactFirstNameRow">');a.append('<td title="Contact First Name"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >First Name:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="contactFirstName" /></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayContactTZ(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Contact Time Zone"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Customer Local Time:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="contactClock" />');a.append("</td>");a.append('<td width="18px"><span id="contactClockHintWorkingHours">&nbsp;&nbsp;&nbsp;&nbsp;</span></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayContactMethod(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="contactMethodRow">');a.append('<td nowrap="nowrap"  align="right" title="Preferred Contact Method" valign="middle" class="srHeaderAttribute srHeaderLabel" >Contact Method:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/> </td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div  id="cmStore" dojoType="dojo.data.ItemFileReadStore" jsId="cmStore" url="../../../SRHeaderRequest?action=loadlov&lov=OFFER_MEDIA"></div>');a.append('<div class="errorDiv"><input class="srHeaderInput" title="Contact Phone #" required="true" onBlur="validateCombo(this);"  invalidMessage="Invalid value for Contact method" dojoType="dijit.form.ComboBox" store="cmStore"  value="" name="contactMethod" id="contactMethod"/></div></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayKnownIssue(a){var g=(a!=undefined&&a==true)?"knownIssueCloned":"knownIssue";var b=(a!=undefined&&a==true)?"kiStoreCloned":"kiStore";var f=new StringBuffer();f.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="'+g+'Row">');f.append('<td nowrap="nowrap"  align="right" title="Known Issue" valign="middle" class="srHeaderAttribute srHeaderLabel" >Known Issue:</td>');f.append('<td align="right" width="16px" class="reqImgNode" nowrap="nowrap"></td>');f.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');f.append('<div  id="'+b+'" dojoType="dojo.data.ItemFileReadStore" jsId="'+b+'" url="../../../SRHeaderRequest?action=loadlov&lov=SR_KNOWN_ISS"></div>');f.append('<div class="errorDiv"><input class="srHeaderInput" title="Known Issue"  onBlur="validateCombo(this);"  invalidMessage="Invalid value for Known Issue" dojoType="dijit.form.ComboBox" store="'+b+'"  value="" name="'+g+'" id="'+g+'"/></div></td>');f.append('<td width="18px"></td><td width="18px"></td>');f.append('<td width="18px"></td>');f.append("</tr></tbody></table>");return f.toString()}var knownIssueStore;function loadKnownIssue(){var b={url:"../../../SRHeaderRequest",content:{lov:"SR_KNOWN_ISS",action:"loadlov",rev:enabledLOVServlets.get("SRHeaderRequest")},handleAs:"json",load:function(f){knownIssueStore=f;return f}};var a=dojo.xhrGet(b)}function displayContactPhone(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="contactPhoneRow">');a.append('<td title="Contact Phone #"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Phone #:');a.append("</td>");a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/> </td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Contact Phone #" required="true" dojoType="dijit.form.TextBox" type="text" class="srHeaderInput" value="" id="contactPhone" /></div>');a.append("</td>");a.append('<td width="18px"><span style="vertical-align:middle;" id="phone1TD"></span></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayContactEmail(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="contactEmailRow">');a.append('<td title="Contact Email"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Email:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/>  </td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" title="Contact Email" required="true"  dojoType="dijit.form.TextBox"  class="srHeaderInput" value="" id="contactEmail" /></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayContactCountry(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="countryRow">');a.append('<td title="Contact Country"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Country: </td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="country" /></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayEsclStatus(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="escalationStatusRow">');a.append('<td title="Escalation Status"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" ><span id="SRAttrEscStatusLabel">Esc Status</span>: </td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox"  type="text" class="srHeaderInput readonly" readonly="readonly" value="" id="escalationStatus" /></div>');a.append("</td>");a.append('<td width="18px"><span/></td><td width="18px"><span/></td>');a.append('<td width="18px"><span/></td>');a.append("</tr></tbody></table>");return a.toString()}function displayEsclOwner(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="escalationOwnerRow">');a.append('<td title="Escalation Owner"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Esc Owner:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox"  type="text" class="srHeaderInput readonly" readonly="readonly" value="" id="escalationOwner" /></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayEsclLevel(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="escalationLvlRow">');a.append('<td title="Escalation Level"  align="right" valign="middle" nowrap="nowrap" class="srHeaderAttribute srHeaderLabel" >Esc Level:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox"  type="text" class="srHeaderInput readonly" readonly="readonly" value="" id="escalationLvl" /></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCreated(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td nowrap="nowrap" title="Created"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel">Created:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="created" /></td>');a.append('<td  width="56px"><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayOpenDate(){var a=new StringBuffer();a.append('<table   style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td nowrap="nowrap"  align="right" title="Opened Date" valign="middle" class="srHeaderAttribute srHeaderLabel" >Opened:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="opened" /></td>');a.append('<td  width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayClosedDate(){var a=new StringBuffer();a.append('<table   style="table-layout:fixed;width:375px;" ><tbody><tr>');a.append('<td nowrap="nowrap"  align="right" title="Closed Date" valign="middle" class="srHeaderAttribute srHeaderLabel" >Closed:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="dateClosed" /></td>');a.append('<td  width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCreatedBy(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Created By"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Created By:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="createdBy" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayUpdated(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td nowrap="nowrap"  align="right" title="Last Updated On" valign="middle" class="srHeaderAttribute srHeaderLabel">Updated:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="lastUpdated" /></td>');a.append('<td  width="56px"><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayLastPubActivityCreated(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td nowrap="nowrap"  align="right" title="Date Last Public Activity Created" valign="middle" class="srHeaderAttribute srHeaderLabel">Pub Activity Added:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="pubActivityCreated" /></td>');a.append('<td  width="56px"><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayUpdatedBy(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Last Updated By"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Updated By:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="lastUpdatedBy" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayLastPubActivityCreatedBy(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Last Public Activity Created By"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Pub Activity Added By:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="pubActivityCreatedBy" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCEAccountMgr(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="CE Account Manager"  align="right" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >CE Account Mgr:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="ceAccountManager" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCETemperature(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="CE Temperature"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >CE Temp:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="ceTemperature" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCETargetDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td nowrap="nowrap"   align="right" title="CE Critical Date" valign="middle" class="srHeaderAttribute srHeaderLabel" >CE Critical:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="ceCriticalDate" /></td>');a.append('<td  width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCEEngagementId(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="CE Engagement ID"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >CE Engmt ID:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="ceEngagementId" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCEEngagementTeam(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="CE Engagement Team"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >CE Engmt Team:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="ceEngagementTeam" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCEEngagementStatus(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="CE Engagement Status"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >CE Engmt Status:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="ceEngagementStatus" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRType(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="srTypeRow">');a.append('<td title="SR Type"   align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >SR Type:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadlov&lov=SR_TYPE"  jsId="lovSRTypeStore"></div>');a.append('<div class="errorDiv"><input class="srHeaderInput"  title="SR Type" required="true" invalidMessage="Invalid value for SR Type" dojoType="dijit.form.ComboBox" id="srType" name="srType"  store="lovSRTypeStore" onBlur="validateCombo(this);"  onChange="onchange_type(\'update\');"></input></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRSubType(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="subTypeRow">');a.append('<td title="SR Type"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Sub Type:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox"  id="subType" name="subType" class="srHeaderInput readonly"  readonly="readonly"></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCategory(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr  id="categoryDescriptionRow">');a.append('<td title="Category"    align="right" nowrap="nowrap"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Category:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"> <span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input  title="Category"  type="text" class="srHeaderInput" id="categoryDescription" name="categoryDescription" onFocus="clearLovHiddenFld(\'categoryDescription\');" onChange="onchangeLov_fld(\'categoryDescription\');" dojoType="dijit.form.TextBox" /></div>');a.append('<input type="hidden" id="category" name="category" dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="sev1Type" name="sev1Type" dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="clarificationCount" name="clarificationCount" dojoType="dijit.form.TextBox"/>');a.append('<input  id="categoryDescription_lovHidden" name="categoryDescription_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle" href="#" onclick="setCategoryLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayClarification(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr  id="clarificationNameRow">');a.append('<td title="Category"    align="right" nowrap="nowrap"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Clarification:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"> <span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input  title="Clarification"  type="text" class="srHeaderInput" id="clarificationName" name="clarificationName" onFocus="clearLovHiddenFld(\'clarificationName\');" onChange="onchangeLov_fld(\'clarificationName\');" dojoType="dijit.form.TextBox" /></div>');a.append('<input type="hidden" id="clarificationId" name="clarificationId" dojoType="dijit.form.TextBox"/>');a.append('<input  id="clarificationName_lovHidden" name="clarificationName_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append('<input type="hidden" id="parentTemplateSev1Type" name="parentTemplateSev1Type" dojoType="dijit.form.TextBox"/>');a.append("</td>");a.append('<td width="18px"><a id="clarificationNameSearch" style="vertical-align:middle" href="#" onclick="setClarificationLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySubcategory(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="subCategoryRow">');a.append('<td title="Sub Category"  align="right" valign="middle" align="right" class="srHeaderAttribute  srHeaderLabel">Sub Category:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Sub Category" class="srHeaderInput" onBlur="validateCombo(this);"  invalidMessage="Invalid value for Sub Category" dojoType="dijit.form.ComboBox" id="subCategory" name="subCategory" ></input></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayProduct(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="productDescriptionRow">');a.append('<td align="right"  title="Product" nowrap="nowrap"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Product:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" id="productDescription" name="productDescription" onFocus="clearLovHiddenFld(\'productDescription\');" onChange="onchangeLov_fld(\'productDescription\');showSHI(false);"  class="srHeaderInput" dojoType="dijit.form.TextBox" /></div>');a.append('<input  type="hidden" id="product" name="product" dojoType="dijit.form.TextBox"/>');a.append('<input  type="hidden" id="productClass" name="productClass" dojoType="dijit.form.TextBox" onChange="processProductClass(this.value, \'pheaderUpdate\');"/>');a.append('<input  type="hidden" id="productClassification" name="productClassification" dojoType="dijit.form.TextBox" />');a.append('<input  type="hidden" id="hasProdPlatform" name="hasProdPlatform" dojoType="dijit.form.TextBox"/>');a.append('<input  id="productDescription_lovHidden" name="productDescription_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td title="Licensed Products" width="18px" nowrap="nowrap" valign="middle" ><a style="vertical-align:middle" href="#" onclick="setLicensedProductLov(\'update\');"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td  title="All Products" width="18px" nowrap="nowrap" valign="middle" ><a  class="SWProdArea" style="vertical-align:middle" href="#" onclick="setProductLov(\'update\');"><img  height="16" width="16" src="../images/search.gif" /></a> </td>');a.append('<td  width="18px" nowrap="nowrap"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRProductClass(){if(!isTechnicalSR()){return""}var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SRProductClassRow">');if(isHardwareSR()){a.append('<td title="SR Product Class"  valign="middle" class="srHeaderAttribute srHeaderLabel" id="SRProductClassReadonlyLabel">SR Product Class:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="SR Product Class" readonly="readonly" dojoType="dijit.form.TextBox" class="srHeaderInput readonly" id="SRProductClass" />')}else{a.append('<td title="SR Product Class"  valign="middle" class="srHeaderAttribute srHeaderLabel" id="SRProductClassLabel">SR Product Class:');a.append("</td>");a.append('<td align="right" width="16px"  nowrap="nowrap"><span class="conditionalSrReq"><img style="vertical-align:middle;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div  id="SRProductClassStore" dojoType="dojo.data.ItemFileReadStore" jsId="SRProductClassStore" url="../../../SRHeaderRequest?action=loadlov&lov=SR_PROD_CLASS"></div>');a.append('<div class="errorDiv"> <input id="SRProductClass" title="SR Product Class" name="SRProductClass" class="srinput" invalidMessage="Invalid value for SR Product Class" ');a.append(' onChange="SREXA.onChangeSRProductClass();" dojoType="dijit.form.ComboBox" store="SRProductClassStore"/></div>')}a.append("</td>");a.append('<td width="54px" colspan="3"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRProductSubscription(){if(isHardwareSR()||!isTechnicalSR()){return""}var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SRProductSubscriptionRow">');a.append('<td title="Service Name"  valign="middle" class="srHeaderAttribute srHeaderLabel">Service Name:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="hidden" id="SubscriptionLOVSize" name="SubscriptionLOVSize" dojoType="dijit.form.TextBox" value="0" />');a.append('<div class="errorDiv"> <input id="SRProductSubscription" title="Service Name" name="SRProductSubscription" class="srHeaderInput srinput"  ');a.append(' dojoType="dijit.form.FilteringSelect"  /></div>');a.append("</td>");a.append('<td width="54px" colspan="3"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRProductSubscriptionDataCenter(){if(isHardwareSR()||!isTechnicalSR()){return""}var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SRProductSubscriptionDatacenterRow">');a.append('<td title="Subscription Datacenter"  align="right" valign="middle" nowrap="nowrap" class="srHeaderAttribute srHeaderLabel" >Datacenter:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox" title="Subscription Datacenter"  type="text" class="srHeaderInput readonly" readonly="readonly" value="" id="SRProductSubscriptionDatacenter" /></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRProductSubscriptionServiceVersionRow(){if(isHardwareSR()||!isTechnicalSR()){return""}var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SRProductSubscriptionServiceVersionRow">');a.append('<td title="Subscription Service version"  align="right" valign="middle" nowrap="nowrap" class="srHeaderAttribute srHeaderLabel" >Service Version:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox"  type="text" title="Subscription Service Version" class="srHeaderInput readonly" readonly="readonly" value="" id="SRProductSubscriptionServiceVersion" /></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayComponent(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="componentDescriptionRow">');a.append('<td title="Component"  align="right" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Component:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Component"  type="text" id="componentDescription" name="componentDescription" class="srHeaderInput" onFocus="clearLovHiddenFld(\'componentDescription\');" onChange="onchangeLov_fld(\'componentDescription\');" dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="component" name="component" dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="hasSubcomponent" name="hasSubcomponent" dojoType="dijit.form.TextBox"/>');a.append('<input id="componentDescription_lovHidden" name="componentDescription_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle;" href="#" onclick="setComponentLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td></tr></tbody></table>');return a.toString()}function displaySubcomponent(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="subcomponentDescriptionRow">');a.append('<td title="Sub Component"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Sub Component:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span> </td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Sub Component" type="text" id="subcomponentDescription" onFocus="clearLovHiddenFld(\'subcomponentDescription\');" onChange="onchangeLov_fld(\'subcomponentDescription\');" name="subcomponentDescription" class="srHeaderInput"  dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="subcomponent" name="subcomponent" dojoType="dijit.form.TextBox"/>');a.append('<input id="subcomponentDescription_lovHidden" name="subcomponentDescription_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle;" href="#" onclick="setSubcomponentLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td></tr></tbody></table>');return a.toString()}function displayProductLine(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="productLineRow">');a.append('<td title="Product Line"  nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Product Line:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox" title="Product Line" readonly="readonly" class="srHeaderInput readonly" value="" id="productLine" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayProductVersion(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="productVersionRow">');a.append('<td title="Product Version"   align="right" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Product Ver:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span> </td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Product Version" type="text"  id="productVersion" name="productVersion" onFocus="clearLovHiddenFld(\'productVersion\');" onChange="onchangeLov_fld(\'productVersion\');" class="srHeaderInput" dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="productVersionDescription" name="productVersionDescription" dojoType="dijit.form.TextBox"/>');a.append('<input id="productVersion_lovHidden" name="productVersion_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle;" href="#" onclick="setProductVersionLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td></tr></tbody></table>');return a.toString()}function displayPlatform(){var a=new StringBuffer();a.append('<table style="table-layout:fixed;width:375px;"><tbody><tr id="platformDescriptionRow">');a.append('<td  align="right" title="Platform/Hardware Architecture" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Platform/HW Arch:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Platform/Hardware Architecture" type="text" id="platformDescription" name="platformDescription" onFocus="clearLovHiddenFld(\'platformDescription\');" onChange="onchangeLov_fld(\'platformDescription\');" class="srHeaderInput" dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="platform" name="platform" dojoType="dijit.form.TextBox"/>');a.append('<input id="platformDescription_lovHidden" name="platformDescription_lovHidden" type="hidden" dojoType="dijit.form.TextBox" /></td>');a.append('<td  width="18px" align="left" nowrap="nowrap"><a style="vertical-align:middle" href="#" onclick="setPlatformLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td  width="18px" nowrap="nowrap"></td>');a.append('<td width="18px" ></td></tr></tbody></table>');return a.toString()}function displayPlatformVersion(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="platformVersionDescriptionRow">');a.append('<td   title="Platform Version"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Platform Ver:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input  title="Platform Version" type="text"  class="srHeaderInput" id="platformVersionDescription" name="platformVersionDescription" onFocus="clearLovHiddenFld(\'platformVersionDescription\');" onChange="onchangeLov_fld(\'platformVersionDescription\');"  dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="platformVersion" name="platformVersion" dojoType="dijit.form.TextBox"/>');a.append('<input id="platformVersionDescription_lovHidden" name="platformVersionDescription_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle" href="#" onclick="setPlatformVersionLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayDatabase(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="databaseDescriptionRow">');a.append('<td title="Database"  valign="middle"  align="right" class="srHeaderAttribute srHeaderLabel" >DB:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Database" type="text" id="databaseDescription" name="databaseDescription" onFocus="clearLovHiddenFld(\'databaseDescription\');" onChange="onchangeLov_fld(\'databaseDescription\');" class="srHeaderInput" dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="database" name="database" dojoType="dijit.form.TextBox"/>');a.append('<input id="databaseDescription_lovHidden" name="databaseDescription_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle" href="#" onclick="setDatabaseLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td></tr></tbody></table>');return a.toString()}function displayDatabaseVersion(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="databaseVersionRow">');a.append('<td title="Database Version"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >DB Ver:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Database Version" type="text" id="databaseVersion" name="databaseVersion" onFocus="clearLovHiddenFld(\'databaseVersion\');" onChange="onchangeLov_fld(\'databaseVersion\');"  class="srHeaderInput" dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="databaseVersionDescription" name="databaseVersionDescription" dojoType="dijit.form.TextBox"/>');a.append('<input id="databaseVersion_lovHidden" name="databaseVersion_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle" href="#" onclick="setDatabaseVersionLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayToolsVersion(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="toolsVersionVersionRow">');a.append('<td title="Tools Version"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Tools Ver:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Tools Version" type="text" id="toolsVersionVersion" name="toolsVersionVersion"  class="srHeaderInput" onFocus="clearLovHiddenFld(\'toolsVersionVersion\');" onChange="onchangeLov_fld(\'toolsVersionVersion\');" dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="toolsVersion" name="toolsVersion" dojoType="dijit.form.TextBox"/>');a.append('<input id="toolVersionVersion_lovHidden" name="toolsVersionVersion_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle" href="#" onclick="setToolsVersionLov();"><img height="16" width="16" src="../images/search.gif" /></a> </td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCirl(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="OD CI Resource Locator"  align="right" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >OD CI Res Loc:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input id="cirl" name="cirl" class="srHeaderInput" readonly="readonly"  dojoType="dijit.form.TextBox"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayNonCCRId(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="OD Config ID" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >OD Config ID:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input id="nonCCRCIID" name="nonCCRCIID" class="srHeaderInput" readonly="readonly" onChange="onchange_odConfigId()" dojoType="dijit.form.TextBox"/>');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle" href="#" onclick="setCMDBLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"><a class="nonactiveSRLink" id="cmdbViewerLink" title="View Configuration" style="visibility:hidden;" href="#" onclick="invokeUrl(\'CMDBViewer\',\'nonCCRCIID\',\'Non CCR Config Id\');"><img height="16" width="16" src="../images/config.gif" /></a></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCiType(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="OD CI Type" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >OD CI Type:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input id="ciType" name="ciType" class="srHeaderInput" readonly="readonly" dojoType="dijit.form.TextBox"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayUpdatesFromCustomer(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Updates from Customer"  align="right" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Cust Updates:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="updatesFromCustomer" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySource(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="srsourceRow">');a.append('<td title="Source" valign="middle"  align="right" class="srHeaderAttribute srHeaderLabel" >Source:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><img style="vertical-align:middle" src="../images/requiredicon.gif" alt="Required"/></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadlov&lov=SR_SOURCE" jsId="lovSourceStore"></div>');a.append('<div class="errorDiv"><input title="Source" class="srHeaderInput" onBlur="validateCombo(this);"  required="true" invalidMessage="Invalid value for Source" dojoType="dijit.form.ComboBox" id="srsource" name="srsource"  store="lovSourceStore" ></input></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayOwner(a){var f=(a!=undefined&&a==true)?"empEmailCloned":"empEmail";var b=new StringBuffer();b.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="'+f+'Row">');b.append('<td title="Owner" valign="middle"  align="right" class="srHeaderAttribute srHeaderLabel" >Owner:</td>');b.append('<td class="reqImgNode" align="right" width="16px" nowrap="nowrap"><span></span></td>');b.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');b.append('<div class="errorDiv"><input  type="text" readonly="readonly" class="srHeaderInput" onFocus="clearLovHiddenFld(\'empEmail\');" onChange="onchangeLov_fld(\'empEmail\');" id="'+f+'" name="'+f+'" dojoType="dijit.form.TextBox"/></div>');b.append('<input id="'+f+'_lovHidden" name="'+f+'_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');b.append('<input id="'+f+'Id" name="'+f+'Id" type="hidden" dojoType="dijit.form.TextBox" />');b.append("</td>");b.append('<td style="align:right;" width="75px"><div>');b.append('<a id="engrA" style="vertical-align:middle;" href="#" onclick="checkEngrAvailability()" title="Check SR Owner GRP Availability by clicking on the box. &#10;- Green box with &#10004; is Available &#10;- Red box with &#10006; is not Available.&#10; Or click on GRP link to see Engineer GRP schedule for One week."><img id="engrAvailabilityIcon" height="13" width="13" src="../images/whitebox.gif" /></a>');b.append('&nbsp;<a id="grpSchedule" style="vertical-align:middle;" href="#" title="Open GRP and show SR owner availability for this week." onclick="openGRPSchedule();">GRP</a>');b.append('&nbsp;<a id="imOwner" style="vertical-align:middle" href="#"  title="Start Chat with SR Owner" onClick="startChat();">IM</a>');b.append('<td width="18px"><a id="'+f+'Lov" style="vertical-align:middle;visibility:hidden;" href="#" onclick="setSPOwnerLov();"><img height="16" width="16" src="../images/search.gif" /></a></td> ');b.append("</div></td>");b.append("</tr></tbody></table>");return b.toString()}function displayOwnerGroup(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="groupDescRow">');a.append('<td title="Group"  valign="middle"  align="right" class="srHeaderAttribute srHeaderLabel" >Group:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input readonly="readonly" id="groupDesc" name="groupDesc" type="text" class="srHeaderInput"  dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="group" name="group" dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="groupID" name="groupID" dojoType="dijit.form.TextBox"/>');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle;visibility:hidden;" href="#" onclick="setGroupLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayDatabasePlatform(){var a=new StringBuffer();a.append('<table   style="table-layout:fixed;width:375px;"><tbody><tr id="databasePlatformDescRow">');a.append('<td title="Database Platform"  align="right"  valign="middle" class="srHeaderAttribute srHeaderLabel" >DB Platform:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input  title="Database Platform" type="text" id="databasePlatformDesc" name="databasePlatformDesc" onFocus="clearLovHiddenFld(\'databasePlatformDesc\');" onChange="onchangeLov_fld(\'databasePlatformDesc\');" class="srHeaderInput" dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="databasePlatform" name="databasePlatform" dojoType="dijit.form.TextBox"/>');a.append('<input id="databasePlatformDesc_lovHidden" name="databasePlatformDesc_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle" href="#" onclick="setDatabasePlatformLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayDatabasePlatformVersion(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="databasePlatformVersionDescRow">');a.append('<td title="Database Platform Version"  align="right"  valign="middle" class="srHeaderAttribute srHeaderLabel" >DB Platform Ver:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input  title="Database Platform Version" type="text" id="databasePlatformVersionDesc" name="databasePlatformVersionDesc" onFocus="clearLovHiddenFld(\'databasePlatformVersionDesc\');" onChange="onchangeLov_fld(\'databasePlatformVersionDesc\');" class="srHeaderInput" dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="databasePlatformVersion" name="databasePlatformVersionDesc" dojoType="dijit.form.TextBox"/>');a.append('<input id="databasePlatformVersionDesc_lovHidden" name="databasePlatformVersionDesc_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle" href="#" onclick="setDatabasePlatformVersionLov();"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCollaborationType(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Collaboration Type" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Collab Type:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="collaborationType" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRClass(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="SR Class" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >SR Class:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="srClass" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayOCMConfig(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="OCM Configuration" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >OCM Config:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="checkbox" dojoType="dijit.form.CheckBox" class="dijitButtonDisabled"  readonly="readonly" id="configurationOCMConfiguration"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayProject(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="projectNameRow">');a.append('<td nowrap="nowrap" title="Project"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Project:</td> ');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput" name="projectName" id="projectName" trim="true" onFocus="clearLovHiddenFld(\'projectName\');" onChange="onchangeLov_fld(\'projectName\');onchange_projectId();"/></div> <input id="project" name="project" type="hidden" dojoType="dijit.form.TextBox"/> <input id="projectName_lovHidden" name="projectName_lovHidden" type="hidden" dojoType="dijit.form.TextBox" /></td>');a.append('<td width="18px"><a id="projectPickLink" style="vertical-align:middle" href="#" onClick="setProjectLov();">');a.append('<img title="Pick Project"  height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"><a class="nonactiveSRLink" href="#" onclick="invokeDnDialog(\'project\');">');a.append('<img title="View Project Details"  src="../images/infoicon.gif" /></a></td>');a.append('<td width="18px"><a id="projectViewerLink" class="nonactiveSRLink" title="View CSM Project Details in Internal Portal" style="vertical-align:middle;display:none;font-size: 6pt;" href="#" onclick="openProjConfigHostViewer(\'project\');">');a.append("CSM</a></td>");a.append("</tr></tbody></table>");return a.toString()}function displayMilestone(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="milestoneRow">');a.append('<td title="Project Milestone" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Milestone:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput" name="milestone" id="milestone" trim="true" onFocus="clearLovHiddenFld(\'milestone\');" onChange="onchangeLov_fld(\'milestone\');"/> <input id="milestoneId" name="milestoneId" type="hidden" dojoType="dijit.form.TextBox"/></div> <input id="milestone_lovHidden" name="milestone_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a id="milestonePickLink" style="vertical-align:middle" href="#" onClick="setProjectMilestoneLov();">');a.append('<img title="Pick Project Milestone"  height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayMilestoneDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="milestoneDateRow">');a.append('<td title="Project Milestone Date"  align="right" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Milestone Date:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input class="srHeaderInput readonly" type="text" readonly="readonly" dojoType="dijit.form.TextBox" id="milestoneDate"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayConfiguration(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="configurationNameRow">');a.append('<td nowrap="nowrap"  align="right" title="Configuration" valign="middle" class="srHeaderAttribute srHeaderLabel" >Configuration:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" name="configurationName" id="configurationName" trim="true" onFocus="clearLovHiddenFld(\'configurationName\');" /></div><input id="configuration" onChange="onchange_configId();" name="configuration" type="hidden" dojoType="dijit.form.TextBox"/><input id="configurationName_lovHidden" name="configurationName_lovHidden" type="hidden" dojoType="dijit.form.TextBox" /></td>');a.append('<td width="18px"><div id="configurationNameLoading" style="color:blue; display:none;">Loading ...</div><a id="configPickLink" style="vertical-align:middle" href="#" onClick="setProjectConfigLov();">');a.append('<img title="Pick Configuration"  height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"><a class="nonactiveSRLink" href="#" onclick="invokeDnDialog(\'configuration\');">');a.append('<img title="View Configuration Details in Data Navigator"  src="../images/infoicon.gif" /></a></td>');a.append('<td width="18px"><a id="configViewerLink" class="nonactiveSRLink" title="View CSM Configuration in Internal Portal" style="vertical-align:middle;display:none;font-size: 6pt;" href="#" onclick="openProjConfigHostViewer(\'config\');">');a.append("CSM</a></td>");a.append("</tr></tbody></table>");return a.toString()}function displayHost(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="hostIdRow">');a.append('<td title="Configuration Host" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Host:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" name="hostId" id="hostId" trim="true" onFocus="clearLovHiddenFld(\'hostId\');" onChange="onchangeLov_fld(\'hostId\');onchange_host();"/></div><input id="hostId_lovHidden" name="hostId_lovHidden" type="hidden" dojoType="dijit.form.TextBox" /></td>');a.append('<td width="18px"><a id="hostPickLink" style="vertical-align:middle" href="#" onClick="setConfigHostLov(\'update\');">');a.append('<img title="Pick Host"  height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"><a id="hostViewerLink" class="nonactiveSRLink" title="View Configuration Host Details in Internal Portal" style="vertical-align:middle;display:none;font-size: 6pt;" href="#" onclick="openProjConfigHostViewer(\'host\');">');a.append("CSM</a></td>");a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAlternateContactFirstName(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="alternateContactFirstNameRow">');a.append('<td title="Alternate Contact First Name" valign="middle" class="srHeaderAttribute srHeaderLabel" >Alt Cont First:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="alternateContactFirstName" /></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAlternateContactLastName(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="alternateContactLastNameRow">');a.append('<td title="Alternate Contact Last Name" valign="middle" class="srHeaderAttribute srHeaderLabel" >Alt Cont Last:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input onFocus="clearLovHiddenFld(\'alternateContactLastName\');" onChange="onchangeLov_fld(\'alternateContactLastName\');onchange_alternate(\'update\');" dojoType="dijit.form.TextBox"  class="srHeaderInput" id="alternateContactLastName"></input></div>');a.append("</td>");a.append('<td width="18px"><input  id="alternateContactId" name="alternateContactId" type="hidden" dojoType="dijit.form.TextBox" /><a style="vertical-align:bottom" href="#" onclick="setAlternateContactLov(\'update\');"><img height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"><input   id="alternateContactLastName_lovHidden" name="alternateContactLastName_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append('<a class="nonactiveSRLink" href="#" onclick="invokeUrl(\'SPHome-dnContact\',\'alternateContactId\',\'Alternate Contact\' );"><img title="View Primary Contact Details"  src="../images/infoicon.gif" /></a></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAlternateContactEmail(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="alternateContactEmailRow">');a.append('<td title="Alternate Contact Email" valign="middle" class="srHeaderAttribute srHeaderLabel" >Alt Cont Email: </td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox" readonly="readonly" class="srHeaderInput readonly" value="" id="alternateContactEmail" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAlternateContactTZ(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="alternateContactTimeZoneRow">');a.append('<td title="Alternate Contact Timezone" valign="middle" class="srHeaderAttribute srHeaderLabel" >Alt Cont TZ: </td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox" readonly="readonly" class="srHeaderInput readonly" value="" id="alternateContactTimeZone" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAlternateContactPhone(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="alternateContactPhoneRow">');a.append('<td title="Alternate Contact Phone" valign="middle" class="srHeaderAttribute srHeaderLabel" >Alt Cont Phone:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox" readonly="readonly" class="srHeaderInput readonly" value="" id="alternateContactPhone" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayRootcause(a){var f=(a!=undefined&&a==true)?"rootCauseCloned":"rootCause";a=(a==undefined)?false:a;var b=new StringBuffer();b.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="'+f+'Row">');b.append('<td title="Root Cause" valign="middle" class="srHeaderAttribute srHeaderLabel" >Root Cause:</td>');b.append('<td  class="reqImgNode" align="right" width="16px" nowrap="nowrap"><span></span></td>');b.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');b.append('<div class="errorDiv"><input class="srHeaderInput" onBlur="validateCombo(this);"  title="Root Cause" invalidMessage="Invalid value for Root Cause" onChange="loadReasonCodeLOV('+a+');" dojoType="dijit.form.ComboBox" id="'+f+'" name="'+f+'" ></input></div>');b.append("</td>");b.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');b.append("</tr></tbody></table>");return b.toString()}function displayResolutionCode(a){var f=(a!=undefined&&a==true)?"reasonCodeCloned":"reasonCode";var b=new StringBuffer();b.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="'+f+'Row">');b.append('<td title="Reason Code" valign="middle" class="srHeaderAttribute srHeaderLabel" >Reason Code:</td>');b.append('<td  class="reqImgNode" align="right" width="16px" nowrap="nowrap"><span></span></td>');b.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');b.append('<div class="errorDiv"><input class="srHeaderInput" onBlur="validateCombo(this);"  title="Reason Code" invalidMessage="Invalid value for Reason Code" dojoType="dijit.form.ComboBox" id="'+f+'" name="'+f+'" ></input></div>');b.append("</td>");b.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');b.append("</tr></tbody></table>");return b.toString()}function displaySolImpDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="solnImplDateRow">');a.append('<td class="srHeaderAttribute srHeaderLabel"  title="Solution Implementation Date" nowrap="nowrap" valign="top">Solution Impl:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text"  lang="en-us" dojoType="srmdojoc.form.DateTimeCombo" promptMessage="Please enter date in format: 03-Feb-2008 12:00:00 PM"   constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}" class="srHeaderInput" value="" id="solnImplDate" name="solnImplDate"/></div></td>');a.append('<td width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayProbSolODMTags(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Problem-Solution ODM Tags" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >ODM Prob Tags:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="problemSolnOdmTags" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayConsultativeODMTags(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Consultative ODM Tags" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >ODM Cnslt Tags:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="consultativeOdmTags" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySolOfferedDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="solnOfferedDateRow">');a.append('<td class="srHeaderAttribute srHeaderLabel"  title="Solution Offered Date" nowrap="nowrap" valign="top">Solution Offered:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" disabled="disabled"  lang="en-us" dojoType="srmdojoc.form.DateTimeCombo" promptMessage="Please enter date in format: 03-Feb-2008 12:00:00 PM"   constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}"  class="srHeaderInput disabled" value="" id="solnOfferedDate"   name="solnOfferedDate"/></div></td>');a.append('<td  width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayTransferCount(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Transfer Count" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Transfer Count:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="transferCounter" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAssignStatus(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Assignment Status" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Assign Status:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="assignmentStatus" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAssignType(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Assignment Type" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Assign Type:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="assignmentType" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayInitSolOfferedDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="initSolnOfferedDateRow">');a.append('<td class="srHeaderAttribute srHeaderLabel" title="Initial Solution Offered Date" nowrap="nowrap" valign="top">Init Solution:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" disabled="disabled" lang="en-us" dojoType="srmdojoc.form.DateTimeCombo" promptMessage="Please enter date in format: 03-Feb-2008 12:00:00 PM"   constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}"  class="srHeaderInput disabled" value="" id="initSolnOfferedDate" name="initSolnOfferedDate"/></div></td>');a.append('<td  width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySurveyNotificationDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td class="srHeaderAttribute srHeaderLabel"  title="Survey Notification Date" nowrap="nowrap" valign="top">Survey Notification');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" disabled="disabled"  lang="en-us" dojoType="srmdojoc.form.DateTimeCombo" promptMessage="Please enter date in format: 03-Feb-2008 12:00:00 PM"   constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}" class="srHeaderInput disabled" value="" id="surveyNotifDate" name="surveyNotifDate"/></td>');a.append('<td  width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayPartnerFlag(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Partner Flag"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Partner:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td align="left" width="150px"  valign="top">');a.append('<input type="checkbox" class="dijitButtonDisabled"  dojoType="dijit.form.CheckBox" readonly="readonly"  onChange="PartnerSRUtil.onchange_partnerFlag(\'update\');" id="partnerFlag"/></td>');a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayODMCompliantFlag(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="ODM Compliance"  valign="middle" class="srHeaderAttribute srHeaderLabel" >ODM Compliance:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="checkbox" class="dijitButtonDisabled" dojoType="dijit.form.CheckBox" readonly="readonly"  id="odmComplianceFlag"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRPlatformSpecificFlag(a){var f=(a!=undefined&&a==true)?"platformSpecificFlagCloned":"platformSpecificFlag";var b=new StringBuffer();b.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="'+f+'Row">');b.append('<td title="Platform Specific"  valign="middle" class="srHeaderAttribute srHeaderLabel" ><span id="SRAttr'+f+'Label">Platform Specific:<span></td>');b.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');b.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');b.append('<input type="checkbox"  dojoType="dijit.form.CheckBox"  id="'+f+'" name="'+f+'"/>');b.append("</td>");b.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');b.append("</tr></tbody></table>");return b.toString()}function displayUpdatesfromCustomer(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Customer Updates" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Cust Updates: </td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="updatesFromCustomer" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCustomerRefNumber(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Customer Reference Id" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Cust Ref Id: </td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="customerRefId" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRTranslation(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="SR Translation"  valign="middle" class="srHeaderAttribute srHeaderLabel" >SR Translation:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="checkbox" class="dijitButtonDisabled"  dojoType="dijit.form.CheckBox" readonly="readonly"  id="SRTranslation"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayServiceTeam(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="serviceTeamDescRow">');a.append('<td title="Service Team"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Service Team:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" class="srHeaderInput" dojoType="dijit.form.TextBox"  id="serviceTeamDesc"/></div>');a.append('<select  id="serviceTeam" multiple="multiple" name="serviceTeam" style="display:none;"></select><select id="serviceTeamPrimary" name="serviceTeamPrimary" multiple="multiple" style="display:none;"></select><select id="serviceTeamRole" name="serviceTeamRole" multiple="multiple" style="display:none;"></select><select id="serviceTeamEmailFlag" name="serviceTeamEmailFlag" multiple="multiple" style="display:none;"></select><select id="serviceTeamTeamAudience" name="serviceTeamTeamAudience" multiple="multiple" style="display:none;"></select><select id="serviceTeamShiftStartTime" name="serviceTeamShiftStartTime" multiple="multiple" style="display:none;"></select><select id="serviceTeamShiftEndTime" name="serviceTeamShiftEndTime" multiple="multiple" style="display:none;"></select><select id="serviceTeamShiftPLAGroup" name="serviceTeamShiftPLAGroup" multiple="multiple" style="display:none;"></select><select id="serviceTeamShiftAvailability" name="serviceTeamShiftAvailability" multiple="multiple" style="display:none;"></select>');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle" href="#" onClick="setServiceTeamLov();">');a.append('<img title="Pick Service Team"  height="16" width="16" src="../images/search.gif" /></a>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRProdLang(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="productLanguagesDescRow">');a.append('<td title="SR Product Langauage"  valign="middle" class="srHeaderAttribute srHeaderLabel" >SR Prod Lang:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" alt="Required" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" class="srHeaderInput" dojoType="dijit.form.TextBox"  id="productLanguagesDesc"/></div>');a.append('<select  id="productLanguages" name="productLanguages" multiple="multiple" size="15" style="display:none;"></select>');a.append("</td>");a.append('<td width="18px"><a style="vertical-align:middle" href="#" onClick="setProductLanguagesLov();">');a.append('<img title="Pick Product Language"  height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayRefCSI(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="refCSIRow">');a.append('<td  title="Reference CSI" class="srHeaderAttribute srHeaderLabel"  nowrap="nowrap" align="right">Ref CSI:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img title="Reference CSI is Required" alt="required" style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text"  trim="true" title="Reference CSI"  class="srHeaderInput" onChange="onchangeLov_fld(\'refCSI\');" onFocus="clearLovHiddenFld(\'refCSI\');"  id="refCSI" name="refCSI"   dojoType="dijit.form.TextBox"/></div>');a.append('<input type="hidden" id="refCSIId" name="refCSIId" dojoType="dijit.form.TextBox"/>');a.append('<input id="refCSI_lovHidden" name="refCSI_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a id="refCSISearchIcon" style="vertical-align:middle" href="#" onclick="PartnerSRUtil.setRefCSILov(\'update\',false);"><img title="Search Reference CSI" alt="Search Reference CSI" height="16" width="16" src="../images/search.gif" /></a>');a.append("</td>");a.append('<td width="18px"><a class="nonactiveSRLink" href="#" onclick="invokeUrl(\'SPHome-dnCsi\',\'refCSIId\',\'Reference CSI\' );">');a.append('<img title="View Reference CSI Details"  src="../images/infoicon.gif" /></a></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayIndirectContAcct(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="indirectContAcctRow">');a.append('<td title="Indirect Contact Account"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Indirect Cont Acct:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Indirect Contact Account" readonly="readonly" type="text" class="srHeaderInput readonly" dojoType="dijit.form.TextBox"  id="indirectContAcct"/></div>');a.append('<input type="hidden" id="indirectContAcctId" name="indirectContAcctId" dojoType="dijit.form.TextBox"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayIndirectContLastName(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="indirectContLastRow">');a.append('<td title="Indirect Contact Last Name"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Indirect Cont Last:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Indirect Contact Last Name" type="text" class="srHeaderInput" onChange="onchangeLov_fld(\''+INDIRECT_LAST_FID+"');onchange_indirect('update');\" onFocus=\"clearLovHiddenFld('"+INDIRECT_LAST_FID+'\');" dojoType="dijit.form.TextBox" name="indirectContLast"  id="indirectContLast"/></div>');a.append('<input type="hidden" id="indirectContId" name="indirectContId" dojoType="dijit.form.TextBox"/>');a.append('<input id="indirectContLast_lovHidden" name="indirectContLast_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append('<input type="hidden" id="indirect_csiContactStatus" name="indirect_csiContactStatus" dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="indirect_srViewFlag" name="indirect_srViewFlag" dojoType="dijit.form.TextBox"/>');a.append("</td>");a.append('<td width="18px"><a id="indirectContLastSearchIcon" style="vertical-align:middle" href="#" onclick="setIndirectContLov();"><img title="Search Indirect Contacts" alt="Search Contacts" height="16" width="16" src="../images/search.gif" /></a>');a.append("</td>");a.append('<td width="18px"></td><td width="18px">');a.append("</tr></tbody></table></td>");return a.toString()}function displayIndirectContFirstName(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="indirectContFirstRow">');a.append('<td title="Indirect Contact First Name"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Indirect Cont First:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Indirect Contact First Name" readonly="readonly" type="text" class="srHeaderInput readonly" dojoType="dijit.form.TextBox" name="indirectContFirst"  id="indirectContFirst"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayIndirectContPhone(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="indirectContPhoneRow">');a.append('<td title="Indirect Contact Phone"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Indirect Cont Phone:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Indirect Contact Phone"  type="text" class="srHeaderInput" dojoType="dijit.form.TextBox" name="indirectContPhone"  id="indirectContPhone"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayIndirectContEmail(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="indirectContEmailRow">');a.append('<td title="Indirect Contact Email"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Indirect Cont Email:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Indirect Contact Email"  type="text" class="srHeaderInput" dojoType="dijit.form.TextBox" name="indirectContEmail"  id="indirectContEmail"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayIndirectContTZ(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="indirectContTZRow">');a.append('<td title="Indirect Contact Time Zone"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Indirect Cont TZ:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Indirect Contact Time Zone" readonly="readonly" type="text" class="srHeaderInput readonly" dojoType="dijit.form.TextBox" name="indirectContTZ"  id="indirectContTZ"/></div>');a.append('<input type="hidden" id="indirectContTZId" name="indirectContTZId" dojoType="dijit.form.TextBox"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayIndirectCustVisibility(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="indirectCustVRow">');a.append('<td title="End Customer Visibility"  nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel">Indirect Cust Visibility:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span  class="conditionalSrReq"><img title="End Customer Visibility is Required" alt="required" style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadlov&lov=INDIRECT_CUST_VISIBILITY" jsId="indirectCustVStore"/>');a.append('<div class="errorDiv"><input type="text"  title="End Customer Visibility"  class="srHeaderInput" store="indirectCustVStore"   id="indirectCustV" name="indirectCustV"  invalidMessage="Invalid value for End Customer Visibility" dojoType="dijit.form.ComboBox"  onBlur="validateCombo(this);"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySerialNumber(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="serialNumRow">');a.append('<td title="Serial Number"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Serial Number:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img title="Serial Number is Required" alt="required" style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text"  title="Serial Number" trim="true"  class="srHeaderInput"  onChange="onchangeLov_fld(\'serialNum\');" onFocus="clearLovHiddenFld(\'serialNum\');" id="serialNum" name="serialNum"  dojoType="dijit.form.TextBox"/></div>');a.append('<input id="serialNumAcctId" name="serialNumAcctId" type="hidden" value=""    dojoType="dijit.form.TextBox"/>');a.append('<input type="hidden" id="serialNumCSIId" name="serialNumCSIId" dojoType="dijit.form.TextBox"/>');a.append('<input id="serialNum_lovHidden" name="serialNum_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append('<input id="serialNumAssetNumber" name="serialNumAssetNumber" type="hidden" value="" dojoType="dijit.form.TextBox" />');a.append('<input id="serialNumCSI" name="serialNumCSI" type="hidden" value=""  dojoType="dijit.form.TextBox"/>');a.append('<input id="serialNumStatus" name="serialNumStatus" type="hidden" value=""   dojoType="dijit.form.TextBox"/>');a.append('<input id="serialNumAcctNum" name="serialNumAcctNum" type="hidden" value="" dojoType="dijit.form.TextBox"/>');a.append('<input id="serialNumId" name="serialNumId" type="hidden" dojoType="dijit.form.TextBox" />');a.append('<input id="SNCSICStatus" name="SNCSICStatus" type="hidden" value=""  dojoType="dijit.form.TextBox"/>');a.append('<input id="SNCSIDStatus" name="SNCSIDStatus" type="hidden" value=""  dojoType="dijit.form.TextBox"/>');a.append('<input id="SNParentCSICStatus" name="SNParentCSICStatus" type="hidden" value="" dojoType="dijit.form.TextBox"/>');a.append('<input id="SNParentCSIDStatus" name="SNParentCSIDStatus" type="hidden" value="" doType="dijit.form.TextBox"/>');a.append('<input id="SNCSIIndirectSuppFlg" name="SNCSIIndirectSuppFlg" type="hidden" value=""  dojoType="dijit.form.TextBox"/>');a.append('<input id="serialNumGCSIId" name="serialNumGCSIId" type="hidden" value=""  dojoType="dijit.form.TextBox"/>');a.append('<input id="SserialNumGCSI" name="serialNumGCSI" type="hidden" value=""  dojoType="dijit.form.TextBox"/>');a.append("</td>");a.append('<td width="18px"><a class="HWClickArea" id="serialNumSearchIcon" style="vertical-align:middle" href="#" onclick="serialNumberUtil.setSerialNumberLov(\'update\',false)"><img alt="Search Hardware Serial Number" height="16" width="16" src="../images/search.gif" /></a>');a.append("</td>");a.append('<td width="18px"><a id="serialNumInfo" class="nonactiveSRLink" href="#" onclick="invokeUrl(\'SPHome-dnAsset\',\'serialNumId\',\'Serial Number\' );">');a.append('<img title="View Asset Details"  src="../images/infoicon.gif" /></a></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCSIName(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="csiNameRow">');a.append('<td title="SI Name"  valign="middle" class="srHeaderAttribute srHeaderLabel" >SI Name:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="SI Name" readonly="readonly" dojoType="dijit.form.TextBox" class="srHeaderInput readonly" id="csiName" onChange= "setCsiNameTitle();"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayAssetProductClass(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="serialNumProdClassRow">');a.append('<td title="Asset Product Class"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Asset Product Class:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Asset Product Class" readonly="readonly" dojoType="dijit.form.TextBox" class="srHeaderInput readonly" id="serialNumProdClass"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWDesc(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWDescRow">');a.append('<td title="Hardware Description"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW Desc:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Hardware Description" readonly="readonly" dojoType="dijit.form.TextBox" class="srHeaderInput readonly onsitesla" id="HWDesc"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWCountry(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWCountryRow">');a.append('<td title="Hardware Country"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW Country:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img title="Hardware Country is Required" alt="required" style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadlov&lov=COUNTRY" jsId="HWCountryStore"/>');a.append('<div class="errorDiv"><input id="HWCountry" name="HWCountry" store="HWCountryStore" pageSize="20"  invalidMessage="Invalid value for HW Country"   onBlur="validateCombo(this);"  class="srHeaderInput readonly onsitesla" title="Hardware Country" readonly="readonly" dojoType="dijit.form.FilteringSelect"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWState(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWStateRow">');a.append('<td title="Hardware State"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW State:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadlov&lov=STATE_ABBREV" jsId="HWStateStore"/>');a.append('<div class="errorDiv"><input id="HWState" name="HWState" store="HWStateStore" pageSize="20" class="srHeaderInput readonly onsitesla" title="Hardware State" readonly="readonly"  dojoType="dijit.form.ComboBox"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWProvince(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWProvinceRow">');a.append('<td title="Hardware Province"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW Province:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input id="HWProvince" name="HWProvince" class="srHeaderInput readonly onsitesla" title="Hardware Province" readonly="readonly"  dojoType="dijit.form.TextBox"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWCounty(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWCountyRow">');a.append('<td title="Hardware County"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW County:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input id="HWCounty" name="HWCounty" class="srHeaderInput readonly onsitesla" title="Hardware County" readonly="readonly"  dojoType="dijit.form.TextBox"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWPostalCode(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWPCodeRow">');a.append('<td title="Hardware Postal Code"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW Postal Code:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img title="Hardware Postal Code is Required" alt="required" style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input id="HWPCode" name="HWPCode" class="srHeaderInput readonly onsitesla" title="Hardware Postal Code" readonly="readonly" dojoType="dijit.form.TextBox"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWCity(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWCityRow">');a.append('<td title="Hardware City"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW City:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img title="Hardware City is Required" alt="required" style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Hardware City" dojoType="dijit.form.TextBox"  readonly="readonly" type="text" class="srHeaderInput readonly onsitesla" id="HWCity" /></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWAddrLine1(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWAddr1Row">');a.append('<td title="Hardware Address Line1"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW Addr Line1:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img title="Hardware Address Line1 is Required" alt="required" style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Hardware Address Line1" readonly="readonly" type="text" class="srHeaderInput readonly onsitesla" dojoType="dijit.form.TextBox" name="HWAddr1"  id="HWAddr1" onChange="setTimeout(function(){onsiteSLACheck(\'update\')}, 10);"/></div>');a.append('<input type="hidden" id="HWAddrId" name="HWAddrId" dojoType="dijit.form.TextBox"/>');a.append('<input id="HWAddr1_lovHidden" name="HWAddr1_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a class="HWClickArea" id="HWAddr1SearchIcon" style="vertical-align:middle" href="#" onclick="setHWAddrLov();"><img alt="Search Hardware Addresses" height="16" width="16" src="../images/search.gif" /></a>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWAddrLine2(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWAddr2Row">');a.append('<td title="Hardware Address Line2"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW Addr Line2:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Hardware Address Line2" type="text" readonly="readonly" class="srHeaderInput readonly onsitesla" dojoType="dijit.form.TextBox" name="HWAddr2"  id="HWAddr2" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWTZ(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWTZRow">');a.append('<td title="Hardware Time Zone"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW TZ:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="conditionalSrReq"><img title="Hardware Time Zone is Required" alt="required" style="vertical-align:middle;display:none;" src="../images/requiredicon.gif" /></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Hardware Time Zone" type="text" class="srHeaderInput onsitesla" dojoType="dijit.form.TextBox" name="HWTZ"  id="HWTZ"/></div>');a.append('<input type="hidden" id="HWTZId" name="HWTZId" dojoType="dijit.form.TextBox"/>');a.append('<input id="HWTZ_lovHidden" name="HWTZ_lovHidden" type="hidden" dojoType="dijit.form.TextBox" />');a.append("</td>");a.append('<td width="18px"><a id="HWTZSearchIcon" style="vertical-align:middle" href="#" onclick="setHWTZLov(false)"><img alt="Search Timezones" height="16" width="16" src="../images/search.gif" /></a>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWHost(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWHostRow">');a.append('<td title="Hardware Asset Name"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Asset Name:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input maxLength="30"  title="Hardware Asset Name - Max of 30 characters" invalidMessage="Max of 30 characters"  type="text" class="srHeaderInput" dojoType="dijit.form.ValidationTextBox" regExp=".{1,30}" name="HWHost"  id="HWHost"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayHWMC(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="HWMCRow">');a.append('<td title="Mission Critical"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Mission Critical:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Mission Critical" class="dijitButtonDisabled"  readonly="readonly"  type="checkbox" dojoType="dijit.form.CheckBox" name="HWMC"  id="HWMC" onChange="remoteAccessCheck();"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayOnsiteSLA(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="OnsiteSLARow">');a.append('<td title="Submit for Onsite SLA" align="right" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Onsite SLA:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="OnsiteSLA" onChange="onchangeLov_fld(\'OnsiteSLA\');onchangeOnsiteSLA();" title="Submit for Onsite SLA"/></td>');a.append('<td width="18px"><a  id="OnsiteSLAIcon" style="vertical-align:middle"  href="#" onclick="getOnsiteSLA();"><img style="vertical-align:middle;" title="Submit for Onsite SLA" height="15" width="15" src="../images/repeating_status.gif" alt="Submit for Onsite SLA"/></a></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayEvaluatedSeverity(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="evaluatedSeverityRow">');a.append('<td title="Evaluated Severity"   align="right" class="srHeaderAttribute srHeaderLabel" ><span id="SRAttrEvaluatedSeverityLabel">Evaluated Severity</span>: </td>');a.append('<td align="right" width="16px"  nowrap="nowrap"></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadlov&lov=SR_SEVERITY" jsId="lovSeverityStore"></div> <div class="errorDiv"><input class="srHeaderInput" invalidMessage="Invalid value for Evaluated Severity" dojoType="dijit.form.ComboBox" id="evaluatedSeverity"  name="evaluatedSeverity" onFocus="onfocus_evaluatedSeverity(\'evaluatedSeverity\');" onBlur="validateCombo(this);"  onChange="onchange_evaluatedSeverity(\'update\')" store="lovSeverityStore" >  </input></div> </td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySROutageType(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SROutageTypeRow">');a.append('<td title="Outage (Impact)"   align="right" class="srHeaderAttribute srHeaderLabel" ><span id="SRAttrOutageImpactLabel">Outage (Impact)</span>: </td>');a.append('<td align="right" width="16px"  nowrap="nowrap"></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadlov&lov=OUTAGE_TYPE" jsId="lovOutageImpactStore"></div> <div class="errorDiv"><input class="srHeaderInput" invalidMessage="Invalid value for Service Outage" dojoType="dijit.form.ComboBox" id="SROutageType"  name="SROutageType" onFocus="onfocus_SROutageType(\'SROutageType\');" onBlur="validateCombo(this);"  onChange="onchange_OutageImpact(\'update\')" store="lovOutageImpactStore" >  </input></div><input type="hidden" id="SROutageId" name="SROutageId" dojoType="dijit.form.TextBox"/></td>');a.append('<td width="18px"><a id="SROutageAuditInfo" href="#" onclick="getSROutageAudit();"><image title="Audit" src="../images/audit.gif"/></a></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySROutageStartDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SROutageStartDateRow">');a.append('<td class="srHeaderAttribute srHeaderLabel" align="right" title="Outage (Impact) Start Date/Time" nowrap="nowrap" valign="middle">Outage Start Date/Time:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="SROutageStartDateReqHidden"/></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" disabled="disabled" lang="en-us" dojoType="srmdojoc.form.DateTimeCombo" promptMessage="Please enter date in format: 03-Feb-2008 12:00:00 PM" constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}"  class="srHeaderInput" id="SROutageStartDate" onBlur="checkOutageDates();" onChange="checkOutageDates();"/></div>');a.append("</td>");a.append('<td width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySROutageEndDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SROutageEndDateRow">');a.append('<td class="srHeaderAttribute srHeaderLabel" align="right" title="Outage (Impact) End Date/Time" nowrap="nowrap" valign="middle">Outage End Date/Time:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="SROutageEndDateReqHidden"/></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" disabled="disabled" lang="en-us" dojoType="srmdojoc.form.DateTimeCombo" promptMessage="Please enter date in format: 03-Feb-2008 12:00:00 PM" constraints="{datePattern: \'dd-MMM-yyyy hh:mm:ss a\'}"  class="srHeaderInput" id="SROutageEndDate" onBlur="checkOutageDates();" onChange="checkOutageDates()"/></div>');a.append("</td>");a.append('<td width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySROutagePercentage(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SROutagePercentageRow">');a.append('<td class="srHeaderAttribute srHeaderLabel" align="right" title="Outage (Impact) Percentage" nowrap="nowrap" valign="middle">Outage Percent:</td>');a.append('<td align="right" width="16px"  nowrap="nowrap"><span  class="SROutagePercentageReqHidden"/></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input type="text" disabled="disabled" lang="en-us" dojoType="dijit.form.NumberSpinner" smallDelta="1" constraints={min:0,max:100} class="srHeaderInput" id="SROutagePercentage" onBlur="checkSROutagePercentage();" onChange="checkSROutagePercentage();"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayFSIntegStatus(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SRIntegrationStatusRow">');a.append('<td title="Field Service Integration Status" class="srHeaderAttribute srHeaderLabel" >FS Integ Status:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input title="Field Service Integration Status" type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly"  id="SRIntegrationStatus" /></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayFSIntegMessage(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Field Service Integration Message" class="srHeaderAttribute srHeaderLabel" >FS Integ Message:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Field Service Integration Message" type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly"  id="SRIntegrationMessage" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayFSIntegDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Field Service Integration Message" class="srHeaderAttribute srHeaderLabel" >FS Integration:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input  title="Field Service Date Time" type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly"  id="SRIntegrationDateTime" />');a.append("</td>");a.append('<td width="56px" ><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayLiveTransferCnt(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Live Transfer Count"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Live XFR Cnt:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Live Transfer Count" type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="liveXFRCnt" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayConfigLevel(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Level"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Level:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox" onChange="onchange_configLevel();" class="srHeaderInput readonly" readonly="readonly" value="" id="configLevel" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayPermAddrChg(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Hardware Permanent Address Change"  valign="middle" class="srHeaderAttribute srHeaderLabel" >HW Perm Addr Chg:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="checkbox" title="Hardware Permanent Address Change" id="HWPC" name="HWPC" onChange="HWSRUtil.onChangePermHwAddrFlag();" dojoType="dijit.form.CheckBox"/>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayASRDistributionListEmail(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="ASR Distribution List"  valign="middle" class="srHeaderAttribute srHeaderLabel" >ASR Distribution List:');a.append("</td>");a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="ASR Distribution List" type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="ASRDistributionListEmail" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayPersonalNote(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Personal Note"  valign="middle" class="srHeaderAttribute srHeaderLabel" >Personal Note:<img style="vertical-align:middle" src="../images/detach.gif" alt="Show in Popup" onclick="showOnPopup(\'pnote\', \'20\', \'60\')"/></td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div style="float: left;width: 140px;"><textarea title="Personal Note"  required="true" dojoType="dijit.form.SimpleTextarea"  rows="1" cols="60" id="pnote"></textarea></div></td>');a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function getHiddenFieldLayout(f,a){var b="";if(f!=undefined){var g=f.id;switch(g){case"status":b=getHiddenStatus(f,a);break;case"SRType":b=getHiddenSRType(f,a);break;case"SRRootcause":b=getHiddenSRRootcause(f,a);break}}return b}function getHiddenSRType(g,a){var h=SRUtils.getMappedFormFldId(g,a);var f=new StringBuffer();var b=(g!=undefined&&g.value!=undefined)?g.value:"";f.append('<input title="SR Type" type="hidden" value="'+b+'" dojoType="dijit.form.TextBox" id="'+h+'" name="'+h+'"></input>');return f.toString()}function getHiddenStatus(g,a){var h=SRUtils.getMappedFormFldId(g,a);var f=new StringBuffer();var b=(g!=undefined&&g.value!=undefined)?g.value:"";f.append('<input title="SR Status" type="hidden" value="'+b+'" dojoType="dijit.form.TextBox" id="'+h+'" name="'+h+'"></input>');return f.toString()}function getHiddenSRRootcause(g,a){var h=SRUtils.getMappedFormFldId(g,a);var f=new StringBuffer();var b=(g!=undefined&&g.value!=undefined)?g.value:"";f.append('<input title="SR Rootcause" type="hidden" value="'+b+'" dojoType="dijit.form.TextBox" id="'+h+'" name="'+h+'"></input>');return f.toString()}function displayPlaType(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr>');a.append('<td title="Level"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >PLA Type:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input type="text" dojoType="dijit.form.TextBox"  class="srHeaderInput readonly" readonly="readonly" value="" id="plaType" />');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayUnset24x7ReasonCode(a){var g=(a!=undefined&&a==true)?"unset24x7ReasonCodeCloned":"unset24x7ReasonCode";var f=(a!=undefined&&a==true)?"onchange_unset24x7ReasonCode(true)":"onchange_unset24x7ReasonCode()";var b=new StringBuffer();b.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id = "'+g+'Row">');b.append('<td title="Reason 24x7 Unset"  valign="middle"  align="right" class="srHeaderAttribute srHeaderLabel" ><span>Reason 24x7 Unset</span>: </td>');b.append('<td align="right" width="16px"  nowrap="nowrap" class="reqImgNode"></td>');b.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div dojoType="dojo.data.ItemFileReadStore" url="../../../SRHeaderRequest?action=loadlov&lov=REQUEST_FULL_SUPPORT_REASON_CD" jsId="unset24x7ReasonCodeStore"></div> <div class="errorDiv"><input class="srHeaderInput" readonly="readonly"    invalidMessage="Invalid value for Reason 24x7 Unset" dojoType="dijit.form.ComboBox"  id="'+g+'" name="'+g+'"  onBlur="validateCombo(this);"   store="unset24x7ReasonCodeStore"  onChange="'+f+'">  </input></div> </td>');b.append('<td width="18px"></td><td width="18px"></td>');b.append('<td width="18px"></td>');b.append("</tr></tbody></table>");return b.toString()}function displayATLastFlowStatus(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="ATLastFlowStatusRow">');a.append('<td title="ATLastFlowStatus" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Automation Status:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" readonly="readonly"  name="ATLastFlowStatus" id="ATLastFlowStatus" trim="true"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayOutageStatus(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="outageStatusRow">');a.append('<td nowrap="nowrap"  align="right" title="Outage Status" valign="middle" class="srHeaderAttribute srHeaderLabel" >Outage Status:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput"  name="outageStatus" id="outageStatus" trim="true" onFocus="clearLovHiddenFld(\'outageStatus\');" onChange="onchangeLov_fld(\'outageStatus\');" /></div><input id="outageStatusId" name="outageStatusId" type="hidden" dojoType="dijit.form.TextBox" /><input id="outageStatus_lovHidden" name="outageStatus_lovHidden" type="hidden"  dojoType="dijit.form.TextBox"/></td>');a.append('<td width="18px"><a id="outageStatusLovLink" style="vertical-align:middle;visibility:visible;" href="#" onClick="setOutageStatusLov();">');a.append('<img title="Pick an Outage Status"  height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCriticalSystemFlg(){var b="criticalSystemFlg";var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="'+b+'Row">');a.append('<td title="Critical System Flag" valign="middle"   align="right" class="srHeaderAttribute srHeaderLabel" >Critical System:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Critical System Flag" type="checkbox" class="dijitButtonDisabled"  dojoType="dijit.form.CheckBox" readonly="readonly"  id="'+b+'"/></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRMilestoneName(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="srMilestoneNameRow">');a.append('<td title="SR Milestone" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >SR Milestone:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" readonly="readonly"  name="srMilestoneName" id="srMilestoneName" trim="true"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRMilestoneDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="srMilestoneDateRow">');a.append('<td title="SR Milestone Date"  align="right" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >SR Milestone Date:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input class="srHeaderInput readonly" type="text" readonly="readonly" dojoType="dijit.form.TextBox" id="srMilestoneDate"/></div>');a.append("</td>");a.append('<td  width="56px"><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCSIMilestoneName(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="csiMilestoneNameRow">');a.append('<td title="Current Milestone" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Current Milestone:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" readonly="readonly" name="csiMilestoneName" id="csiMilestoneName" trim="true"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCSIMilestoneDate(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="csiMilestoneDateRow">');a.append('<td title="Current Milestone Date"  align="right" nowrap="nowrap" valign="middle" class="srHeaderAttribute srHeaderLabel" >Current Milestone Date:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input class="srHeaderInput readonly" type="text" readonly="readonly" dojoType="dijit.form.TextBox" id="csiMilestoneDate"/></div>');a.append("</td>");a.append('<td  width="56px"><span class="tzclass"></span></td>');a.append("</tr></tbody></table>");return a.toString()}function displayEnvName(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="envNameRow">');a.append('<td nowrap="nowrap"  align="right" title="Environment" valign="middle" class="srHeaderAttribute srHeaderLabel" >Environment:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput"  name="envName" id="envName" trim="true" onFocus="clearLovHiddenFld(\'envName\');" onChange="onchangeLov_fld(\'envName\');"   /></div><input id="envGuid" name="envGuid" type="hidden" dojoType="dijit.form.TextBox" /><input id="envEmUrl" name="envEmUrl" type="hidden" dojoType="dijit.form.TextBox" /><input id="envName_lovHidden" name="envName_lovHidden" type="hidden"  dojoType="dijit.form.TextBox"/></td>');a.append('<td width="18px"><a  id="envNameLovLink" style="vertical-align:middle;visibility:visible;" href="#" onClick="setEnvNameLov();">');a.append('<img id="envNameLovLink" title="Pick an Environment"  height="16" width="16" src="../images/search.gif" /></a></td>');a.append('<td width="18px"><a  name="envEmUrlLink"  id="envEmUrlLink"  style="visibility:hidden;" class="nonactiveSRLink" href="#" onclick="punchoutCloudConfigEM();"><img  title="View the Enterprise Manager Target Dashboard"  src="../images/infoicon.gif" /></a></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayEnvVersion(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="envVersionRow">');a.append('<td nowrap="nowrap"  align="right" title="Environment Version" valign="middle" class="srHeaderAttribute srHeaderLabel" >Environment Version:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly"  name="envVersion" id="envVersion" trim="true"   readonly="readonly"  /></div></td>');a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayEnvLifecycle(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="envLifecycleRow">');a.append('<td nowrap="nowrap"  align="right" title="Environment Lifecycle" valign="middle" class="srHeaderAttribute srHeaderLabel" >Environment Lifecycle:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly"  name="envLifecycle" id="envLifecycle" trim="true"  readonly="readonly"  /></div></td>');a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayCXTicketNumber(){var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="cxTicketNumberRow">');a.append('<td nowrap="nowrap"  align="right" title="CX Ticket #" valign="middle" class="srHeaderAttribute srHeaderLabel" >CX Ticket #:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle"><div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly"    id="cxTicketNumber" name="cxTicketNumber" trim="true"  readonly="readonly"  /></div></td>');a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRProductSubscriptionShortNameRow(){if(isHardwareSR()||!isTechnicalSR()){return""}var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SRProductSubscriptionShortNameRow">');a.append('<td title="Alternate Service Name" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Alternate Service Name:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" readonly="readonly"  title="Alternate Service Name"   name="SRProductSubscriptionShortName" id="SRProductSubscriptionShortName" trim="true" /> <input type="hidden" id="SRProductSubscriptionTenantId" dojoType="dijit.form.TextBox"/></div>');a.append("</td>");a.append('<td style="align:right;" width="36px"><div>');a.append('<a id="TMEPunchout" style="vertical-align:middle;" href="#" title="view TME" onclick="punchoutToTME();">TME</a>');a.append("</div></td>");a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRProductSubscriptionDBNameRow(){if(isHardwareSR()||!isTechnicalSR()){return""}var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SRProductSubscriptionDBNameRow">');a.append('<td title="Database Name" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Database Name:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" readonly="readonly"  title="Database Name" name="SRProductSubscriptionDBName" id="SRProductSubscriptionDBName" trim="true"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displayRestrictedSRFlagRow(){var b="restrictedSRFlag";var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="'+b+'Row">');a.append('<td title="Restricted SR Flag" valign="middle"   align="right" class="srHeaderAttribute srHeaderLabel" >Restricted SR:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<input title="Restricted SR Flag" type="checkbox" class="dijitButtonDisabled"  dojoType="dijit.form.CheckBox" readonly="readonly"  id="'+b+'"/></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append('<td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRProductSubscriptionCloudTypeRow(){if(isHardwareSR()||!isTechnicalSR()){return""}var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SRProductSubscriptionCloudTypeRow">');a.append('<td title="Cloud Type" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Cloud Type:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" readonly="readonly"  title="Cloud Type" name="SRProductSubscriptionCloudType" id="SRProductSubscriptionCloudType" trim="true"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}function displaySRProductSubscriptionOperPolicyRow(){if(isHardwareSR()||!isTechnicalSR()){return""}var a=new StringBuffer();a.append('<table  style="table-layout:fixed;width:375px;"><tbody><tr id="SRProductSubscriptionOperPolicyRow">');a.append('<td title="Operational Policy" nowrap="nowrap"  align="right" valign="middle" class="srHeaderAttribute srHeaderLabel" >Operational Policy:</td>');a.append('<td align="right" width="16px" nowrap="nowrap"><span></span></td>');a.append('<td width="150px"  align="left" nowrap="nowrap" valign="middle">');a.append('<div class="errorDiv"><input dojoType="dijit.form.TextBox" type="text" class="srHeaderInput readonly" readonly="readonly"  title="Operational Policy" name="SRProductSubscriptionOperPolicy" id="SRProductSubscriptionOperPolicy" trim="true"/></div>');a.append("</td>");a.append('<td width="18px"></td><td width="18px"></td><td width="18px"></td>');a.append("</tr></tbody></table>");return a.toString()}var APPLY_AND_SAVE_BUTTON_VALUE="applyAndSave";var APPLY_AND_SAVE_BUTTON_LABEL="Apply and Save";function manageFormViewDialogNodeCreator(v,g){var f=(v.position!=null);var o=document.createElement("tr");var p=document.createElement("td");dojo.attr(p,{valign:"middle",align:"center"});var b=document.createElement("td");dojo.attr(b,{valign:"middle",align:"left",width:"95%"});if(f&&v.field!="description"){dojo.addClass(b,"dojoDndHandle")}b.appendChild(document.createTextNode(v.name));if(v.field=="description"){dojo.attr(b,{title:"You can not change the position of SR Description column. SR Description can only be displayed at the end (if selected)."})}dojo.addClass(b,"itemText");var s=document.createElement("td");dojo.attr(s,{valign:"middle",align:"left"});dojo.style(s,"visibility","hidden");s.appendChild(document.createTextNode(v.field));var h=true;if(window.customizableFlds!=null&&dojo.isArray(window.customizableFlds)){if(window.customizableFlds.contains(v.field)){h=false}}var q=new dijit.form.CheckBox({name:v.field,value:v.field,checked:(f),disabled:h});p.appendChild(q.domNode);dojo.connect(q.domNode,"onclick",null,function(w){var x="";if(w.target){x=w.target}else{if(w.srcElement){x=w.srcElement}}if(w.target.disabled){return}if(w.target.checked&&v.field!="description"){dojo.addClass(b,"dojoDndHandle")}else{dojo.removeClass(b,"dojoDndHandle")}toggleSelections(x)});o.appendChild(p);o.appendChild(b);o.appendChild(s);var a=o;if(g=="avatar"){var u=document.createElement("table");var l=document.createElement("tbody");l.appendChild(o);u.appendChild(l);a=u}var m="dialog";return{node:a,data:v,type:m}}var itemFieldNodeArray=null;function buildManageViewDialogDndNodes(b,f){itemFieldNodeArray=new Array();var a=new dojo.dnd.Source(b,{withHandles:true,creator:manageFormViewDialogNodeCreator});a.insertNodes(false,f);return a}function getDataForDialog(){var a=getActiveSrId();if(a==null||a==""){alert("No Active SR");return}dojo.xhrPost({url:"../../../SRHeaderRequest",content:{action:"getCustomData"},handleAs:"json",load:function(g){if(g.opStatus==0){var f=g.component;window.customizableFlds=g.customizableFields;window.naCustomizableFlds=g.naCustomizableFields;var b=f.listBCType;var h=new CustManageViewDetails(b,null,dojo.clone(f),null);manageFormViewMap.put(b,h);createManageFormViewDialog(b,"Edit SR Header View")}},error:function(f){var b=getDisplayMessageObj("Request to retrieve SR header personalized data failed or timed out.",2);displayErrors(b);console.debug("Request to retrieve SR header personalized data failed or timed out.",f)}})}function toggleSelections(h){if(h==undefined){return}var a=h.name;var m=h.checked;var o=new Array();if(a=="SRRootcause"||a=="resolutionCode"){o.push("SRRootcause");o.push("resolutionCode")}if(dojo.isArray(o)&&o.length>0){for(i=0;i<o.length;i++){var p=o[i];var l=document.getElementsByName(p);if(l!=undefined&&l.length>0){var g=0;for(j=0;j<l.length;j++){var f=l[j];if(f.type==="checkbox"){g=j}}if(l[g].name!=a){var b=l[g].id;dijit.byId(b).setAttribute("checked",m)}}}}}function createMangeViewDialogFramework(W){var K=getCustManageFormViewDetailsObj(W);var q=evaluateMVDSubmitButtonDetails();var S=document.createElement("div");S.setAttribute("style","display: none;");var g=document.createElement("table");dojo.attr(g,{width:"99%;"});S.appendChild(g);var b=document.createElement("tbody");g.appendChild(b);var R=document.createElement("tr");b.appendChild(R);var C=document.createElement("td");dojo.attr(C,{align:"right",colSpan:"2"});R.appendChild(C);var V=document.createElement("div");dojo.addClass(V,"box");dojo.style(V,{"float":"right"});C.appendChild(V);createMVDApplyButtons(V,"top",K,q);var s=document.createElement("tr");b.appendChild(s);var h=document.createElement("td");dojo.attr(h,{align:"left",colSpan:"2"});s.appendChild(h);var v=new dijit.form.TextBox({name:"apply",value:q.value,style:"visibility:hidden;"});var f=new dijit.form.TextBox({name:"viewId",value:W,style:"visibility:hidden;"});h.appendChild(f.domNode);h.appendChild(v.domNode);var p=document.createElement("table");dojo.attr(p,{width:"100%",align:"left"});dojo.style(p,{padding:"1px"});var D=document.createElement("tbody");p.appendChild(D);p=createHeaderTitlePrefNode(K,p);p=createTimePrefNode(K,p);p=createDescPrefNode(K,p);p=selectLayoutInputNode(K,p);var L=document.createElement("tr");b.appendChild(L);var x=document.createElement("td");dojo.attr(x,{colSpan:"2",align:"left"});L.appendChild(x);x.appendChild(p);var I=document.createElement("tr");b.appendChild(I);var o=document.createElement("td");I.appendChild(o);dojo.addClass(I,"formQuestion");var T=document.createElement("span");o.appendChild(T);dojo.attr(o,{colSpan:"2",align:"left"});var U=document.createTextNode("To Reorder fields, simply select the column name and drag to desired position");T.appendChild(U);dojo.addClass(T,"tipText");var Q=document.createElement("tr");b.appendChild(Q);var B=document.createElement("td");dojo.attr(B,{colSpan:"2",valign:"top"});Q.appendChild(B);var G=document.createElement("div");var u=new dijit.layout.ContentPane({style:"width: 95%; height: 98%; padding: 0px;vertical-align:top;"},G);var z=document.createElement("div");var E=document.createElement("table");dojo.attr(E,{width:"auto;",valign:"top",align:"center"});dojo.addClass(E,"manageView");var F=document.createElement("thead");var P=document.createElement("tr");E.appendChild(F);F.appendChild(P);var m=document.createElement("th");dojo.attr(m,{width:"5%;"});m.appendChild(document.createTextNode("Visible"));var l=document.createElement("th");l.appendChild(document.createTextNode("Column Name"));dojo.attr(l,{width:"95%;"});var J=document.createElement("th");dojo.style(J,"visibility","hidden");J.appendChild(document.createTextNode("Field Name"));P.appendChild(m);P.appendChild(l);P.appendChild(J);var a=document.createElement("tbody");E.appendChild(a);z.appendChild(E);u.setContent(z);B.appendChild(u.domNode);var O=document.createElement("tr");b.appendChild(O);var A=document.createElement("td");dojo.attr(A,{colSpan:"2"});O.appendChild(A);A.appendChild(document.createElement("br"));var M=document.createElement("tr");b.appendChild(M);var y=document.createElement("td");dojo.attr(y,{colSpan:"2",align:"right"});M.appendChild(y);var w=document.createElement("div");dojo.addClass(w,"box");dojo.style(w,{"float":"right"});y.appendChild(w);createMVDApplyButtons(w,"bottom",K,q);var N=getAllFormFieldList(K);var H=buildManageViewDialogDndNodes(a,N);K.dndSource=H;u.startup();return S}var specialFlds=[{label:"Show Viewer Link",title:"SR Viewer Link",field:"showSRViewerLink"}];var headerDateFlds=["created","openDate","closedDate","CETragetDate","updated","SRSubmitDate","dateReopened","firstResponseDate","projectMilestoneDate","solutionImpDate","solutionOfferedDate","surveyNotificationDate","SRIntegrationDate","lastPublicActivityCreatedDate","srMilestoneDate","csiMilestoneDate"];function createHeaderTitlePrefNode(G,q){var D="";if(G.jsonContent!=undefined){D=G.jsonContent.title;D=(D=="SR Navigator")?"":D}var K=q.firstChild;var W=document.createElement("tr");var g=document.createElement("td");dojo.attr(g,{colSpan:6,width:"100%",align:"left"});K.appendChild(W);W.appendChild(g);dojo.addClass(W,"formQuestion");var w=document.createElement("span");w.appendChild(document.createTextNode("Header Title"));dojo.addClass(w,"tipText");g.appendChild(w);var B=document.createElement("img");dojo.attr(B,{src:"../images/infoicon.gif"});dojo.style(B,{"vertical-align":"middle"});g.appendChild(B);dojo.connect(B,"onclick",this,function(){showHelpDialog(B,"Header Title")});dojo.connect(B,"onmouseover",this,function(){showHelpDialog(B,"Header Title")});var Q=document.createElement("tr");K.appendChild(Q);var f=0;dojo.forEach(specialFlds,function(ab){var ad=document.createElement("td");var ac=document.createElement("span");ac.appendChild(document.createTextNode(ab.label));dojo.attr(ad,{align:"right",width:"15%",nowrap:"nowrap"});dojo.attr(ac,{align:"right"});ad.appendChild(ac);Q.appendChild(ad);var aa=document.createElement("td");dojo.attr(aa,{align:"left",width:"15%"});Q.appendChild(aa);var Y=ab.field;destroyDijitWidget(Y);var Z=document.createElement("input");var X=new dijit.form.CheckBox({name:Y,id:Y,"class":"titlePrefClass",value:"true"},Z);X.startup();var ae=G.jsonContent[Y];X.setAttribute("checked",ae);aa.appendChild(X.domNode);f=f+2});if(f<3){for(i=f;i<3;i++){var C=document.createElement("td");dojo.attr(C,{align:"right",width:"15%",nowrap:"nowrap"});Q.appendChild(C)}}var l=document.createElement("td");Q.appendChild(l);dojo.attr(l,{colSpan:"2",align:"left",nowrap:"nowrap"});var J=document.createElement("span");dojo.style(J,{"vertical-align":"middle","text-align":"left"});l.appendChild(J);var x=document.createElement("img");dojo.attr(x,{src:"../images/tip.gif",align:"top"});J.appendChild(x);var L=document.createTextNode(" SR Header default title will be  overwritten by the specification provided below.");J.appendChild(L);dojo.addClass(J,"tipText");var m=document.createElement("td");dojo.attr(m,{width:"15%",align:"right"});Q.appendChild(m);var v=new dijit.form.Button({label:"Preview",onClick:function(Z){var aa=getFieldVal("titlePrefText");if(isEmptyVal(aa)||(/^\s*$/).test(aa)){var Y=createMessageObject("Please select or enter Columns for Header Title",1);displayErrors(Y);return}aa=aa.replace(/([\f\n\r\t\v\u2028\u2029])*/g,"");var X=formatTitleXhr(aa);if(X!=undefined){X.addCallback(function(ac){if(ac!=undefined&&ac.title!=undefined){var ab=getDisplayMessageObj(ac.title,INFO);ab.messageTitle="SR Header Title:";displayInfo(ab)}})}}});m.appendChild(v.domNode);var P=document.createElement("tr");K.appendChild(P);var U=document.createElement("td");P.appendChild(U);dojo.attr(U,{align:"right",width:"15%"});var u=document.createElement("span");U.appendChild(u);u.appendChild(document.createTextNode("Select Column Name:"));var T=document.createElement("td");P.appendChild(T);dojo.attr(T,{align:"left",width:"15%"});destroyDijitWidget("headerTitleF");var F=getCustomizableFldDataStore(G);var H=document.createElement("input");var O=new dijit.form.FilteringSelect({id:"headerTitleF",name:"headerTitleF",searchAttr:"name",labelAttr:"label",labelType:"html",tabindex:"-1",pageSize:"25",onChange:function(){var Z=dijit.byId("headerTitleF").getValue();if(Z==undefined||Z==""){return}dijit.byId("headerTitleF").title=Z;var aa=(headerDateFlds.contains(Z))?"":"none";var Y=(headerDateFlds.contains(Z))?"none":"";var X=dojo.query(".dateFormatter");if(X!=undefined&&X.length>0){dojo.forEach(X,function(ab){dojo.style(ab,"display",aa)})}var X=dojo.query(".stringFormatter");if(X!=undefined&&X.length>0){dojo.forEach(X,function(ab){dojo.style(ab,"display",Y)})}if(aa!="none"){setFieldVal("dateFormatter","Days")}else{setFieldVal("dateFormatter","Date")}if(Y=="none"){setFieldVal("stringFormatter","")}},style:"vertical-align:middle;"},H);O.store=F;O.labelFunc=function(Z,X){var Y=X.getValue(Z,"name");return Y};O.startup();T.appendChild(O.domNode);var S=document.createElement("td");P.appendChild(S);dojo.attr(S,{align:"center",width:"15%",rowSpan:"2"});var E=document.createElement("img");dojo.attr(E,{src:"../images/toolbar_moveright.gif"});dojo.style(E,{"vertical-align":"middle"});S.appendChild(E);dojo.connect(E,"onclick",function(){if(dijit.byId("headerTitleF")&&dijit.byId("headerTitleF").getValue()!=""){var Y=dijit.byId("headerTitleF").getValue();var ab=(headerDateFlds.contains(Y))?"":"none";var aa=(headerDateFlds.contains(Y))?"none":"";Y="%%"+Y;if(dijit.byId("stringFormatter")&&dijit.byId("stringFormatter").getValue()!=""&&!isNaN(dijit.byId("stringFormatter").getValue())){Y=Y+"(%."+dijit.byId("stringFormatter").getValue()+"s)"}else{if(dijit.byId("dateFormatter")&&dijit.byId("dateFormatter").getValue()!=""&&ab!="none"){if("Days"===dijit.byId("dateFormatter").getValue()){Y=Y+"(%.0tX)"}else{if("Date"===dijit.byId("dateFormatter").getValue()){Y=Y+"(%tD)"}else{if("DateTime"===dijit.byId("dateFormatter").getValue()){Y=Y+"(%tc)"}}}}}Y=Y+"%%";if(dijit.byId("titlePrefText")){var X=(dijit.byId("titlePrefText").getValue()!="")?dijit.byId("titlePrefText").getValue()+" ":dijit.byId("titlePrefText").getValue();var Z=X+Y;dijit.byId("titlePrefText").setValue(Z)}}});var R=document.createElement("td");P.appendChild(R);dojo.attr(R,{align:"left",colSpan:3,rowSpan:2});destroyDijitWidget("titlePrefText");var b=document.createElement("input");var a=(dojo.isIE)?"width:99%":"width:100%";var s=new dijit.form.SimpleTextarea({"class":"titlePrefClass",rows:3,style:a,id:"titlePrefText"},b);R.appendChild(s.domNode);s.setValue(D);var N=document.createElement("tr");dojo.addClass(N,"stringFormatter");K.appendChild(N);var A=document.createElement("td");N.appendChild(A);dojo.attr(A,{align:"right",width:"15%"});dojo.addClass(A,"stringFormatter");var V=document.createElement("span");V.appendChild(document.createTextNode("# of Characters:"));A.appendChild(V);var z=document.createElement("td");N.appendChild(z);dojo.attr(z,{align:"left",width:"15%"});dojo.addClass(z,"stringFormatter");destroyDijitWidget("stringFormatter");var b=new dijit.form.ValidationTextBox({id:"stringFormatter",name:"stringFormatter",regExp:"[0-9]*",trim:"true",invalidMessage:"This is not a valid number.",tabindex:"-1",style:"vertical-align:middle;"},document.createElement("input"));z.appendChild(b.domNode);var y=document.createElement("td");N.appendChild(y);dojo.attr(y,{align:"right",colSpan:4});var M=document.createElement("tr");dojo.addClass(M,"dateFormatter");dojo.style(M,{display:"none"});K.appendChild(M);var p=document.createElement("td");M.appendChild(p);dojo.attr(p,{align:"right",width:"15%"});dojo.addClass(p,"dateFormatter");destroyDijitWidget("dateFormatter");var V=document.createElement("span");V.appendChild(document.createTextNode("Format as:"));p.appendChild(V);var o=document.createElement("td");M.appendChild(o);dojo.attr(o,{align:"left",width:"15%"});dojo.addClass(o,"dateFormatter");var h=new dojo.data.ItemFileReadStore({data:{items:[{name:"Date",value:"Date"},{name:"DateTime",value:"DateTime"},{name:"Days",value:"Days"}],identifier:"name"}});var I=new dijit.form.FilteringSelect({id:"dateFormatter",name:"dateFormatter",searchAttr:"name",labelAttr:"name",labelType:"text",tabindex:"-1",style:"vertical-align:middle;"},document.createElement("input"));I.store=h;I.startup();o.appendChild(I.domNode);return q}function formatTitleXhr(f,b){if(b==undefined||b==true){dijit.byId("pleasewait").show()}var a=getQueryTabName();var g=getSrNumber();return dojo.xhrPost({url:"../../../SRHeaderRequest",content:{action:"getCustomTitle",queryTabName:a,activeSR:g,title:f},handleAs:"json",preventCache:true,load:function(l,h){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(l.opStatus==1){displayErrors(l)}return l},error:function(l,h){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}return l}})}function getCustomizableFldDataStore(a){var f=new Array();var g=a.jsonContent.allFields;if(g!=undefined){dojo.forEach(g,function(m){var o=dojo.clone(m);if(o.isDisplayableScalar==true){var h=o.field;o.syntax="%%"+h+"%%";var l=o.name;o.label="<span title='"+o.syntax+"'>"+l+"</span>";f.push(o)}});if(f.length>0){f.sort(compareByName)}}var b=new dojo.data.ItemFileReadStore({data:{items:f,identifier:"field"}});return b}function selectLayoutInputNode(w,u){var z=DEFAULT_COLUMN_COUNT;var y="normal";if(w.jsonContent!=undefined){if(w.jsonContent.columnCount!=undefined){z=w.jsonContent.columnCount}if(w.jsonContent.layout!=undefined){y=w.jsonContent.layout}}var s=(y=="normal")?"Number of Columns:":"Number of Rows:";var C=(y=="normal")?"Select number of Columns for display of SR Header fields":"Select number of Rows for display of SR Header fields";var a=u.firstChild;var g=document.createElement("tr");a.appendChild(g);var p=document.createElement("td");g.appendChild(p);dojo.attr(p,{align:"right",width:"15%",nowrap:"nowrap"});var o=document.createElement("td");g.appendChild(o);dojo.attr(o,{align:"left",width:"15%"});var x=document.createElement("span");x.title="Select layout for SR Header fields:";x.appendChild(document.createTextNode("SR Header Layout:"));p.appendChild(x);var v=document.createElement("input");var f={};f.identifier="id";f.items=[{name:"Row",id:"transposed",label:"Row"},{name:"Column",id:"normal",label:"Column"}];var q=new dojo.data.ItemFileReadStore({data:f});if(dijit.byId("headerLayout")!=undefined){dijit.byId("headerLayout").destroyRecursive()}var A=new dijit.form.FilteringSelect({name:"headerLayout",id:"headerLayout",searchAttr:"name",labelAttr:"label",labelType:"html",value:y,invalidMessage:"Only two types of layout are allowed: Row or Column"},v);A.store=q;A.labelFunc=function(F,D){var E=D.getValue(F,"label");return E};A.setValue(y);A.startup();o.appendChild(A.domNode);var m=document.createElement("td");g.appendChild(m);dojo.attr(m,{align:"right",width:"15%",nowrap:"nowrap"});var x=document.createElement("span");dojo.attr(x,{id:"columnCountLSpan"});x.title=C;x.appendChild(document.createTextNode(s));m.appendChild(x);var l=document.createElement("td");g.appendChild(l);dojo.attr(l,{align:"left",width:"15%",id:"countPrefTD"});var B=createCountNode(y);if(B!=undefined){B.setValue(z);l.appendChild(B.domNode)}var h=document.createElement("td");g.appendChild(h);var b=document.createElement("td");g.appendChild(b);return u}var dialogEvtHandle;function attachEvents(a){if(dialogEvtHandle!=undefined){dojo.disconnect(dialogEvtHandle)}var b=dijit.byId("headerLayout");dialogEvtHandle=dojo.connect(b,"onChange",dojo.hitch(a,function(p){var g=(p=="transposed")?"Number of Rows:":"Number of Columns:";var o=(p=="normal")?"Select number of Columns for display of SR Header fields":"Select number of Rows for display of SR Header fields";var q=dojo.query("span[id='columnCountLSpan']",a.domNode);if(q!=undefined&&q.length>0){var h=q[0];h.innerHTML="";h.title=o;h.innerHTML=g}var m=dojo.query("td[id='countPrefTD']",a.domNode);if(m!=undefined&&m.length>0){var f=m[0];f.innerHTML="";var l=createCountNode(p);if(l!=undefined){f.appendChild(l.domNode)}if(dijit.byId("columnCount")){dijit.byId("columnCount").setValue(DEFAULT_COLUMN_COUNT)}}}))}function createCountNode(f){if(f==undefined||f==""){return}if(dijit.byId("columnCount")!=undefined){dijit.byId("columnCount").destroyRecursive()}var h;if(f=="transposed"){var b=document.createElement("input");h=new dijit.form.NumberTextBox({constraints:{places:0,min:1,max:50},promptMessage:"Enter a number between 1 and 50",invalidMessage:"Enter a number between 1 and 50",name:"columnCount",id:"columnCount"},b)}else{var g={};g.identifier="name";g.items=[{name:"1",id:"1"},{name:"2",id:"2"},{name:"3",id:"3"},{name:"4",id:"4"},{name:"5",id:"5"},{name:"6",id:"6"},{name:"7",id:"7"},{name:"8",id:"8"},{name:"9",id:"9"},{name:"10",id:"10"}];var a=new dojo.data.ItemFileReadStore({data:g});var b=document.createElement("input");h=new dijit.form.FilteringSelect({name:"columnCount",id:"columnCount",searchAttr:"name"},b);h.store=a}return h}function createDescPrefNode(u,q){var s=false;var C="";if(u.jsonContent!=undefined){s=u.jsonContent.descriptionCollapsed;C=u.jsonContent.descriptionRowCount;if(C==undefined||C==null||C==0){C=""}}var a=q.firstChild;var D=document.createElement("tr");var p=document.createElement("td");dojo.attr(p,{colSpan:6,width:"100%",align:"left"});a.appendChild(D);D.appendChild(p);dojo.addClass(D,"formQuestion");var B=document.createElement("span");B.appendChild(document.createTextNode("Header Layout"));dojo.addClass(B,"tipText");p.appendChild(B);var f=document.createElement("tr");a.appendChild(f);var o=document.createElement("td");f.appendChild(o);dojo.attr(o,{align:"right",width:"15%",nowrap:"nowrap"});var A=document.createElement("span");A.appendChild(document.createTextNode("Minimum number of Rows for Description:"));o.appendChild(A);var m=document.createElement("td");f.appendChild(m);dojo.attr(m,{align:"left",width:"15%"});var w=document.createElement("input");if(dijit.byId("descriptionRowCount")!=undefined){dijit.byId("descriptionRowCount").destroy()}var y=new dijit.form.NumberTextBox({name:"descriptionRowCount",id:"descriptionRowCount",constraints:{min:3,max:100},promptMessage:"Enter a value between 3 and 100.",invalidMessage:"Invalid Number of Rows.",value:C},w);y.startup();m.appendChild(y.domNode);var l=document.createElement("td");f.appendChild(l);var z=document.createElement("span");z.appendChild(document.createTextNode("Keep Description Collapsed:"));l.appendChild(z);dojo.attr(l,{align:"right",width:"15%",nowrap:"nowrap"});var h=document.createElement("td");f.appendChild(h);dojo.attr(h,{align:"left",width:"15%"});var v=document.createElement("input");if(dijit.byId("descriptionCollapsed")!=undefined){dijit.byId("descriptionCollapsed").destroy()}var x=new dijit.form.CheckBox({name:"descriptionCollapsed",id:"descriptionCollapsed",value:"true"},v);x.startup();if(dijit.byId("descriptionCollapsed")){dijit.byId("descriptionCollapsed").setChecked(s)}h.appendChild(x.domNode);var g=document.createElement("td");f.appendChild(g);var b=document.createElement("td");f.appendChild(b);return q}function createTimePrefNode(B,x){var O="";var w="";var z="";var M;var N;var G;if(B.jsonContent!=undefined){O=B.jsonContent.morningTime;w=B.jsonContent.noonTime;z=B.jsonContent.afternoonTime}var b=x.firstChild;var y=document.createElement("tr");b.appendChild(y);var v=document.createElement("td");y.appendChild(v);dojo.addClass(y,"formQuestion");var p=document.createElement("span");dojo.style(p,{"vertical-align":"middle"});v.appendChild(p);dojo.attr(v,{colSpan:"6",align:"left"});var u=document.createElement("img");dojo.attr(u,{src:"../images/tip.gif",align:"top"});p.appendChild(u);var s=document.createTextNode(" Time preferences used in pop-up Calendar for Date/Time fields (such as Next Resp Due)");p.appendChild(s);dojo.addClass(p,"tipText");var g=document.createElement("tr");b.appendChild(g);var q=document.createElement("td");g.appendChild(q);dojo.attr(q,{align:"right",width:"15%",nowrap:"nowrap"});var K=document.createElement("span");q.appendChild(K);K.appendChild(document.createTextNode("Morning Time:"));var o=document.createElement("td");g.appendChild(o);dojo.attr(o,{align:"left",width:"15%"});var D=document.createElement("input");if(dijit.byId("morningTime")!=undefined){dijit.byId("morningTime").destroy()}var H=new dijit.form.TimeTextBox({name:"morningTime",id:"morningTime",trim:true,constraints:{timePattern:"HH:mm:ss",clickableIncrement:"T00:15:00",visibleIncrement:"T00:15:00",visibleRange:"T01:00:00"},promptMessage:"Use HH:mm:ss where HH is 00 - 23 hours",invalidMessage:"Invalid time. Use HH:mm:ss where HH is 00 - 23 hours"},D);H.startup();M=window.calTimePrefUtil.extractTimePref(O);if(M!=undefined&&M.Hours!=undefined&&M.Mins!=undefined){var L=new Date();L.setHours(M.Hours,M.Mins,0);H.setValue(L)}o.appendChild(H.domNode);var m=document.createElement("td");g.appendChild(m);var J=document.createElement("span");J.appendChild(document.createTextNode("Noon Time:"));m.appendChild(J);dojo.attr(m,{align:"right",width:"15%",nowrap:"nowrap"});var l=document.createElement("td");g.appendChild(l);dojo.attr(l,{align:"left",width:"15%"});var C=document.createElement("input");if(dijit.byId("noonTime")!=undefined){dijit.byId("noonTime").destroy()}var F=new dijit.form.TimeTextBox({name:"noonTime",id:"noonTime",trim:true,constraints:{timePattern:"HH:mm:ss",clickableIncrement:"T00:15:00",visibleIncrement:"T00:15:00",visibleRange:"T01:00:00"},promptMessage:"Use HH:mm:ss where HH is 00 - 23 hours",invalidMessage:"Invalid time. Use HH:mm where HH is 00 - 23 hours"},C);F.startup();N=window.calTimePrefUtil.extractTimePref(w);if(N!=undefined&&N.Hours!=undefined&&N.Mins!=undefined){var L=new Date();L.setHours(N.Hours,N.Mins,0);F.setValue(L)}l.appendChild(F.domNode);var h=document.createElement("td");g.appendChild(h);var I=document.createElement("span");I.appendChild(document.createTextNode("Afternoon Time:"));h.appendChild(I);dojo.attr(h,{align:"right",width:"15%",nowrap:"nowrap"});var f=document.createElement("td");g.appendChild(f);dojo.attr(f,{align:"left",width:"15%"});var A=document.createElement("input");if(dijit.byId("afternoonTime")!=undefined){dijit.byId("afternoonTime").destroy()}var E=new dijit.form.TimeTextBox({name:"afternoonTime",id:"afternoonTime",trim:true,constraints:{timePattern:"HH:mm:ss",clickableIncrement:"T00:15:00",visibleIncrement:"T00:15:00",visibleRange:"T01:00:00"},promptMessage:"Use HH:mm where HH is 00 - 23 hours",invalidMessage:"Invalid time. Use HH:mm where HH is 00 - 23 hours"},A);E.startup();G=window.calTimePrefUtil.extractTimePref(z);if(G!=undefined&&G.Hours!=undefined&&G.Mins!=undefined){var L=new Date();L.setHours(G.Hours,G.Mins,0);E.setValue(L)}f.appendChild(E.domNode);var a=document.createElement("tr");b.appendChild(a);var P=document.createElement("td");a.appendChild(P);dojo.attr(P,{colSpan:"6",align:"left"});return x}function evaluateMVDSubmitButtonDetails(){var a=new Object();a.name="apply";a.type="submit";a.label=APPLY_AND_SAVE_BUTTON_LABEL;a.value=APPLY_AND_SAVE_BUTTON_VALUE;return a}function registerWipeNodes(g){var a=50;var f=dojo.fx.wipeIn({node:g,duration:a});var b=dojo.fx.wipeOut({node:g,duration:a})}function createMVDApplyButtons(f,b,l,o){var h=new dijit.form.Button({label:"Cancel",name:"cancel",onClick:function(q){var p=l.manageViewDialogRef;p.hide();p.destroyRecursive();l.manageViewDialogRef=null}});f.appendChild(h.domNode);var m=new dijit.form.Button({label:o.label,onClick:function(p){validateCustFormDialogInput(l)}});f.appendChild(m.domNode);var g=new dijit.form.Button({label:"Reset to Default",name:"reset",onClick:function(p){processResetCustFormDialogInput(l)}});f.appendChild(g.domNode);var a=new dijit.form.Button({label:"Edit SR Header Styles",name:"colorPrefs",onClick:function(p){StyleRuleManager.displayItems(StyleRuleManager.SRNavSRDialogContext)}});f.appendChild(a.domNode);cont--}function showHelpDialog(f,a){if(dijit.byId("helpTT")!=undefined){dijit.byId("helpTT").destroyRecursive()}var l=new dijit.TooltipDialog({id:"helpTT"});dojo.addClass(l.domNode,"dijitInline");var q=document.createElement("table");var p=document.createElement("tbody");q.appendChild(p);var m=document.createElement("tr");p.appendChild(m);var g=document.createElement("td");if(a=="Header Title"){g.innerHTML=getHelpTextNodeForTitle()}m.appendChild(g);var h=document.createElement("tr");p.appendChild(h);var b=document.createElement("td");h.appendChild(b);dojo.attr(b,{align:"left"});var o=new dijit.form.Button({label:"Close"});b.appendChild(o.domNode);dojo.connect(o,"onClick",this,function(){dijit.popup.close(l)});l.setContent(q);l.startup();dojo.connect(l,"onBlur",function(){dijit.popup.close(l)});dijit.popup.open({popup:l,around:f})}function getHelpTextNodeForTitle(){var a=new StringBuffer();a.append("<ul>");a.append("<li>");a.append("Select a column from the drop-down and click on 'move to right' icon to include the selected column in the title text box.");a.append("</li>");a.append("<li>");a.append("Repeat the above process for all the  columns that you want to see in the title bar.");a.append("</li>");a.append("<li>");a.append("Please note that in the title text box %%columnname%% is the place-holder for the actual value of the column and a single space is automatically added after each column.");a.append("</li>");a.append("<li>");a.append("You can also type your own text as well as manually enter the column names in the title text box, as long as you follow the above formatting.");a.append("</li>");a.append("<li>");a.append("An example is SR:%%SRNumber%% Severity:%%severity%% Status:%%status%%.");a.append("</li>");a.append("<li>");a.append("Click on 'Preview' button to preview the title.");a.append("</li>");a.append("<li>");a.append("Please note once you customize the title it will overwrite the default SR header title.");a.append("</li>");a.append("<li>");a.append("To reset to default SR header title, remove customized header title text and click on 'Apply and Save' button.");a.append("</li>");a.append("</ul>");return a.toString()}function getAllFormFieldList(h){var a=h.jsonContent.fields;var m=h.jsonContent.allFields;var f=new Array();var l=new Array();var b=new Array();var g=0;for(g in a){var o=a[g].position;if(window.naCustomizableFlds!=null&&dojo.isArray(window.naCustomizableFlds)&&window.naCustomizableFlds.contains(a[g].field)){continue}f[o]=a[g]}f=dojo.filter(f,function(p){return p!=null});for(g in m){var o=m[g].position;if((o==null)&&(m[g].field!=null)){if(window.naCustomizableFlds!=null&&dojo.isArray(window.naCustomizableFlds)&&window.naCustomizableFlds.contains(m[g].field)){}else{if(window.customizableFlds!=null&&dojo.isArray(window.customizableFlds)&&window.customizableFlds.contains(m[g].field)){l.push(m[g])}else{b.push(m[g])}}}}if(l.length>0){l.sort(compareByName);f=f.concat(l)}if(b.length>0){f=f.concat(b)}return f}function animateMeArray(a,b,f){if(a==true){dojo.fx.combine(b).play()}else{dojo.fx.combine(f).play()}}var cont=1;function createManageFormViewDialog(b,h){dijit.byId("pleasewait").show();var a=getCustManageFormViewDetailsObj(b);var f=a.manageViewDialogRef;if(f){cont++;var g=f.domNode.style.zIndex;f.domNode.style.zIndex=parseInt(g)+parseInt(cont);f.titleNode.firstChild.nodeValue=h}if(!f){var l=createMangeViewDialogFramework(b);f=new dijit.Dialog({refocus:false,title:h,style:"width: 98%; height: 98%;"},l);f.domNode.style.zIndex=1;dojo.style(f.containerNode,{position:"relative"});f.startup();a.manageViewDialogRef=f}dijit.byId("pleasewait").hide();setTimeout(function(){f.show();attachEvents(f)},"0")}function getCustManageFormViewDetailsObj(a){return manageFormViewMap.get(a)}function validateCustFormDialogInput(f){var b=f.manageViewDialogRef;var g=b.getValues();var h=dijit.byId("titlePrefText").getValue();if(h!=undefined&&h!=""){h=h.replace(/([\f\n\r\t\v\u2028\u2029])*/g,"")}if(!isEmptyVal(h)||!(/^\s*$/).test(h)){var a=formatTitleXhr(h);if(a!=undefined){a.addCallback(function(l){if(l.title!=undefined){processCustFormDialogInput(f)}else{if(l.opResult!=undefined&&l.opResult==-1){return}}});a.addErrback(function(m){var l=getDisplayMessageObj("Failed to perform validation on SR Header Title. Please retry after cleaning SR Header Title.",ERROR);displayErrors(l);return})}}else{processCustFormDialogInput(f)}}function processCustFormDialogInput(E){dijit.byId("pleasewait").show();var x=E.manageViewDialogRef;var h=x.getValues();var B=h.viewId;var q=getCustManageFormViewDetailsObj(B);var b=q.jsonContent;var f=h.apply;var G=h.titlePrefText;if(G==undefined){G=dijit.byId("titlePrefText").getValue()}if(G!=undefined&&G!=""){G=G.replace(/([\f\n\r\t\v\u2028\u2029])*/g,"")}var g=h.showSRViewerLink;if(g!=undefined&&g=="true"){b.showSRViewerLink=true}else{b.showSRViewerLink=false}b.title=G;var C=h.columnCount;console.debug(C);var a=q.dndSource;var s=dojo.query(".dojoDndItem",a.node);var m=new Array();var H=new Array();dojo.forEach(s,function(K,L){var M=a.getItem(K.id);M.data.position=(L+1);var I=false;var J=dojo.query(".dijitCheckBoxChecked",K.childNodes[0]);if(J.length>0){I=true}if(I){H.push(K.id)}else{M.data.position=null;m.push(K.id)}});var u=H;var z=new Array();var F=null;dojo.forEach(u,function(J,I){F=a.getItem(J);F.data.position=I;z.push(F.data);console.debug(F.data.field+F.data.position)});b.fields=z;if(C!=undefined&&C!=""){var v=parseInt(C);if(v!=0&&!isNaN(v)){b.columnCount=v}}var A=h.headerLayout;if(A!="normal"&&A!="transposed"){A="normal"}b.layout=A;var p=h.descriptionCollapsed;if(p&&p=="true"){b.descriptionCollapsed=true}else{b.descriptionCollapsed=false}var y=h.descriptionRowCount;if(y!=undefined){if(y==""){y=3}var w=parseInt(y);if(isNaN(w)){b.descriptionRowCount=3}if(!isNaN(w)){w=(w>100)?100:w;w=(w<3)?3:w;b.descriptionRowCount=w}}var D=h.morningTime;var l=h.noonTime;var o=h.afternoonTime;b.afternoonTime=(o==undefined||o=="")?"":o.getHours()+":"+o.getMinutes();b.morningTime=(D==undefined||D=="")?"":D.getHours()+":"+D.getMinutes();b.noonTime=(l==undefined||l=="")?"":l.getHours()+":"+l.getMinutes();if(dojo.string.trim(f)=="applyAndSave"){dojo.xhrPost({url:"../../../SRHeaderRequest",content:{action:"saveCustomData",json:dojo.toJson(b)},handleAs:"json",load:function(J){dijit.byId("pleasewait").hide();if(J.opStatus==0){var I=J.savedJson;loadHeaderFields();x.hide();return J}else{if(J.opStatus!=undefined&&J.opStatus==1){displayErrors(J)}}},error:function(J){dijit.byId("pleasewait").hide();var I=getDisplayMessageObj("Request to save SR header personalized data failed or timed out.",2);displayErrors(I);return J}})}}function processResetCustFormDialogInput(a){dijit.byId("pleasewait").show();var b=a.jsonContent;dojo.xhrPost({url:"../../../SRHeaderRequest",content:{action:"resetCustomData",json:dojo.toJson(b)},handleAs:"json",load:function(h){if(h.opStatus==0){var g=a.manageViewDialogRef;g.hide();g.destroyRecursive();a.manageViewDialogRef=null;var f=h.resetJson;loadHeaderFields();dijit.byId("pleasewait").hide()}},error:function(g){dijit.byId("pleasewait").hide();var f=getDisplayMessageObj("Request to reset SR header personalized data to default failed or timed out.",2);displayErrors(f);console.debug("Request to reset SR header personalized data to default failed or timed out.",g)}})}var GRID_ROWSPERPAGE=50;var GLOBAL_ADMIN_VAR=null;var ARTIFACT_TYPE_SR="SR";var GLOBAL_USER="global";var SP_UNDEFINED="sp_undefined";var MAX_SRLIST_LENGTH=1600;var serverSubstToken=new Array();serverSubstToken.push("%%REFID%%");var openDialogTimer=null;var browserSubstToken=new Array();browserSubstToken.push("%%LISTBCID%%");browserSubstToken.push("%%ROWINDEX%%");browserSubstToken.push("%%REFFLD%%");browserSubstToken.push("%%GRIDID%%");var invalidMessage_textboxEmpty="Invalid value. Please provide a name";var invalidMessage_filteringSelect="Invalid value. Please select from the dropdown list";var invalidMessage_generic="Invalid value.";var wrapCheckedMenuItemLocatorPrefix="wrapCheckedMenuItemLocator_";var applyRuleStylesLocatorPrefix="applyRuleStylesLocator_";var artifactListSelectorSlaveMap=new Map();var custUbiquitousRuleSet=new Map();var custNonUbiRuleSet=new Map();var custRuleSetMap=new Map();var custRSColumnsToStyle=new Map();var custRuleSetToView=new Map();var applicationSettingsObj={};applicationSettingsObj.srLeftClickOpenNew=true;applicationSettingsObj.noOfFixedColumnWarnThreshold=4;var SECURE_SR="security group";var SR_SUBTYPE_FIELD="SRSubType";var SR_OWNER_FIELD="owner";var SR_NUMBER_FIELD="SRNumber";var SR_ID_FIELD="id";var SR_SUMMARY_FIELD="summary";var SR_CONFIG_ID="configurationId";var CURRENT_USER="";var isUser_SVSR_Capable=false;var globalContextMenu=null;var previewSRTemplate=null;var previewDialog=null;var Dashboard=null;var DashboardViewConfig=null;var custArtifactPropsMap=new Map();var globalAbbreviationMap=new Map();var milliSecsInOneDay=1000*60*60*24;function createWidget(a){var f=null;console.debug("create Widget for ...."+a.id);var b=a.content;if(b.type=="container"){f=containerRenderer(f,b,a.id)}else{f=containableComponentRenderer(f,b,a.id)}return f}function containableComponentRenderer(h,g,b){var f=new dijit.layout.ContentPane({style:"height:400px;"});var a=contentRenderer(g,b);f.setContent(a.domNode);dojo.byId("dummyContainer").appendChild(f.domNode);f.startup();a.resize();dojo.style(a.domNode,{width:"auto;"});if(h!=null){h.appendChild(f.domNode)}else{h=f}return h}function containerRenderer(l,b,g){var o;var a;if(b.layout=="accordion"){o=document.createElement("div");var f=dojo.byId("dummyContainer");dojo.style(o,"height","400px");a=new dijit.layout.AccordionContainer({id:b.Id},o)}var h=b.contents;var m;dojo.forEach(h,function(p){if(p.type=="containerContent"){m=containerContentRenderer(b.layout,p,p.position,b.id,g)}if(m!=null){a.addChild(m)}});dojo.byId("dummyContainer").appendChild(a.domNode);updateAllImageAccordion(a);a.startup();dojo.connect(a,"addChild",this,dojo.hitch(this,updateAllImageAccordion,a));dojo.connect(a,"removeChild",this,dojo.hitch(this,updateAllImageAccordion,a));if(l!=null){l.appendChild(a)}else{l=a}return l}function containerContentRenderer(b,m,f,h,l){var o=null;if(m.contentId!=null&&!dojo.string.trim(m.contentId)==""){var p=getTableComponentContent(m.contentId);if(b=="accordion"){if(p!=null){var g=p.type;console.debug("inside containerContentRenderer  type of listBC is "+g);if(g=="table"){o=createAccordionAndGrid(p,m.id,p.title,f,h,true,l,g,m.contentId)}else{if(g=="queryListBC"||g=="artifactListSelector"){var a=false;if(g=="artifactListSelector"){a=true}if(p.defaultTemplateTable!=null){o=createAccordionAndGrid(p.defaultTemplateTable,m.id,p.defaultTemplateTable.title,f,h,a,l,g,m.contentId)}}}}}}return o}function createAccordionAndGrid(z,v,D,C,u,q,p,w,s){var a=contentRenderer(z,q,p,w,s);var f=getPanePresentFixedObject(p,v);var o=false;var l=false;var B=false;if(globalDashBoardAdmin!=null&&globalDashBoardAdmin){l=true;if(f!=null&&f.presentFixed!=null){B=!f.presentFixed}}var y=z.businessObjectType;var m=document.createElement("span");if(w=="table"&&y=="PARENT"){var x=artifactListSelectorSlaveMap.get(s);m.appendChild(x.slaveGrid.domNode);dojo.style(x.slaveGrid.domNode,"display","none")}m.appendChild(a.domNode);document.body.appendChild(m);var g=null;if(dijit.byId(v)!=null){(dijit.byId(v)).destroyRecursive()}if(w=="table"){if(y=="PARENT"){g=new srmdojoc.layout.ImageAccordion({title:D,id:v,selected:(getWidgetSelectedPaneById(p)!=null?(v==getWidgetSelectedPaneById(p)):(C==1)),childId:a.id,isViewEditable:z.createdByMe,loadingImgSrc:"../images/ajax-loader.gif",filterApplied:(a.model.query.query+"<br/>QueryMode: "+a.model.query.mode),isHideControlActive:l,isHideable:B,relatedViewId:z.id,reorderEnabled:true,refineAppliedImgSrc:"../images/datafilter.gif",onSelected:function(){setTimeout(function(){hideRefineSlaveGrid(a.id,getRefineGridId(a.id))},250)}},m);var b=createAccordionPaneMenu2(a.id,z.createdByMe,"noteIcon",f.createdByMe,f.presentFixed);g.dropDownMenuNode.appendChild(b.domNode);if(!f.createdByMe){dojo.style(g.paneTypeNode,{display:"inline"})}dojo.connect(g,"onSelected",this,dojo.hitch(this,"saveSelectedPane",g));dojo.connect(g,"setTitle",this,dojo.hitch(this,"changeTitleOnSelectedPane",g))}else{if(y=="CHILD"){g=new srmdojoc.layout.ImageAccordion({title:D,id:v,selected:(C==1),configureImgSrc:"../images/update_ena.png",configureFunction:"createManageViewDialog",childId:a.id,isViewEditable:z.createdByMe,loadingImgSrc:"../images/ajax-loader.gif",filterApplied:(a.model.query.query+"<br/>QueryMode: "+a.model.query.mode),isHideControlActive:false,isHideable:false,relatedViewId:null,reorderEnabled:false,onSelected:function(){setTimeout('(dijit.byId("'+a.id+'")).resize();',250)}},m)}}}else{if(w=="queryListBC"||w=="artifactListSelector"){if(z.hasAccessPrivilege){g=new srmdojoc.layout.ImageAccordion({title:D,id:v,selected:(C==1),isViewEditable:z.createdByMe,configureFunction:"createManageViewDialog",childId:a.id,loadingImgSrc:"../images/ajax-loader.gif",filterApplied:"",isHideControlActive:false,isHideable:false,relatedViewId:z.id,reorderEnabled:false,onSelected:function(){setTimeout('(dijit.byId("'+a.id+'")).resize();',250)}},m);var b=createAccordionPaneMenu(a.id,"noteIcon",z.hasQueryPrivilege);g.dropDownMenuNode.appendChild(b.domNode)}else{g=new dijit.layout.AccordionPane({title:"You have no access to this page"})}}}var A=custWidgetTableMap.get(a.id);A.containerId=null;A.containerContentId=v;A.containerPosition=C;A.originalBCType=w;A.originalContentId=s;A.hasQueryPrivilege=z.hasQueryPrivilege;A.hasQueryPrivilege=z.hasAccessPrivilege;if(globalDashBoardAdmin!=null&&globalDashBoardAdmin){dojo.connect(g,"_hidePaneCheckboxClick",this,dojo.hitch(this,persistHideablePane,g,p,v,A))}var h={modelAllChange:function(){if(a.model.store.getFakeRowCount()!=null){g.setRowCount((a.model.store.getServerRowCount()<0)?"Error":a.model.store.getServerRowCount())}else{g.setTitleRowCountNode("")}}};a.model.observer(h);dojo.connect(window,"onresize",function(){a.resize();var E=a.views.views[1];dojo.connect(E,"renderHeader",function(){setSortArrows(a)})});dojo.connect(g,"_reorderControlMoveUp",this,dojo.hitch(this,widgetReorderMoveUp,g));dojo.connect(g,"_reorderControlMoveDown",this,dojo.hitch(this,widgetReorderMoveDown,g));return g}function contentRenderer(h,g,f,l,b){var a=null;if(h!=null&&h.type=="table"){a=tableRenderer(h,g,f,l,b)}return a}function tableRenderer(v,N,f,D,I){var p=new RegExp("^'([^']*)'$");v.edit.columns=dojo.map(v.edit.columns,function(l){if(l.queryOperand!=null&&l.queryOperand.match(p)){l.queryOperand=RegExp.$1}return l});var X=v.id;var q=dojox.uuid.generateRandomUuid();var A=v.fixedColumns[0][0];var z=v.normalColumns[0][0];var o=v.rowStyleRules;var F=false;if(v.businessObjectType=="CHILD"){F=true}var U=v.sort;var V=v.query;var x=v.dataProviderURL;var R=new CustTableDetails(q,X,f);console.debug("created table details object, uuid : "+R.uuid+" viewId : "+R.viewId+" : "+R.jsonContent+" : "+R.modelReferenceId);custWidgetTableMap.put(q,R);var J=new CustManageViewDetails(X,null,dojo.clone(v),null);var H=custViewMap.get(X);if(H==null){var s=new Array();s.push(q);custViewMap.put(X,s)}else{H.push(q)}if(D!=null&&(D=="queryListBC"||D=="artifactListSelector")){custComponentListMap.put(X,v)}if(dijit.byId(q)!=null){dijit.byId(q).destroyRecursive()}var T={noscroll:true,cells:A.cells};var B=v.styleRuleSets;J.appliedRuleSetStyles=filterAllAppliedNonUbiRuleSets(B);J.custColumnsToStyle=evaluateCustColumnsToStyle(J.appliedRuleSetStyles,X);J.areRulesAssessed=true;if(J.appliedRuleSetStyles.length==0){J.areRulesAssessed=false}manageViewMap.put(X,J);assignColumnGetFormatterFunction(v.tableCellStyles,T,z,J.custColumnsToStyle);var G=[T,z];var a=new srmdojoc.data.SPHomeQueryReadStore({url:x,requestMethod:"get"});dojo.connect(a,"errorHandler",function(l,Y){xhrErrHandler(l,Y,"Request to retrieve data")});var g=new srmdojoc.data.SPHomeDojoData(null,null,{store:a,rowsPerPage:0,query:{query:V,type:v.edit.listBCType,sort:U,listBCId:v.id,subject:GLOBAL_ADMIN_VAR,mode:v.queryMode,tagQuery:v.tagQuery,tagQueryMode:v.tagQueryMode,recCountType:v.recCountType,srId:getSrTechnicalInfoSrId(),activeSR:getSrTechnicalInfoActiveSR(),modId:getSrTechnicalInfoModId(),queryTabName:getSrTechnicalInfoQueryTabName(),customPreventCache:new Date().getTime()}});if(N){g.rowsPerPage=GRID_ROWSPERPAGE}if(F){if(pageArgs!=null&&pageArgs.parentId!=null){g.query.parentId="";g.query.parentId=pageArgs.parentId}if(pageArgs!=null&&pageArgs.childId!=null){g.query.childId="";g.query.childId=pageArgs.childId}}var L=new srmdojoc.grid.SPGrid({id:q,model:g,canSort:noSort});if((D=="table")&&v.businessObjectType=="PARENT"){var m=createRefineSlaveGrid(L);dojo.connect(m.slaveGrid,"onCellContextMenu",this,dojo.hitch(this,"openRefineSlaveContextMenu",L.id));artifactListSelectorSlaveMap.put(I,m)}if(D=="artifactListSelector"){L.rowSelector=true;if(artifactListSelectorSlaveMap.get(I)==null){var m=createArtifactListSelectorSlaveObjects(L,I);artifactListSelectorSlaveMap.put(I,m)}else{var w=artifactListSelectorSlaveMap.get(I);setArtifactListSelectorSlaveConnections(L,w,I)}}L.setStructure(G);connectColumnResizeListeners(L,J,D,v.businessObjectType);dojo.connect(g,"spHomePreRequestRows",this,dojo.hitch(this,ajaxLoading,L));dojo.connect(g,"processRows",this,dojo.hitch(this,yellowFade,L));dojo.connect(L,"onHeaderCellMouseOver",showTooltip);dojo.connect(L,"onHeaderCellMouseOut",hideTooltip);dojo.connect(L,"onHeaderCellClick",hideTooltip);dojo.connect(L,"onHeaderContextMenu",hideTooltip);dojo.connect(L,"onCellMouseOver",this,dojo.hitch(this,openGridCellToolTipDialog));dojo.connect(L,"onCellMouseOut",this,dojo.hitch(this,closeGridCellToolTipDialog));dojo.connect(L,"onCellClick",this,dojo.hitch(this,closeGridCellToolTipDialog));dojo.connect(L,"onRowContextMenu",this,dojo.hitch(this,closeGridCellToolTipDialog));var K=getCustManageViewDetailsObj(L.id);var M=new Map();for(var S=0;S<o.length;S++){var E=K.jsonContent.edit.columns;var W=o[S].query;var O=o[S].style;console.debug(" rule  "+W+" style  "+O);var C=[];var h=[];var b=getFields(W);for(var P=0;P<E.length;P++){var u=E[P].field;for(var Q=0;Q<b.length;Q++){if(u==b[Q]){var y=E[P].businessOptions.datatype;if(y=="date"){C.push("["+u+"]")}else{h.push("["+u+"]")}}}}W=processRule(W,C,h);if(O!=null&&O=="background-color:red"){O="../images/redDot.gif"}M.put("drule",{rule:W,icon:O})}K.rulesMap=M;return L}function noSort(f){if(f!=null){f=Math.abs(f);var a=f-1;var b=this.views.grid.getCell(a);var g=b.businessOptions.sortable;if(g){return true}else{return false}}}function showTooltip(b){var a=b.cell;var f=(a.longName!=null)?a.longName:a.name;dijit.showTooltip(f,b.cellNode)}function hideTooltip(a){dijit.hideTooltip(a.cellNode);dijit._masterTT._onDeck=null}function processRule(g,b,f){if(g!=null){dojo.forEach(b,function(p,l){var o=p;o=o.replace(/[\[]/g,"");o=o.replace(/[\]]/g,"");var h='dojo.date.locale.parse(this.grid.model.getRow(inRowIndex)["'+o+'"], {locale:"en-us", datePattern: "dd-MMM-yyyy", timePattern: "hh:mm:ss zzz aa", selector: ""})';g=g.replace(p,h)});dojo.forEach(f,function(o,l){var h=o;h=h.replace(/[\[]/g,"");h=h.replace(/[\]]/g,"");var m=' this.grid.model.getRow(inRowIndex)["'+h+'"]';g=g.replace(o,m)});var a=new Date();g=g.replace(/%%CLIENT_TIME%%/g,"new Date()");console.debug(" processed rule "+g)}return g}function getFields(h){var g;var b;var a=[];var f=h.replace(/[\[]/g,function(m){g=h.indexOf(m);var l=h.replace(/[\]]/g,function(o){b=h.indexOf(o);var p=h.substring(g+1,b);a.push(p);p="["+p+"]";h=h.replace(p,"");g=h.indexOf("[")})});return a}function ajaxLoading(f){if(f.domNode){var a=f.domNode.parentNode.parentNode.parentNode;var b=dijit.byNode(a);b.setLoadingAnimationOn();updateFilterAppliedText(f,"Fetching")}}function updateFilterAppliedText(g,a){if(g.domNode){var b=g.domNode.parentNode.parentNode.parentNode;var f=dijit.byNode(b);var h=(g.model.query.refinedQuery!=undefined)?g.model.query.refinedQuery:null;f.updateFilterAndQueryModeApplied(a,g.model.query.query,g.model.query.mode,h,g.model.query.tagQuery,g.model.query.tagQueryMode)}}function updateErrorTooltip(g,f){if(g.domNode){var a=g.domNode.parentNode.parentNode.parentNode;var b=dijit.byNode(a);b.updateRowCountTooltip(f)}}function formatBusinessOptionsData(inRowIndex){var retValue="?";var origCellData=null;var origGridId=null;var hrefString=null;if(inRowIndex!=null&&this.grid.model.isRowLoaded(inRowIndex)){origCellData=(this.grid.model.getRow(inRowIndex)[this.field]);if(origCellData!=undefined){retValue=origCellData}origGridId=this.grid.id;var custManageViewDetailsObj2=getCustManageViewDetailsObj(this.grid.id);if(this.businessOptions.type=="icon"){var rulesMap=custManageViewDetailsObj2.rulesMap;var drule=rulesMap.get("drule");var rule=drule.rule;var icon=drule.icon;if(eval(rule)){retValue='<img src="'+icon+'" >'}else{retValue=""}}else{if(this.businessOptions.businessType!=null&&origCellData!=undefined){var savedBusinessO=this.businessOptions;var row=this.grid.model.getRow(inRowIndex);var viewQueryMode=custManageViewDetailsObj2.jsonContent.queryMode;var artifactType_x=custManageViewDetailsObj2.jsonContent.artifactType;var linkHref=linkHrefMap.get(this.businessOptions.businessType);if(linkHref!=null&&(linkHref.href!=null||linkHref.javascriptString!=null)){var href=linkHref.href;var javascriptString=linkHref.javascriptString;var isHrefQueryParamComplete=true;dojo.forEach(serverSubstToken,function(oneToken){var fld=null;if(oneToken.match(/%%(\S+)%%/)){fld=RegExp.$1}var businessOptionSubField="savedBusinessO."+fld;var b=eval(businessOptionSubField);var idVal=row[b];if(idVal==undefined){isHrefQueryParamComplete=false}if(href!=null&&idVal!=undefined){href=href.replace(new RegExp(oneToken,"g"),idVal)}if(javascriptString!=null&&idVal!=undefined){javascriptString=javascriptString.replace(new RegExp(oneToken,"g"),idVal)}});dojo.forEach(browserSubstToken,function(oneToken){var idVal=null;if(oneToken=="%%ROWINDEX%%"){idVal=inRowIndex}else{if(oneToken=="%%LISTBCID%%"){idVal=custWidgetTableMap.get(origGridId).viewId}else{if(oneToken=="%%REFFLD%%"){idVal=origCellData}else{if(oneToken=="%%GRIDID%%"){idVal=origGridId}}}}if(href!=null&&idVal!=null&&idVal!=undefined){href=href.replace(new RegExp(oneToken,"g"),idVal)}if(javascriptString!=null&&idVal!=null&&idVal!=undefined){javascriptString=javascriptString.replace(new RegExp(oneToken,"g"),idVal)}});if(isHrefQueryParamComplete){retValue=createHrefLink(linkHref.hrefTarget,(href==null)?"":href,retValue,(javascriptString==null)?"":javascriptString)}}}if(this.cellFormat!=undefined&&this.cellFormat!=null){retVal=origCellData;if(this.cellFormat.toLowerCase()=="abbr"){var artType=custManageViewDetailsObj2.jsonContent.artifactType;var aMap=window.globalAbbreviationMap.get(artType);if(aMap!=null){var abbrMap=aMap.get(this.field);if(abbrMap!=undefined){if(abbrMap.get(origCellData)!=null){retValue=abbrMap.get(origCellData)}}}}else{if(this.cellFormat.toLowerCase()=="normal"&this.businessOptions.datatype=="date"&&dojo.string.trim(origCellData)!=""){var originalCellDate=getParsedDateValForWidget(origCellData,this.businessOptions.datatype);dateFormat.masks.srmNormalTime="d-mmm-yyyy HH:MM";retValue=originalCellDate.format("srmNormalTime")}else{if(this.cellFormat.toLowerCase()=="days"&this.businessOptions.datatype=="date"&&dojo.string.trim(origCellData)!=""){var originalCellDate=getParsedDateValForWidget(origCellData,this.businessOptions.datatype);originalCellDate.setHours(0,0,0,0);var today=new Date();today.setHours(0,0,0,0);var diff=Math.round((originalCellDate.getTime()-today.getTime())/milliSecsInOneDay);retValue=(diff>0)?("+"+diff):diff}else{if(this.cellFormat.toLowerCase()=="verbose"&this.businessOptions.datatype=="date"&&dojo.string.trim(origCellData)!=""){var originalCellDate=getParsedDateValForWidget(origCellData,this.businessOptions.datatype);dateFormat.masks.srmVerboseTimeOnly="HH:MM";var verboseTimeOnly=originalCellDate.format("srmVerboseTimeOnly");originalCellDate.setHours(0,0,0,0);var today=new Date();today.setHours(0,0,0,0);var diff=(originalCellDate.getTime()-today.getTime())/milliSecsInOneDay;diff=Math.round(diff);retValue=Math.abs(diff)+(Math.abs(diff)==1?" day ":" days ")+(diff>0?"left":"ago");if(diff>=-1&&diff<=1){if(diff==0){retValue="Today at "+verboseTimeOnly}else{if(diff==-1){retValue="Yesterday at "+verboseTimeOnly}else{if(diff==1){retValue="Tomorrow at "+verboseTimeOnly}}}}}}}}}}RULES_STYLER(this,inRowIndex)}return retValue}var RULES_STYLER=function(b,l){if((b.grid.model.getRow(l))["rules"]!=null){var h=(b.grid.model.getRow(l))["rules"];var a=getCustManageViewDetailsObj(b.grid.id);var g=a.custColumnsToStyle;if(g!=undefined){var f=g.get(b.field);if(f!=undefined&&f!=null){dojo.forEach(h,function(m){var o=f.get(m.ruleId);if(o!=undefined&&o!=null){b.customStyles.push(o)}})}}}};function createHrefLink(f,g,a,b){return dojo.string.substitute('<a target=${target}  href="${href}" ${jsString}>${text}</a>',{target:f,href:g,jsString:b,text:a})}function filterDisplayableGridCell(a){var b=dojo.filter(a,function(f){return f.businessOptions.displayable});return b}var linkHrefMap=new Map();function loadHrefMap(){dojo.xhrPost({url:"../../../CustRequest",sync:true,content:{action:"link",subject:GLOBAL_ADMIN_VAR},handleAs:"json",load:function(a){if(a.status=="SUCCESS"){dojo.forEach(a.data.link,function(b){linkHrefMap.put(b.businessType,b.linkHref)});if(a.data.areAllDefectSourcesMigrated!=undefined){areAllDefectSourcesMigrated=a.data.areAllDefectSourcesMigrated}evalToShowSupportTab_WorklistBanner(linkHrefMap)}},error:function(a){console.error("Error Encountered in post of readDynamicLinks function: ",a)}});dojo.xhrPost({url:"../../../InfoRequest",content:{action:"getAbbreviations"},handleAs:"json",load:function(a){console.debug("accepting json data : "+a);if(a!=undefined&&a.length>0){dojo.forEach(a,function(f,h){var g=globalAbbreviationMap.get(f.artifactType);if(g==null){g=new Map();globalAbbreviationMap.put(f.artifactType,g)}var b=g.get(f.fieldName);if(b==null){b=new Map();g.put(f.fieldName,b)}b.put(f.value,f.abbrev)})}},error:function(a){console.error("Error Encountered in post of getAbbreviations function: ",a)}})}var settingsMap=new Map();function loadSettingsMap(){loadHrefMap();dojo.xhrPost({url:"../../../LandingCustRequest",content:{action:"getSettings",subject:GLOBAL_ADMIN_VAR},handleAs:"json",load:function(a){console.debug("accepting json data : "+a.status);if(a.status=="SUCCESS"){console.debug("accepting json data : "+a.data);dojo.forEach(a.data,function(b){settingsMap.put(b.key,b.value)})}},error:function(a){console.error("Warning :Problems Encountered in post of loadSettingsMap function: ",a)}})}function showPleaseWaitDialog(){dijit.byId("pleasewait").show()}function hidePleaseWaitDialog(){dijit.byId("pleasewait").hide()}function resizeDijitNode(g,h,a){var b=new Object();var f=false;if(h!=undefined&&h!=null){b.height=h;f=true}if(a!=undefined&&a!=null){b.width=a;f=true}if(g.domNode!=null&&f){dojo.style(g.domNode,b)}g.layout();g.resize();return g}function resizeDijitNode2(a,b){if(a.domNode!=null){dojo.style(a.domNode,{height:b})}a.resize();return a}function getTableComponentContent(a){var b=custComponentListMap.get(a);return b}function buildComponentListMap(a){dojo.forEach(a,function(b){if(b.type=="styleRuleSet"){if(b.ubiquitous===true){collateRuleSetMap(custUbiquitousRuleSet,b)}else{collateRuleSetMap(custNonUbiRuleSet,b)}}else{if(b.type=="styleRuleSetRule"){arrangeRuleSetRule(b)}else{if(b.type=="table"){saveFieldPropertiesByArtifact(b)}}}custComponentListMap.put(b.id,b)});console.debug("finished building componentListMap");evalGlobalRuleSetMap(custRuleSetMap.keySet())}function repaintContainerContentCommon(a,f,m){var o=null;if(a!=null){console.debug(" execute a saved query "+f);var q=custWidgetTableMap.get(f);console.debug("savedGridInfo "+q);var l=dijit.byId(q.containerContentId);var s=l.getParent();var b=-1;dojo.forEach(s.getChildren(),function(v,u){if(v.id==q.containerContentId){b=u}});console.debug("childPosition = "+b);s.removeChild(l);l.destroyRecursive();var g=true;if(m==true){g=false}var h=a.type;var p=null;if(h=="table"){p=createAccordionAndGrid(a,q.containerContentId,a.title,q.containerPosition,q.containerId,g,q.modelReferenceId,q.originalBCType,q.originalContentId)}if(p.childId!=f&&custWidgetTableMap.findIt(f)>=0){deleteGridIdFromInternalMaps(f)}s.addChild(p,b);var o=new Object();o.resultPane=p;o.childPosition=b;o.savedGridInfo=q}return o}function deleteGridIdFromInternalMaps(a){var f=custWidgetTableMap.get(a).viewId;var b=custViewMap.get(f);b=dojo.filter(b,function(g){return(g!=a)});if(b.length>0){custViewMap.put(f,b)}else{custViewMap.remove(f)}custWidgetTableMap.remove(a)}function getWidgetModel(a){var f=null;if(custWidgetTableMap.get(a)!=null&&custWidgetTableMap.get(a).modelReferenceId!=null){var b=custWidgetTableMap.get(a).modelReferenceId;f=getModelbyId(b)}return f}function resizeGridXXX(a){dijit.byId(a).resize()}function getPanePresentFixedObject(f,h){var g=custModelMap.get(f);var b=dojo.filter(g.content.contents,function(l,a){return(l.id==h)});return b[0]}function persistHideablePane(b,m,l,h){var g=b.getHidePaneCheckboxValue();var a=getPanePresentFixedObject(m,l);a.presentFixed=!g;h.hideable=g;var p=null;var f={action:"save",subject:GLOBAL_USER,json:dojo.toJson(a)};dijit.byId("pleasewait").show();var o=talkToServer("../../../LandingCustRequest",f);o.addCallback(function(s,q){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(s.status=="SUCCESS"){alert("Successful save of the section hideable flag. ")}else{alert("A problem was encountered during save of the section hideable flag.Please do a screen refresh")}})}function talkToServer(a,f){var b={url:a,preventCache:true,content:f,handleAs:"json",error:function(g){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(g.opStatus!=null){alert(g.opStatus)}displayErrors(g);return g}};return dojo.xhrPost(b)}function buildScreenLayoutModelMap(){g_screenLayoutModelMap=new Map();var a=g_screenLayoutModel.contents;dojo.forEach(a,function(b){g_screenLayoutModelMap.put(b.id,b)})}function getSrTechnicalInfoSrId(){var a=null;if((window.getActiveSrId||SP_UNDEFINED)!=SP_UNDEFINED){a=getActiveSrId()}return a}function getSrTechnicalInfoActiveSR(){var a=null;if((window.getSrNumber||SP_UNDEFINED)!=SP_UNDEFINED){a=getSrNumber()}return a}function getSrTechnicalInfoModId(){var a=null;if((window.getSrModId||SP_UNDEFINED)!=SP_UNDEFINED){a=getSrModId()}return a}function getSrTechnicalInfoQueryTabName(){var a=null;if((window.getQueryTabName||SP_UNDEFINED)!=SP_UNDEFINED){a=getQueryTabName()}return a}if(dojo.isIE){dojo.connect(window,"unload",this,function(a){dijit.registry.forEach(function(b){if(b!=null){b.destroyRecursive()}})})}function setRefreshCustomizationLink_generic(f,a){var b=dijit.byId(f);b.onClick=function(g){genericRefreshWidgets(a)}}function genericRefreshWidgets(a){dojo.xhrPost({url:"../../../CustRequest",sync:true,content:{action:"refresh",subject:a},handleAs:"json",load:function(b){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(b.status=="SUCCESS"){alert("Successfully refreshed your customization");location.reload(true)}else{alert("Failed to refresh your customization")}},error:function(b){dijit.byId("pleasewait").hide();alert("Error encountered during refresh of your customization....");console.error("Error encountered during refresh of your customization: ",b)}})}function openGridCellToolTipDialog(f){var g=f.grid.model.getRow(f.rowIndex);var b=f.cell.field;var a="";if(g!=null&&g!=undefined){a=g[b]}openDialogTimer=null;if((b=="_icons")||(a!=undefined&&a!=null&&dojo.string.trim(a)!=""&&f.cell.formatter===NO_WRAP_FORMATTER)||(a!=undefined&&a!=null&&dojo.string.trim(a)!=""&&f.cell.cellFormat!=null)){openDialogTimer=setTimeout(function(){if(b=="_icons"){if(f.cellNode.innerHTML.toLowerCase().indexOf("img")>0){dijit.showTooltip("Next Response Due Date is in the past",f.cellNode)}}else{dijit.showTooltip(a,f.cellNode)}},(b=="_icons"||(f.cell.cellFormat!=null))?1000:3000)}}function connectColumnResizeListeners(b,g,f,a){dojo.forEach(b.views.views,function(l,h){dojo.connect(l.header,"endResizeColumn",this,dojo.hitch(this,"endColResize",g,f,a))})}function beginColResize(g,b,a,f){console.debug(" beginColumnResize from width -->"+f.cell.unitWidth)}function endColResize(g,q,p,f){var m=f.view.structure.rows[0];var s=f.view.idx;var u=f.node.cellIndex;var l=m[u].unitWidth;var v=m[u].field;var b=m[u].width;var a=dijit.byId(f.view.grid.id);a.structure[s].cells[0][u].width=l;updateColsWithWidth(g.jsonContent.edit.columns,v,l);if(q!=null&&(q=="queryListBC"||q=="artifactListSelector")&&g.savedJsonContent!=null){updateColsWithWidth(g.savedJsonContent.edit.columns,v,l)}else{if(q!=null&&(q!="queryListBC"||q!="artifactListSelector")){if(p!=undefined&&p=="PARENT"){persistColumnResize(g)}}}var o=g.viewId;var h=custViewMap.get(o);h=dojo.filter(h,function(w){return(w!=f.view.grid.id)});dojo.forEach(h,function(w){console.debug("other grid id "+w);var x=dijit.byId(w);if(x!=null){var y=x.structure;y[s].cells[0][u].width=l;setNewGridStructure(y,w)}})}function updateColsWithWidth(f,b,a){dojo.forEach(f,function(h,g){if(h.field!=undefined&&h.field==b){console.debug(" endResizeColumn index --> "+g);h.width=a}})}function assignColumnGetFormatterFunction(b,h,g,f){var a=evalWrapToggle(b);g.cells[0]=filterDisplayableGridCell(g.cells[0]);dojo.forEach(g.cells[0],function(l,m){if(l.businessOptions.businessType||l.businessOptions.type=="icon"||isCellForRuleStyling(l,f)||l.cellFormat!=null){l.get=formatBusinessOptionsData}if(a){l.formatter=null}else{l.formatter=NO_WRAP_FORMATTER}});h.cells[0]=filterDisplayableGridCell(h.cells[0]);dojo.forEach(h.cells[0],function(l,m){if(l.businessOptions.businessType||l.businessOptions.type=="icon"||isCellForRuleStyling(l,f)||l.cellFormat!=null){l.get=formatBusinessOptionsData}if(a){l.formatter=null}else{l.formatter=NO_WRAP_FORMATTER}})}function isCellForRuleStyling(a,b){var f=false;if(b.get(a.field)!=undefined){return true}return f}function persistColumnResize(f){console.debug("enetered persistColumnResize function");var a={action:"save",subject:GLOBAL_ADMIN_VAR,json:dojo.toJson(f.jsonContent)};var b=talkToServer("../../../LandingCustRequest",a);b.addCallback(function(h,g){if(h.status=="SUCCESS"){console.debug("persistColumnResize - successfully saved colum resize operation")}else{console.debug("persistColumnResize - A problem was encountered during save of column resize operation")}})}function evalWrapToggle(a){var b=true;dojo.forEach(a,function(f){if(f.property!=undefined&&f.property!=null&&f.property=="white-space"){if(f.value!=undefined&&f.value!=null&&f.value=="nowrap"){b=false}}});return b}function evalTableCellStyle(a){var b=new Array();var f=new Object();if(a!=undefined&&a!=null&&a==false){f.property="white-space";f.value="nowrap";b.push(f)}else{f.property="white-space";f.value="normal";b.push(f)}return b}function updateCheckedMenuItem(f,b){var a=dijit.byId(f);if(a!=undefined&&a!=null){a._setCheckedAttr(b)}}function setNewGridStructure(g,b){var a=custWidgetTableMap.get(b).viewId;var f=dijit.byId(b);if(f!=null){f.setStructure(g);connectColumnResizeListeners(dijit.byId(b),manageViewMap.get(a),custWidgetTableMap.get(b).originalBCType,manageViewMap.get(a).jsonContent.businessObjectType)}}function createSlaveGrid(masterGrid,submitObj){var slaveObject=new Object();var key=submitObj.idField;var jsonStore=new dojo.data.ItemFileWriteStore({identifier:key,label:key,data:{items:[]}});var qryData=new Object();var keySearchObj=eval("qryData."+key);keySearchObj="'*'";var selectedDataModel=new dojox.grid.data.DojoData(null,null,{query:qryData,store:jsonStore,clientSort:true});slaveObject.slaveGrid=new srmdojoc.grid.SPGrid({id:"selectedList_"+masterGrid.id,model:selectedDataModel,rowSelector:true});slaveObject.selectButton=new dijit.form.Button({label:"Select &gt;",id:"selectButton_"+masterGrid.id});slaveObject.deselectButton=new dijit.form.Button({label:"&lt; Deselect",id:"deselectButton_"+masterGrid.id,disabled:(slaveObject.slaveGrid.model.data.length>0)?false:true});slaveObject.submitButton=new dijit.form.Button({label:submitObj.title,id:"submitSelected_"+masterGrid.id,disabled:(slaveObject.slaveGrid.model.data.length>0)?false:true});return slaveObject}function artifactListSelector_copyGridStructure(f,g,b){if(f.model!=null){var a=simplifyGridStructure(f.structure,b);g.setStructure(a);dojo.forEach(g.views.views,function(l,h){dojo.connect(l.header.view,"update",this,dojo.hitch(this,function(m){m.model.requestRows()},g))})}}function simplifyGridStructure(b,g){var a=dojo.clone(b);var f=false;dojo.forEach(a,function(l){dojo.forEach(l.cells,function(o,m){var p=dojo.map(o,function(u){var q="string";if(u.businessOptions.datatype!=undefined&&u.businessOptions.datatype!="string"){q=u.businessOptions.datatype}var v=new Object();for(var s in u){if(s!="get"&&s!="businessOptions"&&s!="formatter"){v[s]=u[s]}}if(g==undefined){if(isGridColumnDisplayableAndQueriableData(u)){v.editor=dojox.grid.editors.Input;if(q=="date"){v.editor=srmdojoc.grid.editors.SRMDateTimeTextBox;v.constraint={datePattern:"dd-MMM-yyyy",timePattern:"h:mm:ss z a"};v.formatter=function(w){if(!w){return""}return dojo.date.locale.format(new Date(w),{datePattern:"dd-MMM-yyyy",timePattern:"h:mm:ss z a"})}}else{if(q=="day"){v.editor=srmdojoc.grid.editors.SRMDateTimeTextBox;v.constraint={datePattern:"dd-MMM-yyyy"};v.formatter=function(w){if(!w){return""}return dojo.date.locale.format(new Date(w),{datePattern:"dd-MMM-yyyy"})}}else{if(q=="boolean"){v.editor=dojox.grid.editors.ComboBox;v.options=["","true","false"]}else{if(q=="integer"||q=="bigDecimal"){v.editor=dojox.grid.editors.Dijit;v.editorClass="dijit.form.NumberTextBox"}}}}}v.headerStyles="background: #FFFFEE;"}f=true;return v});l.cells[m]=p})});console.debug(" ...... at Least One Field "+f);var h=a;if(!f&&g!=undefined){a[0].cells[0].push({field:g.idField,name:g.idField,width:"10"});h=a}return h}function artifactListSelector_manageSelected(masterGrid,slaveGrid,idField,inRow){if(masterGrid.model.getRow(inRow.index)==undefined){return}if(idExistInArray(slaveGrid.model.data,eval("masterGrid.model.getRow(inRow.index)."+idField),idField)){inRow.customClasses="rowHidden"}}function artifactListSelector_pushToSelected(a,g,f){if(a.model!=null&&a.model.rowsPerPage>0){var b=a.selection.getSelected();dojo.forEach(b,function(h,m){var o=a.model.data[h];var l=o;g.model.store.newItem(o.__dojo_data_item.i);var p=g.model.store;g.model.requestRows();g.model.store.save()});a.updateRowStyles();a.refresh();a.selection.clear()}}function artifactListSelector_removeFromSelected(a,f,b){if(a.model!=null&&a.model.rowsPerPage>0){f.removeSelectedRows();f.model.store.save();f.model.requestRows();a.refresh()}}function idExistInArray(arrayData,id,productField){var found=false;for(var i=0;i<arrayData.length;i++){if(eval("arrayData[i]."+productField)==id){found=true}}return found}function artifactListSelector_submit(slaveGrid,submitObj,artifactType){var keyArr=new Array();dojo.forEach(slaveGrid.model.data,function(item){var temp="item."+submitObj.idField;keyArr.push(eval(temp))});var result=null;var request={action:"execute",type:artifactType,name:submitObj.name,id:keyArr};dijit.byId("pleasewait").show();var xhr=talkToServer("../../../ActionRequest",request);return xhr.addCallback(function(data,ioArgs){if(dijit.byId("pleasewait").open){dijit.byId("pleasewait").hide()}if(data.succeeded==true){console.log("Submit was successful.")}else{alert("A problem was encountered during submit action")}artifactListSelector_submit_response(data,slaveGrid.model.data)})}function createArtifactListSelectorSlaveObjects(b,g){var f=custComponentListMap.get(g);var a=f.actions[0];var h=createSlaveGrid(b,a);return setArtifactListSelectorSlaveConnections(b,h,g)}function setArtifactListSelectorSlaveConnections(f,l,h){var g=custComponentListMap.get(h);var b=g.actions[0];dojo.connect(f,"setStructure",this,dojo.hitch(this,"artifactListSelector_copyGridStructure",f,l.slaveGrid,b));if(l.dojoConnectArray!=null&&l.dojoConnectArray!=undefined){dojo.forEach(l.dojoConnectArray,function(m){dojo.disconnect(m)})}dojo.connect(f,"onStyleRow",this,dojo.hitch(this,"artifactListSelector_manageSelected",f,l.slaveGrid,b.idField));var a=new Array();a.push(dojo.connect(l.selectButton,"onClick",this,dojo.hitch(this,"artifactListSelector_pushToSelected",f,l.slaveGrid)));a.push(dojo.connect(l.deselectButton,"onClick",this,dojo.hitch(this,"artifactListSelector_removeFromSelected",f,l.slaveGrid)));a.push(dojo.connect(l.submitButton,"onClick",this,dojo.hitch(this,"artifactListSelector_submit",l.slaveGrid,b,g.artifactType)));a.push(dojo.connect(l.slaveGrid.model,"requestRows",this,dojo.hitch(this,"artifactListSelector_evalButtonState",l)));l.dojoConnectArray=a;return l}function artifactListSelector_submit_response(b,a){console.debug("artifactListSelector_submit_response: "+b.succeeded+", "+b.message+", "+b.timestamp)}function artifactListSelector_evalButtonState(a){a.deselectButton.setAttribute("disabled",(a.slaveGrid.model.data.length)>0?false:true);a.submitButton.setAttribute("disabled",(a.slaveGrid.model.data.length)>0?false:true)}function updateAllImageAccordion(f,g,a){var b=f.getChildren();dojo.forEach(b,function(h,l){if(h.declaredClass=="srmdojoc.layout.ImageAccordion"){if(l==0){h._setReorderMoveUp(false)}else{h._setReorderMoveUp(true)}if(l+1==b.length){h._setReorderMoveDown(false)}else{h._setReorderMoveDown(true)}}})}function widgetReorderMoveUp(g){var m=g._getPanePosition();var l=g.getPreviousSibling();var o=g.getParent();o.removeChild(g);var p=getModelViewArray(g);var b=p.splice(m,1);var f=b[0];var a=l._getPanePosition();if(a<0){a=0}o.addChild(g,a);o.selectChild(g);p.splice(a,0,f);f.position=a+1;var h=p[a+1].position;p[a+1].position=h+1;saveReorderOperation(p)}function widgetReorderMoveDown(f){var m=f._getPanePosition();var h=f.getNextSibling();var o=f.getParent();o.removeChild(f);var p=getModelViewArray(f);var a=p.splice(m,1);var b=a[0];var l=h._getPanePosition();o.addChild(f,l+1);o.selectChild(f);p.splice(l+1,0,b);b.position=l+1+1;var g=p[l].position;p[l].position=g-1;saveReorderOperation(p)}function getModelViewArray(g){var a=g.childId;var f=custWidgetTableMap.get(a).modelReferenceId;var b=custModelMap.get(f);return b.content.contents}function saveReorderOperation(b){var a={action:"save",subject:GLOBAL_ADMIN_VAR,jsonArray:dojo.toJson(b)};var f=talkToServer("../../../LandingCustRequest",a);f.addCallback(function(h,g){if(h.status=="SUCCESS"){console.debug("Successful save of view reorder operation. ")}else{alert("A problem was encountered during save of the reorder operation.")}})}function getModelbyId(a){var b=null;if(custModelMap.get(a)!=null){b=custModelMap.get(a)}return b}function getWidgetSelectedPaneById(b){var f=null;var a=getModelbyId(b);if(a.content.selectedContentId!=null){f=a.content.selectedContentId}return f}function closeGridCellToolTipDialog(a){if(openDialogTimer!=null){clearTimeout(openDialogTimer)}dijit.hideTooltip(a.cellNode);dijit._masterTT._onDeck=null}function collateRuleSetMap(b,a){if(b.get(a.artifactType)!=undefined&&b.get(a.artifactType)!=null){var f=b.get(a.artifactType);f.push(a)}else{var f=new Array();f.push(a);b.put(a.artifactType,f)}}function arrangeRuleSetRule(a){var b=null;if(custRuleSetMap.get(a.masterId)!=undefined){b=custRuleSetMap.get(a.masterId);b.put(a.id,a)}else{b=new Map();b.put(a.id,a);custRuleSetMap.put(a.masterId,b)}}function evaluateCustColumnsToStyle(g,a){var f=new Map();var b;dojo.forEach(g,function(h){b=h;if(typeof(h)!=undefined&&typeof(h)=="object"&&h.styleRuleSetId!=undefined){b=h.styleRuleSetId}evalViewCustColumnsToStyle(b,f);addRuleSetToViewEntry(b,a)});return f}function evalViewCustColumnsToStyle(a,b){var h;var g;if(custRSColumnsToStyle.get(a)!=undefined){var f=custRSColumnsToStyle.get(a);dojo.forEach(f.keySet(),function(l){if(b.get(l)!=undefined){h=b.get(l);g=f.get(l);g.putAll(h)}else{g=f.get(l);b.put(l,dojo.clone(g))}})}}function addRuleSetToViewEntry(b,a){var f=null;if(custRuleSetToView.get(b)!=undefined&&custRuleSetToView.get(b)!=null){f=custRuleSetToView.get(b);var g=dojo.filter(f,function(h){return h!=a});g.push(a);custRuleSetToView.put(b,g)}else{f=new Array();f.push(a);custRuleSetToView.put(b,f)}}function removeRuleSetToViewEntry(b,a){var f=null;if(custRuleSetToView.get(b)!=undefined&&custRuleSetToView.get(b)!=null){f=custRuleSetToView.get(b);var g=dojo.filter(f,function(h){return h!=a});custRuleSetToView.put(b,g)}}function evalGlobalRuleSetMap(a){dojo.forEach(a,function(f){var b=f;if(typeof(f)!=undefined&&typeof(f)=="object"&&f.styleRuleSetId!=undefined){b=f.styleRuleSetId}if(custRSColumnsToStyle.get(b)==undefined||custRSColumnsToStyle.get(b)==null){updateCustRS_CTS(b)}})}function updateCustRS_CTS(b){var a=custRuleSetMap.get(b);if(a!=undefined&&a!=null){var f=a.valSet().sort(sortStyleRules);var g=new Map();dojo.forEach(f,function(h){if(h.style!=undefined){dojo.forEach(dojo.fromJson(h.style),function(o){if(g.get(o.column)!=undefined){var l=g.get(o.column);l.put(h.id,o.style)}else{var m=new Map();m.put(h.id,o.style);g.put(o.column,m)}})}});custRSColumnsToStyle.put(b,dojo.clone(g))}}function sortStyleRules(b,a){return b.position-a.position}function filterAllAppliedNonUbiRuleSets(a){var b=a;b=dojo.filter(a,function(f){return(f.styleRuleSetAssociationId!=undefined&&f.styleRuleSetAssociationId!=null)});return b}function getWidgetMultiAdminFunc(){var a=new Array();var f=new Object();f.title="Manage Views...";f.iconClass="widgetViewEditIcon";f.adminFunc="adminWidget";a.push(f);var b=new Object();b.title="Manage Color Preferences...";b.adminFunc="adminRuleSetStyles";a.push(b);return a}function readOtherInfo(f){if(f.i.settingList!=undefined&&f.i.settingList[0]!=undefined){var a=f.i.settingList[0].id;var b=custComponentListMap.get(a);applicationSettingsObj=b;evalNoOfFixedColumnThreshold()}}function persistApplicationSettings(){dojo.xhrPost({url:"../../../LandingCustRequest",content:{action:"save",subject:GLOBAL_ADMIN_VAR,json:dojo.toJson(applicationSettingsObj)},handleAs:"json",load:function(a){if(a.status=="SUCCESS"){custComponentListMap.put(a.id,a.data);console.debug("persistApplicationSettings - successfully saved application settings operation")}else{console.debug("persistApplicationSettings - A problem was encountered during save of application settings operation")}},error:function(a){console.error("Error Encountered in persistApplicationSettings: ",a)}})}function redirectNav(x,z){var f=null;if(dijit.byId("srnav")!=undefined){var w=dijit.byId("srnav").getValue();if(w!=undefined&&w!=false){f=dijit.byId("srnav").getValue()}}if(dijit.byId("srview")!=undefined){var v=dijit.byId("srview").getValue();if(v!=undefined&&v!=false){f=dijit.byId("srview").getValue()}}if(dijit.byId("mossp_srview")!=undefined){var s=dijit.byId("mossp_srview").getValue();if(s!=undefined&&s!=false){f=dijit.byId("mossp_srview").getValue()}}var J=true;if(f!=undefined&&f!=null&&(f=="srview"||f=="mossp_srview")){J=false}var l=dojo.queryToObject(x.substring(0));var a=dijit.byId(l.gridId);var G=(a.model.query.refinedQuery!=undefined)?dojo.trim(a.model.query.refinedQuery):undefined;var H=a.model.data;var b=H.length;if(J&&okToRenderInSRNAV(a,l.rowIndex)){J=true}else{J=false}var B=evalModelSortAttribute(a.model.sortFields);var m=10;var p=1;var A=(m+m+1);var q=Math.max(0,dojo.number.parse(l.rowIndex)-m);var o=dojo.number.parse(l.rowIndex)+m;var g=H.length;var F=o;if(o>(H.length-1)){F=H.length-1}var D=(o-q)+1;if(a.model.count<=H.length){D=(F-q)+1}if(D<p){D=p}if(D>A){D=A}var y=false;if(a.model.count==1){y=true}var K="&startIncludedRowIndex="+q+"&calcCount="+D+"&endOfSet="+((y)?"Y":"N");var I="";if(B!=undefined&&B!=null&&dojo.trim(B)!=""){I="&tempGridSort="+encodeURIComponent(B)}var u="";if(G!=undefined&&G!=null&&dojo.trim(G)!=""){u="&refinedQuery="+encodeURIComponent(G)}var h=x+K+I+u;var C=h.length;if((h.length)>MAX_SRLIST_LENGTH){}else{x+="&startIncludedRowIndex="+q+"&calcCount="+D+"&endOfSet="+((y)?"Y":"N");if(B!=undefined&&B!=null&&dojo.trim(B)!=""){x+="&tempGridSort="+encodeURIComponent(B)}if(G!=undefined&&G!=null&&dojo.trim(G)!=""){x+="&refinedQuery="+encodeURIComponent(G)}}var E="";if(J){E="../srview/SRTechnical.jspx?"+x}else{if(f!=undefined&&f!=null&&global_mossp_srview_keyText!=undefined&&(f==="mossp_srview"&&global_isMosSPViewerDefaultViewer===false||f==="srview"&&global_isMosSPViewerDefaultViewer===true)){E=evaluateSRMContextTextURL(linkHrefMap,global_mossp_srview_keyText,l.srNumber);if(E==undefined){E="../srview/SRView.jspx?"+x}}else{E="../srview/SRView.jspx?"+x}}console.log("EndOfSet: "+y+"\nParam length: "+x.length+"\nParam : "+x+"\nAssessed URL length: "+E.length+"\nAssessedURL : "+E);if(z!=undefined&&z){window.open(E)}else{self.location.href=E}}function okToRenderInSRNAV(g,h){var o=true;var m=g.model.getRow(h)[SR_NUMBER_FIELD];var f=g.model.getRow(h)[SR_SUBTYPE_FIELD];var b=g.model.getRow(h);var l=g.model.getRow(h)[SR_OWNER_FIELD];if(f!=undefined&&f!=null&&dojo.string.trim(f)!=""){if(!isUser_SVSR_Capable){o=false;if(l!=undefined&&l!=null&&(dojo.string.trim(l)).toLowerCase()==CURRENT_USER.toLowerCase()){o=true}}}return o}function srContextMenu(b,f){var a;if(!b){var b=window.event}if(b.target){a=b.target}else{if(b.srcElement){a=b.srcElement}}if(a.nodeType==3){a=a.parentNode}globalContextMenu.queryIn=f;globalContextMenu._openMyself(b)}function createContextMenu(){globalContextMenu=new dijit.Menu({});globalContextMenu.addChild(new dijit.MenuItem({label:"Open Link in Same Tab/Window",onClick:function(b){redirectNav(this.getParent().queryIn,false)}}));globalContextMenu.addChild(new dijit.MenuItem({label:"Open Link in New Tab/Window",onClick:function(b){redirectNav(this.getParent().queryIn,true)}}));globalContextMenu.addChild(new dijit.MenuItem({label:"Preview SR",onClick:function(b){previewSR(this.getParent().queryIn)}}));globalContextMenu.addChild(new dijit.MenuItem({label:"Tag",onClick:function(b){tagMe(this.getParent().queryIn)}}));globalContextMenu.addChild(new dijit.MenuSeparator());var a=new srmdojoc.CheckedMenuItem({label:"Left Click to Always Open in New Tab/Window",checked:applicationSettingsObj.srLeftClickOpenNew,onChange:function(b){applicationSettingsObj.srLeftClickOpenNew=b;persistApplicationSettings()}});globalContextMenu.addChild(a);globalContextMenu.startup()}function getCust_SRLeftClickOpen(){return applicationSettingsObj.srLeftClickOpenNew}function previewSR(h){var f=dojo.queryToObject(h.substring(0));var g=dijit.byId(f.gridId);var a=g.model.getRow(f.rowIndex);var b=g.model.getRow(f.rowIndex);if(previewDialog==null){previewDialog=new dijit.Dialog({title:"Preview SR Header Info",style:"width: 98%;max-height:99%;overflow:auto;z-index:2;"});previewDialog._size=function(){return true}}openPreviewSRPane(previewDialog,b,h)}function tagMe(l){var f=dojo.queryToObject(l.substring(0));var g=dijit.byId(f.gridId);var a=getCustManageViewDetailsObj(f.gridId);var m=a.jsonContent.artifactType;var b=g.model.getRow(f.rowIndex);var h=b[SR_NUMBER_FIELD];DashboardTagging.openTagDialog(h,m,GLOBAL_ADMIN_VAR,b[SR_SUMMARY_FIELD],g.id)}function openPreviewSRPane(b,a,f){if(previewSRTemplate==null){dojo.xhrGet({url:"../srview/maximizedHeaderPreviewTemplate.html"+getVersion(),load:function(g){previewSRTemplate=g;processPreviewSRPane(b,previewSRTemplate,a,f)},error:function(g){console.debug("Failed to load Preview SR Template")},timeout:120000})}else{processPreviewSRPane(b,previewSRTemplate,a,f)}}function processPreviewSRPane(p,u,w,b){var v=document.createElement("table");var h=document.createElement("tbody");v.appendChild(h);var l=document.createElement("tr");h.appendChild(l);var q=document.createElement("td");var s=new dijit.form.Button({label:"Cancel"});q.appendChild(s.domNode);dojo.connect(s,"onClick",function(){p.hide()});l.appendChild(q);var g=document.createElement("tr");h.appendChild(g);var a=document.createElement("td");a.setAttribute("width","100%");a.innerHTML=u;g.appendChild(a);var f=document.createElement("tr");h.appendChild(f);var o=document.createElement("td");var m=new dijit.form.Button({label:"Cancel"});dojo.connect(m,"onClick",function(){p.hide()});o.appendChild(m.domNode);f.appendChild(o);p.setContent(v);Dashboard.populateSRHeader(w,b);p.show()}(function(){populateSRHeaderData=function(b,h){function f(l,m){var o=SRMUnescapeHTML(m,"");if(dijit.byId(l)){dijit.byId(l).setValue(o)}else{if(dojo.byId(l)){dojo.byId(l).value=o}}}var a="";f("csi",b.CSI);f("srType",b.SRType);f("srClass",b.serviceRequestType);f("serialNum",b.serialNumber);if(dijit.byId("partnerFlag")){if(b.partnerFlag!=undefined&&b.partnerFlag=="true"){dijit.byId("partnerFlag").setAttribute("checked",true)}else{dijit.byId("partnerFlag").setAttribute("checked",false)}}if(dijit.byId("odFlag")){if(b.ODFlag!=undefined&&b.ODFlag=="true"){dijit.byId("odFlag").setAttribute("checked",true)}else{dijit.byId("odFlag").setAttribute("checked",false)}}f("summary",b.summary);f("customerRefId",b.customerRefNumber);f("svcLvl",b.levelofService);if(dijit.byId("svcLvlFlag")){if(b.serviceLevelAgreementFlag!=undefined&&b.serviceLevelAgreementFlag=="true"){dijit.byId("svcLvlFlag").setAttribute("checked",true)}else{dijit.byId("svcLvlFlag").setAttribute("checked",false)}}f("SRProductClass",b.SRProductClass);f("SRProductSubscription",b.SRProductSubscriptionName);f("classification",b.topAccntClass);if(dijit.byId("HIAcknowledge")){if(b.SRHIFlag!=undefined&&b.SRHIFlag=="true"){dijit.byId("HIAcknowledge").setAttribute("checked",true)}else{dijit.byId("HIAcknowledge").setAttribute("checked",false)}}if(dijit.byId("SRTranslation")){if(b.SRTranslation==="true"){dijit.byId("SRTranslation").setAttribute("checked",true);if(dojo.byId("SRHEADERsSRTranslationRow")){dojo.style(dojo.byId("SRHEADERsSRTranslationRow"),"display","")}}}f("ceCriticalDate",b.CETargetDate);f("ceAccountManager",b.CEAccountManager);f("ceEngagementTeam",b.CEEngagementTeam);f("ceEngagementId",b.CEEngagementId);f("ceEngagementStatus",b.CEEngagementStatus);f("ceTemperature",b.CETemperature);f("collaborationType",b.collaborationType);f("responseDue",b.commitTime);f("responseDone",b.firstResponseDate);dijit.byId("nextResponse").setValue(b.nextResponseDue);f("dateClosed",b.closedDate);f("dateReopened",b.dateReopened);if(dijit.byId("surveyNotifDate")){dijit.byId("surveyNotifDate").setValue(b.surveyNotificationDate)}if(dijit.byId("solnOfferedDate")){dijit.byId("solnOfferedDate").setValue(b.solutionOfferedDate)}if(dijit.byId("solnImplDate")){dijit.byId("solnImplDate").setValue(b.solutionImpDate)}f("custErrorMessage",b.SRErrorMessage);f("adjustedPriorityScore",b.adjustedPriorityScore);if(dijit.byId("adjustedPriorityScore")){if(dojo.byId("tpslink")){dojo.byId("tpslink").style.visibility="visible"}}if(dijit.byId("initSolnOfferedDate")){dijit.byId("initSolnOfferedDate").setValue(b.initialSolutionOfferedDate)}f("migratedSr",b.migratedSR);f("updatesFromCustomer",b.updatesfromCustomer);f("problemSolnOdmTags",b.problemSolutionODMTags);f("consultativeOdmTags",b.consultativeODMTags);f("assignmentType",b.assignmentType);f("assignmentStatus",b.assignmentStatus);f("transferCounter",b.transferCount);if(dijit.byId("odmComplianceFlag")){if(b.ODMCompliantFlag!=undefined&&b.ODMCompliantFlag=="true"){dijit.byId("odmComplianceFlag").setAttribute("checked",true)}else{dijit.byId("odmComplianceFlag").setAttribute("checked",false)}}if(dijit.byId("platformSpecificFlag")){if(b.SRPlatformSpecific!=undefined&&b.SRPlatformSpecific=="true"){dijit.byId("platformSpecificFlag").setAttribute("checked",true)}else{dijit.byId("platformSpecificFlag").setAttribute("checked",false)}}f("description",b.description.unescapeHtml());f("srNumber",b.SRNumber);var g=dojo.byId("srNumberLinkUI");if(g!=undefined&&h!=undefined){dojo.connect(g,"onclick",this,dojo.hitch(null,"redirectNav",h,getCust_SRLeftClickOpen()))}f("created",b.created);f("submitDate",b.SRSubmitDate);if(dijit.byId("severity")){dijit.byId("severity").setValue(b.severity)}if(dijit.byId("outageType")){dijit.byId("outageType").setValue(b.outageType)}f("original24x7",b.requestFullSupportFlg);if(b.requestFullSupportFlg=="true"&&dijit.byId("fld24x7")){dijit.byId("fld24x7").setAttribute("checked",true)}if(dijit.byId("status")){f("status",b.status)}if(dijit.byId("substatus")){f("substatus",b["sub-Status"])}f("empEmail",b.owner);f("groupDesc",b.ownerGroup);f("serviceTeamDesc",b.serviceTeam);f("escalationStatus",b.esclStatus);f("escalationOwner",b.esclOwner);f("escalationLvl",b.escalationLevel);f("srsource",b.source);f("languageDescription",b.SRLanguage);if(dijit.byId("rootCause")){f("rootCause",b.SRRootcause)}if(dijit.byId("reasonCode")){f("reasonCode",b.resolutionCode)}f("accountName",b.account);f("altAccountName",b.altAccountName);f("accountIntegId",b.accountIntegId);f("accountId",b.accountId);f("accountNumber",b.accountNumber);f("contactLastName",b.contactLastName);f("contactId",b.contactId);f("contactFirstName",b.contactFirstName);f("contactPhone",b.SRContactPhone);f("contactEmail",b.SRContactEmail);f("contactTimeZoneX",b.contactTimeZone);f("alternateContactLastName",b.alternateContactLastName);f("alternateContactFirstName",b.alternateContactFirstName);f("alternateContactPhone",b.alternateContactBusinessPhone);f("alternateContactId",b.alternateContactId);f("alternateContactEmail",b.alternateContactEmail);f("alternateContactTimeZone",b.alternateContactTimeZone);f("country",b.primaryContactCountry);f("contactMethod",b.SRContactMethod);f("knownIssue",b.knownIssue);f("lastUpdated",b.updated);f("lastUpdatedBy",b.lastUpdatedByName);f("createdBy",b.createdByName);f("FSSR",b.fieldSvcSR);f("SRIntegrationStatus",b.SRIntegrationStatus);f("SRIntegrationMessage",b.SRIntegrationErrorMessage);f("SRIntegrationDateTime",b.SRIntegrationDate);if(dijit.byId("SRHWFlg")){dijit.byId("SRHWFlg").setAttribute("checked",(b.SRHardwareSoftware!=undefined&&b.SRHardwareSoftware=="Hardware")?true:false)}f("HWAddrId",b.HWAddrId);f("HWCity",b.HWCity);f("HWProvince",b.HWProvince);f("HWCounty",b.HWCounty);f("HWCountry",b.HWCountry);f("HWState",b.HWState);f("HWPCode",b.HWPostalCode);f("HWDesc",b.HWDescr);f("HWHost",b.HWHostname);f("HWAddr1",b.HWStreetAddress);f("HWAddr2",b.HWStreetAddress2);f("HWTZ",b.HWTimeZone);if(dijit.byId("HWMC")){dijit.byId("HWMC").setAttribute("checked",((b.missionCriticalFlag!=undefined&&b.missionCriticalFlag=="true"))?true:false)}f("refCSI",b.indirectCSI);f("indirectContAcct",b.indirectContactAccount);f("indirectCustV",b.indirectCustomerVisibility);f("indirectContFirst",b.indirectContactFirstName);f("indirectContLast",b.indirectContactLastName);f("indirectContPhone",b.indirectContactPhone);f("indirectContEmail",b.indirectContactEmail);f("indirectContTZ",b.indirectContactTimeZone);f("projectName",b.projectName);f("milestone",b.projectMilestone);f("milestoneDate",b.projectMilestoneDate);f("configurationId",b.configurationId);f("configLevel",b.SRMetal);f("plaType",b.PLAType);f("unset24x7ReasonCode",b.requestFullSupportReasonCode);f("outageStatus",b.outageStatus);f("hostId",b.hostId);f("databasePlatformDesc",b.databasePlatform);f("databasePlatformVersionDesc",b.databasePlatformVersion);f("cirl",b.CIRL);f("nonCCRCIID",b.nonCCRCIID);f("ciType",b.nonCCRCIType);if("true"===b.isCollaborationSR){f("cmdbConfig",b.cmdbConfig)}f("subType",b.SRSubType);f("categoryDescription",b.category);f("productLine",b.productLine);f("productDescription",b.product);f("productClass",b.productClass);f("productClassification",b.productClassification);f("hasProdPlatform",b.hasProdPlatform);f("productVersion",b.productVersion2);f("componentDescription",b.component);f("subcomponentDescription",b.subComponent2);f("toolsVersionVersion",b.toolsVersion);f("releaseStatus",b.releaseStatus);f("platformDescription",b.platform);f("platformVersionDescription",b.platformVersion);f("databaseDescription",b.databaseProduct);f("databaseVersion",b.databaseVersion);f("maximizedID",b.SRId);f("subCategory",b.subCategory);f("ASRDistributionListEmail",b.ASRDistributionListEmail);f("SROutageId",b.SROutageId);f("ATLastFlowStatus",b.ATLastFlowStatus)};window.Dashboard={populateSRHeader:populateSRHeaderData}}());function createRefineSlaveGrid(masterGrid){var slaveObject=new Object();var qryData=new Object();var keySearchObj=eval("qryData.key");keySearchObj="'*'";var jsonStore=new dojo.data.ItemFileWriteStore({identifier:"key",label:"key",data:{items:[]}});var selectedDataModel=new dojox.grid.data.DojoData(null,null,{query:qryData,store:jsonStore});slaveObject.slaveGrid=new srmdojoc.grid.SPGrid({id:getRefineGridId(masterGrid.id),model:selectedDataModel,rowSelector:true,singleClickEdit:true,canSort:function(e){return true}});dojo.connect(masterGrid,"setStructure",this,dojo.hitch(this,"artifactListSelector_copyGridStructure",masterGrid,slaveObject.slaveGrid,undefined));return slaveObject}function saveFieldPropertiesByArtifact(b){if(custArtifactPropsMap.get(b.artifactType)==undefined){var a=new Map();dojo.forEach(b.edit.columns,function(g,f){a.put(g.field,g)});custArtifactPropsMap.put(b.artifactType,a)}}function getArtifactType(b){var a=getCustManageViewDetailsObj(b);var f=a.jsonContent.artifactType;return f}(function(){viewConfiguration=function(h,b){var g=dijit.byId(b);var a=g.model.getRow(h);var f={sr_number:a[SR_NUMBER_FIELD]};mos.viewConfigInPopup(a[SR_CONFIG_ID],null,null,f)};window.DashboardViewConfig={viewConfig:viewConfiguration}}());function refineSlaveGridResetField(f,b){b.grid.edit.apply();var a=b.cell.field;b.grid.model.store.fetch({onComplete:function(q,h){if(q.length>0){var u=q[0];var l=b.grid.model.store.getValue(u,a);var g=getCustManageViewDetailsObj(f);var s=g.jsonContent.artifactType;var m=custArtifactPropsMap.get(s);var o=m.get(a);var p=getGridFieldDefaultValue(o);b.grid.model.store.setValue(u,a,p);b.grid.model.store.save();b.grid.model.requestRows()}}})}function getRefineGridId(a){return"refineSearch_"+a}var globalRefineSlaveContextMenu=undefined;var REFINE_SLAVE_MENUITEM1="refineSlaveMenuItem1";function createRefineSlaveContextMenu(a,b){var f=new dijit.Menu({});f.addChild(new dijit.MenuItem({label:getRefineSlaveMenuItem1_label(a,b),name:REFINE_SLAVE_MENUITEM1,onClick:function(g){refineSlaveGridResetField(this.getParent().masterGridId,this.getParent().originalContextMenuEvent)}}));f.addChild(new dijit.MenuItem({label:"Execute Simple Refine Query",onClick:function(g){execRefine(getRefineGridId(this.getParent().masterGridId),this.getParent().masterGridId)}}));f.addChild(new dijit.MenuItem({label:"Reset Simple Refine Criteria (all fields)",onClick:function(g){resetRefine(getRefineGridId(this.getParent().masterGridId),this.getParent().masterGridId)}}));f.addChild(new dijit.MenuItem({label:"Cancel Refine",onClick:function(g){closeRefine(getRefineGridId(this.getParent().masterGridId),this.getParent().masterGridId)}}));f.startup();return f}function openRefineSlaveContextMenu(b,l){var g;if(!l){var l=window.event}if(l.target){g=l.target}else{if(l.srcElement){g=l.srcElement}}if(g.nodeType==3){g=g.parentNode}var a=l.cell.name;var h=l.cell.field;if(globalRefineSlaveContextMenu==undefined){globalRefineSlaveContextMenu=createRefineSlaveContextMenu(a,h)}else{var f=globalRefineSlaveContextMenu.getChildren();dojo.forEach(f,function(m,o){if(m!=undefined&&m.name==REFINE_SLAVE_MENUITEM1){m.setLabel(getRefineSlaveMenuItem1_label(a,h))}})}globalRefineSlaveContextMenu.masterGridId=b;globalRefineSlaveContextMenu.originalContextMenuEvent=l;globalRefineSlaveContextMenu._openMyself(l)}function getRefineSlaveMenuItem1_label(a,f){var b="Reset this field to default";if(a!=undefined&&f!=undefined){b="Reset "+a+" ("+f+")"}return b}function isGridColumnDisplayableAndQueriableData(a){var b=false;if(a!=undefined&&a.businessOptions!=undefined&&a.businessOptions.type=="data"&&a.businessOptions.queriable==true&&a.businessOptions.displayable==true){b=true}return b}function evalModelSortAttribute(f){var a="";if(f!=undefined&&f!=null){var b="";dojo.forEach(f,function(h){var g="";if(h.attribute!=undefined&&dojo.string.trim(h.attribute)!=""&&h.descending!=undefined){if(h.descending==true){g="-"}else{g="+"}a+=b+g+dojo.string.trim(h.attribute);b=","}})}return a}var DashboardTagging=null;(function(){var a="^[a-zA-Z_0-9]*$";getMyExistingArtifactTypeTermsXHR=function(h,m){var b="../../../srm/servlet/JSONRequest";var f={service:"/oip/TagRequest",action:"getArtifactTypeTermsForArtifactType",user:h,artifactType:m};var g={json:dojo.toJson(f)};var l=genericTalkToServer(b,g,"json",true);return l};tagArtifactXHR=function(m,b,p,h){var f="../../../srm/servlet/JSONRequest";var g={service:"/oip/TagRequest",action:"updateTag",user:b,tag:m,artifactId:p,artifactType:h};var l={json:dojo.toJson(g)};var o=genericTalkToServer(f,l,"json",true);return o};appendToTextbox=function(b,f){if(dojo.string.trim(f.getValue())==""){f.setValue(b)}else{f.setValue(b+" "+f.getValue())}};openTagDialog=function(f,z,p,x,m){tagArtifact=function(A){var B=tagArtifactXHR(A,p,f,z);B.addCallback(function(D,C){if(D.status=="SUCCESS"){getMyExistingTags();getMyExistingArtifactTypeTerms();g.setValue("");g.reset()}else{alert("Problem encountered at tagArtifact function")}});B.addErrback(function(D,C){alert("Problem encountered at tagArtifact function");console.debug("Problem encountered at tagArtifact function")})};deleteTag=function(D){var A="../../../srm/servlet/JSONRequest";var B={service:"/oip/TagRequest",action:"deleteTag",user:p,tag:D,artifactType:z,artifactId:f};var C={json:dojo.toJson(B)};var E=genericTalkToServer(A,C,"json",true);E.addCallback(function(G,F){if(G.status=="SUCCESS"){getMyExistingTags()}else{alert("Problem encountered at deleteTag function")}});E.addErrback(function(G,F){alert("Problem encountered at deleteTag function");console.debug("Problem encountered at deleteTag function")})};getMyExistingArtifactTypeTerms=function(){if(b.domNode.style.display=="none"){return}var A=document.createDocumentFragment();var C="<span>Loading Terms....</span>";b.setContent(C);var B=getMyExistingArtifactTypeTermsXHR(p,z);B.addCallback(function(I,F){if(I.status=="SUCCESS"){var E=I.data.artifactTypeTerms;var H=null;var D=document.createElement("ul");dojo.style(D,{display:"block",padding:"0pt",margin:"0pt"});A.appendChild(D);if(E.length>0){H=document.createElement("span");H.innerHTML="Click tag to select : "}else{H=document.createElement("span");H.innerHTML="No Existing tags"}var G=document.createElement("li");G.appendChild(H);dojo.style(G,{display:"inline",padding:"0px"});D.appendChild(G);E.sort(sort_by("tag",false));dojo.forEach(E,function(Q,K){var N=K%2;var M="spTermEven";if(N>0){M="spTermOdd"}var P=document.createElement("li");dojo.style(P,{display:"inline"});var L=document.createElement("span");dojo.style(L,{"vertical-align":"middle","white-space":"nowrap"});var J=document.createElement("A");dojo.attr(J,{title:"add "+Q.tag+" tag",name:Q.tag,style:"display:inline; vertical-align:middle; border: 1px none transparent;"});J.innerHTML=Q.tag;dojo.addClass(J,M);J.onmouseout=function(){this.style.border="1px none transparent"};J.onmouseover=function(){this.style.border="1px solid #585858"};J.onclick=function(){tagArtifact(this.name)};P.appendChild(L);L.appendChild(J);var O=document.createElement("img");dojo.attr(O,{src:"../../../common/images/blank.gif",style:"vertical-align:middle",width:"5"});P.appendChild(O);D.appendChild(P)});b.setContent(A)}else{alert("Problem encountered at getMyExistingArtifactTypeTerms function")}});B.addErrback(function(E,D){alert("Problem encountered at getMyExistingTags function");console.debug("Problem encountered at getMyExistingArtifactTypeTerms function")})};getMyExistingTags=function(){var B="../../../srm/servlet/JSONRequest";var C={service:"/oip/TagRequest",action:"getTagsForArtifact",user:p,artifactType:z,artifactId:f};var D={json:dojo.toJson(C)};var F="<span>Loading Existing Tags....</span>";u.setContent(F);var A=document.createDocumentFragment();var E=genericTalkToServer(B,D,"json",true);E.addCallback(function(K,H){hidePleaseWaitDialog();if(K.status=="SUCCESS"){var M=K.data.tags;var L=document.createElement("ul");dojo.style(L,{display:"block",padding:"0pt",margin:"0pt"});A.appendChild(L);var G="No Tags";if(M.length>0){G="Tags: "}var J=document.createElement("span");J.innerHTML=G;var I=document.createElement("li");I.appendChild(J);dojo.style(J,{"vertical-align":"middle"});dojo.style(I,{display:"inline",padding:"0px"});L.appendChild(I);M.sort(sort_by("tag",false));dojo.forEach(M,function(N,P){var U=document.createElement("li");dojo.style(U,{display:"inline",style:"vertical-align:middle"});L.appendChild(U);var Q=document.createElement("span");var O=document.createElement("A");dojo.attr(O,{title:N.tag,name:N.tag});dojo.style(O,{display:"inline","vertical-align":"middle",border:"1px none transparent"});O.innerHTML=N.tag;var T=document.createElement("A");dojo.attr(T,{name:"delete "+N.tag+" tag",title:"delete "+N.tag+" tag"});dojo.style(T,{display:"inline","vertical-align":"middle",border:"1px none transparent"});if(dojo.isIE>0){dojo.style(O,{position:"relative",top:"-4"})}T.onmouseout=function(){this.style.border="1px none transparent"};T.onmouseover=function(){this.style.border="1px solid #585858"};var R=document.createElement("img");dojo.attr(R,{src:"../images/remove.gif",style:"vertical-align:middle;"});R.onclick=function(){deleteTag(N.tag)};T.appendChild(R);Q.appendChild(O);Q.appendChild(T);U.appendChild(Q);var S=document.createElement("img");dojo.attr(S,{src:"../../../common/images/blank.gif",style:"vertical-align:middle",width:"5"});U.appendChild(S);dojo.attr(Q,{style:"white-space:nowrap;"})});u.setContent(A)}else{alert("Problem encountered at getMyExistingTags function")}});E.addErrback(function(H,G){hidePleaseWaitDialog();alert("Problem encountered at getMyExistingTags function");console.debug("Error encountered in createRuleSetAssociation - "+H.status)})};validateSPDialogWidget=function(A){var B=false;B=A.validate(false);if(!B){A.state="Error";A._setStateClass()}return B};appendSpace=function(B){var C=document.createElement("tr");var D=document.createElement("td");C.appendChild(D);var A=document.createElement("div");dojo.attr(A,{height:"15px"});dojo.style(A,{visibility:"hidden"});D.appendChild(A);A.innerHTML="1";B.appendChild(C)};var h=document.createElement("div");h.setAttribute("style","display: none;");var l=new dijit.form.Button({label:"Close",name:"Close",onClick:function(){v.hide()}});h.appendChild(l.domNode);var y=document.createElement("div");dojo.attr(y,{height:"25px"});dojo.style(y,{visibility:"hidden"});h.appendChild(y);y.innerHTML="1";var o=document.createElement("div");var u=new dijit.layout.ContentPane({name:"existingTagsCP",title:"Existing Tags",style:"width:100%"});o.appendChild(u.domNode);h.appendChild(o);getMyExistingTags();var s=document.createElement("div");var g=new dijit.form.ValidationTextBox({name:"tag",required:true,regExp:a,style:"width:85%",invalidMessage:"Please enter a valid tag. Use alphanumeric characters only. "});s.appendChild(g.domNode);var q=new dijit.form.Button({label:"Add",name:"Add",style:"vertical-align:top",onClick:function(){var A=validateSPDialogWidget(g);if(A){tagArtifact(g.getValue())}return false}});s.appendChild(q.domNode);h.appendChild(s);var w=document.createElement("div");var b=new dijit.layout.ContentPane({name:"existingTermsCP",style:"width:200px;display:inline;"});getMyExistingArtifactTypeTerms();h.appendChild(w);w.appendChild(b.domNode);var v=new dijit.Dialog({refocus:true,title:"Tag "+z+" "+f+" "+x,style:"width:50%;height:auto"},h);connectHandle3=dojo.connect(v,"_onSubmit",this,dojo.hitch(this,"cleanupWidget",v,connectHandle3,g.domNode));connectHandle4=dojo.connect(v,"onCancel",this,dojo.hitch(this,"cleanupWidget",v,connectHandle4,g.domNode));v.startup;setTimeout(function(){v.show()},"0")};window.DashboardTagging={openTagDialog:openTagDialog,getMyExistingArtifactTypeTermsXHR:getMyExistingArtifactTypeTermsXHR,tagArtifactXHR:tagArtifactXHR,validTagRegExp:a}}());function CustTableDetails(f,a,b){this.uuid=f;this.viewId=a;this.modelReferenceId=b;this.containerId=null;this.containerContentId=null;this.containerPosition=null;this.originalBCType=null;this.originalContentId=null;this.advancedRefineQuery=null}var connectHandle=null;var connectHandle2=null;var requestForRefreshUponCancel=false;function createAccordionPaneMenu(a,f,g){var b=createDropDownButton(a,f,g);if(g!=null&&g==true){dijit.byId(a+"_editMenuItem").setDisabled(true);dijit.byId(a+"_saveAsMenuItem").setDisabled(true);dijit.byId(a+"_saveMenuItem").setDisabled(true)}return b}function createDropDownButton(q,l,f){var v=custWidgetTableMap.get(q).viewId;var u=custComponentListMap.get(v).edit.listBCType;var o=new dijit.Menu({style:"display: none;"});if(f!=null&&f==true){destroyDijitWidget(q+"_createMenuItem");var h=new dijit.MenuItem({label:"Create view...",onClick:function(w){menuCreate(q)},id:q+"_createMenuItem"});o.addChild(h);o.addChild(new dijit.MenuSeparator());destroyDijitWidget(q+"_editMenuItem");var p=new dijit.MenuItem({label:"Edit view...",onClick:function(w){menuEdit(q)},id:q+"_editMenuItem"});o.addChild(p);destroyDijitWidget(q+"_saveAsMenuItem");var m=new dijit.MenuItem({label:"Save view as...",onClick:function(w){menuSaveAs(q)},id:q+"_saveAsMenuItem"});o.addChild(m);destroyDijitWidget(q+"_saveMenuItem");var g=new dijit.MenuItem({label:"Save view...",iconClass:"dijitEditorIcon dijitEditorIconSave",onClick:function(w){menuSave(q)},id:q+"_saveMenuItem"});o.addChild(g);o.addChild(new dijit.MenuSeparator())}var b=new dijit.MenuItem({label:"Execute saved view...",onClick:function(w){menuExecute(q,u)}});o.addChild(b);if(f!=null&&f==true){destroyDijitWidget(q+"_deleteMenuItem");var a=new dijit.MenuItem({label:"Delete saved view ...",onClick:function(w){menuDelete(q,u)},id:q+"_deleteMenuItem"});o.addChild(a)}var s=new dijit.form.DropDownButton({label:"Menu",showLabel:true,iconClass:l,dropDown:o,style:"padding:0px; margin:0px;"});return s}function destroyDijitWidget(a){if(dijit.byId(a)!=null){dijit.byId(a).destroy()}}function menuCreate(a){console.debug("widgetEngine.js menuCreate");var b=true;if(!isCurrentViewSaved(a)){b=confirm("Current unsaved view will be lost. Click ok to continue ?")}if(b){createNewView(a)}}function menuEdit(a){console.debug("widgetEngine.js menuEdit");createManageViewDialog(a,"oper.edit")}function menuSaveAs(a){console.debug("widgetEngine.js menuSaveAs");saveDialog(a,"saveAs")}function menuSave(a){console.debug("widgetEngine.js menuSave");saveDialog(a,"save")}function menuExecute(a,b){console.debug("widgetEngine.js menuExecute");executeOrDeleteDialog("oper.execute",a,b)}function menuDelete(a,b){console.debug("widgetEngine.js menuDelete");executeOrDeleteDialog("oper.delete",a,b)}function createNewView(a){showPleaseWaitDialog();var b=destroyOldAndCreateNew(a);createManageViewDialog(b,"oper.new");hidePleaseWaitDialog()}function destroyOldAndCreateNew(b){console.debug("destroyOldAndCreateNew ");var a=getCustManageViewDetailsObj(b);if(a.manageViewDialogRef!=null){var h=a.manageViewDialogRef;h.destroyRecursive()}var g=displayDefaultTemplate(b);var f=custViewMap.get(g)[0];return f}function displayDefaultTemplate(f){console.debug("displayDefaultTemplate ");var h=custWidgetTableMap.get(f).modelReferenceId;var g=custModelMap.get(h).content.contents[0].contentId;var a=custComponentListMap.get(g).defaultTemplateTable.id;var b=dojo.clone(custComponentListMap.get(a));getViewById(b,f,true);return b.id}function saveDialog(m,o){var f=document.createElement("div");f.setAttribute("style","display: none;");var g=new dijit.form.TextBox({name:"gridId",value:m,style:"visibility:hidden;"});f.appendChild(g.domNode);var x=document.createElement("table");f.appendChild(x);var u=document.createElement("tbody");x.appendChild(u);var a=document.createElement("tr");u.appendChild(a);var w=document.createElement("td");dojo.attr(w,{align:"left"});a.appendChild(w);var v=document.createElement("span");v.innerHTML="Enter Name* ";w.appendChild(v);var l=document.createElement("td");dojo.attr(l,{align:"right",colspan:"3"});a.appendChild(l);var h=new dijit.form.ValidationTextBox({name:"gridViewName",value:"None",trim:true,required:true,invalidMessage:invalidMessage_textboxEmpty,"class":"fullLength"});dojo.style(h.domNode,{width:"340px"});var b=getCustManageViewDetailsObj(m);if(b!=null){h.setValue(b.savedJsonContent.title)}l.appendChild(h.domNode);var s=new dijit.Dialog({refocus:true,title:(o=="saveAs")?"Save current view as... ":"Save ...",execute:processSaveDialog},f);var p=(o=="saveAs")?"saveAs":"save";var q=new dijit.form.Button({label:"Save",name:"saveButton",type:"submit",value:p,onClick:dojo.hitch(this,"validateDialog",h)});l.appendChild(q.domNode);connectHandle=dojo.connect(s,"_onSubmit",this,dojo.hitch(this,"cleanupWidget",s,connectHandle,h.domNode));connectHandle2=dojo.connect(s,"onCancel",this,dojo.hitch(this,"cleanupWidget",s,connectHandle2,h.domNode));s.startup;setTimeout(function(){s.show()},"0")}function executeOrDeleteDialog(l,h,q){var b=document.createElement("div");b.setAttribute("style","display: none;");var f=new dijit.form.TextBox({name:"gridId",value:h,style:"visibility:hidden;"});b.appendChild(f.domNode);var y=document.createElement("table");b.appendChild(y);var s=document.createElement("tbody");y.appendChild(s);var a=document.createElement("tr");s.appendChild(a);var w=document.createElement("td");dojo.attr(w,{align:"left"});a.appendChild(w);var v=document.createElement("span");if(l=="oper.execute"){v.innerHTML="Choose View to Execute &nbsp;"}else{v.innerHTML="Choose View to Delete &nbsp;"}w.appendChild(v);var g=document.createElement("td");a.appendChild(g);var m=null;var u=null;var o=null;var p=null;var x=new dijit.Dialog({refocus:true,title:(l=="oper.execute")?"Execute... ":"Delete...",execute:processExecuteDeleteDialog},b);if(l=="oper.execute"){u=new dojo.data.ItemFileReadStore({url:"../../../LandingCustRequest?action=getComponents&subType="+q+"&subject="+GLOBAL_ADMIN_VAR+"&customPreventCache="+new Date().getTime(),requestMethod:"get"});p={name:"filteringSelect",store:u,searchAttr:"label",labelAttr:"label",style:"width: 310px;",autoComplete:"false",invalidMessage:invalidMessage_filteringSelect};o=new dijit.form.FilteringSelect(p);m=new dijit.form.Button({label:"Execute",name:"apply",type:"submit",value:"execute",onClick:dojo.hitch(this,"validateDialog",o)})}else{if(l=="oper.delete"){u=new dojo.data.ItemFileReadStore({url:"../../../LandingCustRequest?action=getMyComponents&subType="+q+"&subject="+GLOBAL_ADMIN_VAR+"&customPreventCache="+new Date().getTime(),requestMethod:"get"});p={name:"filteringSelect",store:u,searchAttr:"label",labelAttr:"label",style:"width: 310px;",autoComplete:"false",invalidMessage:invalidMessage_filteringSelect};o=new dijit.form.FilteringSelect(p);m=new dijit.form.Button({label:"Delete",name:"apply",type:"submit",value:"delete",onClick:dojo.hitch(this,"validateDialog",o)})}}g.appendChild(o.domNode);g.appendChild(m.domNode);connectHandle=dojo.connect(x,"_onSubmit",this,dojo.hitch(this,"cleanupWidget",x,connectHandle,o.domNode));connectHandle2=dojo.connect(x,"onCancel",this,dojo.hitch(this,"cleanupWidget",x,connectHandle2,o.domNode));x.startup;setTimeout(function(){x.show()},"0")}function processSaveDialog(f){console.debug("process save as dialog is invoked"+f);var a=getCustManageViewDetailsObj(f.gridId);var g=a.savedJsonContent.title;a.savedJsonContent.title=f.gridViewName;a.savedJsonContent.edit.title=f.gridViewName;var b=a.savedJsonContent;var h="save";if(f.saveButton=="saveAs"){h="create"}showPleaseWaitDialog();dojo.xhrPost({url:"../../../LandingCustRequest",content:{action:h,subject:GLOBAL_ADMIN_VAR,json:dojo.toJson(b)},handleAs:"json",load:function(l){if(l.status=="SUCCESS"){console.debug("accepting json data : "+l.status);console.debug("accepting json data : "+l.data.id+" - "+l.data);if(h=="create"){getViewById(l.data,f.gridId,false)}else{if(h=="save"){if(a.jsonContent){a.jsonContent.title=f.gridViewName;a.jsonContent.edit.title=f.gridViewName}updateGridTitleById(f.gridId,l.data.title);updateAllViewsOnPage(l.data,f.gridId)}}hidePleaseWaitDialog()}else{hidePleaseWaitDialog();alert("Operation "+h+" failed")}},error:function(l){alert("Error Encountered in processSaveAsDialog xhrpost : ",l);a.savedJsonContent.title=g;a.savedJsonContent.edit.title=g;hidePleaseWaitDialog()}})}function processExecuteDeleteDialog(b){var a=(b.apply=="execute")?"execute":"delete";if(b.filteringSelect==""||b.filteringSelect==null){console.debug("processExecuteDeleteDialog: No value selected from dropdown");return}if(a=="execute"){showPleaseWaitDialog();dojo.xhrPost({url:"../../../LandingCustRequest",content:{action:"getComponent",subject:GLOBAL_ADMIN_VAR,type:"table",id:b.filteringSelect},handleAs:"json",load:function(f){console.debug("accepting json data : "+f.status);console.debug("accepting json data : "+f.data);getViewById(f.data,b.gridId,false);hidePleaseWaitDialog()},error:function(f){alert("Error Encountered in xhrPost in processExecuteDeleteDialog function for execute operation: ",f);hidePleaseWaitDialog()}})}else{if(a=="delete"){deleteView(b)}}}function getViewById(h,a,g){var b=repaintContainerContentCommon(h,a,g);var f=b.resultPane;if(f!=null){manageMenuItems(f.childId,g)}}function manageMenuItems(g,h){var m=custWidgetTableMap.get(g).hasQueryPrivilege;var a=getCustManageViewDetailsObj(g);if(h!=null&&h==true){if(m!=null&&m==true){dijit.byId(g+"_editMenuItem").setDisabled(true);dijit.byId(g+"_saveAsMenuItem").setDisabled(true);dijit.byId(g+"_saveMenuItem").setDisabled(true)}}else{a.savedJsonContent=dojo.clone(a.jsonContent);if(m!=null&&m==true){dijit.byId(g+"_editMenuItem").setDisabled(false);dijit.byId(g+"_saveAsMenuItem").setDisabled(false);var b=false;if(a.savedJsonContent.createdByMe==true){b=true}var f=custWidgetTableMap.get(g).containerPosition-1;var l=custWidgetTableMap.get(g).modelReferenceId;var o=false;if(getDefaultTemplateTableId(l,f)==a.viewId){o=true}else{if(!b){o=true}}dijit.byId(g+"_saveMenuItem").setDisabled(o)}}}function getDefaultTemplateTableId(b,f){var g=-1;var a=custModelMap.get(b).content.contents[f].contentId;var g=custComponentListMap.get(a).defaultTemplateTable.id;return g}function updateAllViewsOnPage(f,l){var g=custWidgetTableMap.get(l).viewId;var b=custViewMap.get(g);b=dojo.filter(b,function(q){return(q!=l)});var m=f.fixedColumns[0][0];var o=f.normalColumns[0][0];var p={noscroll:true,cells:m.cells};var a=manageViewMap.get(g);assignColumnGetFormatterFunction(f.tableCellStyles,p,o,a.custColumnsToStyle);var h=[p,o];dojo.forEach(b,function(u,s){updateGridTitleById(u,f.title);var q=dijit.byId(u);q.model.query.query=f.query;q.model.query.sort=f.sort;q.model.sortFields=null;if(h){setNewGridStructure(h,u)}q.update();refreshWorkingGrid(q);updateCheckedMenuItem(wrapCheckedMenuItemLocatorPrefix+u,evalWrapToggle(f.tableCellStyles))})}function getQueryListBCDefaultTemplateIds(b){var f=custModelMap.get(b).content.contents[0].contentId;var a=custComponentListMap.get(f).defaultTemplateTable.id;var g=new Array();g.push(f);g.push(a);return g}function cleanupWidget(f,a,b){console.debug("cleanupWidget is invoked ");if(b!=null){dijit.hideTooltip(b)}if(f!=null){f.destroyRecursive()}if(a!=null){dojo.disconnect(a)}}function validateDialog(a,f){console.debug("validating  "+a.declaredClass);var b=false;if(a!=null&&a.declaredClass=="dijit.form.FilteringSelect"){b=testEmptyFilteringSelect(a,f)}else{if(a!=null&&a.declaredClass=="dijit.form.ValidationTextBox"){if(dojo.string.trim(a.getValue())==""){a._isvalid=false;a.validate(true);b=false}else{b=true}}}return b}function testEmptyFilteringSelect(g,f){if(g!=null){var a=g.getValue();var b=g.store._getItemsArray();if(a==""||a==null){dojo.addClass(g.comboNode,"dijitError");dojo.addClass(g.comboNode,"dijitComboBoxError");if(b.length>0){g.displayMessage(g.invalidMessage)}else{g.displayMessage(invalidMessage_generic)}return false}}}function isCurrentViewSaved(a){var b=dijit.byId(a+"_saveAsMenuItem").disabled;var f=dijit.byId(a+"_saveMenuItem").disabled;return(b==f)}function deleteView(b){var a=b.filteringSelect;var f=genericTalkToServer("../../../CustRequest",{action:"getComponentUsages",subject:GLOBAL_ADMIN_VAR,id:a},"json",true,null,"post");f.addCallback(function(l,g){var h=false;hidePleaseWaitDialog();if(l.status=="SUCCESS"){if(l.data.length>0){if(GLOBAL_ADMIN_VAR==GLOBAL_USER){alert("Error: You have "+l.data.length+" global container(s) using this view.\nA global view can only be deleted if no global containers are associated with it.\nPlease delete all associations of this view to any global container(s) first then try this operation again.");return}else{h=confirm("Warning: The view you are about to delete is associated with "+l.data.length+" existing container(s). Click ok to continue ?");if(h){purgeView(b)}else{return}}}else{purgeView(b)}}else{alert("Pre delete operation failed....")}});f.addErrback(function(h,g){hidePleaseWaitDialog();alert("Pre delete operation failed ...Error Encountered. Please do a browser refresh and try again."+h)})}function purgeView(a){var b=false;if(a.filteringSelect==custWidgetTableMap.get(a.gridId).viewId){purge=confirm("The view you have selected is displayed, the screen will be cleared if you delete.  Are you sure you want to delete ?");b=true}showPleaseWaitDialog();dojo.xhrPost({url:"../../../LandingCustRequest",content:{action:"delete",subject:GLOBAL_ADMIN_VAR,json:dojo.toJson({id:a.filteringSelect})},handleAs:"json",load:function(g){console.debug("delete operation accepting result json data : "+g.status);if(g.status=="SUCCESS"){console.debug("delete operation is a success");if(b){destroyOldAndCreateNew(a.gridId)}requestForRefreshUponCancel=false;var f=custViewMap.get(a.filteringSelect);if(f!=null&&f.length>0){requestForRefreshUponCancel=true}hidePleaseWaitDialog()}else{hidePleaseWaitDialog();alert("Delete operation failed....")}},error:function(f){hidePleaseWaitDialog();alert("Delete Failed ...Error Encountered in xhrPost in processExecuteDeleteDialog function: "+f)}})}var DashboardQryFieldSelector=null;var connectHandleFieldSelector=null;(function(){var openQryFieldSelectDialog=function(fieldsArray,inWidget){var zfieldsArray=undefined;var setFieldsArray=function(inArray){var tempFieldsArray=dojo.clone(inArray);zfieldsArray=dojo.filter(tempFieldsArray,function(oneField){if(oneField.businessOptions!=undefined&&oneField.businessOptions.type=="data"&&oneField.businessOptions.queriable==true){return oneField}})};var pushToSelected=function(masterGrid,slaveGrid,event){if(masterGrid.model!=null&&masterGrid.model.count>0){var rowsSelected=masterGrid.selection.getSelected();dojo.forEach(rowsSelected,function(oneRow,index){var selectedRow=masterGrid.model.data[oneRow];slaveGrid.model.insert(selectedRow);slaveGrid.model.setData(slaveGrid.model.data)});masterGrid.updateRowStyles();masterGrid.refresh();masterGrid.selection.clear()}};var removeFromSelected=function(masterGrid,slaveGrid,event){if(masterGrid.model!=null&&masterGrid.model.count>0){slaveGrid.removeSelectedRows();slaveGrid.model.setData(slaveGrid.model.data);masterGrid.refresh()}};var createAvailableGrid=function(){var availGridModel=new dojox.grid.data.Objects(null,zfieldsArray);var view1={cells:[[{name:"Name",field:"name",width:"10"},{name:"Field",field:"field",width:"13"}]]};var layout=[view1];var grid=new srmdojoc.grid.SPGrid({model:availGridModel,structure:layout,rowSelector:true,sortInfo:1,style:"height: 450px; width: 300px;"});return grid};var createSelectedGrid=function(){var selectedGridModel=new dojox.grid.data.Objects(null,[]);var view2={cells:[[{name:"Name",field:"name",width:"10"},{name:"Field",field:"field",width:"13"}]]};var layout2=[view2];var grid2=new srmdojoc.grid.SPGrid({model:selectedGridModel,structure:layout2,rowSelector:true,style:"height: 450px; width: 300px;"});return grid2};var idExistInArray=function(arrayData,id,productField){var found=false;for(var i=0;i<arrayData.length;i++){if(eval("arrayData[i]."+productField)==id){found=true}}return found};var manageSelected=function(masterGrid,slaveGrid,idField,inRow){if(masterGrid.model.getRow(inRow.index)==undefined){return}if(idExistInArray(slaveGrid.model.data,eval("masterGrid.model.getRow(inRow.index)."+idField),idField)){inRow.customClasses="rowHidden"}};setFieldsArray(fieldsArray);if(zfieldsArray==undefined){alert("Setup problem. fieldsArray is empty")}var pane=document.createElement("div");pane.setAttribute("style","display: none;");var cancelButton=new dijit.form.Button({label:"Close",name:"Close",onClick:function(){qryFieldSelectDialog.hide()}});pane.appendChild(cancelButton.domNode);var applyButton=new dijit.form.Button({label:"Apply",name:"Apply",onClick:function(e){var selectedObjectArray=selectedGrid.model.data;dojo.forEach(selectedObjectArray,function(oneField,index){inWidget.setValue(inWidget.getValue()+"  "+oneField.field)});qryFieldSelectDialog.hide()}});pane.appendChild(applyButton.domNode);var spacer=document.createElement("div");dojo.attr(spacer,{height:"25px"});dojo.style(spacer,{visibility:"hidden"});pane.appendChild(spacer);spacer.innerHTML="1";var mainDiv=document.createElement("div");var mainTable=document.createElement("table");dojo.attr(mainTable,{width:"100%"});var mainBody=document.createElement("tbody");mainTable.appendChild(mainBody);var mainTR=document.createElement("tr");mainTR.setAttribute("style","height:500px");mainBody.appendChild(mainTR);var masterTD=document.createElement("td");dojo.attr(masterTD,{width:"45%",align:"left",valign:"top"});mainTR.appendChild(masterTD);var leftTable=document.createElement("table");dojo.attr(leftTable,{width:"100%"});var leftBody=document.createElement("tbody");leftTable.appendChild(leftBody);var leftTR=document.createElement("tr");leftBody.appendChild(leftTR);var leftTD=document.createElement("td");leftTR.appendChild(leftTD);var leftTR2=document.createElement("tr");leftBody.appendChild(leftTR2);var leftTD2=document.createElement("td");leftTR2.appendChild(leftTD2);masterTD.appendChild(leftTable);var availDivInst=document.createElement("div");availDivInst.innerHTML="Double click row to select";dojo.addClass(availDivInst,"noticeMessageRight");leftTD.appendChild(availDivInst);var availGrid=createAvailableGrid();var accContainer=new dijit.layout.AccordionContainer({region:"right"});var accPane=new dijit.layout.AccordionPane({title:"Available Fields",selected:true,onSelected:function(){setTimeout(function(){availGrid.resize()},250)}});accContainer.addChild(accPane);availGrid.sort();accPane.domNode.appendChild(availGrid.domNode);leftTD2.appendChild(accContainer.domNode);setTimeout(function(){availGrid.resize()},200);var controlTD=document.createElement("td");controlTD.appendChild(document.createTextNode("   "));dojo.attr(controlTD,{width:"10%",align:"left"});mainTR.appendChild(controlTD);var slaveTD=document.createElement("td");dojo.attr(slaveTD,{width:"45%",align:"left",valign:"top"});mainTR.appendChild(slaveTD);pane.appendChild(mainTable);var rightTable=document.createElement("table");dojo.attr(rightTable,{width:"100%"});var rightBody=document.createElement("tbody");rightTable.appendChild(rightBody);var rightTR=document.createElement("tr");rightBody.appendChild(rightTR);var rightTD=document.createElement("td");rightTR.appendChild(rightTD);var rightTR2=document.createElement("tr");rightBody.appendChild(rightTR2);var rightTD2=document.createElement("td");rightTR2.appendChild(rightTD2);slaveTD.appendChild(rightTable);var selectedDivInst=document.createElement("div");selectedDivInst.innerHTML="Double click row to deselect";dojo.addClass(selectedDivInst,"noticeMessageRight");rightTD.appendChild(selectedDivInst);var selectedGrid=createSelectedGrid();var accContainer2=new dijit.layout.AccordionContainer({region:"right"});var accPane2=new dijit.layout.AccordionPane({title:"Selected Fields",selected:true,onSelected:function(){setTimeout(function(){selectedGrid.resize()},250)}});accContainer2.addChild(accPane2);accPane2.domNode.appendChild(selectedGrid.domNode);rightTD2.appendChild(accContainer2.domNode);setTimeout(function(){selectedGrid.resize()},200);dojo.connect(availGrid,"onRowDblClick",function(){pushToSelected(availGrid,selectedGrid)});dojo.connect(selectedGrid,"onRowDblClick",function(){removeFromSelected(availGrid,selectedGrid)});dojo.connect(availGrid,"onStyleRow",function(inRow){manageSelected(availGrid,selectedGrid,"field",inRow)});var qryFieldSelectDialog=new dijit.Dialog({refocus:true,title:"Select fields",style:"width:53%;height:auto;"},pane);connectHandleFieldSelector=dojo.connect(qryFieldSelectDialog,"onCancel",this,dojo.hitch(this,"cleanupWidget",qryFieldSelectDialog,connectHandleFieldSelector));qryFieldSelectDialog.startup;setTimeout(function(){qryFieldSelectDialog.show()},"0")};window.DashboardQryFieldSelector={openQryFieldSelectDialog:openQryFieldSelectDialog}}());dojo.require("dojo.dnd.Source");dojo.require("dojo.parser");dojo.require("dijit.form.ComboBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.Tooltip");dojo.require("dijit.Dialog");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.form.CheckBox");dojo.require("dijit.form.Textarea");dojo.require("dijit.form.SimpleTextarea");dojo.require("dojox.fx.style");dojo.require("dijit.form.FilteringSelect");dojo.registerModulePath("srmdojoc","../srmdojoc");dojo.require("srmdojoc.SRMDateTimeTextBox");var CREATE_NEW_BUTTON_LABEL="Apply";var CREATE_NEW_BUTTON_VALUE="createNew";var UPDATE_NEW_BUTTON_LABEL="Apply";var UPDATE_NEW_BUTTON_VALUE="update";var APPLY_AND_SAVE_BUTTON_VALUE="applyAndSave";var APPLY_AND_SAVE_BUTTON_LABEL="Apply and Save";var APPLY_BUTTON_VALUE="apply";var APPLY_BUTTON_LABEL="Apply";var FIXED_COLUMN_STYLE_KEY="fixedColumnStyle";var NORMAL_COLUMN_STYLE_KEY="normalColumnStyle";var QUERY_MODE_FS_LOCATOR_CLASS="queryModeFSLocatorClass";var currentValidateButton;var sortSelectDataItems={identifier:"id",items:[{label:"Asc",name:"Asc",id:"ASC"},{label:"Desc",name:"Desc",id:"DESC"},{label:"None",name:"None",id:"NONE"}]};var operSelectDataItemsForString={identifier:"id",items:[{label:"",name:"None",id:""},{label:"IS NULL",name:"IS NULL",id:"IS NULL"},{label:"IS NOT NULL",name:"IS NOT NULL",id:"IS NOT NULL"},{label:"LIKE",name:"LIKE",id:"LIKE"},{label:"=",name:"=",id:"="},{label:"<>",name:"<>",id:"!="},{label:">",name:">",id:">"},{label:">=",name:">=",id:">="},{label:"<",name:"<",id:"<"},{label:"<=",name:"<=",id:"<="}]};var filterOperMap=new Map();filterOperMap.put("NONE",{label:"",name:"None",id:""});filterOperMap.put("EQ",{label:"=",name:"=",id:"="});filterOperMap.put("NE",{label:"<>",name:"<>",id:"!="});filterOperMap.put("LE",{label:"<=",name:"<=",id:"<="});filterOperMap.put("GE",{label:">=",name:">=",id:">="});filterOperMap.put("LT",{label:"<",name:"<",id:"<"});filterOperMap.put("GT",{label:">",name:">",id:">"});filterOperMap.put("LIKE",{label:"LIKE",name:"LIKE",id:"LIKE"});filterOperMap.put("EXISTS",{label:"IS NOT NULL",name:"IS NOT NULL",id:"IS NOT NULL"});filterOperMap.put("NEXISTS",{label:"IS NULL",name:"IS NULL",id:"IS NULL"});filterOperMap.put("CIEQ",{label:"~=",name:"~=",id:"~="});filterOperMap.put("CILIKE",{label:"~LIKE",name:"~LIKE",id:"~LIKE"});filterOperMap.put("NULLOREQ",{label:"IS NULL or =",name:"IS NULL or =",id:"N="});var operSelectDataItemsForDateAndNumber={identifier:"id",items:[{label:"",name:"None",id:""},{label:"IS NULL",name:"IS NULL",id:"IS NULL"},{label:"IS NOT NULL",name:"IS NOT NULL",id:"IS NOT NULL"},{label:"=",name:"=",id:"="},{label:"<>",name:"<>",id:"!="},{label:">",name:">",id:">"},{label:">=",name:">=",id:">="},{label:"<",name:"<",id:"<"},{label:"<=",name:"<=",id:"<="}]};var operSelectDataItemsForBoolean={identifier:"id",items:[{label:"",name:"None",id:""},{label:"IS NULL",name:"IS NULL",id:"IS NULL"},{label:"IS NOT NULL",name:"IS NOT NULL",id:"IS NOT NULL"},{label:"=",name:"=",id:"="}]};var filterClauseForBoolean={identifier:"id",items:[{label:"",name:"",id:""},{label:"true",name:"true",id:"true"},{label:"false",name:"false",id:"false"}]};var formatSelectDataItemsForString={identifier:"id",items:[{label:"",name:"None",id:""},{label:"abbr",name:"Abbreviate",id:"abbr"}]};var formatSelectDataItemsForDate={identifier:"id",items:[{label:"",name:"None",id:""},{label:"normal",name:"Normal",id:"normal"},{label:"verbose",name:"Verbose",id:"verbose"},{label:"days",name:"Days",id:"days"}]};var simpleFilterTrueAppearance=new Array();var simpleFilterFalseAppearance=new Array();var sortFilterStore=new dojo.data.ItemFileReadStore({data:sortSelectDataItems});var staticOperFilterStoreForString=new dojo.data.ItemFileReadStore({data:operSelectDataItemsForString});var operFilterStoreForString=null;var operFilterStoreForDateAndNumber=new dojo.data.ItemFileReadStore({data:operSelectDataItemsForDateAndNumber});var operFilterStoreForBoolean=new dojo.data.ItemFileReadStore({data:operSelectDataItemsForBoolean});var filterClauseStoreForBoolean=new dojo.data.ItemFileReadStore({data:filterClauseForBoolean});var staticFormatFilterStoreForString=new dojo.data.ItemFileReadStore({data:formatSelectDataItemsForString});var staticFormatFilterStoreForDate=new dojo.data.ItemFileReadStore({data:formatSelectDataItemsForDate});var WHAT_IS_FIXED="Selecting a column to be fixed means that column will remain visible when scrolling the grid horizontally.";var TOO_MANY_FIXED_MSG="Depending of the width of the fixed columns and the grid, selecting too many fixed columns might result in the disappearance of the horizontal scrollbar from the grid.";var TOO_MANY_FIXED_WARNING="WARNING: "+TOO_MANY_FIXED_MSG+" When this happens, try reducing the number of fixed columns selected.";var TOO_MANY_FIXED_THRESHOLD_MET_WARNING="WARNING: You have selected %%NO_OF_FIXED_COLUMN_THRESHOLD%% or more fixed columns. "+TOO_MANY_FIXED_MSG+" To reduce the number of fixed columns, deselect the fixed column checkbox.  Do you still want to continue?";function setVal2(a){alert("Selected "+a.currentTarget.id+" view  ")}function call_function(){console.debug("call function is selected")}function onChangeCheckBox(b){alert("onChangeCheckBox",b.value,this,this.checked)}function manageViewDialogNodeCreator(M,D){var f=document.createElement("tr");var l=document.createElement("td");dojo.attr(l,{valign:"middle",align:"center"});var q=document.createElement("td");dojo.attr(q,{valign:"middle",align:"center"});var P=document.createElement("td");P.id=M.field+"_field";dojo.attr(P,{valign:"middle",align:"left",width:"30%"});dojo.addClass(P,"dojoDndHandle");P.title=(M.longName!=null)?M.longName:M.name;var N=document.createElement("span");N.appendChild(document.createTextNode(M.name));dojo.addClass(N,"itemText");P.appendChild(N);var z=document.createElement("td");dojo.attr(z,{valign:"middle",align:"left",width:"50%"});z.appendChild(document.createTextNode(M.field));dojo.attr(P,{valign:"middle",align:"left",width:"30%"});registerWipeNodes(z);var p=document.createElement("td");dojo.attr(p,{valign:"middle",align:"left",width:"10%",style:"white-space: nowrap;"});var F=document.createElement("td");var s=document.createElement("td");var C=document.createElement("td");var m=document.createElement("td");var R=(M.scrollType!=null);var v=new dijit.form.CheckBox({name:"includeCheck",value:M.field,checked:((M.businessOptions.displayable)?R:false),disabled:!(M.businessOptions.displayable)});l.appendChild(v.domNode);var o=(M.scrollType=="FIXED");var B=new dijit.form.CheckBox({name:"fixedColumnCheck",value:M.field,checked:((M.businessOptions.displayable)?o:false),disabled:!(M.businessOptions.displayable)});if(M.scrollType==null){B.domNode.style.visibility="hidden"}q.appendChild(B.domNode);dojo.connect(v.domNode,"onclick",null,function(S){if(S.target.checked){B.domNode.style.visibility="visible"}else{B.domNode.checked=false;B.domNode.style.visibility="hidden"}});var E="NONE";if(M.businessOptions.sortable){if(M.sortType){E=M.sortType}}var J=new dijit.form.FilteringSelect({disabled:!M.businessOptions.sortable,name:"sortFilter."+M.field,store:sortFilterStore,searchAttr:"name",value:E,labelAttr:"name",style:"width: 85px;",autoComplete:"false",required:true,invalidMessage:invalidMessage_filteringSelect});p.appendChild(J.domNode);var w=staticFormatFilterStoreForString;var Q=true;if(M.businessOptions.datatype=="date"){w=staticFormatFilterStoreForDate;Q=false}else{if(M.businessOptions.datatype=="string"||M.businessOptions.datatype=="boolean"){w=staticFormatFilterStoreForString;Q=!M.businessOptions.hasAbbreviations}}var h=new dijit.form.FilteringSelect({disabled:Q,name:"formatFilter."+M.field,store:w,searchAttr:"name",value:(M.cellFormat!=null)?M.cellFormat:"",labelAttr:"name",style:(M.businessOptions.hasAbbreviations||M.businessOptions.datatype=="date")?"width:75px;":"display:none;",autoComplete:"false",required:true,invalidMessage:invalidMessage_filteringSelect});F.appendChild(h.domNode);if(M.businessOptions.operators!=undefined&&M.businessOptions.operators!=null&&M.businessOptions.operators.length>0){var b=new Array();var y=false;dojo.forEach(M.businessOptions.operators,function(V){if(filterOperMap.get(V)!=null){if(!y){var S=new Object();S.id="";S.name="None";S.label="";b.push(S);y=true}var U=filterOperMap.get(V);var T=new Object();T.id=U.id;T.name=U.name;T.label=U.label;b.push(T)}});var I={identifier:"id",items:b};operFilterStoreForString=new dojo.data.ItemFileReadStore({data:I})}else{operFilterStoreForString=staticOperFilterStoreForString}var O=new dijit.form.FilteringSelect({disabled:!M.businessOptions.queriable,name:"operFilter."+M.field,store:operFilterStoreForString,searchAttr:"name",value:(M.queryOperator!=null)?M.queryOperator:"",labelAttr:"name",style:"width: 100px;",autoComplete:"false",required:true,invalidMessage:invalidMessage_filteringSelect});s.appendChild(O.domNode);registerWipeNodes2(s);var L=M.queryOperand;var G=null;if(M.businessOptions.datatype!=null&&M.businessOptions.datatype=="date"){G=new srmdojoc.SRMDateTimeTextBox({lang:"en-us",name:"columnFilter."+M.field,constraints:{datePattern:"dd-MMM-yyyy",timePattern:"h:mm:ss z a"},value:(L!=null?getParsedDateValForWidget(L,M.businessOptions.datatype):null),promptMessage:"Please enter date in format: 01-Jan-2009 02:30:00 EDT PM","class":"fullLength",onChange:function(S){if(S!=null&&S.toString()!=null&&dojo.string.trim(S.toString())!=""){if(O.getValue()==null||O.getValue()!=null&&O.getValue()==""){O.setValue("=")}}},disabled:(!M.businessOptions.queriable||O.getValue()=="IS NULL"||O.getValue()=="IS NOT NULL")});O.store=operFilterStoreForDateAndNumber;dojo.connect(G,"_onBlur",this,dojo.hitch(this,operatorFilterValidation,G,O))}else{if(M.businessOptions.datatype!=null&&M.businessOptions.datatype=="day"){G=new dijit.form.DateTextBox({lang:"en-us",name:"columnFilter."+M.field,constraints:{datePattern:"dd-MMM-yyyy"},value:(L!=null?getParsedDateValForWidget(L,M.businessOptions.datatype):null),promptMessage:"Please enter date in format: 01-Jan-2009","class":"fullLength",onChange:function(S){if(S!=null&&S.toString()!=null&&dojo.string.trim(S.toString())!=""){if(O.getValue()==null||O.getValue()!=null&&O.getValue()==""){O.setValue("=")}}},disabled:(!M.businessOptions.queriable||O.getValue()=="IS NULL"||O.getValue()=="IS NOT NULL")});O.store=operFilterStoreForDateAndNumber;dojo.connect(G,"_onBlur",this,dojo.hitch(this,operatorFilterValidation,G,O))}else{if(M.businessOptions.datatype!=null&&M.businessOptions.datatype=="boolean"){G=new dijit.form.FilteringSelect({disabled:(!M.businessOptions.queriable||O.getValue()=="IS NULL"||O.getValue()=="IS NOT NULL"),name:"columnFilter."+M.field,store:filterClauseStoreForBoolean,searchAttr:"name",value:L,labelAttr:"name",onChange:function(S){if(S!=null&&dojo.string.trim(S.toString())!=""){if(O.getValue()==null||O.getValue()!=null&&O.getValue()==""){O.setValue("=")}}},"class":"almostFullLength",autoComplete:"false"});O.store=operFilterStoreForBoolean;dojo.connect(G,"_onBlur",this,dojo.hitch(this,operatorFilterValidation,G,O))}else{var A="^[^'].*([^'])?$";var x="Invalid String Format. No need to wrap in single quotes. ";if(M.businessOptions.datatype=="integer"){O.store=operFilterStoreForDateAndNumber;A="[+|-]?\\d{1,10}";x="Invalid Numeric Format. This is a integer field. "}else{if(M.businessOptions.datatype=="bigDecimal"){O.store=operFilterStoreForDateAndNumber;A="([+|-])?\\d{1,20}(\\.\\d{0,10})?";x="Invalid Numeric Format. This is a decimal field. "}}G=new dijit.form.ValidationTextBox({name:"columnFilter."+M.field,regExp:A,invalidMessage:x,onChange:function(S){if(S!=null&&dojo.string.trim(S.toString())!=""){if(O.getValue()==null||O.getValue()!=null&&O.getValue()==""){if(S.indexOf("*")==(S.length-1)){O.setValue("LIKE")}else{O.setValue("=")}}}},value:L,"class":"fullLength",disabled:(!M.businessOptions.queriable||O.getValue()=="IS NULL"||O.getValue()=="IS NOT NULL")})}}}dojo.connect(O,"onChange",this,dojo.hitch(this,operatorChangeValidation,G,O));C.appendChild(G.domNode);registerWipeNodes2(C);var u=document.createTextNode(M.businessOptions.datatype);m.appendChild(u);m.style.display="none";f.appendChild(l);f.appendChild(q);f.appendChild(P);f.appendChild(z);f.appendChild(p);f.appendChild(F);f.appendChild(s);f.appendChild(C);f.appendChild(m);var H=f;if(D=="avatar"){var K=document.createElement("table");var a=document.createElement("tbody");a.appendChild(f);K.appendChild(a);H=K}var g="dialog";return{node:H,data:M,type:g}}var itemFieldNodeArray=null;function buildDialogDndNodes(b,f){itemFieldNodeArray=new Array();var a=new dojo.dnd.Source(b,{withHandles:true,creator:manageViewDialogNodeCreator});a.insertNodes(false,f);return a}function validateForm(l){var b=getCustManageViewDetailsObj(l);var g=b.dndSource;var w=dojo.query(".dojoDndItem",g.node);var p=new Array();var q=new Array();var m=new Array();var h=new Array();var u=b.manageViewDialogRef.domNode;var o=dojo.query("."+QUERY_MODE_FS_LOCATOR_CLASS,u);var f=true;if(o!=undefined&&o[0]!=undefined){f=validateSPDialogWidgetCopy(dijit.byNode(o[0]))}if(!f){return false}dojo.forEach(w,function(H,C){var D=g.getItem(H.id);D.data.position=(C+1);var x=false;var L=dojo.query(".dijitCheckBoxChecked",H.childNodes[0]);if(L.length>0){x=true}var A=false;var N=dojo.query(".dijitCheckBoxChecked",H.childNodes[1]);if(N.length>0){A=true}if(x){if(!A){D.data.scrollType="NORMAL";q.push(H.id)}else{if(A){D.data.scrollType="FIXED";p.push(H.id)}}}var y=dojo.query(".dijitComboBox",H.childNodes[4]);var Q=dijit.byNode(y[0]);var J=Q._lastDisplayedValue;var z=validateDropdown(sortSelectDataItems,J);if(!z){m.push(J)}var I=dojo.query(".dijitComboBox",H.childNodes[5]);var O=dijit.byNode(I[0]);var K=O.store._getItemsArray();var B=O._lastDisplayedValue;var F=validateDropdown2(K,B);if(!F){h.push(formatValueValue)}var G=dojo.query(".dijitComboBox",H.childNodes[6]);var E=dijit.byNode(G[0]);var P=E.store._getItemsArray();if(P.length<=0){P=operSelectDataItemsForString.items}var M=E._lastDisplayedValue;var F=validateDropdown2(P,M);if(!F){h.push(M)}});var s=p;s=s.concat(q);if(s.length<1){alert("Select at least one visible field");return false}if(m.length>0){alert(invalidMessage_filteringSelect);return false}if(h.length>0){alert(invalidMessage_filteringSelect);return false}if(p.length>=applicationSettingsObj.noOfFixedColumnWarnThreshold){if(!confirm(TOO_MANY_FIXED_THRESHOLD_MET_WARNING)){return false}}var a=b.manageViewDialogRef.getValues();var v=processDialogInput(a,true);if(!v.success){if(v.warningOnly){if(confirm("There seems to be a problem with your query \n\n"+v.errorMessage+"\n\n Click Cancel to Change the Query Criteria or Click Ok to Continue.")){return true}else{return false}}else{alert(v.errorMessage+"\nClick Ok to Continue.");return true}}}function validateDropdown(g,f){var h=false;var a=g.items;if(f==""||f==null||f=="undefined"){return h}for(var b=0;b<a.length;b++){if(f!=null&&f==a[b].name){h=true;return h}else{h=false}}return h}function validateDropdown2(b,h){var l=false;if(h==""||h==null||h=="undefined"){return l}for(var g=0;g<b.length;g++){var f=b[g].name[0];if(h!=null&&h==b[g].name){l=true;return l}else{l=false}}return l}function createApplyButtons(g,f,l,o,b,a){var h=new dijit.form.Button({label:"Cancel",name:"cancel",onClick:dojo.hitch(this,"destroyManageViewDialog",l,b)});g.appendChild(h.domNode);var m=new dijit.form.Button({label:o.label,type:"submit",onClick:function(p){return validateForm(a)}});g.appendChild(m.domNode)}function animateMe(b,f,a){dojo.forEach([f,a],function(g){if(g.status()=="playing"){g.stop()}});(b?f:a).play()}function animateMeArray(a,b,f){if(a==true){dojo.fx.combine(b).play()}else{dojo.fx.combine(f).play()}}function getAllTableColumnList(f){var h=f.jsonContent.edit.columns;var a=new Array();var g=new Array();var b=0;for(i in h){var l=h[i].position;if((l==null)&&(h[i].field!=null)){if((h[i].businessOptions!=null)&&(h[i].businessOptions.displayable==true)){g.push(h[i])}}else{l;if((h[i].businessOptions!=null)&&(h[i].businessOptions.displayable==true)){a[l]=h[i]}}}a=dojo.filter(a,function(m){return m!=null});if(g.length>0){g.sort(sortByName);a=a.concat(g)}return a}function sortByName(h,g){var f=h.name.toLowerCase();var l=g.name.toLowerCase();return((f<l)?-1:((f>l)?1:0))}function createDialogFramework(az,aR){var aj=getCustManageViewDetailsObj(az);var aT=false;if(aj!=null){if(aj.jsonContent.businessObjectType=="CHILD"){aT=true}}var x=null;var aO=null;var G=buildModeFSDataItems(aj.jsonContent.allQueryModes);if(G!=null){aO=new dojo.data.ItemFileReadStore({data:G});x=new dijit.form.FilteringSelect({name:"queryModeFS","class":QUERY_MODE_FS_LOCATOR_CLASS,store:aO,searchAttr:"name",value:aj.jsonContent.queryMode,labelAttr:"name",style:"position:relative; left:2px; width:190px; vertical-align:middle;",autoComplete:"false",required:true,invalidMessage:invalidMessage_filteringSelect})}var P=evaluateSubmitButtonDetails(aR,aT);var aA=document.createElement("div");aA.setAttribute("style","display: none");var I=document.createElement("table");aA.appendChild(I);var U=document.createElement("tbody");I.appendChild(U);var af=document.createElement("tr");U.appendChild(af);var aI=document.createElement("td");dojo.attr(aI,{align:"right",colspan:"2"});af.appendChild(aI);var aQ=document.createElement("div");dojo.addClass(aQ,"box");dojo.style(aQ,{"float":"right"});aI.appendChild(aQ);var au=document.createElement("tr");U.appendChild(au);var F=document.createElement("td");dojo.attr(F,{align:"left",colspan:"2"});au.appendChild(F);var ay=true;if(aj.jsonContent.queryType=="ADVANCED"){ay=false}var b=new dijit.form.TextBox({name:"apply",value:P.value,style:"visibility:hidden;"});var J=new dijit.form.TextBox({name:"gridId",value:az,style:"visibility:hidden;"});var o=new dijit.form.TextBox({name:"simpleFilterVal",value:ay,style:"visibility:hidden;"});var aw=new dijit.form.TextBox({name:"tagQuery",value:aj.jsonContent.tagQuery,style:"visibility:hidden;"});F.appendChild(J.domNode);F.appendChild(b.domNode);F.appendChild(o.domNode);F.appendChild(aw.domNode);var N=new dijit.layout.ContentPane({name:"manage_existingTagsCP",title:"Existing Tags",style:"width:850px"});var h=document.createElement("tr");dojo.style(h,{display:"none"});U.appendChild(h);var u=document.createElement("td");u.appendChild(N.domNode);dojo.attr(u,{align:"left",width:"850px"});h.appendChild(u);var ax=new Map();var aB=null;if(aj.jsonContent.tagQuery!=undefined&&aj.jsonContent.tagQuery!=null){aB=aj.jsonContent.tagQuery.split(",")}dojo.forEach(aB,function(aq,aV){ax.put(aq,aq)});getAllExistingTags_manageView(ax,N,aw);var ai=document.createElement("tr");U.appendChild(ai);dojo.style(ai,{display:"none"});var M=document.createElement("td");ai.appendChild(M);var V=new dijit.form.ValidationTextBox({name:"tag",regExp:DashboardTagging.validTagRegExp,style:"width:500px; vertical-align:middle;",invalidMessage:"Please enter a valid tag. Use alphanumeric characters only"});var aJ=new dijit.form.Button({label:"Add Tag Query",name:"Add Tag Query",style:"vertical-align:middle",onClick:function(){var aq=dojo.string.trim(V.getValue());if(aq!=""&&ax.get(aq)==null){ax.put(V.getValue(),V.getValue());getAllExistingTags_manageView(ax,N,aw)}V.setValue("")}});var Y=document.createElement("span");Y.appendChild(V.domNode);Y.appendChild(aJ.domNode);M.appendChild(Y);var w=document.createElement("tr");U.appendChild(w);dojo.style(w,{display:"none"});var L=document.createElement("A");L.href="#";L.onclick=function(){getMyExistingArtifactTypeTerms_manageView(Q,ax,GLOBAL_ADMIN_VAR,aj.jsonContent.artifactType,aw,N)};L.innerHTML="Refresh List of Used Tags";var ar=document.createElement("td");w.appendChild(ar);ar.appendChild(L);dojo.attr(L,{style:"font-size:1 em;"});var H=document.createElement("tr");U.appendChild(H);dojo.style(H,{display:"none"});var Q=new dijit.layout.ContentPane({name:"existingTermsCP"});dojo.style(Q.domNode,{display:"none"});var aC=document.createElement("td");aC.setAttribute("width","850px");H.appendChild(aC);aC.appendChild(Q.domNode);getMyExistingArtifactTypeTerms_manageView(Q,ax,GLOBAL_ADMIN_VAR,aj.jsonContent.artifactType,aw,N);var at=new dijit.form.Button({label:(ay)?"Use Advanced Filter":"Use Simple Filter",onClick:function(aq){ay=!ay;this.setLabel((ay)?"Use Advanced Filter":"Use Simple Filter");o.setValue(ay);animateMeArray(ay,simpleFilterTrueAppearance,simpleFilterFalseAppearance)}});var am=(ay)?"":aj.jsonContent.query;var ae=new dijit.form.SimpleTextarea({title:"Enter Advanced Where Clause",name:"advancedQuery",intermediateChanges:true,value:am});var ak=document.createElement("tr");U.appendChild(ak);var ap=document.createElement("td");ap.appendChild(at.domNode);dojo.attr(ap,{align:"left",width:"850px"});ak.appendChild(ap);if(aj.jsonContent.artifactType=="SR"&&GLOBAL_ADMIN_VAR!=GLOBAL_USER){var q=new dijit.form.Button({label:"Add Tags",onClick:function(aq){if(H.style.display=="none"){dojo.style(H,{display:"block"});dojo.style(Q.domNode,{display:"block"});dojo.style(ai,{display:"block"});dojo.style(w,{display:"block"});getMyExistingArtifactTypeTerms_manageView(Q,ax,GLOBAL_ADMIN_VAR,aj.jsonContent.artifactType,aw,N)}else{dojo.style(H,{display:"none"});dojo.style(Q.domNode,{display:"none"});dojo.style(ai,{display:"none"});dojo.style(w,{display:"none"})}this.setLabel((H.style.display=="none")?"Add Tags":"Hide Tags")}});ap.appendChild(q.domNode);dojo.style(h,{display:"inline"})}var ah=createAQNode(ae,aj.jsonContent.edit.listBCType,aj.jsonContent.id,x,az);var aN=document.createElement("tr");U.appendChild(aN);var aU=document.createElement("td");aU.appendChild(ah);aN.appendChild(aU);U.appendChild(aN);registerWipeNodes(aN);var K=document.createElement("div");dojo.addClass(K,"formQuestion");var an=document.createElement("span");dojo.addClass(an,"noticeMessageRight");K.appendChild(an);var aS=document.createTextNode("To Reorder fields, simply select the column name and drag to desired position");an.appendChild(aS);var a=document.createElement("span");dojo.addClass(a,"recCountTypeClass");var R=false;if(aj.jsonContent.recCountType!=null&&aj.jsonContent.recCountType=="TOTAL"){R=true}var aD=new dijit.form.TextBox({name:"recCountType",value:R,style:"display:none;"});var m=new dijit.form.ToggleButton({showLabel:true,style:"position:relative; left:2px; ",checked:R,label:"Show Record Count",iconClass:"dijitRadioIcon",onChange:function(aq){if(aq){if(!confirm("Warning: Turning on the Record Count may impact the performance of your query. Do you still want to turn the record count on?")){R=false;aq=false;this.setAttribute("checked",R)}}aD.setValue(aq);console.debug(aD.getValue())}});var p=new Array();if(aj.jsonContent.tableCellStyles!=null){p=aj.jsonContent.tableCellStyles}var S=evalWrapToggle(p);var W=new dijit.form.TextBox({name:"wrapToggleHidden",value:S,style:"display:none;","class":"wrapToggleLocatorHidden"});var av=new dijit.form.ToggleButton({showLabel:true,style:"position:relative; left:2px;",checked:S,label:"Word Wrap","class":"wrapToggleLocatorButton",iconClass:"dijitRadioIcon",onChange:function(aq){W.setValue(aq);console.debug("the word wrap value is now "+W.getValue())}});a.appendChild(m.domNode);a.appendChild(av.domNode);if(G!=null){var v=document.createElement("span");var f=document.createElement("img");dojo.attr(f,{src:"../images/requiredicon.gif",alt:"Required",style:"vertical-align:middle;"});v.appendChild(document.createTextNode(" Query Mode:"));v.appendChild(f);dojo.style(v,{position:"relative",left:"5px","vertical-align":"middle"});a.appendChild(v);a.appendChild(x.domNode)}K.appendChild(a);K.appendChild(aD.domNode);K.appendChild(W.domNode);var E=document.createElement("tr");U.appendChild(E);var ao=document.createElement("td");dojo.attr(ao,{bgColor:"#d0e3f5"});E.appendChild(ao);ao.appendChild(K);var ad=document.createElement("tr");U.appendChild(ad);var aH=document.createElement("td");dojo.attr(aH,{colspan:"2"});ad.appendChild(aH);var aK=new dijit.layout.ContentPane({style:"width: 850px; height: 400px;"});var aM=document.createElement("div");var al=document.createElement("table");dojo.addClass(al,"manageView");var ag=document.createElement("thead");var ac=document.createElement("tr");al.appendChild(ag);ag.appendChild(ac);var D=document.createElement("th");dojo.attr(D,{width:"5%;"});D.appendChild(document.createTextNode("Visible"));var C=document.createElement("th");dojo.attr(C,{width:"6%;"});var aL=document.createElement("span");C.appendChild(document.createTextNode("Fixed "));var aP=document.createElement("A");dojo.attr(aP,"href","#");dojo.attr(aP,"title","What is Fixed?");var l=new Array();l.push({message:WHAT_IS_FIXED,messageType:INFO});l.push({message:TOO_MANY_FIXED_WARNING,messageType:INFO});var aE={};aE.opStatus="1";aE.opResult=l;aE.errors=false;dojo.connect(aP,"onclick",this,dojo.hitch(this,displayErrors,aE));aP.appendChild(document.createTextNode("?"));C.appendChild(aP);var B=document.createElement("th");dojo.attr(B,{width:"30%;"});B.appendChild(document.createTextNode("Column Name"));var ab=document.createElement("th");dojo.attr(ab,{width:"30%;"});ab.appendChild(document.createTextNode("Field Name"));registerWipeNodes(ab);var A=document.createElement("th");dojo.attr(A,{width:"10%;"});A.appendChild(document.createTextNode("Sort"));var X=document.createElement("th");dojo.attr(X,{width:"10%;"});X.appendChild(document.createTextNode("Format"));var z=document.createElement("th");dojo.attr(z,{width:"10%;"});z.appendChild(document.createTextNode("Operator"));registerWipeNodes2(z);var y=document.createElement("th");dojo.attr(y,{width:"40%;"});y.appendChild(document.createTextNode("Criteria"));registerWipeNodes2(y);ac.appendChild(D);ac.appendChild(C);ac.appendChild(B);ac.appendChild(ab);ac.appendChild(A);ac.appendChild(X);ac.appendChild(z);ac.appendChild(y);var T=document.createElement("tbody");al.appendChild(T);aM.appendChild(al);aK.setContent(aM);aH.appendChild(aK.domNode);var aa=document.createElement("tr");U.appendChild(aa);var aG=document.createElement("td");dojo.attr(aG,{colspan:"2"});aa.appendChild(aG);aG.appendChild(document.createElement("br"));var Z=document.createElement("tr");U.appendChild(Z);var aF=document.createElement("td");dojo.attr(aF,{colspan:"2",align:"right"});Z.appendChild(aF);var s=document.createElement("div");dojo.addClass(s,"box");dojo.style(s,{"float":"right"});aF.appendChild(s);createApplyButtons(aQ,"top",aj,P,aR,az);createApplyButtons(s,"bottom",aj,P,aR,az);var O=getAllTableColumnList(aj);var g=buildDialogDndNodes(T,O);aj.dndSource=g;aK.startup();animateMeArray(ay,simpleFilterTrueAppearance,simpleFilterFalseAppearance);return aA}function evaluateSubmitButtonDetails(f,b){var a=new Object();a.name="apply";a.type="submit";if(f=="oper.apply"){if(b){a.label=APPLY_BUTTON_LABEL;a.value=APPLY_BUTTON_VALUE}else{a.label=APPLY_AND_SAVE_BUTTON_LABEL;a.value=APPLY_AND_SAVE_BUTTON_VALUE}}else{if(f=="oper.new"){a.label=CREATE_NEW_BUTTON_LABEL;a.value=CREATE_NEW_BUTTON_VALUE}else{if(f=="oper.edit"){a.label=UPDATE_NEW_BUTTON_LABEL;a.value=UPDATE_NEW_BUTTON_VALUE}}}return a}function registerWipeNodes(g){var a=50;var f=dojo.fx.wipeIn({node:g,duration:a});var b=dojo.fx.wipeOut({node:g,duration:a});simpleFilterTrueAppearance.push(b);simpleFilterFalseAppearance.push(f)}function registerWipeNodes2(g){var a=50;var f=dojo.fx.wipeIn({node:g,duration:a});var b=dojo.fx.wipeOut({node:g,duration:a});simpleFilterTrueAppearance.push(f);simpleFilterFalseAppearance.push(b)}function processDialogInput(q,F){if(F==undefined||F==null){F=false}var w=q.gridId;var p=q.apply;var G=q.advancedQuery;var D=(q.recCountType!=null&&q.recCountType=="true")?true:false;var J=(q.wrapToggleHidden!=null&&q.wrapToggleHidden=="true")?true:false;var a=(q.simpleFilterVal!=null&&q.simpleFilterVal=="true")?true:false;var H=null;if(q.tagQuery!=undefined&&(q.tagQuery!=null&&dojo.string.trim(q.tagQuery)!="")){H=q.tagQuery}var z=((H!=null)?"MINE":null);var E=q.queryModeFS;var A=getCustManageViewDetailsObj(w);var b=A.dndSource;var C=dojo.query(".dojoDndItem",b.node);var y=new Array();var L=new Array();var v=new Array();dojo.forEach(C,function(X,S){var T=b.getItem(X.id);T.data.position=(S+1);var O=false;var aa=dojo.query(".dijitCheckBoxChecked",X.childNodes[0]);if(aa.length>0){O=true}var Q=false;var ac=dojo.query(".dijitCheckBoxChecked",X.childNodes[1]);if(ac.length>0){Q=true}if(O){if(!Q){T.data.scrollType="NORMAL";L.push(X.id)}else{if(Q){T.data.scrollType="FIXED";y.push(X.id)}}}else{T.data.scrollType=null;v.push(X.id)}var P=dojo.query(".dijitComboBox",X.childNodes[4]);var af=dijit.byNode(P[0]);var Z=af.getValue();if(Z=="NONE"){Z=null}T.data.sortType=Z;var Y=dojo.query(".dijitComboBox",X.childNodes[5]);var ae=dijit.byNode(Y[0]);var R=ae.getValue();if(R==""){R=null}T.data.cellFormat=R;var W=dojo.query(".dijitComboBox",X.childNodes[6]);var U=dijit.byNode(W[0]);var ab=U.getValue();if(ab==""){ab=null}T.data.queryOperator=ab;if(a){if(T.data.queryOperator=="IS NULL"||T.data.queryOperator=="IS NOT NULL"){T.data.queryOperand=null}else{var ad=dojo.query(".dijitInputField",X.childNodes[7]);var V;if(ad.length>0){V=ad[0].firstChild.value}T.data.queryOperand=dojo.string.trim(V)}if(T.data.queryOperand==""&&T.data.businessOptions.datatype!=null&&T.data.businessOptions.datatype=="date"){U.setValue("");T.data.queryOperator=null}}else{T.data.queryOperand=""}});var B=y;B=B.concat(L);B=B.concat(v);var l="";var M="";var o=" ";var g=" ";var f;var N;L=new Array();y=new Array();var I=new Array();var s=null;dojo.forEach(B,function(S,Q){var P=b.getItem(S);P.data.position=Q;I.push(P.data);if(P.data.scrollType!=null){var R=P.data.name;if(P.data.businessOptions.type=="icon"){R="&nbsp;"}if(P.data.scrollType=="FIXED"){var U=new Object();U.name=R;U.field=P.data.field;U.cellFormat=P.data.cellFormat;U.cellStyles=(settingsMap.get(FIXED_COLUMN_STYLE_KEY)==null)?"color:blue;":settingsMap.get(FIXED_COLUMN_STYLE_KEY);if(P.data.businessOptions.businessType||P.data.businessOptions.type=="icon"||isCellForRuleStyling(P.data,A.custColumnsToStyle)||P.data.cellFormat!=null){U.get=formatBusinessOptionsData}U.businessOptions=P.data.businessOptions;if(P.data.longName!=null){U.longName=P.data.longName}if(P.data.defaultWidth!=null&&dojo.string.trim(P.data.defaultWidth)!=""){U.width=P.data.defaultWidth}if(P.data.width!=null){U.width=P.data.width}y.push(U)}else{if(P.data.scrollType=="NORMAL"){var T=new Object();T.name=R;T.field=P.data.field;T.cellFormat=P.data.cellFormat;T.cellStyles=(settingsMap.get(NORMAL_COLUMN_STYLE_KEY)==null)?"color:black;":settingsMap.get(NORMAL_COLUMN_STYLE_KEY);if(P.data.businessOptions.businessType||P.data.businessOptions.type=="icon"||isCellForRuleStyling(P.data,A.custColumnsToStyle)||P.data.cellFormat!=null){T.get=formatBusinessOptionsData}T.businessOptions=P.data.businessOptions;if(P.data.longName!=null){T.longName=P.data.longName}if(P.data.defaultWidth!=null&&dojo.string.trim(P.data.defaultWidth)!=""){T.width=P.data.defaultWidth}if(P.data.width!=null){T.width=P.data.width}L.push(T)}}}if(P.data.sortType!=null){l=dojo.string.trim(l)+(g+((P.data.sortType=="ASC")?P.data.field:"-"+P.data.field));g=","}if(a&&P.data.queryOperator!=null&&dojo.string.trim(P.data.queryOperator)!=""){var O=P.data.queryOperand;if(P.data.queryOperand!=null&&!P.data.queryOperand.match(/%%(\S+)%%/)){O="'"+P.data.queryOperand+"'"}M=dojo.string.trim(M)+o+"["+P.data.field+"] "+dojo.string.trim(P.data.queryOperator);if(O!=null){M+=" "+O}o=" AND "}});console.debug("The computed filter is: "+M);var h=A.jsonContent;h.edit.columns=I;h.sort=l;h.queryType=a?"SIMPLE":"ADVANCED";h.recCountType=(D!=null&&D==true)?"TOTAL":"NONE";h.tableCellStyles=evalTableCellStyle(J);if(a){h.query=M}else{h.query=G}console.debug("Type of query "+(a?"SIMPLE":"ADVANCED")+" dialogJson filter: "+h.query);if(E!=null){h.queryMode=E}h.tagQuery=H;h.tagQueryMode=z;if(F==true){return validateAQ(null,h.query,h.edit.listBCType,h.id,h.queryMode,h.sort)}else{var m=new Object();m.sort=h.sort;m.query=h.query;m.type=h.edit.listBCType;m.recCountType=h.recCountType;m.mode=E;m.tagQuery=h.tagQuery;m.tagQueryMode=h.tagQueryMode;if(pageArgs!=null&&pageArgs.parentId!=null){m.parentId=pageArgs.parentId}if(pageArgs!=null&&pageArgs.childId!=null){m.childId=pageArgs.childId}var K=new gridViewClass(filterDisplayableGridCell(L),false);var x=new gridViewClass(filterDisplayableGridCell(y),true);h.fixedColumns[0][0].cells=x.cells;h.normalColumns[0][0].cells=K.cells;var u=new Array();u.push(x);u.push(K);updateFilterSortColumns(w,m,u,J);if(dojo.string.trim(p).indexOf("apply")<0){manageMenuItems(w,null)}if(dojo.string.trim(p)=="applyAndSave"){dojo.xhrPost({url:"../../../LandingCustRequest",content:{action:"save",subject:GLOBAL_ADMIN_VAR,json:dojo.toJson(h)},handleAs:"json",load:function(O){console.debug("accepting json data : "+O.status);console.debug("accepting json data : "+O.data)},error:function(O){console.error("Error Encountered in post: ",O)}})}}}function getItemsByIdentities(identities,identityField,srcItems){var resultsArr=new Array();dojo.forEach(identities,function(identity){dojo.forEach(srcItems,function(srcItem){var field=eval("srcItem."+identityField);if(field==identity){resultsArr.push(srcItem)}})});return resultsArr}function getUniqueItems(f,a,b){return resultsArr=dojo.filter(f,function(g){return !(dojo.some(a,function(h){return(h==g)}))})}function getColumnSortFilterInput(sortRadioItems,filterItems,sortedFields){var retSortString="";var retFilterString="";var sortConnector="";var filterConnector="";var oper="";dojo.forEach(sortedFields,function(fieldname){var field1="sortRadioItems."+fieldname;var sortTempVal=eval(field1);if(sortTempVal!="NONE"){if(sortTempVal=="ASC"){oper="+"}else{if(sortTempVal=="DESC"){oper="-"}}retSortString+=sortConnector+oper+fieldname;sortConnector=","}var field2="filterItems."+fieldname;var filterTempVal=eval(field2);if(dojo.string.trim(filterTempVal)!=""){retFilterString+=filterConnector+"["+fieldname+"] "+filterTempVal;filterConnector=" AND "}});var returnObj=new Object();returnObj.sort=retSortString;returnObj.query=retFilterString;return returnObj}function updateFilterSortColumns(a,b,f){return updateFilterSortColumns(a,b,f,null)}function updateFilterSortColumns(b,g,l,a){var h=new Array();if(custWidgetTableMap.get(b).originalBCType=="queryListBC"||custWidgetTableMap.get(b).originalBCType=="artifactListSelector"){h.push(custWidgetTableMap.get(b).uuid)}else{var f=custWidgetTableMap.get(b).viewId;h=custViewMap.get(f)}dojo.forEach(h,function(p,o){var m=dijit.byId(p);if(g.query!=null){m.model.query.query=g.query}if(g.sort!=null){m.model.query.sort=g.sort}if(g.parentId!=null){m.model.query.parentId=g.parentId}if(g.childId!=null){m.model.query.childId=g.childId}if(g.recCountType!=null){m.model.query.recCountType=g.recCountType}if(g.mode!=null){m.model.query.mode=g.mode}m.model.query.tagQuery=g.tagQuery;m.model.query.tagQueryMode=g.tagQueryMode;m.model.sortFields=null;if(l){setNewGridStructure(l,p)}if(a!=null){wordWrapGridCell(m,a)}updateCheckedMenuItem(wrapCheckedMenuItemLocatorPrefix+p,a);m.update();refreshWorkingGrid(m)})}function gridViewClass(b,a){this.noscroll=a;this.cells=new Array();this.cells[0]=b}function setSortArrows(a){var o=null;if(a.model!=null&&a.model.query!=null&&a.model.query.sort!=null){o=a.model.query.sort}if(o==null){return}var v=a.viewsHeaderNode;var b=dojo.query("th.dojoxGrid-cell",v);for(j=0;j<b.length;j++){var h=a.getCell(j);var f=h.field;var s=dojo.byId(b[j]);var u=h.name;if(o!=null&&o.length>0){var q=o;var p=q.split(",");for(i=0;i<p.length;i++){var m="dummy";var l=p[i].replace(/^\s+/,"").charAt(0);if(l=="-"||l=="+"){m=p[i].substring(p[i].indexOf(l)+1,p[i].length)}else{m=p[i].substring(p[i].indexOf(l),p[i].length)}var g="";if(m==f){if(l=="-"){s.innerHTML="";g='<div class="dojoxGrid-sort-up">';g+='<div class="gridArrowButtonChar"> ';g+="&#9650;";g+="</div>";g+=u;g+="</div> ";s.innerHTML=g}else{s.innerHTML="";g='<div class="dojoxGrid-sort-down">';g+='<div class="gridArrowButtonChar">';g+="&#9660;";g+="</div>";g+=u;g+="</div> ";s.innerHTML=g}}}}}}function yellowFade(b){console.debug("entered dojo yellowfade function .... ");if(b.domNode){var g=dijit.byNode(b.domNode.parentNode.parentNode.parentNode);setSortArrows(b);g.setLoadingAnimationOff();updateFilterAppliedText(b,"Filter Applied");if(b.model.store.getFakeRowCount()!=null){g.setRowCount((b.model.store.getServerRowCount()<0)?"Error":b.model.store.getServerRowCount());if(b.model.store.getServerRowCount()<0){updateErrorTooltip(b,b.model.store.getErrorMsg());g.setErrorStackPopUpOnContextMenu(true);g.setErrorStackMsg(b.model.store.getErrorStack())}else{g.setErrorStackPopUpOnContextMenu(false)}}else{g.setTitleRowCountNode("")}var f=b.model.store.getFakeRowCount();var h=b.viewsNode;console.debug("dojo attach point value "+h);var l=dojo.query("td.dojoxGrid-cell",h);if(dojo.isIE>0){var a=b.viewsNode.childNodes;dojo.forEach(a,function(q){var m=dijit.byNode(q);if(m.contentNode.clientHeight<m.scrollboxNode.clientHeight){var p=dojo.query(".dojoxGrid-row",h);var o=0;dojo.forEach(p,function(s){o+=s.clientHeight});m.contentNode.style.height=o+"px";console.debug("new height of the view is "+m.contentNode.style.height)}})}}}function createManageViewDialog(b,f){var a=getCustManageViewDetailsObj(b);var g=a.manageViewDialogRef;if(g){g.titleNode.firstChild.nodeValue="Edit "+a.jsonContent.title}if(!g){if(g==null&&a.jsonContent==null){if(f=="oper.edit"){a.jsonContent=dojo.clone(a.savedJsonContent)}}initFilterWipeNodes();var h=createDialogFramework(b,f);var g=new dijit.Dialog({refocus:false,title:evaluateManageViewTitle(a.jsonContent.title,f),execute:processDialogInput},h);dojo.connect(g,"onCancel",this,dojo.hitch(this,"destroyManageViewDialog",a));g.startup;a.manageViewDialogRef=g}setTimeout(function(){g.show();if(a.jsonContent.isQueryProblematic=="true"&&currentValidateButton!=undefined){try{currentValidateButton.domNode.click()}catch(l){console.log("implicit validate failed.no big deal. ignore me")}}},"0")}function getPersistedQueryMode(b){var a=getCustManageViewDetailsObj(b);return a.jsonContent.queryMode}function getCustManageViewDetailsObj(f){var b=null;if(f!=null){var a=(custWidgetTableMap.get(f)).viewId;if(a!=null){b=manageViewMap.get(a)}}return b}function evaluateManageViewTitle(a,b){var f="Manage "+a;if(b=="oper.edit"){f="Edit "+a}else{if(b=="oper.new"){f="Create new ... "}}return f}function initFilterWipeNodes(){simpleFilterTrueAppearance=new Array();simpleFilterFalseAppearance=new Array()}function validateAQ(h,f,l,a,b,g){var m=new Object();m.success=false;m.warningOnly=false;m.errorMessage="";if(h!=undefined&&h!=null){h.innerHTML="Validating..."}dojo.xhrPost({url:"../../../ListRequest",sync:true,content:{action:"validate",type:l,query:f,listBCId:a,mode:b,sort:g,subject:GLOBAL_ADMIN_VAR},handleAs:"json",load:function(o){m.warningOnly=true;if(o.status!=null&&o.status=="SUCCESS"){m.success=true;m.errorMessage="";if(h!=undefined&&h!=null){h.innerHTML="Validation Result : Success";dojo.removeClass(h,"spRed");dojo.addClass(h,"spGreen")}}else{m.errorMessage="Validation Result : "+o.errorMsg;m.success=false;if(h!=undefined&&h!=null){h.innerHTML="Validation Result : "+o.errorMsg;dojo.removeClass(h,"spGreen");dojo.addClass(h,"spRed")}}},error:function(o){console.error("Error Encountered in post: ",o);m.success=false;m.warningOnly=false;m.errorMessage=("Error Encountered in validating query (xhrpost) "+o);if(h!=undefined&&h!=null){h.innerHTML="Validation Result : "+m.errorMessage;dojo.removeClass(h,"spGreen");dojo.addClass(h,"spRed")}}});return m}function createAQNode(w,o,F,f,u){var z=document.createElement("table");var l=document.createElement("tbody");z.appendChild(l);var x=document.createElement("tr");l.appendChild(x);var m=document.createElement("tr");var E=document.createElement("td");var D=document.createElement("table");var B=document.createElement("tbody");E.appendChild(D);D.appendChild(B);x.appendChild(E);B.appendChild(m);var s=document.createElement("td");dojo.attr(s,{align:"left"});dojo.style(s,"width","610px");var C=document.createElement("label");C.innerHTML="Enter Where Clause:";dojo.addClass(C,"manageViewLabel");s.appendChild(C);m.appendChild(s);var q=document.createElement("td");dojo.attr(q,{align:"right"});dojo.style(q,"width","100px");var G=document.createElement("A");dojo.attr(G,{title:"Show field names to help in the creation of advanced query",href:"javascript:void(0);",onclick:function(){var a=getCustManageViewDetailsObj(u);var I=a.jsonContent.artifactType;var H=custArtifactPropsMap.get(I);var b=H.valSet();DashboardQryFieldSelector.openQryFieldSelectDialog(b,w)}});G.innerHTML="Show Field Names";q.appendChild(G);m.appendChild(q);var h=document.createElement("span");dojo.addClass(h,"aqValidationMessage");h.innerHTML="";var v=new dijit.form.Button({label:"Validate Advanced<br/>Query",onClick:function(b){var a=validateAQ(h,w.getValue(),o,F,(f!=null?f.getValue():getPersistedQueryMode(u)))}});currentValidateButton=v;var A=document.createElement("tr");l.appendChild(A);var g=document.createElement("td");g.appendChild(createAdvancedQueryLine(w.domNode,v.domNode));A.appendChild(g);var p=document.createElement("tr");l.appendChild(p);var y=document.createElement("td");dojo.attr(y,{colspan:"2"});p.appendChild(y);y.appendChild(h);return z}function createAdvancedQueryLine(g,b){var o=document.createElement("table");var h=document.createElement("tbody");o.appendChild(h);var l=document.createElement("tr");h.appendChild(l);var a=document.createElement("td");dojo.attr(a,{valign:"middle"});dojo.style(a,"width","720px");l.appendChild(a);a.appendChild(g);var m=document.createElement("td");dojo.attr(m,{valign:"middle"});dojo.style(m,"width","20px");l.appendChild(m);m.appendChild(document.createTextNode(""));var f=document.createElement("td");dojo.attr(f,{valign:"middle"});l.appendChild(f);f.appendChild(b);return o}function forEachWidget(b,a){dijit.registry.byClass(a).forEach(b)}function createAQContextMenu(){if(dijit.byId("progMenu1")==null){var b=new dijit.Menu({targetNodeIds:["liesl2"],id:"progMenu1"});var a=new dijit.Menu({parentMenu:b,id:"progSubMenu"});a.addChild(new dijit.MenuItem({label:"Submenu item",onClick:fClick}));a.addChild(new dijit.MenuItem({label:"Submenu item",onClick:fClick}));b.addChild(new dijit.PopupMenuItem({label:"Submenu",popup:a,id:"progPopupMenuItem"}));b.startup()}}function updateGridTitleById(b,f){var a=dijit.byNode(dojo.byId(b).parentNode.parentNode.parentNode);a.setTitle(f)}function wordWrapGridCell(a,b){console.debug("toggled button checked="+b);var f=a.structure;if(b!=undefined&&b!=null&&b==true){dojo.forEach(f,function(g){dojo.forEach(g.cells[0],function(l,h){l.formatter=null})})}else{dojo.forEach(f,function(g){dojo.forEach(g.cells[0],function(l,h){l.formatter=NO_WRAP_FORMATTER})})}setNewGridStructure(f,a.id)}var NO_WRAP_FORMATTER=function(a){return'<span style="white-space: nowrap">'+a+"</span>"};function getParsedDateValForWidget(b,a){var f=null;if(a!=undefined&&a=="day"){f=dojo.date.locale.parse(b,{datePattern:"dd-MMM-yyyy",selector:"date",locale:"en-us"})}else{f=dojo.date.locale.parse(b,{datePattern:"dd-MMM-yyyy",timePattern:"h:mm:ss z a",locale:"en-us"})}return f}function refreshWorkingGrid(a){a.model.query.customPreventCache=new Date().getTime();a.model.store.fakeRowCount=null;a.model.store.numRowEstimate=null;a.model.store.errorMsg=null;a.model.store.realRowCount=null;if(a.model.rowsPerPage==0){a.model.rowsPerPage=GRID_ROWSPERPAGE;a.model.requestRows()}else{a.model.refresh()}}function operatorFilterValidation(a,b){if(a.getValue()==null||dojo.string.trim(a.getValue())==""){if(b.getValue()!="IS NULL"||b.getValue()!="IS NOT NULL"){b.setValue("")}}}function operatorChangeValidation(a,b){if(b.getValue()==null||b.getValue()==""){a.setValue("")}if(b.getValue()=="IS NULL"||b.getValue()=="IS NOT NULL"){a.setValue(null);a.setDisabled(true)}else{a.setDisabled(false)}}function buildModeFSDataItems(b){if(b.length<=1){return null}var a=new Array();dojo.forEach(b,function(h){var g=new Object();g.label=h.name;g.name=h.name;g.id=h.value;a.push(g)});var f=new Object();f.identifier="id";f.items=a;return f}function destroyManageViewDialog(b,g,f){var a=b.manageViewDialogRef;a.hide();a.destroyRecursive();b.manageViewDialogRef=null;console.debug("cancel button for operation "+g);initFilterWipeNodes()}function validateSPDialogWidgetCopy(a){var b=false;b=a.validate(false);if(!b){a.state="Error";a._setStateClass()}return b}function evalNoOfFixedColumnThreshold(){if(applicationSettingsObj.noOfFixedColumnWarnThreshold!=undefined&&applicationSettingsObj.noOfFixedColumnWarnThreshold<=0){applicationSettingsObj.noOfFixedColumnWarnThreshold=4}TOO_MANY_FIXED_THRESHOLD_MET_WARNING=TOO_MANY_FIXED_THRESHOLD_MET_WARNING.replace("%%NO_OF_FIXED_COLUMN_THRESHOLD%%",applicationSettingsObj.noOfFixedColumnWarnThreshold)}function getAllExistingTags_manageView(g,l,u){var h=document.createDocumentFragment();var a=g.valSet();var q=g.keySet();a.sort();q.sort();var o="";var b="";var s=document.createElement("ul");dojo.style(s,{display:"block",padding:"0pt",margin:"0pt"});h.appendChild(s);var f="No Tags";if(a.length>0){f="Tags: "}var p=document.createElement("span");p.innerHTML=f;var m=document.createElement("li");m.appendChild(p);dojo.style(m,{display:"inline",padding:"0px"});s.appendChild(m);dojo.forEach(a,function(v,x){var C=document.createElement("li");dojo.style(C,{display:"inline",style:"vertical-align:middle;"});s.appendChild(C);var y=document.createElement("span");var w=document.createElement("A");dojo.attr(w,{title:v,style:"display:inline; vertical-align:middle; border: 1px none transparent;"});w.name=v;w.innerHTML=v;var B=document.createElement("A");dojo.attr(B,{name:"delete "+v+" tag",title:"delete "+v+" tag"});dojo.style(B,{display:"inline","vertical-align":"middle",border:"1px none transparent"});if(dojo.isIE>0){dojo.style(w,{position:"relative",top:"-4"})}B.onmouseout=function(){this.style.border="1px none transparent"};B.onmouseover=function(){this.style.border="1px solid #585858"};var z=document.createElement("img");z.name=v;dojo.attr(z,{src:"../images/remove.gif",style:"vertical-align:middle;"});dojo.connect(z,"onclick",this,dojo.hitch(null,"deleteTagQuery",z.name,g,l,u));B.appendChild(z);y.appendChild(w);y.appendChild(B);C.appendChild(y);var A=document.createElement("img");dojo.attr(A,{src:"../../../common/images/blank.gif",style:"vertical-align:middle",width:"10"});C.appendChild(A);dojo.attr(y,{style:"white-space:nowrap;"});o+=b+v;b=","});l.setContent(h);if(u!=undefined){u.setValue(o)}}function deleteTagQuery(b,g,f,a){g.remove(b);getAllExistingTags_manageView(g,f,a)}function addTagQuery(b,g,f,a){g.put(b,b);getAllExistingTags_manageView(g,f,a)}function getMyExistingArtifactTypeTerms_manageView(a,f,h,o,p,m){if(a.domNode.style.display=="none"){return}var g=document.createDocumentFragment();var b="<span>Loading Terms....</span>";a.setContent(b);var l=DashboardTagging.getMyExistingArtifactTypeTermsXHR(h,o);l.addCallback(function(x,u){if(x.status=="SUCCESS"){var s=x.data.artifactTypeTerms;var w=null;var q=document.createElement("ul");dojo.style(q,{display:"block",padding:"0pt",margin:"0pt"});g.appendChild(q);if(s.length>0){w=document.createElement("span");w.innerHTML="Click tag to select : "}else{w=document.createElement("span");w.innerHTML="No Existing tags"}var v=document.createElement("li");v.appendChild(w);dojo.style(v,{display:"inline",padding:"0px"});q.appendChild(v);s.sort(sort_by("tag",false));dojo.forEach(s,function(F,z){var C=z%2;var B="spTermEven";if(C>0){B="spTermOdd"}var E=document.createElement("li");dojo.style(E,{display:"inline"});var A=document.createElement("span");dojo.style(A,{"vertical-align":"middle","white-space":"nowrap"});var y=document.createElement("A");dojo.attr(y,{name:F.tag,title:"add "+F.tag+" tag",style:"display:inline; vertical-align:middle; border: 1px none transparent;"});dojo.addClass(y,B);y.onmouseout=function(){this.style.border="1px none transparent"};y.onmouseover=function(){this.style.border="1px solid #585858"};y.innerHTML=F.tag;dojo.connect(y,"onclick",this,dojo.hitch(null,"addTagQuery",y.name,f,m,p));E.appendChild(A);A.appendChild(y);var D=document.createElement("img");dojo.attr(D,{src:"../../../common/images/blank.gif",style:"vertical-align:middle",width:"10"});E.appendChild(D);q.appendChild(E)});a.setContent(g)}else{alert("Problem encountered at getMyExistingArtifactTypeTerms_manageView function")}});l.addErrback(function(s,q){alert("Problem encountered at getMyExistingArtifactTypeTerms_manageView function");console.debug("Problem encountered at getMyExistingArtifactTypeTerms_manageView function")})}dojo.require("dijit.form.Button");dojo.extend(dijit.form.DropDownButton,{_onArrowClick:function(a){console.debug("inside the _onArrowClick in button.js");if(this.disabled||this.readOnly){return}this._toggleDropDown();a.stopPropagation()}});